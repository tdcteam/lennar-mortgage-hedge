/*! For license information please see main.c743871e.js.LICENSE.txt */
(()=>{var e={502:(e,t,i)=>{"use strict";var n=i(791),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?r:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=r;var d=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(g){var o=p(i);o&&o!==g&&e(t,o,n)}var r=c(i);h&&(r=r.concat(h(i)));for(var a=l(t),m=l(i),v=0;v<r.length;++v){var f=r[v];if(!s[f]&&(!n||!n[f])&&(!m||!m[f])&&(!a||!a[f])){var y=u(i,f);try{d(t,f,y)}catch(b){}}}}return t}},747:function(e,t,i){var n;e=i.nmd(e),function(){var o,s="Expected a function",r="__lodash_hash_undefined__",a="__lodash_placeholder__",l=16,d=32,c=64,h=128,u=256,p=1/0,g=9007199254740991,m=NaN,v=4294967295,f=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",d],["partialRight",c],["rearg",u]],y="[object Arguments]",b="[object Array]",C="[object Boolean]",x="[object Date]",w="[object Error]",S="[object Function]",M="[object GeneratorFunction]",D="[object Map]",k="[object Number]",I="[object Object]",A="[object Promise]",T="[object RegExp]",E="[object Set]",R="[object String]",L="[object Symbol]",P="[object WeakMap]",N="[object ArrayBuffer]",F="[object DataView]",O="[object Float32Array]",B="[object Float64Array]",G="[object Int8Array]",z="[object Int16Array]",_="[object Int32Array]",V="[object Uint8Array]",H="[object Uint8ClampedArray]",W="[object Uint16Array]",j="[object Uint32Array]",U=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,q=RegExp(Z.source),Q=RegExp(X.source),J=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ie=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,se=RegExp(oe.source),re=/^\s+/,ae=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,de=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,Ce=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",De="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Re="['\u2019]",Le="["+Me+"]",Pe="["+Ee+"]",Ne="["+De+"]",Fe="\\d+",Oe="["+ke+"]",Be="["+Ie+"]",Ge="[^"+Me+Ee+Fe+ke+Ie+Ae+"]",ze="\\ud83c[\\udffb-\\udfff]",_e="[^"+Me+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",He="[\\ud800-\\udbff][\\udc00-\\udfff]",We="["+Ae+"]",je="\\u200d",Ue="(?:"+Be+"|"+Ge+")",Ke="(?:"+We+"|"+Ge+")",Ye="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Ne+"|"+ze+")"+"?",qe="["+Te+"]?",Qe=qe+Xe+("(?:"+je+"(?:"+[_e,Ve,He].join("|")+")"+qe+Xe+")*"),Je="(?:"+[Oe,Ve,He].join("|")+")"+Qe,$e="(?:"+[_e+Ne+"?",Ne,Ve,He,Le].join("|")+")",et=RegExp(Re,"g"),tt=RegExp(Ne,"g"),it=RegExp(ze+"(?="+ze+")|"+$e+Qe,"g"),nt=RegExp([We+"?"+Be+"+"+Ye+"(?="+[Pe,We,"$"].join("|")+")",Ke+"+"+Ze+"(?="+[Pe,We+Ue,"$"].join("|")+")",We+"?"+Ue+"+"+Ye,We+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fe,Je].join("|"),"g"),ot=RegExp("["+je+Me+De+Te+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,lt={};lt[O]=lt[B]=lt[G]=lt[z]=lt[_]=lt[V]=lt[H]=lt[W]=lt[j]=!0,lt[y]=lt[b]=lt[N]=lt[C]=lt[F]=lt[x]=lt[w]=lt[S]=lt[D]=lt[k]=lt[I]=lt[T]=lt[E]=lt[R]=lt[P]=!1;var dt={};dt[y]=dt[b]=dt[N]=dt[F]=dt[C]=dt[x]=dt[O]=dt[B]=dt[G]=dt[z]=dt[_]=dt[D]=dt[k]=dt[I]=dt[T]=dt[E]=dt[R]=dt[L]=dt[V]=dt[H]=dt[W]=dt[j]=!0,dt[w]=dt[S]=dt[P]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,ut=parseInt,pt="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,gt="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||gt||Function("return this")(),vt=t&&!t.nodeType&&t,ft=vt&&e&&!e.nodeType&&e,yt=ft&&ft.exports===vt,bt=yt&&pt.process,Ct=function(){try{var e=ft&&ft.require&&ft.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),xt=Ct&&Ct.isArrayBuffer,wt=Ct&&Ct.isDate,St=Ct&&Ct.isMap,Mt=Ct&&Ct.isRegExp,Dt=Ct&&Ct.isSet,kt=Ct&&Ct.isTypedArray;function It(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function At(e,t,i,n){for(var o=-1,s=null==e?0:e.length;++o<s;){var r=e[o];t(n,r,i(r),e)}return n}function Tt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function Et(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function Rt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function Lt(e,t){for(var i=-1,n=null==e?0:e.length,o=0,s=[];++i<n;){var r=e[i];t(r,i,e)&&(s[o++]=r)}return s}function Pt(e,t){return!!(null==e?0:e.length)&&Wt(e,t,0)>-1}function Nt(e,t,i){for(var n=-1,o=null==e?0:e.length;++n<o;)if(i(t,e[n]))return!0;return!1}function Ft(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}function Ot(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}function Bt(e,t,i,n){var o=-1,s=null==e?0:e.length;for(n&&s&&(i=e[++o]);++o<s;)i=t(i,e[o],o,e);return i}function Gt(e,t,i,n){var o=null==e?0:e.length;for(n&&o&&(i=e[--o]);o--;)i=t(i,e[o],o,e);return i}function zt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var _t=Yt("length");function Vt(e,t,i){var n;return i(e,(function(e,i,o){if(t(e,i,o))return n=i,!1})),n}function Ht(e,t,i,n){for(var o=e.length,s=i+(n?1:-1);n?s--:++s<o;)if(t(e[s],s,e))return s;return-1}function Wt(e,t,i){return t===t?function(e,t,i){var n=i-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,i):Ht(e,Ut,i)}function jt(e,t,i,n){for(var o=i-1,s=e.length;++o<s;)if(n(e[o],t))return o;return-1}function Ut(e){return e!==e}function Kt(e,t){var i=null==e?0:e.length;return i?qt(e,t)/i:m}function Yt(e){return function(t){return null==t?o:t[e]}}function Zt(e){return function(t){return null==e?o:e[t]}}function Xt(e,t,i,n,o){return o(e,(function(e,o,s){i=n?(n=!1,e):t(i,e,o,s)})),i}function qt(e,t){for(var i,n=-1,s=e.length;++n<s;){var r=t(e[n]);r!==o&&(i=i===o?r:i+r)}return i}function Qt(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Jt(e){return e?e.slice(0,mi(e)+1).replace(re,""):e}function $t(e){return function(t){return e(t)}}function ei(e,t){return Ft(t,(function(t){return e[t]}))}function ti(e,t){return e.has(t)}function ii(e,t){for(var i=-1,n=e.length;++i<n&&Wt(t,e[i],0)>-1;);return i}function ni(e,t){for(var i=e.length;i--&&Wt(t,e[i],0)>-1;);return i}var oi=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),si=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ri(e){return"\\"+ct[e]}function ai(e){return ot.test(e)}function li(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function di(e,t){return function(i){return e(t(i))}}function ci(e,t){for(var i=-1,n=e.length,o=0,s=[];++i<n;){var r=e[i];r!==t&&r!==a||(e[i]=a,s[o++]=i)}return s}function hi(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function ui(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}function pi(e){return ai(e)?function(e){var t=it.lastIndex=0;for(;it.test(e);)++t;return t}(e):_t(e)}function gi(e){return ai(e)?function(e){return e.match(it)||[]}(e):function(e){return e.split("")}(e)}function mi(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var vi=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var fi=function e(t){var i=(t=null==t?mt:fi.defaults(mt.Object(),t,fi.pick(mt,rt))).Array,n=t.Date,ae=t.Error,Me=t.Function,De=t.Math,ke=t.Object,Ie=t.RegExp,Ae=t.String,Te=t.TypeError,Ee=i.prototype,Re=Me.prototype,Le=ke.prototype,Pe=t["__core-js_shared__"],Ne=Re.toString,Fe=Le.hasOwnProperty,Oe=0,Be=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ge=Le.toString,ze=Ne.call(ke),_e=mt._,Ve=Ie("^"+Ne.call(Fe).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=yt?t.Buffer:o,We=t.Symbol,je=t.Uint8Array,Ue=He?He.allocUnsafe:o,Ke=di(ke.getPrototypeOf,ke),Ye=ke.create,Ze=Le.propertyIsEnumerable,Xe=Ee.splice,qe=We?We.isConcatSpreadable:o,Qe=We?We.iterator:o,Je=We?We.toStringTag:o,$e=function(){try{var e=us(ke,"defineProperty");return e({},"",{}),e}catch(t){}}(),it=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,ot=n&&n.now!==mt.Date.now&&n.now,ct=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=De.ceil,gt=De.floor,vt=ke.getOwnPropertySymbols,ft=He?He.isBuffer:o,bt=t.isFinite,Ct=Ee.join,_t=di(ke.keys,ke),Zt=De.max,yi=De.min,bi=n.now,Ci=t.parseInt,xi=De.random,wi=Ee.reverse,Si=us(t,"DataView"),Mi=us(t,"Map"),Di=us(t,"Promise"),ki=us(t,"Set"),Ii=us(t,"WeakMap"),Ai=us(ke,"create"),Ti=Ii&&new Ii,Ei={},Ri=Gs(Si),Li=Gs(Mi),Pi=Gs(Di),Ni=Gs(ki),Fi=Gs(Ii),Oi=We?We.prototype:o,Bi=Oi?Oi.valueOf:o,Gi=Oi?Oi.toString:o;function zi(e){if(ta(e)&&!jr(e)&&!(e instanceof Wi)){if(e instanceof Hi)return e;if(Fe.call(e,"__wrapped__"))return zs(e)}return new Hi(e)}var _i=function(){function e(){}return function(t){if(!ea(t))return{};if(Ye)return Ye(t);e.prototype=t;var i=new e;return e.prototype=o,i}}();function Vi(){}function Hi(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Wi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function ji(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ui(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ki(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Yi(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ki;++t<i;)this.add(e[t])}function Zi(e){var t=this.__data__=new Ui(e);this.size=t.size}function Xi(e,t){var i=jr(e),n=!i&&Wr(e),o=!i&&!n&&Zr(e),s=!i&&!n&&!o&&da(e),r=i||n||o||s,a=r?Qt(e.length,Ae):[],l=a.length;for(var d in e)!t&&!Fe.call(e,d)||r&&("length"==d||o&&("offset"==d||"parent"==d)||s&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||bs(d,l))||a.push(d);return a}function qi(e){var t=e.length;return t?e[Zn(0,t-1)]:o}function Qi(e,t){return Fs(Eo(e),an(t,0,e.length))}function Ji(e){return Fs(Eo(e))}function $i(e,t,i){(i!==o&&!_r(e[t],i)||i===o&&!(t in e))&&sn(e,t,i)}function en(e,t,i){var n=e[t];Fe.call(e,t)&&_r(n,i)&&(i!==o||t in e)||sn(e,t,i)}function tn(e,t){for(var i=e.length;i--;)if(_r(e[i][0],t))return i;return-1}function nn(e,t,i,n){return un(e,(function(e,o,s){t(n,e,i(e),s)})),n}function on(e,t){return e&&Ro(t,Ra(t),e)}function sn(e,t,i){"__proto__"==t&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function rn(e,t){for(var n=-1,s=t.length,r=i(s),a=null==e;++n<s;)r[n]=a?o:ka(e,t[n]);return r}function an(e,t,i){return e===e&&(i!==o&&(e=e<=i?e:i),t!==o&&(e=e>=t?e:t)),e}function ln(e,t,i,n,s,r){var a,l=1&t,d=2&t,c=4&t;if(i&&(a=s?i(e,n,s,r):i(e)),a!==o)return a;if(!ea(e))return e;var h=jr(e);if(h){if(a=function(e){var t=e.length,i=new e.constructor(t);t&&"string"==typeof e[0]&&Fe.call(e,"index")&&(i.index=e.index,i.input=e.input);return i}(e),!l)return Eo(e,a)}else{var u=ms(e),p=u==S||u==M;if(Zr(e))return Mo(e,l);if(u==I||u==y||p&&!s){if(a=d||p?{}:fs(e),!l)return d?function(e,t){return Ro(e,gs(e),t)}(e,function(e,t){return e&&Ro(t,La(t),e)}(a,e)):function(e,t){return Ro(e,ps(e),t)}(e,on(a,e))}else{if(!dt[u])return s?e:{};a=function(e,t,i){var n=e.constructor;switch(t){case N:return Do(e);case C:case x:return new n(+e);case F:return function(e,t){var i=t?Do(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case O:case B:case G:case z:case _:case V:case H:case W:case j:return ko(e,i);case D:return new n;case k:case R:return new n(e);case T:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new n;case L:return o=e,Bi?ke(Bi.call(o)):{}}var o}(e,u,l)}}r||(r=new Zi);var g=r.get(e);if(g)return g;r.set(e,a),ra(e)?e.forEach((function(n){a.add(ln(n,t,i,n,e,r))})):ia(e)&&e.forEach((function(n,o){a.set(o,ln(n,t,i,o,e,r))}));var m=h?o:(c?d?ss:os:d?La:Ra)(e);return Tt(m||e,(function(n,o){m&&(n=e[o=n]),en(a,o,ln(n,t,i,o,e,r))})),a}function dn(e,t,i){var n=i.length;if(null==e)return!n;for(e=ke(e);n--;){var s=i[n],r=t[s],a=e[s];if(a===o&&!(s in e)||!r(a))return!1}return!0}function cn(e,t,i){if("function"!=typeof e)throw new Te(s);return Rs((function(){e.apply(o,i)}),t)}function hn(e,t,i,n){var o=-1,s=Pt,r=!0,a=e.length,l=[],d=t.length;if(!a)return l;i&&(t=Ft(t,$t(i))),n?(s=Nt,r=!1):t.length>=200&&(s=ti,r=!1,t=new Yi(t));e:for(;++o<a;){var c=e[o],h=null==i?c:i(c);if(c=n||0!==c?c:0,r&&h===h){for(var u=d;u--;)if(t[u]===h)continue e;l.push(c)}else s(t,h,n)||l.push(c)}return l}zi.templateSettings={escape:J,evaluate:$,interpolate:ee,variable:"",imports:{_:zi}},zi.prototype=Vi.prototype,zi.prototype.constructor=zi,Hi.prototype=_i(Vi.prototype),Hi.prototype.constructor=Hi,Wi.prototype=_i(Vi.prototype),Wi.prototype.constructor=Wi,ji.prototype.clear=function(){this.__data__=Ai?Ai(null):{},this.size=0},ji.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ji.prototype.get=function(e){var t=this.__data__;if(Ai){var i=t[e];return i===r?o:i}return Fe.call(t,e)?t[e]:o},ji.prototype.has=function(e){var t=this.__data__;return Ai?t[e]!==o:Fe.call(t,e)},ji.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ai&&t===o?r:t,this},Ui.prototype.clear=function(){this.__data__=[],this.size=0},Ui.prototype.delete=function(e){var t=this.__data__,i=tn(t,e);return!(i<0)&&(i==t.length-1?t.pop():Xe.call(t,i,1),--this.size,!0)},Ui.prototype.get=function(e){var t=this.__data__,i=tn(t,e);return i<0?o:t[i][1]},Ui.prototype.has=function(e){return tn(this.__data__,e)>-1},Ui.prototype.set=function(e,t){var i=this.__data__,n=tn(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Ki.prototype.clear=function(){this.size=0,this.__data__={hash:new ji,map:new(Mi||Ui),string:new ji}},Ki.prototype.delete=function(e){var t=cs(this,e).delete(e);return this.size-=t?1:0,t},Ki.prototype.get=function(e){return cs(this,e).get(e)},Ki.prototype.has=function(e){return cs(this,e).has(e)},Ki.prototype.set=function(e,t){var i=cs(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},Yi.prototype.add=Yi.prototype.push=function(e){return this.__data__.set(e,r),this},Yi.prototype.has=function(e){return this.__data__.has(e)},Zi.prototype.clear=function(){this.__data__=new Ui,this.size=0},Zi.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Zi.prototype.get=function(e){return this.__data__.get(e)},Zi.prototype.has=function(e){return this.__data__.has(e)},Zi.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Ui){var n=i.__data__;if(!Mi||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ki(n)}return i.set(e,t),this.size=i.size,this};var un=No(Cn),pn=No(xn,!0);function gn(e,t){var i=!0;return un(e,(function(e,n,o){return i=!!t(e,n,o)})),i}function mn(e,t,i){for(var n=-1,s=e.length;++n<s;){var r=e[n],a=t(r);if(null!=a&&(l===o?a===a&&!la(a):i(a,l)))var l=a,d=r}return d}function vn(e,t){var i=[];return un(e,(function(e,n,o){t(e,n,o)&&i.push(e)})),i}function fn(e,t,i,n,o){var s=-1,r=e.length;for(i||(i=ys),o||(o=[]);++s<r;){var a=e[s];t>0&&i(a)?t>1?fn(a,t-1,i,n,o):Ot(o,a):n||(o[o.length]=a)}return o}var yn=Fo(),bn=Fo(!0);function Cn(e,t){return e&&yn(e,t,Ra)}function xn(e,t){return e&&bn(e,t,Ra)}function wn(e,t){return Lt(t,(function(t){return Qr(e[t])}))}function Sn(e,t){for(var i=0,n=(t=Co(t,e)).length;null!=e&&i<n;)e=e[Bs(t[i++])];return i&&i==n?e:o}function Mn(e,t,i){var n=t(e);return jr(e)?n:Ot(n,i(e))}function Dn(e){return null==e?e===o?"[object Undefined]":"[object Null]":Je&&Je in ke(e)?function(e){var t=Fe.call(e,Je),i=e[Je];try{e[Je]=o;var n=!0}catch(r){}var s=Ge.call(e);n&&(t?e[Je]=i:delete e[Je]);return s}(e):function(e){return Ge.call(e)}(e)}function kn(e,t){return e>t}function In(e,t){return null!=e&&Fe.call(e,t)}function An(e,t){return null!=e&&t in ke(e)}function Tn(e,t,n){for(var s=n?Nt:Pt,r=e[0].length,a=e.length,l=a,d=i(a),c=1/0,h=[];l--;){var u=e[l];l&&t&&(u=Ft(u,$t(t))),c=yi(u.length,c),d[l]=!n&&(t||r>=120&&u.length>=120)?new Yi(l&&u):o}u=e[0];var p=-1,g=d[0];e:for(;++p<r&&h.length<c;){var m=u[p],v=t?t(m):m;if(m=n||0!==m?m:0,!(g?ti(g,v):s(h,v,n))){for(l=a;--l;){var f=d[l];if(!(f?ti(f,v):s(e[l],v,n)))continue e}g&&g.push(v),h.push(m)}}return h}function En(e,t,i){var n=null==(e=As(e,t=Co(t,e)))?e:e[Bs(qs(t))];return null==n?o:It(n,e,i)}function Rn(e){return ta(e)&&Dn(e)==y}function Ln(e,t,i,n,s){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:function(e,t,i,n,s,r){var a=jr(e),l=jr(t),d=a?b:ms(e),c=l?b:ms(t),h=(d=d==y?I:d)==I,u=(c=c==y?I:c)==I,p=d==c;if(p&&Zr(e)){if(!Zr(t))return!1;a=!0,h=!1}if(p&&!h)return r||(r=new Zi),a||da(e)?is(e,t,i,n,s,r):function(e,t,i,n,o,s,r){switch(i){case F:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!s(new je(e),new je(t)));case C:case x:case k:return _r(+e,+t);case w:return e.name==t.name&&e.message==t.message;case T:case R:return e==t+"";case D:var a=li;case E:var l=1&n;if(a||(a=hi),e.size!=t.size&&!l)return!1;var d=r.get(e);if(d)return d==t;n|=2,r.set(e,t);var c=is(a(e),a(t),n,o,s,r);return r.delete(e),c;case L:if(Bi)return Bi.call(e)==Bi.call(t)}return!1}(e,t,d,i,n,s,r);if(!(1&i)){var g=h&&Fe.call(e,"__wrapped__"),m=u&&Fe.call(t,"__wrapped__");if(g||m){var v=g?e.value():e,f=m?t.value():t;return r||(r=new Zi),s(v,f,i,n,r)}}if(!p)return!1;return r||(r=new Zi),function(e,t,i,n,s,r){var a=1&i,l=os(e),d=l.length,c=os(t),h=c.length;if(d!=h&&!a)return!1;var u=d;for(;u--;){var p=l[u];if(!(a?p in t:Fe.call(t,p)))return!1}var g=r.get(e),m=r.get(t);if(g&&m)return g==t&&m==e;var v=!0;r.set(e,t),r.set(t,e);var f=a;for(;++u<d;){var y=e[p=l[u]],b=t[p];if(n)var C=a?n(b,y,p,t,e,r):n(y,b,p,e,t,r);if(!(C===o?y===b||s(y,b,i,n,r):C)){v=!1;break}f||(f="constructor"==p)}if(v&&!f){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return r.delete(e),r.delete(t),v}(e,t,i,n,s,r)}(e,t,i,n,Ln,s))}function Pn(e,t,i,n){var s=i.length,r=s,a=!n;if(null==e)return!r;for(e=ke(e);s--;){var l=i[s];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<r;){var d=(l=i[s])[0],c=e[d],h=l[1];if(a&&l[2]){if(c===o&&!(d in e))return!1}else{var u=new Zi;if(n)var p=n(c,h,d,e,t,u);if(!(p===o?Ln(h,c,3,n,u):p))return!1}}return!0}function Nn(e){return!(!ea(e)||(t=e,Be&&Be in t))&&(Qr(e)?Ve:ye).test(Gs(e));var t}function Fn(e){return"function"==typeof e?e:null==e?nl:"object"==typeof e?jr(e)?Vn(e[0],e[1]):_n(e):ul(e)}function On(e){if(!Ms(e))return _t(e);var t=[];for(var i in ke(e))Fe.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Bn(e){if(!ea(e))return function(e){var t=[];if(null!=e)for(var i in ke(e))t.push(i);return t}(e);var t=Ms(e),i=[];for(var n in e)("constructor"!=n||!t&&Fe.call(e,n))&&i.push(n);return i}function Gn(e,t){return e<t}function zn(e,t){var n=-1,o=Kr(e)?i(e.length):[];return un(e,(function(e,i,s){o[++n]=t(e,i,s)})),o}function _n(e){var t=hs(e);return 1==t.length&&t[0][2]?ks(t[0][0],t[0][1]):function(i){return i===e||Pn(i,e,t)}}function Vn(e,t){return xs(e)&&Ds(t)?ks(Bs(e),t):function(i){var n=ka(i,e);return n===o&&n===t?Ia(i,e):Ln(t,n,3)}}function Hn(e,t,i,n,s){e!==t&&yn(t,(function(r,a){if(s||(s=new Zi),ea(r))!function(e,t,i,n,s,r,a){var l=Ts(e,i),d=Ts(t,i),c=a.get(d);if(c)return void $i(e,i,c);var h=r?r(l,d,i+"",e,t,a):o,u=h===o;if(u){var p=jr(d),g=!p&&Zr(d),m=!p&&!g&&da(d);h=d,p||g||m?jr(l)?h=l:Yr(l)?h=Eo(l):g?(u=!1,h=Mo(d,!0)):m?(u=!1,h=ko(d,!0)):h=[]:oa(d)||Wr(d)?(h=l,Wr(l)?h=fa(l):ea(l)&&!Qr(l)||(h=fs(d))):u=!1}u&&(a.set(d,h),s(h,d,n,r,a),a.delete(d));$i(e,i,h)}(e,t,a,i,Hn,n,s);else{var l=n?n(Ts(e,a),r,a+"",e,t,s):o;l===o&&(l=r),$i(e,a,l)}}),La)}function Wn(e,t){var i=e.length;if(i)return bs(t+=t<0?i:0,i)?e[t]:o}function jn(e,t,i){t=t.length?Ft(t,(function(e){return jr(e)?function(t){return Sn(t,1===e.length?e[0]:e)}:e})):[nl];var n=-1;t=Ft(t,$t(ds()));var o=zn(e,(function(e,i,o){var s=Ft(t,(function(t){return t(e)}));return{criteria:s,index:++n,value:e}}));return function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}(o,(function(e,t){return function(e,t,i){var n=-1,o=e.criteria,s=t.criteria,r=o.length,a=i.length;for(;++n<r;){var l=Io(o[n],s[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return e.index-t.index}(e,t,i)}))}function Un(e,t,i){for(var n=-1,o=t.length,s={};++n<o;){var r=t[n],a=Sn(e,r);i(a,r)&&$n(s,Co(r,e),a)}return s}function Kn(e,t,i,n){var o=n?jt:Wt,s=-1,r=t.length,a=e;for(e===t&&(t=Eo(t)),i&&(a=Ft(e,$t(i)));++s<r;)for(var l=0,d=t[s],c=i?i(d):d;(l=o(a,c,l,n))>-1;)a!==e&&Xe.call(a,l,1),Xe.call(e,l,1);return e}function Yn(e,t){for(var i=e?t.length:0,n=i-1;i--;){var o=t[i];if(i==n||o!==s){var s=o;bs(o)?Xe.call(e,o,1):uo(e,o)}}return e}function Zn(e,t){return e+gt(xi()*(t-e+1))}function Xn(e,t){var i="";if(!e||t<1||t>g)return i;do{t%2&&(i+=e),(t=gt(t/2))&&(e+=e)}while(t);return i}function qn(e,t){return Ls(Is(e,t,nl),e+"")}function Qn(e){return qi(_a(e))}function Jn(e,t){var i=_a(e);return Fs(i,an(t,0,i.length))}function $n(e,t,i,n){if(!ea(e))return e;for(var s=-1,r=(t=Co(t,e)).length,a=r-1,l=e;null!=l&&++s<r;){var d=Bs(t[s]),c=i;if("__proto__"===d||"constructor"===d||"prototype"===d)return e;if(s!=a){var h=l[d];(c=n?n(h,d,l):o)===o&&(c=ea(h)?h:bs(t[s+1])?[]:{})}en(l,d,c),l=l[d]}return e}var eo=Ti?function(e,t){return Ti.set(e,t),e}:nl,to=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:nl;function io(e){return Fs(_a(e))}function no(e,t,n){var o=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var r=i(s);++o<s;)r[o]=e[o+t];return r}function oo(e,t){var i;return un(e,(function(e,n,o){return!(i=t(e,n,o))})),!!i}function so(e,t,i){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t===t&&o<=2147483647){for(;n<o;){var s=n+o>>>1,r=e[s];null!==r&&!la(r)&&(i?r<=t:r<t)?n=s+1:o=s}return o}return ro(e,t,nl,i)}function ro(e,t,i,n){var s=0,r=null==e?0:e.length;if(0===r)return 0;for(var a=(t=i(t))!==t,l=null===t,d=la(t),c=t===o;s<r;){var h=gt((s+r)/2),u=i(e[h]),p=u!==o,g=null===u,m=u===u,v=la(u);if(a)var f=n||m;else f=c?m&&(n||p):l?m&&p&&(n||!g):d?m&&p&&!g&&(n||!v):!g&&!v&&(n?u<=t:u<t);f?s=h+1:r=h}return yi(r,4294967294)}function ao(e,t){for(var i=-1,n=e.length,o=0,s=[];++i<n;){var r=e[i],a=t?t(r):r;if(!i||!_r(a,l)){var l=a;s[o++]=0===r?0:r}}return s}function lo(e){return"number"==typeof e?e:la(e)?m:+e}function co(e){if("string"==typeof e)return e;if(jr(e))return Ft(e,co)+"";if(la(e))return Gi?Gi.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ho(e,t,i){var n=-1,o=Pt,s=e.length,r=!0,a=[],l=a;if(i)r=!1,o=Nt;else if(s>=200){var d=t?null:qo(e);if(d)return hi(d);r=!1,o=ti,l=new Yi}else l=t?[]:a;e:for(;++n<s;){var c=e[n],h=t?t(c):c;if(c=i||0!==c?c:0,r&&h===h){for(var u=l.length;u--;)if(l[u]===h)continue e;t&&l.push(h),a.push(c)}else o(l,h,i)||(l!==a&&l.push(h),a.push(c))}return a}function uo(e,t){return null==(e=As(e,t=Co(t,e)))||delete e[Bs(qs(t))]}function po(e,t,i,n){return $n(e,t,i(Sn(e,t)),n)}function go(e,t,i,n){for(var o=e.length,s=n?o:-1;(n?s--:++s<o)&&t(e[s],s,e););return i?no(e,n?0:s,n?s+1:o):no(e,n?s+1:0,n?o:s)}function mo(e,t){var i=e;return i instanceof Wi&&(i=i.value()),Bt(t,(function(e,t){return t.func.apply(t.thisArg,Ot([e],t.args))}),i)}function vo(e,t,n){var o=e.length;if(o<2)return o?ho(e[0]):[];for(var s=-1,r=i(o);++s<o;)for(var a=e[s],l=-1;++l<o;)l!=s&&(r[s]=hn(r[s]||a,e[l],t,n));return ho(fn(r,1),t,n)}function fo(e,t,i){for(var n=-1,s=e.length,r=t.length,a={};++n<s;){var l=n<r?t[n]:o;i(a,e[n],l)}return a}function yo(e){return Yr(e)?e:[]}function bo(e){return"function"==typeof e?e:nl}function Co(e,t){return jr(e)?e:xs(e,t)?[e]:Os(ya(e))}var xo=qn;function wo(e,t,i){var n=e.length;return i=i===o?n:i,!t&&i>=n?e:no(e,t,i)}var So=it||function(e){return mt.clearTimeout(e)};function Mo(e,t){if(t)return e.slice();var i=e.length,n=Ue?Ue(i):new e.constructor(i);return e.copy(n),n}function Do(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function ko(e,t){var i=t?Do(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Io(e,t){if(e!==t){var i=e!==o,n=null===e,s=e===e,r=la(e),a=t!==o,l=null===t,d=t===t,c=la(t);if(!l&&!c&&!r&&e>t||r&&a&&d&&!l&&!c||n&&a&&d||!i&&d||!s)return 1;if(!n&&!r&&!c&&e<t||c&&i&&s&&!n&&!r||l&&i&&s||!a&&s||!d)return-1}return 0}function Ao(e,t,n,o){for(var s=-1,r=e.length,a=n.length,l=-1,d=t.length,c=Zt(r-a,0),h=i(d+c),u=!o;++l<d;)h[l]=t[l];for(;++s<a;)(u||s<r)&&(h[n[s]]=e[s]);for(;c--;)h[l++]=e[s++];return h}function To(e,t,n,o){for(var s=-1,r=e.length,a=-1,l=n.length,d=-1,c=t.length,h=Zt(r-l,0),u=i(h+c),p=!o;++s<h;)u[s]=e[s];for(var g=s;++d<c;)u[g+d]=t[d];for(;++a<l;)(p||s<r)&&(u[g+n[a]]=e[s++]);return u}function Eo(e,t){var n=-1,o=e.length;for(t||(t=i(o));++n<o;)t[n]=e[n];return t}function Ro(e,t,i,n){var s=!i;i||(i={});for(var r=-1,a=t.length;++r<a;){var l=t[r],d=n?n(i[l],e[l],l,i,e):o;d===o&&(d=e[l]),s?sn(i,l,d):en(i,l,d)}return i}function Lo(e,t){return function(i,n){var o=jr(i)?At:nn,s=t?t():{};return o(i,e,ds(n,2),s)}}function Po(e){return qn((function(t,i){var n=-1,s=i.length,r=s>1?i[s-1]:o,a=s>2?i[2]:o;for(r=e.length>3&&"function"==typeof r?(s--,r):o,a&&Cs(i[0],i[1],a)&&(r=s<3?o:r,s=1),t=ke(t);++n<s;){var l=i[n];l&&e(t,l,n,r)}return t}))}function No(e,t){return function(i,n){if(null==i)return i;if(!Kr(i))return e(i,n);for(var o=i.length,s=t?o:-1,r=ke(i);(t?s--:++s<o)&&!1!==n(r[s],s,r););return i}}function Fo(e){return function(t,i,n){for(var o=-1,s=ke(t),r=n(t),a=r.length;a--;){var l=r[e?a:++o];if(!1===i(s[l],l,s))break}return t}}function Oo(e){return function(t){var i=ai(t=ya(t))?gi(t):o,n=i?i[0]:t.charAt(0),s=i?wo(i,1).join(""):t.slice(1);return n[e]()+s}}function Bo(e){return function(t){return Bt(Qa(Wa(t).replace(et,"")),e,"")}}function Go(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=_i(e.prototype),n=e.apply(i,t);return ea(n)?n:i}}function zo(e){return function(t,i,n){var s=ke(t);if(!Kr(t)){var r=ds(i,3);t=Ra(t),i=function(e){return r(s[e],e,s)}}var a=e(t,i,n);return a>-1?s[r?t[a]:a]:o}}function _o(e){return ns((function(t){var i=t.length,n=i,r=Hi.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new Te(s);if(r&&!l&&"wrapper"==as(a))var l=new Hi([],!0)}for(n=l?n:i;++n<i;){var d=as(a=t[n]),c="wrapper"==d?rs(a):o;l=c&&ws(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[as(c[0])].apply(l,c[3]):1==a.length&&ws(a)?l[d]():l.thru(a)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&jr(n))return l.plant(n).value();for(var o=0,s=i?t[o].apply(this,e):n;++o<i;)s=t[o].call(this,s);return s}}))}function Vo(e,t,n,s,r,a,l,d,c,u){var p=t&h,g=1&t,m=2&t,v=24&t,f=512&t,y=m?o:Go(e);return function h(){for(var b=arguments.length,C=i(b),x=b;x--;)C[x]=arguments[x];if(v)var w=ls(h),S=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(C,w);if(s&&(C=Ao(C,s,r,v)),a&&(C=To(C,a,l,v)),b-=S,v&&b<u){var M=ci(C,w);return Zo(e,t,Vo,h.placeholder,n,C,M,d,c,u-b)}var D=g?n:this,k=m?D[e]:e;return b=C.length,d?C=function(e,t){var i=e.length,n=yi(t.length,i),s=Eo(e);for(;n--;){var r=t[n];e[n]=bs(r,i)?s[r]:o}return e}(C,d):f&&b>1&&C.reverse(),p&&c<b&&(C.length=c),this&&this!==mt&&this instanceof h&&(k=y||Go(k)),k.apply(D,C)}}function Ho(e,t){return function(i,n){return function(e,t,i,n){return Cn(e,(function(e,o,s){t(n,i(e),o,s)})),n}(i,e,t(n),{})}}function Wo(e,t){return function(i,n){var s;if(i===o&&n===o)return t;if(i!==o&&(s=i),n!==o){if(s===o)return n;"string"==typeof i||"string"==typeof n?(i=co(i),n=co(n)):(i=lo(i),n=lo(n)),s=e(i,n)}return s}}function jo(e){return ns((function(t){return t=Ft(t,$t(ds())),qn((function(i){var n=this;return e(t,(function(e){return It(e,n,i)}))}))}))}function Uo(e,t){var i=(t=t===o?" ":co(t)).length;if(i<2)return i?Xn(t,e):t;var n=Xn(t,pt(e/pi(t)));return ai(t)?wo(gi(n),0,e).join(""):n.slice(0,e)}function Ko(e){return function(t,n,s){return s&&"number"!=typeof s&&Cs(t,n,s)&&(n=s=o),t=pa(t),n===o?(n=t,t=0):n=pa(n),function(e,t,n,o){for(var s=-1,r=Zt(pt((t-e)/(n||1)),0),a=i(r);r--;)a[o?r:++s]=e,e+=n;return a}(t,n,s=s===o?t<n?1:-1:pa(s),e)}}function Yo(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=va(t),i=va(i)),e(t,i)}}function Zo(e,t,i,n,s,r,a,l,h,u){var p=8&t;t|=p?d:c,4&(t&=~(p?c:d))||(t&=-4);var g=[e,t,s,p?r:o,p?a:o,p?o:r,p?o:a,l,h,u],m=i.apply(o,g);return ws(e)&&Es(m,g),m.placeholder=n,Ps(m,e,t)}function Xo(e){var t=De[e];return function(e,i){if(e=va(e),(i=null==i?0:yi(ga(i),292))&&bt(e)){var n=(ya(e)+"e").split("e");return+((n=(ya(t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return t(e)}}var qo=ki&&1/hi(new ki([,-0]))[1]==p?function(e){return new ki(e)}:ll;function Qo(e){return function(t){var i=ms(t);return i==D?li(t):i==E?ui(t):function(e,t){return Ft(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Jo(e,t,n,r,p,g,m,v){var f=2&t;if(!f&&"function"!=typeof e)throw new Te(s);var y=r?r.length:0;if(y||(t&=-97,r=p=o),m=m===o?m:Zt(ga(m),0),v=v===o?v:ga(v),y-=p?p.length:0,t&c){var b=r,C=p;r=p=o}var x=f?o:rs(e),w=[e,t,n,r,p,b,C,g,m,v];if(x&&function(e,t){var i=e[1],n=t[1],o=i|n,s=o<131,r=n==h&&8==i||n==h&&i==u&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!s&&!r)return e;1&n&&(e[2]=t[2],o|=1&i?0:4);var l=t[3];if(l){var d=e[3];e[3]=d?Ao(d,l,t[4]):l,e[4]=d?ci(e[3],a):t[4]}(l=t[5])&&(d=e[5],e[5]=d?To(d,l,t[6]):l,e[6]=d?ci(e[5],a):t[6]);(l=t[7])&&(e[7]=l);n&h&&(e[8]=null==e[8]?t[8]:yi(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(w,x),e=w[0],t=w[1],n=w[2],r=w[3],p=w[4],!(v=w[9]=w[9]===o?f?0:e.length:Zt(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==l?function(e,t,n){var s=Go(e);return function r(){for(var a=arguments.length,l=i(a),d=a,c=ls(r);d--;)l[d]=arguments[d];var h=a<3&&l[0]!==c&&l[a-1]!==c?[]:ci(l,c);return(a-=h.length)<n?Zo(e,t,Vo,r.placeholder,o,l,h,o,o,n-a):It(this&&this!==mt&&this instanceof r?s:e,this,l)}}(e,t,v):t!=d&&33!=t||p.length?Vo.apply(o,w):function(e,t,n,o){var s=1&t,r=Go(e);return function t(){for(var a=-1,l=arguments.length,d=-1,c=o.length,h=i(c+l),u=this&&this!==mt&&this instanceof t?r:e;++d<c;)h[d]=o[d];for(;l--;)h[d++]=arguments[++a];return It(u,s?n:this,h)}}(e,t,n,r);else var S=function(e,t,i){var n=1&t,o=Go(e);return function t(){return(this&&this!==mt&&this instanceof t?o:e).apply(n?i:this,arguments)}}(e,t,n);return Ps((x?eo:Es)(S,w),e,t)}function $o(e,t,i,n){return e===o||_r(e,Le[i])&&!Fe.call(n,i)?t:e}function es(e,t,i,n,s,r){return ea(e)&&ea(t)&&(r.set(t,e),Hn(e,t,o,es,r),r.delete(t)),e}function ts(e){return oa(e)?o:e}function is(e,t,i,n,s,r){var a=1&i,l=e.length,d=t.length;if(l!=d&&!(a&&d>l))return!1;var c=r.get(e),h=r.get(t);if(c&&h)return c==t&&h==e;var u=-1,p=!0,g=2&i?new Yi:o;for(r.set(e,t),r.set(t,e);++u<l;){var m=e[u],v=t[u];if(n)var f=a?n(v,m,u,t,e,r):n(m,v,u,e,t,r);if(f!==o){if(f)continue;p=!1;break}if(g){if(!zt(t,(function(e,t){if(!ti(g,t)&&(m===e||s(m,e,i,n,r)))return g.push(t)}))){p=!1;break}}else if(m!==v&&!s(m,v,i,n,r)){p=!1;break}}return r.delete(e),r.delete(t),p}function ns(e){return Ls(Is(e,o,Us),e+"")}function os(e){return Mn(e,Ra,ps)}function ss(e){return Mn(e,La,gs)}var rs=Ti?function(e){return Ti.get(e)}:ll;function as(e){for(var t=e.name+"",i=Ei[t],n=Fe.call(Ei,t)?i.length:0;n--;){var o=i[n],s=o.func;if(null==s||s==e)return o.name}return t}function ls(e){return(Fe.call(zi,"placeholder")?zi:e).placeholder}function ds(){var e=zi.iteratee||ol;return e=e===ol?Fn:e,arguments.length?e(arguments[0],arguments[1]):e}function cs(e,t){var i=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?i["string"==typeof t?"string":"hash"]:i.map}function hs(e){for(var t=Ra(e),i=t.length;i--;){var n=t[i],o=e[n];t[i]=[n,o,Ds(o)]}return t}function us(e,t){var i=function(e,t){return null==e?o:e[t]}(e,t);return Nn(i)?i:o}var ps=vt?function(e){return null==e?[]:(e=ke(e),Lt(vt(e),(function(t){return Ze.call(e,t)})))}:ml,gs=vt?function(e){for(var t=[];e;)Ot(t,ps(e)),e=Ke(e);return t}:ml,ms=Dn;function vs(e,t,i){for(var n=-1,o=(t=Co(t,e)).length,s=!1;++n<o;){var r=Bs(t[n]);if(!(s=null!=e&&i(e,r)))break;e=e[r]}return s||++n!=o?s:!!(o=null==e?0:e.length)&&$r(o)&&bs(r,o)&&(jr(e)||Wr(e))}function fs(e){return"function"!=typeof e.constructor||Ms(e)?{}:_i(Ke(e))}function ys(e){return jr(e)||Wr(e)||!!(qe&&e&&e[qe])}function bs(e,t){var i=typeof e;return!!(t=null==t?g:t)&&("number"==i||"symbol"!=i&&Ce.test(e))&&e>-1&&e%1==0&&e<t}function Cs(e,t,i){if(!ea(i))return!1;var n=typeof t;return!!("number"==n?Kr(i)&&bs(t,i.length):"string"==n&&t in i)&&_r(i[t],e)}function xs(e,t){if(jr(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!la(e))||(ie.test(e)||!te.test(e)||null!=t&&e in ke(t))}function ws(e){var t=as(e),i=zi[t];if("function"!=typeof i||!(t in Wi.prototype))return!1;if(e===i)return!0;var n=rs(i);return!!n&&e===n[0]}(Si&&ms(new Si(new ArrayBuffer(1)))!=F||Mi&&ms(new Mi)!=D||Di&&ms(Di.resolve())!=A||ki&&ms(new ki)!=E||Ii&&ms(new Ii)!=P)&&(ms=function(e){var t=Dn(e),i=t==I?e.constructor:o,n=i?Gs(i):"";if(n)switch(n){case Ri:return F;case Li:return D;case Pi:return A;case Ni:return E;case Fi:return P}return t});var Ss=Pe?Qr:vl;function Ms(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Ds(e){return e===e&&!ea(e)}function ks(e,t){return function(i){return null!=i&&(i[e]===t&&(t!==o||e in ke(i)))}}function Is(e,t,n){return t=Zt(t===o?e.length-1:t,0),function(){for(var o=arguments,s=-1,r=Zt(o.length-t,0),a=i(r);++s<r;)a[s]=o[t+s];s=-1;for(var l=i(t+1);++s<t;)l[s]=o[s];return l[t]=n(a),It(e,this,l)}}function As(e,t){return t.length<2?e:Sn(e,no(t,0,-1))}function Ts(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Es=Ns(eo),Rs=ct||function(e,t){return mt.setTimeout(e,t)},Ls=Ns(to);function Ps(e,t,i){var n=t+"";return Ls(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Tt(f,(function(i){var n="_."+i[0];t&i[1]&&!Pt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(de);return t?t[1].split(ce):[]}(n),i)))}function Ns(e){var t=0,i=0;return function(){var n=bi(),s=16-(n-i);if(i=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Fs(e,t){var i=-1,n=e.length,s=n-1;for(t=t===o?n:t;++i<t;){var r=Zn(i,s),a=e[r];e[r]=e[i],e[i]=a}return e.length=t,e}var Os=function(e){var t=Nr(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,i,n,o){t.push(n?o.replace(pe,"$1"):i||e)})),t}));function Bs(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Gs(e){if(null!=e){try{return Ne.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function zs(e){if(e instanceof Wi)return e.clone();var t=new Hi(e.__wrapped__,e.__chain__);return t.__actions__=Eo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var _s=qn((function(e,t){return Yr(e)?hn(e,fn(t,1,Yr,!0)):[]})),Vs=qn((function(e,t){var i=qs(t);return Yr(i)&&(i=o),Yr(e)?hn(e,fn(t,1,Yr,!0),ds(i,2)):[]})),Hs=qn((function(e,t){var i=qs(t);return Yr(i)&&(i=o),Yr(e)?hn(e,fn(t,1,Yr,!0),o,i):[]}));function Ws(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:ga(i);return o<0&&(o=Zt(n+o,0)),Ht(e,ds(t,3),o)}function js(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var s=n-1;return i!==o&&(s=ga(i),s=i<0?Zt(n+s,0):yi(s,n-1)),Ht(e,ds(t,3),s,!0)}function Us(e){return(null==e?0:e.length)?fn(e,1):[]}function Ks(e){return e&&e.length?e[0]:o}var Ys=qn((function(e){var t=Ft(e,yo);return t.length&&t[0]===e[0]?Tn(t):[]})),Zs=qn((function(e){var t=qs(e),i=Ft(e,yo);return t===qs(i)?t=o:i.pop(),i.length&&i[0]===e[0]?Tn(i,ds(t,2)):[]})),Xs=qn((function(e){var t=qs(e),i=Ft(e,yo);return(t="function"==typeof t?t:o)&&i.pop(),i.length&&i[0]===e[0]?Tn(i,o,t):[]}));function qs(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Qs=qn(Js);function Js(e,t){return e&&e.length&&t&&t.length?Kn(e,t):e}var $s=ns((function(e,t){var i=null==e?0:e.length,n=rn(e,t);return Yn(e,Ft(t,(function(e){return bs(e,i)?+e:e})).sort(Io)),n}));function er(e){return null==e?e:wi.call(e)}var tr=qn((function(e){return ho(fn(e,1,Yr,!0))})),ir=qn((function(e){var t=qs(e);return Yr(t)&&(t=o),ho(fn(e,1,Yr,!0),ds(t,2))})),nr=qn((function(e){var t=qs(e);return t="function"==typeof t?t:o,ho(fn(e,1,Yr,!0),o,t)}));function or(e){if(!e||!e.length)return[];var t=0;return e=Lt(e,(function(e){if(Yr(e))return t=Zt(e.length,t),!0})),Qt(t,(function(t){return Ft(e,Yt(t))}))}function sr(e,t){if(!e||!e.length)return[];var i=or(e);return null==t?i:Ft(i,(function(e){return It(t,o,e)}))}var rr=qn((function(e,t){return Yr(e)?hn(e,t):[]})),ar=qn((function(e){return vo(Lt(e,Yr))})),lr=qn((function(e){var t=qs(e);return Yr(t)&&(t=o),vo(Lt(e,Yr),ds(t,2))})),dr=qn((function(e){var t=qs(e);return t="function"==typeof t?t:o,vo(Lt(e,Yr),o,t)})),cr=qn(or);var hr=qn((function(e){var t=e.length,i=t>1?e[t-1]:o;return i="function"==typeof i?(e.pop(),i):o,sr(e,i)}));function ur(e){var t=zi(e);return t.__chain__=!0,t}function pr(e,t){return t(e)}var gr=ns((function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,s=function(t){return rn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Wi&&bs(i)?((n=n.slice(i,+i+(t?1:0))).__actions__.push({func:pr,args:[s],thisArg:o}),new Hi(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(s)}));var mr=Lo((function(e,t,i){Fe.call(e,i)?++e[i]:sn(e,i,1)}));var vr=zo(Ws),fr=zo(js);function yr(e,t){return(jr(e)?Tt:un)(e,ds(t,3))}function br(e,t){return(jr(e)?Et:pn)(e,ds(t,3))}var Cr=Lo((function(e,t,i){Fe.call(e,i)?e[i].push(t):sn(e,i,[t])}));var xr=qn((function(e,t,n){var o=-1,s="function"==typeof t,r=Kr(e)?i(e.length):[];return un(e,(function(e){r[++o]=s?It(t,e,n):En(e,t,n)})),r})),wr=Lo((function(e,t,i){sn(e,i,t)}));function Sr(e,t){return(jr(e)?Ft:zn)(e,ds(t,3))}var Mr=Lo((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));var Dr=qn((function(e,t){if(null==e)return[];var i=t.length;return i>1&&Cs(e,t[0],t[1])?t=[]:i>2&&Cs(t[0],t[1],t[2])&&(t=[t[0]]),jn(e,fn(t,1),[])})),kr=ot||function(){return mt.Date.now()};function Ir(e,t,i){return t=i?o:t,t=e&&null==t?e.length:t,Jo(e,h,o,o,o,o,t)}function Ar(e,t){var i;if("function"!=typeof t)throw new Te(s);return e=ga(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=o),i}}var Tr=qn((function(e,t,i){var n=1;if(i.length){var o=ci(i,ls(Tr));n|=d}return Jo(e,n,t,i,o)})),Er=qn((function(e,t,i){var n=3;if(i.length){var o=ci(i,ls(Er));n|=d}return Jo(t,n,e,i,o)}));function Rr(e,t,i){var n,r,a,l,d,c,h=0,u=!1,p=!1,g=!0;if("function"!=typeof e)throw new Te(s);function m(t){var i=n,s=r;return n=r=o,h=t,l=e.apply(s,i)}function v(e){var i=e-c;return c===o||i>=t||i<0||p&&e-h>=a}function f(){var e=kr();if(v(e))return y(e);d=Rs(f,function(e){var i=t-(e-c);return p?yi(i,a-(e-h)):i}(e))}function y(e){return d=o,g&&n?m(e):(n=r=o,l)}function b(){var e=kr(),i=v(e);if(n=arguments,r=this,c=e,i){if(d===o)return function(e){return h=e,d=Rs(f,t),u?m(e):l}(c);if(p)return So(d),d=Rs(f,t),m(c)}return d===o&&(d=Rs(f,t)),l}return t=va(t)||0,ea(i)&&(u=!!i.leading,a=(p="maxWait"in i)?Zt(va(i.maxWait)||0,t):a,g="trailing"in i?!!i.trailing:g),b.cancel=function(){d!==o&&So(d),h=0,n=c=r=d=o},b.flush=function(){return d===o?l:y(kr())},b}var Lr=qn((function(e,t){return cn(e,1,t)})),Pr=qn((function(e,t,i){return cn(e,va(t)||0,i)}));function Nr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(s);var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],s=i.cache;if(s.has(o))return s.get(o);var r=e.apply(this,n);return i.cache=s.set(o,r)||s,r};return i.cache=new(Nr.Cache||Ki),i}function Fr(e){if("function"!=typeof e)throw new Te(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Nr.Cache=Ki;var Or=xo((function(e,t){var i=(t=1==t.length&&jr(t[0])?Ft(t[0],$t(ds())):Ft(fn(t,1),$t(ds()))).length;return qn((function(n){for(var o=-1,s=yi(n.length,i);++o<s;)n[o]=t[o].call(this,n[o]);return It(e,this,n)}))})),Br=qn((function(e,t){var i=ci(t,ls(Br));return Jo(e,d,o,t,i)})),Gr=qn((function(e,t){var i=ci(t,ls(Gr));return Jo(e,c,o,t,i)})),zr=ns((function(e,t){return Jo(e,u,o,o,o,t)}));function _r(e,t){return e===t||e!==e&&t!==t}var Vr=Yo(kn),Hr=Yo((function(e,t){return e>=t})),Wr=Rn(function(){return arguments}())?Rn:function(e){return ta(e)&&Fe.call(e,"callee")&&!Ze.call(e,"callee")},jr=i.isArray,Ur=xt?$t(xt):function(e){return ta(e)&&Dn(e)==N};function Kr(e){return null!=e&&$r(e.length)&&!Qr(e)}function Yr(e){return ta(e)&&Kr(e)}var Zr=ft||vl,Xr=wt?$t(wt):function(e){return ta(e)&&Dn(e)==x};function qr(e){if(!ta(e))return!1;var t=Dn(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oa(e)}function Qr(e){if(!ea(e))return!1;var t=Dn(e);return t==S||t==M||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jr(e){return"number"==typeof e&&e==ga(e)}function $r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}var ia=St?$t(St):function(e){return ta(e)&&ms(e)==D};function na(e){return"number"==typeof e||ta(e)&&Dn(e)==k}function oa(e){if(!ta(e)||Dn(e)!=I)return!1;var t=Ke(e);if(null===t)return!0;var i=Fe.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Ne.call(i)==ze}var sa=Mt?$t(Mt):function(e){return ta(e)&&Dn(e)==T};var ra=Dt?$t(Dt):function(e){return ta(e)&&ms(e)==E};function aa(e){return"string"==typeof e||!jr(e)&&ta(e)&&Dn(e)==R}function la(e){return"symbol"==typeof e||ta(e)&&Dn(e)==L}var da=kt?$t(kt):function(e){return ta(e)&&$r(e.length)&&!!lt[Dn(e)]};var ca=Yo(Gn),ha=Yo((function(e,t){return e<=t}));function ua(e){if(!e)return[];if(Kr(e))return aa(e)?gi(e):Eo(e);if(Qe&&e[Qe])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[Qe]());var t=ms(e);return(t==D?li:t==E?hi:_a)(e)}function pa(e){return e?(e=va(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ga(e){var t=pa(e),i=t%1;return t===t?i?t-i:t:0}function ma(e){return e?an(ga(e),0,v):0}function va(e){if("number"==typeof e)return e;if(la(e))return m;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var i=fe.test(e);return i||be.test(e)?ut(e.slice(2),i?2:8):ve.test(e)?m:+e}function fa(e){return Ro(e,La(e))}function ya(e){return null==e?"":co(e)}var ba=Po((function(e,t){if(Ms(t)||Kr(t))Ro(t,Ra(t),e);else for(var i in t)Fe.call(t,i)&&en(e,i,t[i])})),Ca=Po((function(e,t){Ro(t,La(t),e)})),xa=Po((function(e,t,i,n){Ro(t,La(t),e,n)})),wa=Po((function(e,t,i,n){Ro(t,Ra(t),e,n)})),Sa=ns(rn);var Ma=qn((function(e,t){e=ke(e);var i=-1,n=t.length,s=n>2?t[2]:o;for(s&&Cs(t[0],t[1],s)&&(n=1);++i<n;)for(var r=t[i],a=La(r),l=-1,d=a.length;++l<d;){var c=a[l],h=e[c];(h===o||_r(h,Le[c])&&!Fe.call(e,c))&&(e[c]=r[c])}return e})),Da=qn((function(e){return e.push(o,es),It(Na,o,e)}));function ka(e,t,i){var n=null==e?o:Sn(e,t);return n===o?i:n}function Ia(e,t){return null!=e&&vs(e,t,An)}var Aa=Ho((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Ge.call(t)),e[t]=i}),el(nl)),Ta=Ho((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Ge.call(t)),Fe.call(e,t)?e[t].push(i):e[t]=[i]}),ds),Ea=qn(En);function Ra(e){return Kr(e)?Xi(e):On(e)}function La(e){return Kr(e)?Xi(e,!0):Bn(e)}var Pa=Po((function(e,t,i){Hn(e,t,i)})),Na=Po((function(e,t,i,n){Hn(e,t,i,n)})),Fa=ns((function(e,t){var i={};if(null==e)return i;var n=!1;t=Ft(t,(function(t){return t=Co(t,e),n||(n=t.length>1),t})),Ro(e,ss(e),i),n&&(i=ln(i,7,ts));for(var o=t.length;o--;)uo(i,t[o]);return i}));var Oa=ns((function(e,t){return null==e?{}:function(e,t){return Un(e,t,(function(t,i){return Ia(e,i)}))}(e,t)}));function Ba(e,t){if(null==e)return{};var i=Ft(ss(e),(function(e){return[e]}));return t=ds(t),Un(e,i,(function(e,i){return t(e,i[0])}))}var Ga=Qo(Ra),za=Qo(La);function _a(e){return null==e?[]:ei(e,Ra(e))}var Va=Bo((function(e,t,i){return t=t.toLowerCase(),e+(i?Ha(t):t)}));function Ha(e){return qa(ya(e).toLowerCase())}function Wa(e){return(e=ya(e))&&e.replace(xe,oi).replace(tt,"")}var ja=Bo((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),Ua=Bo((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),Ka=Oo("toLowerCase");var Ya=Bo((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));var Za=Bo((function(e,t,i){return e+(i?" ":"")+qa(t)}));var Xa=Bo((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),qa=Oo("toUpperCase");function Qa(e,t,i){return e=ya(e),(t=i?o:t)===o?function(e){return st.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Ja=qn((function(e,t){try{return It(e,o,t)}catch(i){return qr(i)?i:new ae(i)}})),$a=ns((function(e,t){return Tt(t,(function(t){t=Bs(t),sn(e,t,Tr(e[t],e))})),e}));function el(e){return function(){return e}}var tl=_o(),il=_o(!0);function nl(e){return e}function ol(e){return Fn("function"==typeof e?e:ln(e,1))}var sl=qn((function(e,t){return function(i){return En(i,e,t)}})),rl=qn((function(e,t){return function(i){return En(e,i,t)}}));function al(e,t,i){var n=Ra(t),o=wn(t,n);null!=i||ea(t)&&(o.length||!n.length)||(i=t,t=e,e=this,o=wn(t,Ra(t)));var s=!(ea(i)&&"chain"in i)||!!i.chain,r=Qr(e);return Tt(o,(function(i){var n=t[i];e[i]=n,r&&(e.prototype[i]=function(){var t=this.__chain__;if(s||t){var i=e(this.__wrapped__);return(i.__actions__=Eo(this.__actions__)).push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,Ot([this.value()],arguments))})})),e}function ll(){}var dl=jo(Ft),cl=jo(Rt),hl=jo(zt);function ul(e){return xs(e)?Yt(Bs(e)):function(e){return function(t){return Sn(t,e)}}(e)}var pl=Ko(),gl=Ko(!0);function ml(){return[]}function vl(){return!1}var fl=Wo((function(e,t){return e+t}),0),yl=Xo("ceil"),bl=Wo((function(e,t){return e/t}),1),Cl=Xo("floor");var xl=Wo((function(e,t){return e*t}),1),wl=Xo("round"),Sl=Wo((function(e,t){return e-t}),0);return zi.after=function(e,t){if("function"!=typeof t)throw new Te(s);return e=ga(e),function(){if(--e<1)return t.apply(this,arguments)}},zi.ary=Ir,zi.assign=ba,zi.assignIn=Ca,zi.assignInWith=xa,zi.assignWith=wa,zi.at=Sa,zi.before=Ar,zi.bind=Tr,zi.bindAll=$a,zi.bindKey=Er,zi.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return jr(e)?e:[e]},zi.chain=ur,zi.chunk=function(e,t,n){t=(n?Cs(e,t,n):t===o)?1:Zt(ga(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var r=0,a=0,l=i(pt(s/t));r<s;)l[a++]=no(e,r,r+=t);return l},zi.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,o=[];++t<i;){var s=e[t];s&&(o[n++]=s)}return o},zi.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Ot(jr(n)?Eo(n):[n],fn(t,1))},zi.cond=function(e){var t=null==e?0:e.length,i=ds();return e=t?Ft(e,(function(e){if("function"!=typeof e[1])throw new Te(s);return[i(e[0]),e[1]]})):[],qn((function(i){for(var n=-1;++n<t;){var o=e[n];if(It(o[0],this,i))return It(o[1],this,i)}}))},zi.conforms=function(e){return function(e){var t=Ra(e);return function(i){return dn(i,e,t)}}(ln(e,1))},zi.constant=el,zi.countBy=mr,zi.create=function(e,t){var i=_i(e);return null==t?i:on(i,t)},zi.curry=function e(t,i,n){var s=Jo(t,8,o,o,o,o,o,i=n?o:i);return s.placeholder=e.placeholder,s},zi.curryRight=function e(t,i,n){var s=Jo(t,l,o,o,o,o,o,i=n?o:i);return s.placeholder=e.placeholder,s},zi.debounce=Rr,zi.defaults=Ma,zi.defaultsDeep=Da,zi.defer=Lr,zi.delay=Pr,zi.difference=_s,zi.differenceBy=Vs,zi.differenceWith=Hs,zi.drop=function(e,t,i){var n=null==e?0:e.length;return n?no(e,(t=i||t===o?1:ga(t))<0?0:t,n):[]},zi.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?no(e,0,(t=n-(t=i||t===o?1:ga(t)))<0?0:t):[]},zi.dropRightWhile=function(e,t){return e&&e.length?go(e,ds(t,3),!0,!0):[]},zi.dropWhile=function(e,t){return e&&e.length?go(e,ds(t,3),!0):[]},zi.fill=function(e,t,i,n){var s=null==e?0:e.length;return s?(i&&"number"!=typeof i&&Cs(e,t,i)&&(i=0,n=s),function(e,t,i,n){var s=e.length;for((i=ga(i))<0&&(i=-i>s?0:s+i),(n=n===o||n>s?s:ga(n))<0&&(n+=s),n=i>n?0:ma(n);i<n;)e[i++]=t;return e}(e,t,i,n)):[]},zi.filter=function(e,t){return(jr(e)?Lt:vn)(e,ds(t,3))},zi.flatMap=function(e,t){return fn(Sr(e,t),1)},zi.flatMapDeep=function(e,t){return fn(Sr(e,t),p)},zi.flatMapDepth=function(e,t,i){return i=i===o?1:ga(i),fn(Sr(e,t),i)},zi.flatten=Us,zi.flattenDeep=function(e){return(null==e?0:e.length)?fn(e,p):[]},zi.flattenDepth=function(e,t){return(null==e?0:e.length)?fn(e,t=t===o?1:ga(t)):[]},zi.flip=function(e){return Jo(e,512)},zi.flow=tl,zi.flowRight=il,zi.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var o=e[t];n[o[0]]=o[1]}return n},zi.functions=function(e){return null==e?[]:wn(e,Ra(e))},zi.functionsIn=function(e){return null==e?[]:wn(e,La(e))},zi.groupBy=Cr,zi.initial=function(e){return(null==e?0:e.length)?no(e,0,-1):[]},zi.intersection=Ys,zi.intersectionBy=Zs,zi.intersectionWith=Xs,zi.invert=Aa,zi.invertBy=Ta,zi.invokeMap=xr,zi.iteratee=ol,zi.keyBy=wr,zi.keys=Ra,zi.keysIn=La,zi.map=Sr,zi.mapKeys=function(e,t){var i={};return t=ds(t,3),Cn(e,(function(e,n,o){sn(i,t(e,n,o),e)})),i},zi.mapValues=function(e,t){var i={};return t=ds(t,3),Cn(e,(function(e,n,o){sn(i,n,t(e,n,o))})),i},zi.matches=function(e){return _n(ln(e,1))},zi.matchesProperty=function(e,t){return Vn(e,ln(t,1))},zi.memoize=Nr,zi.merge=Pa,zi.mergeWith=Na,zi.method=sl,zi.methodOf=rl,zi.mixin=al,zi.negate=Fr,zi.nthArg=function(e){return e=ga(e),qn((function(t){return Wn(t,e)}))},zi.omit=Fa,zi.omitBy=function(e,t){return Ba(e,Fr(ds(t)))},zi.once=function(e){return Ar(2,e)},zi.orderBy=function(e,t,i,n){return null==e?[]:(jr(t)||(t=null==t?[]:[t]),jr(i=n?o:i)||(i=null==i?[]:[i]),jn(e,t,i))},zi.over=dl,zi.overArgs=Or,zi.overEvery=cl,zi.overSome=hl,zi.partial=Br,zi.partialRight=Gr,zi.partition=Mr,zi.pick=Oa,zi.pickBy=Ba,zi.property=ul,zi.propertyOf=function(e){return function(t){return null==e?o:Sn(e,t)}},zi.pull=Qs,zi.pullAll=Js,zi.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Kn(e,t,ds(i,2)):e},zi.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?Kn(e,t,o,i):e},zi.pullAt=$s,zi.range=pl,zi.rangeRight=gl,zi.rearg=zr,zi.reject=function(e,t){return(jr(e)?Lt:vn)(e,Fr(ds(t,3)))},zi.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,o=[],s=e.length;for(t=ds(t,3);++n<s;){var r=e[n];t(r,n,e)&&(i.push(r),o.push(n))}return Yn(e,o),i},zi.rest=function(e,t){if("function"!=typeof e)throw new Te(s);return qn(e,t=t===o?t:ga(t))},zi.reverse=er,zi.sampleSize=function(e,t,i){return t=(i?Cs(e,t,i):t===o)?1:ga(t),(jr(e)?Qi:Jn)(e,t)},zi.set=function(e,t,i){return null==e?e:$n(e,t,i)},zi.setWith=function(e,t,i,n){return n="function"==typeof n?n:o,null==e?e:$n(e,t,i,n)},zi.shuffle=function(e){return(jr(e)?Ji:io)(e)},zi.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&Cs(e,t,i)?(t=0,i=n):(t=null==t?0:ga(t),i=i===o?n:ga(i)),no(e,t,i)):[]},zi.sortBy=Dr,zi.sortedUniq=function(e){return e&&e.length?ao(e):[]},zi.sortedUniqBy=function(e,t){return e&&e.length?ao(e,ds(t,2)):[]},zi.split=function(e,t,i){return i&&"number"!=typeof i&&Cs(e,t,i)&&(t=i=o),(i=i===o?v:i>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!sa(t))&&!(t=co(t))&&ai(e)?wo(gi(e),0,i):e.split(t,i):[]},zi.spread=function(e,t){if("function"!=typeof e)throw new Te(s);return t=null==t?0:Zt(ga(t),0),qn((function(i){var n=i[t],o=wo(i,0,t);return n&&Ot(o,n),It(e,this,o)}))},zi.tail=function(e){var t=null==e?0:e.length;return t?no(e,1,t):[]},zi.take=function(e,t,i){return e&&e.length?no(e,0,(t=i||t===o?1:ga(t))<0?0:t):[]},zi.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?no(e,(t=n-(t=i||t===o?1:ga(t)))<0?0:t,n):[]},zi.takeRightWhile=function(e,t){return e&&e.length?go(e,ds(t,3),!1,!0):[]},zi.takeWhile=function(e,t){return e&&e.length?go(e,ds(t,3)):[]},zi.tap=function(e,t){return t(e),e},zi.throttle=function(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new Te(s);return ea(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),Rr(e,t,{leading:n,maxWait:t,trailing:o})},zi.thru=pr,zi.toArray=ua,zi.toPairs=Ga,zi.toPairsIn=za,zi.toPath=function(e){return jr(e)?Ft(e,Bs):la(e)?[e]:Eo(Os(ya(e)))},zi.toPlainObject=fa,zi.transform=function(e,t,i){var n=jr(e),o=n||Zr(e)||da(e);if(t=ds(t,4),null==i){var s=e&&e.constructor;i=o?n?new s:[]:ea(e)&&Qr(s)?_i(Ke(e)):{}}return(o?Tt:Cn)(e,(function(e,n,o){return t(i,e,n,o)})),i},zi.unary=function(e){return Ir(e,1)},zi.union=tr,zi.unionBy=ir,zi.unionWith=nr,zi.uniq=function(e){return e&&e.length?ho(e):[]},zi.uniqBy=function(e,t){return e&&e.length?ho(e,ds(t,2)):[]},zi.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?ho(e,o,t):[]},zi.unset=function(e,t){return null==e||uo(e,t)},zi.unzip=or,zi.unzipWith=sr,zi.update=function(e,t,i){return null==e?e:po(e,t,bo(i))},zi.updateWith=function(e,t,i,n){return n="function"==typeof n?n:o,null==e?e:po(e,t,bo(i),n)},zi.values=_a,zi.valuesIn=function(e){return null==e?[]:ei(e,La(e))},zi.without=rr,zi.words=Qa,zi.wrap=function(e,t){return Br(bo(t),e)},zi.xor=ar,zi.xorBy=lr,zi.xorWith=dr,zi.zip=cr,zi.zipObject=function(e,t){return fo(e||[],t||[],en)},zi.zipObjectDeep=function(e,t){return fo(e||[],t||[],$n)},zi.zipWith=hr,zi.entries=Ga,zi.entriesIn=za,zi.extend=Ca,zi.extendWith=xa,al(zi,zi),zi.add=fl,zi.attempt=Ja,zi.camelCase=Va,zi.capitalize=Ha,zi.ceil=yl,zi.clamp=function(e,t,i){return i===o&&(i=t,t=o),i!==o&&(i=(i=va(i))===i?i:0),t!==o&&(t=(t=va(t))===t?t:0),an(va(e),t,i)},zi.clone=function(e){return ln(e,4)},zi.cloneDeep=function(e){return ln(e,5)},zi.cloneDeepWith=function(e,t){return ln(e,5,t="function"==typeof t?t:o)},zi.cloneWith=function(e,t){return ln(e,4,t="function"==typeof t?t:o)},zi.conformsTo=function(e,t){return null==t||dn(e,t,Ra(t))},zi.deburr=Wa,zi.defaultTo=function(e,t){return null==e||e!==e?t:e},zi.divide=bl,zi.endsWith=function(e,t,i){e=ya(e),t=co(t);var n=e.length,s=i=i===o?n:an(ga(i),0,n);return(i-=t.length)>=0&&e.slice(i,s)==t},zi.eq=_r,zi.escape=function(e){return(e=ya(e))&&Q.test(e)?e.replace(X,si):e},zi.escapeRegExp=function(e){return(e=ya(e))&&se.test(e)?e.replace(oe,"\\$&"):e},zi.every=function(e,t,i){var n=jr(e)?Rt:gn;return i&&Cs(e,t,i)&&(t=o),n(e,ds(t,3))},zi.find=vr,zi.findIndex=Ws,zi.findKey=function(e,t){return Vt(e,ds(t,3),Cn)},zi.findLast=fr,zi.findLastIndex=js,zi.findLastKey=function(e,t){return Vt(e,ds(t,3),xn)},zi.floor=Cl,zi.forEach=yr,zi.forEachRight=br,zi.forIn=function(e,t){return null==e?e:yn(e,ds(t,3),La)},zi.forInRight=function(e,t){return null==e?e:bn(e,ds(t,3),La)},zi.forOwn=function(e,t){return e&&Cn(e,ds(t,3))},zi.forOwnRight=function(e,t){return e&&xn(e,ds(t,3))},zi.get=ka,zi.gt=Vr,zi.gte=Hr,zi.has=function(e,t){return null!=e&&vs(e,t,In)},zi.hasIn=Ia,zi.head=Ks,zi.identity=nl,zi.includes=function(e,t,i,n){e=Kr(e)?e:_a(e),i=i&&!n?ga(i):0;var o=e.length;return i<0&&(i=Zt(o+i,0)),aa(e)?i<=o&&e.indexOf(t,i)>-1:!!o&&Wt(e,t,i)>-1},zi.indexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:ga(i);return o<0&&(o=Zt(n+o,0)),Wt(e,t,o)},zi.inRange=function(e,t,i){return t=pa(t),i===o?(i=t,t=0):i=pa(i),function(e,t,i){return e>=yi(t,i)&&e<Zt(t,i)}(e=va(e),t,i)},zi.invoke=Ea,zi.isArguments=Wr,zi.isArray=jr,zi.isArrayBuffer=Ur,zi.isArrayLike=Kr,zi.isArrayLikeObject=Yr,zi.isBoolean=function(e){return!0===e||!1===e||ta(e)&&Dn(e)==C},zi.isBuffer=Zr,zi.isDate=Xr,zi.isElement=function(e){return ta(e)&&1===e.nodeType&&!oa(e)},zi.isEmpty=function(e){if(null==e)return!0;if(Kr(e)&&(jr(e)||"string"==typeof e||"function"==typeof e.splice||Zr(e)||da(e)||Wr(e)))return!e.length;var t=ms(e);if(t==D||t==E)return!e.size;if(Ms(e))return!On(e).length;for(var i in e)if(Fe.call(e,i))return!1;return!0},zi.isEqual=function(e,t){return Ln(e,t)},zi.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:o)?i(e,t):o;return n===o?Ln(e,t,o,i):!!n},zi.isError=qr,zi.isFinite=function(e){return"number"==typeof e&&bt(e)},zi.isFunction=Qr,zi.isInteger=Jr,zi.isLength=$r,zi.isMap=ia,zi.isMatch=function(e,t){return e===t||Pn(e,t,hs(t))},zi.isMatchWith=function(e,t,i){return i="function"==typeof i?i:o,Pn(e,t,hs(t),i)},zi.isNaN=function(e){return na(e)&&e!=+e},zi.isNative=function(e){if(Ss(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nn(e)},zi.isNil=function(e){return null==e},zi.isNull=function(e){return null===e},zi.isNumber=na,zi.isObject=ea,zi.isObjectLike=ta,zi.isPlainObject=oa,zi.isRegExp=sa,zi.isSafeInteger=function(e){return Jr(e)&&e>=-9007199254740991&&e<=g},zi.isSet=ra,zi.isString=aa,zi.isSymbol=la,zi.isTypedArray=da,zi.isUndefined=function(e){return e===o},zi.isWeakMap=function(e){return ta(e)&&ms(e)==P},zi.isWeakSet=function(e){return ta(e)&&"[object WeakSet]"==Dn(e)},zi.join=function(e,t){return null==e?"":Ct.call(e,t)},zi.kebabCase=ja,zi.last=qs,zi.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var s=n;return i!==o&&(s=(s=ga(i))<0?Zt(n+s,0):yi(s,n-1)),t===t?function(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}(e,t,s):Ht(e,Ut,s,!0)},zi.lowerCase=Ua,zi.lowerFirst=Ka,zi.lt=ca,zi.lte=ha,zi.max=function(e){return e&&e.length?mn(e,nl,kn):o},zi.maxBy=function(e,t){return e&&e.length?mn(e,ds(t,2),kn):o},zi.mean=function(e){return Kt(e,nl)},zi.meanBy=function(e,t){return Kt(e,ds(t,2))},zi.min=function(e){return e&&e.length?mn(e,nl,Gn):o},zi.minBy=function(e,t){return e&&e.length?mn(e,ds(t,2),Gn):o},zi.stubArray=ml,zi.stubFalse=vl,zi.stubObject=function(){return{}},zi.stubString=function(){return""},zi.stubTrue=function(){return!0},zi.multiply=xl,zi.nth=function(e,t){return e&&e.length?Wn(e,ga(t)):o},zi.noConflict=function(){return mt._===this&&(mt._=_e),this},zi.noop=ll,zi.now=kr,zi.pad=function(e,t,i){e=ya(e);var n=(t=ga(t))?pi(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return Uo(gt(o),i)+e+Uo(pt(o),i)},zi.padEnd=function(e,t,i){e=ya(e);var n=(t=ga(t))?pi(e):0;return t&&n<t?e+Uo(t-n,i):e},zi.padStart=function(e,t,i){e=ya(e);var n=(t=ga(t))?pi(e):0;return t&&n<t?Uo(t-n,i)+e:e},zi.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),Ci(ya(e).replace(re,""),t||0)},zi.random=function(e,t,i){if(i&&"boolean"!=typeof i&&Cs(e,t,i)&&(t=i=o),i===o&&("boolean"==typeof t?(i=t,t=o):"boolean"==typeof e&&(i=e,e=o)),e===o&&t===o?(e=0,t=1):(e=pa(e),t===o?(t=e,e=0):t=pa(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var s=xi();return yi(e+s*(t-e+ht("1e-"+((s+"").length-1))),t)}return Zn(e,t)},zi.reduce=function(e,t,i){var n=jr(e)?Bt:Xt,o=arguments.length<3;return n(e,ds(t,4),i,o,un)},zi.reduceRight=function(e,t,i){var n=jr(e)?Gt:Xt,o=arguments.length<3;return n(e,ds(t,4),i,o,pn)},zi.repeat=function(e,t,i){return t=(i?Cs(e,t,i):t===o)?1:ga(t),Xn(ya(e),t)},zi.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zi.result=function(e,t,i){var n=-1,s=(t=Co(t,e)).length;for(s||(s=1,e=o);++n<s;){var r=null==e?o:e[Bs(t[n])];r===o&&(n=s,r=i),e=Qr(r)?r.call(e):r}return e},zi.round=wl,zi.runInContext=e,zi.sample=function(e){return(jr(e)?qi:Qn)(e)},zi.size=function(e){if(null==e)return 0;if(Kr(e))return aa(e)?pi(e):e.length;var t=ms(e);return t==D||t==E?e.size:On(e).length},zi.snakeCase=Ya,zi.some=function(e,t,i){var n=jr(e)?zt:oo;return i&&Cs(e,t,i)&&(t=o),n(e,ds(t,3))},zi.sortedIndex=function(e,t){return so(e,t)},zi.sortedIndexBy=function(e,t,i){return ro(e,t,ds(i,2))},zi.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=so(e,t);if(n<i&&_r(e[n],t))return n}return-1},zi.sortedLastIndex=function(e,t){return so(e,t,!0)},zi.sortedLastIndexBy=function(e,t,i){return ro(e,t,ds(i,2),!0)},zi.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var i=so(e,t,!0)-1;if(_r(e[i],t))return i}return-1},zi.startCase=Za,zi.startsWith=function(e,t,i){return e=ya(e),i=null==i?0:an(ga(i),0,e.length),t=co(t),e.slice(i,i+t.length)==t},zi.subtract=Sl,zi.sum=function(e){return e&&e.length?qt(e,nl):0},zi.sumBy=function(e,t){return e&&e.length?qt(e,ds(t,2)):0},zi.template=function(e,t,i){var n=zi.templateSettings;i&&Cs(e,t,i)&&(t=o),e=ya(e),t=xa({},t,n,$o);var s,r,a=xa({},t.imports,n.imports,$o),l=Ra(a),d=ei(a,l),c=0,h=t.interpolate||we,u="__p += '",p=Ie((t.escape||we).source+"|"+h.source+"|"+(h===ee?ge:we).source+"|"+(t.evaluate||we).source+"|$","g"),g="//# sourceURL="+(Fe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(p,(function(t,i,n,o,a,l){return n||(n=o),u+=e.slice(c,l).replace(Se,ri),i&&(s=!0,u+="' +\n__e("+i+") +\n'"),a&&(r=!0,u+="';\n"+a+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),u+="';\n";var m=Fe.call(t,"variable")&&t.variable;if(m){if(ue.test(m))throw new ae("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";u=(r?u.replace(U,""):u).replace(K,"$1").replace(Y,"$1;"),u="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var v=Ja((function(){return Me(l,g+"return "+u).apply(o,d)}));if(v.source=u,qr(v))throw v;return v},zi.times=function(e,t){if((e=ga(e))<1||e>g)return[];var i=v,n=yi(e,v);t=ds(t),e-=v;for(var o=Qt(n,t);++i<e;)t(i);return o},zi.toFinite=pa,zi.toInteger=ga,zi.toLength=ma,zi.toLower=function(e){return ya(e).toLowerCase()},zi.toNumber=va,zi.toSafeInteger=function(e){return e?an(ga(e),-9007199254740991,g):0===e?e:0},zi.toString=ya,zi.toUpper=function(e){return ya(e).toUpperCase()},zi.trim=function(e,t,i){if((e=ya(e))&&(i||t===o))return Jt(e);if(!e||!(t=co(t)))return e;var n=gi(e),s=gi(t);return wo(n,ii(n,s),ni(n,s)+1).join("")},zi.trimEnd=function(e,t,i){if((e=ya(e))&&(i||t===o))return e.slice(0,mi(e)+1);if(!e||!(t=co(t)))return e;var n=gi(e);return wo(n,0,ni(n,gi(t))+1).join("")},zi.trimStart=function(e,t,i){if((e=ya(e))&&(i||t===o))return e.replace(re,"");if(!e||!(t=co(t)))return e;var n=gi(e);return wo(n,ii(n,gi(t))).join("")},zi.truncate=function(e,t){var i=30,n="...";if(ea(t)){var s="separator"in t?t.separator:s;i="length"in t?ga(t.length):i,n="omission"in t?co(t.omission):n}var r=(e=ya(e)).length;if(ai(e)){var a=gi(e);r=a.length}if(i>=r)return e;var l=i-pi(n);if(l<1)return n;var d=a?wo(a,0,l).join(""):e.slice(0,l);if(s===o)return d+n;if(a&&(l+=d.length-l),sa(s)){if(e.slice(l).search(s)){var c,h=d;for(s.global||(s=Ie(s.source,ya(me.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var u=c.index;d=d.slice(0,u===o?l:u)}}else if(e.indexOf(co(s),l)!=l){var p=d.lastIndexOf(s);p>-1&&(d=d.slice(0,p))}return d+n},zi.unescape=function(e){return(e=ya(e))&&q.test(e)?e.replace(Z,vi):e},zi.uniqueId=function(e){var t=++Oe;return ya(e)+t},zi.upperCase=Xa,zi.upperFirst=qa,zi.each=yr,zi.eachRight=br,zi.first=Ks,al(zi,function(){var e={};return Cn(zi,(function(t,i){Fe.call(zi.prototype,i)||(e[i]=t)})),e}(),{chain:!1}),zi.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zi[e].placeholder=zi})),Tt(["drop","take"],(function(e,t){Wi.prototype[e]=function(i){i=i===o?1:Zt(ga(i),0);var n=this.__filtered__&&!t?new Wi(this):this.clone();return n.__filtered__?n.__takeCount__=yi(i,n.__takeCount__):n.__views__.push({size:yi(i,v),type:e+(n.__dir__<0?"Right":"")}),n},Wi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;Wi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ds(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),Tt(["head","last"],(function(e,t){var i="take"+(t?"Right":"");Wi.prototype[e]=function(){return this[i](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");Wi.prototype[e]=function(){return this.__filtered__?new Wi(this):this[i](1)}})),Wi.prototype.compact=function(){return this.filter(nl)},Wi.prototype.find=function(e){return this.filter(e).head()},Wi.prototype.findLast=function(e){return this.reverse().find(e)},Wi.prototype.invokeMap=qn((function(e,t){return"function"==typeof e?new Wi(this):this.map((function(i){return En(i,e,t)}))})),Wi.prototype.reject=function(e){return this.filter(Fr(ds(e)))},Wi.prototype.slice=function(e,t){e=ga(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Wi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==o&&(i=(t=ga(t))<0?i.dropRight(-t):i.take(t-e)),i)},Wi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wi.prototype.toArray=function(){return this.take(v)},Cn(Wi.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=zi[n?"take"+("last"==t?"Right":""):t],r=n||/^find/.test(t);s&&(zi.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,l=t instanceof Wi,d=a[0],c=l||jr(t),h=function(e){var t=s.apply(zi,Ot([e],a));return n&&u?t[0]:t};c&&i&&"function"==typeof d&&1!=d.length&&(l=c=!1);var u=this.__chain__,p=!!this.__actions__.length,g=r&&!u,m=l&&!p;if(!r&&c){t=m?t:new Wi(this);var v=e.apply(t,a);return v.__actions__.push({func:pr,args:[h],thisArg:o}),new Hi(v,u)}return g&&m?e.apply(this,a):(v=this.thru(h),g?n?v.value()[0]:v.value():v)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ee[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);zi.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(jr(o)?o:[],e)}return this[i]((function(i){return t.apply(jr(i)?i:[],e)}))}})),Cn(Wi.prototype,(function(e,t){var i=zi[t];if(i){var n=i.name+"";Fe.call(Ei,n)||(Ei[n]=[]),Ei[n].push({name:t,func:i})}})),Ei[Vo(o,2).name]=[{name:"wrapper",func:o}],Wi.prototype.clone=function(){var e=new Wi(this.__wrapped__);return e.__actions__=Eo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Eo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Eo(this.__views__),e},Wi.prototype.reverse=function(){if(this.__filtered__){var e=new Wi(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=jr(e),n=t<0,o=i?e.length:0,s=function(e,t,i){var n=-1,o=i.length;for(;++n<o;){var s=i[n],r=s.size;switch(s.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=yi(t,e+r);break;case"takeRight":e=Zt(e,t-r)}}return{start:e,end:t}}(0,o,this.__views__),r=s.start,a=s.end,l=a-r,d=n?a:r-1,c=this.__iteratees__,h=c.length,u=0,p=yi(l,this.__takeCount__);if(!i||!n&&o==l&&p==l)return mo(e,this.__actions__);var g=[];e:for(;l--&&u<p;){for(var m=-1,v=e[d+=t];++m<h;){var f=c[m],y=f.iteratee,b=f.type,C=y(v);if(2==b)v=C;else if(!C){if(1==b)continue e;break e}}g[u++]=v}return g},zi.prototype.at=gr,zi.prototype.chain=function(){return ur(this)},zi.prototype.commit=function(){return new Hi(this.value(),this.__chain__)},zi.prototype.next=function(){this.__values__===o&&(this.__values__=ua(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},zi.prototype.plant=function(e){for(var t,i=this;i instanceof Vi;){var n=zs(i);n.__index__=0,n.__values__=o,t?s.__wrapped__=n:t=n;var s=n;i=i.__wrapped__}return s.__wrapped__=e,t},zi.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wi){var t=e;return this.__actions__.length&&(t=new Wi(this)),(t=t.reverse()).__actions__.push({func:pr,args:[er],thisArg:o}),new Hi(t,this.__chain__)}return this.thru(er)},zi.prototype.toJSON=zi.prototype.valueOf=zi.prototype.value=function(){return mo(this.__wrapped__,this.__actions__)},zi.prototype.first=zi.prototype.head,Qe&&(zi.prototype[Qe]=function(){return this}),zi}();mt._=fi,(n=function(){return fi}.call(t,i,t,e))===o||(e.exports=n)}.call(this)},521:function(e,t,i){(e=i.nmd(e)).exports=function(){"use strict";var t,i;function n(){return t.apply(null,arguments)}function o(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(a(e,t))return!1;return!0}function d(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var i,n=[],o=e.length;for(i=0;i<o;++i)n.push(t(e[i],i));return n}function p(e,t){for(var i in t)a(t,i)&&(e[i]=t[i]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function g(e,t,i,n){return Yi(e,t,i,n,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=m()),e._pf}function f(e){var t=null,n=!1,o=e._d&&!isNaN(e._d.getTime());return o&&(t=v(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),o=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?o:(e._isValid=o,e._isValid)}function y(e){var t=g(NaN);return null!=e?p(v(t),e):v(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,i=Object(this),n=i.length>>>0;for(t=0;t<n;t++)if(t in i&&e.call(this,i[t],t,i))return!0;return!1};var b=n.momentProperties=[],C=!1;function x(e,t){var i,n,o,s=b.length;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=v(t)),d(t._locale)||(e._locale=t._locale),s>0)for(i=0;i<s;i++)d(o=t[n=b[i]])||(e[n]=o);return e}function w(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===C&&(C=!0,n.updateOffset(this),C=!1)}function S(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function M(e){!1===n.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function D(e,t){var i=!0;return p((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),i){var o,s,r,l=[],d=arguments.length;for(s=0;s<d;s++){if(o="","object"===typeof arguments[s]){for(r in o+="\n["+s+"] ",arguments[0])a(arguments[0],r)&&(o+=r+": "+arguments[0][r]+", ");o=o.slice(0,-2)}else o=arguments[s];l.push(o)}M(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),i=!1}return t.apply(this,arguments)}),t)}var k,I={};function A(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),I[e]||(M(t),I[e]=!0)}function T(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e){var t,i;for(i in e)a(e,i)&&(T(t=e[i])?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(e,t){var i,n=p({},e);for(i in t)a(t,i)&&(r(e[i])&&r(t[i])?(n[i]={},p(n[i],e[i]),p(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)a(e,i)&&!a(t,i)&&r(e[i])&&(n[i]=p({},n[i]));return n}function L(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,k=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)a(e,t)&&i.push(t);return i};var P={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function N(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return T(n)?n.call(t,i):n}function F(e,t,i){var n=""+Math.abs(e),o=t-n.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}var O=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,G={},z={};function _(e,t,i,n){var o=n;"string"===typeof n&&(o=function(){return this[n]()}),e&&(z[e]=o),t&&(z[t[0]]=function(){return F(o.apply(this,arguments),t[1],t[2])}),i&&(z[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e){var t,i,n=e.match(O);for(t=0,i=n.length;t<i;t++)z[n[t]]?n[t]=z[n[t]]:n[t]=V(n[t]);return function(t){var o,s="";for(o=0;o<i;o++)s+=T(n[o])?n[o].call(t,e):n[o];return s}}function W(e,t){return e.isValid()?(t=j(t,e.localeData()),G[t]=G[t]||H(t),G[t](e)):e.localeData().invalidDate()}function j(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(B.lastIndex=0;i>=0&&B.test(e);)e=e.replace(B,n),B.lastIndex=0,i-=1;return e}var U={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function K(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(O).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var Y="Invalid date";function Z(){return this._invalidDate}var X="%d",q=/\d{1,2}/;function Q(e){return this._ordinal.replace("%d",e)}var J={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(e,t,i,n){var o=this._relativeTime[i];return T(o)?o(e,t,i,n):o.replace(/%d/i,e)}function ee(e,t){var i=this._relativeTime[e>0?"future":"past"];return T(i)?i(t):i.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ie(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function ne(e){var t,i,n={};for(i in e)a(e,i)&&(t=ie(i))&&(n[t]=e[i]);return n}var oe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function se(e){var t,i=[];for(t in e)a(e,t)&&i.push({unit:t,priority:oe[t]});return i.sort((function(e,t){return e.priority-t.priority})),i}var re,ae=/\d/,le=/\d\d/,de=/\d{3}/,ce=/\d{4}/,he=/[+-]?\d{6}/,ue=/\d\d?/,pe=/\d\d\d\d?/,ge=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ve=/\d{1,4}/,fe=/[+-]?\d{1,6}/,ye=/\d+/,be=/[+-]?\d+/,Ce=/Z|[+-]\d\d:?\d\d/gi,xe=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[+-]?\d+(\.\d{1,3})?/,Se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Me=/^[1-9]\d?/,De=/^([1-9]\d|\d)/;function ke(e,t,i){re[e]=T(t)?t:function(e,n){return e&&i?i:t}}function Ie(e,t){return a(re,e)?re[e](t._strict,t._locale):new RegExp(Ae(e))}function Ae(e){return Te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,i,n,o){return t||i||n||o})))}function Te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ee(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Re(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=Ee(t)),i}re={};var Le={};function Pe(e,t){var i,n,o=t;for("string"===typeof e&&(e=[e]),c(t)&&(o=function(e,i){i[t]=Re(e)}),n=e.length,i=0;i<n;i++)Le[e[i]]=o}function Ne(e,t){Pe(e,(function(e,i,n,o){n._w=n._w||{},t(e,n._w,n,o)}))}function Fe(e,t,i){null!=t&&a(Le,e)&&Le[e](t,i._a,i,e)}function Oe(e){return e%4===0&&e%100!==0||e%400===0}var Be=0,Ge=1,ze=2,_e=3,Ve=4,He=5,We=6,je=7,Ue=8;function Ke(e){return Oe(e)?366:365}_("Y",0,0,(function(){var e=this.year();return e<=9999?F(e,4):"+"+e})),_(0,["YY",2],0,(function(){return this.year()%100})),_(0,["YYYY",4],0,"year"),_(0,["YYYYY",5],0,"year"),_(0,["YYYYYY",6,!0],0,"year"),ke("Y",be),ke("YY",ue,le),ke("YYYY",ve,ce),ke("YYYYY",fe,he),ke("YYYYYY",fe,he),Pe(["YYYYY","YYYYYY"],Be),Pe("YYYY",(function(e,t){t[Be]=2===e.length?n.parseTwoDigitYear(e):Re(e)})),Pe("YY",(function(e,t){t[Be]=n.parseTwoDigitYear(e)})),Pe("Y",(function(e,t){t[Be]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return Re(e)+(Re(e)>68?1900:2e3)};var Ye,Ze=qe("FullYear",!0);function Xe(){return Oe(this.year())}function qe(e,t){return function(i){return null!=i?(Je(this,e,i),n.updateOffset(this,t),this):Qe(this,e)}}function Qe(e,t){if(!e.isValid())return NaN;var i=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Je(e,t,i){var n,o,s,r,a;if(e.isValid()&&!isNaN(i)){switch(n=e._d,o=e._isUTC,t){case"Milliseconds":return void(o?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(o?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(o?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(o?n.setUTCHours(i):n.setHours(i));case"Date":return void(o?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}s=i,r=e.month(),a=29!==(a=e.date())||1!==r||Oe(s)?a:28,o?n.setUTCFullYear(s,r,a):n.setFullYear(s,r,a)}}function $e(e){return T(this[e=ie(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var i,n=se(e=ne(e)),o=n.length;for(i=0;i<o;i++)this[n[i].unit](e[n[i].unit])}else if(T(this[e=ie(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function it(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=tt(t,12);return e+=(t-i)/12,1===i?Oe(e)?29:28:31-i%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},_("M",["MM",2],"Mo",(function(){return this.month()+1})),_("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),_("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ke("M",ue,Me),ke("MM",ue,le),ke("MMM",(function(e,t){return t.monthsShortRegex(e)})),ke("MMMM",(function(e,t){return t.monthsRegex(e)})),Pe(["M","MM"],(function(e,t){t[Ge]=Re(e)-1})),Pe(["MMM","MMMM"],(function(e,t,i,n){var o=i._locale.monthsParse(e,n,i._strict);null!=o?t[Ge]=o:v(i).invalidMonth=e}));var nt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),st=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=Se,at=Se;function lt(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||st).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function dt(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[st.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(e,t,i){var n,o,s,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=g([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(o=Ye.call(this._shortMonthsParse,r))?o:null:-1!==(o=Ye.call(this._longMonthsParse,r))?o:null:"MMM"===t?-1!==(o=Ye.call(this._shortMonthsParse,r))||-1!==(o=Ye.call(this._longMonthsParse,r))?o:null:-1!==(o=Ye.call(this._longMonthsParse,r))||-1!==(o=Ye.call(this._shortMonthsParse,r))?o:null}function ht(e,t,i){var n,o,s;if(this._monthsParseExact)return ct.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=g([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function ut(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=Re(t);else if(!c(t=e.localeData().monthsParse(t)))return e;var i=t,n=e.date();return n=n<29?n:Math.min(n,it(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,n):e._d.setMonth(i,n),e}function pt(e){return null!=e?(ut(this,e),n.updateOffset(this,!0),this):Qe(this,"Month")}function gt(){return it(this.year(),this.month())}function mt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||ft.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||ft.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=at),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ft(){function e(e,t){return t.length-e.length}var t,i,n,o,s=[],r=[],a=[];for(t=0;t<12;t++)i=g([2e3,t]),n=Te(this.monthsShort(i,"")),o=Te(this.months(i,"")),s.push(n),r.push(o),a.push(o),a.push(n);s.sort(e),r.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function yt(e,t,i,n,o,s,r){var a;return e<100&&e>=0?(a=new Date(e+400,t,i,n,o,s,r),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,i,n,o,s,r),a}function bt(e){var t,i;return e<100&&e>=0?((i=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ct(e,t,i){var n=7+t-i;return-(7+bt(e,0,n).getUTCDay()-t)%7+n-1}function xt(e,t,i,n,o){var s,r,a=1+7*(t-1)+(7+i-n)%7+Ct(e,n,o);return a<=0?r=Ke(s=e-1)+a:a>Ke(e)?(s=e+1,r=a-Ke(e)):(s=e,r=a),{year:s,dayOfYear:r}}function wt(e,t,i){var n,o,s=Ct(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1;return r<1?n=r+St(o=e.year()-1,t,i):r>St(e.year(),t,i)?(n=r-St(e.year(),t,i),o=e.year()+1):(o=e.year(),n=r),{week:n,year:o}}function St(e,t,i){var n=Ct(e,t,i),o=Ct(e+1,t,i);return(Ke(e)-n+o)/7}function Mt(e){return wt(e,this._week.dow,this._week.doy).week}_("w",["ww",2],"wo","week"),_("W",["WW",2],"Wo","isoWeek"),ke("w",ue,Me),ke("ww",ue,le),ke("W",ue,Me),ke("WW",ue,le),Ne(["w","ww","W","WW"],(function(e,t,i,n){t[n.substr(0,1)]=Re(e)}));var Dt={dow:0,doy:6};function kt(){return this._week.dow}function It(){return this._week.doy}function At(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Tt(e){var t=wt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Et(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Rt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Lt(e,t){return e.slice(t,7).concat(e.slice(0,t))}_("d",0,"do","day"),_("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),_("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),_("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),_("e",0,0,"weekday"),_("E",0,0,"isoWeekday"),ke("d",ue),ke("e",ue),ke("E",ue),ke("dd",(function(e,t){return t.weekdaysMinRegex(e)})),ke("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),ke("dddd",(function(e,t){return t.weekdaysRegex(e)})),Ne(["dd","ddd","dddd"],(function(e,t,i,n){var o=i._locale.weekdaysParse(e,n,i._strict);null!=o?t.d=o:v(i).invalidWeekday=e})),Ne(["d","e","E"],(function(e,t,i,n){t[n]=Re(e)}));var Pt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Nt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ft="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ot=Se,Bt=Se,Gt=Se;function zt(e,t){var i=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Lt(i,this._week.dow):e?i[e.day()]:i}function _t(e){return!0===e?Lt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Vt(e){return!0===e?Lt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ht(e,t,i){var n,o,s,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=g([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(o=Ye.call(this._weekdaysParse,r))?o:null:"ddd"===t?-1!==(o=Ye.call(this._shortWeekdaysParse,r))?o:null:-1!==(o=Ye.call(this._minWeekdaysParse,r))?o:null:"dddd"===t?-1!==(o=Ye.call(this._weekdaysParse,r))||-1!==(o=Ye.call(this._shortWeekdaysParse,r))||-1!==(o=Ye.call(this._minWeekdaysParse,r))?o:null:"ddd"===t?-1!==(o=Ye.call(this._shortWeekdaysParse,r))||-1!==(o=Ye.call(this._weekdaysParse,r))||-1!==(o=Ye.call(this._minWeekdaysParse,r))?o:null:-1!==(o=Ye.call(this._minWeekdaysParse,r))||-1!==(o=Ye.call(this._weekdaysParse,r))||-1!==(o=Ye.call(this._shortWeekdaysParse,r))?o:null}function Wt(e,t,i){var n,o,s;if(this._weekdaysParseExact)return Ht.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=g([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function jt(e){if(!this.isValid())return null!=e?this:NaN;var t=Qe(this,"Day");return null!=e?(e=Et(e,this.localeData()),this.add(e-t,"d")):t}function Ut(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Kt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Rt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Yt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||qt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Ot),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Zt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||qt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||qt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Gt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qt(){function e(e,t){return t.length-e.length}var t,i,n,o,s,r=[],a=[],l=[],d=[];for(t=0;t<7;t++)i=g([2e3,1]).day(t),n=Te(this.weekdaysMin(i,"")),o=Te(this.weekdaysShort(i,"")),s=Te(this.weekdays(i,"")),r.push(n),a.push(o),l.push(s),d.push(n),d.push(o),d.push(s);r.sort(e),a.sort(e),l.sort(e),d.sort(e),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Qt(){return this.hours()%12||12}function Jt(){return this.hours()||24}function $t(e,t){_(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function ei(e,t){return t._meridiemParse}function ti(e){return"p"===(e+"").toLowerCase().charAt(0)}_("H",["HH",2],0,"hour"),_("h",["hh",2],0,Qt),_("k",["kk",2],0,Jt),_("hmm",0,0,(function(){return""+Qt.apply(this)+F(this.minutes(),2)})),_("hmmss",0,0,(function(){return""+Qt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)})),_("Hmm",0,0,(function(){return""+this.hours()+F(this.minutes(),2)})),_("Hmmss",0,0,(function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)})),$t("a",!0),$t("A",!1),ke("a",ei),ke("A",ei),ke("H",ue,De),ke("h",ue,Me),ke("k",ue,Me),ke("HH",ue,le),ke("hh",ue,le),ke("kk",ue,le),ke("hmm",pe),ke("hmmss",ge),ke("Hmm",pe),ke("Hmmss",ge),Pe(["H","HH"],_e),Pe(["k","kk"],(function(e,t,i){var n=Re(e);t[_e]=24===n?0:n})),Pe(["a","A"],(function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e})),Pe(["h","hh"],(function(e,t,i){t[_e]=Re(e),v(i).bigHour=!0})),Pe("hmm",(function(e,t,i){var n=e.length-2;t[_e]=Re(e.substr(0,n)),t[Ve]=Re(e.substr(n)),v(i).bigHour=!0})),Pe("hmmss",(function(e,t,i){var n=e.length-4,o=e.length-2;t[_e]=Re(e.substr(0,n)),t[Ve]=Re(e.substr(n,2)),t[He]=Re(e.substr(o)),v(i).bigHour=!0})),Pe("Hmm",(function(e,t,i){var n=e.length-2;t[_e]=Re(e.substr(0,n)),t[Ve]=Re(e.substr(n))})),Pe("Hmmss",(function(e,t,i){var n=e.length-4,o=e.length-2;t[_e]=Re(e.substr(0,n)),t[Ve]=Re(e.substr(n,2)),t[He]=Re(e.substr(o))}));var ii=/[ap]\.?m?\.?/i,ni=qe("Hours",!0);function oi(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var si,ri={calendar:P,longDateFormat:U,invalidDate:Y,ordinal:X,dayOfMonthOrdinalParse:q,relativeTime:J,months:nt,monthsShort:ot,week:Dt,weekdays:Pt,weekdaysMin:Ft,weekdaysShort:Nt,meridiemParse:ii},ai={},li={};function di(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1)if(e[i]!==t[i])return i;return n}function ci(e){return e?e.toLowerCase().replace("_","-"):e}function hi(e){for(var t,i,n,o,s=0;s<e.length;){for(t=(o=ci(e[s]).split("-")).length,i=(i=ci(e[s+1]))?i.split("-"):null;t>0;){if(n=pi(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&di(o,i)>=t-1)break;t--}s++}return si}function ui(e){return!(!e||!e.match("^[^/\\\\]*$"))}function pi(t){var i=null;if(void 0===ai[t]&&e&&e.exports&&ui(t))try{i=si._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),gi(i)}catch(n){ai[t]=null}return ai[t]}function gi(e,t){var i;return e&&((i=d(t)?fi(e):mi(e,t))?si=i:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),si._abbr}function mi(e,t){if(null!==t){var i,n=ri;if(t.abbr=e,null!=ai[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ai[e]._config;else if(null!=t.parentLocale)if(null!=ai[t.parentLocale])n=ai[t.parentLocale]._config;else{if(null==(i=pi(t.parentLocale)))return li[t.parentLocale]||(li[t.parentLocale]=[]),li[t.parentLocale].push({name:e,config:t}),null;n=i._config}return ai[e]=new L(R(n,t)),li[e]&&li[e].forEach((function(e){mi(e.name,e.config)})),gi(e),ai[e]}return delete ai[e],null}function vi(e,t){if(null!=t){var i,n,o=ri;null!=ai[e]&&null!=ai[e].parentLocale?ai[e].set(R(ai[e]._config,t)):(null!=(n=pi(e))&&(o=n._config),t=R(o,t),null==n&&(t.abbr=e),(i=new L(t)).parentLocale=ai[e],ai[e]=i),gi(e)}else null!=ai[e]&&(null!=ai[e].parentLocale?(ai[e]=ai[e].parentLocale,e===gi()&&gi(e)):null!=ai[e]&&delete ai[e]);return ai[e]}function fi(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return si;if(!s(e)){if(t=pi(e))return t;e=[e]}return hi(e)}function yi(){return k(ai)}function bi(e){var t,i=e._a;return i&&-2===v(e).overflow&&(t=i[Ge]<0||i[Ge]>11?Ge:i[ze]<1||i[ze]>it(i[Be],i[Ge])?ze:i[_e]<0||i[_e]>24||24===i[_e]&&(0!==i[Ve]||0!==i[He]||0!==i[We])?_e:i[Ve]<0||i[Ve]>59?Ve:i[He]<0||i[He]>59?He:i[We]<0||i[We]>999?We:-1,v(e)._overflowDayOfYear&&(t<Be||t>ze)&&(t=ze),v(e)._overflowWeeks&&-1===t&&(t=je),v(e)._overflowWeekday&&-1===t&&(t=Ue),v(e).overflow=t),e}var Ci=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wi=/Z|[+-]\d\d(?::?\d\d)?/,Si=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Mi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Di=/^\/?Date\((-?\d+)/i,ki=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ii={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ai(e){var t,i,n,o,s,r,a=e._i,l=Ci.exec(a)||xi.exec(a),d=Si.length,c=Mi.length;if(l){for(v(e).iso=!0,t=0,i=d;t<i;t++)if(Si[t][1].exec(l[1])){o=Si[t][0],n=!1!==Si[t][2];break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,i=c;t<i;t++)if(Mi[t][1].exec(l[3])){s=(l[2]||" ")+Mi[t][0];break}if(null==s)return void(e._isValid=!1)}if(!n&&null!=s)return void(e._isValid=!1);if(l[4]){if(!wi.exec(l[4]))return void(e._isValid=!1);r="Z"}e._f=o+(s||"")+(r||""),_i(e)}else e._isValid=!1}function Ti(e,t,i,n,o,s){var r=[Ei(e),ot.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return s&&r.push(parseInt(s,10)),r}function Ei(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Ri(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Li(e,t,i){return!e||Nt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(i).weekdayMismatch=!0,i._isValid=!1,!1)}function Pi(e,t,i){if(e)return Ii[e];if(t)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}function Ni(e){var t,i=ki.exec(Ri(e._i));if(i){if(t=Ti(i[4],i[3],i[2],i[5],i[6],i[7]),!Li(i[1],t,e))return;e._a=t,e._tzm=Pi(i[8],i[9],i[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Fi(e){var t=Di.exec(e._i);null===t?(Ai(e),!1===e._isValid&&(delete e._isValid,Ni(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Oi(e,t,i){return null!=e?e:null!=t?t:i}function Bi(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Gi(e){var t,i,n,o,s,r=[];if(!e._d){for(n=Bi(e),e._w&&null==e._a[ze]&&null==e._a[Ge]&&zi(e),null!=e._dayOfYear&&(s=Oi(e._a[Be],n[Be]),(e._dayOfYear>Ke(s)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),i=bt(s,0,e._dayOfYear),e._a[Ge]=i.getUTCMonth(),e._a[ze]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=n[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[_e]&&0===e._a[Ve]&&0===e._a[He]&&0===e._a[We]&&(e._nextDay=!0,e._a[_e]=0),e._d=(e._useUTC?bt:yt).apply(null,r),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_e]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==o&&(v(e).weekdayMismatch=!0)}}function zi(e){var t,i,n,o,s,r,a,l,d;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,r=4,i=Oi(t.GG,e._a[Be],wt(Zi(),1,4).year),n=Oi(t.W,1),((o=Oi(t.E,1))<1||o>7)&&(l=!0)):(s=e._locale._week.dow,r=e._locale._week.doy,d=wt(Zi(),s,r),i=Oi(t.gg,e._a[Be],d.year),n=Oi(t.w,d.week),null!=t.d?((o=t.d)<0||o>6)&&(l=!0):null!=t.e?(o=t.e+s,(t.e<0||t.e>6)&&(l=!0)):o=s),n<1||n>St(i,s,r)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(a=xt(i,n,o,s,r),e._a[Be]=a.year,e._dayOfYear=a.dayOfYear)}function _i(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],v(e).empty=!0;var t,i,o,s,r,a,l,d=""+e._i,c=d.length,h=0;for(l=(o=j(e._f,e._locale).match(O)||[]).length,t=0;t<l;t++)s=o[t],(i=(d.match(Ie(s,e))||[])[0])&&((r=d.substr(0,d.indexOf(i))).length>0&&v(e).unusedInput.push(r),d=d.slice(d.indexOf(i)+i.length),h+=i.length),z[s]?(i?v(e).empty=!1:v(e).unusedTokens.push(s),Fe(s,i,e)):e._strict&&!i&&v(e).unusedTokens.push(s);v(e).charsLeftOver=c-h,d.length>0&&v(e).unusedInput.push(d),e._a[_e]<=12&&!0===v(e).bigHour&&e._a[_e]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[_e]=Vi(e._locale,e._a[_e],e._meridiem),null!==(a=v(e).era)&&(e._a[Be]=e._locale.erasConvertYear(a,e._a[Be])),Gi(e),bi(e)}else Ni(e);else Ai(e)}function Vi(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((n=e.isPM(i))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function Hi(e){var t,i,n,o,s,r,a=!1,l=e._f.length;if(0===l)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<l;o++)s=0,r=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],_i(t),f(t)&&(r=!0),s+=v(t).charsLeftOver,s+=10*v(t).unusedTokens.length,v(t).score=s,a?s<n&&(n=s,i=t):(null==n||s<n||r)&&(n=s,i=t,r&&(a=!0));p(e,i||t)}function Wi(e){if(!e._d){var t=ne(e._i),i=void 0===t.day?t.date:t.day;e._a=u([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Gi(e)}}function ji(e){var t=new w(bi(Ui(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ui(e){var t=e._i,i=e._f;return e._locale=e._locale||fi(e._l),null===t||void 0===i&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new w(bi(t)):(h(t)?e._d=t:s(i)?Hi(e):i?_i(e):Ki(e),f(e)||(e._d=null),e))}function Ki(e){var t=e._i;d(t)?e._d=new Date(n.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Fi(e):s(t)?(e._a=u(t.slice(0),(function(e){return parseInt(e,10)})),Gi(e)):r(t)?Wi(e):c(t)?e._d=new Date(t):n.createFromInputFallback(e)}function Yi(e,t,i,n,o){var a={};return!0!==t&&!1!==t||(n=t,t=void 0),!0!==i&&!1!==i||(n=i,i=void 0),(r(e)&&l(e)||s(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=i,a._i=e,a._f=t,a._strict=n,ji(a)}function Zi(e,t,i,n){return Yi(e,t,i,n,!1)}n.createFromInputFallback=D("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var Xi=D("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Zi.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),qi=D("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Zi.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Qi(e,t){var i,n;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Zi();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}function Ji(){return Qi("isBefore",[].slice.call(arguments,0))}function $i(){return Qi("isAfter",[].slice.call(arguments,0))}var en=function(){return Date.now?Date.now():+new Date},tn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function nn(e){var t,i,n=!1,o=tn.length;for(t in e)if(a(e,t)&&(-1===Ye.call(tn,t)||null!=e[t]&&isNaN(e[t])))return!1;for(i=0;i<o;++i)if(e[tn[i]]){if(n)return!1;parseFloat(e[tn[i]])!==Re(e[tn[i]])&&(n=!0)}return!0}function on(){return this._isValid}function sn(){return An(NaN)}function rn(e){var t=ne(e),i=t.year||0,n=t.quarter||0,o=t.month||0,s=t.week||t.isoWeek||0,r=t.day||0,a=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._isValid=nn(t),this._milliseconds=+c+1e3*d+6e4*l+1e3*a*60*60,this._days=+r+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=fi(),this._bubble()}function an(e){return e instanceof rn}function ln(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function dn(e,t,i){var n,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;n<o;n++)(i&&e[n]!==t[n]||!i&&Re(e[n])!==Re(t[n]))&&r++;return r+s}function cn(e,t){_(e,0,0,(function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+F(~~(e/60),2)+t+F(~~e%60,2)}))}cn("Z",":"),cn("ZZ",""),ke("Z",xe),ke("ZZ",xe),Pe(["Z","ZZ"],(function(e,t,i){i._useUTC=!0,i._tzm=un(xe,e)}));var hn=/([\+\-]|\d\d)/gi;function un(e,t){var i,n,o=(t||"").match(e);return null===o?null:0===(n=60*(i=((o[o.length-1]||[])+"").match(hn)||["-",0,0])[1]+Re(i[2]))?0:"+"===i[0]?n:-n}function pn(e,t){var i,o;return t._isUTC?(i=t.clone(),o=(S(e)||h(e)?e.valueOf():Zi(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+o),n.updateOffset(i,!1),i):Zi(e).local()}function gn(e){return-Math.round(e._d.getTimezoneOffset())}function mn(e,t,i){var o,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=un(xe,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(o=gn(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),s!==e&&(!t||this._changeInProgress?Pn(this,An(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:gn(this)}function vn(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function fn(e){return this.utcOffset(0,e)}function yn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(gn(this),"m")),this}function bn(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=un(Ce,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Cn(e){return!!this.isValid()&&(e=e?Zi(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function xn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wn(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=Ui(t))._a?(e=t._isUTC?g(t._a):Zi(t._a),this._isDSTShifted=this.isValid()&&dn(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sn(){return!!this.isValid()&&!this._isUTC}function Mn(){return!!this.isValid()&&this._isUTC}function Dn(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var kn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,In=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function An(e,t){var i,n,o,s=e,r=null;return an(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(r=kn.exec(e))?(i="-"===r[1]?-1:1,s={y:0,d:Re(r[ze])*i,h:Re(r[_e])*i,m:Re(r[Ve])*i,s:Re(r[He])*i,ms:Re(ln(1e3*r[We]))*i}):(r=In.exec(e))?(i="-"===r[1]?-1:1,s={y:Tn(r[2],i),M:Tn(r[3],i),w:Tn(r[4],i),d:Tn(r[5],i),h:Tn(r[6],i),m:Tn(r[7],i),s:Tn(r[8],i)}):null==s?s={}:"object"===typeof s&&("from"in s||"to"in s)&&(o=Rn(Zi(s.from),Zi(s.to)),(s={}).ms=o.milliseconds,s.M=o.months),n=new rn(s),an(e)&&a(e,"_locale")&&(n._locale=e._locale),an(e)&&a(e,"_isValid")&&(n._isValid=e._isValid),n}function Tn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function En(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Rn(e,t){var i;return e.isValid()&&t.isValid()?(t=pn(t,e),e.isBefore(t)?i=En(e,t):((i=En(t,e)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Ln(e,t){return function(i,n){var o;return null===n||isNaN(+n)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),Pn(this,An(i,n),e),this}}function Pn(e,t,i,o){var s=t._milliseconds,r=ln(t._days),a=ln(t._months);e.isValid()&&(o=null==o||o,a&&ut(e,Qe(e,"Month")+a*i),r&&Je(e,"Date",Qe(e,"Date")+r*i),s&&e._d.setTime(e._d.valueOf()+s*i),o&&n.updateOffset(e,r||a))}An.fn=rn.prototype,An.invalid=sn;var Nn=Ln(1,"add"),Fn=Ln(-1,"subtract");function On(e){return"string"===typeof e||e instanceof String}function Bn(e){return S(e)||h(e)||On(e)||c(e)||zn(e)||Gn(e)||null===e||void 0===e}function Gn(e){var t,i,n=r(e)&&!l(e),o=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],d=s.length;for(t=0;t<d;t+=1)i=s[t],o=o||a(e,i);return n&&o}function zn(e){var t=s(e),i=!1;return t&&(i=0===e.filter((function(t){return!c(t)&&On(e)})).length),t&&i}function _n(e){var t,i,n=r(e)&&!l(e),o=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)i=s[t],o=o||a(e,i);return n&&o}function Vn(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Hn(e,t){1===arguments.length&&(arguments[0]?Bn(arguments[0])?(e=arguments[0],t=void 0):_n(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Zi(),o=pn(i,this).startOf("day"),s=n.calendarFormat(this,o)||"sameElse",r=t&&(T(t[s])?t[s].call(this,i):t[s]);return this.format(r||this.localeData().calendar(s,this,Zi(i)))}function Wn(){return new w(this)}function jn(e,t){var i=S(e)?e:Zi(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())}function Un(e,t){var i=S(e)?e:Zi(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())}function Kn(e,t,i,n){var o=S(e)?e:Zi(e),s=S(t)?t:Zi(t);return!!(this.isValid()&&o.isValid()&&s.isValid())&&("("===(n=n||"()")[0]?this.isAfter(o,i):!this.isBefore(o,i))&&(")"===n[1]?this.isBefore(s,i):!this.isAfter(s,i))}function Yn(e,t){var i,n=S(e)?e:Zi(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))}function Zn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Xn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function qn(e,t,i){var n,o,s;if(!this.isValid())return NaN;if(!(n=pn(e,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),t=ie(t)){case"year":s=Qn(this,n)/12;break;case"month":s=Qn(this,n);break;case"quarter":s=Qn(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-o)/864e5;break;case"week":s=(this-n-o)/6048e5;break;default:s=this-n}return i?s:Ee(s)}function Qn(e,t){if(e.date()<t.date())return-Qn(t,e);var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months");return-(i+(t-n<0?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(i+1,"months")-n)))||0}function Jn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $n(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?W(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(i,"Z")):W(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function eo(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,i,n,o="moment",s="";return this.isLocal()||(o=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+o+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=s+'[")]',this.format(e+t+i+n)}function to(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=W(this,e);return this.localeData().postformat(t)}function io(e,t){return this.isValid()&&(S(e)&&e.isValid()||Zi(e).isValid())?An({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function no(e){return this.from(Zi(),e)}function oo(e,t){return this.isValid()&&(S(e)&&e.isValid()||Zi(e).isValid())?An({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function so(e){return this.to(Zi(),e)}function ro(e){var t;return void 0===e?this._locale._abbr:(null!=(t=fi(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ao=D("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function lo(){return this._locale}var co=1e3,ho=60*co,uo=60*ho,po=3506328*uo;function go(e,t){return(e%t+t)%t}function mo(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-po:new Date(e,t,i).valueOf()}function vo(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-po:Date.UTC(e,t,i)}function fo(e){var t,i;if(void 0===(e=ie(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?vo:mo,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=go(t+(this._isUTC?0:this.utcOffset()*ho),uo);break;case"minute":t=this._d.valueOf(),t-=go(t,ho);break;case"second":t=this._d.valueOf(),t-=go(t,co)}return this._d.setTime(t),n.updateOffset(this,!0),this}function yo(e){var t,i;if(void 0===(e=ie(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?vo:mo,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=uo-go(t+(this._isUTC?0:this.utcOffset()*ho),uo)-1;break;case"minute":t=this._d.valueOf(),t+=ho-go(t,ho)-1;break;case"second":t=this._d.valueOf(),t+=co-go(t,co)-1}return this._d.setTime(t),n.updateOffset(this,!0),this}function bo(){return this._d.valueOf()-6e4*(this._offset||0)}function Co(){return Math.floor(this.valueOf()/1e3)}function xo(){return new Date(this.valueOf())}function wo(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function So(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Mo(){return this.isValid()?this.toISOString():null}function Do(){return f(this)}function ko(){return p({},v(this))}function Io(){return v(this).overflow}function Ao(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function To(e,t){var i,o,s,r=this._eras||fi("en")._eras;for(i=0,o=r.length;i<o;++i)switch("string"===typeof r[i].since&&(s=n(r[i].since).startOf("day"),r[i].since=s.valueOf()),typeof r[i].until){case"undefined":r[i].until=1/0;break;case"string":s=n(r[i].until).startOf("day").valueOf(),r[i].until=s.valueOf()}return r}function Eo(e,t,i){var n,o,s,r,a,l=this.eras();for(e=e.toUpperCase(),n=0,o=l.length;n<o;++n)if(s=l[n].name.toUpperCase(),r=l[n].abbr.toUpperCase(),a=l[n].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(r===e)return l[n];break;case"NNNN":if(s===e)return l[n];break;case"NNNNN":if(a===e)return l[n]}else if([s,r,a].indexOf(e)>=0)return l[n]}function Ro(e,t){var i=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*i}function Lo(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].name;if(n[e].until<=i&&i<=n[e].since)return n[e].name}return""}function Po(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].narrow;if(n[e].until<=i&&i<=n[e].since)return n[e].narrow}return""}function No(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].abbr;if(n[e].until<=i&&i<=n[e].since)return n[e].abbr}return""}function Fo(){var e,t,i,o,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=s[e].since<=s[e].until?1:-1,o=this.clone().startOf("day").valueOf(),s[e].since<=o&&o<=s[e].until||s[e].until<=o&&o<=s[e].since)return(this.year()-n(s[e].since).year())*i+s[e].offset;return this.year()}function Oo(e){return a(this,"_erasNameRegex")||Wo.call(this),e?this._erasNameRegex:this._erasRegex}function Bo(e){return a(this,"_erasAbbrRegex")||Wo.call(this),e?this._erasAbbrRegex:this._erasRegex}function Go(e){return a(this,"_erasNarrowRegex")||Wo.call(this),e?this._erasNarrowRegex:this._erasRegex}function zo(e,t){return t.erasAbbrRegex(e)}function _o(e,t){return t.erasNameRegex(e)}function Vo(e,t){return t.erasNarrowRegex(e)}function Ho(e,t){return t._eraYearOrdinalRegex||ye}function Wo(){var e,t,i,n,o,s=[],r=[],a=[],l=[],d=this.eras();for(e=0,t=d.length;e<t;++e)i=Te(d[e].name),n=Te(d[e].abbr),o=Te(d[e].narrow),r.push(i),s.push(n),a.push(o),l.push(i),l.push(n),l.push(o);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function jo(e,t){_(0,[e,e.length],0,t)}function Uo(e){return Qo.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ko(e){return Qo.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Yo(){return St(this.year(),1,4)}function Zo(){return St(this.isoWeekYear(),1,4)}function Xo(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function qo(){var e=this.localeData()._week;return St(this.weekYear(),e.dow,e.doy)}function Qo(e,t,i,n,o){var s;return null==e?wt(this,n,o).year:(t>(s=St(e,n,o))&&(t=s),Jo.call(this,e,t,i,n,o))}function Jo(e,t,i,n,o){var s=xt(e,t,i,n,o),r=bt(s.year,0,s.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function $o(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}_("N",0,0,"eraAbbr"),_("NN",0,0,"eraAbbr"),_("NNN",0,0,"eraAbbr"),_("NNNN",0,0,"eraName"),_("NNNNN",0,0,"eraNarrow"),_("y",["y",1],"yo","eraYear"),_("y",["yy",2],0,"eraYear"),_("y",["yyy",3],0,"eraYear"),_("y",["yyyy",4],0,"eraYear"),ke("N",zo),ke("NN",zo),ke("NNN",zo),ke("NNNN",_o),ke("NNNNN",Vo),Pe(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,i,n){var o=i._locale.erasParse(e,n,i._strict);o?v(i).era=o:v(i).invalidEra=e})),ke("y",ye),ke("yy",ye),ke("yyy",ye),ke("yyyy",ye),ke("yo",Ho),Pe(["y","yy","yyy","yyyy"],Be),Pe(["yo"],(function(e,t,i,n){var o;i._locale._eraYearOrdinalRegex&&(o=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[Be]=i._locale.eraYearOrdinalParse(e,o):t[Be]=parseInt(e,10)})),_(0,["gg",2],0,(function(){return this.weekYear()%100})),_(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),jo("gggg","weekYear"),jo("ggggg","weekYear"),jo("GGGG","isoWeekYear"),jo("GGGGG","isoWeekYear"),ke("G",be),ke("g",be),ke("GG",ue,le),ke("gg",ue,le),ke("GGGG",ve,ce),ke("gggg",ve,ce),ke("GGGGG",fe,he),ke("ggggg",fe,he),Ne(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,i,n){t[n.substr(0,2)]=Re(e)})),Ne(["gg","GG"],(function(e,t,i,o){t[o]=n.parseTwoDigitYear(e)})),_("Q",0,"Qo","quarter"),ke("Q",ae),Pe("Q",(function(e,t){t[Ge]=3*(Re(e)-1)})),_("D",["DD",2],"Do","date"),ke("D",ue,Me),ke("DD",ue,le),ke("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Pe(["D","DD"],ze),Pe("Do",(function(e,t){t[ze]=Re(e.match(ue)[0])}));var es=qe("Date",!0);function ts(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}_("DDD",["DDDD",3],"DDDo","dayOfYear"),ke("DDD",me),ke("DDDD",de),Pe(["DDD","DDDD"],(function(e,t,i){i._dayOfYear=Re(e)})),_("m",["mm",2],0,"minute"),ke("m",ue,De),ke("mm",ue,le),Pe(["m","mm"],Ve);var is=qe("Minutes",!1);_("s",["ss",2],0,"second"),ke("s",ue,De),ke("ss",ue,le),Pe(["s","ss"],He);var ns,os,ss=qe("Seconds",!1);for(_("S",0,0,(function(){return~~(this.millisecond()/100)})),_(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),_(0,["SSS",3],0,"millisecond"),_(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),_(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),_(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),_(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),_(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),_(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ke("S",me,ae),ke("SS",me,le),ke("SSS",me,de),ns="SSSS";ns.length<=9;ns+="S")ke(ns,ye);function rs(e,t){t[We]=Re(1e3*("0."+e))}for(ns="S";ns.length<=9;ns+="S")Pe(ns,rs);function as(){return this._isUTC?"UTC":""}function ls(){return this._isUTC?"Coordinated Universal Time":""}os=qe("Milliseconds",!1),_("z",0,0,"zoneAbbr"),_("zz",0,0,"zoneName");var ds=w.prototype;function cs(e){return Zi(1e3*e)}function hs(){return Zi.apply(null,arguments).parseZone()}function us(e){return e}ds.add=Nn,ds.calendar=Hn,ds.clone=Wn,ds.diff=qn,ds.endOf=yo,ds.format=to,ds.from=io,ds.fromNow=no,ds.to=oo,ds.toNow=so,ds.get=$e,ds.invalidAt=Io,ds.isAfter=jn,ds.isBefore=Un,ds.isBetween=Kn,ds.isSame=Yn,ds.isSameOrAfter=Zn,ds.isSameOrBefore=Xn,ds.isValid=Do,ds.lang=ao,ds.locale=ro,ds.localeData=lo,ds.max=qi,ds.min=Xi,ds.parsingFlags=ko,ds.set=et,ds.startOf=fo,ds.subtract=Fn,ds.toArray=wo,ds.toObject=So,ds.toDate=xo,ds.toISOString=$n,ds.inspect=eo,"undefined"!==typeof Symbol&&null!=Symbol.for&&(ds[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ds.toJSON=Mo,ds.toString=Jn,ds.unix=Co,ds.valueOf=bo,ds.creationData=Ao,ds.eraName=Lo,ds.eraNarrow=Po,ds.eraAbbr=No,ds.eraYear=Fo,ds.year=Ze,ds.isLeapYear=Xe,ds.weekYear=Uo,ds.isoWeekYear=Ko,ds.quarter=ds.quarters=$o,ds.month=pt,ds.daysInMonth=gt,ds.week=ds.weeks=At,ds.isoWeek=ds.isoWeeks=Tt,ds.weeksInYear=Xo,ds.weeksInWeekYear=qo,ds.isoWeeksInYear=Yo,ds.isoWeeksInISOWeekYear=Zo,ds.date=es,ds.day=ds.days=jt,ds.weekday=Ut,ds.isoWeekday=Kt,ds.dayOfYear=ts,ds.hour=ds.hours=ni,ds.minute=ds.minutes=is,ds.second=ds.seconds=ss,ds.millisecond=ds.milliseconds=os,ds.utcOffset=mn,ds.utc=fn,ds.local=yn,ds.parseZone=bn,ds.hasAlignedHourOffset=Cn,ds.isDST=xn,ds.isLocal=Sn,ds.isUtcOffset=Mn,ds.isUtc=Dn,ds.isUTC=Dn,ds.zoneAbbr=as,ds.zoneName=ls,ds.dates=D("dates accessor is deprecated. Use date instead.",es),ds.months=D("months accessor is deprecated. Use month instead",pt),ds.years=D("years accessor is deprecated. Use year instead",Ze),ds.zone=D("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vn),ds.isDSTShifted=D("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wn);var ps=L.prototype;function gs(e,t,i,n){var o=fi(),s=g().set(n,t);return o[i](s,e)}function ms(e,t,i){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return gs(e,t,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=gs(e,n,i,"month");return o}function vs(e,t,i,n){"boolean"===typeof e?(c(t)&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,c(t)&&(i=t,t=void 0),t=t||"");var o,s=fi(),r=e?s._week.dow:0,a=[];if(null!=i)return gs(t,(i+r)%7,n,"day");for(o=0;o<7;o++)a[o]=gs(t,(o+r)%7,n,"day");return a}function fs(e,t){return ms(e,t,"months")}function ys(e,t){return ms(e,t,"monthsShort")}function bs(e,t,i){return vs(e,t,i,"weekdays")}function Cs(e,t,i){return vs(e,t,i,"weekdaysShort")}function xs(e,t,i){return vs(e,t,i,"weekdaysMin")}ps.calendar=N,ps.longDateFormat=K,ps.invalidDate=Z,ps.ordinal=Q,ps.preparse=us,ps.postformat=us,ps.relativeTime=$,ps.pastFuture=ee,ps.set=E,ps.eras=To,ps.erasParse=Eo,ps.erasConvertYear=Ro,ps.erasAbbrRegex=Bo,ps.erasNameRegex=Oo,ps.erasNarrowRegex=Go,ps.months=lt,ps.monthsShort=dt,ps.monthsParse=ht,ps.monthsRegex=vt,ps.monthsShortRegex=mt,ps.week=Mt,ps.firstDayOfYear=It,ps.firstDayOfWeek=kt,ps.weekdays=zt,ps.weekdaysMin=Vt,ps.weekdaysShort=_t,ps.weekdaysParse=Wt,ps.weekdaysRegex=Yt,ps.weekdaysShortRegex=Zt,ps.weekdaysMinRegex=Xt,ps.isPM=ti,ps.meridiem=oi,gi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Re(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=D("moment.lang is deprecated. Use moment.locale instead.",gi),n.langData=D("moment.langData is deprecated. Use moment.localeData instead.",fi);var ws=Math.abs;function Ss(){var e=this._data;return this._milliseconds=ws(this._milliseconds),this._days=ws(this._days),this._months=ws(this._months),e.milliseconds=ws(e.milliseconds),e.seconds=ws(e.seconds),e.minutes=ws(e.minutes),e.hours=ws(e.hours),e.months=ws(e.months),e.years=ws(e.years),this}function Ms(e,t,i,n){var o=An(t,i);return e._milliseconds+=n*o._milliseconds,e._days+=n*o._days,e._months+=n*o._months,e._bubble()}function Ds(e,t){return Ms(this,e,t,1)}function ks(e,t){return Ms(this,e,t,-1)}function Is(e){return e<0?Math.floor(e):Math.ceil(e)}function As(){var e,t,i,n,o,s=this._milliseconds,r=this._days,a=this._months,l=this._data;return s>=0&&r>=0&&a>=0||s<=0&&r<=0&&a<=0||(s+=864e5*Is(Es(a)+r),r=0,a=0),l.milliseconds=s%1e3,e=Ee(s/1e3),l.seconds=e%60,t=Ee(e/60),l.minutes=t%60,i=Ee(t/60),l.hours=i%24,r+=Ee(i/24),a+=o=Ee(Ts(r)),r-=Is(Es(o)),n=Ee(a/12),a%=12,l.days=r,l.months=a,l.years=n,this}function Ts(e){return 4800*e/146097}function Es(e){return 146097*e/4800}function Rs(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=ie(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+Ts(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Es(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Ls(e){return function(){return this.as(e)}}var Ps=Ls("ms"),Ns=Ls("s"),Fs=Ls("m"),Os=Ls("h"),Bs=Ls("d"),Gs=Ls("w"),zs=Ls("M"),_s=Ls("Q"),Vs=Ls("y"),Hs=Ps;function Ws(){return An(this)}function js(e){return e=ie(e),this.isValid()?this[e+"s"]():NaN}function Us(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ks=Us("milliseconds"),Ys=Us("seconds"),Zs=Us("minutes"),Xs=Us("hours"),qs=Us("days"),Qs=Us("months"),Js=Us("years");function $s(){return Ee(this.days()/7)}var er=Math.round,tr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ir(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function nr(e,t,i,n){var o=An(e).abs(),s=er(o.as("s")),r=er(o.as("m")),a=er(o.as("h")),l=er(o.as("d")),d=er(o.as("M")),c=er(o.as("w")),h=er(o.as("y")),u=s<=i.ss&&["s",s]||s<i.s&&["ss",s]||r<=1&&["m"]||r<i.m&&["mm",r]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(u=u||c<=1&&["w"]||c<i.w&&["ww",c]),(u=u||d<=1&&["M"]||d<i.M&&["MM",d]||h<=1&&["y"]||["yy",h])[2]=t,u[3]=+e>0,u[4]=n,ir.apply(null,u)}function or(e){return void 0===e?er:"function"===typeof e&&(er=e,!0)}function sr(e,t){return void 0!==tr[e]&&(void 0===t?tr[e]:(tr[e]=t,"s"===e&&(tr.ss=t-1),!0))}function rr(e,t){if(!this.isValid())return this.localeData().invalidDate();var i,n,o=!1,s=tr;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(o=e),"object"===typeof t&&(s=Object.assign({},tr,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),n=nr(this,!o,s,i=this.localeData()),o&&(n=i.pastFuture(+this,n)),i.postformat(n)}var ar=Math.abs;function lr(e){return(e>0)-(e<0)||+e}function dr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,n,o,s,r,a,l=ar(this._milliseconds)/1e3,d=ar(this._days),c=ar(this._months),h=this.asSeconds();return h?(e=Ee(l/60),t=Ee(e/60),l%=60,e%=60,i=Ee(c/12),c%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",o=h<0?"-":"",s=lr(this._months)!==lr(h)?"-":"",r=lr(this._days)!==lr(h)?"-":"",a=lr(this._milliseconds)!==lr(h)?"-":"",o+"P"+(i?s+i+"Y":"")+(c?s+c+"M":"")+(d?r+d+"D":"")+(t||e||l?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(l?a+n+"S":"")):"P0D"}var cr=rn.prototype;return cr.isValid=on,cr.abs=Ss,cr.add=Ds,cr.subtract=ks,cr.as=Rs,cr.asMilliseconds=Ps,cr.asSeconds=Ns,cr.asMinutes=Fs,cr.asHours=Os,cr.asDays=Bs,cr.asWeeks=Gs,cr.asMonths=zs,cr.asQuarters=_s,cr.asYears=Vs,cr.valueOf=Hs,cr._bubble=As,cr.clone=Ws,cr.get=js,cr.milliseconds=Ks,cr.seconds=Ys,cr.minutes=Zs,cr.hours=Xs,cr.days=qs,cr.weeks=$s,cr.months=Qs,cr.years=Js,cr.humanize=rr,cr.toISOString=dr,cr.toString=dr,cr.toJSON=dr,cr.locale=ro,cr.localeData=lo,cr.toIsoString=D("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",dr),cr.lang=ao,_("X",0,0,"unix"),_("x",0,0,"valueOf"),ke("x",be),ke("X",we),Pe("X",(function(e,t,i){i._d=new Date(1e3*parseFloat(e))})),Pe("x",(function(e,t,i){i._d=new Date(Re(e))})),n.version="2.30.1",o(Zi),n.fn=ds,n.min=Ji,n.max=$i,n.now=en,n.utc=g,n.unix=cs,n.months=fs,n.isDate=h,n.locale=gi,n.invalid=y,n.duration=An,n.isMoment=S,n.weekdays=bs,n.parseZone=hs,n.localeData=fi,n.isDuration=an,n.monthsShort=ys,n.weekdaysMin=xs,n.defineLocale=mi,n.updateLocale=vi,n.locales=yi,n.weekdaysShort=Cs,n.normalizeUnits=ie,n.relativeTimeRounding=or,n.relativeTimeThreshold=sr,n.calendarFormat=Vn,n.prototype=ds,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()},512:e=>{"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var s,r,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var d in s=Object(arguments[l]))i.call(s,d)&&(a[d]=s[d]);if(t){r=t(s);for(var c=0;c<r.length;c++)n.call(s,r[c])&&(a[r[c]]=s[r[c]])}}return a}},627:(e,t,i)=>{"use strict";var n=i(176),o=i(46);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function l(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(a[e]=t,e=0;e<t.length;e++)r.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function m(e,t,i,n,o,s,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=r}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var f=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,i,n){var o=v.hasOwnProperty(t)?v[t]:null;(null!==o?0!==o.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,o,n)&&(i=null),n||null===o?function(e){return!!h.call(g,e)||!h.call(p,e)&&(u.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):o.mustUseProperty?e[o.propertyName]=null===i?3!==o.type&&"":i:(t=o.attributeName,n=o.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(o=o.type)||4===o&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(f,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(f,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(f,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var C=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),I=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var O,B=Object.assign;function G(e){if(void 0===O)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function _(e,t){if(!e||z)return"";z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&"string"===typeof d.stack){for(var o=d.stack.split("\n"),s=n.stack.split("\n"),r=o.length-1,a=s.length-1;1<=r&&0<=a&&o[r]!==s[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==s[a]){if(1!==r||1!==a)do{if(r--,0>--a||o[r]!==s[a]){var l="\n"+o[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=r&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?G(e):""}function V(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=_(e.type,!1);case 11:return e=_(e.type.render,!1);case 1:return e=_(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case D:return"Profiler";case M:return"StrictMode";case T:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return H(e(t))}catch(i){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var o=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=U(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var i=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function q(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=j(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var i=j(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&Z(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,n){if(e=e.options,t){t={};for(var o=0;o<i.length;o++)t["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=t.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&n&&(e[i].defaultSelected=!0)}else{for(i=""+j(i),t=null,o=0;o<e.length;o++){if(e[o].value===i)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(s(92));if(te(i)){if(1<i.length)throw Error(s(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:j(i)}}function se(e,t){var i=j(t.value),n=j(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function ue(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function me(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),o=me(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,o):e[i]=o}}Object.keys(pe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var fe=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ce=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Me=null;function De(e){if(e=Co(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=wo(t),we(e.stateNode,e.type,t))}}function ke(e){Se?Me?Me.push(e):Me=[e]:Se=e}function Ie(){if(Se){var e=Se,t=Me;if(Me=Se=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Ae(e,t){return e(t)}function Te(){}var Ee=!1;function Re(e,t,i){if(Ee)return e(t,i);Ee=!0;try{return Ae(e,t,i)}finally{Ee=!1,(null!==Se||null!==Me)&&(Te(),Ie())}}function Le(e,t){var i=e.stateNode;if(null===i)return null;var n=wo(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(s(231,t,typeof i));return i}var Pe=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ce){Pe=!1}function Fe(e,t,i,n,o,s,r,a,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(i,d)}catch(c){this.onError(c)}}var Oe=!1,Be=null,Ge=!1,ze=null,_e={onError:function(e){Oe=!0,Be=e}};function Ve(e,t,i,n,o,s,r,a,l){Oe=!1,Be=null,Fe.apply(_e,arguments)}function He(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(He(e)!==e)throw Error(s(188))}function Ue(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var i=e,n=t;;){var o=i.return;if(null===o)break;var r=o.alternate;if(null===r){if(null!==(n=o.return)){i=n;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===i)return je(o),e;if(r===n)return je(o),t;r=r.sibling}throw Error(s(188))}if(i.return!==n.return)i=o,n=r;else{for(var a=!1,l=o.child;l;){if(l===i){a=!0,i=o,n=r;break}if(l===n){a=!0,n=o,i=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===i){a=!0,i=r,n=o;break}if(l===n){a=!0,n=r,i=o;break}l=l.sibling}if(!a)throw Error(s(189))}}if(i.alternate!==n)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=o.unstable_scheduleCallback,Ze=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,qe=o.unstable_requestPaint,Qe=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,$e=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,it=o.unstable_LowPriority,nt=o.unstable_IdlePriority,ot=null,st=null;var rt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var dt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,o=e.suspendedLanes,s=e.pingedLanes,r=268435455&i;if(0!==r){var a=r&~o;0!==a?n=ht(a):0!==(s&=r)&&(n=ht(s))}else 0!==(r=i&~o)?n=ht(r):0!==s&&(n=ht(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&o)&&((o=n&-n)>=(s=t&-t)||16===o&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)o=1<<(i=31-rt(t)),n|=e[i],t&=~o;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=dt;return 0===(4194240&(dt<<=1))&&(dt=64),e}function vt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ft(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=i}function yt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-rt(i),o=1<<n;o&t|e[n]&t&&(e[n]|=t),i&=~o}}var bt=0;function Ct(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,Mt,Dt,kt=!1,It=[],At=null,Tt=null,Et=null,Rt=new Map,Lt=new Map,Pt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,i,n,o,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[o]},null!==t&&(null!==(t=Co(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Bt(e){var t=bo(e.target);if(null!==t){var i=He(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=We(i)))return e.blockedOn=t,void Dt(e.priority,(function(){St(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=Co(i))&&wt(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);Ce=n,i.target.dispatchEvent(n),Ce=null,t.shift()}return!0}function zt(e,t,i){Gt(e)&&i.delete(t)}function _t(){kt=!1,null!==At&&Gt(At)&&(At=null),null!==Tt&&Gt(Tt)&&(Tt=null),null!==Et&&Gt(Et)&&(Et=null),Rt.forEach(zt),Lt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_t)))}function Ht(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var i=1;i<It.length;i++){var n=It[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==Tt&&Vt(Tt,e),null!==Et&&Vt(Et,e),Rt.forEach(t),Lt.forEach(t),i=0;i<Pt.length;i++)(n=Pt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<Pt.length&&null===(i=Pt[0]).blockedOn;)Bt(i),null===i.blockedOn&&Pt.shift()}var Wt=C.ReactCurrentBatchConfig,jt=!0;function Ut(e,t,i,n){var o=bt,s=Wt.transition;Wt.transition=null;try{bt=1,Yt(e,t,i,n)}finally{bt=o,Wt.transition=s}}function Kt(e,t,i,n){var o=bt,s=Wt.transition;Wt.transition=null;try{bt=4,Yt(e,t,i,n)}finally{bt=o,Wt.transition=s}}function Yt(e,t,i,n){if(jt){var o=Xt(e,t,i,n);if(null===o)jn(e,t,n,Zt,i),Ft(e,n);else if(function(e,t,i,n,o){switch(t){case"focusin":return At=Ot(At,e,t,i,n,o),!0;case"dragenter":return Tt=Ot(Tt,e,t,i,n,o),!0;case"mouseover":return Et=Ot(Et,e,t,i,n,o),!0;case"pointerover":var s=o.pointerId;return Rt.set(s,Ot(Rt.get(s)||null,e,t,i,n,o)),!0;case"gotpointercapture":return s=o.pointerId,Lt.set(s,Ot(Lt.get(s)||null,e,t,i,n,o)),!0}return!1}(o,e,t,i,n))n.stopPropagation();else if(Ft(e,n),4&t&&-1<Nt.indexOf(e)){for(;null!==o;){var s=Co(o);if(null!==s&&xt(s),null===(s=Xt(e,t,i,n))&&jn(e,t,n,Zt,i),s===o)break;o=s}null!==o&&n.stopPropagation()}else jn(e,t,n,null,i)}}var Zt=null;function Xt(e,t,i,n){if(Zt=null,null!==(e=bo(e=xe(n))))if(null===(t=He(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case it:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,$t=null;function ei(){if($t)return $t;var e,t,i=Jt,n=i.length,o="value"in Qt?Qt.value:Qt.textContent,s=o.length;for(e=0;e<n&&i[e]===o[e];e++);var r=n-e;for(t=1;t<=r&&i[n-t]===o[s-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function ni(){return!1}function oi(e){function t(t,i,n,o,s){for(var r in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(o):o[r]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?ii:ni,this.isPropagationStopped=ni,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var si,ri,ai,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=oi(li),ci=B({},li,{view:0,detail:0}),hi=oi(ci),ui=B({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&"mousemove"===e.type?(si=e.screenX-ai.screenX,ri=e.screenY-ai.screenY):ri=si=0,ai=e),si)},movementY:function(e){return"movementY"in e?e.movementY:ri}}),pi=oi(ui),gi=oi(B({},ui,{dataTransfer:0})),mi=oi(B({},ci,{relatedTarget:0})),vi=oi(B({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),fi=B({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yi=oi(fi),bi=oi(B({},li,{data:0})),Ci={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wi[e])&&!!t[e]}function Mi(){return Si}var Di=B({},ci,{key:function(e){if(e.key){var t=Ci[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mi,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ki=oi(Di),Ii=oi(B({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ai=oi(B({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mi})),Ti=oi(B({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ei=B({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ri=oi(Ei),Li=[9,13,27,32],Pi=c&&"CompositionEvent"in window,Ni=null;c&&"documentMode"in document&&(Ni=document.documentMode);var Fi=c&&"TextEvent"in window&&!Ni,Oi=c&&(!Pi||Ni&&8<Ni&&11>=Ni),Bi=String.fromCharCode(32),Gi=!1;function zi(e,t){switch(e){case"keyup":return-1!==Li.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _i(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vi=!1;var Hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hi[e.type]:"textarea"===t}function ji(e,t,i,n){ke(n),0<(t=Kn(t,"onChange")).length&&(i=new di("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Ui=null,Ki=null;function Yi(e){Gn(e,0)}function Zi(e){if(Y(xo(e)))return e}function Xi(e,t){if("change"===e)return t}var qi=!1;if(c){var Qi;if(c){var Ji="oninput"in document;if(!Ji){var $i=document.createElement("div");$i.setAttribute("oninput","return;"),Ji="function"===typeof $i.oninput}Qi=Ji}else Qi=!1;qi=Qi&&(!document.documentMode||9<document.documentMode)}function en(){Ui&&(Ui.detachEvent("onpropertychange",tn),Ki=Ui=null)}function tn(e){if("value"===e.propertyName&&Zi(Ki)){var t=[];ji(t,Ki,e,xe(e)),Re(Yi,t)}}function nn(e,t,i){"focusin"===e?(en(),Ki=i,(Ui=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function on(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zi(Ki)}function sn(e,t){if("click"===e)return Zi(t)}function rn(e,t){if("input"===e||"change"===e)return Zi(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var o=i[n];if(!h.call(t,o)||!an(e[o],t[o]))return!1}return!0}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cn(e,t){var i,n=dn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dn(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function un(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=Z((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gn(e){var t=un(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&hn(i.ownerDocument.documentElement,i)){if(null!==n&&pn(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=i.textContent.length,s=Math.min(n.start,o);n=void 0===n.end?s:Math.min(n.end,o),!e.extend&&s>n&&(o=n,n=s,s=o),o=cn(i,s);var r=cn(i,n);o&&r&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=c&&"documentMode"in document&&11>=document.documentMode,vn=null,fn=null,yn=null,bn=!1;function Cn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;bn||null==vn||vn!==Z(n)||("selectionStart"in(n=vn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Kn(fn,"onSelect")).length&&(t=new di("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=vn)))}function xn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var wn={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},Sn={},Mn={};function Dn(e){if(Sn[e])return Sn[e];if(!wn[e])return e;var t,i=wn[e];for(t in i)if(i.hasOwnProperty(t)&&t in Mn)return Sn[e]=i[t];return e}c&&(Mn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var kn=Dn("animationend"),In=Dn("animationiteration"),An=Dn("animationstart"),Tn=Dn("transitionend"),En=new Map,Rn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(e,t){En.set(e,t),l(t,[e])}for(var Pn=0;Pn<Rn.length;Pn++){var Nn=Rn[Pn];Ln(Nn.toLowerCase(),"on"+(Nn[0].toUpperCase()+Nn.slice(1)))}Ln(kn,"onAnimationEnd"),Ln(In,"onAnimationIteration"),Ln(An,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(Tn,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),On=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fn));function Bn(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,o,r,a,l,d){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var c=Be;Oe=!1,Be=null,Ge||(Ge=!0,ze=c)}}(n,t,void 0,e),e.currentTarget=null}function Gn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],o=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var r=n.length-1;0<=r;r--){var a=n[r],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;Bn(o,a,d),s=l}else for(r=0;r<n.length;r++){if(l=(a=n[r]).instance,d=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;Bn(o,a,d),s=l}}}if(Ge)throw e=ze,Ge=!1,ze=null,e}function zn(e,t){var i=t[vo];void 0===i&&(i=t[vo]=new Set);var n=e+"__bubble";i.has(n)||(Wn(t,e,2,!1),i.add(n))}function _n(e,t,i){var n=0;t&&(n|=4),Wn(i,e,n,t)}var Vn="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[Vn]){e[Vn]=!0,r.forEach((function(t){"selectionchange"!==t&&(On.has(t)||_n(t,!1,e),_n(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vn]||(t[Vn]=!0,_n("selectionchange",!1,t))}}function Wn(e,t,i,n){switch(qt(t)){case 1:var o=Ut;break;case 4:o=Kt;break;default:o=Yt}i=o.bind(null,t,i,e),o=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,i,{capture:!0,passive:o}):e.addEventListener(t,i,!0):void 0!==o?e.addEventListener(t,i,{passive:o}):e.addEventListener(t,i,!1)}function jn(e,t,i,n,o){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var r=n.tag;if(3===r||4===r){var a=n.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===r)for(r=n.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;r=r.return}for(;null!==a;){if(null===(r=bo(a)))return;if(5===(l=r.tag)||6===l){n=s=r;continue e}a=a.parentNode}}n=n.return}Re((function(){var n=s,o=xe(i),r=[];e:{var a=En.get(e);if(void 0!==a){var l=di,d=e;switch(e){case"keypress":if(0===ti(i))break e;case"keydown":case"keyup":l=ki;break;case"focusin":d="focus",l=mi;break;case"focusout":d="blur",l=mi;break;case"beforeblur":case"afterblur":l=mi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ai;break;case kn:case In:case An:l=vi;break;case Tn:l=Ti;break;case"scroll":l=hi;break;case"wheel":l=Ri;break;case"copy":case"cut":case"paste":l=yi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ii}var c=0!==(4&t),h=!c&&"scroll"===e,u=c?null!==a?a+"Capture":null:a;c=[];for(var p,g=n;null!==g;){var m=(p=g).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==u&&(null!=(m=Le(g,u))&&c.push(Un(g,m,p)))),h)break;g=g.return}0<c.length&&(a=new l(a,d,null,i,o),r.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===Ce||!(d=i.relatedTarget||i.fromElement)||!bo(d)&&!d[mo])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(d=(d=i.relatedTarget||i.toElement)?bo(d):null)&&(d!==(h=He(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(l=null,d=n),l!==d)){if(c=pi,m="onMouseLeave",u="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ii,m="onPointerLeave",u="onPointerEnter",g="pointer"),h=null==l?a:xo(l),p=null==d?a:xo(d),(a=new c(m,g+"leave",l,i,o)).target=h,a.relatedTarget=p,m=null,bo(o)===n&&((c=new c(u,g+"enter",d,i,o)).target=p,c.relatedTarget=h,m=c),h=m,l&&d)e:{for(u=d,g=0,p=c=l;p;p=Yn(p))g++;for(p=0,m=u;m;m=Yn(m))p++;for(;0<g-p;)c=Yn(c),g--;for(;0<p-g;)u=Yn(u),p--;for(;g--;){if(c===u||null!==u&&c===u.alternate)break e;c=Yn(c),u=Yn(u)}c=null}else c=null;null!==l&&Zn(r,a,l,c,!1),null!==d&&null!==h&&Zn(r,h,d,c,!0)}if("select"===(l=(a=n?xo(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var v=Xi;else if(Wi(a))if(qi)v=rn;else{v=on;var f=nn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(v=sn);switch(v&&(v=v(e,n))?ji(r,v,i,o):(f&&f(e,a,n),"focusout"===e&&(f=a._wrapperState)&&f.controlled&&"number"===a.type&&ee(a,"number",a.value)),f=n?xo(n):window,e){case"focusin":(Wi(f)||"true"===f.contentEditable)&&(vn=f,fn=n,yn=null);break;case"focusout":yn=fn=vn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,Cn(r,i,o);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":Cn(r,i,o)}var y;if(Pi)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vi?zi(e,i)&&(b="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(b="onCompositionStart");b&&(Oi&&"ko"!==i.locale&&(Vi||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vi&&(y=ei()):(Jt="value"in(Qt=o)?Qt.value:Qt.textContent,Vi=!0)),0<(f=Kn(n,b)).length&&(b=new bi(b,e,null,i,o),r.push({event:b,listeners:f}),y?b.data=y:null!==(y=_i(i))&&(b.data=y))),(y=Fi?function(e,t){switch(e){case"compositionend":return _i(t);case"keypress":return 32!==t.which?null:(Gi=!0,Bi);case"textInput":return(e=t.data)===Bi&&Gi?null:e;default:return null}}(e,i):function(e,t){if(Vi)return"compositionend"===e||!Pi&&zi(e,t)?(e=ei(),$t=Jt=Qt=null,Vi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=Kn(n,"onBeforeInput")).length&&(o=new bi("onBeforeInput","beforeinput",null,i,o),r.push({event:o,listeners:n}),o.data=y))}Gn(r,t)}))}function Un(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Kn(e,t){for(var i=t+"Capture",n=[];null!==e;){var o=e,s=o.stateNode;5===o.tag&&null!==s&&(o=s,null!=(s=Le(e,i))&&n.unshift(Un(e,s,o)),null!=(s=Le(e,t))&&n.push(Un(e,s,o))),e=e.return}return n}function Yn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zn(e,t,i,n,o){for(var s=t._reactName,r=[];null!==i&&i!==n;){var a=i,l=a.alternate,d=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==d&&(a=d,o?null!=(l=Le(i,s))&&r.unshift(Un(i,l,a)):o||null!=(l=Le(i,s))&&r.push(Un(i,l,a))),i=i.return}0!==r.length&&e.push({event:t,listeners:r})}var Xn=/\r\n?/g,qn=/\u0000|\uFFFD/g;function Qn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(qn,"")}function Jn(e,t,i){if(t=Qn(t),Qn(e)!==t&&i)throw Error(s(425))}function $n(){}var eo=null,to=null;function io(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,so="function"===typeof Promise?Promise:void 0,ro="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof so?function(e){return so.resolve(null).then(e).catch(ao)}:no;function ao(e){setTimeout((function(){throw e}))}function lo(e,t){var i=t,n=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&8===o.nodeType)if("/$"===(i=o.data)){if(0===n)return e.removeChild(o),void Ht(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=o}while(i);Ht(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ho(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var uo=Math.random().toString(36).slice(2),po="__reactFiber$"+uo,go="__reactProps$"+uo,mo="__reactContainer$"+uo,vo="__reactEvents$"+uo,fo="__reactListeners$"+uo,yo="__reactHandles$"+uo;function bo(e){var t=e[po];if(t)return t;for(var i=e.parentNode;i;){if(t=i[mo]||i[po]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=ho(e);null!==e;){if(i=e[po])return i;e=ho(e)}return t}i=(e=i).parentNode}return null}function Co(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wo(e){return e[go]||null}var So=[],Mo=-1;function Do(e){return{current:e}}function ko(e){0>Mo||(e.current=So[Mo],So[Mo]=null,Mo--)}function Io(e,t){Mo++,So[Mo]=e.current,e.current=t}var Ao={},To=Do(Ao),Eo=Do(!1),Ro=Ao;function Lo(e,t){var i=e.type.contextTypes;if(!i)return Ao;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,s={};for(o in i)s[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Po(e){return null!==(e=e.childContextTypes)&&void 0!==e}function No(){ko(Eo),ko(To)}function Fo(e,t,i){if(To.current!==Ao)throw Error(s(168));Io(To,t),Io(Eo,i)}function Oo(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var o in n=n.getChildContext())if(!(o in t))throw Error(s(108,W(e)||"Unknown",o));return B({},i,n)}function Bo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,Ro=To.current,Io(To,e),Io(Eo,Eo.current),!0}function Go(e,t,i){var n=e.stateNode;if(!n)throw Error(s(169));i?(e=Oo(e,t,Ro),n.__reactInternalMemoizedMergedChildContext=e,ko(Eo),ko(To),Io(To,e)):ko(Eo),Io(Eo,i)}var zo=null,_o=!1,Vo=!1;function Ho(e){null===zo?zo=[e]:zo.push(e)}function Wo(){if(!Vo&&null!==zo){Vo=!0;var e=0,t=bt;try{var i=zo;for(bt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}zo=null,_o=!1}catch(o){throw null!==zo&&(zo=zo.slice(e+1)),Ye($e,Wo),o}finally{bt=t,Vo=!1}}return null}var jo=[],Uo=0,Ko=null,Yo=0,Zo=[],Xo=0,qo=null,Qo=1,Jo="";function $o(e,t){jo[Uo++]=Yo,jo[Uo++]=Ko,Ko=e,Yo=t}function es(e,t,i){Zo[Xo++]=Qo,Zo[Xo++]=Jo,Zo[Xo++]=qo,qo=e;var n=Qo;e=Jo;var o=32-rt(n)-1;n&=~(1<<o),i+=1;var s=32-rt(t)+o;if(30<s){var r=o-o%5;s=(n&(1<<r)-1).toString(32),n>>=r,o-=r,Qo=1<<32-rt(t)+o|i<<o|n,Jo=s+e}else Qo=1<<s|i<<o|n,Jo=e}function ts(e){null!==e.return&&($o(e,1),es(e,1,0))}function is(e){for(;e===Ko;)Ko=jo[--Uo],jo[Uo]=null,Yo=jo[--Uo],jo[Uo]=null;for(;e===qo;)qo=Zo[--Xo],Zo[Xo]=null,Jo=Zo[--Xo],Zo[Xo]=null,Qo=Zo[--Xo],Zo[Xo]=null}var ns=null,os=null,ss=!1,rs=null;function as(e,t){var i=Rd(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function ls(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,os=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,os=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==qo?{id:Qo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Rd(18,null,null,0)).stateNode=t,i.return=e,e.child=i,ns=e,os=null,!0);default:return!1}}function ds(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(ss){var t=os;if(t){var i=t;if(!ls(e,t)){if(ds(e))throw Error(s(418));t=co(i.nextSibling);var n=ns;t&&ls(e,t)?as(n,i):(e.flags=-4097&e.flags|2,ss=!1,ns=e)}}else{if(ds(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,ns=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!ss)return hs(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!io(e.type,e.memoizedProps)),t&&(t=os)){if(ds(e))throw ps(),Error(s(418));for(;t;)as(e,t),t=co(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){os=co(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}os=null}}else os=ns?co(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=os;e;)e=co(e.nextSibling)}function gs(){os=ns=null,ss=!1}function ms(e){null===rs?rs=[e]:rs.push(e)}var vs=C.ReactCurrentBatchConfig;function fs(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(s(309));var n=i.stateNode}if(!n)throw Error(s(147,e));var o=n,r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=o.refs;null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function Cs(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Pd(e,t)).index=0,e.sibling=null,e}function r(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Bd(i,e.mode,n)).return=e,t):((t=o(t,i)).return=e,t)}function d(e,t,i,n){var s=i.type;return s===S?h(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&bs(s)===t.type)?((n=o(t,i.props)).ref=fs(e,t,i),n.return=e,n):((n=Nd(i.type,i.key,i.props,null,e.mode,n)).ref=fs(e,t,i),n.return=e,n)}function c(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Gd(i,e.mode,n)).return=e,t):((t=o(t,i.children||[])).return=e,t)}function h(e,t,i,n,s){return null===t||7!==t.tag?((t=Fd(i,e.mode,n,s)).return=e,t):((t=o(t,i)).return=e,t)}function u(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bd(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(i=Nd(t.type,t.key,t.props,null,e.mode,i)).ref=fs(e,null,t),i.return=e,i;case w:return(t=Gd(t,e.mode,i)).return=e,t;case L:return u(e,(0,t._init)(t._payload),i)}if(te(t)||F(t))return(t=Fd(t,e.mode,i,null)).return=e,t;ys(e,t)}return null}function p(e,t,i,n){var o=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==o?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return i.key===o?d(e,t,i,n):null;case w:return i.key===o?c(e,t,i,n):null;case L:return p(e,t,(o=i._init)(i._payload),n)}if(te(i)||F(i))return null!==o?null:h(e,t,i,n,null);ys(e,i)}return null}function g(e,t,i,n,o){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return d(t,e=e.get(null===n.key?i:n.key)||null,n,o);case w:return c(t,e=e.get(null===n.key?i:n.key)||null,n,o);case L:return g(e,t,i,(0,n._init)(n._payload),o)}if(te(n)||F(n))return h(t,e=e.get(i)||null,n,o,null);ys(t,n)}return null}function m(o,s,a,l){for(var d=null,c=null,h=s,m=s=0,v=null;null!==h&&m<a.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var f=p(o,h,a[m],l);if(null===f){null===h&&(h=v);break}e&&h&&null===f.alternate&&t(o,h),s=r(f,s,m),null===c?d=f:c.sibling=f,c=f,h=v}if(m===a.length)return i(o,h),ss&&$o(o,m),d;if(null===h){for(;m<a.length;m++)null!==(h=u(o,a[m],l))&&(s=r(h,s,m),null===c?d=h:c.sibling=h,c=h);return ss&&$o(o,m),d}for(h=n(o,h);m<a.length;m++)null!==(v=g(h,o,m,a[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),s=r(v,s,m),null===c?d=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(o,e)})),ss&&$o(o,m),d}function v(o,a,l,d){var c=F(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,v=a=0,f=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(f=m,m=null):f=m.sibling;var b=p(o,m,y.value,d);if(null===b){null===m&&(m=f);break}e&&m&&null===b.alternate&&t(o,m),a=r(b,a,v),null===h?c=b:h.sibling=b,h=b,m=f}if(y.done)return i(o,m),ss&&$o(o,v),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=u(o,y.value,d))&&(a=r(y,a,v),null===h?c=y:h.sibling=y,h=y);return ss&&$o(o,v),c}for(m=n(o,m);!y.done;v++,y=l.next())null!==(y=g(m,o,v,y.value,d))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),a=r(y,a,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(o,e)})),ss&&$o(o,v),c}return function e(n,s,r,l){if("object"===typeof r&&null!==r&&r.type===S&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case x:e:{for(var d=r.key,c=s;null!==c;){if(c.key===d){if((d=r.type)===S){if(7===c.tag){i(n,c.sibling),(s=o(c,r.props.children)).return=n,n=s;break e}}else if(c.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===L&&bs(d)===c.type){i(n,c.sibling),(s=o(c,r.props)).ref=fs(n,c,r),s.return=n,n=s;break e}i(n,c);break}t(n,c),c=c.sibling}r.type===S?((s=Fd(r.props.children,n.mode,l,r.key)).return=n,n=s):((l=Nd(r.type,r.key,r.props,null,n.mode,l)).ref=fs(n,s,r),l.return=n,n=l)}return a(n);case w:e:{for(c=r.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===r.containerInfo&&s.stateNode.implementation===r.implementation){i(n,s.sibling),(s=o(s,r.children||[])).return=n,n=s;break e}i(n,s);break}t(n,s),s=s.sibling}(s=Gd(r,n.mode,l)).return=n,n=s}return a(n);case L:return e(n,s,(c=r._init)(r._payload),l)}if(te(r))return m(n,s,r,l);if(F(r))return v(n,s,r,l);ys(n,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==s&&6===s.tag?(i(n,s.sibling),(s=o(s,r)).return=n,n=s):(i(n,s),(s=Bd(r,n.mode,l)).return=n,n=s),a(n)):i(n,s)}}var xs=Cs(!0),ws=Cs(!1),Ss=Do(null),Ms=null,Ds=null,ks=null;function Is(){ks=Ds=Ms=null}function As(e){var t=Ss.current;ko(Ss),e._currentValue=t}function Ts(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Es(e,t){Ms=e,ks=Ds=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Ds){if(null===Ms)throw Error(s(308));Ds=e,Ms.dependencies={lanes:0,firstContext:e}}else Ds=Ds.next=e;return t}var Ls=null;function Ps(e){null===Ls?Ls=[e]:Ls.push(e)}function Ns(e,t,i,n){var o=t.interleaved;return null===o?(i.next=i,Ps(t)):(i.next=o.next,o.next=i),t.interleaved=i,Fs(e,n)}function Fs(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Os=!1;function Bs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _s(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Al)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,Fs(e,i)}return null===(o=n.interleaved)?(t.next=t,Ps(n)):(t.next=o.next,o.next=t),n.interleaved=t,Fs(e,i)}function Vs(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,yt(e,i)}}function Hs(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var o=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var r={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===s?o=s=r:s=s.next=r,i=i.next}while(null!==i);null===s?o=s=t:s=s.next=t}else o=s=t;return i={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Ws(e,t,i,n){var o=e.updateQueue;Os=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,d=l.next;l.next=null,null===r?s=d:r.next=d,r=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==r&&(null===a?c.firstBaseUpdate=d:a.next=d,c.lastBaseUpdate=l))}if(null!==s){var h=o.baseState;for(r=0,c=d=l=null,a=s;;){var u=a.lane,p=a.eventTime;if((n&u)===u){null!==c&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,m=a;switch(u=t,p=i,m.tag){case 1:if("function"===typeof(g=m.payload)){h=g.call(p,h,u);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(u="function"===typeof(g=m.payload)?g.call(p,h,u):g)||void 0===u)break e;h=B({},h,u);break e;case 2:Os=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(d=c=p,l=h):c=c.next=p,r|=u;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(u=a).next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}if(null===c&&(l=h),o.baseState=l,o.firstBaseUpdate=d,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do{r|=o.lane,o=o.next}while(o!==t)}else null===s&&(o.shared.lanes=0);Ol|=r,e.lanes=r,e.memoizedState=h}}function js(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=i,"function"!==typeof o)throw Error(s(191,o));o.call(n)}}}var Us={},Ks=Do(Us),Ys=Do(Us),Zs=Do(Us);function Xs(e){if(e===Us)throw Error(s(174));return e}function qs(e,t){switch(Io(Zs,t),Io(Ys,e),Io(Ks,Us),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ko(Ks),Io(Ks,t)}function Qs(){ko(Ks),ko(Ys),ko(Zs)}function Js(e){Xs(Zs.current);var t=Xs(Ks.current),i=le(t,e.type);t!==i&&(Io(Ys,e),Io(Ks,i))}function $s(e){Ys.current===e&&(ko(Ks),ko(Ys))}var er=Do(0);function tr(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ir=[];function nr(){for(var e=0;e<ir.length;e++)ir[e]._workInProgressVersionPrimary=null;ir.length=0}var or=C.ReactCurrentDispatcher,sr=C.ReactCurrentBatchConfig,rr=0,ar=null,lr=null,dr=null,cr=!1,hr=!1,ur=0,pr=0;function gr(){throw Error(s(321))}function mr(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!an(e[i],t[i]))return!1;return!0}function vr(e,t,i,n,o,r){if(rr=r,ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,or.current=null===e||null===e.memoizedState?$r:ea,e=i(n,o),hr){r=0;do{if(hr=!1,ur=0,25<=r)throw Error(s(301));r+=1,dr=lr=null,t.updateQueue=null,or.current=ta,e=i(n,o)}while(hr)}if(or.current=Jr,t=null!==lr&&null!==lr.next,rr=0,dr=lr=ar=null,cr=!1,t)throw Error(s(300));return e}function fr(){var e=0!==ur;return ur=0,e}function yr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===dr?ar.memoizedState=dr=e:dr=dr.next=e,dr}function br(){if(null===lr){var e=ar.alternate;e=null!==e?e.memoizedState:null}else e=lr.next;var t=null===dr?ar.memoizedState:dr.next;if(null!==t)dr=t,lr=e;else{if(null===e)throw Error(s(310));e={memoizedState:(lr=e).memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},null===dr?ar.memoizedState=dr=e:dr=dr.next=e}return dr}function Cr(e,t){return"function"===typeof t?t(e):t}function xr(e){var t=br(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=lr,o=n.baseQueue,r=i.pending;if(null!==r){if(null!==o){var a=o.next;o.next=r.next,r.next=a}n.baseQueue=o=r,i.pending=null}if(null!==o){r=o.next,n=n.baseState;var l=a=null,d=null,c=r;do{var h=c.lane;if((rr&h)===h)null!==d&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===d?(l=d=u,a=n):d=d.next=u,ar.lanes|=h,Ol|=h}c=c.next}while(null!==c&&c!==r);null===d?a=n:d.next=l,an(n,t.memoizedState)||(ba=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=d,i.lastRenderedState=n}if(null!==(e=i.interleaved)){o=e;do{r=o.lane,ar.lanes|=r,Ol|=r,o=o.next}while(o!==e)}else null===o&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function wr(e){var t=br(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=i.dispatch,o=i.pending,r=t.memoizedState;if(null!==o){i.pending=null;var a=o=o.next;do{r=e(r,a.action),a=a.next}while(a!==o);an(r,t.memoizedState)||(ba=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),i.lastRenderedState=r}return[r,n]}function Sr(){}function Mr(e,t){var i=ar,n=br(),o=t(),r=!an(n.memoizedState,o);if(r&&(n.memoizedState=o,ba=!0),n=n.queue,Or(Ir.bind(null,i,n,e),[e]),n.getSnapshot!==t||r||null!==dr&&1&dr.memoizedState.tag){if(i.flags|=2048,Rr(9,kr.bind(null,i,n,o,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&rr)||Dr(i,t,o)}return o}function Dr(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=ar.updateQueue)?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function kr(e,t,i,n){t.value=i,t.getSnapshot=n,Ar(t)&&Tr(e)}function Ir(e,t,i){return i((function(){Ar(t)&&Tr(e)}))}function Ar(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!an(e,i)}catch(n){return!0}}function Tr(e){var t=Fs(e,1);null!==t&&id(t,e,1,-1)}function Er(e){var t=yr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:e},t.queue=e,e=e.dispatch=Zr.bind(null,ar,e),[t.memoizedState,e]}function Rr(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=ar.updateQueue)?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Lr(){return br().memoizedState}function Pr(e,t,i,n){var o=yr();ar.flags|=e,o.memoizedState=Rr(1|t,i,void 0,void 0===n?null:n)}function Nr(e,t,i,n){var o=br();n=void 0===n?null:n;var s=void 0;if(null!==lr){var r=lr.memoizedState;if(s=r.destroy,null!==n&&mr(n,r.deps))return void(o.memoizedState=Rr(t,i,s,n))}ar.flags|=e,o.memoizedState=Rr(1|t,i,s,n)}function Fr(e,t){return Pr(8390656,8,e,t)}function Or(e,t){return Nr(2048,8,e,t)}function Br(e,t){return Nr(4,2,e,t)}function Gr(e,t){return Nr(4,4,e,t)}function zr(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _r(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Nr(4,4,zr.bind(null,t,e),i)}function Vr(){}function Hr(e,t){var i=br();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&mr(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Wr(e,t){var i=br();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&mr(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function jr(e,t,i){return 0===(21&rr)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=i):(an(i,t)||(i=mt(),ar.lanes|=i,Ol|=i,e.baseState=!0),t)}function Ur(e,t){var i=bt;bt=0!==i&&4>i?i:4,e(!0);var n=sr.transition;sr.transition={};try{e(!1),t()}finally{bt=i,sr.transition=n}}function Kr(){return br().memoizedState}function Yr(e,t,i){var n=td(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Xr(e))qr(t,i);else if(null!==(i=Ns(e,t,i,n))){id(i,e,n,ed()),Qr(i,t,n)}}function Zr(e,t,i){var n=td(e),o={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xr(e))qr(t,o);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var r=t.lastRenderedState,a=s(r,i);if(o.hasEagerState=!0,o.eagerState=a,an(a,r)){var l=t.interleaved;return null===l?(o.next=o,Ps(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(d){}null!==(i=Ns(e,t,o,n))&&(id(i,e,n,o=ed()),Qr(i,t,n))}}function Xr(e){var t=e.alternate;return e===ar||null!==t&&t===ar}function qr(e,t){hr=cr=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Qr(e,t,i){if(0!==(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,yt(e,i)}}var Jr={readContext:Rs,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},$r={readContext:Rs,useCallback:function(e,t){return yr().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Fr,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Pr(4194308,4,zr.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Pr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pr(4,2,e,t)},useMemo:function(e,t){var i=yr();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=yr();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Yr.bind(null,ar,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},yr().memoizedState=e},useState:Er,useDebugValue:Vr,useDeferredValue:function(e){return yr().memoizedState=e},useTransition:function(){var e=Er(!1),t=e[0];return e=Ur.bind(null,e[1]),yr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=ar,o=yr();if(ss){if(void 0===i)throw Error(s(407));i=i()}else{if(i=t(),null===Tl)throw Error(s(349));0!==(30&rr)||Dr(n,t,i)}o.memoizedState=i;var r={value:i,getSnapshot:t};return o.queue=r,Fr(Ir.bind(null,n,r,e),[e]),n.flags|=2048,Rr(9,kr.bind(null,n,r,i,t),void 0,null),i},useId:function(){var e=yr(),t=Tl.identifierPrefix;if(ss){var i=Jo;t=":"+t+"R"+(i=(Qo&~(1<<32-rt(Qo)-1)).toString(32)+i),0<(i=ur++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=pr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:Hr,useContext:Rs,useEffect:Or,useImperativeHandle:_r,useInsertionEffect:Br,useLayoutEffect:Gr,useMemo:Wr,useReducer:xr,useRef:Lr,useState:function(){return xr(Cr)},useDebugValue:Vr,useDeferredValue:function(e){return jr(br(),lr.memoizedState,e)},useTransition:function(){return[xr(Cr)[0],br().memoizedState]},useMutableSource:Sr,useSyncExternalStore:Mr,useId:Kr,unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:Hr,useContext:Rs,useEffect:Or,useImperativeHandle:_r,useInsertionEffect:Br,useLayoutEffect:Gr,useMemo:Wr,useReducer:wr,useRef:Lr,useState:function(){return wr(Cr)},useDebugValue:Vr,useDeferredValue:function(e){var t=br();return null===lr?t.memoizedState=e:jr(t,lr.memoizedState,e)},useTransition:function(){return[wr(Cr)[0],br().memoizedState]},useMutableSource:Sr,useSyncExternalStore:Mr,useId:Kr,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){for(var i in t=B({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function na(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:B({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var oa={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=ed(),o=td(e),s=zs(n,o);s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=_s(e,s,o))&&(id(t,e,o,n),Vs(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=ed(),o=td(e),s=zs(n,o);s.tag=1,s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=_s(e,s,o))&&(id(t,e,o,n),Vs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ed(),n=td(e),o=zs(i,n);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=_s(e,o,n))&&(id(t,e,n,i),Vs(t,e,n))}};function sa(e,t,i,n,o,s,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,r):!t.prototype||!t.prototype.isPureReactComponent||(!ln(i,n)||!ln(o,s))}function ra(e,t,i){var n=!1,o=Ao,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(o=Po(t)?Ro:To.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Lo(e,o):Ao),t=new t(i,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oa,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&oa.enqueueReplaceState(t,t.state,null)}function la(e,t,i,n){var o=e.stateNode;o.props=i,o.state=e.memoizedState,o.refs={},Bs(e);var s=t.contextType;"object"===typeof s&&null!==s?o.context=Rs(s):(s=Po(t)?Ro:To.current,o.context=Lo(e,s)),o.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(na(e,t,s,i),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oa.enqueueReplaceState(o,o.state,null),Ws(e,i,o,n),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function da(e,t){try{var i="",n=t;do{i+=V(n),n=n.return}while(n);var o=i}catch(s){o="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:o,digest:null}}function ca(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}var ua="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,i){(i=zs(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){jl||(jl=!0,Ul=n),ha(0,t)},i}function ga(e,t,i){(i=zs(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var o=t.value;i.payload=function(){return n(o)},i.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(i.callback=function(){ha(0,t),"function"!==typeof n&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function ma(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new ua;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(i)||(o.add(i),e=Dd.bind(null,e,t,i),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fa(e,t,i,n,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=zs(-1,1)).tag=2,_s(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ya=C.ReactCurrentOwner,ba=!1;function Ca(e,t,i,n){t.child=null===e?ws(t,null,i,n):xs(t,e.child,i,n)}function xa(e,t,i,n,o){i=i.render;var s=t.ref;return Es(t,o),n=vr(e,t,i,n,s,o),i=fr(),null===e||ba?(ss&&i&&ts(t),t.flags|=1,Ca(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ja(e,t,o))}function wa(e,t,i,n,o){if(null===e){var s=i.type;return"function"!==typeof s||Ld(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Nd(i.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,n,o))}if(s=e.child,0===(e.lanes&o)){var r=s.memoizedProps;if((i=null!==(i=i.compare)?i:ln)(r,n)&&e.ref===t.ref)return ja(e,t,o)}return t.flags|=1,(e=Pd(s,n)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,i,n,o){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(ba=!1,t.pendingProps=n=s,0===(e.lanes&o))return t.lanes=e.lanes,ja(e,t,o);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,i,n,o)}function Ma(e,t,i){var n=t.pendingProps,o=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Io(Pl,Ll),Ll|=i;else{if(0===(1073741824&i))return e=null!==s?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Io(Pl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:i,Io(Pl,Ll),Ll|=n}else null!==s?(n=s.baseLanes|i,t.memoizedState=null):n=i,Io(Pl,Ll),Ll|=n;return Ca(e,t,o,i),t.child}function Da(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,i,n,o){var s=Po(i)?Ro:To.current;return s=Lo(t,s),Es(t,o),i=vr(e,t,i,n,s,o),n=fr(),null===e||ba?(ss&&n&&ts(t),t.flags|=1,Ca(e,t,i,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ja(e,t,o))}function Ia(e,t,i,n,o){if(Po(i)){var s=!0;Bo(t)}else s=!1;if(Es(t,o),null===t.stateNode)Wa(e,t),ra(t,i,n),la(t,i,n,o),n=!0;else if(null===e){var r=t.stateNode,a=t.memoizedProps;r.props=a;var l=r.context,d=i.contextType;"object"===typeof d&&null!==d?d=Rs(d):d=Lo(t,d=Po(i)?Ro:To.current);var c=i.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof r.getSnapshotBeforeUpdate;h||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==n||l!==d)&&aa(t,r,n,d),Os=!1;var u=t.memoizedState;r.state=u,Ws(t,n,r,o),l=t.memoizedState,a!==n||u!==l||Eo.current||Os?("function"===typeof c&&(na(t,i,c,n),l=t.memoizedState),(a=Os||sa(t,i,a,n,u,l,d))?(h||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),r.props=n,r.state=l,r.context=d,n=a):("function"===typeof r.componentDidMount&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,Gs(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:ia(t.type,a),r.props=d,h=t.pendingProps,u=r.context,"object"===typeof(l=i.contextType)&&null!==l?l=Rs(l):l=Lo(t,l=Po(i)?Ro:To.current);var p=i.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==h||u!==l)&&aa(t,r,n,l),Os=!1,u=t.memoizedState,r.state=u,Ws(t,n,r,o);var g=t.memoizedState;a!==h||u!==g||Eo.current||Os?("function"===typeof p&&(na(t,i,p,n),g=t.memoizedState),(d=Os||sa(t,i,d,n,u,g,l)||!1)?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(n,g,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(n,g,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),r.props=n,r.state=g,r.context=l,n=d):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),n=!1)}return Aa(e,t,i,n,s,o)}function Aa(e,t,i,n,o,s){Da(e,t);var r=0!==(128&t.flags);if(!n&&!r)return o&&Go(t,i,!1),ja(e,t,s);n=t.stateNode,ya.current=t;var a=r&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&r?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,a,s)):Ca(e,t,a,s),t.memoizedState=n.state,o&&Go(t,i,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?Fo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fo(0,t.context,!1),qs(e,t.containerInfo)}function Ea(e,t,i,n,o){return gs(),ms(o),t.flags|=256,Ca(e,t,i,n),t.child}var Ra,La,Pa,Na,Fa={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,i){var n,o=t.pendingProps,r=er.current,a=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&r)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(r|=1),Io(er,1&r),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,a?(o=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Od(l,o,0,null),e=Fd(e,o,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oa(i),t.memoizedState=Fa,e):Ga(t,l));if(null!==(r=e.memoizedState)&&null!==(n=r.dehydrated))return function(e,t,i,n,o,r,a){if(i)return 256&t.flags?(t.flags&=-257,za(e,t,a,n=ca(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(r=n.fallback,o=t.mode,n=Od({mode:"visible",children:n.children},o,0,null),(r=Fd(r,o,a,null)).flags|=2,n.return=t,r.return=t,n.sibling=r,t.child=n,0!==(1&t.mode)&&xs(t,e.child,null,a),t.child.memoizedState=Oa(a),t.memoizedState=Fa,r);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===o.data){if(n=o.nextSibling&&o.nextSibling.dataset)var l=n.dgst;return n=l,za(e,t,a,n=ca(r=Error(s(419)),n,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(n=Tl)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(n.suspendedLanes|a))?0:o)&&o!==r.retryLane&&(r.retryLane=o,Fs(e,o),id(n,e,o,-1))}return md(),za(e,t,a,n=ca(Error(s(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Id.bind(null,e),o._reactRetry=t,null):(e=r.treeContext,os=co(o.nextSibling),ns=t,ss=!0,rs=null,null!==e&&(Zo[Xo++]=Qo,Zo[Xo++]=Jo,Zo[Xo++]=qo,Qo=e.id,Jo=e.overflow,qo=t),t=Ga(t,n.children),t.flags|=4096,t)}(e,t,l,o,n,r,i);if(a){a=o.fallback,l=t.mode,n=(r=e.child).sibling;var d={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==r?((o=t.child).childLanes=0,o.pendingProps=d,t.deletions=null):(o=Pd(r,d)).subtreeFlags=14680064&r.subtreeFlags,null!==n?a=Pd(n,a):(a=Fd(a,l,i,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,l=null===(l=e.child.memoizedState)?Oa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~i,t.memoizedState=Fa,o}return e=(a=e.child).sibling,o=Pd(a,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=i),o.return=t,o.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function Ga(e,t){return(t=Od({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,i,n){return null!==n&&ms(n),xs(t,e.child,null,i),(e=Ga(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function _a(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ts(e.return,t,i)}function Va(e,t,i,n,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=o)}function Ha(e,t,i){var n=t.pendingProps,o=n.revealOrder,s=n.tail;if(Ca(e,t,n.children,i),0!==(2&(n=er.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_a(e,i,t);else if(19===e.tag)_a(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Io(er,n),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(i=t.child,o=null;null!==i;)null!==(e=i.alternate)&&null===tr(e)&&(o=i),i=i.sibling;null===(i=o)?(o=t.child,t.child=null):(o=i.sibling,i.sibling=null),Va(t,!1,o,i,s);break;case"backwards":for(i=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===tr(e)){t.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}Va(t,!0,i,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ja(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(i=Pd(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Pd(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Ua(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=14680064&o.subtreeFlags,n|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Ya(e,t,i){var n=t.pendingProps;switch(is(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Po(t.type)&&No(),Ka(t),null;case 3:return n=t.stateNode,Qs(),ko(Eo),ko(To),nr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rs&&(rd(rs),rs=null))),La(e,t),Ka(t),null;case 5:$s(t);var o=Xs(Zs.current);if(i=t.type,null!==e&&null!=t.stateNode)Pa(e,t,i,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Xs(Ks.current),us(t)){n=t.stateNode,i=t.type;var r=t.memoizedProps;switch(n[po]=t,n[go]=r,e=0!==(1&t.mode),i){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(o=0;o<Fn.length;o++)zn(Fn[o],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":q(n,r),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},zn("invalid",n);break;case"textarea":oe(n,r),zn("invalid",n)}for(var l in ye(i,r),o=null,r)if(r.hasOwnProperty(l)){var d=r[l];"children"===l?"string"===typeof d?n.textContent!==d&&(!0!==r.suppressHydrationWarning&&Jn(n.textContent,d,e),o=["children",d]):"number"===typeof d&&n.textContent!==""+d&&(!0!==r.suppressHydrationWarning&&Jn(n.textContent,d,e),o=["children",""+d]):a.hasOwnProperty(l)&&null!=d&&"onScroll"===l&&zn("scroll",n)}switch(i){case"input":K(n),$(n,r,!0);break;case"textarea":K(n),re(n);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(n.onclick=$n)}n=o,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),"select"===i&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[po]=t,e[go]=n,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(i,n),i){case"dialog":zn("cancel",e),zn("close",e),o=n;break;case"iframe":case"object":case"embed":zn("load",e),o=n;break;case"video":case"audio":for(o=0;o<Fn.length;o++)zn(Fn[o],e);o=n;break;case"source":zn("error",e),o=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),o=n;break;case"details":zn("toggle",e),o=n;break;case"input":q(e,n),o=X(e,n),zn("invalid",e);break;case"option":default:o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=B({},n,{value:void 0}),zn("invalid",e);break;case"textarea":oe(e,n),o=ne(e,n),zn("invalid",e)}for(r in ye(i,o),d=o)if(d.hasOwnProperty(r)){var c=d[r];"style"===r?ve(e,c):"dangerouslySetInnerHTML"===r?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===r?"string"===typeof c?("textarea"!==i||""!==c)&&ue(e,c):"number"===typeof c&&ue(e,""+c):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(a.hasOwnProperty(r)?null!=c&&"onScroll"===r&&zn("scroll",e):null!=c&&b(e,r,c,l))}switch(i){case"input":K(e),$(e,n,!1);break;case"textarea":K(e),re(e);break;case"option":null!=n.value&&e.setAttribute("value",""+j(n.value));break;case"select":e.multiple=!!n.multiple,null!=(r=n.value)?ie(e,!!n.multiple,r,!1):null!=n.defaultValue&&ie(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=$n)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Na(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(i=Xs(Zs.current),Xs(Ks.current),us(t)){if(n=t.stateNode,i=t.memoizedProps,n[po]=t,(r=n.nodeValue!==i)&&null!==(e=ns))switch(e.tag){case 3:Jn(n.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,i,0!==(1&e.mode))}r&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[po]=t,t.stateNode=n}return Ka(t),null;case 13:if(ko(er),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==os&&0!==(1&t.mode)&&0===(128&t.flags))ps(),gs(),t.flags|=98560,r=!1;else if(r=us(t),null!==n&&null!==n.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[po]=t}else gs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),r=!1}else null!==rs&&(rd(rs),rs=null),r=!0;if(!r)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&er.current)?0===Nl&&(Nl=3):md())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Qs(),La(e,t),null===e&&Hn(t.stateNode.containerInfo),Ka(t),null;case 10:return As(t.type._context),Ka(t),null;case 19:if(ko(er),null===(r=t.memoizedState))return Ka(t),null;if(n=0!==(128&t.flags),null===(l=r.rendering))if(n)Ua(r,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=tr(e))){for(t.flags|=128,Ua(r,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(r=i).flags&=14680066,null===(l=r.alternate)?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,e=l.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Io(er,1&er.current|2),t.child}e=e.sibling}null!==r.tail&&Qe()>Hl&&(t.flags|=128,n=!0,Ua(r,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=tr(l))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Ua(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!ss)return Ka(t),null}else 2*Qe()-r.renderingStartTime>Hl&&1073741824!==i&&(t.flags|=128,n=!0,Ua(r,!1),t.lanes=4194304);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=r.last)?i.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Qe(),t.sibling=null,i=er.current,Io(er,n?1&i|2:1&i),t):(Ka(t),null);case 22:case 23:return hd(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(is(t),t.tag){case 1:return Po(t.type)&&No(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),ko(Eo),ko(To),nr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(ko(er),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));gs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ko(er),null;case 4:return Qs(),null;case 10:return As(t.type._context),null;case 22:case 23:return hd(),null;default:return null}}Ra=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},La=function(){},Pa=function(e,t,i,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Xs(Ks.current);var s,r=null;switch(i){case"input":o=X(e,o),n=X(e,n),r=[];break;case"select":o=B({},o,{value:void 0}),n=B({},n,{value:void 0}),r=[];break;case"textarea":o=ne(e,o),n=ne(e,n),r=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(c in ye(i,n),i=null,o)if(!n.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var l=o[c];for(s in l)l.hasOwnProperty(s)&&(i||(i={}),i[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in n){var d=n[c];if(l=null!=o?o[c]:void 0,n.hasOwnProperty(c)&&d!==l&&(null!=d||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(i||(i={}),i[s]="");for(s in d)d.hasOwnProperty(s)&&l[s]!==d[s]&&(i||(i={}),i[s]=d[s])}else i||(r||(r=[]),r.push(c,i)),i=d;else"dangerouslySetInnerHTML"===c?(d=d?d.__html:void 0,l=l?l.__html:void 0,null!=d&&l!==d&&(r=r||[]).push(c,d)):"children"===c?"string"!==typeof d&&"number"!==typeof d||(r=r||[]).push(c,""+d):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=d&&"onScroll"===c&&zn("scroll",e),r||l===d||(r=[])):(r=r||[]).push(c,d))}i&&(r=r||[]).push("style",i);var c=r;(t.updateQueue=c)&&(t.flags|=4)}},Na=function(e,t,i,n){i!==n&&(t.flags|=4)};var Xa=!1,qa=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function $a(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(n){Md(e,t,n)}else i.current=null}function el(e,t,i){try{i()}catch(n){Md(e,t,n)}}var tl=!1;function il(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var o=n=n.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,void 0!==s&&el(t,i,s)}o=o.next}while(o!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function ol(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[go],delete t[vo],delete t[fo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(ll(e,t,i),e=e.sibling;null!==e;)ll(e,t,i),e=e.sibling}function dl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(dl(e,t,i),e=e.sibling;null!==e;)dl(e,t,i),e=e.sibling}var cl=null,hl=!1;function ul(e,t,i){for(i=i.child;null!==i;)pl(e,t,i),i=i.sibling}function pl(e,t,i){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(ot,i)}catch(a){}switch(i.tag){case 5:qa||$a(i,t);case 6:var n=cl,o=hl;cl=null,ul(e,t,i),hl=o,null!==(cl=n)&&(hl?(e=cl,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):cl.removeChild(i.stateNode));break;case 18:null!==cl&&(hl?(e=cl,i=i.stateNode,8===e.nodeType?lo(e.parentNode,i):1===e.nodeType&&lo(e,i),Ht(e)):lo(cl,i.stateNode));break;case 4:n=cl,o=hl,cl=i.stateNode.containerInfo,hl=!0,ul(e,t,i),cl=n,hl=o;break;case 0:case 11:case 14:case 15:if(!qa&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){o=n=n.next;do{var s=o,r=s.destroy;s=s.tag,void 0!==r&&(0!==(2&s)||0!==(4&s))&&el(i,t,r),o=o.next}while(o!==n)}ul(e,t,i);break;case 1:if(!qa&&($a(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(a){Md(i,t,a)}ul(e,t,i);break;case 21:ul(e,t,i);break;case 22:1&i.mode?(qa=(n=qa)||null!==i.memoizedState,ul(e,t,i),qa=n):ul(e,t,i);break;default:ul(e,t,i)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Qa),t.forEach((function(t){var n=Ad.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function ml(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var o=i[n];try{var r=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(s(160));pl(r,a,o),cl=null,hl=!1;var d=o.alternate;null!==d&&(d.return=null),o.return=null}catch(c){Md(o,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),fl(e),4&n){try{il(3,e,e.return),nl(3,e)}catch(v){Md(e,e.return,v)}try{il(5,e,e.return)}catch(v){Md(e,e.return,v)}}break;case 1:ml(t,e),fl(e),512&n&&null!==i&&$a(i,i.return);break;case 5:if(ml(t,e),fl(e),512&n&&null!==i&&$a(i,i.return),32&e.flags){var o=e.stateNode;try{ue(o,"")}catch(v){Md(e,e.return,v)}}if(4&n&&null!=(o=e.stateNode)){var r=e.memoizedProps,a=null!==i?i.memoizedProps:r,l=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===l&&"radio"===r.type&&null!=r.name&&Q(o,r),be(l,a);var c=be(l,r);for(a=0;a<d.length;a+=2){var h=d[a],u=d[a+1];"style"===h?ve(o,u):"dangerouslySetInnerHTML"===h?he(o,u):"children"===h?ue(o,u):b(o,h,u,c)}switch(l){case"input":J(o,r);break;case"textarea":se(o,r);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!r.multiple;var g=r.value;null!=g?ie(o,!!r.multiple,g,!1):p!==!!r.multiple&&(null!=r.defaultValue?ie(o,!!r.multiple,r.defaultValue,!0):ie(o,!!r.multiple,r.multiple?[]:"",!1))}o[go]=r}catch(v){Md(e,e.return,v)}}break;case 6:if(ml(t,e),fl(e),4&n){if(null===e.stateNode)throw Error(s(162));o=e.stateNode,r=e.memoizedProps;try{o.nodeValue=r}catch(v){Md(e,e.return,v)}}break;case 3:if(ml(t,e),fl(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(v){Md(e,e.return,v)}break;case 4:default:ml(t,e),fl(e);break;case 13:ml(t,e),fl(e),8192&(o=e.child).flags&&(r=null!==o.memoizedState,o.stateNode.isHidden=r,!r||null!==o.alternate&&null!==o.alternate.memoizedState||(Vl=Qe())),4&n&&gl(e);break;case 22:if(h=null!==i&&null!==i.memoizedState,1&e.mode?(qa=(c=qa)||h,ml(t,e),qa=c):ml(t,e),fl(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(u=Ja=h;null!==Ja;){switch(g=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:$a(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){n=p,i=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Md(n,i,v)}}break;case 5:$a(p,p.return);break;case 22:if(null!==p.memoizedState){xl(u);continue}}null!==g?(g.return=p,Ja=g):xl(u)}h=h.sibling}e:for(h=null,u=e;;){if(5===u.tag){if(null===h){h=u;try{o=u.stateNode,c?"function"===typeof(r=o.style).setProperty?r.setProperty("display","none","important"):r.display="none":(l=u.stateNode,a=void 0!==(d=u.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,l.style.display=me("display",a))}catch(v){Md(e,e.return,v)}}}else if(6===u.tag){if(null===h)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(v){Md(e,e.return,v)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ml(t,e),fl(e),4&n&&gl(e);case 21:}}function fl(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(rl(i)){var n=i;break e}i=i.return}throw Error(s(160))}switch(n.tag){case 5:var o=n.stateNode;32&n.flags&&(ue(o,""),n.flags&=-33),dl(e,al(e),o);break;case 3:case 4:var r=n.stateNode.containerInfo;ll(e,al(e),r);break;default:throw Error(s(161))}}catch(a){Md(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,i){Ja=e,bl(e,t,i)}function bl(e,t,i){for(var n=0!==(1&e.mode);null!==Ja;){var o=Ja,s=o.child;if(22===o.tag&&n){var r=null!==o.memoizedState||Xa;if(!r){var a=o.alternate,l=null!==a&&null!==a.memoizedState||qa;a=Xa;var d=qa;if(Xa=r,(qa=l)&&!d)for(Ja=o;null!==Ja;)l=(r=Ja).child,22===r.tag&&null!==r.memoizedState?wl(o):null!==l?(l.return=r,Ja=l):wl(o);for(;null!==s;)Ja=s,bl(s,t,i),s=s.sibling;Ja=o,Xa=a,qa=d}Cl(e)}else 0!==(8772&o.subtreeFlags)&&null!==s?(s.return=o,Ja=s):Cl(e)}}function Cl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qa||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!qa)if(null===i)n.componentDidMount();else{var o=t.elementType===t.type?i.memoizedProps:ia(t.type,i.memoizedProps);n.componentDidUpdate(o,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;null!==r&&js(t,r,n);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}js(t,a,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&i.focus();break;case"img":d.src&&(i.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var u=h.dehydrated;null!==u&&Ht(u)}}}break;default:throw Error(s(163))}qa||512&t.flags&&ol(t)}catch(p){Md(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(i=t.sibling)){i.return=t.return,Ja=i;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Ja=i;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{nl(4,t)}catch(l){Md(t,i,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var o=t.return;try{n.componentDidMount()}catch(l){Md(t,o,l)}}var s=t.return;try{ol(t)}catch(l){Md(t,s,l)}break;case 5:var r=t.return;try{ol(t)}catch(l){Md(t,r,l)}}}catch(l){Md(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Sl,Ml=Math.ceil,Dl=C.ReactCurrentDispatcher,kl=C.ReactCurrentOwner,Il=C.ReactCurrentBatchConfig,Al=0,Tl=null,El=null,Rl=0,Ll=0,Pl=Do(0),Nl=0,Fl=null,Ol=0,Bl=0,Gl=0,zl=null,_l=null,Vl=0,Hl=1/0,Wl=null,jl=!1,Ul=null,Kl=null,Yl=!1,Zl=null,Xl=0,ql=0,Ql=null,Jl=-1,$l=0;function ed(){return 0!==(6&Al)?Qe():-1!==Jl?Jl:Jl=Qe()}function td(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==vs.transition?(0===$l&&($l=mt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function id(e,t,i,n){if(50<ql)throw ql=0,Ql=null,Error(s(185));ft(e,i,n),0!==(2&Al)&&e===Tl||(e===Tl&&(0===(2&Al)&&(Bl|=i),4===Nl&&ad(e,Rl)),nd(e,n),1===i&&0===Al&&0===(1&t.mode)&&(Hl=Qe()+500,_o&&Wo()))}function nd(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var r=31-rt(s),a=1<<r,l=o[r];-1===l?0!==(a&i)&&0===(a&n)||(o[r]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var n=ut(e,e===Tl?Rl:0);if(0===n)null!==i&&Ze(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&Ze(i),1===t)0===e.tag?function(e){_o=!0,Ho(e)}(ld.bind(null,e)):Ho(ld.bind(null,e)),ro((function(){0===(6&Al)&&Wo()})),i=null;else{switch(Ct(n)){case 1:i=$e;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=nt}i=Td(i,od.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function od(e,t){if(Jl=-1,$l=0,0!==(6&Al))throw Error(s(327));var i=e.callbackNode;if(wd()&&e.callbackNode!==i)return null;var n=ut(e,e===Tl?Rl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=vd(e,n);else{t=n;var o=Al;Al|=2;var r=gd();for(Tl===e&&Rl===t||(Wl=null,Hl=Qe()+500,ud(e,t));;)try{yd();break}catch(l){pd(e,l)}Is(),Dl.current=r,Al=o,null!==El?t=0:(Tl=null,Rl=0,t=Nl)}if(0!==t){if(2===t&&(0!==(o=gt(e))&&(n=o,t=sd(e,o))),1===t)throw i=Fl,ud(e,0),ad(e,n),nd(e,Qe()),i;if(6===t)ad(e,n);else{if(o=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var o=i[n],s=o.getSnapshot;o=o.value;try{if(!an(s(),o))return!1}catch(a){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=vd(e,n))&&(0!==(r=gt(e))&&(n=r,t=sd(e,r))),1===t))throw i=Fl,ud(e,0),ad(e,n),nd(e,Qe()),i;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:xd(e,_l,Wl);break;case 3:if(ad(e,n),(130023424&n)===n&&10<(t=Vl+500-Qe())){if(0!==ut(e,0))break;if(((o=e.suspendedLanes)&n)!==n){ed(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=no(xd.bind(null,e,_l,Wl),t);break}xd(e,_l,Wl);break;case 4:if(ad(e,n),(4194240&n)===n)break;for(t=e.eventTimes,o=-1;0<n;){var a=31-rt(n);r=1<<a,(a=t[a])>o&&(o=a),n&=~r}if(n=o,10<(n=(120>(n=Qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ml(n/1960))-n)){e.timeoutHandle=no(xd.bind(null,e,_l,Wl),n);break}xd(e,_l,Wl);break;default:throw Error(s(329))}}}return nd(e,Qe()),e.callbackNode===i?od.bind(null,e):null}function sd(e,t){var i=zl;return e.current.memoizedState.isDehydrated&&(ud(e,t).flags|=256),2!==(e=vd(e,t))&&(t=_l,_l=i,null!==t&&rd(t)),e}function rd(e){null===_l?_l=e:_l.push.apply(_l,e)}function ad(e,t){for(t&=~Gl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-rt(t),n=1<<i;e[i]=-1,t&=~n}}function ld(e){if(0!==(6&Al))throw Error(s(327));wd();var t=ut(e,0);if(0===(1&t))return nd(e,Qe()),null;var i=vd(e,t);if(0!==e.tag&&2===i){var n=gt(e);0!==n&&(t=n,i=sd(e,n))}if(1===i)throw i=Fl,ud(e,0),ad(e,t),nd(e,Qe()),i;if(6===i)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xd(e,_l,Wl),nd(e,Qe()),null}function dd(e,t){var i=Al;Al|=1;try{return e(t)}finally{0===(Al=i)&&(Hl=Qe()+500,_o&&Wo())}}function cd(e){null!==Zl&&0===Zl.tag&&0===(6&Al)&&wd();var t=Al;Al|=1;var i=Il.transition,n=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=n,Il.transition=i,0===(6&(Al=t))&&Wo()}}function hd(){Ll=Pl.current,ko(Pl)}function ud(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,oo(i)),null!==El)for(i=El.return;null!==i;){var n=i;switch(is(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&No();break;case 3:Qs(),ko(Eo),ko(To),nr();break;case 5:$s(n);break;case 4:Qs();break;case 13:case 19:ko(er);break;case 10:As(n.type._context);break;case 22:case 23:hd()}i=i.return}if(Tl=e,El=e=Pd(e.current,null),Rl=Ll=t,Nl=0,Fl=null,Gl=Bl=Ol=0,_l=zl=null,null!==Ls){for(t=0;t<Ls.length;t++)if(null!==(n=(i=Ls[t]).interleaved)){i.interleaved=null;var o=n.next,s=i.pending;if(null!==s){var r=s.next;s.next=o,n.next=r}i.pending=n}Ls=null}return e}function pd(e,t){for(;;){var i=El;try{if(Is(),or.current=Jr,cr){for(var n=ar.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}cr=!1}if(rr=0,dr=lr=ar=null,hr=!1,ur=0,kl.current=null,null===i||null===i.return){Nl=1,Fl=t,El=null;break}e:{var r=e,a=i.return,l=i,d=t;if(t=Rl,l.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var c=d,h=l,u=h.tag;if(0===(1&h.mode)&&(0===u||11===u||15===u)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=va(a);if(null!==g){g.flags&=-257,fa(g,a,l,0,t),1&g.mode&&ma(r,c,t),d=c;var m=(t=g).updateQueue;if(null===m){var v=new Set;v.add(d),t.updateQueue=v}else m.add(d);break e}if(0===(1&t)){ma(r,c,t),md();break e}d=Error(s(426))}else if(ss&&1&l.mode){var f=va(a);if(null!==f){0===(65536&f.flags)&&(f.flags|=256),fa(f,a,l,0,t),ms(da(d,l));break e}}r=d=da(d,l),4!==Nl&&(Nl=2),null===zl?zl=[r]:zl.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t,Hs(r,pa(0,d,t));break e;case 1:l=d;var y=r.type,b=r.stateNode;if(0===(128&r.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){r.flags|=65536,t&=-t,r.lanes|=t,Hs(r,ga(r,l,t));break e}}r=r.return}while(null!==r)}Cd(i)}catch(C){t=C,El===i&&null!==i&&(El=i=i.return);continue}break}}function gd(){var e=Dl.current;return Dl.current=Jr,null===e?Jr:e}function md(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Tl||0===(268435455&Ol)&&0===(268435455&Bl)||ad(Tl,Rl)}function vd(e,t){var i=Al;Al|=2;var n=gd();for(Tl===e&&Rl===t||(Wl=null,ud(e,t));;)try{fd();break}catch(o){pd(e,o)}if(Is(),Al=i,Dl.current=n,null!==El)throw Error(s(261));return Tl=null,Rl=0,Nl}function fd(){for(;null!==El;)bd(El)}function yd(){for(;null!==El&&!Xe();)bd(El)}function bd(e){var t=Sl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Cd(e):El=t,kl.current=null}function Cd(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=Ya(i,t,Ll)))return void(El=i)}else{if(null!==(i=Za(i,t)))return i.flags&=32767,void(El=i);if(null===e)return Nl=6,void(El=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(El=t);El=t=e}while(null!==t);0===Nl&&(Nl=5)}function xd(e,t,i){var n=bt,o=Il.transition;try{Il.transition=null,bt=1,function(e,t,i,n){do{wd()}while(null!==Zl);if(0!==(6&Al))throw Error(s(327));i=e.finishedWork;var o=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var r=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var o=31-rt(i),s=1<<o;t[o]=0,n[o]=-1,e[o]=-1,i&=~s}}(e,r),e===Tl&&(El=Tl=null,Rl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Yl||(Yl=!0,Td(tt,(function(){return wd(),null}))),r=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||r){r=Il.transition,Il.transition=null;var a=bt;bt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(eo=jt,pn(e=un())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var o=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{i.nodeType,r.nodeType}catch(x){i=null;break e}var a=0,l=-1,d=-1,c=0,h=0,u=e,p=null;t:for(;;){for(var g;u!==i||0!==o&&3!==u.nodeType||(l=a+o),u!==r||0!==n&&3!==u.nodeType||(d=a+n),3===u.nodeType&&(a+=u.nodeValue.length),null!==(g=u.firstChild);)p=u,u=g;for(;;){if(u===e)break t;if(p===i&&++c===o&&(l=a),p===r&&++h===n&&(d=a),null!==(g=u.nextSibling))break;p=(u=p).parentNode}u=g}i=-1===l||-1===d?null:{start:l,end:d}}else i=null}i=i||{start:0,end:0}}else i=null;for(to={focusedElem:e,selectionRange:i},jt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,f=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:ia(t.type,v),f);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=t.stateNode.containerInfo;1===C.nodeType?C.textContent="":9===C.nodeType&&C.documentElement&&C.removeChild(C.documentElement);break;default:throw Error(s(163))}}catch(x){Md(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,i),vl(i,e),gn(to),jt=!!eo,to=eo=null,e.current=i,yl(i,e,o),qe(),Al=l,bt=a,Il.transition=r}else e.current=i;if(Yl&&(Yl=!1,Zl=e,Xl=o),r=e.pendingLanes,0===r&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),nd(e,Qe()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)o=t[i],n(o.value,{componentStack:o.stack,digest:o.digest});if(jl)throw jl=!1,e=Ul,Ul=null,e;0!==(1&Xl)&&0!==e.tag&&wd(),r=e.pendingLanes,0!==(1&r)?e===Ql?ql++:(ql=0,Ql=e):ql=0,Wo()}(e,t,i,n)}finally{Il.transition=o,bt=n}return null}function wd(){if(null!==Zl){var e=Ct(Xl),t=Il.transition,i=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Zl)var n=!1;else{if(e=Zl,Zl=null,Xl=0,0!==(6&Al))throw Error(s(331));var o=Al;for(Al|=4,Ja=e.current;null!==Ja;){var r=Ja,a=r.child;if(0!==(16&Ja.flags)){var l=r.deletions;if(null!==l){for(var d=0;d<l.length;d++){var c=l[d];for(Ja=c;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:il(8,h,r)}var u=h.child;if(null!==u)u.return=h,Ja=u;else for(;null!==Ja;){var p=(h=Ja).sibling,g=h.return;if(sl(h),h===c){Ja=null;break}if(null!==p){p.return=g,Ja=p;break}Ja=g}}}var m=r.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var f=v.sibling;v.sibling=null,v=f}while(null!==v)}}Ja=r}}if(0!==(2064&r.subtreeFlags)&&null!==a)a.return=r,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(r=Ja).flags))switch(r.tag){case 0:case 11:case 15:il(9,r,r.return)}var y=r.sibling;if(null!==y){y.return=r.return,Ja=y;break e}Ja=r.return}}var b=e.current;for(Ja=b;null!==Ja;){var C=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==C)C.return=a,Ja=C;else e:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){Md(l,l.return,w)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(Al=o,Wo(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(ot,e)}catch(w){}n=!0}return n}finally{bt=i,Il.transition=t}}return!1}function Sd(e,t,i){e=_s(e,t=pa(0,t=da(i,t),1),1),t=ed(),null!==e&&(ft(e,1,t),nd(e,t))}function Md(e,t,i){if(3===e.tag)Sd(e,e,i);else for(;null!==t;){if(3===t.tag){Sd(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Kl||!Kl.has(n))){t=_s(t,e=ga(t,e=da(i,e),1),1),e=ed(),null!==t&&(ft(t,1,e),nd(t,e));break}}t=t.return}}function Dd(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=ed(),e.pingedLanes|=e.suspendedLanes&i,Tl===e&&(Rl&i)===i&&(4===Nl||3===Nl&&(130023424&Rl)===Rl&&500>Qe()-Vl?ud(e,0):Gl|=i),nd(e,t)}function kd(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var i=ed();null!==(e=Fs(e,t))&&(ft(e,t,i),nd(e,i))}function Id(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),kd(e,i)}function Ad(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(i=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),kd(e,i)}function Td(e,t){return Ye(e,t)}function Ed(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rd(e,t,i,n){return new Ed(e,t,i,n)}function Ld(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pd(e,t){var i=e.alternate;return null===i?((i=Rd(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Nd(e,t,i,n,o,r){var a=2;if(n=e,"function"===typeof e)Ld(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Fd(i.children,o,r,t);case M:a=8,o|=8;break;case D:return(e=Rd(12,i,t,2|o)).elementType=D,e.lanes=r,e;case T:return(e=Rd(13,i,t,o)).elementType=T,e.lanes=r,e;case E:return(e=Rd(19,i,t,o)).elementType=E,e.lanes=r,e;case P:return Od(i,o,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case I:a=9;break e;case A:a=11;break e;case R:a=14;break e;case L:a=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rd(a,i,t,o)).elementType=e,t.type=n,t.lanes=r,t}function Fd(e,t,i,n){return(e=Rd(7,e,n,t)).lanes=i,e}function Od(e,t,i,n){return(e=Rd(22,e,n,t)).elementType=P,e.lanes=i,e.stateNode={isHidden:!1},e}function Bd(e,t,i){return(e=Rd(6,e,null,t)).lanes=i,e}function Gd(e,t,i){return(t=Rd(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zd(e,t,i,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function _d(e,t,i,n,o,s,r,a,l){return e=new zd(e,t,i,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rd(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bs(s),e}function Vd(e){if(!e)return Ao;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var i=e.type;if(Po(i))return Oo(e,i,t)}return t}function Hd(e,t,i,n,o,s,r,a,l){return(e=_d(i,n,!0,e,0,s,0,a,l)).context=Vd(null),i=e.current,(s=zs(n=ed(),o=td(i))).callback=void 0!==t&&null!==t?t:null,_s(i,s,o),e.current.lanes=o,ft(e,o,n),nd(e,n),e}function Wd(e,t,i,n){var o=t.current,s=ed(),r=td(o);return i=Vd(i),null===t.context?t.context=i:t.pendingContext=i,(t=zs(s,r)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=_s(o,t,r))&&(id(e,o,r,s),Vs(e,o,r)),r}function jd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ud(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Kd(e,t){Ud(e,t),(e=e.alternate)&&Ud(e,t)}Sl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Eo.current)ba=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return ba=!1,function(e,t,i){switch(t.tag){case 3:Ta(t),gs();break;case 5:Js(t);break;case 1:Po(t.type)&&Bo(t);break;case 4:qs(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;Io(Ss,n._currentValue),n._currentValue=o;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Io(er,1&er.current),t.flags|=128,null):0!==(i&t.child.childLanes)?Ba(e,t,i):(Io(er,1&er.current),null!==(e=ja(e,t,i))?e.sibling:null);Io(er,1&er.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(128&e.flags)){if(n)return Ha(e,t,i);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Io(er,er.current),n)break;return null;case 22:case 23:return t.lanes=0,Ma(e,t,i)}return ja(e,t,i)}(e,t,i);ba=0!==(131072&e.flags)}else ba=!1,ss&&0!==(1048576&t.flags)&&es(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wa(e,t),e=t.pendingProps;var o=Lo(t,To.current);Es(t,i),o=vr(null,t,n,e,o,i);var r=fr();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(n)?(r=!0,Bo(t)):r=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Bs(t),o.updater=oa,t.stateNode=o,o._reactInternals=t,la(t,n,e,i),t=Aa(null,t,n,!0,r,i)):(t.tag=0,ss&&r&&ts(t),Ca(null,t,o,i),t=t.child),t;case 16:n=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,n=(o=n._init)(n._payload),t.type=n,o=t.tag=function(e){if("function"===typeof e)return Ld(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(n),e=ia(n,e),o){case 0:t=ka(null,t,n,e,i);break e;case 1:t=Ia(null,t,n,e,i);break e;case 11:t=xa(null,t,n,e,i);break e;case 14:t=wa(null,t,n,ia(n.type,e),i);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,ka(e,t,n,o=t.elementType===n?o:ia(n,o),i);case 1:return n=t.type,o=t.pendingProps,Ia(e,t,n,o=t.elementType===n?o:ia(n,o),i);case 3:e:{if(Ta(t),null===e)throw Error(s(387));n=t.pendingProps,o=(r=t.memoizedState).element,Gs(e,t),Ws(t,n,null,i);var a=t.memoizedState;if(n=a.element,r.isDehydrated){if(r={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Ea(e,t,n,i,o=da(Error(s(423)),t));break e}if(n!==o){t=Ea(e,t,n,i,o=da(Error(s(424)),t));break e}for(os=co(t.stateNode.containerInfo.firstChild),ns=t,ss=!0,rs=null,i=ws(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(gs(),n===o){t=ja(e,t,i);break e}Ca(e,t,n,i)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),n=t.type,o=t.pendingProps,r=null!==e?e.memoizedProps:null,a=o.children,io(n,o)?a=null:null!==r&&io(n,r)&&(t.flags|=32),Da(e,t),Ca(e,t,a,i),t.child;case 6:return null===e&&cs(t),null;case 13:return Ba(e,t,i);case 4:return qs(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=xs(t,null,n,i):Ca(e,t,n,i),t.child;case 11:return n=t.type,o=t.pendingProps,xa(e,t,n,o=t.elementType===n?o:ia(n,o),i);case 7:return Ca(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ca(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,r=t.memoizedProps,a=o.value,Io(Ss,n._currentValue),n._currentValue=a,null!==r)if(an(r.value,a)){if(r.children===o.children&&!Eo.current){t=ja(e,t,i);break e}}else for(null!==(r=t.child)&&(r.return=t);null!==r;){var l=r.dependencies;if(null!==l){a=r.child;for(var d=l.firstContext;null!==d;){if(d.context===n){if(1===r.tag){(d=zs(-1,i&-i)).tag=2;var c=r.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?d.next=d:(d.next=h.next,h.next=d),c.pending=d}}r.lanes|=i,null!==(d=r.alternate)&&(d.lanes|=i),Ts(r.return,i,t),l.lanes|=i;break}d=d.next}}else if(10===r.tag)a=r.type===t.type?null:r.child;else if(18===r.tag){if(null===(a=r.return))throw Error(s(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Ts(a,i,t),a=r.sibling}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===t){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}Ca(e,t,o.children,i),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Es(t,i),n=n(o=Rs(o)),t.flags|=1,Ca(e,t,n,i),t.child;case 14:return o=ia(n=t.type,t.pendingProps),wa(e,t,n,o=ia(n.type,o),i);case 15:return Sa(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:ia(n,o),Wa(e,t),t.tag=1,Po(n)?(e=!0,Bo(t)):e=!1,Es(t,i),ra(t,n,o),la(t,n,o,i),Aa(null,t,n,!0,e,i);case 19:return Ha(e,t,i);case 22:return Ma(e,t,i)}throw Error(s(156,t.tag))};var Yd="function"===typeof reportError?reportError:function(e){console.error(e)};function Zd(e){this._internalRoot=e}function Xd(e){this._internalRoot=e}function qd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jd(){}function $d(e,t,i,n,o){var s=i._reactRootContainer;if(s){var r=s;if("function"===typeof o){var a=o;o=function(){var e=jd(r);a.call(e)}}Wd(t,r,e,o)}else r=function(e,t,i,n,o){if(o){if("function"===typeof n){var s=n;n=function(){var e=jd(r);s.call(e)}}var r=Hd(t,n,e,0,null,!1,0,"",Jd);return e._reactRootContainer=r,e[mo]=r.current,Hn(8===e.nodeType?e.parentNode:e),cd(),r}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof n){var a=n;n=function(){var e=jd(l);a.call(e)}}var l=_d(e,0,!1,null,0,!1,0,"",Jd);return e._reactRootContainer=l,e[mo]=l.current,Hn(8===e.nodeType?e.parentNode:e),cd((function(){Wd(t,l,i,n)})),l}(i,t,e,o,n);return jd(r)}Xd.prototype.render=Zd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wd(e,t,null,null)},Xd.prototype.unmount=Zd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cd((function(){Wd(null,e,null,null)})),t[mo]=null}},Xd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Pt.length&&0!==t&&t<Pt[i].priority;i++);Pt.splice(i,0,e),0===i&&Bt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ht(t.pendingLanes);0!==i&&(yt(t,1|i),nd(t,Qe()),0===(6&Al)&&(Hl=Qe()+500,Wo()))}break;case 13:cd((function(){var t=Fs(e,1);if(null!==t){var i=ed();id(t,e,1,i)}})),Kd(e,1)}},wt=function(e){if(13===e.tag){var t=Fs(e,134217728);if(null!==t)id(t,e,134217728,ed());Kd(e,134217728)}},St=function(e){if(13===e.tag){var t=td(e),i=Fs(e,t);if(null!==i)id(i,e,t,ed());Kd(e,t)}},Mt=function(){return bt},Dt=function(e,t){var i=bt;try{return bt=e,t()}finally{bt=i}},we=function(e,t,i){switch(t){case"input":if(J(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var o=wo(n);if(!o)throw Error(s(90));Y(n),J(n,o)}}}break;case"textarea":se(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Ae=dd,Te=cd;var ec={usingClientEntryPoint:!1,Events:[Co,xo,wo,ke,Ie,dd]},tc={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ic={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ue(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{ot=nc.inject(ic),st=nc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qd(t))throw Error(s(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!qd(e))throw Error(s(299));var i=!1,n="",o=Yd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=_d(e,1,!1,null,0,i,0,n,o),e[mo]=t.current,Hn(8===e.nodeType?e.parentNode:e),new Zd(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ue(t))?null:e.stateNode},t.flushSync=function(e){return cd(e)},t.hydrate=function(e,t,i){if(!Qd(t))throw Error(s(200));return $d(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!qd(e))throw Error(s(405));var n=null!=i&&i.hydratedSources||null,o=!1,r="",a=Yd;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(o=!0),void 0!==i.identifierPrefix&&(r=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),t=Hd(t,null,e,1,null!=i?i:null,o,0,r,a),e[mo]=t.current,Hn(e),n)for(e=0;e<n.length;e++)o=(o=(i=n[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,o]:t.mutableSourceEagerHydrationData.push(i,o);return new Xd(t)},t.render=function(e,t,i){if(!Qd(t))throw Error(s(200));return $d(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Qd(e))throw Error(s(40));return!!e._reactRootContainer&&(cd((function(){$d(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=dd,t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Qd(i))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $d(e,t,i,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},454:(e,t,i)=>{"use strict";var n=i(989);t.H=n.createRoot,n.hydrateRoot},989:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(627)},119:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<s(o,t)))break e;e[n]=t,e[i]=o,i=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,r=o>>>1;n<r;){var a=2*(n+1)-1,l=e[a],d=a+1,c=e[d];if(0>s(l,i))d<o&&0>s(c,l)?(e[n]=c,e[d]=i,n=d):(e[n]=l,e[a]=i,n=a);else{if(!(d<o&&0>s(c,i)))break e;e[n]=c,e[d]=i,n=d}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],h=1,u=null,p=3,g=!1,m=!1,v=!1,f="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function C(e){for(var t=n(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,i(d,t)}t=n(c)}}function x(e){if(v=!1,C(e),!m)if(null!==n(d))m=!0,P(w);else{var t=n(c);null!==t&&N(x,t.startTime-e)}}function w(e,i){m=!1,v&&(v=!1,y(k),k=-1),g=!0;var s=p;try{for(C(i),u=n(d);null!==u&&(!(u.expirationTime>i)||e&&!T());){var r=u.callback;if("function"===typeof r){u.callback=null,p=u.priorityLevel;var a=r(u.expirationTime<=i);i=t.unstable_now(),"function"===typeof a?u.callback=a:u===n(d)&&o(d),C(i)}else o(d);u=n(d)}if(null!==u)var l=!0;else{var h=n(c);null!==h&&N(x,h.startTime-i),l=!1}return l}finally{u=null,p=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,D=null,k=-1,I=5,A=-1;function T(){return!(t.unstable_now()-A<I)}function E(){if(null!==D){var e=t.unstable_now();A=e;var i=!0;try{i=D(!0,e)}finally{i?S():(M=!1,D=null)}}else M=!1}if("function"===typeof b)S=function(){b(E)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,L=R.port2;R.port1.onmessage=E,S=function(){L.postMessage(null)}}else S=function(){f(E,0)};function P(e){D=e,M||(M=!0,S())}function N(e,i){k=f((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,o,s){var r=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:o,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>r?(e.sortIndex=s,i(c,e),null===n(d)&&e===n(c)&&(v?(y(k),k=-1):v=!0,N(x,s-r))):(e.sortIndex=a,i(d,e),m||g||(m=!0,P(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},46:(e,t,i)=>{"use strict";e.exports=i(119)},963:(e,t)=>{"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,f=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,C=i?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case h:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case u:case v:case m:case l:return e;default:return t}}case o:return t}}}function w(e){return x(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=u,t.Fragment=s,t.Lazy=v,t.Memo=m,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||x(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===d},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return x(e)===u},t.isFragment=function(e){return x(e)===s},t.isLazy=function(e){return x(e)===v},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===o},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===r},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===r||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===l||e.$$typeof===d||e.$$typeof===u||e.$$typeof===y||e.$$typeof===b||e.$$typeof===C||e.$$typeof===f)},t.typeOf=x},791:(e,t,i)=>{"use strict";e.exports=i(963)},656:(e,t,i)=>{"use strict";var n=i(176),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,i){var n,s={},d=null,c=null;for(n in void 0!==i&&(d=""+i),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)r.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:o,type:e,key:d,ref:c,props:s,_owner:a.current}}t.jsx=d,t.jsxs=d},83:(e,t)=>{"use strict";var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function f(e,t,i){this.props=e,this.context=t,this.refs=v,this.updater=i||g}function y(){}function b(e,t,i){this.props=e,this.context=t,this.refs=v,this.updater=i||g}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=f.prototype;var C=b.prototype=new y;C.constructor=b,m(C,f.prototype),C.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,n){var o,s={},r=null,a=null;if(null!=t)for(o in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(r=""+t.key),t)w.call(t,o)&&!M.hasOwnProperty(o)&&(s[o]=t[o]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];s.children=d}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===s[o]&&(s[o]=l[o]);return{$$typeof:i,type:e,key:r,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,o,s,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case n:l=!0}}if(l)return r=r(l=e),e=""===s?"."+A(l,0):s,x(r)?(o="",null!=e&&(o=e.replace(I,"$&/")+"/"),T(r,t,o,"",(function(e){return e}))):null!=r&&(k(r)&&(r=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,o+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(I,"$&/")+"/")+e)),t.push(r)),1;if(l=0,s=""===s?".":s+":",x(e))for(var d=0;d<e.length;d++){var c=s+A(a=e[d],d);l+=T(a,t,o,c,r)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),d=0;!(a=e.next()).done;)l+=T(a=a.value,t,o,c=s+A(a,d++),r);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,i){if(null==e)return e;var n=[],o=0;return T(e,n,"","",(function(e){return t.call(i,e,o++)})),n}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},P={transition:null},N={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,i){E(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=f,t.Fragment=o,t.Profiler=r,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=F,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),s=e.key,r=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)w.call(t,d)&&!M.hasOwnProperty(d)&&(o[d]=void 0===t[d]&&void 0!==l?l[d]:t[d])}var d=arguments.length-2;if(1===d)o.children=n;else if(1<d){l=Array(d);for(var c=0;c<d;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:i,type:e.type,key:s,ref:r,props:o,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,i){return L.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,i){return L.current.useReducer(e,t,i)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return L.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},176:(e,t,i)=>{"use strict";e.exports=i(83)},812:(e,t,i)=>{"use strict";e.exports=i(656)},472:(e,t,i)=>{"use strict";var n=i(512),o="function"===typeof Symbol&&Symbol.for,s=o?Symbol.for("react.element"):60103,r=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,d=o?Symbol.for("react.profiler"):60114,c=o?Symbol.for("react.provider"):60109,h=o?Symbol.for("react.context"):60110,u=o?Symbol.for("react.forward_ref"):60112,p=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.memo"):60115,m=o?Symbol.for("react.lazy"):60116,v="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function C(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||y}function x(){}function w(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||y}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=C.prototype;var S=w.prototype=new x;S.constructor=w,n(S,C.prototype),S.isPureReactComponent=!0;var M={current:null},D=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,i){var n,o={},r=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(r=""+t.key),t)D.call(t,n)&&!k.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];o.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:s,type:e,key:r,ref:a,props:o,_owner:M.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var T=/\/+/g,E=[];function R(e,t,i,n){if(E.length){var o=E.pop();return o.result=e,o.keyPrefix=t,o.func=i,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function L(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>E.length&&E.push(e)}function P(e,t,i,n){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case s:case r:a=!0}}if(a)return i(n,e,""===t?"."+F(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var d=t+F(o=e[l],l);a+=P(o,d,i,n)}else if(null===e||"object"!==typeof e?d=null:d="function"===typeof(d=v&&e[v]||e["@@iterator"])?d:null,"function"===typeof d)for(e=d.call(e),l=0;!(o=e.next()).done;)a+=P(o=o.value,d=t+F(o,l++),i,n);else if("object"===o)throw i=""+e,Error(f(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return a}function N(e,t,i){return null==e?0:P(e,"",t,i)}function F(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function O(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,i){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?G(e,n,i,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+i)),n.push(e))}function G(e,t,i,n,o){var s="";null!=i&&(s=(""+i).replace(T,"$&/")+"/"),N(e,B,t=R(t,s,n,o)),L(t)}var z={current:null};function _(){var e=z.current;if(null===e)throw Error(f(321));return e}var V={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,i){if(null==e)return e;var n=[];return G(e,n,null,t,i),n},forEach:function(e,t,i){if(null==e)return e;N(e,O,t=R(null,null,t,i)),L(t)},count:function(e){return N(e,(function(){return null}),null)},toArray:function(e){var t=[];return G(e,t,null,(function(e){return e})),t},only:function(e){if(!A(e))throw Error(f(143));return e}},t.Component=C,t.Fragment=a,t.Profiler=d,t.PureComponent=w,t.StrictMode=l,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error(f(267,e));var o=n({},e.props),r=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=M.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(c in t)D.call(t,c)&&!k.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==d?d[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=i;else if(1<c){d=Array(c);for(var h=0;h<c;h++)d[h]=arguments[h+2];o.children=d}return{$$typeof:s,type:e.type,key:r,ref:a,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return _().useCallback(e,t)},t.useContext=function(e,t){return _().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return _().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return _().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return _().useLayoutEffect(e,t)},t.useMemo=function(e,t){return _().useMemo(e,t)},t.useReducer=function(e,t,i){return _().useReducer(e,t,i)},t.useRef=function(e){return _().useRef(e)},t.useState=function(e){return _().useState(e)},t.version="16.14.0"},273:(e,t,i)=>{"use strict";e.exports=i(472)}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=i(176),t=i(454);function n(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.includes(i)||{}.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function r(e,t,i){return(t=s(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const d=["key"];var c,h,u,p,g,m,v,f,y,b,C=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let o=n.get(e);return!o&&i&&(o=new Set,n.set(e,o)),o}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,i,!0).add(t)}removeEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.getListeners(e,i,!1);if(n&&(n.delete(t),0===n.size)){(i?this.allAsyncListeners:this.allSyncListeners).delete(e)}}addGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const n=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const o=(i,n)=>i.forEach((i=>{if(!n.has(i))return;const o=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(e))):()=>i(e);t?this.dispatchAsync(o):o()})),s=null!==(i=this.getListeners(n,t,!1))&&void 0!==i?i:new Set,r=new Set(s);r.size>0&&o(r,s);new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach((i=>{const o=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(n,e))):()=>i(n,e);t?this.dispatchAsync(o):o()}))}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}};function x(e,t){return t}function w(e){var t;return null!==(t=null===e||void 0===e?void 0:e.getLocaleTextFunc())&&void 0!==t?t:x}function S(e,t,i){null==i||"string"===typeof i&&""==i?D(e,t):M(e,t,i)}function M(e,t,i){e.setAttribute(k(t),i.toString())}function D(e,t){e.removeAttribute(k(t))}function k(e){return"aria-".concat(e)}function I(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function A(e,t){S(e,"label",t)}function T(e,t){S(e,"labelledby",t)}function E(e,t){S(e,"describedby",t)}function R(e,t){S(e,"live",t)}function L(e,t){S(e,"level",t)}function P(e,t){S(e,"disabled",t)}function N(e,t){S(e,"hidden",t)}function F(e,t){S(e,"activedescendant",t)}function O(e,t){M(e,"expanded",t)}function B(e){D(e,"expanded")}function G(e,t){M(e,"setsize",t)}function z(e,t){M(e,"posinset",t)}function _(e,t){M(e,"rowcount",t)}function V(e,t){M(e,"rowindex",t)}function H(e,t){M(e,"colcount",t)}function W(e,t){M(e,"colindex",t)}function j(e,t){M(e,"colspan",t)}function U(e,t){M(e,"sort",t)}function K(e){D(e,"sort")}function Y(e,t){S(e,"selected",t)}function Z(e,t){M(e,"checked",void 0===t?"mixed":t)}function X(e,t){S(e,"controls",t.id),T(t,e.id)}function q(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function Q(){return void 0===h&&(h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),h}function J(){if(void 0===u){const e=window;u=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return u}function $(){return void 0===p&&(p=/(firefox)/i.test(navigator.userAgent)),p}function ee(){return void 0===g&&(g=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),g}function te(){return void 0===m&&(m=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),m}function ie(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||$())?t.toString():null}function ne(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(f=i,v=0===i)}function oe(){return null==v&&ne(),v}function se(e,t,i){const n=e.parentElement;let o=n&&n.firstChild;for(;o;)t&&o.classList.toggle(t,o===e),i&&o.classList.toggle(i,o!==e),o=o.nextSibling}var re="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function ae(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),n=t.call(e,re),o=Me(e);return i&&!n&&o}function le(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||N(e,!t)}function de(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||N(e,!t)}function ce(e,t){const i="disabled",n=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);n(e),Fe(e.querySelectorAll("input"),(e=>n(e)))}function he(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++n>i)break}else if(e===i)break}return!1}function ue(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:o,borderBottomWidth:s,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:d,paddingLeft:c,marginTop:h,marginRight:u,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(o||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(h||"0"),marginRight:parseFloat(u||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function pe(e){const t=ue(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function ge(e){const t=ue(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function me(e){const{height:t,marginBottom:i,marginTop:n}=ue(e);return Math.floor(t+i+n)}function ve(e){const{width:t,marginLeft:i,marginRight:n}=ue(e);return Math.floor(t+i+n)}function fe(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:o,borderBottomWidth:s}=ue(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(o||0),bottom:t.bottom+(s||0)}}function ye(){if("boolean"===typeof b)return b;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,b=0===Math.floor(e.scrollLeft),document.body.removeChild(e),b}function be(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),J()&&!ye()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function Ce(e,t,i){i&&(ye()?t*=-1:(Q()||J())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function xe(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function we(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Se(e){return!!e.offsetParent}function Me(e){const t=e;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});return!(!Se(e)||"visible"!==window.getComputedStyle(e).visibility)}function De(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function ke(e,t,i){i&&i.nextSibling===t||(i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function Ie(e,t){for(let i=0;i<t.length;i++){const n=t[i],o=e.children[i];o!==n&&e.insertBefore(n,o)}}function Ae(e,t){if(t)for(const[i,n]of Object.entries(t)){if(!i||!i.length||null==n)continue;const t=i.replace(/[A-Z]/g,(e=>"-".concat(e.toLocaleLowerCase()))),o=n.toString(),s=o.replace(/\s*!important/g,""),r=s.length!=o.length?"important":void 0;e.style.setProperty(t,s,r)}}function Te(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Ee(e,t)}function Ee(e,t){t=Le(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Re(e,t){t=Le(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function Le(e){return"number"===typeof e?"".concat(e,"px"):e}function Pe(e){return e instanceof Node||e instanceof HTMLElement}function Ne(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Fe(e,t){if(null!=e)for(let i=0;i<e.length;i++)t(e[i])}function Oe(e,t){e.then((e=>{const i=e.getGui();null!=i&&("object"===typeof i?t.appendChild(i):t.innerHTML=i)}))}function Be(e,t,i){const n=Et(e).ResizeObserver,o=n?new n(i):null;return null===o||void 0===o||o.observe(t),()=>null===o||void 0===o?void 0:o.disconnect()}function Ge(e){return null==e||""===e?null:e}function ze(e){return null!=e&&""!==e}function _e(e){return!ze(e)}function Ve(e){return null!=e&&"function"===typeof e.toString?e.toString():null}function He(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function We(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=null==e,o=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&o)return 0;if(n)return-1;if(o)return 1;function s(e,t){return e>t?1:e<t?-1:0}if("string"!==typeof e)return s(e,t);if(!i)return s(e,t);try{return e.localeCompare(t)}catch(r){return s(e,t)}}var je="https://www.ag-grid.com",Ue={};function Ke(e,t){Ue[t]||(e(),Ue[t]=!0)}function Ye(e,t){if(e.get("debug")){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];console.log("AG Grid: "+t,...n)}}function Ze(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];Ke((()=>console.warn("AG Grid: "+e,...i)),e+(null===i||void 0===i?void 0:i.join("")))}function Xe(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];Ke((()=>console.error("AG Grid: "+e,...i)),e+(null===i||void 0===i?void 0:i.join("")))}var qe=[],Qe=!1;function Je(e){qe.push(e),Qe||(Qe=!0,window.setTimeout((()=>{const e=qe.slice();qe.length=0,Qe=!1,e.forEach((e=>e()))}),0))}function $e(e,t,i){let n;return function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];const a=this;window.clearTimeout(n),n=window.setTimeout((function(){e.isAlive()&&t.apply(a,s)}),i)}}function et(e,t){let i=0;return function(){const n=(new Date).getTime();if(!(n-i<t)){i=n;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];e.apply(this,s)}}}function tt(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=arguments.length>3?arguments[3]:void 0;const o=(new Date).getTime();let s=null,r=!1;const a=()=>{const a=(new Date).getTime()-o>i;(e()||a)&&(t(),r=!0,null!=s&&(window.clearInterval(s),s=null),a&&n&&Ze(n))};a(),r||(s=window.setInterval(a,10))}var it="33.0.3",nt="_version_",ot=null,st="".concat(je,"/javascript-data-grid");function rt(e,t,i){var n,o;return null!==(n=null===(o=ot)||void 0===o?void 0:o.getConsoleMessage(e,t))&&void 0!==n?n:[ut(e,t,i)]}function at(e,t,i,n){e("error #".concat(t),...rt(t,i,n))}function lt(e){let t=e;return e instanceof Error?t=e.toString():"object"===typeof e&&(t=function(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))"object"!==typeof e[i]&&"function"!==typeof e[i]&&(t[i]=e[i]);return JSON.stringify(t)}(e)),t}function dt(e){return void 0===e?"undefined":null===e?"null":e}function ct(e,t){return"".concat(e,"?").concat(t.toString())}function ht(e,t){const i=new URLSearchParams;i.append(nt,it),t&&Object.entries(t).forEach((e=>{let[t,n]=e;i.append(t,lt(n))}));const n="".concat(st,"/errors/").concat(e),o=ct(n,i);return o.length<=2e3?o:function(e,t,i){const n=Array.from(t.entries()).sort(((e,t)=>t[1].length-e[1].length));let o=ct(e,t);for(const[s,r]of n){if(s===nt)continue;const n=o.length-i;if(n<=0)break;const a="...",l=n+a.length,d=r.length-l>100?r.slice(0,r.length-l)+a:r.slice(0,100)+a;t.set(s,d),o=ct(e,t)}return o}(n,i,2e3)}var ut=(e,t,i)=>{const n=ht(e,t);return"".concat(i?i+" \n":"","Visit ").concat(n).concat(i?"":" \n  Alternatively register the ValidationModule to see the full message in the console.")};function pt(){at(Ze,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}function gt(){at(Xe,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}function mt(e,t,i){at(Xe,e,t,i)}function vt(e,t){const i=t[0];return"error #".concat(i," ")+rt(i,t[1],e).join(" ")}function ft(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return vt(void 0,t)}function yt(e,t){return e.get("rowModelType")===t}function bt(e,t){return yt(e,"clientSide")}function Ct(e,t){return yt(e,"serverSide")}function xt(e,t){return e.get("domLayout")===t}function wt(e){return void 0!==oi(e)}function St(e){return"function"===typeof e.get("getRowHeight")}function Mt(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;const{gos:o,environment:s}=e;if(null==n&&(n=s.getDefaultRowHeight()),St(o)){if(i)return{height:n,estimated:!0};const e={node:t,data:t.data},s=o.getCallback("getRowHeight")(e);if(kt(s))return 0===s&&pt(23),{height:Math.max(1,s),estimated:!1}}if(t.detail&&o.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if(kt(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(o);const r=o.get("rowHeight");return{height:r&&kt(r)?r:n,estimated:!1}}function Dt(e){const{environment:t,gos:i}=e,n=i.get("rowHeight");if(!n||_e(n))return t.getDefaultRowHeight();const o=t.refreshRowHeightVariable();return-1!==o?o:(pt(24),t.getDefaultRowHeight())}function kt(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}function It(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0}function At(e,t,i,n){const o=e.getDomDataKey();let s=t[o];_e(s)&&(s={},t[o]=s),s[i]=n}function Tt(e){const{gos:t,eGridDiv:i}=e;let n=null;const o=t.get("getDocument");return o&&ze(o)?n=o():i&&(n=i.ownerDocument),n&&ze(n)?n:document}function Et(e){return Tt(e).defaultView||window}function Rt(e){return e.eGridDiv.getRootNode()}function Lt(e){return Rt(e).activeElement}function Pt(e){let t=null,i=null;try{t=Tt(e).fullscreenElement}catch(o){}finally{t||(t=Rt(e));const o=t.querySelector("body");if(o)i=o;else if(t instanceof ShadowRoot)i=t;else if(t instanceof Document){var n;i=null===(n=t)||void 0===n?void 0:n.documentElement}else i=t}return i}function Nt(e,t,i){const n=e.getBoundingClientRect().height,o=function(e){var t;const i=Pt(e);return null!==(t=null===i||void 0===i?void 0:i.clientWidth)&&void 0!==t?t:window.innerHeight||-1}(i)-2,s=function(e){var t;const i=Pt(e);return null!==(t=null===i||void 0===i?void 0:i.clientHeight)&&void 0!==t?t:window.innerHeight||-1}(i)-2;if(!e.offsetParent)return;const r=fe(e.offsetParent),{clientY:a,clientX:l}=t;let d=a-r.top-n/2,c=l-r.left-10;const h=Tt(i),u=h.defaultView||window,p=u.pageYOffset||h.documentElement.scrollTop,g=u.pageXOffset||h.documentElement.scrollLeft;o>0&&c+e.clientWidth>o+g&&(c=o+g-e.clientWidth),c<0&&(c=0),s>0&&d+e.clientHeight>s+p&&(d=s+p-e.clientHeight),d<0&&(d=0),e.style.left="".concat(c,"px"),e.style.top="".concat(d,"px")}function Ft(e){const t=Tt(e),i=Lt(e);return null===i||i===t.body}function Ot(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function Bt(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||xt(e,"print"))}function Gt(e){const t=e.get("autoGroupColumnDef");return!(null!==t&&void 0!==t&&t.comparator)&&!e.get("treeData")}function zt(e){const t=e.get("groupAggFiltering");return"function"===typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function _t(e){return e.get("grandTotalRow")}function Vt(e){const t=e.get("groupTotalRow");return"function"===typeof t?e.getCallback("groupTotalRow"):()=>null!==t&&void 0!==t?t:void 0}function Ht(e){return e.exists("groupDisplayType")?"multipleColumns"===e.get("groupDisplayType"):e.get("groupHideOpenParents")}function Wt(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function jt(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!==typeof i&&(pt(25,{id:i}),i=String(i)),i}}function Ut(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Kt(e,t){const i=e.get("suppressGroupChangesColumnVisibility");if(!0===i)return!1;if(t&&"suppressHideOnGroup"===i)return!1;if(!t&&"suppressShowOnUngroup"===i)return!1;const n=e.get("suppressRowGroupHidesColumns");if(t&&!0===n)return!1;const o=e.get("suppressMakeColumnVisibleAfterUnGroup");return!(!t&&!0===o)}function Yt(e){var t;return null===(t=null===e||void 0===e?void 0:e.checkboxes)||void 0===t||t}function Zt(e){var t;return"multiRow"===(null===e||void 0===e?void 0:e.mode)&&(null===(t=e.headerCheckbox)||void 0===t||t)}function Xt(e){var t;if("object"===typeof e)return null!==(t=e.checkboxLocation)&&void 0!==t?t:"selectionColumn"}function qt(e){var t;return null!==(t=null===e||void 0===e?void 0:e.hideDisabledCheckboxes)&&void 0!==t&&t}function Qt(e){return"string"!==typeof e.get("rowSelection")}function Jt(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&(null!==(t=null===i||void 0===i?void 0:i.suppressMultiRanges)&&void 0!==t&&t):e.get("suppressMultiRangeSelection")}function $t(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function ei(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&"fill"===(null===(t=i.handle)||void 0===t?void 0:t.mode)?i.handle:void 0:{mode:"fill",setFillValue:e.get("fillOperation"),direction:e.get("fillHandleDirection"),suppressClearOnFillReduction:e.get("suppressClearOnFillReduction")}}function ti(e){var t,i;const n=null!==(t=e.get("rowSelection"))&&void 0!==t?t:"single";if("string"===typeof n){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===n.mode||"multiRow"===n.mode)&&(null!==(i=n.enableClickSelection)&&void 0!==i&&i)}function ii(e){const t=ti(e);return!0===t||"enableDeselection"===t}function ni(e){const t=e.get("rowSelection");return"string"===typeof t?e.get("isRowSelectable"):null===t||void 0===t?void 0:t.isRowSelectable}function oi(e){const t=e.get("rowSelection");if("string"===typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(null===t||void 0===t?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function si(e){return"multiRow"===oi(e)}function ri(e){const t=e.get("rowSelection");if("string"===typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===(null===t||void 0===t?void 0:t.mode)?t.groupSelects:void 0}function ai(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.get("rowSelection");return"object"!==typeof i?t?"all":void 0:"multiRow"===i.mode?i.selectAll:"all"}function li(e){const t=ri(e);return"descendants"===t||"filteredDescendants"===t}function di(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function ci(e){return"legacy"===e.get("columnMenu")}function hi(e){return!ci(e)}function ui(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}var pi="__ag_Grid_Stop_Propagation",gi=["touchstart","touchend","touchmove","touchcancel","scroll"],mi=["wheel"],vi={};function fi(e){e[pi]=!0}function yi(e){return!0===e[pi]}var bi=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof vi[t])return vi[t];const i=document.createElement(e[t]||"div");return vi[t="on"+t]=t in i}})();function Ci(e,t,i){let n=t;for(;n;){const t=It(e,n,i);if(t)return t;n=n.parentElement}return null}function xi(e,t){return!(!t||!e)&&function(e){const t=e;if(t.path)return t.path;if(t.composedPath)return t.composedPath();return function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var wi=e=>{const t=gi.includes(e),i=mi.includes(e);return!!t||!i&&void 0},Si=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new C),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){var n;null===(n=this.localEventService)||void 0===n||n.removeEventListener(e,t,i)}dispatchLocalEvent(e){var t;null===(t=this.localEventService)||void 0===t||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n of Object.keys(t)){const o=t[n];o&&i.push(this._setupListener(e,n,o))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?function(e,t,i,n){const o=wi(i);let s;null!=o&&(s={passive:o}),e&&e.addEventListener&&e.addEventListener(t,i,n,s)}(this.beans.frameworkOverrides,e,t,i):e.addEventListener(t,i);const n=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==n)),null)}setupGridOptionListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const n=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==n)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const n={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(n)};e.forEach((e=>this.setupGridOptionListener(e,n)))}getLocaleTextFunc(){return w(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}},Mi=new Set(["__proto__","constructor","prototype"]);function Di(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];ze(t)&&function(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const[i,n]of Object.entries(e))t(i,n)}(t,((t,o)=>{if(Mi.has(t))return;let s=e[t];if(s!==o){if(n){if(null==s&&null!=o){"object"===typeof o&&o.constructor===Object&&(s={},e[t]=s)}}Ii(o)&&Ii(s)&&!Array.isArray(s)?Di(s,o,i,n):(i||void 0!==o)&&(e[t]=o)}}))}function ki(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let o=e;for(let s=0;s<n.length;s++){if(null==o)return;o=o[n[s]]}return o}function Ii(e){return"object"===typeof e&&null!==e}var Ai={resizable:!0,sortable:!0},Ti=0;function Ei(){return Ti++}function Ri(e){return e instanceof Li}var Li=class extends Si{constructor(e,t,i,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.isColumn=!0,this.instanceId=Ei(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new C,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:n}}=this;null===t||void 0===t||t.initCol(this);const o=e.hide;this.visible=void 0!==o?!o:!e.initialHide,null===i||void 0===i||i.initCol(this),null===n||void 0===n||n.initCol(this)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=ze(t)&&t.indexOf(".")>=0&&!n,this.tooltipFieldContainsDots=ze(i)&&i.indexOf(".")>=0&&!n}initMinAndMaxWidths(){var e,t;const i=this.colDef;this.minWidth=null!==(e=i.minWidth)&&void 0!==e?e:this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=null!==(t=i.maxWidth)&&void 0!==t?t:Number.MAX_SAFE_INTEGER}initTooltip(){var e;null===(e=this.beans.tooltipSvc)||void 0===e||e.initCol(this)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,n=e.initialWidth;return t=null!=i?i:null!=n?n:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t,i;return null!==(t=null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.isRowGroupDisplayed(this,e))&&void 0!==t&&t}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){var i,n,o,s;this.frameworkEventListenerService=null===(i=(n=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===i?void 0:i.call(n,this.frameworkEventListenerService,this.colEventSvc);const r=null!==(o=null===(s=this.frameworkEventListenerService)||void 0===s?void 0:s.wrap(t))&&void 0!==o?o:t;this.colEventSvc.addEventListener(e,r)}removeEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.unwrap(t))&&void 0!==i?i:t;this.colEventSvc.removeEventListener(e,o)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t,i;return null!==(t=null===(i=this.beans.cellNavigation)||void 0===i?void 0:i.isSuppressNavigable(this,e))&&void 0!==t&&t}isCellEditable(e){var t,i;return null!==(t=null===(i=this.beans.editSvc)||void 0===i?void 0:i.isCellEditable(this,e))&&void 0!==t&&t}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t,i;return null!==(t=null===(i=this.beans.selectionSvc)||void 0===i?void 0:i.isCellCheckboxSelection(this,e))&&void 0!==t&&t}isSuppressPaste(e){var t,i;return this.isColumnFunc(e,null!==(t=null===(i=this.colDef)||void 0===i?void 0:i.suppressPaste)&&void 0!==t?t:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return null!==(t=this.colDef[e])&&void 0!==t?t:Ai[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return _e(this.sort)}isSorting(){return ze(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return pt(261),!(null===(e=this.beans.colHover)||void 0===e||!e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(_e(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(_e(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchColEvent(e,t,i){const n=this.createColumnEvent(e,t);i&&Di(n,i),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Pi(e){return e instanceof Ni}var Ni=class extends Si{constructor(e,t,i,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=Ei(),this.expandableListenerRemoveCallback=null,this.expanded=!(null===e||void 0===e||!e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach((t=>{Ri(t)?e.push(t):Pi(t)&&t.addLeafColumns(e)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let s=0,r=n.length;s<r;s++){const o=n[s];if(!o.isVisible())continue;const r=o.getColumnGroupShow();"open"===r?(e=!0,i=!0):"closed"===r?(t=!0,i=!0):(e=!0,t=!0)}const o=e&&t&&i;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach((i=>{Pi(i)&&i.isPadding()?t(i.children):e.push(i)}))};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Fi={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Oi=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Ve(e);let i=0;for(;;){var n;let o=null!==(n=e)&&void 0!==n?n:t;if(o?0!==i&&(o+="_"+i):o=i,!this.existingKeys[o])return this.existingKeys[o]=!0,String(o);i++}}},Bi=Object.freeze([]);function Gi(e){if(null!==e&&void 0!==e&&e.length)return e[e.length-1]}function zi(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,n)=>i?i(e,t[n]):t[n]===e))}function _i(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function Vi(e,t,i){for(let n=0;n<t.length;n++)_i(e,t[n]);for(let n=t.length-1;n>=0;n--)e.splice(i,0,t[n])}function Hi(e,t){const i=[],n=[],o=[];e.forEach((e=>{const t=e.getColDef().lockPosition;"right"===t?o.push(e):"left"===t||!0===t?i.push(e):n.push(e)}));return t.get("enableRtl")?[...o,...n,...i]:[...i,...n,...o]}function Wi(e,t){let i=!0;return wn(null,t,(t=>{if(!Pi(t))return;const n=t,o=n.getColGroupDef();if(!(o&&o.marryChildren))return;const s=[];n.getLeafColumns().forEach((t=>{const i=e.indexOf(t);s.push(i)}));Math.max.apply(Math,s)-Math.min.apply(Math,s)>n.getLeafColumns().length-1&&(i=!1)})),i}function ji(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}function Ui(e,t,i){if(!t.length)return;const n=1===t.length?t[0]:null,o=ji(t,(e=>e.getPinned()));e.dispatchEvent({type:"columnPinned",pinned:null!=o?o:null,columns:t,column:n,source:i})}function Ki(e,t,i,n){e.dispatchEvent({type:t,columns:i,column:i&&1==i.length?i[0]:null,source:n})}function Yi(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null!==t&&void 0!==t&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:o,finished:i,source:n})}function Zi(e,t,i){const{colModel:n,rowGroupColsSvc:o,pivotColsSvc:s,autoColSvc:r,selectionColSvc:a,colAnimation:l,visibleCols:d,pivotResultCols:c,environment:h,valueColsSvc:u,eventSvc:p,gos:g}=e,m=n.getColDefCols()||[];if(null===m||void 0===m||!m.length)return!1;if(null!==t&&void 0!==t&&t.state&&!t.state.forEach)return pt(32),!1;const v=(n,r,a,l,d)=>{if(!n)return;const c=mn(r,t.defaultState),p=c("flex").value1;if(bn(e,n,c("hide").value1,c("sort").value1,c("sortIndex").value1,c("pinned").value1,p,i),null==p){const e=c("width").value1;if(null!=e){var g;const t=null!==(g=n.getColDef().minWidth)&&void 0!==g?g:h.getDefaultColumnMinWidth();null!=t&&e>=t&&n.setActualWidth(e,i)}}!d&&n.isPrimary()&&(null===u||void 0===u||u.syncColumnWithState(n,i,c),null===o||void 0===o||o.syncColumnWithState(n,i,c,a),null===s||void 0===s||s.syncColumnWithState(n,i,c,l))},f=(l,c,h)=>{var u,m,f,y;const b=qi(e,i),C=c.slice(),x={},w={},S=[],M=[],D=[];let k=0;const I=null!==(u=null===o||void 0===o?void 0:o.columns.slice())&&void 0!==u?u:[],A=null!==(m=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==m?m:[];l.forEach((e=>{const t=e.colId;if(t.startsWith(on))return S.push(e),void D.push(e);if(dn(t))return M.push(e),void D.push(e);const i=h(t);i?(v(i,e,x,w,!1),_i(C,i)):(D.push(e),k+=1)}));const T=e=>v(e,null,x,w,!1);C.forEach(T),null===o||void 0===o||o.sortColumns($i.bind(o,x,I)),null===s||void 0===s||s.sortColumns($i.bind(s,w,A)),n.refreshCols(!1);const E=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.forEach((t=>{const n=e(t.colId);_i(i,n),v(n,t,null,null,!0)})),i.forEach(T)};return E((e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.getAutoCol(e))&&void 0!==t?t:null}),S,null===r||void 0===r||null===(f=r.getAutoCols())||void 0===f?void 0:f.slice()),E((e=>{var t;return null!==(t=null===a||void 0===a?void 0:a.getSelectionCol(e))&&void 0!==t?t:null}),M,null===a||void 0===a||null===(y=a.getSelectionCols())||void 0===y?void 0:y.slice()),function(e,t,i){if(!e.applyOrder||!e.state)return;const n=[];e.state.forEach((e=>{null!=e.colId&&n.push(e.colId)})),function(e,t,i,n){if(null==e)return;let o=[];const s={};t.forEach((t=>{if(s[t])return;const i=e.map[t];i&&(o.push(i),s[t]=!0)}));let r=0;if(e.list.forEach((e=>{const t=e.getColId();if(null!=s[t])return;t.startsWith(on)?o.splice(r++,0,e):o.push(e)})),o=Hi(o,n),!Wi(o,i.getColTree()))return void pt(39);e.list=o}(t.cols,n,t,i)}(t,n,g),d.refresh(i),p.dispatchEvent({type:"columnEverythingChanged",source:i}),b(),{unmatchedAndAutoStates:D,unmatchedCount:k}};null===l||void 0===l||l.start();let{unmatchedAndAutoStates:y,unmatchedCount:b}=f(t.state||[],m,(e=>n.getColDefCol(e)));if(y.length>0||ze(t.defaultState)){var C,x;b=f(y,null!==(C=null===c||void 0===c||null===(x=c.getPivotResultCols())||void 0===x?void 0:x.list)&&void 0!==C?C:[],(e=>{var t;return null!==(t=null===c||void 0===c?void 0:c.getPivotResultCol(e))&&void 0!==t?t:null})).unmatchedCount}return null===l||void 0===l||l.finish(),0===b}function Xi(e,t){const{colModel:i,autoColSvc:n}=e,o=i.getColDefCols();if(null===o||void 0===o||!o.length)return;const s=sn(i.getColDefColTree()),r=[];let a=1e3,l=1e3,d=[];const c=null===n||void 0===n?void 0:n.getAutoCols();c&&(d=d.concat(c)),s&&(d=d.concat(s)),d.forEach((e=>{const t=Ji(e);_e(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=a++),_e(t.pivotIndex)&&t.pivot&&(t.pivotIndex=l++),r.push(t)})),Zi(e,{state:r,applyOrder:!0},t)}function qi(e,t){var i,n,o;const{rowGroupColsSvc:s,pivotColsSvc:r,valueColsSvc:a,colModel:l,sortSvc:d,eventSvc:c}=e,h={rowGroupColumns:null!==(i=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==i?i:[],pivotColumns:null!==(n=null===r||void 0===r?void 0:r.columns.slice())&&void 0!==n?n:[],valueColumns:null!==(o=null===a||void 0===a?void 0:a.columns.slice())&&void 0!==o?o:[]},u=Qi(e),p={};return u.forEach((e=>{p[e.colId]=e})),()=>{var i,n;const o=l.getAllCols(),a=(e,i,n,o)=>{if(zi(i.map(o),n.map(o)))return;const s=new Set(i);n.forEach((e=>{s.delete(e)||s.add(e)}));const r=[...s];c.dispatchEvent({type:e,columns:r,column:1===r.length?r[0]:null,source:t})},g=e=>{const t=[];return o.forEach((i=>{const n=p[i.getColId()];n&&e(n,i)&&t.push(i)})),t},m=e=>e.getColId();a("columnRowGroupChanged",h.rowGroupColumns,null!==(i=null===s||void 0===s?void 0:s.columns)&&void 0!==i?i:[],m),a("columnPivotChanged",h.pivotColumns,null!==(n=null===r||void 0===r?void 0:r.columns)&&void 0!==n?n:[],m);const v=g(((e,t)=>{const i=null!=e.aggFunc,n=i!=t.isValueActive(),o=i&&e.aggFunc!=t.getAggFunc();return n||o}));v.length>0&&Ki(c,"columnValueChanged",v,t);Yi(c,g(((e,t)=>e.width!=t.getActualWidth())),!0,t);Ui(c,g(((e,t)=>e.pinned!=t.getPinned())),t);!function(e,t,i){if(!t.length)return;const n=1===t.length?t[0]:null,o=ji(t,(e=>e.isVisible()));e.dispatchEvent({type:"columnVisible",visible:o,columns:t,column:n,source:i})}(c,g(((e,t)=>e.hide==t.isVisible())),t);const f=g(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));f.length>0&&(null===d||void 0===d||d.dispatchSortChangedEvents(t,f));const y=Qi(e);!function(e,t,i,n,o){const s={};t.forEach((e=>s[e.colId]=e));const r={};e.forEach((e=>{s[e.colId]&&(r[e.colId]=!0)}));const a=e.filter((e=>r[e.colId])),l=t.filter((e=>r[e.colId])),d=[];if(l.forEach(((e,t)=>{const i=a&&a[t];if(i&&i.colId!==e.colId){const e=n.getCol(i.colId);e&&d.push(e)}})),!d.length)return;o.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,finished:!0,source:i})}(u,y,t,l,c)}}function Qi(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:n}=e;if(_e(t.getColDefCols())||!t.isAlive())return[];const o=t.getAllCols(),s=null===i||void 0===i?void 0:i.columns,r=null===n||void 0===n?void 0:n.columns,a=o.map((e=>(e=>{var t;const i=e.isRowGroupActive()&&s?s.indexOf(e):null,n=e.isPivotActive()&&r?r.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,a=null!=e.getSort()?e.getSort():null,l=null!=e.getSortIndex()?e.getSortIndex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:a,sortIndex:l,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:n,flex:null!==(t=e.getFlex())&&void 0!==t?t:null}})(e))),l=new Map(t.getCols().map(((e,t)=>[e.getColId(),t])));return a.sort(((e,t)=>(l.has(e.colId)?l.get(e.colId):-1)-(l.has(t.colId)?l.get(t.colId):-1))),a}function Ji(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),n=t(i.sort,i.initialSort),o=t(i.sortIndex,i.initialSortIndex),s=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let d=t(i.rowGroupIndex,i.initialRowGroupIndex),c=t(i.rowGroup,i.initialRowGroup);null!=d||null!=c&&0!=c||(d=null,c=null);let h=t(i.pivotIndex,i.initialPivotIndex),u=t(i.pivot,i.initialPivot);null!=h||null!=u&&0!=u||(h=null,u=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:o,hide:s,pinned:r,width:a,flex:l,rowGroup:c,rowGroupIndex:d,pivot:u,pivotIndex:h,aggFunc:p}}var $i=(e,t,i,n)=>{const o=e[i.getId()],s=e[n.getId()],r=null!=o,a=null!=s;if(r&&a)return o-s;if(r)return-1;if(a)return 1;const l=t.indexOf(i),d=t.indexOf(n),c=l>=0;return c&&d>=0?l-d:c?-1:1},en="ag-Grid-SelectionColumn",tn=e=>{var t,i;return e.isColumn?dn(e):null!==(t=null===(i=e.getChildren())||void 0===i?void 0:i.some(tn))&&void 0!==t&&t};function nn(e){var t;if(e.isColumn)return dn(e)?e:null;const i=null!==(t=e.getChildren())&&void 0!==t?t:[];for(const n of i){const e=nn(n);if(e)return e}return null}var on="ag-Grid-AutoColumn";function sn(e){const t=[],i=e=>{for(let n=0;n<e.length;n++){const o=e[n];Ri(o)?t.push(o):Pi(o)&&i(o.getChildren())}};return i(e),t}function rn(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}function an(e,t,i){const n={};if(!t)return;wn(null,t,(e=>{n[e.getInstanceId()]=e})),i&&wn(null,i,(e=>{n[e.getInstanceId()]=null}));const o=Object.values(n).filter((e=>null!=e));e.context.destroyBeans(o)}function ln(e){return e.getId().startsWith(on)}function dn(e){var t;const i="string"===typeof e?e:"getColId"in e?e.getColId():e.colId;return null!==(t=null===i||void 0===i?void 0:i.startsWith(en))&&void 0!==t&&t}function cn(e){let t=[];return e instanceof Array?t=e:"string"===typeof e&&(t=e.split(",")),t}function hn(e,t){return zi(e,t,((e,t)=>e.getColId()===t.getColId()))}function un(e){e.map={},e.list.forEach((t=>e.map[t.getId()]=t))}function pn(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function gn(e,t){const i=e===t,n=e.getColDef()===t,o=e.getColId()==t;return i||n||o}var mn=(e,t)=>(i,n)=>{const o={value1:void 0,value2:void 0};let s=!1;return e&&(void 0!==e[i]&&(o.value1=e[i],s=!0),ze(n)&&void 0!==e[n]&&(o.value2=e[n],s=!0)),!s&&t&&(void 0!==t[i]&&(o.value1=t[i]),ze(n)&&void 0!==t[n]&&(o.value2=t[n])),o};function vn(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const r=new Oi,{existingCols:a,existingGroups:l,existingColKeys:d}=function(e){const t=[],i=[],n=[];e&&wn(null,e,(e=>{if(Pi(e)){const t=e;i.push(t)}else{const i=e;n.push(i.getId()),t.push(i)}}));return{existingCols:t,existingGroups:i,existingColKeys:n}}(o);r.addExistingKeys(d);const c=fn(e,i,0,n,a,r,l,s),{colGroupSvc:h}=e,u=null!==(t=null===h||void 0===h?void 0:h.findMaxDepth(c,0))&&void 0!==t?t:0,p=h?h.balanceColumnTree(c,0,u,r):c;return wn(null,p,((e,t)=>{Pi(e)&&e.setupExpandable(),e.originalParent=t})),{columnTree:p,treeDept:u}}function fn(e,t,i,n,o,s,r,a){if(!t)return[];const{colGroupSvc:l}=e,d=new Array(t.length);for(let c=0;c<d.length;c++){const h=t[c];l&&void 0!==h.children?d[c]=l.createProvidedColumnGroup(n,h,i,o,s,r,a):d[c]=yn(e,n,h,o,s,a)}return d}function yn(e,t,i,n,o,s){var r;const a=function(e,t){if(!t)return;for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(!n)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(n.field===e.field)return{idx:i,column:t[i]}}else if(n===e)return{idx:i,column:t[i]}}return}(i,n);a&&(null===n||void 0===n||n.splice(a.idx,1));let l=null===a||void 0===a?void 0:a.column;if(l){const t=xn(e,i,l.getColId());l.setColDef(t,i,s),Cn(e,l,t,s)}else{const n=o.getUniqueKey(i.colId,i.field),s=xn(e,i,n);l=new Li(s,i,n,t),e.context.createBean(l)}return null===(r=e.dataTypeSvc)||void 0===r||r.addColumnListeners(l),l}function bn(e,t,i,n,o,s,r,a){const{sortSvc:l,pinnedCols:d,colFlex:c}=e;void 0!==i&&t.setVisible(!i,a),l&&(l.updateColSort(t,n,a),void 0!==o&&l.setColSortIndex(t,o)),void 0!==s&&(null===d||void 0===d||d.setColPinned(t,s)),void 0!==r&&(null===c||void 0===c||c.setColFlex(t,r))}function Cn(e,t,i,n){bn(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,n);const o=t.getFlex();if(!(null!=o&&o>0))if(null!=i.width)t.setActualWidth(i.width,n);else{const e=t.getActualWidth();t.setActualWidth(e,n)}}function xn(e,t,i,n){const{gos:o,dataTypeSvc:s,validation:r}=e,a={};Di(a,o.get("defaultColDef"),!1,!0);const l=function(e,t,i,n){var o,s,r;const a=null===(o=e.dataTypeSvc)||void 0===o?void 0:o.updateColDefAndGetColumnType(t,i,n),l=null!==(s=null!==(r=i.type)&&void 0!==r?r:a)&&void 0!==s?s:t.type;return t.type=l,l?cn(l):void 0}(e,a,t,i);l&&function(e,t,i){if(!t.length)return;const n=Object.assign({},Fi),o=e.gos.get("columnTypes")||{};for(const[s,r]of Object.entries(o))if(s in n)pt(34,{key:s});else{r.type&&pt(35),n[s]=r}t.forEach((e=>{const t=n[e.trim()];t?Di(i,t,!1,!0):pt(36,{t:e})}))}(e,l,a),Di(a,t,!1,!0);const d=o.get("autoGroupColumnDef"),c=Gt(o);return t.rowGroup&&d&&c&&Di(a,{sort:d.sort,initialSort:d.initialSort},!1,!0),null===s||void 0===s||s.validateColDef(a),null===r||void 0===r||r.validateColDef(a,i,n),a}function wn(e,t,i){if(t)for(let n=0;n<t.length;n++){const o=t[n];Pi(o)&&wn(o,o.getChildren(),i),i(o,e)}}var Sn=class extends Si{constructor(){super(...arguments),this.dispatchColumnChangedEvent=Ki,this.columns=[]}wireBeans(e){this.colModel=e.colModel,this.aggFuncSvc=e.aggFuncSvc,this.visibleCols=e.visibleCols}sortColumns(e){this.columns.sort(e)}setColumns(e,t){this.setColList(e,this.columns,this.eventName,!0,!0,this.columnProcessors.set,t)}addColumns(e,t){this.updateColList(e,this.columns,!0,!0,this.columnProcessors.add,this.eventName,t)}removeColumns(e,t){this.updateColList(e,this.columns,!1,!0,this.columnProcessors.remove,this.eventName,t)}setColList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;const a=this.colModel.getCols();if(!a||0===a.length)return;const l=new Map;t.forEach(((e,t)=>l.set(e,t))),t.length=0,ze(e)&&e.forEach((e=>{const i=this.colModel.getColDefCol(e);i&&t.push(i)})),t.forEach(((e,t)=>{const i=l.get(e);void 0!==i?n&&i!==t||l.delete(e):l.set(e,0)}));(this.colModel.getColDefCols()||[]).forEach((e=>{const i=t.indexOf(e)>=0;s(e,i,r)})),o&&this.colModel.refreshCols(!1),this.visibleCols.refresh(r),this.dispatchColumnChangedEvent(this.eventSvc,i,[...l.keys()],r)}updateColList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;if(!e||0===e.length)return;let a=!1;const l=new Set;if(e.forEach((e=>{if(!e)return;const n=this.colModel.getColDefCol(e);if(n){if(l.add(n),i){if(t.indexOf(n)>=0)return;t.push(n)}else{const e=t.indexOf(n);if(e<0)return;for(let i=e+1;i<t.length;i++)l.add(t[i]);_i(t,n)}o(n,i,r),a=!0}})),!a)return;n&&this.colModel.refreshCols(!1),this.visibleCols.refresh(r);const d=Array.from(l);this.eventSvc.dispatchEvent({type:s,columns:d,column:1===d.length?d[0]:null,source:r})}extractCols(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=this.columns,n=[],o=[],{setFlagFunc:s,getIndexFunc:r,getInitialIndexFunc:a,getValueFunc:l,getInitialValueFunc:d}=this.columnExtractors;(this.colModel.getColDefCols()||[]).forEach((e=>{const s=t.indexOf(e)<0,c=e.getColDef(),h=l(c),u=d(c),p=r(c),g=a(c);let m;if(m=void 0!==h?h:void 0!==p?null!==p&&p>=0:s?void 0!==u?u:!!(void 0!==g)&&(null!=g&&g>=0):i.indexOf(e)>=0,m){(s?null!=p||null!=g:null!=p)?n.push(e):o.push(e)}}));const c=e=>{const t=r(e.getColDef()),i=a(e.getColDef());return null!=t?t:i};n.sort(((e,t)=>{const i=c(e),n=c(t);return i===n?0:i<n?-1:1}));const h=[].concat(n);return i.forEach((e=>{o.indexOf(e)>=0&&h.push(e)})),o.forEach((e=>{h.indexOf(e)<0&&h.push(e)})),i.forEach((t=>{h.indexOf(t)<0&&s(t,!1,e)})),h.forEach((t=>{i.indexOf(t)<0&&s(t,!0,e)})),this.columns=h}restoreColumnOrder(e,t){const i=this.columns,n=this.colModel.getColDefCols();if(!i.length||!n)return e;const o=Object.keys(t),s=new Set(o),r=new Set(o),a=new Set(i.map((e=>{const t=e.getColId();return r.delete(t),t})).concat(o)),l=[],d={};let c=0;for(let b=0;b<n.length;b++){const e=n[b].getColId();a.has(e)&&(l.push(e),d[e]=c++)}let h=1e3,u=!1,p=0;const g=this.columnOrdering.enableProp,m=this.columnOrdering.initialEnableProp,v=this.columnOrdering.indexProp,f=this.columnOrdering.initialIndexProp,y=e=>{const i=d[e];for(let n=p;n<i;n++){const e=l[n];r.has(e)&&(t[e][v]=h++,r.delete(e))}p=i};return i.forEach((i=>{const n=i.getColId();if(s.has(n))y(n),t[n][v]=h++;else{const o=i.getColDef();if(null===o[v]||void 0===o[v]&&null==o[f]){if(!u){o[g]||void 0===o[g]&&o[m]?y(n):(r.forEach((e=>{t[e][v]=h+d[e]})),h+=l.length,u=!0)}e[n]||(e[n]={colId:n}),e[n][v]=h++}}})),e}},Mn=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!==typeof t?0:t+1,this.existingIds[e]=i,i}},Dn=class extends Si{};function kn(e,t,i){return i&&e.addDestroyFunc((()=>t.destroyBean(i))),null!==i&&void 0!==i?i:e}var In=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){this.addOrRemoveCssClass(e,!0)}removeCssClass(e){this.addOrRemoveCssClass(e,!1)}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach((e=>this.addOrRemoveCssClass(e,t)))}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}},An=0,Tn=null,En=class extends Si{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=An++,this.cssClassManager=new In((()=>this.eGui)),this.componentSelectors=new Map((null!==t&&void 0!==t?t:[]).map((e=>[e.selector,e]))),e&&this.setTemplate(e)}preConstruct(){var e,t;this.wireTemplate(this.getGui());const i="component-"+(null===(e=Object.getPrototypeOf(this))||void 0===e||null===(e=e.constructor)||void 0===e?void 0:e.name);null===(t=this.css)||void 0===t||t.forEach((e=>this.beans.environment.addGlobalCSS(e,i)))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const o=this[t];if(o===Tn)this[t]=null!==n&&void 0!==n?n:e;else{const e=i&&i[t];if(!this.suppressDataRefValidation&&!e)throw new Error("data-ref: ".concat(t," on ").concat(this.constructor.name," with ").concat(o))}}}createChildComponentsFromTags(e,t){(function(e){if(null==e)return[];const t=[];return Fe(e,(e=>t.push(e))),t})(e.childNodes).forEach((i=>{if(!(i instanceof HTMLElement))return;const n=this.createComponentFromElement(i,(e=>{e.getGui()&&this.copyAttributesFromNode(i,e.getGui())}),t);if(n){if(n.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);n.addItems(e)}this.swapComponentForNode(n,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}))}createComponentFromElement(e,t,i){const n=e.nodeName,o=this.getDataRefAttribute(e),s=0===n.indexOf("AG-"),r=s?this.componentSelectors.get(n):null;let a=null;if(r){const e=i&&o?i[o]:void 0;a=new r.component(e),a.setParentComponent(this),this.createBean(a,null,t)}else if(s)throw new Error("selector: ".concat(n));return this.applyElementsToComponent(e,o,i,a),a}copyAttributesFromNode(e,t){!function(e,t){if(e)for(let i=0;i<e.length;i++){const n=e[i];t(n.name,n.value)}}(e.attributes,((e,i)=>t.setAttribute(e,i)))}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t,i){const n=De(e);this.setTemplateFromElement(n,t,i)}setTemplateFromElement(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let o=0;o<t.length;o++){const e=t[o];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),Pe(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;de(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;le(this.eGui,e,{skipAriaHidden:i});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}};var Rn=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}static all(t){return t.length?new e((e=>{let i=t.length;const n=new Array(i);t.forEach(((t,o)=>{t.then((t=>{n[o]=t,i--,0===i&&e(n)}))}))})):e.resolve()}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e((e=>e(t)))}then(t){return new e((e=>{1===this.status?e(t(this.resolution)):this.waiters.push((i=>e(t(i))))}))}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){}};function Ln(e,t,i,n){const{name:o}=i;let s,r,a,l,d,c;if(t){const i=t,h=i[o+"Selector"],u=h?h(n):null,p=t=>{if("string"===typeof t)s=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?a=t:r=t}};u?(p(u.component),l=u.params,d=u.popup,c=u.popupPosition):p(i[o])}return{compName:s,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:d,popupPositionFromSelector:c}}var Pn={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},Nn={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},Fn={name:"headerComponent",optionalMethods:["refresh"]},On={name:"innerHeaderComponent"},Bn={name:"innerHeaderGroupComponent"},Gn={name:"headerGroupComponent"},zn={name:"innerRenderer",cellRenderer:!0,optionalMethods:["afterGuiAttached"]},_n={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},Vn={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"]},Hn={name:"loadingCellRenderer",cellRenderer:!0},Wn={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},jn={name:"loadingOverlayComponent",optionalMethods:["refresh"]},Un={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},Kn={name:"tooltipComponent"},Yn={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},Zn={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},Xn={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},qn={name:"loadingCellRenderer",cellRenderer:!0},Qn={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},Jn={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function $n(e,t,i){return e.getCompDetails(t,zn,void 0,i)}function eo(e,t,i){return e.getCompDetails(t,_n,void 0,i)}function to(e,t,i){return e.getCompDetails(t,Vn,void 0,i)}function io(e,t,i){return e.getCompDetails(t,Wn,"agCellEditor",i,!0)}function no(e,t,i,n){return e.getCompDetails(t,Yn,n,i,!0)}function oo(e,t,i,n){return e.getCompDetails(t,Zn,n,i)}function so(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}var ro,ao=new Set,lo={},co={},ho=!1;function uo(e){ro||(ro=e.version);const t=e=>"You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ".concat(e," Please update all modules to the same version.");if(e.version?function(e){const[t,i]=e.version.split(".")||[],[n,o]=ro.split(".")||[];return t===n&&i===o}(e)||Xe(t("'".concat(e.moduleName,"' is version ").concat(e.version," but the other modules are version ").concat(ro,"."))):Xe(t("'".concat(e.moduleName,"' is incompatible."))),e.validate){const t=e.validate();if(!t.isValid){Xe("".concat(t.message))}}}function po(e,t){var i;uo(e);const n=null!==(i=e.rowModels)&&void 0!==i?i:["all"];let o;ao.add(e),void 0!==t?(ho=!0,void 0===co[t]&&(co[t]={}),o=co[t]):o=lo,n.forEach((t=>{void 0===o[t]&&(o[t]={}),o[t][e.moduleName]=e})),e.dependsOn&&e.dependsOn.forEach((e=>po(e,t)))}function go(e,t,i){const n=i=>{var n,o;return!(null===(n=lo[i])||void 0===n||!n[e])||!(null===(o=co[t])||void 0===o||null===(o=o[i])||void 0===o||!o[e])};return n(i)||n("all")}function mo(){return ho}function vo(e,t){var i,n,o;const s=null!==(i=co[e])&&void 0!==i?i:{};return[...Object.values(null!==(n=s.all)&&void 0!==n?n:{}),...Object.values(null!==(o=s[t])&&void 0!==o?o:{})]}var fo=class{static register(e){po(e,void 0)}static registerModules(e){e.forEach((e=>po(e,void 0)))}},yo=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach((e=>{let[t,i]=e;this.beans[t]=i})),e.beanClasses.forEach((e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error("Bean ".concat(e.name," is missing beanName")),this.createdBeans.push(t)})),null===(t=e.derivedBeans)||void 0===t||t.forEach((e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)})),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("null bean");return this.initBeans([e],t),e}initBeans(e,t){e.forEach((e=>{var t,i;null===(t=e.preWireBeans)||void 0===t||t.call(e,this.beans),null===(i=e.wireBeans)||void 0===i||i.call(e,this.beans)})),e.forEach((e=>{var t;return null===(t=e.preConstruct)||void 0===t?void 0:t.call(e)})),t&&e.forEach(t),e.forEach((e=>{var t;return null===(t=e.postConstruct)||void 0===t?void 0:t.call(e)}))}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;null===e||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},bo=class extends yo{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){var e,t;super.destroy(),t=this.gridId,delete co[t],null===(e=this.destroyCallback)||void 0===e||e.call(this)}getGridId(){return this.gridId}};function Co(e,t,i,n){return _e(e)?[]:So(e.headerClass,e,t,i,n)}function xo(e,t,i,n){return _e(e)?[]:So(e.toolPanelClass,e,t,i,n)}function wo(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColAtEdge(t,"last"))}function So(e,t,i,n,o){if(_e(e))return[];let s;if("function"===typeof e){const r=function(e,t,i,n){return t.addGridCommonParams({colDef:e,column:i,columnGroup:n})}(t,i,n,o);s=e(r)}else s=e;return"string"===typeof s?[s]:Array.isArray(s)?[...s]:[]}function Mo(e,t){const i=Et(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var Do={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},ko=!1,Io=0;function Ao(e){const t=ko,i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(ko=i)}function To(e){const t=Tt(e);var i;return i=t,Io>0||(i.addEventListener("keydown",Ao),i.addEventListener("mousedown",Ao)),Io++,()=>{Io--,function(e){Io>0||(e.removeEventListener("keydown",Ao),e.removeEventListener("mousedown",Ao))}(t)}}function Eo(){return ko}function Ro(e,t,i){t.addManagedElementListeners(i,{keydown:t=>{if(!t.defaultPrevented&&t.key===Do.TAB){const n=t.shiftKey;No(e,i,!1,n)||zo(e,n)&&t.preventDefault()}}})}function Lo(e,t){let i=re;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const n=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter((e=>Me(e))),o=Array.prototype.slice.apply(e.querySelectorAll(i));if(!o.length)return n;return s=o,n.filter((e=>-1===s.indexOf(e)));var s}function Po(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Lo(e,null,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n=t?Gi(i):i[0];return!!n&&(n.focus({preventScroll:!0}),!0)}function No(e,t,i,n){const o=Lo(t,i?':not([tabindex="-1"])':null),s=Lt(e);let r;r=i?o.findIndex((e=>e.contains(s))):o.indexOf(s);const a=r+(n?-1:1);return a<0||a>=o.length?null:o[a]}function Fo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=0;for(;e&&null===ie(e)&&++i<=t;)e=e.parentElement;return null===ie(e)?null:e}function Oo(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function Bo(e){var t;return e.gos.get("suppressHeaderFocus")||!(null===(t=e.overlays)||void 0===t||!t.isExclusive())}function Go(e){var t;return e.gos.get("suppressCellFocus")||!(null===(t=e.overlays)||void 0===t||!t.isExclusive())}function zo(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.ctrlsSvc.get("gridCtrl");return!(i||!n.focusNextInnerContainer(t))||((i||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}var _o=/[&<>"']/g,Vo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ho(e,t){if(null==e)return null;const i=e.toString().toString();return t?i:i.replace(_o,(e=>Vo[e]))}var Wo=class extends Si{constructor(e,t,i,n){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=n,this.beans=t}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case Do.ENTER:this.onEnterKeyDown(e);break;case Do.F2:this.onF2KeyDown(e);break;case Do.ESCAPE:this.onEscapeKeyDown(e);break;case Do.TAB:this.onTabKeyDown(e);break;case Do.BACKSPACE:case Do.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Do.DOWN:case Do.UP:case Do.RIGHT:case Do.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){if(!this.cellCtrl.editing){var i;if(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else null===(i=this.beans.navigation)||void 0===i||i.navigateToNextCell(e,t,this.cellCtrl.cellPosition,!0);e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&(null===i||void 0===i||i.ensureCellVisible(n))}onTabKeyDown(e){var t;null===(t=this.beans.navigation)||void 0===t||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:n,rowNode:o}=this,{gos:s,rangeSvc:r,eventSvc:a}=n;if(!i.editing){var l;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e){return e===Do.DELETE||!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&e===Do.BACKSPACE&&ee()}(e,s.get("enableCellEditingOnBackspace"))){if(r&&$t(s))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:e}=i,t=this.beans.valueSvc.getDeleteValue(e,o);o.setDataValue(e,t,"cellClear")}}else null===(l=n.editSvc)||void 0===l||l.startRowOrCellEdit(i,e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this;if(t.editing||this.rowCtrl.editing)t.stopEditingAndFocus(!1,e.shiftKey);else if(i.gos.get("enterNavigatesVertically")){var n;const o=e.shiftKey?Do.UP:Do.DOWN;null===(n=i.navigation)||void 0===n||n.navigateToNextCell(null,o,t.cellPosition,!1)}else{var o;null===(o=i.editSvc)||void 0===o||o.startRowOrCellEdit(t,Do.ENTER,e),t.editing&&e.preventDefault()}}onF2KeyDown(e){const{cellCtrl:t,beans:i}=this;var n;t.editing||(null===(n=i.editSvc)||void 0===n||n.startRowOrCellEdit(t,Do.F2,e))}onEscapeKeyDown(e){const{cellCtrl:t,beans:i}=this;var n;t.editing&&(null===(n=i.editSvc)||void 0===n||n.stopRowOrCellEdit(t,!0),t.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.editing)return;const t=e.key;var i;t===Do.SPACE?this.onSpaceKeyDown(e):null!==(i=this.beans.editSvc)&&void 0!==i&&i.startRowOrCellEdit(this.cellCtrl,t,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;var i;!this.cellCtrl.editing&&wt(t)&&(null===(i=this.beans.selectionSvc)||void 0===i||i.handleSelectionEvent(e,this.rowNode,"spaceKey"));e.preventDefault()}destroy(){super.destroy()}},jo=class extends Si{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!yi(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){var t;if(null!==(t=this.beans.touchSvc)&&void 0!==t&&t.handleCellDoubleClick(this,e))return;const{eventSvc:i,rangeSvc:n,gos:o,editSvc:s}=this.beans,r=e.ctrlKey||e.metaKey;n&&r&&n.getCellRangeCount(this.cellCtrl.cellPosition)>1&&n.intersectLastRange(!0);const a=this.cellCtrl.createEvent(e,"cellClicked");i.dispatchEvent(a);const l=this.column.getColDef();l.onCellClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{l.onCellClicked(a)}))}),0);!((o.get("singleClickEdit")||l.singleClickEdit)&&!o.get("suppressClickEdit"))||e.shiftKey&&0!=(null===n||void 0===n?void 0:n.getCellRanges().length)||null===s||void 0===s||s.startRowOrCellEdit(this.cellCtrl)}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:n}=this,{eventSvc:o,frameworkOverrides:s,gos:r,editSvc:a}=i,l=t.getColDef(),d=n.createEvent(e,"cellDoubleClicked");o.dispatchEvent(d),"function"===typeof l.onCellDoubleClicked&&window.setTimeout((()=>{s.wrapOutgoing((()=>{l.onCellDoubleClicked(d)}))}),0);!r.get("singleClickEdit")&&!r.get("suppressClickEdit")&&(null===a||void 0===a||a.startRowOrCellEdit(n,null,e))}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:n}=e,o=e.target,{cellCtrl:s,beans:r}=this,{eventSvc:a,rangeSvc:l,focusSvc:d,gos:c}=r;if(this.isRightClickInExistingRange(e))return;const h=l&&!l.isEmpty(),u=this.containsWidget(o),{cellPosition:p}=s;if(!n||!h){const t=c.get("enableCellTextSelection")&&e.defaultPrevented,i=(Q()||t)&&!s.editing&&!ae(o)&&!u;s.focusCell(i)}if(n&&h&&!d.isCellFocused(p)){e.preventDefault();const t=d.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:n}=t,o=r.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:n}),s=null===o||void 0===o?void 0:o.getCellCtrl(e);null!==s&&void 0!==s&&s.editing&&s.stopEditing(),d.setFocusedCell({column:e,rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!u){if(l)if(n)l.extendLatestRangeToCell(p);else{const e=t||i;l.setRangeToCell(p,e)}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return he(e,"ag-selection-checkbox",3)||he(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),null===i||void 0===i||i.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),null===i||void 0===i||i.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const{eGui:t}=this.cellCtrl,i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){super.destroy()}},Uo=class extends Si{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();zi(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width="".concat(e,"px")}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),n=[];if(1===i)n.push(e);else{let t=e;const o=e.getPinned();for(let e=0;t&&e<i&&(n.push(t),t=this.beans.visibleCols.getColAfter(t),t&&!_e(t))&&o===t.getPinned();e++);}return n}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?Gi(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if("right"===this.column.getPinned()){return i+t.bodyWidth+(e||0)}return i+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=Dt(this.beans)*this.rowSpan;this.eGui.style.height="".concat(t,"px"),this.eGui.style.zIndex="1"}destroy(){super.destroy()}},Ko="cellCtrl";function Yo(e,t){return Ci(e,t,Ko)}var Zo=0,Xo=class extends Si{constructor(e,t,i,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.tooltipFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.beans=i,this.instanceId=e.getId()+"-"+Zo++,this.colIdSanitised=Ho(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusSvc.clearRestoreFocus()}addFeatures(){var e;const{beans:t}=this;this.positionFeature=new Uo(this,t),this.customStyleFeature=null===(e=t.cellStyles)||void 0===e?void 0:e.createCellCustomStyleFeature(this,t),this.mouseListener=new jo(this,t,this.column),this.keyboardListener=new Wo(this,t,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();const{rangeSvc:i}=t;i&&$t(t.gos)&&(this.rangeFeature=i.createCellRangeFeature(t,this))}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,i,n,o,s){var r,a,l,d,c,h;(this.comp=e,this.eGui=t,this.printLayout=n,null!==(r=s)&&void 0!==r||(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc((()=>this.removeFeatures())),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),null===(a=this.positionFeature)||void 0===a||a.setComp(t),null===(l=this.customStyleFeature)||void 0===l||l.setComp(e),null===(d=this.tooltipFeature)||void 0===d||d.refreshTooltip(),null===(c=this.keyboardListener)||void 0===c||c.setComp(this.eGui),this.rangeFeature&&this.rangeFeature.setComp(e,t),o&&this.isCellEditable())?null===(h=this.beans.editSvc)||void 0===h||h.startEditing(this):this.showValue();this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach((e=>e())),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){var i;this.isAutoHeight=this.column.isAutoHeight(),this.isAutoHeight&&e&&(null===(i=this.beans.rowAutoHeight)||void 0===i||i.setupCellAutoHeight(this,e,t))}getCellAriaRole(){var e;return null!==(e=this.column.getColDef().cellAriaRole)&&void 0!==e?e:"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){var e;return null!==(e=this.valueFormatted)&&void 0!==e?e:this.value}showValue(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{beans:i,column:n,rowNode:o,rangeFeature:s}=this,{userCompFactory:r}=i,a=this.getValueToDisplay();let l;if(o.stub&&null==(null===(e=o.groupData)||void 0===e?void 0:e[n.getId()])){const e=this.createCellRendererParams();l=function(e,t,i){return e.getCompDetails(t,Hn,"agSkeletonCellRenderer",i,!0)}(r,n.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();l=eo(r,n.getColDef(),e)}this.comp.setRenderDetails(l,a,t),s&&Mo(i,(()=>null===s||void 0===s?void 0:s.refreshHandle()))}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned)&&("function"===typeof e||!0===e)}isCheckboxSelection(e){const{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||dn(this.column)&&t&&"string"!==typeof t&&Yt(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return t||i||n||o}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==(e=null===(t=this.beans.editSvc)||void 0===t?void 0:t.stopEditing(this,i))&&void 0!==e&&e}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:n,comp:o,eGui:s,beans:{valueSvc:r,gos:a}}=this;return a.addGridCommonParams({value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(i,n),setValue:e=>r.setValue(n,i,e),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:s,eParentOfValue:o.getParentOfValue(),registerRowDragger:(e,t,i,n)=>this.registerRowDragger(e,t,n),setTooltip:(e,t)=>{var i;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),null===(i=this.tooltipFeature)||void 0===i||i.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?null===(t=this.rowCtrl)||void 0===t||t.recreateCell(this):this.refreshCell(e)}refreshCell(e){var t,i;if(this.suppressRefreshCell||this.editing)return;const n=this.column.getColDef(),o=null!=e&&!!e.newData,s=null!=e&&!!e.suppressFlash,r=null==n.field&&null==n.valueGetter&&null==n.showRowGroup,a=e&&e.forceRefresh||r||o,l=!!this.comp,d=this.updateAndFormatValue(l);if(l){if(a||d){var c,h,u;this.showValue(o);const e=null===(c=this.beans.filterManager)||void 0===c?void 0:c.isSuppressFlashingCellsBecauseFiltering();var p;if(!s&&!e&&n.enableCellChangeFlash)null===(p=this.beans.cellFlashSvc)||void 0===p||p.flashCell(this);null===(h=this.customStyleFeature)||void 0===h||h.applyUserStyles(),null===(u=this.customStyleFeature)||void 0===u||u.applyClassesFromColDef()}null===(t=this.tooltipFeature)||void 0===t||t.refreshTooltip(),null===(i=this.customStyleFeature)||void 0===i||i.applyCellClassRules()}}stopEditingAndFocus(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=this.beans.editSvc)||void 0===e||e.stopEditingAndFocus(this,t,i)}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){var t;return null!==(t=this.callValueFormatter(e))&&void 0!==t?t:e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted;return this.value=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const t=this.eGui;At(this.beans.gos,t,Ko,this),e.addDestroyFunc((()=>At(this.beans.gos,t,Ko,null)))}createEvent(e,t){const{rowNode:i,column:n,value:o}=this;return this.beans.gos.addGridCommonParams({type:t,node:i,data:i.data,value:o,column:n,colDef:n.getColDef(),rowPinned:i.rowPinned,event:e,rowIndex:i.rowIndex})}processCharacter(e){var t;null===(t=this.keyboardListener)||void 0===t||t.processCharacter(e)}onKeyDown(e){var t;null===(t=this.keyboardListener)||void 0===t||t.onKeyDown(e)}onMouseEvent(e,t){var i;null===(i=this.mouseListener)||void 0===i||i.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature.getColSpanningList()}onLeftChanged(){var e;this.comp&&(null===(e=this.positionFeature)||void 0===e||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;wo(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);W(this.eGui,e)}onWidthChanged(){var e;return null===(e=this.positionFeature)||void 0===e?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.beans.focusSvc.setFocusedCell({rowIndex:this.cellPosition.rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){var e;this.createCellPosition(),this.onCellFocused(),null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged()}onSuppressCellFocusChanged(e){this.eGui&&Ne(this.eGui,"tabindex",e?void 0:-1)}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}onCellFocused(e){const{beans:t}=this;if(Go(t))return;const i=t.focusSvc.isCellFocused(this.cellPosition);if(!this.comp)return void(i&&null!==e&&void 0!==e&&e.forceBrowserFocus&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.comp.addOrRemoveCssClass("ag-cell-focus",i),i&&e&&e.forceBrowserFocus){let t=this.comp.getFocusableElement();if(this.editing){const e=Lo(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const n="fullRow"===t.gos.get("editType");var o;i||n||!this.editing||(null===(o=t.editSvc)||void 0===o||o.stopRowOrCellEdit(this));i&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Ge(t),column:this.column}}setInlineEditingCss(){var e;null===(e=this.beans.editSvc)||void 0===e||e.setInlineEditingCss(this.rowCtrl)}applyStaticCssClasses(){const{comp:e}=this;e.addOrRemoveCssClass("ag-cell",!0),e.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();e.addOrRemoveCssClass("ag-cell-auto-height",t),e.addOrRemoveCssClass("ag-cell-normal-height",!t)}onColumnHover(){var e;null===(e=this.beans.colHover)||void 0===e||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?null===(e=this.beans.editSvc)||void 0===e||e.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.comp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout((()=>{n.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(i)}))}),0)}getCellRenderer(){var e,t;return null!==(e=null===(t=this.comp)||void 0===t?void 0:t.getCellRenderer())&&void 0!==e?e:null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){var e;const t=null===(e=this.beans.selectionSvc)||void 0===e?void 0:e.createCheckboxSelectionComponent();if(t)return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const n=this.createRowDragComp(e,t,i);n&&(this.customRowDragComp=n,this.addDestroyFunc((()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null})))}createRowDragComp(e,t,i){var n;const o=null===(n=this.beans.rowDragSvc)||void 0===n?void 0:n.createRowDragCompForCell(this.rowNode,this.column,(()=>this.value),e,t,i);if(o)return this.beans.context.createBean(o),o}cellEditorAttached(){this.onEditorAttachedFuncs.forEach((e=>e())),this.onEditorAttachedFuncs=[]}},qo="__ag_grid_instance";function Qo(e,t){t[qo]=e.gridInstanceId}function Jo(e,t){return $o(e,t.target)}function $o(e,t){let i=t;for(;i;){const t=i[qo];if(ze(t)){return t===e.gridInstanceId}i=i.parentElement}return!1}function es(e,t){var i,n;return null!==(i=null===(n=Yo(e,t.target))||void 0===n?void 0:n.cellPosition)&&void 0!==i?i:null}function ts(e,t){const i=xt(e.gos,"normal"),n=t;let o,s;if(null!=n.clientX||null!=n.clientY?(o=n.clientX,s=n.clientY):(o=n.x,s=n.y),i){const t=e.ctrlsSvc.getScrollFeature(),i=t.getVScrollPosition();o+=t.getHScrollPosition().left,s+=i.top}return{x:o,y:s}}var is=(e=>(e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",e))(is||{}),ns=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<i.left+n,this.tickRight=e.clientX>i.right-n,this.tickUp=e.clientY<i.top+n&&!t,this.tickDown=e.clientY>i.bottom-n&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};function os(e){const{rowIndex:t,rowPinned:i,column:n}=e;return"".concat(t,".").concat(null==i?"null":i,".").concat(n.getId())}function ss(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return i&&n&&o}function rs(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(ze(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}function as(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)}function ls(e,t){var i,n;switch(t.rowPinned){case"top":return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRow(t.rowIndex);case"bottom":return null===(n=e.pinnedRowModel)||void 0===n?void 0:n.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function ds(e,t){const i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}var cs=class extends Si{constructor(e){super(),this.eContainer=e}postConstruct(){const{rowModel:e,gos:t,ctrlsSvc:i}=this.beans;bt(t)&&(this.clientSideRowModel=e),i.whenReady(this,(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new ns({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:()=>t.scrollFeature.getVScrollPosition().top,setVerticalPosition:e=>t.scrollFeature.setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})}))}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var e;const{rowGroupColsSvc:t,filterManager:i,sortSvc:n}=this.beans;if((null!==(e=null===t||void 0===t?void 0:t.columns)&&void 0!==e?e:[]).length)return!0;if(null===i||void 0===i?void 0:i.isAnyFilterPresent())return!0;return!!(null===n||void 0===n?void 0:n.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){var i,n;const e=[...null!==(i=null===(n=this.beans.selectionSvc)||void 0===n?void 0:n.getSelectedNodes())&&void 0!==i?i:[]].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach((e=>{this.setRowNodeDragging(e,!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=ts(this.beans,e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const{dragAndDrop:i,gos:n}=this.beans,o=this.isFromThisGrid(e),s=n.get("rowDragManaged"),r=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(n.get("suppressMoveWhenRowDragging")||!o?i.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(r[0],t):this.moveRows(r,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(Gi(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel,i=t.getLastHighlightedRowNode(),n=i&&"Below"===i.highlighted,o=ts(this.beans,e).y,s=e.dragItem.rowNodes;let r=n?1:0;if(this.isFromThisGrid(e))s.forEach((e=>{e.rowTop<o&&(r-=1)})),this.moveRows(s,o,r);else{const e=jt(this.gos);let i=t.getRowIndexAtPixel(o)+1;"Above"===t.getHighlightPosition(o)&&i--,t.updateRowData({add:s.filter((i=>{var n;return!t.getRowNode(null!==(n=null===e||void 0===e?void 0:e({data:i.data,level:0,rowPinned:i.rowPinned}))&&void 0!==n?n:i.data.id)})).map((e=>e.data)),addIndex:i})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.beans.focusSvc,o=n.getFocusedCell(),s=o&&ds(this.beans,o);this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(s?s.focusCell():n.clearFocusedCell())}addRowDropZone(e){if(!e.getContainer())return void pt(55);const t=this.beans.dragAndDrop;if(t.findExternalZone(e))return void pt(56);let i={getContainer:e.getContainer};e.fromGrid?i=e:(e.onDragEnter&&(i.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(i.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(i.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(i.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}),e.onDragCancel&&(i.onDragCancel=t=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}));const n=l({isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0},i);t.addDropTarget(n),this.addDestroyFunc((()=>t.removeDropTarget(n)))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),o=this.onDragging.bind(this),s=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let a;return a=e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{n(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:n,onDragging:e.onDragging?t=>{o(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:o,onDragStop:e.onDragStop?t=>{s(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:s,onDragCancel:e.onDragCancel?t=>{r(t),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:o,onDragStop:s,onDragCancel:r,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.beans,{pageBounds:n,rowModel:o,gos:s}=i,r=ts(i,t).y;let a,l=-1;r>n.getCurrentPageHeight()||(l=o.getRowIndexAtPixel(r),a=o.getRow(l));return s.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:l,overNode:a,y:r,vDirection:t.vDirection})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach((e=>{this.setRowNodeDragging(e,!1)}))}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}};function hs(e,t,i){if(0===i)return!1;const n=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(n,o)<=i}function us(e,t){return e+"_"+t}function ps(e){return e instanceof gs}var gs=class extends Si{constructor(e,t,i,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return us(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((e=>{ps(e)&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=Gi(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){var e;let t=0;return null===(e=this.displayedChildren)||void 0===e||e.forEach((e=>{t+=e.getActualWidth()})),t}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!(null===(e=this.getColGroupDef())||void 0===e||!e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach((t=>{Ri(t)?e.push(t):ps(t)&&t.addDisplayedLeafColumns(e)}))}addLeafColumns(e){this.children.forEach((t=>{Ri(t)?e.push(t):ps(t)&&t.addLeafColumns(e)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach((t=>{if(ps(t)&&(!t.displayedChildren||!t.displayedChildren.length))return;switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}})),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},ms="row-group-",vs=0,fs=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=vs++,this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var i,n,o;const s=this.data;this.data=e,null===(i=this.beans.valueCache)||void 0===i||i.onDataChanged(),this.updateDataOnDetailNode(),null===(n=this.beans.selectionSvc)||void 0===n||n.updateRowSelectable(this),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,t);null===(o=this.__localEventService)||void 0===o||o.dispatchEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(gt(13),null):"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var i,n;const{selectionSvc:o}=this.beans,s=null===o||void 0===o||null===(i=o.createDaemonNode)||void 0===i?void 0:i.call(o,this),r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),o&&(o.updateRowSelectable(this),o.syncInRowNode(this,s));const a=this.createDataChangedEvent(e,r,!1);null===(n=this.__localEventService)||void 0===n||n.dispatchEvent(a)}setId(e){const t=jt(this.beans.gos);if(t)if(this.data){var i,n;const e=null!==(i=null===(n=this.parent)||void 0===n?void 0:n.getRoute())&&void 0!==i?i:[];this.id=t({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(ms)&&gt(14,{groupPrefix:ms})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){var n;null===(n=this.beans.expansionSvc)||void 0===n||n.setExpanded(this,e,t,i)}setDataValue(e,t,i){var n;const{colModel:o,valueSvc:s,gos:r,selectionSvc:a}=this.beans,l="string"!==typeof e?e:null!==(n=o.getCol(e))&&void 0!==n?n:o.getColDefCol(e);if(!l)return!1;const d=s.getValueForDisplay(l,this);if(r.get("readOnlyEdit")){const{beans:{eventSvc:e},data:n,rowIndex:o,rowPinned:s}=this;return e.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:o,rowPinned:s,column:l,colDef:l.colDef,data:n,node:this,oldValue:d,newValue:t,value:t,source:i}),!1}const c=s.setValue(this,l,t,i);return this.dispatchCellChangedEvent(l,t,d),null===a||void 0===a||a.updateRowSelectable(this),c}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){var n;const o={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};null===(n=this.__localEventService)||void 0===n||n.dispatchEvent(o)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e,t;return null!==(e=null===(t=this.beans.expansionSvc)||void 0===t?void 0:t.isExpandable(this))&&void 0!==e&&e}isSelected(){return this.footer?this.sibling.isSelected():this.__selected}depthFirstSearch(e){var t;null===(t=this.childrenAfterGroup)||void 0===t||t.forEach((t=>t.depthFirstSearch(e))),e(this)}dispatchRowEvent(e){var t;null===(t=this.__localEventService)||void 0===t||t.dispatchEvent({type:e,node:this})}setSelected(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";null===(t=this.beans.selectionSvc)||void 0===t||t.setNodesSelected({nodes:[this],newValue:e,clearSelection:i,source:n})}isRowPinned(){return!!this.rowPinned}addEventListener(e,t){var i,n,o,s,r;null===(i=this.beans.validation)||void 0===i||i.checkRowEvents(e),this.__localEventService||(this.__localEventService=new C),this.frameworkEventListenerService=null===(n=(o=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===n?void 0:n.call(o,this.frameworkEventListenerService,this.__localEventService);const a=null!==(s=null===(r=this.frameworkEventListenerService)||void 0===r?void 0:r.wrap(t))&&void 0!==s?s:t;this.__localEventService.addEventListener(e,a)}removeEventListener(e,t){var i,n;if(!this.__localEventService)return;const o=null!==(i=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.unwrap(t))&&void 0!==i?i:t;this.__localEventService.removeEventListener(e,o),this.__localEventService.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(pt(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}};function ys(e,t,i){return t.addGridCommonParams({type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var bs=class extends En{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e,t;return null!==(e=null===(t=this.filterWrapper)||void 0===t?void 0:t.filterPromise)&&void 0!==e?e:null}afterInit(){var e,t;return null!==(e=null===(t=this.filterWrapper)||void 0===t||null===(t=t.filterPromise)||void 0===t?void 0:t.then((()=>{})))&&void 0!==e?e:Rn.resolve()}afterGuiAttached(e){var t;null===(t=this.filterWrapper)||void 0===t||null===(t=t.filterPromise)||void 0===t||t.then((t=>{var i;null===t||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e)}))}afterGuiDetached(){var e;null===(e=this.filterWrapper)||void 0===e||null===(e=e.filterPromise)||void 0===e||e.then((e=>{var t;null===e||void 0===e||null===(t=e.afterGuiDetached)||void 0===t||t.call(e)}))}createFilter(e){var t,i,n;const{column:o,source:s}=this;this.filterWrapper=null!==(t=null===(i=this.beans.filterManager)||void 0===i?void 0:i.getOrCreateFilterWrapper(o))&&void 0!==t?t:null,null!==(n=this.filterWrapper)&&void 0!==n&&n.filterPromise&&this.filterWrapper.filterPromise.then((t=>{const i=t.getGui();ze(i)||pt(69,{guiFromFilter:i}),this.appendChild(i),e&&this.eventSvc.dispatchEvent({type:"filterOpened",column:o,source:s,eGui:this.getGui()})}))}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.beans.colModel.getColDefCol(this.column)||(xe(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},Cs="ag-resizer-wrapper",xs=(e,t)=>'<div data-ref="'.concat(e,'Resizer" class="ag-resizer ag-resizer-').concat(t,'"></div>'),ws='<div class="'.concat(Cs,'">\n        ').concat(xs("eTopLeft","topLeft"),"\n        ").concat(xs("eTop","top"),"\n        ").concat(xs("eTopRight","topRight"),"\n        ").concat(xs("eRight","right"),"\n        ").concat(xs("eBottomRight","bottomRight"),"\n        ").concat(xs("eBottom","bottom"),"\n        ").concat(xs("eBottomLeft","bottomLeft"),"\n        ").concat(xs("eLeft","left"),"\n    </div>"),Ss=class extends Si{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:o,height:s,x:r,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,d=0;const c=Me(this.element);if(c){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;d=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;l=parseInt(t.minHeight,10)-i}}if(this.minHeight=o||l,this.minWidth=i||d,n&&this.setWidth(n),s&&this.setHeight(s),n&&s||this.refreshSize(),e)this.center();else if(r||a)this.offsetElement(r,a);else if(c&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const i=parseFloat(e.style.top),n=parseFloat(e.style.left);t?this.offsetElement(isNaN(n)?0:n,isNaN(i)?0:i):this.setPosition(n,i)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};var n,o;e?(null===(n=this.dragSvc)||void 0===n||n.addDragSource(i),this.moveElementDragListener=i):(null===(o=this.dragSvc)||void 0===o||o.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const i=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};if(i||!this.isAlive()&&!i){var s;if(i)null===(s=this.dragSvc)||void 0===s||s.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all";else n.style.pointerEvents="none";this.resizable[t]=i}}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width="".concat(t,"px")),-1!==e&&(this.element.style.height="".concat(e,"px"))}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if("string"===typeof e&&-1!==e.indexOf("%"))Re(i,e),e=me(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Re(i,e):(i.style.height="".concat(e,"px"),i.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:n.top,r=e?0:o.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-n.bottom}}return i+r-s-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if("string"===typeof e&&-1!==e.indexOf("%"))Ee(t,e),e=ve(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+n>t&&(e=t-n)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Ee(t,e):(t.style.width="".concat(e,"px"),t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:parseFloat(e)))}offsetElement(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{forcePopupParentAsOffsetParent:n}=this.config,o=n?this.boundaryEl:this.element;o&&(null===(e=this.popupSvc)||void 0===e||e.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:i})}),this.setPosition(parseFloat(o.style.left),parseFloat(o.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height","".concat(e,"px"))};var i;e&&this.popupSvc?this.resizeObserverSubscriber=Be(this.beans,null===(i=this.popupSvc)||void 0===i?void 0:i.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:o,topBuffer:s}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!o,r)?0:r,movementY:this.shouldSkipY(t,!!n,s,a)?0:a}}shouldSkipX(e,t,i,n){const o=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:o.left;let l=a<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=r.right;return!!l||(l=t?n<0&&e.clientX>a+s.left||n>0&&e.clientX<a+s.left:i?n<0&&e.clientX>r.right||n>0&&e.clientX<a+s.left:n<0&&e.clientX>r.right||n>0&&e.clientX<r.right,l)}shouldSkipY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const o=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:o.top;let l=a<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=r.bottom;return!!l||(l=t?n<0&&e.clientY>a+s.top+i||n>0&&e.clientY<a+s.top:n<0&&e.clientY>r.bottom||n>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(ws,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(".".concat(Cs));e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;i||n||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const o=e[n],s=!!o.style.flex&&"0 0 auto"!==o.style.flex;if(o===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(s){const e=window.getComputedStyle(o);e.minHeight&&(r=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else r=o.offsetHeight,a=o.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const o=i[n];o!==t&&(e?o.style.height="".concat(o.offsetHeight,"px"):o.style.width="".concat(o.offsetWidth,"px"),o.style.flex="0 0 auto",o===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:o,isBottom:s,isLeft:r}=this.currentResizer,a=o||r,l=s||n,{movementX:d,movementY:c}=this.calculateMouseMovement({e:e,isLeft:r,isTop:n}),h=this.position.x,u=this.position.y;let p=0,g=0;if(a&&d){const e=r?-1:1,t=this.getWidth(),i=t+d*e;let n=!1;r&&(p=t-i,(h+p<=0||i<=this.minWidth)&&(n=!0,p=0)),n||this.setWidth(i)}if(l&&c){const e=n?-1:1,t=this.getHeight(),i=t+c*e;let o=!1;n?(g=t-i,(u+g<=0||i<=this.minHeight)&&(o=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(o=!0),o||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(h+p,u+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:o,movementY:s}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+o,i+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){var e;const t=this.resizeListeners.pop();null===(e=this.dragSvc)||void 0===e||e.removeDragSource(t)}}destroy(){var e;(super.destroy(),this.moveElementDragListener)&&(null===(e=this.dragSvc)||void 0===e||e.removeDragSource(this.moveElementDragListener));this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Ms="ag-focus-managed",Ds=class extends Si{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.eFocusable=e,this.callbacks=t,this.callbacks=l({shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=No(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())}},t)}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add(Ms),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||yi(e))return;const{callbacks:t}=this;t.shouldStopEventPropagation(e)?fi(e):e.key===Do.TAB?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}},ks={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function Is(e,t){const{debounceMs:i}=e;return As(e)?(null!=i&&pt(71),0):null!==i&&void 0!==i?i:t}function As(e){var t,i;return(null!==(t=null===(i=e.buttons)||void 0===i?void 0:i.indexOf("apply"))&&void 0!==t?t:-1)>=0}var Ts=class extends En{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Tn,this.buttonListeners=[],this.defaultDebounceMs=0}postConstruct(){this.resetTemplate(),this.createManagedBean(new Ds(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Ss(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){var t;let i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);const n='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'.concat(this.getCssIdentifier(),'-body-wrapper" data-ref="eFilterBody">\n                    ').concat(this.createBodyTemplate(),"\n                </div>\n            </form>");this.setTemplate(n,this.getAgComponents(),e),i=this.getGui(),null===(t=i)||void 0===t||t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.params.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then((()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}setParams(e){this.params=e,this.applyActive=As(e),this.resetButtonsPanel(e)}updateParams(e){this.params=e,this.applyActive=As(e),this.resetUiToActiveModel(this.getModel(),(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}resetButtonsPanel(e,t){const{buttons:i,readOnly:n}=null!==t&&void 0!==t?t:{},{buttons:o,readOnly:s}=e;if(n===s&&He(i,o))return;const r=o&&o.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(xe(this.eButtonsPanel),this.buttonListeners.forEach((e=>e())),this.buttonListeners=[]):r&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!r)return void(this.eButtonsPanel&&we(this.eButtonsPanel));const a=document.createDocumentFragment(),l=e=>{let t;const i=e?this.translate("".concat(e,"Filter")):void 0;switch(e){case"apply":t=e=>this.onBtApply(!1,!1,e);break;case"clear":t=()=>this.onBtClear();break;case"reset":t=()=>this.onBtReset();break;case"cancel":t=e=>{this.onBtCancel(e)};break;default:return void pt(75)}const n=De('<button\n                    type="'.concat("apply"===e?"submit":"button",'"\n                    data-ref="').concat(e,'FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >').concat(i,"\n                </button>"));this.buttonListeners.push(...this.addManagedElementListeners(n,{click:t})),a.append(n)};o.forEach((e=>l(e))),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}setupOnBtApplyDebounce(){const e=Is(this.params,this.defaultDebounceMs),t=$e(this,this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){var e;return null!==(e=this.appliedModel)&&void 0!==e?e:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then((()=>{this.updateUiVisibility(),this.applyModel("api")}))}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),(()=>{this.handleCancelEnd(e)}))}handleCancelEnd(e){this.params.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),null===t||void 0===t||t()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then((()=>this.onUiChanged()))}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(){const e=this.getModelFromUi();if(!this.isModelValid(e))return!1;const t=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(t,e)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const i="columnFilter";this.params.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:i})}const{closeOnApply:n}=this.params;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let n;"Enter"!==i&&"Space"!==i||(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.updateUiVisibility(),this.params.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.queryForHtmlElement('[data-ref="applyFilterButton"]');t&&ce(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(null===e||void 0===e?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;if(!t||"toolPanel"===e)return;"floatingFilter"===e||"columnFilter"===e?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){var e;this.checkApplyDebounce(),null===(e=this.positionableFeature)||void 0===e||e.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.params;return this.params=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.getLocaleTextFunc()(e,ks[e])}getCellValue(e){return this.params.getValue(e)}getPositionableElement(){return this.eFilterBody}};function Es(e,t,i){if(null==t)return null;let n=null;const{compName:o,jsComp:s,fwComp:r}=function(e,t){return Ln(e,t,Yn)}(e,t);if(o){n={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[o]}else{null==s&&null==r&&!0===t.filter&&(n=i())}return n}var Rs={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},Ls=class extends Si{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?Rs.AUTO_HEIGHT:t.print?Rs.PRINT:Rs.NORMAL;this.view.updateLayoutClasses(i,t)}},Ps="Viewport",Ns="fakeVScrollComp",Fs=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],Os=class extends Si{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.scrollTimer=0,this.needsRefreshedScrollPosition=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=$e(this,(()=>this.lastScrollSource[1]=null),500),this.resetLastVScrollDebounced=$e(this,(()=>this.lastScrollSource[0]=null),500)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.requireUpdatedScrollPosition.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}requireUpdatedScrollPosition(){this.needsRefreshedScrollPosition=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Ps)});for(const e of Fs){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?$e(this,this.onVScroll.bind(this,Ps),100):this.onVScroll.bind(this,Ps),n=t?$e(this,this.onVScroll.bind(this,Ns),100):this.onVScroll.bind(this,Ns);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Fs,Ps]){if(this.lastScrollSource[1]===t)continue;Ce(this.getViewportForSource(t),e,this.enableRtl)}}getViewportForSource(e){return e===Ps?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const n=be(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(t=e===Ps?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:i}=this;null===i||void 0===i||i.setScrollTop(t),this.nextScrollTop=t,e===Ps?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,!i||this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():i.schedule(),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout((()=>{this.scrollTimer=0,this.eventSvc.dispatchEvent(l(l({},t),{},{type:"bodyScrollEnd"}))}),100)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!te())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=pe(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl&&ye()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll(Ps)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl&&ye()?e>0?0:i:Math.min(Math.max(e,0),i)),Ce(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.needsRefreshedScrollPosition){const{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.needsRefreshedScrollPosition=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{rowModel:i}=this.beans,n=i.getRowCount();let o=-1;for(let s=0;s<n;s++){const t=i.getRow(s);if("function"===typeof e){if(t&&e(t)){o=s;break}}else if(e===t||e===t.data){o=s;break}}o>=0&&this.ensureIndexVisible(o,t)}ensureIndexVisible(e,t){if(xt(this.gos,"print"))return;const{rowModel:i}=this.beans,n=i.getRowCount();if("number"!==typeof e||e<0||e>=n)return void pt(88,{index:e});const o=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel"),{frameworkOverrides:s,pagination:r,pageBounds:a,rowContainerHeight:l,rowRenderer:d}=this.beans;s.wrapIncoming((()=>{var n;o||null===r||void 0===r||r.goToPageWithIndex(e);const s=this.ctrlsSvc.getGridBodyCtrl(),c=s.stickyTopHeight,h=s.stickyBottomHeight,u=i.getRow(e);let p;do{const e=u.rowTop,i=u.rowHeight,n=a.getPixelOffset(),o=u.rowTop-n,s=o+u.rowHeight,r=this.getVScrollPosition(),g=l.divStretchOffset,m=r.top+g,v=r.bottom+g,f=v-m,y=l.getScrollPositionForPixel(o),b=l.getScrollPositionForPixel(s-f),C=Math.min((y+b)/2,o);let x=null;"top"===t?x=y:"bottom"===t?x=b:"middle"===t?x=C:m+c>o?x=y-c:v-h<s&&(x=b+h),null!==x&&(this.setVerticalScrollPosition(x),d.redraw({afterScroll:!0})),p=e!==u.rowTop||i!==u.rowHeight}while(p);null===(n=this.animationFrameSvc)||void 0===n||n.flushAllFrames()}))}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const{colModel:i,frameworkOverrides:n}=this.beans,o=i.getCol(e);if(!o)return;if(o.isPinned())return;if(!this.visibleCols.isColDisplayed(o))return;const s=this.getPositionedHorizontalScroll(o,t);n.wrapIncoming((()=>{var e;null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),null===(e=this.animationFrameSvc)||void 0===e||e.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:n)||o,l=r?n:i;"auto"!==t&&(a="start"===t,l="end"===t);const d="middle"===t;if(a||l||d){const{colLeft:t,colMiddle:i,colRight:n}=this.getColumnBounds(e);return d?i-s/2:a?r?n:t:r?t-s:n-s}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:o}=this.getColumnBounds(e),s=this.enableRtl;return{columnBeforeStart:s?t>o:i<o,columnAfterEnd:s?i<n:t>n}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,n=e.getActualWidth(),o=e.getLeft(),s=t?-1:1,r=t?i-o:o;return{colLeft:r,colMiddle:r+n/2*s,colRight:r+n*s}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},Bs=class extends Si{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=xt(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,n=t.bodyWidth,o=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let r;if(e)r=n+o+s;else if(r=n,this.addSpacer){0===(this.gos.get("enableRtl")?o:s)&&i.verticalScrollShowing&&(r+=i.getScrollbarWidth())}this.callback(r)}},Gs=class extends Si{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,n=()=>{Mo(e,(()=>{this.onCenterViewportResized()}))};t.registerViewportResizeListener(n),i.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;null===e||void 0===e||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,null===t||void 0===t||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=pe(this.gridBodyCtrl.eBodyViewport);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function zs(e,t,i,n,o,s){if(null==i&&null==t)return;const r={},a={},l=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(i){const t=Object.keys(i);for(let o=0;o<t.length;o++){const s=t[o],d=i[s];let c;"string"===typeof d?c=!e||e.evaluate(d,n):"function"===typeof d&&(c=d(n)),l(s,(e=>{c?r[e]=!0:a[e]=!0}))}}t&&s&&Object.keys(t).forEach((e=>l(e,(e=>{r[e]||(a[e]=!0)})))),s&&Object.keys(a).forEach(s),Object.keys(r).forEach(o)}function _s(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var Vs=0,Hs="renderedRow",Ws=class extends Si{constructor(e,t,i,n,o){var s,r;super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=o,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=null!==(s=null===(r=t.pagination)||void 0===r?void 0:r.getCurrentPage())&&void 0!==s?s:0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Vs++,this.rowId=Ho(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=_s(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Ho(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,n){const o={rowComp:e,element:t,containerType:i,compBean:n=kn(this,this.beans.context,n)};this.allRowGuis.push(o),this.updateGui(i,o),this.initialiseRowComp(o),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(e){var t;const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),null===(t=this.beans.rowAutoHeight)||void 0===t||t.checkAutoHeights(this.rowNode),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),wt(i)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach((e=>n.addOrRemoveCssClass(e,!0))),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&O(e.element,1==this.rowNode.expanded),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),At(i,e.element,Hs,this),e.compBean.addDestroyFunc((()=>At(i,e.element,Hs,null))),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask((()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=Ho(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(Je((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(Je((()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var t;const i=null===(t=this.beans.rowDragSvc)||void 0===t?void 0:t.createRowDragCompForRow(this.rowNode,e.element);if(!i)return;const n=this.createBean(i,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc((()=>{this.rowDragComps=this.rowDragComps.filter((e=>e!==n)),this.destroyBean(n,this.beans.context)}))}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){var e;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>{var t;return null===e||void 0===e||null===(t=e.rowComp)||void 0===t?void 0:t.getFullWidthCellRenderer()})):[null===(e=this.fullWidthGui)||void 0===e||null===(e=e.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:n}}=this,o=!!e||!n.isPinningLeft(),s=!!t,r=!!i||!n.isPinningRight();return o&&s&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.colModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&Wt(this.gos,n);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":o?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;!i||e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(i.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n={list:[],map:{}},o=(e,t)=>{n.list.push(t),n.map[e]=t};return t.forEach((t=>{const i=t.getInstanceId();let n=e.map[i];n||(n=new Xo(t,this.rowNode,this.beans,this)),o(i,n)})),e.list.forEach((e=>{const t=e.column.getInstanceId();if(null!=n.map[t])return;this.isCellEligibleToBeRemoved(e,i)?e.destroy():o(t,e)})),n}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const o=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0,{column:n}=e;if(n.getPinned()!=t)return i;const{editing:o,cellPosition:s}=e,{focusSvc:r,visibleCols:a}=this.beans,l=r.isCellFocused(s);if(o||l){return!(a.allCols.indexOf(n)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||xt(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],(()=>{e.rowComp.setDomOrder(this.getDomOrder())}))}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=ze(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,n=i.isPinningLeft(),o=i.isPinningRight();if(t){const{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}else{const{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),n=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&i&&n&&o}addListeners(){var e,t;this.addManagedListeners(this.rowNode,l({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},null!==(e=null===(t=this.beans.expansionSvc)||void 0===t?void 0:t.getRowExpandedListeners(this))&&void 0!==e?e:{})),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventSvc,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc((()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context)})),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",(()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged()))},cellChanged:e=>{this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update}))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach((t=>{const i="Above"===e,n="Below"===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)))}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),null===(e=this.beans.rowAutoHeight)||void 0===e||e.checkAutoHeights(this.rowNode)}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Ge(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(e){return this.allRowGuis.find((t=>t.element.contains(e)))}onKeyboardNavigate(e){var t;const i=this.findFullWidthRowGui(e.target);if(!((i?i.element:null)===e.target))return;const n=this.rowNode,{focusSvc:o,navigation:s}=this.beans,r=o.getFocusedCell(),a={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:null!==(t=null===r||void 0===r?void 0:r.column)&&void 0!==t?t:this.getColumnForFullWidth(i)};null===s||void 0===s||s.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||yi(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),i=t?t.element:null,n=i===e.target,o=Lt(this.beans);let s=!1;i&&o&&(s=i.contains(o)&&o.classList.contains("ag-cell"));let r=null;var a;(n||s||(r=No(this.beans,i,!1,e.shiftKey)),this.isFullWidth()&&n||!r)&&(null===(a=this.beans.navigation)||void 0===a||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const t=null===(e=this.allRowGuis.find((e=>Me(e.element))))||void 0===e?void 0:e.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach((e=>{Ne(e.element,"tabindex",t)}))}onFullWidthRowFocused(e){var t;const i=this.rowNode,n=!!e&&(this.isFullWidth()&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned),o=this.fullWidthGui?this.fullWidthGui.element:null===(t=this.centerGui)||void 0===t?void 0:t.element;o&&(o.classList.toggle("ag-full-width-focus",n),n&&null!==e&&void 0!==e&&e.forceBrowserFocus&&o.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(i.list.push(e),i.map[e.column.getInstanceId()]=e)})),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){const{rowNode:i}=this;return this.gos.addGridCommonParams({type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){yi(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(null===e||void 0===e?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=he(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:i,focusSvc:n}=this.beans;null===i||void 0===i||i.removeAllCellRanges();const o=this.findFullWidthRowGui(e.target),s=null===o||void 0===o?void 0:o.element,r=e.target;let a=!0;s&&s.contains(r)&&ae(r)&&(a=!1),n.setFocusedCell({rowIndex:t.rowIndex,column:this.getColumnForFullWidth(o),rowPinned:t.rowPinned,forceBrowserFocus:a})}onRowClick(e){if(yi(e)||this.lastMouseDownOnDragger)return;const{eventSvc:t,selectionSvc:i}=this.beans;t.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),null===i||void 0===i||i.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){var t;"FullWidthDetail"===this.rowType&&(null===(t=this.beans.masterDetailSvc)||void 0===t||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:i,rowNode:n}=this,o=i.addGridCommonParams({fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,n)=>this.addFullWidthRowDragging(e,t,i,n),setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.refreshRowTooltip(e,t)}}),s=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return function(e,t){return e.getCompDetailsFromGridOptions(Jn,"agDetailCellRenderer",t,!0)}(s,o);case"FullWidthGroup":return function(e,t){return e.getCompDetailsFromGridOptions(Qn,"agGroupRowRenderer",t,!0)}(s,o);case"FullWidthLoading":return function(e,t){return e.getCompDetailsFromGridOptions(qn,"agLoadingCellRenderer",t,!0)}(s,o);default:return function(e,t){return e.getCompDetailsFromGridOptions(Xn,void 0,t,!0)}(s,o)}}refreshRowTooltip(e,t){var i;this.fullWidthGui&&(this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.refreshRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;const{rowDragSvc:o,context:s}=this.beans;if(!o||!this.isFullWidth())return;const r=o.createRowDragComp((()=>i),this.rowNode,void 0,e,t,n);this.createBean(r,s),this.addDestroyFunc((()=>{this.destroyBean(r,s)}))}onUiLevelChanged(){const e=_s(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(i,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t))))}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var e;const t=[];null===(e=this.beans.rowStyleSvc)||void 0===e||e.processClassesFromGridOptions(t,this.rowNode),t.length&&t.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}))}postProcessRowClassRules(){var e;null===(e=this.beans.rowStyleSvc)||void 0===e||e.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){var t;const i=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:o,beans:s}=this,r=[];r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(o.rowIndex%2===0?"ag-row-even":"ag-row-odd"),o.isRowPinned()&&r.push("ag-row-pinned"),o.isSelected()&&r.push("ag-row-selected"),o.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),o.stub&&r.push("ag-row-loading"),n&&r.push("ag-full-width-row"),null===(t=s.expansionSvc)||void 0===t||t.addExpandedCss(r,o),o.dragging&&r.push("ag-row-dragging");const{rowStyleSvc:a}=s;return a&&(a.processClassesFromGridOptions(r,o),a.preProcessRowClassRules(r,o)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),n&&("left"===i&&r.push("ag-cell-last-left-pinned"),"right"===i&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){var e,t;return null!==(e=null===(t=this.beans.rowStyleSvc)||void 0===t?void 0:t.processStylesFromGridOptions(this.rowNode))&&void 0!==e?e:this.emptyStyle}onRowSelected(e){var t;null===(t=this.beans.selectionSvc)||void 0===t||t.onRowCtrlSelected(this,(e=>{e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}),e)}announceDescription(){var e;null===(e=this.beans.selectionSvc)||void 0===e||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:n,beans:o,gos:s}=this;i.addManagedListeners(t,{mouseenter:()=>n.dispatchRowEvent("mouseEnter"),mouseleave:()=>n.dispatchRowEvent("mouseLeave")}),i.addManagedListeners(n,{mouseEnter:()=>{var e;null!==(e=o.dragSvc)&&void 0!==e&&e.dragging||s.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),n)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),n=St(this.gos)?Mt(this.beans,this.rowNode).height:void 0,o=n?"".concat(Math.min(i,n)-2,"px"):void 0;this.forEachGui(e,(e=>{e.element.style.height="".concat(t,"px"),o&&e.element.style.setProperty("--ag-line-height",o)}))}destroyFirstPass(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.active=!1;const{rowNode:t}=this;if(!e&&Ot(this.gos)&&!t.sticky){if(null!=t.rowTop){const e=this.roundRowTopToBounds(t.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)))}t.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventSvc.dispatchEvent(i),super.destroy()}destroySecondPass(){var e;this.allRowGuis.length=0,null===(e=this.beans.editSvc)||void 0===e||e.stopRowEditing(this);const t=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const{focusSvc:e,editSvc:t}=this.beans,i=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);i!==this.rowFocused&&(this.rowFocused=i,this.setFocusedClasses()),!i&&this.editing&&(null===t||void 0===t||t.stopRowEditing(this,!1))}onPaginationChanged(){var e,t;const i=null!==(e=null===(t=this.beans.pagination)||void 0===t?void 0:t.getCurrentPage())&&void 0!==e?e:0;this.paginationPage!==i&&(this.paginationPage=i,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&ze(e)){const t=this.applyPaginationOffset(e),i=this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t),n="".concat(i,"px");this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(e),")")}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,o=this.applyPaginationOffset(n);i=t.isRowPinned()?o:this.beans.rowContainerHeight.getRealPixelPosition(o)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform("translateY(".concat(e,")"))))}getCellCtrl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;return this.getAllCellCtrls().forEach((t=>{t.column==e&&(i=t)})),null!=i||t||this.getAllCellCtrls().forEach((t=>{t.getColSpanningList().indexOf(e)>=0&&(i=t)})),i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var t,i,n,o;const s=this.rowNode.getRowIndexString();if(null===s)return;const r=(null!==(t=null===(i=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0)+(null!==(n=null===(o=this.beans.filterManager)||void 0===o?void 0:o.getHeaderRowCount())&&void 0!==n?n:0),a=this.rowNode.rowIndex%2===0,l=r+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(s),e.rowComp.addOrRemoveCssClass("ag-row-even",a),e.rowComp.addOrRemoveCssClass("ag-row-odd",!a),V(e.element,l)}))}};function js(e){var t;if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===(null===(t=e.key)||void 0===t?void 0:t.length)}function Us(e,t,i,n,o){const s=n?n.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const r=e.addGridCommonParams({event:t,editing:o,column:n,node:i,data:i.data,colDef:n.getColDef()});if(s){if(s(r))return!0}return!1}var Ks=class extends Si{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),null===(e=this.beans.touchSvc)||void 0===e||e.mockRowContextMenu(this)}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",bi("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}))}processMouseEvent(e,t){if(!Jo(this.gos,t)||yi(t))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);var o;"contextmenu"===e?(null!==i&&void 0!==i&&i.column&&i.dispatchCellContextMenuEvent(t),null===(o=this.beans.contextMenuSvc)||void 0===o||o.handleContextMenuMouseEvent(t,void 0,n,i)):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:Yo(t,e),rowCtrl:Ci(t,e,Hs)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){const{rowNode:n,column:o,editing:s}=e;if(!Us(this.gos,i,n,o,s)&&"keydown"===t){var r;!s&&(null===(r=this.beans.navigation)||void 0===r?void 0:r.handlePageScrollingKey(i))||e.onKeyDown(i),this.doGridOperations(i,e.editing),js(i)&&e.processCharacter(i)}"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:n}=e,{focusSvc:o,navigation:s}=this.beans,r=o.getFocusedCell(),a=r&&r.column;if(!Us(this.gos,i,n,a,!1)){const n=i.key;if("keydown"===t)switch(n){case Do.PAGE_HOME:case Do.PAGE_END:case Do.PAGE_UP:case Do.PAGE_DOWN:null===s||void 0===s||s.handlePageScrollingKey(i,!0);break;case Do.UP:case Do.DOWN:e.onKeyboardNavigate(i);break;case Do.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!Jo(this.gos,e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=Do.A;break;case 67:i=Do.C;break;case 86:i=Do.V;break;case 68:i=Do.D;break;case 90:i=Do.Z;break;case 89:i=Do.Y;break;default:i=e.code}return i}(e),{clipboardSvc:n,undoRedo:o}=this.beans;return i===Do.A?this.onCtrlAndA(e):i===Do.C?this.onCtrlAndC(n,e):i===Do.D?this.onCtrlAndD(n,e):i===Do.V?this.onCtrlAndV(n,e):i===Do.X?this.onCtrlAndX(n,e):i===Do.Y?this.onCtrlAndY(o):i===Do.Z?this.onCtrlAndZ(o,e):void 0}onCtrlAndA(e){const{beans:{pinnedRowModel:t,rowModel:i,visibleCols:n,rangeSvc:o,selectionSvc:s},gos:r}=this;if(o&&$t(r)&&i.isRowsToRender()){var a,l;const[e,s]=[null===(a=null===t||void 0===t?void 0:t.isEmpty("top"))||void 0===a||a,null===(l=null===t||void 0===t?void 0:t.isEmpty("bottom"))||void 0===l||l],r=e?null:"top";let c,h;var d;if(s)c=null,h=i.getRowCount()-1;else c="bottom",h=null!==(d=null===t||void 0===t?void 0:t.getPinnedBottomRowCount())&&void 0!==d?d:-1;const u=n.allCols;if(null===u||void 0===u||!u.length)return;o.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:h,rowEndPinned:c,columnStart:u[0],columnEnd:Gi(u)})}else s&&(null===s||void 0===s||s.selectAllRowNodes({source:"keyboardSelectAll",selectAll:ai(r)}));e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);null!==i&&void 0!==i&&i.editing||null!==n&&void 0!==n&&n.editing||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);null!==i&&void 0!==i&&i.editing||null!==n&&void 0!==n&&n.editing||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);null!==i&&void 0!==i&&i.editing||null!==n&&void 0!==n&&n.editing||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){null===e||void 0===e||e.redo("ui")}},Ys=class extends Si{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=null!=t?"".concat(t,"px"):"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},Zs=e=>e.topRowCtrls,Xs=e=>e.getStickyTopRowCtrls(),qs=e=>e.getStickyBottomRowCtrls(),Qs=e=>e.bottomRowCtrls,Js=e=>e.allRowCtrls,$s={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Js},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Js},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Js},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Js},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Zs},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Zs},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Zs},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Zs},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Xs},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Xs},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Xs},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Xs},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:qs},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:qs},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:qs},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:qs},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Qs},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Qs},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Qs},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Qs}};function er(e){return $s[e]}var tr=["center","left","right","fullWidth"],ir=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],nr=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],or=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],sr=["stickyTopCenter","stickyTopLeft","stickyTopRight"],rr=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],ar=[...sr,"stickyTopFullWidth",...rr,"stickyBottomFullWidth"],lr=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...sr,...rr],dr=class extends Si{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=er(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new Gs(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(e){this.comp.setOffsetTop("".concat(e.offset,"px"))}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new Ks(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:n,rangeSvc:o}=this.beans,s=()=>this.onPinnedWidthChanged();this.forContainers(nr,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===n||void 0===n?void 0:n.createPinnedWidthFeature(this.eContainer,!0)),this.addManagedEventListeners({leftPinnedWidthChanged:s})})),this.forContainers(or,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===n||void 0===n?void 0:n.createPinnedWidthFeature(this.eContainer,!1)),this.addManagedEventListeners({rightPinnedWidthChanged:s})})),this.forContainers(tr,(()=>this.createManagedBean(new Ys(this.eContainer,"center"===this.name?i:void 0)))),o&&this.forContainers(lr,(()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer)))),this.forContainers(ir,(()=>this.createManagedBean(new Bs((e=>this.comp.setContainerWidth("".concat(e,"px"))))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(ar.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=xt(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",t)))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return ge(this.eViewport)}getCenterViewportScrollLeft(){return be(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Be(this.beans,this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return Se(this.eViewport)}getViewportScrollLeft(){return be(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(e=this.eViewport).clientWidth<e.scrollWidth;var e}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Ce(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=xt(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter((e=>{const t=e.isFullWidth();return this.options.fullWidth?!n&&t:n||!t}));this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},cr="ag-force-vertical-scroll",hr=class extends Si{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,n,o,s,r){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=o,this.eStickyTop=s,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(".".concat(er("center").viewport)),this.eFullWidthContainer=i.querySelector(".".concat(er("fullWidth").container)),this.eStickyTopFullWidthContainer=s.querySelector(".".concat(er("stickyTopFullWidth").container)),this.eStickyBottomFullWidthContainer=r.querySelector(".".concat(er("stickyBottomFullWidth").container)),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new Ls(this.comp)),this.scrollFeature=this.createManagedBean(new Os(this.eBodyViewport)),null===(a=this.beans.rowDragSvc)||void 0===a||a.setupRowDrag(this.eBodyViewport,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,o,s,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),null===(l=this.filterManager)||void 0===l||l.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t}),this.addManagedPropertyListener("treeData",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=t&&e.getScrollbarWidth()||0,n=oe()?16:0,o="calc(100% + ".concat(i+n,"px)");Mo(this.beans,(()=>this.comp.setBodyViewportWidth(o))),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let i=this.gos.get("treeData");if(!i){const n=t.isPivotMode();i=(e?e.columns.length:0)>=(n?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){e.forEach((e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,n=he(i,"ag-root",e);e.classList.toggle("ag-has-focus",!n)},focusout:t=>{const{target:i,relatedTarget:n}=t,o=e.contains(n),s=he(n,"ag-root",e);he(i,"ag-root",e)||o&&!s||e.classList.remove("ag-has-focus")}})}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;null===(e=this.beans.editSvc)||void 0===e||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var e,t,i,n;const o=(null!==(e=null===(t=this.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===t?void 0:t.getRowCount())&&void 0!==e?e:0)+(null!==(i=null===(n=this.filterManager)||void 0===n?void 0:n.getHeaderRowCount())&&void 0!==i?i:0),{rowModel:s}=this.beans,r=s.isLastRowIndexKnown()?s.getRowCount():-1,a=-1===r?-1:o+r;this.comp.setRowCount(a)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?cr:null,i=xt(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&(n=this.eBodyViewport).clientHeight<n.scrollHeight;var n}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const n=()=>{const t=i&&Ot(this.gos)&&!e.stretching,n=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,t)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({gridStylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,n())}})}addBodyViewportListener(){const{popupSvc:e,touchSvc:t}=this.beans,i=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:i}),null===t||void 0===t||t.mockBodyContextMenu(this,i),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this,e)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&Jo(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e,o=n||Math.abs(t)>Math.abs(i),s=e.target;o?(this.eStickyTopFullWidthContainer.contains(s)||this.eStickyBottomFullWidthContainer.contains(s))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:n}=e||t;var o;n!==this.eBodyViewport&&n!==this.ctrlsSvc.get("center").eViewport||(null===(o=this.beans.contextMenuSvc)||void 0===o||o.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&null!==e&&void 0!==e&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){var e,t;const{pinnedRowModel:i}=this,n=null!==(e=null===i||void 0===i?void 0:i.getPinnedTopTotalHeight())&&void 0!==e?e:0,o=null!==(t=null===i||void 0===i?void 0:i.getPinnedBottomTotalHeight())&&void 0!==t?t:0;this.comp.setTopHeight(n),this.comp.setBottomHeight(o),this.comp.setTopDisplay(n?"inherit":"none"),this.comp.setBottomDisplay(o?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight("".concat(e,"px")),this.stickyTopHeight=e}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight("".concat(e,"px")),this.stickyBottomHeight=e}setStickyWidth(e){if(e){const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(e,"px)")),this.comp.setStickyBottomWidth("calc(100% - ".concat(e,"px)"))}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){var e,t,i,n;const o=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(null!==(e=null===(t=this.filterManager)||void 0===t?void 0:t.getHeaderHeight())&&void 0!==e?e:0),s=null!==(i=null===(n=this.pinnedRowModel)||void 0===n?void 0:n.getPinnedTopTotalHeight())&&void 0!==i?i:0;let r=0;o>0&&(r+=o),s>0&&(r+=s),r>0&&(r+=1),this.comp.setStickyTopTop("".concat(r,"px"))}setStickyBottomOffsetBottom(){var e;const{pinnedRowModel:t,scrollVisibleSvc:i,comp:n}=this,o=(null!==(e=null===t||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0)+(i.horizontalScrollShowing&&i.getScrollbarWidth()||0);n.setStickyBottomBottom("".concat(o,"px"))}},ur=class extends En{constructor(e,t){super(),this.direction=t,this.eViewport=Tn,this.eContainer=Tn,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",ee()||te())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=oe(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),Mo(this.beans,(()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=0}),400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;tt((()=>Me(t)),(()=>this.setScrollPosition(e)),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},pr=class extends ur{constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=Tn,this.eRightSpacer=Tn,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new Bs((e=>this.eContainer.style.width="".concat(e,"px")))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var e,t;if(!this.invisibleScrollbar)return;const i=null!==(e=null===(t=this.beans.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0;this.getGui().style.bottom="".concat(i,"px")}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,n=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=n),Ee(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let o=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(o+=n),Ee(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=n)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=i?0:0===n&&t?16:n,s=()=>{this.setScrollVisibleDebounce=0,this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Re(this.getGui(),o),Re(this.eViewport,o),Re(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return be(this.eViewport,this.enableRtl)}setScrollPosition(e){Me(this.eViewport)||this.attemptSettingScrollPosition(e),Ce(this.eViewport,e,this.enableRtl)}},gr={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:pr},mr=class extends ur{constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Ys(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,n=t&&e.getScrollbarWidth()||0,o=0===n&&i?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),Ee(this.getGui(),o),Ee(this.eViewport,o),Ee(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const t=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),n=t.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||Me(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},vr={selector:"AG-FAKE-VERTICAL-SCROLL",component:mr};function fr(e){return e.cols?e.cols.treeDepth+1:-1}function yr(e){var t,i;return null!==(t=null===(i=e.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0}function br(e){const t=[],i=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const n of i){if(!n)continue;const i=n.getGroupRowCount()||0;for(let o=0;o<i;o++){const i=n.getGroupRowCtrlAtIndex(o),s=t[o];if(i){const n=Cr(e,i);(null==s||n>s)&&(t[o]=n)}}}return t}function Cr(e,t){const i=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotGroupHeaderHeight"))&&void 0!==t?t:Mr(e)}(e):Mr(e);let n=0;const o=t.getHeaderCtrls();for(const s of o){const{column:e}=s;if(e.isAutoHeaderHeight()){const t=e.getAutoHeaderHeight();null!=t&&t>n&&(n=t)}}return Math.max(i,n)}function xr(e){const t=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotHeaderHeight"))&&void 0!==t?t:wr(e)}(e):wr(e),i=e.visibleCols.allCols.filter((e=>e.isAutoHeaderHeight())).map((e=>e.getAutoHeaderHeight()||0));return Math.max(t,...i)}function wr(e){var t;return null!==(t=e.gos.get("headerHeight"))&&void 0!==t?t:e.environment.getDefaultHeaderHeight()}function Sr(e){var t;return null!==(t=e.gos.get("floatingFiltersHeight"))&&void 0!==t?t:wr(e)}function Mr(e){var t;return null!==(t=e.gos.get("groupHeaderHeight"))&&void 0!==t?t:wr(e)}var Dr=class extends Si{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:o,touchSvc:s,ctrlsSvc:r}=n;o&&this.createManagedBean(new Ds(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),null===s||void 0===s||s.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Mo(this.beans,(()=>e())),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var e;const{beans:t}=this;let i=0;const n=br(t).reduce(((e,t)=>e+t),0),o=xr(t);if(null!==(e=t.filterManager)&&void 0!==e&&e.hasFloatingFilters()&&(i+=Sr(t)),i+=n,i+=o,this.headerHeight===i)return;this.headerHeight=i;const s="".concat(i+1,"px");this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const t=e.visibleCols.allCols.some((e=>e.isSpanHeaderHeight()));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?"LEFT":"RIGHT",{beans:o}=this,{headerNavigation:s,focusSvc:r}=o;(s.navigateHorizontally(n,!0,e)||!i&&r.focusOverlay(!1)||zo(o,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case Do.LEFT:t="LEFT";case Do.RIGHT:ze(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case Do.UP:t="UP";case Do.DOWN:ze(t)||(t="DOWN"),i.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:n}=this;!t&&i.contains(Lt(n))||i.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){var n;const{menuSvc:o,ctrlsSvc:s}=this.beans;if(!e&&!i||null===o||void 0===o||!o.isHeaderContextMenuEnabled())return;const{target:r}=null!==e&&void 0!==e?e:t;r!==this.eGui&&r!==(null===(n=s.getHeaderRowContainerCtrl())||void 0===n?void 0:n.eViewport)||o.showHeaderContextMenu(void 0,e,i)}},kr=class extends En{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},Ir=class extends kr{constructor(e){super('<div class="ag-header-cell" role="columnheader">\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',e),this.eResize=Tn,this.eHeaderCompWrapper=Tn,this.headerCompVersion=0}postConstruct(){const e=this.getGui();var t,i;t="col-id",null!=(i=this.ctrl.column.getColId())&&""!=i?e.setAttribute(t,i):e.removeAttribute(t);const n={setWidth:t=>e.style.width=t,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setAriaSort:t=>t?U(e,t):K(e),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);const o=this.ctrl.getSelectAllGui();o&&this.eResize.insertAdjacentElement("afterend",o)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then((e=>this.afterCompCreated(t,e)))}afterCompCreated(e,t){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(t)}},Ar=class extends kr{constructor(e){super('<div class="ag-header-group-cell" role="columnheader">\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',e),this.eResize=Tn,this.eHeaderCompWrapper=Tn}postConstruct(){const e=this.getGui();e.setAttribute("col-id",this.ctrl.column.getUniqueId());const t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setHeaderWrapperHidden:e=>{e?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:e=>{null!=e?this.eHeaderCompWrapper.style.setProperty("max-height","".concat(e,"px")):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e)},setResizableDisplayed:e=>le(this.eResize,e),setWidth:t=>e.style.width=t,setAriaExpanded:t=>{return i="aria-expanded",void 0!=(n=t)?e.setAttribute(i,n):e.removeAttribute(i);var i,n},setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(t,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then((e=>this.afterHeaderCompCreated(e)))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive())return void t();const i=this.getGui(),n=e.getGui();this.eHeaderCompWrapper.appendChild(n),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}addOrRemoveHeaderWrapperStyle(e,t){const{eHeaderCompWrapper:i}=this;t?i.style.setProperty(e,t):i.style.removeProperty(e)}},Tr=class extends kr{constructor(e){super('<div class="ag-header-cell ag-floating-filter" role="gridcell">\n            <div data-ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',e),this.eFloatingFilterBody=Tn,this.eButtonWrapper=Tn,this.eButtonShowMainFilter=Tn}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),addOrRemoveBodyCssClass:(e,t)=>this.eFloatingFilterBody.classList.toggle(e,t),setButtonWrapperDisplayed:e=>le(this.eButtonWrapper,e),setCompDetails:e=>this.setCompDetails(e),getFloatingFilterComp:()=>this.compPromise,setWidth:t=>e.style.width=t,setMenuIcon:e=>this.eButtonShowMainFilter.appendChild(e)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then((e=>this.afterCompCreated(e)))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){e&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()):this.destroyBean(e))}},Er=class extends En{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate('<div class="'.concat(this.ctrl.headerRowClass,'" role="row"></div>'))}postConstruct(){V(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,t)=>this.setHeaderCtrls(e,t),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},e.forEach((e=>{const t=e.instanceId;let n=i[t];delete i[t],null==n&&(n=this.createHeaderComp(e),this.getGui().appendChild(n.getGui())),this.headerComps[t]=n})),Object.values(i).forEach((e=>{this.getGui().removeChild(e.getGui()),this.destroyBean(e)})),t){const e=Object.values(this.headerComps);e.sort(((e,t)=>e.getCtrl().column.getLeft()-t.getCtrl().column.getLeft()));const t=e.map((e=>e.getGui()));Ie(this.getGui(),t)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new Ar(e);break;case"filter":t=new Tr(e);break;default:t=new Ir(e)}return this.createBean(t),t.setParentComponent(this),t}},Rr=class extends Si{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Gi(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),n=ze(this.columnOrGroup.getOldLeft());(null===t||void 0===t?void 0:t.isActive())&&n&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn((()=>{this.actualLeft===i&&this.setLeft(i)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:n}=this.beans;if(!xt(i,"print"))return t;if("left"===e.getPinned())return t;const o=n.getColsLeftWidth();if("right"===e.getPinned()){return o+n.bodyWidth+t}return o+t}setLeft(e){if(ze(e)&&(this.eCell.style.left="".concat(e,"px")),ps(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&j(this.ariaEl,e.length)}}},Lr=0,Pr="headerCtrl",Nr=class extends Si{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+Lr++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,n=i.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!ze(o))return!1;return!!o(this.gos.addGridCommonParams({colDef:n,column:i,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return Lt(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:n}=e,{beans:o}=this,s=e=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:i,paddingBottom:r,borderBottomWidth:a,borderTopWidth:l}=ue(this.eGui),d=i+r+a+l,c=t.offsetHeight+d;if(e<5){const i=Tt(o);if(!i||!i.contains(t)||0==c)return void Mo(o,(()=>s(e+1)))}this.setColHeaderHeight(this.column,c)};let r,a=!1;const l=()=>{const e=this.column.isAutoHeaderHeight();e&&!a&&d(),!e&&a&&c()},d=()=>{a=!0,s(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),r=Be(this.beans,t,(()=>s(0)))},c=()=>{a=!1,r&&r(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),r=void 0};l(),n.addDestroyFunc((()=>c())),n.addManagedListeners(this.column,{widthChanged:()=>a&&s(0)}),n.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout((()=>s(0)))}}),i&&i(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:n}=this;e&&t&&n&&(wo(e,t,i.visibleCols),W(n,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=Bo(this.beans);this.eGui&&Ne(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=Lt(this.beans),i=e.key===Do.LEFT||e.key===Do.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const n=e.key===Do.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){var o;this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),null===(o=this.resizeFeature)||void 0===o||o.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){var t;null===(t=this.beans.colMoves)||void 0===t||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let n=e.key===Do.LEFT!==t.get("enableRtl");const o=i.getPinned(),s=t.get("enableRtl");return o&&s!==("right"===o)&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout((()=>{var e;null===(e=this.resizeFeature)||void 0===e||e.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case Do.PAGE_DOWN:case Do.PAGE_UP:case Do.PAGE_HOME:case Do.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=Pr,{eGui:i,gos:n}=this;At(n,i,t,this),e.addDestroyFunc((()=>At(n,i,t,null)))}focus(e){const{eGui:t}=this;return!!t&&(this.lastFocusEvent=e||null,t.focus(),!0)}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&(null===(e=this.beans.dragAndDrop)||void 0===e||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=null!==e&&void 0!==e?e:t,{menuSvc:o,gos:s}=this.beans;s.get("preventDefaultOnContextMenu")&&n.preventDefault(),null!==o&&void 0!==o&&o.isHeaderContextMenuEnabled(i)&&o.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Fr=class extends Nr{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,i,n,o){this.comp=e;const{colResize:s,context:r,colHover:a}=this.beans,l=kn(this,r,o);this.setGui(t,l),this.updateState(),this.setupWidth(l),this.setupMovingCss(l),this.setupMenuClass(l),this.setupSortableClass(l),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:l}),this.addColumnHoverListener(l),this.setupFilterClass(l),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(l),this.setupSelectAll(l),this.setupUserComp(),this.refreshAria(),s?this.resizeFeature=l.createManagedBean(s.createResizeFeature(this.rowCtrl.pinned,this.column,i,e,this)):le(i,!1),null===a||void 0===a||a.createHoverFeature(l,[this.column],t),l.createManagedBean(new Rr(this.column,t,this.beans)),l.createManagedBean(new Ds(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(l),l.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],(()=>this.refresh())),l.addManagedListeners(this.column,{colDefChanged:()=>this.refresh()}),l.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const d=()=>this.checkDisplayName();l.addManagedEventListeners({columnValueChanged:d,columnRowGroupChanged:d,columnPivotChanged:d,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),l.addDestroyFunc((()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()}))}resizeHeader(e,t){var i;null===(i=this.beans.colResize)||void 0===i||i.resizeHeader(this.column,e,t)}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return function(e,t,i){return e.getCompDetails(t,Fn,"agColumnHeader",i)}(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:n}=this.beans;return n.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!(null===e||void 0===e||!e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!i&&(!this.openFilterEnabled||ci(this.gos)),showColumnMenu:t=>{null===e||void 0===e||e.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{null===e||void 0===e||e.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{null===e||void 0===e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{null===t||void 0===t||t.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{null===t||void 0===t||t.setSortForColumn(this.column,e,!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature.setComp(this))}getSelectAllGui(){var e;return null===(e=this.selectAllFeature)||void 0===e?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;(super.handleKeyDown(e),e.key===Do.SPACE)&&(null===(t=this.selectAllFeature)||void 0===t||t.onSpaceKeyDown(e));e.key===Do.ENTER&&this.onEnterKeyDown(e),e.key===Do.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){var t;null===(t=this.beans.sortSvc)||void 0===t||t.progressSort(this.column,e.shiftKey,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();Or(i)&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),Eo()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupClassesFromColDef(){const e=()=>{const e=Co(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach((e=>{t.has(e)?t.delete(e):this.comp.addOrRemoveCssClass(e,!0)})),t.forEach((e=>this.comp.addOrRemoveCssClass(e,!1)))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t,i;this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!(null===e||void 0===e||!e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!(null===e||void 0===e||!e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach((e=>e()))}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth("".concat(e,"px"))};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,i=1===e;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:n}=this,o=br(this.beans),s=0===o.reduce(((e,t)=>e+t),0);if(i.addOrRemoveCssClass("ag-header-parent-hidden",s),!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);const l=xr(n);if(0===r)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height","".concat(l,"px"));i.addOrRemoveCssClass("ag-header-span-total",a);let d=0;for(let c=0;c<r;c++)d+=o[o.length-1-c];e.style.setProperty("top","".concat(-d,"px")),e.style.setProperty("height","".concat(l+d,"px"))}refreshAriaSort(){if(this.sortable){var e;const t=this.getLocaleTextFunc(),i=(null===(e=this.beans.sortSvc)||void 0===e?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}(i)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!ci(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var e;if(!this.eGui.contains(Lt(this.beans)))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");null===(e=this.beans.ariaAnnounce)||void 0===e||e.announceValue(t,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;null===(t=this.beans.colHover)||void 0===t||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return Or(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function Or(e){return"function"===typeof e.getAnchorElementForMenu&&"function"===typeof e.onMenuKeyboardShortcut}var Br=0,Gr=class extends Si{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=Br++;const n="group"==i?"ag-header-row-column-group":"filter"==i?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass="ag-header-row ".concat(n)}postConstruct(){this.isPrintLayout=xt(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every((e=>null!=e.eGui))}setComp(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.comp=e,t=kn(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)for(const t of this.headerCellCtrls.values())if(t.column===e)return t}onDisplayedColumnsChanged(){this.isPrintLayout=xt(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth("".concat(e,"px"))}getWidthForRow(){const{visibleCols:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{filterManager:e}=this.beans,t=[],i=br(this.beans),n=xr(this.beans);t.push(...i),t.push(n),null!==e&&void 0!==e&&e.hasFloatingFilters()&&t.push(Sr(this.beans));let o=0;for(let s=0;s<this.rowIndex;s++)o+=t[s];return{topOffset:o,rowHeight:t[this.rowIndex]}}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,e);const i=e=>{const{focusSvc:t,visibleCols:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.column)};if(e)for(const[n,o]of e){i(o)?this.headerCellCtrls.set(n,o):this.destroyBean(o)}return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e,t;return Array.from(null!==(e=null===(t=this.headerCellCtrls)||void 0===t?void 0:t.values())&&void 0!==e?e:[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const i=e.getUniqueId();let n;t&&(n=t.get(i),t.delete(i));if(n&&n.column!=e&&(this.destroyBean(n),n=void 0),null==n)switch(this.type){case"filter":n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:n=this.createBean(new Fr(e,this))}this.headerCellCtrls.set(i,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{colViewport:i}=this.beans;return["left",null,"right"].forEach((n=>{const o=i.getHeadersToRender(n,t);e=e.concat(o)})),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return i="function"===typeof e?t.find(e):t.find((t=>t.column==e)),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);if(!i)return!1;return i.focus(t)}destroy(){var e;null===(e=this.headerCellCtrls)||void 0===e||e.forEach((e=>{this.destroyBean(e)})),this.headerCellCtrls=void 0,super.destroy()}},zr=class extends Si{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:n,colModel:o,colMoves:s,filterManager:r}=this.beans;this.setupCenterWidth(),null===i||void 0===i||i.setupHeaderPinnedWidth(this),this.setupDragAndDrop(s,this.eViewport);const a=this.onDisplayedColumnsChanged.bind(this,r);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:a,advancedFilterEnabledChanged:a});const l="".concat("string"===typeof this.pinned?this.pinned:"center","Header");n.register(l,this),o.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{focusSvc:t,colModel:i,filterManager:n}=this.beans;let o=0;const s=t.getFocusHeaderToUseAfterRefresh();(()=>{const e=fr(i)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let t=0;t<e;t++){const e=this.createBean(new Gr(o++,this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const t=o++,i=!this.hidden&&(null==this.columnsRowCtrl||!e||this.columnsRowCtrl.rowIndex!==t);(i||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),i&&(this.columnsRowCtrl=this.createBean(new Gr(t,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!(null===n||void 0===n||!n.hasFloatingFilters())&&!this.hidden;const t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();const i=o++;if(this.filtersRowCtrl){const n=this.filtersRowCtrl.rowIndex!==i;e&&!n||t()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Gr(i,this.pinned,"filter")))})();const r=this.getAllCtrls();this.comp.setCtrls(r),this.restoreFocusOnHeader(t,s)}getHeaderCtrlForColumn(e){var t;if(Ri(e))return null===(t=this.columnsRowCtrl)||void 0===t?void 0:t.getHeaderCellCtrl(e);if(0!==this.groupsRowCtrls.length)for(let i=0;i<this.groupsRowCtrls.length;i++){const t=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(t)return t}}getHtmlElementForColumnHeader(e){var t,i;return null!==(t=null===(i=this.getHeaderCtrlForColumn(e))||void 0===i?void 0:i.eGui)&&void 0!==t?t:null}getRowType(e){var t;return null===(t=this.getAllCtrls()[e])||void 0===t?void 0:t.type}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return!!n&&n.focusHeader(t,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=null===e||void 0===e?void 0:e.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(e){const t=!(null===e||void 0===e||!e.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new Bs((e=>this.comp.setCenterWidth("".concat(e,"px"))),!0))}};function _r(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}var Vr=class extends En{constructor(){super()}};function Hr(e,t,i){const n=Wr(e,t,i);if(n){const{className:e}=n;if("string"===typeof e&&e.indexOf("ag-icon")>-1||"object"===typeof e&&e["ag-icon"])return n}const o=document.createElement("span");return o.appendChild(n),o}function Wr(e,t,i){let n=null;"smallDown"===e?pt(262):"smallLeft"===e?pt(263):"smallRight"===e&&pt(264);const o=i&&i.getColDef().icons;if(o&&(n=o[e]),t.gos&&!n){const i=t.gos.get("icons");i&&(n=i[e])}if(n){let t;if("function"===typeof n)t=n();else{if("string"!==typeof n)return void pt(38,{iconName:e});t=n}return"string"===typeof t?De(t):Pe(t)?t:void pt(133,{iconName:e})}{const i=document.createElement("span"),n=t.registry.getIcon(e);var s;if(!n)null===(s=t.validation)||void 0===s||s.validateIcon(e);const o=null!==n&&void 0!==n?n:e;return i.setAttribute("class","ag-icon ag-icon-".concat(o)),i.setAttribute("unselectable","on"),I(i,"presentation"),i}}var jr=class extends En{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}")}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:o}=this.config;null!=o&&this.setDisabled(o),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;xe(t),"string"===typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?(le(t,!1),I(t,"presentation")):(le(t,!0),I(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){const e=this.eLabel;return e.id=e.id||"ag-".concat(this.getCompId(),"-label"),e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||Te(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return ce(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Ur=class extends jr{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?T(e,""):T(e,null!==t&&void 0!==t?t:"")}setAriaLabel(e){return A(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Ee(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}},Kr=class extends Ur{constructor(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,null!==(i=null===e||void 0===e?void 0:e.template)&&void 0!==i?i:'\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'.concat(o,' data-ref="eInput" class="ag-input-field-input"></').concat(o,">\n                </div>\n            </div>"),[],t),this.inputType=n,this.displayFieldTag=o,this.eLabel=Tn,this.eWrapper=Tn,this.eInput=Tn}postConstruct(){super.postConstruct(),this.setInputType();const{eLabel:e,eWrapper:t,eInput:i,className:n}=this;e.classList.add("".concat(n,"-label")),t.classList.add("".concat(n,"-input-wrapper")),i.classList.add("".concat(n,"-input")),this.addCssClass("ag-input-field"),i.id=i.id||"ag-".concat(this.getCompId(),"-input");const{inputName:o,inputWidth:s}=this.config;null!=o&&this.setInputName(o),null!=s&&this.setInputWidth(s),this.addInputListeners(),this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Te(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return Ne(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return A(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return ce(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)Ne(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";Ne(this.eInput,"autocomplete",t)}return this}},Yr=class extends Kr{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}},Zr={selector:"AG-CHECKBOX",component:Yr},Xr=class extends Si{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}get treeData(){return!1}getRowNode(e){return this.allNodesMap[e]}extractRowData(){var e;return null===(e=this.rootNode)||void 0===e||null===(e=e.allLeafChildren)||void 0===e?void 0:e.map((e=>e.data))}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){var t;this.rootNode.allLeafChildren=null!==(t=null===e||void 0===e?void 0:e.map(((e,t)=>this.createRowNode(e,t))))&&void 0!==t?t:[]}setImmutableRowData(e,t){const i=this.createTransactionForRowData(t),n=this.updateRowData(i,e.changedRowNodes);let o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=this.updateRowOrderFromRowData(t));const{rowNodeTransaction:s,rowsInserted:r}=n,{add:a,remove:l,update:d}=s;(r||o||a.length||l.length||d.length)&&(e.step="group",e.rowDataUpdated=!0,e.rowNodeTransactions=[s],e.rowNodesOrderChanged=r||o)}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const i={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},n=[],o=jt(this.gos);return this.executeRemove(o,e,i,n),this.executeUpdate(o,e,i,n),this.executeAdd(e,i),this.deselectNodes(n),i}createTransactionForRowData(e){const t=jt(this.gos),i=l({},this.allNodesMap),n=[],o=[],s=[];ze(e)&&e.forEach((e=>{const n=t({data:e,level:0}),r=i[n];if(r){r.data!==e&&o.push(e),i[n]=void 0}else s.push(e)}));for(const r of Object.values(i))r&&n.push(r.data);return{remove:n,update:o,add:s}}updateRowOrderFromRowData(e){var t,i;const n=null===(t=this.rootNode)||void 0===t?void 0:t.allLeafChildren,o=null!==(i=null===n||void 0===n?void 0:n.length)&&void 0!==i?i:0,s=new Map;let r=-1,a=-1;for(let l=0;l<o;++l){const t=n[l],i=t.data;i!==e[l]&&(a<0&&(r=l),a=l,s.set(i,t))}if(r<0)return!1;for(let l=r;l<=a;++l){const t=s.get(e[l]);void 0!==t&&(n[l]=t,t.sourceRowIndex=l)}return!0}executeAdd(e,t){const i=e.add;if(null===i||void 0===i||!i.length)return;let n=this.rootNode.allLeafChildren,o=n.length;if("number"===typeof e.addIndex&&(o=this.sanitizeAddIndex(e.addIndex),o>0)){if(this.gos.get("treeData")&&this.gos.get("getDataPath"))for(let e=0;e<n.length;e++){const t=n[e];if((null===t||void 0===t?void 0:t.rowIndex)==o-1){o=e+1;break}}}const s=i.length,r=t.changedRowNodes,a=new Array(s);for(let c=0;c<s;c++){const e=this.createRowNode(i[c],o+c);r.add(e),a[c]=e}const l=this.rootNode;if(o<n.length){const e=n.slice(0,o),i=n.slice(o,n.length),s=e.length+a.length;for(let t=0,n=i.length;t<n;++t)i[t].sourceRowIndex=s+t;n=[...e,...a,...i],t.rowsInserted=!0}else n=n.concat(a);l.allLeafChildren=n;const d=l.sibling;d&&(d.allLeafChildren=n),t.rowNodeTransaction.add=a}executeRemove(e,t,i,n){var o,s,r;let{changedRowNodes:a,rowNodeTransaction:l}=i;const{remove:d}=t;if(null===d||void 0===d||!d.length)return;const c={};d.forEach((t=>{const i=this.lookupRowNode(e,t);i&&(i.isSelected()&&n.push(i),i.clearRowTopAndRowIndex(),c[i.id]=!0,delete this.allNodesMap[i.id],l.remove.push(i),a.remove(i))}));const h=this.rootNode;h.allLeafChildren=null!==(o=null===(s=h.allLeafChildren)||void 0===s?void 0:s.filter((e=>!c[e.id])))&&void 0!==o?o:null,null===(r=h.allLeafChildren)||void 0===r||r.forEach(((e,t)=>{e.sourceRowIndex=t}));const u=h.sibling;u&&(u.allLeafChildren=h.allLeafChildren)}executeUpdate(e,t,i,n){let{changedRowNodes:o,rowNodeTransaction:s}=i;const{update:r}=t;null!==r&&void 0!==r&&r.length&&r.forEach((t=>{const i=this.lookupRowNode(e,t);i&&(i.updateData(t),!i.selectable&&i.isSelected()&&n.push(i),s.update.push(i),o.update(i))}))}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:null!==e&&void 0!==e&&e.length?e[0]:null})}deselectNodes(e){var t;const i="rowDataChanged",n=this.beans.selectionSvc,o=e.length>0;o&&(null===n||void 0===n||n.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i})),null===n||void 0===n||null===(t=n.updateGroupsFromChildrenSelections)||void 0===t||t.call(n,i),o&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:i})}sanitizeAddIndex(e){var t,i;const n=null!==(t=null===(i=this.rootNode.allLeafChildren)||void 0===i?void 0:i.length)&&void 0!==t?t:0;return e<0||e>=n||Number.isNaN(e)?n:Math.ceil(e)}createRowNode(e,t){const i=new fs(this.beans);return i.parent=this.rootNode,i.level=0,i.group=!1,i.expanded=!1,i.sourceRowIndex=t,i.setDataAndId(e,String(this.nextId)),this.allNodesMap[i.id]&&pt(2,{nodeId:i.id}),this.allNodesMap[i.id]=i,this.nextId++,i}lookupRowNode(e,t){let i;if(e){const n=e({data:t,level:0});if(i=this.allNodesMap[n],!i)return gt(4,{id:n}),null}else{var n;if(i=null===(n=this.rootNode)||void 0===n||null===(n=n.allLeafChildren)||void 0===n?void 0:n.find((e=>e.data===t)),!i)return gt(5,{data:t}),null}return i||null}},qr=(e=>(e.Applied="Applied",e.StoreNotFound="StoreNotFound",e.StoreLoading="StoreLoading",e.StoreWaitingToLoad="StoreWaitingToLoad",e.StoreLoadingFailed="StoreLoadingFailed",e.StoreWrongType="StoreWrongType",e.Cancelled="Cancelled",e.StoreNotStarted="StoreNotStarted",e))(qr||{}),Qr=class extends En{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[Zr]),this.eCheckbox=Tn}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,n=t.isSelected(),o=q(e,n),[s,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(s,r);i.setValue(n,!0),i.setInputAriaLabel("".concat(a," (").concat(o,")"))}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:fi,click:e=>{var t;fi(e),null===(t=this.beans.selectionSvc)||void 0===t||t.handleSelectionEvent(e,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",(e=>{let{currentValue:t,previousValue:i}=e;("object"===typeof t?qt(t):void 0)!==("object"===typeof i?qt(i):void 0)&&this.onSelectableChanged()}));if(ni(this.gos)||"function"===typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:n}=this;let o=t.selectable;const s=this.getIsVisible();if(o)if("function"===typeof s){const n=null===i||void 0===i?void 0:i.callbackParams;if(e){const i=e.createColumnFunctionCallbackParams(t);o=s(l(l({},n),i))}else o=s(l(l({},n),{},{node:t,data:t.data}))}else o=null!==s&&void 0!==s&&s;const r=n.get("rowSelection");if(r&&"string"!==typeof r?!qt(r):null===e||void 0===e?void 0:e.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!o),this.setVisible(!0),void this.setDisplayed(!0);null!==i&&void 0!==i&&i.removeHidden?this.setDisplayed(o):this.setVisible(o)}getIsVisible(){var e;const t=this.overrides;if(t)return t.isVisible;const i=this.gos.get("rowSelection");return i&&"string"!==typeof i?Yt(i):null===(e=this.column)||void 0===e||null===(e=e.getColDef())||void 0===e?void 0:e.checkboxSelection}},Jr=class{constructor(e){this.rootId=null,this.endId=null,this.cachedRange=[],this.rowModel=e}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){var e;const t=this.getRoot(),i=this.getEnd();if(null==t||null==i)return this.cachedRange;this.cachedRange=null!==(e=this.rowModel.getNodesInRangeForSelection(t,i))&&void 0!==e?e:[]}return this.cachedRange}isInRange(e){return null!==this.rootId&&this.getRange().some((t=>t.id===e.id))}getRoot(){var e;return this.rootId&&null!==(e=this.rowModel.getRowNode(this.rootId))&&void 0!==e?e:null}getEnd(){var e;return this.endId&&null!==(e=this.rowModel.getRowNode(this.endId))&&void 0!==e?e:null}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.rootId,n=t.findIndex((t=>t.id===e.id));if(n>-1){const o=t.slice(0,n),s=t.slice(n+1);return this.setEndRange(e),i?{keep:o,discard:s}:{keep:s,discard:o}}return{keep:t,discard:[]}}extend(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(e),this.setRoot(e),{keep:i,discard:[]}}const n=this.rowModel.getNodesInRangeForSelection(i,e);if(!n)return this.setRoot(e),{keep:[e],discard:[]};if(n.find((e=>e.id===this.endId)))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}},$r=class extends Si{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Lt(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new Yr);this.cbSelectAll=t,t.addCssClass("ag-header-select-all"),I(t.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideSelectAll.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){const e=this.isCheckboxSelection();this.cbSelectAllVisible=e,this.cbSelectAll.setDisplayed(e),e&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,n=t.getSelectAllState(e);i.setValue(n);const o=t.hasNodesToSelect(e);i.setDisabled(!o),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.getLocaleTextFunc(),{headerCellCtrl:t,cbSelectAll:i,cbSelectAllVisible:n}=this,o=i.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),s=e("ariaRowSelectAll","Press Space to toggle all rows selection");t.setAriaDescriptionProperty("selectAll",n?"".concat(s," (").concat(o,")"):null),i.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),t.announceAriaDescription()}checkSelectionType(e){return!!si(this.gos)||(pt(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return!(!bt(t)&&!Ct(t))||(pt(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";"currentPage"===t?i="uiSelectAllCurrentPage":"filtered"===t&&(i="uiSelectAllFiltered");const n={source:i,selectAll:t},o=this.beans.selectionSvc;e?o.selectAllRowNodes(n):o.deselectAllRowNodes(n)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,n=t.get("rowSelection"),o=e.getColDef(),{headerCheckboxSelection:s}=o;let r=!1;const a="object"===typeof n;if(a){var l;const t=dn(e),o=ln(e);("autoGroupColumn"===Xt(n)&&o||t&&null!==(l=i.selectionColSvc)&&void 0!==l&&l.isSelectionColumnEnabled())&&(r=Zt(n))}else r="function"===typeof s?s(t.addGridCommonParams({column:e,colDef:o})):!!s;const d=a?"headerCheckbox":"headerCheckboxSelection";return r&&this.checkRightRowModelType(d)&&this.checkSelectionType(d)}getSelectAllMode(){const e=ai(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}},ea=class extends Si{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new Jr(t.rowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],(()=>{const t=ni(e);t!==this.isRowSelectable&&(this.isRowSelectable=t,this.updateSelectable())})),this.isRowSelectable=ni(e)}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new Qr}createSelectAllFeature(e){return new $r(e)}isMultiSelect(){return si(this.gos)}onRowCtrlSelected(e,t,i){const n=!!e.rowNode.isSelected();e.forEachGui(i,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",n);const i=e.element;Y(i,n);i.contains(Lt(this.beans))&&t(e)}))}announceAriaRowSelection(e){var t;if(this.isRowSelectionBlocked(e))return;const i=e.isSelected();if(i&&!ii(this.gos))return;const n=this.getLocaleTextFunc()(i?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(i?"deselect":"select"," this row"));null===(t=this.beans.ariaAnnounce)||void 0===t||t.announceValue(n,"rowSelection")}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e})}isRowSelectionBlocked(e){return!e.selectable||!!e.rowPinned||!wt(this.gos)}updateRowSelectable(e,t){var i,n;const o=null===(i=null===(n=this.isRowSelectable)||void 0===n?void 0:n.call(this,e))||void 0===i||i;return this.setRowSelectable(e,o,t),o}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if(li(this.gos)){const t=this.calculateSelectedFromChildren(e);return void this.setNodesSelected({nodes:[e],newValue:null!==t&&void 0!==t&&t,source:"selectableChanged"})}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var t;let i=!1,n=!1;if(null===(t=e.childrenAfterGroup)||void 0===t||!t.length)return e.selectable?e.__selected:null;for(let o=0;o<e.childrenAfterGroup.length;o++){const t=e.childrenAfterGroup[o];let s=t.isSelected();if(!t.selectable){const e=this.calculateSelectedFromChildren(t);if(null===e)continue;s=e}switch(s){case!0:i=!0;break;case!1:n=!0;break;default:return}}return i&&n?void 0:!!i||!n&&(e.selectable?e.__selected:null)}selectRowNode(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";const o=!e.selectable&&t,s=e.__selected===t;if(o||s)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;return r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent(l(l({},ys(e,this.gos,"rowSelected")),{},{event:i||null,source:n})),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&"string"!==typeof i){const n=dn(e)&&Yt(i);return e.isColumnFunc(t,n)}return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,n){const{gos:o,selectionCtx:s}=this,r=e.isSelected(),a=li(o),l=function(e){const t=ti(e);return!0===t||"enableSelection"===t}(o),d=ii(o),c="rowClicked"===n;if(c&&a&&e.group)return null;if(c&&!l&&!d)return null;if(t&&i&&this.isMultiSelect()){const t=s.getRoot();if(t){if(t.isSelected()){const t=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{deselect:t.discard,select:t.keep,reset:!1}}return{select:[],deselect:s.extend(e,a).keep,reset:!1}}return null}if(t&&this.isMultiSelect()){const t=s.getRoot(),i=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{select:i.keep,deselect:i.discard,reset:!(!t||t.isSelected())}}if(i)return s.setRoot(e),c&&r&&!d?null:{node:e,newValue:!r,clearSelection:!this.isMultiSelect()};{s.setRoot(e);const t=function(e){var t;const i=e.get("rowSelection");return"string"===typeof i?e.get("rowMultiSelectWithClick"):null!==(t=null===i||void 0===i?void 0:i.enableSelectionWithoutKeys)&&void 0!==t&&t}(o),i=c&&(!t||!l);if("filteredDescendants"===ri(o)&&void 0===r&&bt(o))return{node:e,newValue:!1,clearSelection:!this.isMultiSelect()||i};if(c){const n=r?!t:l;return n===r?null:{node:e,newValue:n,clearSelection:!this.isMultiSelect()||i}}return{node:e,newValue:!r,clearSelection:!this.isMultiSelect()||i}}}},ta=class extends Yr{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},ia=class extends Yr{constructor(e){super(e,"ag-toggle-button"),this.registerCSS('.ag-toggle-button{flex:none;min-width:unset;width:unset}.ag-toggle-button-input-wrapper{background-color:var(--ag-toggle-button-off-background-color);border-radius:calc(var(--ag-toggle-button-height)*.5);flex:none;height:var(--ag-toggle-button-height);max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);position:relative;transition:background-color .1s;:where(.ag-toggle-button-input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-toggle-button-height);margin:0;max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);opacity:0}&:before{background-color:var(--ag-toggle-button-switch-background-color);border-radius:100%;content:"";display:block;height:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2);left:var(--ag-toggle-button-switch-inset);pointer-events:none;position:absolute;top:var(--ag-toggle-button-switch-inset);transition:left .1s;width:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2)}&.ag-checked{background-color:var(--ag-toggle-button-on-background-color);&:before{left:calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-switch-inset))}}&:focus-within{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{opacity:.5}}')}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},na={selector:"AG-TOGGLE-BUTTON",component:ia},oa=class extends Kr{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-text-field",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=ze(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp("[".concat(this.config.allowedCharPattern,"]"));this.addManagedListeners(this.eInput,{keydown:t=>{js(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{var i;const n=null===(i=t.clipboardData)||void 0===i?void 0:i.getData("text");n&&n.split("").some((t=>!e.test(t)))&&t.preventDefault()}})}},sa={selector:"AG-INPUT-TEXT-FIELD",component:oa},ra={selector:"AG-INPUT-TEXT-AREA",component:class extends Kr{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},aa=class extends oa{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const t=parseFloat(e.value),i=isNaN(t)?"":this.normalizeValue(t.toString());this.value!==i&&this.setValue(i)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:n,step:o}=this.config;"number"===typeof t&&this.setPrecision(t),"number"===typeof i&&this.setMin(i),"number"===typeof n&&this.setMax(n),"number"===typeof o&&this.setStep(o)}onWheel(e){Lt(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e),{min:i,max:n}=this;return null!=i&&t<i?e=i.toString():null!=n&&t>n&&(e=n.toString()),e}adjustPrecision(e,t){const i=this.precision;if(null==i)return e;if(t){const t=parseFloat(e).toFixed(i);return parseFloat(t).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=i)return e;if(i>0)return"".concat(n[0],".").concat(n[1].slice(0,i))}return n[0]}setMin(e){return this.min===e||(this.min=e,Ne(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,Ne(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,Ne(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,i){if(ze(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){n=(i=this.adjustPrecision(i))!=this.normalizeValue(i)}if(n)return t(i)}return e(i)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return"string"===typeof e&&e.includes("e")}},la={selector:"AG-INPUT-NUMBER-FIELD",component:aa};function da(e,t){return e.toString().padStart(t,"0")}function ca(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>da(e,2))).join(i);return t&&(n+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>da(e,2))).join(":")),n}var ha=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function ua(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";const i=da(e.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>"".concat(e.getFullYear()),MMMM:()=>n[e.getMonth()],MMM:()=>n[e.getMonth()].slice(0,3),MM:()=>da(e.getMonth()+1,2),Mo:()=>"".concat(e.getMonth()+1).concat(ha(e.getMonth()+1)),M:()=>"".concat(e.getMonth()+1),Do:()=>"".concat(e.getDate()).concat(ha(e.getDate())),DD:()=>da(e.getDate(),2),D:()=>"".concat(e.getDate()),dddd:()=>o[e.getDay()],ddd:()=>o[e.getDay()].slice(0,3),dd:()=>o[e.getDay()].slice(0,2),do:()=>"".concat(e.getDay()).concat(ha(e.getDay())),d:()=>"".concat(e.getDay())},r=new RegExp(Object.keys(s).join("|"),"g");return t.replace(r,(e=>e in s?s[e]():e))}function pa(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const n=t.split("-").map((e=>parseInt(e,10)));if(3!==n.filter((e=>!isNaN(e))).length)return null;const[o,s,r]=n,a=new Date(o,s-1,r);if(a.getFullYear()!==o||a.getMonth()!==s-1||a.getDate()!==r)return null;if(!i||"00:00:00"===i)return a;const[l,d,c]=i.split(":").map((e=>parseInt(e,10)));return l>=0&&l<24&&a.setHours(l),d>=0&&d<60&&a.setMinutes(d),c>=0&&c<60&&a.setSeconds(c),a}var ga,ma=class extends oa{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Q();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Lt(this.beans)===this.eInput&&e.preventDefault()}setMin(e){var t;const i=e instanceof Date?null!==(t=ca(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0:e;return this.min===i||(this.min=i,Ne(this.eInput,"min",i)),this}setMax(e){var t;const i=e instanceof Date?null!==(t=ca(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0:e;return this.max===i||(this.max=i,Ne(this.eInput,"max",i)),this}setStep(e){return this.step===e||(this.step=e,Ne(this.eInput,"step",e)),this}getDate(){var e;if(this.eInput.validity.valid)return null!==(e=pa(this.getValue()))&&void 0!==e?e:void 0}setDate(e,t){this.setValue(ca(null!==e&&void 0!==e?e:null,!1),t)}},va={selector:"AG-INPUT-DATE-FIELD",component:ma},fa=!1,ya=class extends Si{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,i,n,o,s,r;return"show"===e?null!==(o=null===(s=(r=this.tooltipCtrl).getTooltipShowDelayOverride)||void 0===s?void 0:s.call(r))&&void 0!==o?o:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!==(t=null===(i=(n=this.tooltipCtrl).getTooltipHideDelayOverride)||void 0===i?void 0:i.call(n))&&void 0!==t?t:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),te()||(fa?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(e)}),100):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const i=e.relatedTarget,n=this.tooltipCtrl.getGui(),o=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui();this.isInteractingWithTooltip||n.contains(i)||this.interactionEnabled&&null!==o&&void 0!==o&&o.contains(i)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(0!=this.state||fa)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return(new Date).getTime()-ga<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var e,t,i,n,o,s,r,a,d;const c=this.getTooltipValue(),h=this.tooltipCtrl;if(!ze(c)||h.shouldDisplayTooltip&&!h.shouldDisplayTooltip())return void this.setToDoNothing();const u=null===(e=h.getRowNode)||void 0===e?void 0:e.call(h),p=l({location:null!==(t=null===(i=h.getLocation)||void 0===i?void 0:i.call(h))&&void 0!==t?t:"UNKNOWN",colDef:null===(n=h.getColDef)||void 0===n?void 0:n.call(h),column:null===(o=h.getColumn)||void 0===o?void 0:o.call(h),rowIndex:null===(s=h.getRowIndex)||void 0===s?void 0:s.call(h),node:u,data:null===u||void 0===u?void 0:u.data,value:c,valueFormatted:null===(r=h.getValueFormatted)||void 0===r?void 0:r.call(h),hideTooltipCallback:()=>this.hideTooltip(!0)},null!==(a=null===(d=h.getAdditionalParams)||void 0===d?void 0:d.call(h))&&void 0!==a?a:{});this.state=2,this.tooltipInstanceCount++;const g=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),m=function(e,t){return e.getCompDetails(t.colDef,Kn,"agTooltipComponent",t,!0)}(this.userCompFactory,p);null===m||void 0===m||m.newAgStackInstance().then(g)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),ga=(new Date).getTime()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var i;if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const o=this.getLocaleTextFunc(),s=null===(i=this.popupSvc)||void 0===i?void 0:i.addPopup({eChild:n,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Tt(this.beans),{keydown:e=>{n.contains(null===e||void 0===e?void 0:e.target)||this.onKeyDown()}}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var e;const t=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui(),i=Lt(this.beans);return!!t&&t.contains(i)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};var t,i;this.lastMouseEvent?null===(t=this.popupSvc)||void 0===t||t.positionPopupUnderMouseEvent(l(l({},e),{},{mouseEvent:this.lastMouseEvent})):null===(i=this.popupSvc)||void 0===i||i.positionPopupByComponent(l(l({},e),{},{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout((()=>{e(),this.destroyBean(t)}),i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){fa=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),100)}unlockService(){fa=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function ba(e){return"whenTruncated"===e.get("tooltipShowMode")}function Ca(e,t){return ba(e)?xa(t):void 0}function xa(e){return()=>{const t=e();return!t||t.scrollWidth>t.clientWidth}}var wa=class extends En{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super('<div class="ag-list ag-'.concat(e,'-list" role="listbox"></div>')),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case Do.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case Do.DOWN:case Do.UP:e.preventDefault(),this.navigate(t);break;case Do.PAGE_DOWN:case Do.PAGE_UP:case Do.PAGE_HOME:case Do.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===Do.DOWN;let i;const{itemEls:n,highlightedEl:o}=this;if(o){let e=n.indexOf(o)+(t?1:-1);e=Math.min(Math.max(e,0),n.length-1),i=n[e]}else i=n[t?0:n.length-1];this.highlightItem(i)}navigateToPage(e){const{itemEls:t,highlightedEl:i}=this;if(!i||0===t.length)return;const n=t.indexOf(i),o=this.options.length-1,s=t[0].clientHeight,r=Math.floor(this.getGui().clientHeight/s);let a=-1;e===Do.PAGE_HOME?a=0:e===Do.PAGE_END?a=o:e===Do.PAGE_DOWN?a=Math.min(n+r,o):e===Do.PAGE_UP&&(a=Math.max(n-r,0)),-1!==a&&this.highlightItem(t[a])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:i}=e,n=i||t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{we(e)})),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(((t,i)=>{z(t,i+1),G(t,e.length)}))}renderOption(e,t){const i=Tt(this.beans),n=i.createElement("div");I(n,"option"),n.classList.add("ag-list-item","ag-".concat(this.cssIdentifier,"-list-item"));const o=i.createElement("span");n.appendChild(o),o.textContent=t,this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>o.scrollWidth>o.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex((t=>t.value===e));if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Me(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),Y(e,!0);const t=this.getGui(),{scrollTop:i,clientHeight:n}=t,{offsetTop:o,offsetHeight:s}=e;(o+s>i+n||o<i)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;e&&Me(e)&&(e.classList.remove(this.activeClass),Y(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Sa=class extends Ur{constructor(e){if(super(e,(null===e||void 0===e?void 0:e.template)||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',(null===e||void 0===e?void 0:e.agComponents)||[],null===e||void 0===e?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Tn,this.eWrapper=Tn,this.eDisplayField=Tn,this.eIcon=Tn,this.registerCSS(".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-background-color);border:var(--ag-input-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{border:var(--ag-input-focus-border);box-shadow:var(--ag-focus-shadow)}}.ag-picker-field-button{background-color:var(--ag-background-color)}"),this.ariaRole=null===e||void 0===e?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:o,maxPickerWidth:s}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!n,null!=i&&this.setPickerMaxHeight(i),null!=o&&this.setPickerMinWidth(o),null!=s&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const e="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:n}=this.config;if(i){const e=Wr(i,this.beans);e&&this.eIcon.appendChild(e)}null!=n&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),O(e,!1),this.ariaRole&&I(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(null===e||void 0===e?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Do.UP:case Do.DOWN:case Do.ENTER:case Do.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Do.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:o=!0},maxPickerHeight:s,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:d,eWrapper:c}=this,h={modal:o,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=Ft(d);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:c};e.style.position="absolute";const u=d.popupSvc,p=u.addPopup(h);l?(r&&(e.style.minWidth=r),e.style.width=Le(ve(c)),a&&(e.style.maxWidth=a)):Te(e,null!==a&&void 0!==a?a:ve(c));const g=null!==s&&void 0!==s?s:"".concat(pe(u.getPopupParent()),"px");return e.style.setProperty("max-height",g),this.alignPickerToComponent(),p.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:n},eWrapper:o,pickerComponent:s}=this,r=n.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:o,ePopup:s.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;O(this.getAriaElement(),e);const t=this.eWrapper.classList;t.toggle("ag-picker-expanded",e),t.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;null!==(t=this.pickerComponent)&&void 0!==t&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){var e;null===(e=this.hideCurrentPicker)||void 0===e||e.call(this)}setInputWidth(e){return Te(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},Ma=class extends Sa{constructor(e){super(l({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox"},e)),this.registerCSS(".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}")}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:xa((()=>this.eDisplayField)),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new wa("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i="ag-select-list-".concat(e.getCompId());t.setAttribute("id",i),X(this.getAriaElement(),t),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),e.addManagedListeners(e,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===Do.TAB&&this.hidePicker(),t){case Do.ENTER:case Do.UP:case Do.DOWN:case Do.PAGE_UP:case Do.PAGE_DOWN:case Do.PAGE_HOME:case Do.PAGE_END:var i;if(e.preventDefault(),this.isPickerDisplayed)null===(i=this.listComponent)||void 0===i||i.handleKeyDown(e);else super.onKeyDown(e);break;case Do.ESCAPE:super.onKeyDown(e);break;case Do.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return null===(e=this.listComponent)||void 0===e||e.clearOptions(),this}setValue(e,t,i){var n;const{listComponent:o,config:{placeholder:s},eDisplayField:r,tooltipFeature:a}=this;if(this.value===e||!o)return this;i||o.setValue(e,!0);if(o.getValue()===this.getValue())return this;let l=o.getDisplayValue();return null==l&&s&&(l=s),r.textContent=l,null===a||void 0===a||a.setTooltipAndRefresh(null!==(n=l)&&void 0!==n?n:null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Da={selector:"AG-SELECT",component:Ma},ka="ag-tab-guard",Ia="ag-tab-guard-top",Aa="ag-tab-guard-bottom",Ta=class extends Si{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:d,shouldStopEventPropagation:c,onTabKeyDown:h,handleKeyDown:u,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=d,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=u}postConstruct(){this.createManagedBean(new Ds(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(0===Lo(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){var t;const i=Lo(Tt(this.beans).body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===n)return;let o,s;e?(o=0,s=n):(o=n+1,s=i.length);const r=i.slice(o,s),a=this.gos.get("tabIndex");r.sort(((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),n=parseInt(t.getAttribute("tabindex")||"0");return n===a?1:i===a?-1:0===i?1:0===n?-1:i-n})),null===(t=r[e?r.length-1:0])||void 0===t||t.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Lo(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return No(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(null===t||void 0===t||t)}setAllowFocus(e){this.allowFocus=e}},Ea=class extends Si{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,o=[t,i],s={setTabIndex:e=>{o.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:h,shouldStopEventPropagation:u,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new Ta({comp:s,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:a,onFocusOut:l,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:h,shouldStopEventPropagation:u,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Tt(this.beans).createElement("div"),i="top"===e?Ia:Aa;return t.classList.add(ka,i),I(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",e),i.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];xe(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){Pe(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}},Ra=class extends En{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new Ea(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},La=class extends En{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Pa=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new C,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchmove",n,{passive:!0}),e.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push((()=>{e.removeEventListener("touchstart",i,{passive:!0}),e.removeEventListener("touchmove",n,{passive:!0}),e.removeEventListener("touchend",o,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++){if(e[t].identifier===this.touchStart.identifier)return e[t]}return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!hs(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0){if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e}else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach((e=>e()))}},Na=(e=>(e[e.VALUE=0]="VALUE",e[e.DIMENSION=1]="DIMENSION",e))(Na||{}),Fa=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";var t;this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink="".concat(je,"/").concat(this.frameworkName,"-data-grid"),t=this.baseDocLink,st=t}setInterval(e,t){return new Rn((i=>{i(window.setInterval(e,t))}))}addEventListener(e,t,i,n){let o={};if("object"===typeof n?o=n:"boolean"===typeof n&&(o={capture:n}),null==o.passive){const e=wi(t);null!=e&&(o.passive=e)}e.addEventListener(t,i,o)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return"".concat(this.baseDocLink).concat(e?"/".concat(e):"")}};function Oa(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var Ba=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map(((e,t)=>[e,t])));function Ga(e,t){var i,n;return(null!==(i=e.beanName?Ba[e.beanName]:void 0)&&void 0!==i?i:Number.MAX_SAFE_INTEGER)-(null!==(n=t.beanName?Ba[t.beanName]:void 0)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)}function za(e,t){return"gridDestroySvc"===(null===e||void 0===e?void 0:e.beanName)?-1:0}var _a=class extends En{constructor(e){super(),this.eCenterContainer=Tn,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:e=>this.setDisplayed(e),setCtrls:e=>this.setCtrls(e),setCenterWidth:e=>this.eCenterContainer.style.width=e,setViewportScrollLeft:e=>this.getGui().scrollLeft=e,setPinnedContainerWidth:e=>{const t=this.getGui();t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}};this.createManagedBean(new zr(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e="left"==this.pinned,t="right"==this.pinned,i=e?'<div class="ag-pinned-left-header" role="rowgroup"></div>':t?'<div class="ag-pinned-right-header" role="rowgroup"></div>':'<div class="ag-header-viewport" role="presentation">\n        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>\n    </div>';this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==Tn?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;let i;this.headerRowComps={},this.rowCompsList=[];const n=e=>{const t=e.getGui();t.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(t),i&&ke(this.eRowContainer,t,i),i=t};e.forEach((e=>{const i=e.instanceId,o=t[i];delete t[i];const s=o||this.createBean(new Er(e));this.headerRowComps[i]=s,this.rowCompsList.push(s),n(s)})),Object.values(t).forEach((e=>this.destroyRowComp(e)))}},Va={selector:"AG-HEADER-ROOT",component:class extends En{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){const e={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setHeightAndMinHeight:e=>{this.getGui().style.height=e,this.getGui().style.minHeight=e}};this.createManagedBean(new Dr).setComp(e,this.getGui(),this.getFocusableElement());const t=e=>{this.createManagedBean(e),this.appendChild(e)};t(new _a("left")),t(new _a(null)),t(new _a("right"))}}},Ha=class extends En{constructor(e,t,i,n,o){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.column,this.rowNode=t.rowNode,this.eRow=n;const s=document.createElement("div");s.setAttribute("comp-id","".concat(this.getCompId())),this.setTemplateFromElement(s);const r=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),I(r,t.getCellAriaRole()),r.setAttribute("col-id",t.colIdSanitised);const a={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:e=>Ae(r,e),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:e=>this.includeSelection=e,setIncludeRowDrag:e=>this.includeRowDrag=e,setIncludeDndSource:e=>this.includeDndSource=e,setRenderDetails:(e,t,i)=>this.setRenderDetails(e,t,i),setEditDetails:(e,t,i)=>this.setEditDetails(e,t,i),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(a,this.getGui(),this.eCellWrapper,i,o,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=null==this.firstRender;const n=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),e){!(i||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,n=i&&null==this.eCellWrapper;if(n){const e=document.createElement("div");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=e,this.getGui().appendChild(this.eCellWrapper)}const o=!i&&null!=this.eCellWrapper;o&&(we(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);const s=!e&&i,r=s&&null==this.eCellValue;if(r){const e=document.createElement("span");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-value"),this.eCellValue=e,this.eCellWrapper.appendChild(this.eCellValue)}const a=!s&&null!=this.eCellValue;a&&(we(this.eCellValue),this.eCellValue=void 0);const l=n||o||r||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.dndSourceComp&&this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.checkboxSelectionComp&&this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){const n=this.editorVersion,o=e.newAgStackInstance(),{params:s}=e;o.then((e=>this.afterCellEditorCreated(n,e,s,t,i)));_e(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();xe(t);const i=null!=e?Ho(e,!0):null;null!=i&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),we(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),we(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return!0===t||void 0===t}createCellRendererInstance(e){const t=!this.beans.gos.get("suppressAnimationFrame")&&this.beans.animationFrameSvc,i=this.rendererVersion,{componentClass:n}=e,o=()=>{if(this.rendererVersion!==i||!this.isAlive())return;const t=e.newAgStackInstance(),o=this.afterCellRendererCreated.bind(this,i,n);t&&t.then(o)};t&&this.firstRender?this.beans.animationFrameSvc.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion)this.beans.context.destroyBean(i);else if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){const e=this.getParentOfValue();xe(e),e.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,n,o){if(e!==this.editorVersion)return void this.beans.context.destroyBean(t);if(t.isCancelBeforeStart&&t.isCancelBeforeStart())return this.beans.context.destroyBean(t),void this.cellCtrl.stopEditing(!0);if(!t.getGui)return pt(97,{colId:this.column.getId()}),void this.beans.context.destroyBean(t);this.cellEditor=t,this.cellEditorGui=t.getGui();const s=n||void 0!==t.isPopup&&t.isPopup();s?this.addPopupCellEditor(i,o):this.addInCellEditor(),this.refreshEditStyles(!0,s),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.cellCtrl.setInlineEditingCss()}addInCellEditor(){const e=this.getGui();if(e.contains(Lt(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){this.getParentOfValue().appendChild(this.cellEditorGui)}}addPopupCellEditor(e,t){var i,n;"fullRow"===this.beans.gos.get("editType")&&pt(98);const o=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editSvc.createPopupEditorWrapper(e));const s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);const r=this.beans.popupSvc,a=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),l=null!=t?t:null!==(i=null===(n=o.getPopupPosition)||void 0===n?void 0:n.call(o))&&void 0!==i?i:"over",d=this.beans.gos.get("enableRtl"),c={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:l,alignSide:d?"right":"left",keepWithinBounds:!0},h=r.positionPopupByComponent.bind(r,c),u=w(this.beans.localeSvc),p=r.addPopup({modal:a,eChild:s,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:h,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});p&&(this.hideEditorPopup=p.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui();e.contains(Lt(this.beans))&&e.focus({preventScroll:!0}),xe(this.getParentOfValue())}},Wa=class extends En{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const n=document.createElement("div");n.setAttribute("comp-id","".concat(this.getCompId())),n.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(n);const o=this.getGui(),s=o.style;this.domOrder=this.rowCtrl.getDomOrder(),I(o,"row");const r={setDomOrder:e=>this.domOrder=e,setCellCtrls:e=>this.setCellCtrls(e),showFullWidth:e=>this.showFullWidth(e),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:e=>Ae(o,e),setTop:e=>s.top=e,setTransform:e=>s.transform=e,setRowIndex:e=>o.setAttribute("row-index",e),setRowId:e=>o.setAttribute("row-id",e),setRowBusinessKey:e=>o.setAttribute("row-business-key",e),refreshFullWidth:e=>{var t,i,n;return null!==(t=null===(i=this.fullWidthCellRenderer)||void 0===i||null===(n=i.refresh)||void 0===n?void 0:n.call(i,e()))&&void 0!==t&&t}};e.setComp(r,this.getGui(),i,void 0),this.addDestroyFunc((()=>{e.unsetComp(i)}))}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?"transform: ".concat(t):"top: ".concat(this.rowCtrl.getInitialRowTop(e))}showFullWidth(e){e.newAgStackInstance().then((e=>{if(this.isAlive()){const t=e.getGui();this.getGui().appendChild(t),this.rowCtrl.setupDetailRowAutoHeight(t),this.setFullWidthRowComp(e)}else this.beans.context.destroyBean(e)}))}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach((e=>{const i=e.instanceId;null==this.cellComps[i]?this.newCellComp(e):t[i]=null}));const i=Object.values(t).filter((e=>null!=e));this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach((e=>{const i=this.cellComps[e.instanceId];i&&t.push(i.getGui())})),Ie(this.getGui(),t)}newCellComp(e){const t=new Ha(this.beans,e,this.rowCtrl.printLayout,this.getGui(),this.rowCtrl.editing);this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=Object.values(this.cellComps).filter((e=>null!=e));this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer=e,this.addDestroyFunc((()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)}))}destroyCells(e){e.forEach((e=>{if(!e)return;const t=e.cellCtrl.instanceId;this.cellComps[t]===e&&(e.detach(),e.destroy(),this.cellComps[t]=null)}))}};var ja={selector:"AG-ROW-CONTAINER",component:class extends En{constructor(e){super(),this.eViewport=Tn,this.eContainer=Tn,this.rowComps={},this.name=null===e||void 0===e?void 0:e.name,this.options=er(this.name),this.setTemplate(function(e){let t;return t="center"===e.type?'<div class="'.concat(e.viewport,'" data-ref="eViewport" role="presentation">\n                <div class="').concat(e.container,'" data-ref="eContainer"></div>\n            </div>'):'<div class="'.concat(e.container,'" data-ref="eContainer"></div>'),t}(this.options))}postConstruct(){const e={setHorizontalScroll:e=>this.eViewport.scrollLeft=e,setViewportHeight:e=>this.eViewport.style.height=e,setRowCtrls:e=>{let{rowCtrls:t}=e;return this.setRowCtrls(t)},setDomOrder:e=>{this.domOrder=e},setContainerWidth:e=>this.eContainer.style.width=e,setOffsetTop:e=>this.eContainer.style.transform="translateY(".concat(e,")")};this.createManagedBean(new dr(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){const t=l({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;e.forEach((e=>{const i=e.instanceId,n=t[i];if(n)this.rowComps[i]=n,delete t[i],this.ensureDomOrder(n.getGui());else{if(!e.rowNode.displayed)return;const t=new Wa(e,this.beans,this.options.type);this.rowComps[i]=t,this.appendRow(t.getGui())}})),Object.values(t).forEach((e=>{this.eContainer.removeChild(e.getGui()),e.destroy()})),I(this.eContainer,"rowgroup")}appendRow(e){var t,i,n;this.domOrder?(t=this.eContainer,i=e,(n=this.lastPlacedElement)?n.insertAdjacentElement("afterend",i):t.firstChild?t.insertAdjacentElement("afterbegin",i):t.appendChild(i)):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(ke(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}}};function Ua(e,t){return t.map((t=>{const i="e".concat(t[0].toUpperCase()+t.substring(1),"RowContainer");return e[i]={name:t},'<ag-row-container name="'.concat(t,'" data-ref="').concat(i,'"></ag-row-container>')})).join("")}var Ka={selector:"AG-GRID-BODY",component:class extends En{constructor(){super(...arguments),this.eGridRoot=Tn,this.eBodyViewport=Tn,this.eStickyTop=Tn,this.eStickyBottom=Tn,this.eTop=Tn,this.eBottom=Tn,this.eBody=Tn}postConstruct(){const{overlays:e,rangeSvc:t}=this.beans,i=null===e||void 0===e?void 0:e.getOverlayWrapperSelector(),{paramsMap:n,template:o}=function(e){const t={};return{paramsMap:t,template:'<div class="ag-root ag-unselectable" data-ref="eGridRoot">\n        <ag-header-root></ag-header-root>\n        <div class="ag-floating-top" data-ref="eTop" role="presentation">\n            '.concat(Ua(t,["topLeft","topCenter","topRight","topFullWidth"]),'\n        </div>\n        <div class="ag-body" data-ref="eBody" role="presentation">\n            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">\n            ').concat(Ua(t,["left","center","right","fullWidth"]),'\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">\n            ').concat(Ua(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]),'\n        </div>\n        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">\n            ').concat(Ua(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]),'\n        </div>\n        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">\n            ').concat(Ua(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]),"\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        ").concat(e?"<ag-overlay-wrapper></ag-overlay-wrapper>":"","\n    </div>")}}(!!i);this.setTemplate(o,[...i?[i]:[],gr,vr,Va,ja],n);const s=(e,t)=>{const i="".concat(e,"px");t.style.minHeight=i,t.style.height=i},r={setRowAnimationCssOnBodyViewport:(e,t)=>this.setRowAnimationCssOnBodyViewport(e,t),setColumnCount:e=>H(this.getGui(),e),setRowCount:e=>_(this.getGui(),e),setTopHeight:e=>s(e,this.eTop),setBottomHeight:e=>s(e,this.eBottom),setTopDisplay:e=>this.eTop.style.display=e,setBottomDisplay:e=>this.eBottom.style.display=e,setStickyTopHeight:e=>this.eStickyTop.style.height=e,setStickyTopTop:e=>this.eStickyTop.style.top=e,setStickyTopWidth:e=>this.eStickyTop.style.width=e,setStickyBottomHeight:e=>{this.eStickyBottom.style.height=e,this.eStickyBottom.classList.toggle("ag-hidden","0px"===e)},setStickyBottomBottom:e=>this.eStickyBottom.style.bottom=e,setStickyBottomWidth:e=>this.eStickyBottom.style.width=e,setColumnMovingCss:(e,t)=>this.addOrRemoveCssClass(e,t),updateLayoutClasses:(e,t)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach((e=>{e.toggle(Rs.AUTO_HEIGHT,t.autoHeight),e.toggle(Rs.NORMAL,t.normal),e.toggle(Rs.PRINT,t.print)})),this.addOrRemoveCssClass(Rs.AUTO_HEIGHT,t.autoHeight),this.addOrRemoveCssClass(Rs.NORMAL,t.normal),this.addOrRemoveCssClass(Rs.PRINT,t.print)},setAlwaysVerticalScrollClass:(e,t)=>this.eBodyViewport.classList.toggle(cr,t),registerBodyViewportResizeListener:e=>{const t=Be(this.beans,this.eBodyViewport,e);this.addDestroyFunc((()=>t()))},setPinnedTopBottomOverflowY:e=>this.eTop.style.overflowY=this.eBottom.style.overflowY=e,setCellSelectableCss:(e,t)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach((i=>i.classList.toggle(e,t)))},setBodyViewportWidth:e=>this.eBodyViewport.style.width=e,setGridRootRole:e=>I(this.eGridRoot,e)};this.ctrl=this.createManagedBean(new hr),this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&$t(this.gos)||si(this.gos))&&M(this.getGui(),"multiselectable",!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}}},Ya=class extends Si{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:n,ctrlsSvc:o}=this.beans;null===n||void 0===n||n.registerGridDropTarget((()=>this.eGui),this),Qo(this.gos,t),this.createManagedBean(new Ls(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const s=Be(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>s())),o.register("gridCtrl",this)}isDetailGrid(){var e;const t=Fo(this.getGui());return(null===t||void 0===t||null===(e=t.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1}getOptionalSelectors(){var e,t,i,n;const o=this.beans;return{paginationSelector:null===(e=o.pagination)||void 0===e?void 0:e.getPaginationSelector(),gridHeaderDropZonesSelector:o.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:null===(t=o.sideBar)||void 0===t?void 0:t.getSelector(),statusBarSelector:null===(i=o.registry)||void 0===i?void 0:i.getSelector("AG-STATUS-BAR"),watermarkSelector:null===(n=o.licenseManager)||void 0===n?void 0:n.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(0===n){if(i>0){const{visibleCols:e,focusSvc:t}=this.beans,i=Gi(e.allCols);if(t.focusGridView(i,!0))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:n,visibleCols:o}=this.beans,s=o.allCols;if(e){if(i.length>1)return this.focusContainer(Gi(i),!0);const e=Gi(s);if(n.focusGridView(e,!0))return!0}if(0===this.gos.get("headerHeight")||Bo(this.beans)){if(n.focusGridView(s[0]))return!0;for(let e=1;e<i.length;e++)if(Po(i[e].getGui()))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var t;const i=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:o}=this.getNextFocusableIndex(i,e);if(-1===o||n<0||n>=i.length)return;const s=i[n];null===(t=s.setAllowFocus)||void 0===t||t.call(s,!0),setTimeout((()=>{var e;null===(e=s.setAllowFocus)||void 0===e||e.call(s,!1)}))}getNextFocusableIndex(e,t){const i=Lt(this.beans),n=e.findIndex((e=>e.getGui().contains(i)));return{indexWithFocus:n,nextIndex:n+(t?-1:1)}}focusContainer(e,t){var i,n;null===(i=e.setAllowFocus)||void 0===i||i.call(e,!0);const o=Po(e.getGui(),t);return null===(n=e.setAllowFocus)||void 0===n||n.call(e,!1),o}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Za=class extends Ra{constructor(e){super(),this.gridBody=Tn,this.sideBar=Tn,this.pagination=Tn,this.rootWrapperBody=Tn,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:e=>this.addCssClass(e),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:e=>{this.getGui().style.userSelect=null!=e?e:"",this.getGui().style.webkitUserSelect=null!=e?e:""},setCursor:e=>{this.getGui().style.cursor=null!=e?e:""}},t=this.createManagedBean(new Ya),i=t.getOptionalSelectors(),n=this.createTemplate(i),o=[Ka,...Object.values(i).filter((e=>!!e))];this.setTemplate(n,o),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>t.focusInnerElement(e),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc((()=>{this.eGridDiv.removeChild(e),Ye(this.gos,"Grid removed from DOM")}))}updateLayoutClasses(e,t){const i=this.rootWrapperBody.classList,{AUTO_HEIGHT:n,NORMAL:o,PRINT:s}=Rs,{autoHeight:r,normal:a,print:l}=t;i.toggle(n,r),i.toggle(o,a),i.toggle(s,l),this.addOrRemoveCssClass(n,r),this.addOrRemoveCssClass(o,a),this.addOrRemoveCssClass(s,l)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",i=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",n=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",o=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",s=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return'<div class="ag-root-wrapper" role="presentation">\n                '.concat(t,'\n                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body data-ref="gridBody"></ag-grid-body>\n                    ').concat(i,"\n                </div>\n                ").concat(n,"\n                ").concat(s,"\n                ").concat(o,"\n            </div>")}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||null===(e=this.pagination)||void 0===e||!e.isDisplayed()?super.forceFocusOutOfContainer(t):this.pagination.forceFocusOutOfContainer(t)}getFocusableContainers(){const e=[this.gridBody];return[this.sideBar,this.pagination].forEach((t=>{t&&e.push(t)})),e.filter((e=>Me(e.getGui())))}},Xa=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t},qa=l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({dispatchEvent:"CommunityCore"},Xa("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0})),Xa("GridState",{getState:0})),Xa("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),Xa("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),Xa("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),Xa("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),Xa("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),Xa("ValueCache",{expireValueCache:0})),Xa("CellApi",{getCellValue:0})),Xa("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),Xa("Sort",{onSortChanged:0})),Xa("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0})),Xa("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),Xa("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),Xa("HighlightChanges",{flashCells:0})),Xa("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0})),Xa("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),Xa("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),Xa("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),Xa("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),Xa("ColumnResize",{setColumnWidths:0})),Xa("ColumnHover",{isColumnHovered:0})),Xa("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0})),Xa("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),Xa("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),Xa("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0})),Xa("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),Xa("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),Xa("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0})),Xa("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),Xa("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),Xa("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),Xa("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),Xa("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),Xa("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),Xa("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),Xa("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),Xa("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),Xa("ContextMenu",{showContextMenu:0})),Xa("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),Xa("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),Xa("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),Xa("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),Xa("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),Xa("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),Xa("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),Xa("StatusBar",{getStatusPanel:0})),Qa={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},Ja=(e,t)=>e.eventSvc.dispatchEvent(t),$a=class{};Reflect.defineProperty($a,"name",{value:"GridApi"});function el(e,t){e.gos.updateGridOptions({options:t})}var tl=class extends En{constructor(e,t,i,n,o,s){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=o,this.suppressVisibilityChange=s,this.dragSource=null}isCustomGui(){return null!=this.customGui}postConstruct(){const{beans:e,rowNode:t,column:i,gos:n}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Wr("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){const e=n.get("rowDragManaged")?new ol(this,t,i):new nl(this,t,i);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){var e,t;const i=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[i];const n=null!==(e=null===(t=this.beans.selectionSvc)||void 0===t?void 0:t.getSelectedNodes())&&void 0!==e?e:[];return-1!==n.indexOf(i)?n:[i]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{null===e||void 0===e||e.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var e;const t=this.getDragItem(),n=(null===(e=t.rowNodes)||void 0===e?void 0:e.length)||1,o=this.getRowDragText(this.column);return o?o(t,n):1===n?this.cellValueFn():"".concat(n," ").concat(i("rowDragRows","rows"))},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},il=class extends Si{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,i=!1;const{column:n,rowNode:o,parent:s}=this;n&&(e=n.isRowDrag(o)||s.isCustomGui(),i="function"===typeof n.getColDef().rowDrag),i?(s.setDisplayed(!0,t),s.setVisible(e,t)):(s.setDisplayed(e,t),s.setVisible(!0,t))}}},nl=class extends il{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},ol=class extends il{postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc:e,dragAndDrop:t,gos:i}=this.beans,n=e.rowDragFeature,o=n&&n.shouldPreventRowMove(),s=i.get("suppressRowDrag"),r=t.hasExternalDropZones(),a=o&&!r||s;this.setDisplayedOrVisible(a)}},sl={moduleName:"Drag",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,i=t.find((t=>t.dragSource===e));i&&(this.removeListener(i),_i(t,i))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:o}=e;i.addEventListener("mousedown",t);let s=null;const r=this.gos.get("suppressTouch");n&&!r&&(s=t=>{ae(t.target)||(o&&t.stopPropagation(),this.onTouchStart(e,t))},i.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:s,touchEnabled:!!n})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const n=t=>this.onTouchUp(t,e.eElement),o=t.target,s=[{target:Rt(this.beans),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:o,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:o,type:"touchend",listener:n,options:{passive:!0}},{target:o,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(s),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const n=Rt(this.beans),o=[{target:n,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:n,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:n,type:"contextmenu",listener:e=>e.preventDefault()},{target:n,type:"keydown",listener:t=>{t.key===Do.ESCAPE&&this.cancelDrag(e.eElement)}}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:i,listener:n,options:o}=e;t.addEventListener(i,n,o)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:i,listener:n,options:o}=e;t.removeEventListener(i,n,o)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams;return hs(e,t,ze(i)?i:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){var n;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams)return void(this.dragging=!1);this.currentDragParams.onDragging(t)}null===(n=this.currentDragParams)||void 0===n||n.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if(Q()){var i;null===(i=Tt(this.beans).getSelection())||void 0===i||i.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,i=t.get("enableCellTextSelection"),n="mousemove"===e.type;return i&&n&&e.cancelable&&Jo(t,e)&&!(e=>{const t=e.target,i=null===t||void 0===t?void 0:t.tagName.toLocaleLowerCase();return!(null===i||void 0===i||!i.match("^a$|textarea|input|select|button"))})(e)}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,i;this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),null===(t=this.currentDragParams)||void 0===t||null===(i=t.onDragCancel)||void 0===i||i.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach((e=>e())),e.length=0}}]},rl={moduleName:"DragAndDrop",version:it,dynamicBeans:{dndSourceComp:class extends En{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Wr("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:n,gos:o}=this,s=i.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(n,0,0),s){s(o.addGridCommonParams({rowNode:t,dragEvent:e}))}else try{const e=JSON.stringify(t.data);r.setData("application/json",e),r.setData("text/plain",e)}catch(a){}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}},icons:{rowDrag:"grip"}},al={moduleName:"SharedDragAndDrop",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragSvc.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:i}=this,n=t.find((t=>t.dragSource===e));n&&(i.removeDragSource(n.params),_i(t,n))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:i}=this;e.forEach((e=>t.removeDragSource(e.params))),e.length=0,i.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var i;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),null===(i=e.onDragStarted)||void 0===i||i.call(e),this.createDragAndDropImageComponent()}onDragStop(e){var t,i;null===(t=this.dragSource)||void 0===t||null===(i=t.onDragStopped)||void 0===i||i.call(t);const{lastDropTarget:n}=this;if(null!==n&&void 0!==n&&n.onDragStop){const t=this.createDropTargetEvent(n,e,null,null,!1);n.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){var e;const{dragSource:t,lastDropTarget:i}=this;null===t||void 0===t||null===(e=t.onDragCancelled)||void 0===e||e.call(t),null!==i&&void 0!==i&&i.onDragCancel&&i.onDragCancel(this.createDropTargetEvent(i,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const o=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),s=this.findCurrentDropTarget(e,o),{lastDropTarget:r,dragSource:a,dragAndDropImageComp:l,dragItem:d}=this;if(s!==r){var c,h;if(this.leaveLastTargetIfExists(e,i,n,t),null!==r&&null===s)null===a||void 0===a||null===(c=a.onGridExit)||void 0===c||c.call(a,d);if(null===r&&null!==s)null===a||void 0===a||null===(h=a.onGridEnter)||void 0===h||h.call(a,d);if(this.enterDragTargetIfExists(s,e,i,n,t),s&&l){const{comp:e,promise:t}=l;e?e.setIcon(s.getIconName?s.getIconName():null,!1):t.then((e=>{e&&e.setIcon(s.getIconName?s.getIconName():null,!1)}))}this.lastDropTarget=s}else if(s&&s.onDragging){const o=this.createDropTargetEvent(s,e,i,n,t);s.onDragging(o)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;const o=(e,t)=>{for(const i of t){const{width:t,height:n,left:o,right:s,top:r,bottom:a}=i.getBoundingClientRect();if(0===t||0===n)return!1;const l=e.clientX>=o&&e.clientX<s,d=e.clientY>=r&&e.clientY<a;if(!l||!d)return!1}return!0};for(const a of i)if(o(e,a)){n=!0;break}const{eElement:s,type:r}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(s))&&(n&&t.isInterestedIn(r,s))}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const n=Rt(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const e of t){if(-1!==this.getAllContainersFromDropTarget(e).flatMap((e=>e)).indexOf(o))return e}return null}enterDragTargetIfExists(e,t,i,n,o){if(e&&e.onDragEnter){const s=this.createDropTargetEvent(e,t,i,n,o);e.onDragEnter(s)}}leaveLastTargetIfExists(e,t,i,n){const{lastDropTarget:o}=this;if(!o)return;if(o.onDragLeave){const s=this.createDropTargetEvent(o,e,t,i,n);o.onDragLeave(s)}const s=this.getDragAndDropImageComponent();s&&s.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=e;return t.contains(i)}getHorizontalDirection(e){var t;const i=null===(t=this.eventLastTime)||void 0===t?void 0:t.clientX,n=e.clientX;return i===n?null:i>n?"left":"right"}getVerticalDirection(e){var t;const i=null===(t=this.eventLastTime)||void 0===t?void 0:t.clientY,n=e.clientY;return i===n?null:i>n?"up":"down"}createDropTargetEvent(e,t,i,n,o){const s=e.getContainer(),r=s.getBoundingClientRect(),{dragItem:a,dragSource:l,gos:d}=this,c=t.clientX-r.left,h=t.clientY-r.top;return d.addGridCommonParams({event:t,x:c,y:h,vDirection:n,hDirection:i,dragSource:l,fromNudge:o,dragItem:a,dropZoneTarget:s})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&Nt(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;if(e){const{comp:i}=e;if(i){var t;const e=i.getGui();null===(t=this.dragAndDropImageParent)||void 0===t||t.removeChild(e),this.destroyBean(i)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const t=(i=this.userCompFactory,n={dragSource:e},i.getCompDetailsFromGridOptions(Nn,"agDragAndDropImage",n,!0));var i,n;if(!t)return;const o=t.newAgStackInstance();this.dragAndDropImageComp={promise:o},o.then((e=>{e&&this.isAlive()&&(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)}))}processDragAndDropImageComponent(e){const{dragSource:t,environment:i}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),Qo(this.gos,n),i.applyThemeClasses(n),e.setIcon(null,!1);let{dragItemName:o}=t;"function"===typeof o&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const s=Pt(this.beans);this.dragAndDropImageParent=s,s?s.appendChild(n):pt(54)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc((()=>this.removeDropTarget(i)))}}],dependsOn:[sl],userComponents:{agDragAndDropImage:class extends En{constructor(){super(),this.dragSource=null,this.eIcon=Tn,this.eLabel=Tn,this.registerCSS(".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}")}postConstruct(){const e=e=>Hr(e,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate('<div class="ag-dnd-ghost ag-unselectable">\n                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>\n            </div>')}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:i,dragSource:n,dropIconMap:o,gos:s}=this;xe(i);let r=null;e||(e=null!==n&&void 0!==n&&n.getDefaultIconName?n.getDefaultIconName():"notAllowed"),r=o[e],i.classList.toggle("ag-shake-left-to-right",t),r===o.hide&&s.get("suppressDragLeaveHidesColumns")||r&&i.appendChild(r)}setLabel(e){this.eLabel.textContent=Ho(e)}}},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},ll={moduleName:"RowDrag",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const i=t.createManagedBean(new cs(e)),n=this.beans.dragAndDrop;n.addDropTarget(i),t.addDestroyFunc((()=>n.removeDropTarget(i))),this.rowDragFeature=i}createRowDragComp(e,t,i,n,o,s){return new tl(e,t,i,n,o,s)}createRowDragCompForRow(e,t){if($t(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp((()=>"1 ".concat(i("rowDragRow","row"))),e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,n,o,s){const r=this.gos;if(r.get("rowDragManaged")&&(!bt(r)||r.get("pagination")))return;return this.createRowDragComp(i,e,t,n,o,s)}}],apiFunctions:{addRowDropZone:function(e,t){var i;null===(i=e.rowDragSvc)||void 0===i||null===(i=i.rowDragFeature)||void 0===i||i.addRowDropZone(t)},removeRowDropZone:function(e,t){var i;const n=null===(i=e.dragAndDrop)||void 0===i?void 0:i.findExternalZone(t);var o;n&&(null===(o=e.dragAndDrop)||void 0===o||o.removeDropTarget(n))},getRowDropZoneParams:function(e,t){var i;return null===(i=e.rowDragSvc)||void 0===i||null===(i=i.rowDragFeature)||void 0===i?void 0:i.getRowDropZone(t)}},dependsOn:[al]},dl={moduleName:"HorizontalResize",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;i.addDragSource(t);return()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}}],dependsOn:[sl]};var cl=class extends Si{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&(null===t||void 0===t||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(null===i||void 0===i||i.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(null===n||void 0===n||n.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function hl(e){const{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:o,fakeEvent:s,pinned:r,gos:a,colModel:l,colMoves:d,visibleCols:c}=e;let{allMovingColumns:h}=e;if(t){const e=[];h.forEach((t=>{let i=null,n=t.getParent();for(;null!=n&&1===n.getDisplayedLeafColumns().length;)i=n,n=n.getParent();if(null!=i){var o;(!(null===(o=i.getColGroupDef())||void 0===o||!o.marryChildren)?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((t=>{e.includes(t)||e.push(t)}))}else e.includes(t)||e.push(t)})),h=e}const u=h.slice();!function(e,t){if(!t||t.length<=1)return;t.filter((t=>e.indexOf(t)<0)).length>0||t.sort(((t,i)=>e.indexOf(t)-e.indexOf(i)))}(l.getCols(),u);const p=function(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:o,gos:s,colModel:r,visibleCols:a}=e,l=s.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable));if(l)return[];const d=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(a,o),c=r.getCols(),h=d.filter((e=>t.includes(e))),u=d.filter((e=>!t.includes(e))),p=c.filter((e=>!t.includes(e)));let g,m=0,v=n;if(i){let e=0;h.forEach((t=>e+=t.getActualWidth())),v-=e}if(v>0){for(let e=0;e<u.length;e++){if(v-=u[e].getActualWidth(),v<0)break;m++}i&&m++}if(m>0){const e=u[m-1];g=p.indexOf(e)+1}else g=p.indexOf(u[0]),-1===g&&(g=0);const f=[g],y=(e,t)=>e-t;if(i){let e=g+1;const t=c.length-1;for(;e<=t;)f.push(e),e++;f.sort(y)}else{let e=g;const t=c.length-1;let i=c[e];for(;e<=t&&d.indexOf(i)<0;)e++,f.push(e),i=c[e];e=g-1;const n=0;for(;e>=n;)f.push(e),e--;f.sort(y).reverse()}return f}({movingCols:u,draggingRight:i,xPosition:n,pinned:r,gos:a,colModel:l,visibleCols:c}),g=function(e,t){const i=t.getCols(),n=function(e){return e.sort(((e,t)=>e-t))}(e.map((e=>i.indexOf(e)))),o=n[0],s=Gi(n),r=s-o!==n.length-1;return r?null:o}(u,l);if(0===p.length)return;const m=p[0];let v=null!==g&&!o;if(t&&(v=null!==g),v&&!s){if(!i&&m>=g)return;if(i&&m<=g)return}const f=c.allCols,y=[];let b=null;for(let x=0;x<p.length;x++){const e=p[x],t=d.getProposedColumnOrder(u,e);if(!d.doesOrderPassRules(t))continue;const i=t.filter((e=>f.includes(e)));if(null===b)b=i;else if(!zi(i,b))break;const n=pl(t);y.push({move:e,fragCount:n})}if(0===y.length)return;y.sort(((e,t)=>e.fragCount-t.fragCount));const C=y[0].move;return C>l.getCols().length-h.length?void 0:{columns:h,toIndex:C}}function ul(e){const{columns:t,toIndex:i}=hl(e)||{},{finished:n,colMoves:o}=e;return t&&null!=i?(o.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i}):null}function pl(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let n=0;n<e.length-1;n++){let o=t(e[n]),s=t(e[n+1]);[o,s]=o.length>s.length?[o,s]:[s,o],o.forEach((e=>{-1===s.indexOf(e)&&i++}))}return i}function gl(e){var t;const{pinned:i,fromKeyboard:n,gos:o,ctrlsSvc:s,useHeaderRow:r,skipScrollPadding:a}=e;let l=null===(t=s.getHeaderRowContainerCtrl(i))||void 0===t?void 0:t.eViewport,{x:d}=e;return l?(n&&(d-=l.getBoundingClientRect().left),o.get("enableRtl")&&(r&&(l=l.querySelector(".ag-header-row")),d=l.clientWidth-d),null!=i||a||(d+=s.get("center").getCenterViewportScrollLeft()),d):0}function ml(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var vl=class extends Si{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!ze(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){var e;const{pinned:t,lastDraggingEvent:i}=this,n=null!==(e=null===i||void 0===i?void 0:i.dragItem.columns)&&void 0!==e?e:[];for(const o of n){const e=o.getPinned();if(o.getColDef().lockPinned){if(e==t)return"move"}else{if(e===t||!t)return"move";if(!e&&t)return"pinned"}}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(0===e.dragSource.type)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const e=t.visibleState,n=(i||[]).filter((t=>e[t.getId()]));this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{gos:o,ctrlsSvc:s}=this.beans,r=o.get("suppressMoveWhenColumnDragging");if(n&&!r)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!n&&_e(e.hDirection))return;const a=gl({x:e.x,pinned:this.pinned,gos:o,ctrlsSvc:s});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,n):this.handleColumnDragWhileAllowingMovement(e,t,i,a,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const n=e.filter((e=>!e.getColDef().lockVisible));this.beans.colModel.setColsVisible(n,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,n,o){const s=this.getAllMovingColumns(e,!0);if(o){const e=this.isAttemptingToPin(s);e&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:n,xPosition:o}=this.getNormalisedXPositionInfo(s,e)||{};if(null==n||null==o)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:o,fromEnter:t,fakeEvent:i,fromLeft:n})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,o){const s=this.getAllMovingColumns(e),r="right"===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,d=ul(l(l({},this.getMoveColumnParams({allMovingColumns:s,isFromHeader:a,xPosition:n,fromLeft:r,fromEnter:t,fakeEvent:i})),{},{finished:o}));d&&(this.lastMovedInfo=d)}getAllMovingColumns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.dragSource.getDragItem();let n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;return n?n.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:o,fromEnter:s,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:d,visibleCols:c}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:o,xPosition:n,pinned:this.pinned,fromEnter:s,fakeEvent:r,gos:a,colModel:l,colMoves:d,visibleCols:c}}highlightHoveredColumn(e,t){var i;const{gos:n,colModel:o}=this.beans,s=n.get("enableRtl"),r=o.getCols().filter((e=>e.isVisible()&&e.getPinned()===this.pinned));let a,l=null,d=null,c=null;for(const h of r){if(d=h.getActualWidth(),l=this.getNormalisedColumnLeft(h,0,s),null!=l){if(l<=t&&l+d>=t){c=h;break}}l=null,d=null}if(c)-1!==e.indexOf(c)&&(c=null);else{for(let e=r.length-1;e>=0;e--){const t=r[e],i=r[e].getParent();if(!i){c=t;break}const n=null===i||void 0===i?void 0:i.getDisplayedLeafColumns();if(n.length){c=Gi(n);break}}if(!c)return;l=this.getNormalisedColumnLeft(c,0,s),d=c.getActualWidth()}(null===(i=this.lastHighlightedColumn)||void 0===i?void 0:i.column)!==c&&this.clearHighlighted(),null!=c&&null!=l&&null!=d&&(a=t-l<d/2!==s?0:1,fl(c,a),this.lastHighlightedColumn={column:c,position:a})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:n}=this.beans,o=i.get("enableRtl"),{firstMovingCol:s,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,o);if(!s||!r||null==a)return;const l=n.allCols,d=l.indexOf(s),c=l.indexOf(r),h=0===a!==o,u=d<c||d===c&&!h;let p=0;if(h?u&&(p-=1):u||(p+=1),c+p===d)return;const g=l[c+p];if(!g)return;return{fromLeft:u,xPosition:this.getNormalisedColumnLeft(g,20,o)}}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:o,lastMovingCol:s}=function(e){const t=e.length;let i,n;for(let o=0;o<=t;o++){if(!i){const t=e[o];null!=t.getLeft()&&(i=t)}if(!n){const i=e[t-1-o];null!=i.getLeft()&&(n=i)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}(e);if(!o||!s||n.column||!t)return l({firstMovingCol:o},n);const r="left"===this.getPinDirection();return{firstMovingCol:o,position:r?1:0,column:r!==i?o:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsSvc:o}=this.beans,s=e.getLeft();if(null==s)return null;const r=e.getActualWidth();return gl({x:i?s+r-t:s+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsSvc:o})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some((e=>e.getPinned()!==this.pinned))}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:o,fromLeft:s}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:s,fromEnter:n,fakeEvent:o}),{columns:a,toIndex:l}=hl(r)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(fl(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();let o,s;this.gos.get("enableRtl")?(o=e<i+50,s=e>n-50):(s=e<i+50,o=e>n-50),this.needToMoveRight=o,this.needToMoveLeft=s,s||o?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),null===(e=this.beans.dragAndDrop.getDragAndDropImageComponent())||void 0===e||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,null===(e=this.beans.dragAndDrop.getDragAndDropImageComponent())||void 0===e||e.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{var n;this.failedMoveAttempts++;const{pinnedCols:e,dragAndDrop:t,gos:i}=this.beans;if(this.failedMoveAttempts<=8||!e)return;if(null===(n=t.getDragAndDropImageComponent())||void 0===n||n.setIcon("pinned",!1),!i.get("suppressMoveWhenColumnDragging")){var o;const e=null===(o=this.lastDraggingEvent)||void 0===o?void 0:o.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(e||[]).filter((e=>!e.getColDef().lockPinned));if(!n.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:o,dragAndDrop:s}=this.beans;return null===o||void 0===o||o.setColsPinned(n,t,"uiColumnDragged"),i&&s.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function fl(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}var yl=class extends Si{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,(e=>{let t;const n=e.gridBodyCtrl.eBodyViewport;switch(i){case"left":t=[[n,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[n,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[n,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t})),this.moveColumnFeature=this.createManagedBean(new vl(i)),this.bodyDropPivotTarget=this.createManagedBean(new cl(i)),t.addDropTarget(this),this.addDestroyFunc((()=>t.removeDropTarget(this)))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}};var bl={moduleName:"ColumnMove",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const n=this.beans.colModel.getCols();if(!n)return;const o=n[e];this.moveColumns([o],t,i)}moveColumns(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{colModel:o,colAnimation:s,visibleCols:r,eventSvc:a}=this.beans,l=o.getCols();if(!l)return;if(t>l.length-e.length)return void pt(30,{toIndex:t});null===s||void 0===s||s.start();const d=o.getColsForKeys(e);this.doesMovePassRules(d,t)&&(Vi(o.getCols(),d,t),r.refresh(i),a.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,toIndex:t,finished:n,source:i})),null===s||void 0===s||s.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;if(!Wi(e,t.getColTree()))return!1;return!!(e=>{const t=i.get("enableRtl");let n=t?1:-1,o=!0;return e.forEach((e=>{const i=(s=e.getColDef().lockPosition)?"left"===s||!0===s?-1:1:0;var s;t?i>n&&(o=!1):i<n&&(o=!1),n=i})),o})(e)}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return Vi(i,e,t),i}createBodyDropTarget(e,t){return new yl(e,t)}moveHeader(e,t,i,n,o){const{ctrlsSvc:s,gos:r,colModel:a,visibleCols:d,focusSvc:c}=this.beans,h=t.getBoundingClientRect(),u=h.left,p=ps(i),g=p?h.width:i.getActualWidth(),m="left"===e!==r.get("enableRtl"),v=gl({x:m?u-20:u+g+20,pinned:n,fromKeyboard:!0,gos:r,ctrlsSvc:s}),f=c.focusedHeader;let y;if(ul({allMovingColumns:p?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:"right"===e,xPosition:v,pinned:n,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:d,finished:!0}),p){const e=i.getDisplayedLeafColumns();y=m?e[0]:Gi(e)}else y=i;if(s.getScrollFeature().ensureColumnVisible(y,"auto"),(!o.isAlive()||r.get("ensureDomOrder"))&&f){let e;if(p){const t=i.getGroupId(),n=i.getLeafColumns();if(!n.length)return;const o=n[0].getParent();if(!o)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return}(o,t)}else e=i;e&&c.focusHeaderPosition({headerPosition:l(l({},f),{},{column:e})})}}setDragSourceForHeader(e,t,i){const{gos:n,colModel:o,dragAndDrop:s,visibleCols:r}=this.beans;let a=!n.get("suppressDragLeaveHidesColumns");const l=ps(t),d=l?t.getProvidedColumnGroup().getLeafColumns():[t],c=l?()=>function(e,t){const i=e.getProvidedColumnGroup().getLeafColumns(),n={};i.forEach((e=>n[e.getId()]=e.isVisible()));const o=[];t.forEach((e=>{i.indexOf(e)>=0&&(o.push(e),_i(i,e))})),i.forEach((e=>o.push(e)));const s=[],r=e.getLeafColumns();for(const a of o)-1!==r.indexOf(a)&&s.push(a);return{columns:o,columnsInSplit:s,visibleState:n}}(t,r.allCols):()=>function(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}(t),h={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:c,dragItemName:i,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),ml(d,!0)},onDragStopped:()=>ml(d,!1),onDragCancelled:()=>ml(d,!1),onGridEnter:e=>{if(a){const{columns:t=[],visibleState:i}=null!==e&&void 0!==e?e:{},n=l?e=>!i||i[e.getColId()]:()=>!0,s=t.filter((e=>!e.getColDef().lockVisible&&n(e)));o.setColsVisible(s,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];o.setColsVisible(i,!1,"uiColumnMoved")}}};return s.addDragSource(h,!0),h}},class extends Si{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush((()=>this.activeNext=!1),(()=>this.active=!1))}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)}))}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:n}=this;if(0===i.length&&0===n.length)return e(),void t();const o=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e(),o(i)}),0),window.setTimeout((()=>{t(),o(n)}),200)}))}}],apiFunctions:{moveColumnByIndex:function(e,t,i){var n;null===(n=e.colMoves)||void 0===n||n.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){var n;null===(n=e.colMoves)||void 0===n||n.moveColumns(t,i,"api")}},dependsOn:[al],css:[":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"]},Cl={moduleName:"AutoWidth",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(i),this.addElementsToContainerAndGetWidth(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.eContainer;e.forEach((e=>this.cloneItemIntoDummy(e,t))),i.appendChild(t);const n=t.offsetWidth;i.removeChild(t);return n+this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach((i=>{const n=i.getHtmlElementForColumnHeader(e);null!=n&&(t=n)})),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),o=n.classList;["ag-header-cell","ag-header-group-cell"].some((e=>i.classList.contains(e)))?(o.add("ag-header","ag-header-row"),n.style.position="static"):o.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some((e=>s.classList.contains(e)))){for(let e=0;e<s.classList.length;e++){const t=s.classList[e];"ag-row-position-absolute"!=t&&o.add(t)}break}s=s.parentElement}n.appendChild(i),t.appendChild(n)}}]};var xl=class extends Si{constructor(e,t,i,n){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,(()=>this.resizeLeafColumnsToFit("uiColumnResized"))))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:o,groupAfterStartWidth:s,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const n=this.normaliseDragChange(t),o=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(o,i,e)}getInitialValues(e){const t=e=>e.reduce(((e,t)=>e+t.getActualWidth()),0),i=(e,t)=>e.map((e=>e.getActualWidth()/t)),n=this.getColumnsToResize(),o=t(n),s={columnsToResize:n,resizeStartWidth:o,resizeRatios:i(n,o)};let r=null;var a,l;e&&(r=null!==(a=null===(l=this.beans.colGroupSvc)||void 0===l?void 0:l.getGroupAtDirection(this.columnGroup,"After"))&&void 0!==a?a:null);if(r){const e=r.getDisplayedLeafColumns(),n=s.groupAfterColumns=e.filter((e=>e.isResizable())),o=s.groupAfterStartWidth=t(n);s.groupAfterRatios=i(n,o)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i){var n;let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:s,resizeStartWidth:r,resizeRatios:a,groupAfterColumns:l,groupAfterStartWidth:d,groupAfterRatios:c}=e,h=[];if(h.push({columns:s,ratios:a,width:t}),l){const e=t-r;h.push({columns:l,ratios:c,width:d-e})}null===(n=this.beans.colResize)||void 0===n||n.resizeColumnSets({resizeSets:h,finished:o,source:i}),o&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},wl=class extends Si{constructor(e,t,i,n,o){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=o}postConstruct(){const e=[];let t,i;const n=()=>{if(le(this.eResize,t),!t)return;const{horizontalResizeSvc:n,colAutosize:o}=this.beans,s=n.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(s),i&&o&&e.push(o.addColumnAutosize(this.eResize,this.column))},o=()=>{e.forEach((e=>e())),e.length=0},s=()=>{const e=this.column.isResizable(),s=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||s!==i)&&(t=e,i=s,o(),n())};s(),this.addDestroyFunc(o),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:o,beans:s}=this,r=this.normaliseResizeAmount(t),a=[{key:i,newWidth:o+r}],{pinnedCols:l,ctrlsSvc:d,colResize:c}=s;if(this.column.getPinned()){var h,u;if((null!==(h=null===l||void 0===l?void 0:l.leftWidth)&&void 0!==h?h:0)+(null!==(u=null===l||void 0===l?void 0:l.rightWidth)&&void 0!==u?u:0)+(r-n)>ge(d.getGridBodyCtrl().eBodyViewport)-50)return}this.lastResizeAmount=r,null===c||void 0===c||c.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,n="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}};var Sl={moduleName:"ColumnResize",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,n){const o=[],{colModel:s,gos:r,visibleCols:a}=this.beans;e.forEach((e=>{const i=s.getColDefCol(e.key)||s.getCol(e.key);if(!i)return;o.push({width:e.newWidth,ratios:[1],columns:[i]});if("shift"===r.get("colResizeDefault")&&(t=!t),t){const t=a.getColAfter(i);if(!t)return;const n=i.getActualWidth()-e.newWidth,s=t.getActualWidth()+n;o.push({width:s,ratios:[1],columns:[t]})}})),0!==o.length&&this.resizeColumnSets({resizeSets:o,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:n}=e,o=!t||t.every((e=>function(e){const{columns:t,width:i}=e;let n=0,o=0,s=!0;t.forEach((e=>{const t=e.getMinWidth();n+=t||0;const i=e.getMaxWidth();i>0?o+=i:s=!1}));const r=i>=n,a=!s||i<=o;return r&&a}(e)));if(!o){if(i){const e=t&&t.length>0?t[0].columns:null;Yi(this.eventSvc,e,i,n)}return}const s=[],r=[];t.forEach((e=>{const{width:t,columns:i,ratios:o}=e,a={},l={};i.forEach((e=>r.push(e)));let d=!0,c=0;for(;d;){if(c++,c>1e3){gt(31);break}d=!1;const e=[];let n=0,s=t;i.forEach(((t,i)=>{if(l[t.getId()])s-=a[t.getId()];else{e.push(t);const s=o[i];n+=s}}));const r=1/n;e.forEach(((i,n)=>{let c;n===e.length-1?c=s:(c=Math.round(o[n]*t*r),s-=c);const h=i.getMinWidth(),u=i.getMaxWidth();c<h?(c=h,l[i.getId()]=!0,d=!0):u>0&&c>u&&(c=u,l[i.getId()]=!0,d=!0),a[i.getId()]=c}))}i.forEach((e=>{const t=a[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,n),s.push(e))}))}));const a=s.length>0;let l=[];if(a){var d;const{colFlex:e,visibleCols:t,colViewport:i}=this.beans;l=null!==(d=null===e||void 0===e?void 0:e.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0}))&&void 0!==d?d:[],t.setLeftValues(n),t.updateBodyWidths(),i.checkViewportColumns()}const c=r.concat(l);(a||i)&&Yi(this.eventSvc,c,i,n,l)}resizeHeader(e,t,i){if(!e.isResizable())return;const n=e.getActualWidth(),o=e.getMinWidth(),s=e.getMaxWidth(),r=Math.min(Math.max(n+t,o),s);this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,n,o){return new wl(e,t,i,n,o)}createGroupResizeFeature(e,t,i,n){return new xl(e,t,i,n)}}],apiFunctions:{setColumnWidths:function(e,t){var i;let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";null===(i=e.colResize)||void 0===i||i.setColumnWidths(t,!1,n,o)}},dependsOn:[dl,Cl]},Ml=class extends Si{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(e,"px")),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}};function Dl(e,t,i){if(e)for(let n=0;n<e.length;n++){const o=e[n];if(ps(o)){Dl(t?o.getDisplayedChildren():o.getChildren(),t,i)}i(o)}}function kl(e){const t=[];return Dl(e,!0,(e=>{Ri(e)&&t.push(e)})),t}var Il={moduleName:"ColumnGroup",version:it,dynamicBeans:{headerGroupCellCtrl:class extends Nr{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,i,n,o){const{column:s,beans:r}=this,{context:a,colNames:l,colHover:d,colResize:c}=r;this.comp=e,o=kn(this,a,o),this.setGui(t,o),this.displayName=l.getDisplayNameForColumnGroup(s,"header"),this.addClasses(),this.setupMovingCss(o),this.setupExpandable(o),this.setupTooltip(),this.setupAutoHeight({wrapperElement:n,compBean:o}),this.setupUserComp(),this.addHeaderMouseListeners(o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const h=this.rowCtrl.pinned,u=s.getProvidedColumnGroup().getLeafColumns();null===d||void 0===d||d.createHoverFeature(o,u,t),o.createManagedBean(new Rr(s,t,r)),o.createManagedBean(new Ml(e,s)),c?this.resizeFeature=o.createManagedBean(c.createGroupResizeFeature(e,i,h,s)):e.setResizableDisplayed(!1),o.createManagedBean(new Ds(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(o,u),o.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(o),o.addDestroyFunc((()=>this.clearComponent()))}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=Gi(t)===e;if(!i&&!n)return;const o=e.getHighlighted();let s=!1,r=!1;if(!!this.rowCtrl.findHeaderCellCtrl((e=>e.column.isMoving()))){const e=this.beans.gos.get("enableRtl"),t=1===o,a=0===o;i&&(e?r=t:s=a),n&&(e?s=a:r=t)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",s),this.comp.addOrRemoveCssClass("ag-header-highlight-after",r)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const n=i.getInitialValues(t);i.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;null===(t=this.resizeFeature)||void 0===t||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i}=this.beans,n=function(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,Gn,"agColumnGroupHeader",t)}(t,i.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:t=>{e.setColumnGroupOpened(this.column.getProvidedColumnGroup(),t,"gridInitializing")},setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}}));n&&this.comp.setUserCompDetails(n)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=Co(t,this.gos,null,e);if(e.isPadding()){i.push("ag-header-group-cell-no-group");e.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&i.push("ag-header-span-height")}else i.push("ag-header-group-cell-with-group"),null!==t&&void 0!==t&&t.wrapHeaderText&&i.push("ag-header-cell-wrap-text");i.forEach((e=>this.comp.addOrRemoveCssClass(e,!0)))}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",t.isMoving());i.forEach((t=>{e.addManagedListeners(t,{movingChanged:n})})),n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===Do.ENTER){const e=this.column,t=!e.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){var t,i;this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),e&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some((e=>e.getColDef().suppressMovable||e.getColDef().lockPosition))}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}},beans:[class extends Si{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[];return wn(null,this.beans.colModel.getColTree(),(t=>{Pi(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];wn(null,t,(e=>{if(Pi(e)){const t=e.getColGroupDef(),n={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(n)}})),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:n,visibleCols:o,eventSvc:s}=this.beans;if(!i.getColTree())return;null===n||void 0===n||n.start();const r=[];e.forEach((e=>{const t=e.groupId,i=e.open,n=this.getProvidedColGroup(t);n&&n.isExpanded()!==i&&(n.setExpanded(i),r.push(n))})),o.refresh(t,!0),r.length&&s.dispatchEvent({type:"columnGroupOpened",columnGroup:1===r.length?r[0]:void 0,columnGroups:r}),null===n||void 0===n||n.finish()}setColumnGroupOpened(e,t,i){let n;n=Pi(e)?e.getId():e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return wn(null,this.beans.colModel.getColTree(),(i=>{Pi(i)&&i.getId()===e&&(t=i)})),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),o="After"===t?Gi(n):n[0],s="getCol".concat(t);for(;;){const t=this.beans.visibleCols[s](o);if(!t)return null;const n=this.getColGroupAtLevel(t,i);if(n!==e)return n}}getColGroupAtLevel(e,t){let i,n,o=e.getParent();for(;;){if(i=o.getProvidedColumnGroup().getLevel(),n=o.getPaddingLevel(),i+n<=t)break;o=o.getParent()}return o}updateOpenClosedVisibility(){Dl(this.beans.visibleCols.getAllTrees(),!1,(e=>{ps(e)&&e.calculateDisplayedColumns()}))}getColumnGroup(e,t){if(!e)return null;if(ps(e))return e;const i=this.beans.visibleCols.getAllTrees(),n="number"===typeof t;let o=null;return Dl(i,!1,(i=>{if(ps(i)){const s=i;let r;r=n?e===s.getGroupId()&&t===s.getPartId():e===s.getGroupId(),r&&(o=s)}})),o}createColumnGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:o,isStandaloneStructure:s}=e,r=this.mapOldGroupsById(o),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const o=o=>{const d=t;t=o;const c=e[d],h=(ps(c)?c.getProvidedColumnGroup():c).getOriginalParent();if(null==h){for(let t=d;t<o;t++)a.push(e[t]);return}const u=this.createColumnGroup(h,i,r,n,s);for(let t=d;t<o;t++)u.addChild(e[t]);l.push(u)};for(let i=1;i<e.length;i++){const n=e[i],s=(ps(n)?n.getProvidedColumnGroup():n).getOriginalParent(),r=e[t];s!==(ps(r)?r.getProvidedColumnGroup():r).getOriginalParent()&&o(i)}t<e.length&&o(e.length)}return s||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,n,o,s,r){const a=o.getUniqueKey(t.groupId||null,null),l=this.createMergedColGroupDef(t,a),d=new Ni(l,a,!1,i);this.createBean(d);const c=this.findExistingGroup(t,s);c&&s.splice(c.idx,1);const h=null===c||void 0===c?void 0:c.group;h&&d.setExpanded(h.isExpanded());const u=fn(this.beans,l.children,i+1,e,n,o,s,r);return d.setChildren(u),d}balanceColumnTree(e,t,i,n){const o=[];for(let s=0;s<e.length;s++){const r=e[s];if(Pi(r)){const e=r,s=this.balanceColumnTree(e.getChildren(),t+1,i,n);e.setChildren(s),o.push(e)}else{let s,a;for(let e=i-1;e>=t;e--){const e=n.getUniqueKey(null,null),i=this.createMergedColGroupDef(null,e),o=new Ni(i,e,!0,t);this.createBean(o),a&&a.setChildren([o]),a=o,s||(s=a)}if(s&&a){o.push(s);if(e.some((e=>Pi(e)))){a.setChildren([r]);continue}a.setChildren(e);break}o.push(r)}}return o}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Pi(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let n=0;n<e.length;n++){const o=e[n];if(Pi(o)){const e=o,n=this.findMaxDepth(e.getChildren(),t+1);i<n&&(i=n)}}return i}balanceTreeForAutoCols(e,t){const i=[];return e.forEach((e=>{let n=e;for(let i=t-1;i>=0;i--){const t=new Ni(null,"FAKE_PATH_".concat(e.getId(),"}_").concat(i),!0,i);this.createBean(t),t.setChildren([n]),n.originalParent=t,n=t}0===t&&(e.originalParent=null),i.push(n)})),i}createMergedColGroupDef(e,t){const i={},{gos:n,validation:o}=this.beans;return Object.assign(i,n.get("defaultColGroupDef")),Object.assign(i,e),null===o||void 0===o||o.validateColDef(i,t),i}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}createColumnGroup(e,t,i,n,o){const s=e.getGroupId(),r=t.getInstanceIdForKey(s);let a=i[us(s,r)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),ze(a)?a.reset():(a=new gs(e,s,r,n),o||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=e=>{e.forEach((e=>{if(ps(e)){const n=e;t[e.getUniqueId()]=n,i(n.getChildren())}}))};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach((e=>{if(e.parent=t,ps(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}}))}}],apiFunctions:{getAllDisplayedColumnGroups:function(e){return e.visibleCols.getAllTrees()},getCenterDisplayedColumnGroups:function(e){return e.visibleCols.treeCenter},getColumnGroup:function(e,t,i){var n,o;return null!==(n=null===(o=e.colGroupSvc)||void 0===o?void 0:o.getColumnGroup(t,i))&&void 0!==n?n:null},getColumnGroupState:function(e){var t,i;return null!==(t=null===(i=e.colGroupSvc)||void 0===i?void 0:i.getColumnGroupState())&&void 0!==t?t:[]},getDisplayNameForColumnGroup:function(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""},getLeftDisplayedColumnGroups:function(e){return e.visibleCols.treeLeft},getProvidedColumnGroup:function(e,t){var i,n;return null!==(i=null===(n=e.colGroupSvc)||void 0===n?void 0:n.getProvidedColGroup(t))&&void 0!==i?i:null},getRightDisplayedColumnGroups:function(e){return e.visibleCols.treeRight},resetColumnGroupState:function(e){var t;null===(t=e.colGroupSvc)||void 0===t||t.resetColumnGroupState("api")},setColumnGroupOpened:function(e,t,i){var n;null===(n=e.colGroupSvc)||void 0===n||n.setColumnGroupOpened(t,i,"api")},setColumnGroupState:function(e,t){var i;null===(i=e.colGroupSvc)||void 0===i||i.setColumnGroupState(t,"api")}}},Al={moduleName:"CheckboxCellRenderer",version:it,userComponents:{agCheckboxCellRenderer:class extends En{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[Zr]),this.eCheckbox=Tn,this.registerCSS(".ag-checkbox-cell{height:100%}")}init(e){this.refresh(e);const{eCheckbox:t,beans:i}=this,n=t.getInputElement();n.setAttribute("tabindex","-1"),R(n,"polite"),this.addManagedListeners(n,{click:e=>{if(fi(e),t.isDisabled())return;const i=t.getValue();this.onCheckboxChanged(i)},dblclick:e=>{fi(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===Do.SPACE&&!t.isDisabled()){e.eGridCell===Lt(i)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t;let i,n=!0;const{value:o,column:s,node:r}=e;if(r.group&&s)if("boolean"===typeof o)i=o;else{const e=s.getColId();e.startsWith(on)?i=null==o||""===o?void 0:"true"===o:r.aggData&&void 0!==r.aggData[e]?i=null!==o&&void 0!==o?o:void 0:n=!1}else i=null!==o&&void 0!==o?o:void 0;const{eCheckbox:a}=this;if(!n)return void a.setDisplayed(!1);a.setValue(i);const l=null!==(t=e.disabled)&&void 0!==t?t:!(null!==s&&void 0!==s&&s.isCellEditable(r));a.setDisabled(l);const d=this.getLocaleTextFunc(),c=q(d,i),h=l?c:"".concat(d("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(c,")");a.setInputAriaLabel(h)}onCheckboxChanged(e){const{eventSvc:t,params:i}=this,{column:n,node:o,value:s}=i,r={column:n,colDef:n.getColDef(),data:o.data,node:o,rowIndex:o.rowIndex,rowPinned:o.rowPinned,value:s};t.dispatchEvent(l({type:"cellEditingStarted"},r));const a=o.setDataValue(n,e,"edit");t.dispatchEvent(l(l({type:"cellEditingStopped"},r),{},{oldValue:s,newValue:e,valueChanged:a})),a||this.updateCheckbox(i)}}}};function Tl(e,t){if(!e)return;const i=e,n={};return Object.keys(i).forEach((e=>{if(t&&t.indexOf(e)>=0||Mi.has(e))return;const o=i[e],s="object"===typeof o&&null!==o&&o.constructor===Object;n[e]=s?Tl(o):o})),n}function El(e,t){const i=l(l({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...cn(e.columnTypes),...cn(t.columnTypes)]),i}function Rl(e,t,i){return t?t.baseDataType===e.baseDataType||(pt(46),!1):(pt(45,{parentCellDataType:i}),!1)}function Ll(e,t){if(e.valueFormatter)return i=>{var n;if(null!==(n=i.node)&&void 0!==n&&n.group){var o;const n=(null!==(o=i.colDef.pivotValueColumn)&&void 0!==o?o:i.column).getAggFunc();if(n){if("first"===n||"last"===n)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==n){if("number"===typeof i.value)return e.valueFormatter(i);if("object"===typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter(l(l({},i),{},{value:i.value.toNumber()}));if("value"in i.value)return e.valueFormatter(l(l({},i),{},{value:i.value.value}))}}return}if("groupRows"===t.get("groupDisplayType")&&!t.get("treeData"))return}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()){var s;if("string"===typeof i.value&&(null===(s=e.dataTypeMatcher)||void 0===s||!s.call(e,i.value)))return}return e.valueFormatter(i)}}function Pl(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((i=>{let[n,o]=i;return function(e,t,i,n){if(!t[i])return!1;const o=e[i];return null===o?(t[i]=!1,!1):void 0===n?!!o:o===n}(e,t,n,o)}))}var Nl={moduleName:"DataType",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(pn(e.source))}))}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes(),i={};this.dataTypeDefinitions=i;const n={};this.formatValueFuncs=n;const o=e=>t=>{const{column:i,node:n,value:o}=t;let s=i.getColDef().valueFormatter;return s===e.groupSafeValueFormatter&&(s=e.valueFormatter),this.beans.valueSvc.formatValue(i,n,o,s)};Object.entries(t).forEach((e=>{let[t,s]=e;const r=l(l({},s),{},{groupSafeValueFormatter:Ll(s,this.gos)});i[t]=r,n[t]=o(r)}));const s=null!==(e=this.gos.get("dataTypeDefinitions"))&&void 0!==e?e:{},r={};this.dataTypeMatchers=r,Object.entries(s).forEach((e=>{let[a,l]=e;const d=this.processDataTypeDefinition(l,s,[a],t);d&&(i[a]=d,l.dataTypeMatcher&&(r[a]=l.dataTypeMatcher),n[a]=o(d))})),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach((e=>{const i=r[e];i&&delete r[e],r[e]=null!==i&&void 0!==i?i:t[e].dataTypeMatcher}))}processDataTypeDefinition(e,t,i,n){let o;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=n[s];const r=t[s];if(i&&r&&(i=r),!Rl(e,i,s))return;o=El(i,e)}else{if(i.includes(s))return void pt(44);const r=t[s];if(!Rl(e,r,s))return;const a=this.processDataTypeDefinition(r,t,[...i,s],n);if(!a)return;o=El(a,e)}return l(l({},o),{},{groupSafeValueFormatter:Ll(o,this.gos)})}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:o}=t;if(void 0===n&&(n=e.cellDataType),null!=n&&!0!==n||(n=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(o,i)),!n)return void(e.cellDataType=!1);const s=this.dataTypeDefinitions[n];if(s)return e.cellDataType=n,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,s,i),s.columnTypes;pt(47,{cellDataType:n})}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.removeEventListener("columnStateUpdated",i)))}canInferCellDataType(e,t){const{gos:i}=this;if(!bt(i))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(Pl(t,n))return!1;const o=null===t.type?e.type:t.type;if(o){var s;const e=null!==(s=i.get("columnTypes"))&&void 0!==s?s:{};if(cn(o).some((t=>{const i=e[t.trim()];return i&&Pl(i,n)})))return!1}return!Pl(e,n)}inferCellDataType(e,t){var i;if(!e)return;let n;const o=this.getInitialData();if(o){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=ki(o,e,t)}else this.initWaitForRowData(t);if(null==n)return;const[s]=null!==(i=Object.entries(this.dataTypeMatchers).find((e=>{let[t,i]=e;return i(n)})))&&void 0!==i?i:["object"];return s}getInitialData(){const e=this.gos.get("rowData");if(null!==e&&void 0!==e&&e.length)return e[0];if(this.initialData)return this.initialData;{var t;const e=null===(t=this.beans.rowModel.rootNode)||void 0===t?void 0:t.allLeafChildren;if(null!==e&&void 0!==e&&e.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:n}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[o]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;s&&(null===o||void 0===o||o(),this.isPendingInference=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&(null===i||void 0===i||i.processResizeOperations()),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},o={};Object.entries(this.columnStateUpdatesPendingInference).forEach((e=>{let[s,r]=e;const a=this.colModel.getCol(s);if(!a)return;const l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const d=a.getColDef();if(t&&d.type&&d.type!==l.type){const e=function(e,t){const i=Ji(e);return t.forEach((e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex})),i}(a,r);e.rowGroup&&null==e.rowGroupIndex&&(n[s]=e),e.pivot&&null==e.pivotIndex&&(o[s]=e),i.push(e)}})),t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,o)),i.length&&Zi(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:n,pivotColsSvc:o}=this.beans;return null===n||void 0===n||n.restoreColumnOrder(i,e),null===o||void 0===o||o.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=xn(this.beans,i,e.getColId());return e.setColDef(n,i,t),!0}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){var t;const{dateString:i}=this.dataTypeDefinitions;return e&&null!==(t=this.getDataTypeDefinition(e))&&void 0!==t?t:i}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null===(t=this.getDataTypeDefinition(e))||void 0===t?void 0:t.baseDataType}checkType(e,t){var i;if(null==t)return!0;const n=null===(i=this.getDataTypeDefinition(e))||void 0===i?void 0:i.dataTypeMatcher;return!n||n(t)}validateColDef(e){const t=e=>pt(48,{property:e});if("object"===e.cellDataType){const{object:i}=this.dataTypeDefinitions;e.valueFormatter!==i.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,n){var o;const s=this.formatValueFuncs[t];switch(i.baseDataType){case"number":e.cellEditor="agNumberCellEditor";break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===Do.SPACE;break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=s;break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=s;break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const i=this.colModel.getColDefCol(n),o=null===i||void 0===i?void 0:i.getColDef();if(!i||!o)return 0;const r=null==e?"":s({column:i,node:null,value:e}),a=null==t?"":s({column:i,node:null,value:t});return r===a?0:r>a?1:-1},e.keyCreator=s}null===(o=this.beans.filterManager)||void 0===o||o.setColDefPropertiesForDataType(e,i,s)}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var t,i;return""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:Number(e.newValue)},valueFormatter:e=>null==e.value?"":"number"!==typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:Ve(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>{var t,i;return null==e.newValue?e.newValue:""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:"true"===String(e.newValue).toLowerCase()},valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:{baseDataType:"date",valueParser:e=>pa(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>{var i;return null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?null!==(i=ca(e.value,!1))&&void 0!==i?i:"":t("invalidDate","Invalid Date")},dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>{var t;return null!==(t=pa(e))&&void 0!==t?t:void 0},dateFormatter:e=>{var t;return null!==(t=ca(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0},valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"===typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>{var t;return null!==(t=Ve(e.value))&&void 0!==t?t:""}}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}],dependsOn:[Al]},Fl={moduleName:"ColumnFlex",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.source?e.source:"flex";null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth);const i=this.flexViewportWidth;if(!i)return[];const{visibleCols:n}=this.beans,o=n.centerCols;let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=o.length-1;e>=0;e--)if(t.has(o[e])){s=e;break}}let r=!1;const a=o.map(((e,t)=>{const i=e.getFlex(),n=null!=i&&i>0&&t>s;return r||(r=n),{col:e,isFlex:n,flex:Math.max(0,null!==i&&void 0!==i?i:0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}}));if(!r)return[];let l=a.length,d=a.reduce(((e,t)=>e+t.flex),0),c=i;const h=(e,i)=>{e.frozenSize=i,e.col.setActualWidth(i,t),c-=i,d-=e.flex,l-=1},u=e=>null!=e.frozenSize;for(const g of a)g.isFlex||h(g,g.initialSize);for(;l>0;){const e=Math.round(d<1?c*d:c);let t,i=0,n=0;for(const r of a){if(u(r))continue;t=r,n+=e*(r.flex/d);const o=n-i,s=Math.round(o);r.targetSize=s,i+=s}t&&(t.targetSize+=e-i);let o=0;for(const r of a){if(u(r))continue;const e=r.targetSize,t=Math.min(Math.max(e,r.min),r.max);o+=t-e,r.violationType=t===e?void 0:t<e?"max":"min",r.targetSize=t}const s=0===o?"all":o>0?"min":"max";for(const r of a)u(r)||"all"!==s&&r.violationType!==s||h(r,r.targetSize)}e.skipSetLeft||n.setLeftValues(t),e.updateBodyWidths&&n.updateBodyWidths();const p=a.filter((e=>e.isFlex&&!e.violationType)).map((e=>e.col));if(e.fireResizedEvent){const e=a.filter((e=>e.initialSize!==e.frozenSize)).map((e=>e.col)),i=a.filter((e=>e.flex)).map((e=>e.col));Yi(this.eventSvc,e,!0,t,i)}return p}initCol(e){const{flex:t,initialFlex:i}=e.colDef;void 0!==t?e.flex=t:void 0!==i&&(e.flex=i)}setColFlex(e,t){e.flex=null!==t&&void 0!==t?t:null,e.dispatchStateUpdatedEvent("flex")}}]},Ol={moduleName:"ColumnApi",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,n){var o,s;const r=e.slice();t?r.sort(((e,t)=>i.indexOf(e)-i.indexOf(t))):i&&r.sort(((e,t)=>n.indexOf(e)-n.indexOf(t)));const a=null===(o=this.rowGroupColsSvc)||void 0===o?void 0:o.columns,l=null===(s=this.pivotColsSvc)||void 0===s?void 0:s.columns;return this.buildColumnDefs(r,a,l)}buildColumnDefs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=[],o={};return e.forEach((e=>{let s=!0,r=this.createDefFromColumn(e,t,i),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=o[a.getGroupId()];if(t){t.children.push(r),s=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[r],o[e.groupId]=e,r=e,a=a.getOriginalParent()),null!=a&&l===a){s=!1;break}l=a}s&&n.push(r)})),n}createDefFromGroup(e){const t=Tl(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=Tl(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=!e.isVisible()||void 0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,n}}],apiFunctions:{getColumnDef:function(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null},getDisplayNameForColumn:function(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""},getColumn:function(e,t){return e.colModel.getColDefCol(t)},getColumns:function(e){return e.colModel.getColDefCols()},applyColumnState:function(e,t){return Zi(e,t,"api")},getColumnState:function(e){return Qi(e)},resetColumnState:function(e){Xi(e,"api")},isPinning:function(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()},isPinningLeft:function(e){return e.visibleCols.isPinningLeft()},isPinningRight:function(e){return e.visibleCols.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleCols.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleCols.getColBefore(t)},setColumnsVisible:function(e,t,i){e.colModel.setColsVisible(t,i,"api")},setColumnsPinned:function(e,t,i){var n;null===(n=e.pinnedCols)||void 0===n||n.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.colModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleCols.leftCols},getDisplayedCenterColumns:function(e){return e.visibleCols.centerCols},getDisplayedRightColumns:function(e){return e.visibleCols.rightCols},getAllDisplayedColumns:function(e){return e.visibleCols.allCols},getAllDisplayedVirtualColumns:function(e){return e.colViewport.getViewportColumns()},getColumnDefs:function(e){return e.colModel.getColumnDefs()}}};var Bl={moduleName:"CellRendererFunction",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;return class{refresh(){return!1}getGui(){return this.eGui}init(e){const i=t(e),n=typeof i;this.eGui="string"!==n&&"number"!==n&&"boolean"!==n?null!=i?i:De("<span></span>"):De("<span>"+i+"</span>")}}}}]},Gl="object"!==typeof window||!(null!==(c=window)&&void 0!==c&&null!==(c=c.document)&&void 0!==c&&null!==(c=c.fonts)&&void 0!==c&&c.forEach),zl=new WeakMap,_l=(e,t,i)=>{if(Gl)return;const n=t.getRootNode()===document?document.head:t;let o=zl.get(n);if(o||(o={css:new Set},zl.set(n,o)),o.css.has(e))return;const s=document.createElement("style");s.dataset.agGlobalCss=i,s.textContent=e,o.last?o.last.insertAdjacentElement("afterend",s):n.insertBefore(s,n.querySelector(":not(title, meta)")),o.css.add(e),o.last=s},Vl=e=>{_l(':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom,.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-floating-bottom{border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);height:var(--ag-row-height);white-space:nowrap;width:100%;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px))}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row-hover.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}:where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-background-color);border:var(--ag-input-border);border-radius:var(--ag-border-radius);cursor:pointer;font-family:inherit;padding:var(--ag-spacing) calc(var(--ag-spacing)*2);&:hover{background-color:var(--ag-row-hover-color)}&:active{border-color:var(--ag-accent-color)}&:disabled{background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-background-color);border:var(--ag-input-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{&:hover{background-color:var(--ag-icon-button-hover-color);border-radius:1px;box-shadow:0 0 0 4px var(--ag-icon-button-hover-color)}}.ag-filter-active{--ag-icon-button-hover-color:color-mix(in srgb,transparent,var(--ag-accent-color) 28%);background-color:color-mix(in srgb,transparent,var(--ag-accent-color) 14%);border-radius:1px;outline:solid 4px color-mix(in srgb,transparent,var(--ag-accent-color) 14%);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z")}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}:where(.ag-ltr) :where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize}&.ag-resizer-topRight{cursor:nesw-resize}&.ag-resizer-bottomRight{cursor:nwse-resize}&.ag-resizer-bottomLeft{cursor:nesw-resize}}:where(.ag-rtl) :where(.ag-resizer){&.ag-resizer-topLeft{cursor:nesw-resize}&.ag-resizer-topRight{cursor:nwse-resize}&.ag-resizer-bottomRight{cursor:nesw-resize}&.ag-resizer-bottomLeft{cursor:nwse-resize}}',e,"core"),Array.from(new Set(ao)).sort(((e,t)=>e.moduleName.localeCompare(t.moduleName))).forEach((t=>{var i;return null===(i=t.css)||void 0===i?void 0:i.forEach((i=>_l(i,e,"module-".concat(t.moduleName))))}))},Hl=new Set,Wl=e=>new Kl(e),jl="$default",Ul=0,Kl=class{constructor(e){var t;let{feature:i,params:n,modeParams:o={},css:s,cssImports:r}=e;this.feature=i,this.css=s,this.cssImports=r,this.modeParams=l({[jl]:l(l({},null!==(t=o[jl])&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{})},o)}use(e){let t=this._inject;if(null==t){let{css:e}=this;if(e){var i;const o="ag-theme-".concat(null!==(i=this.feature)&&void 0!==i?i:"part","-").concat(++Ul);"function"===typeof e&&(e=e()),e=":where(.".concat(o,") {\n").concat(e,"\n}\n");for(const t of null!==(n=this.cssImports)&&void 0!==n?n:[]){var n;e="@import url(".concat(JSON.stringify(t),");\n").concat(e)}t={css:e,class:o}}else t=!1;this._inject=t}return t&&e&&_l(t.css,e,t.class),!!t&&t.class}},Yl=e=>"--ag-".concat(e.replace(/[A-Z]/g,(e=>"-".concat(e))).toLowerCase()),Zl=e=>"var(".concat(Yl(e),")"),Xl=e=>({ref:"accentColor",mix:e}),ql=e=>({ref:"foregroundColor",mix:e}),Ql=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),Jl={ref:"accentColor"},$l={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:ql(.15),chromeBackgroundColor:Ql(.02),browserColorScheme:"light"},ed=l(l({},$l),{},{textColor:{ref:"foregroundColor"},accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:{ref:"backgroundColor"},sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Jl,rangeSelectionBackgroundColor:Xl(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Xl(.5),rowHoverColor:Xl(.08),columnHoverColor:Xl(.05),selectedRowBackgroundColor:Xl(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:{ref:"backgroundColor"},borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:{ref:"backgroundColor"},dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:ql(.7),focusShadow:{spread:3,color:Xl(.5)},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"iconSize + widgetVerticalSpacing"},iconSize:16,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Jl,toggleButtonOffBackgroundColor:Ql(.3),toggleButtonSwitchBackgroundColor:{ref:"backgroundColor"},toggleButtonSwitchInset:2,menuBorder:{color:ql(.2)},menuBackgroundColor:Ql(.03),menuTextColor:Ql(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:ql(.8),iconButtonHoverColor:ql(.1),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Jl},cellEditingShadow:{ref:"cardShadow"},dialogBorder:{color:ql(.2)},panelBackgroundColor:{ref:"backgroundColor"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:ql(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:ql(.13)},selectCellBackgroundColor:ql(.07),selectCellBorder:{color:ql(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterToolPanelGroupIndent:{ref:"spacing"},iconButtonHoverBackgroundColor:ql(.1),rowLoadingSkeletonEffectColor:ql(.15)}),td=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],id=(e=>{const t=new Map;return i=>{const n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}})((e=>{var t;return e=e.toLowerCase(),null!==(t=td.find((t=>e.endsWith(t.toLowerCase()))))&&void 0!==t?t:"length"})),nd=e=>"string"===typeof e?e:"number"===typeof e&&String(e),od=e=>{if("string"===typeof e)return e;if(e&&"ref"in e){const t=Zl(e.ref);if(null==e.mix)return t;const i=e.onto?Zl(e.onto):"transparent";return"color-mix(in srgb, ".concat(i,", ").concat(t," ").concat(((e,t,i)=>Math.max(t,Math.min(i,e)))(100*e.mix,0,100),"%)")}return!1},sd=e=>{if("string"===typeof e)return e;if("number"===typeof e)return"".concat(e,"px");if(e&&"calc"in e){const t=e.calc.replace(/ ?[*/+] ?/g," $& ");return"calc(".concat(t.replace(/-?[a-z][a-z0-9]*\b(?![-(])/gi,(e=>"-"===e[0]?e:" ".concat(Zl(e)," "))),")")}return!(!e||!("ref"in e))&&Zl(e.ref)},rd=nd,ad=e=>"string"===typeof e?e:e&&"googleFont"in e?ad(e.googleFont):e&&"ref"in e?Zl(e.ref):!!Array.isArray(e)&&e.map((e=>("object"===typeof e&&"googleFont"in e&&(e=e.googleFont),ld(e)))).join(", "),ld=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),dd=nd,cd=e=>"string"===typeof e?e:e&&"url"in e?"url(".concat(JSON.stringify(e.url),")"):e&&"svg"in e?cd({url:"data:image/svg+xml,".concat(encodeURIComponent(e.svg))}):!(!e||!("ref"in e))&&Zl(e.ref),hd={color:od,colorScheme:nd,length:sd,scale:nd,border:(e,t)=>{var i,n,o;return"string"===typeof e?e:!0===e?"solid 1px var(--ag-border-color)":!1===e?"columnBorder"===t?"solid 1px transparent":"none":e&&"ref"in e?Zl(e.ref):rd(null!==(i=e.style)&&void 0!==i?i:"solid")+" "+sd(null!==(n=e.width)&&void 0!==n?n:1)+" "+od(null!==(o=e.color)&&void 0!==o?o:{ref:"borderColor"})},borderStyle:rd,shadow:e=>{var t,i,n,o,s;return"string"===typeof e?e:!1===e?"none":e&&"ref"in e?Zl(e.ref):[sd(null!==(t=e.offsetX)&&void 0!==t?t:0),sd(null!==(i=e.offsetY)&&void 0!==i?i:0),sd(null!==(n=e.radius)&&void 0!==n?n:0),sd(null!==(o=e.spread)&&void 0!==o?o:0),od(null!==(s=e.color)&&void 0!==s?s:{ref:"foregroundColor"})].join(" ")},image:cd,fontFamily:ad,fontWeight:dd,duration:(e,t)=>"string"===typeof e?e:"number"===typeof e?(e>=10&&gt(104,{value:e,param:t}),"".concat(e,"s")):!(!e||!("ref"in e))&&Zl(e.ref)},ud=(e,t)=>{const i=id(e);return hd[i](t,e)},pd=()=>new gd,gd=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.parts=e}withPart(t){return"function"===typeof t&&(t=t()),t instanceof Kl?new e([...this.parts,t]):(mt(259,{part:t},"Invalid part"),this)}withoutPart(e){return this.withPart(Wl({feature:e}))}withParams(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jl;return this.withPart(Wl({modeParams:{[t]:e}}))}_startUse(e){let{container:t,loadThemeGoogleFonts:i}=e;if(Gl)return;yd(),Vl(t);const n=vd(this);if(n.length>0)for(const o of n)i&&Cd(o);for(const o of this.parts)o.use(t)}_getCssClass(){var e;return null!==(e=this._cssClassCache)&&void 0!==e?e:this._cssClassCache=md(this.parts).map((e=>e.use())).filter(Boolean).join(" ")}_getModeParams(){let e=this._paramsCache;if(!e){const i={[jl]:l({},ed)};for(const e of md(this.parts))for(const[n,o]of Object.entries(e.modeParams))if(o){var t;const e=null!==(t=i[n])&&void 0!==t?t:i[n]={},s=new Set;for(const[t,i]of Object.entries(o))void 0!==i&&(e[t]=i,s.add(t));if(n===jl)for(const[t,n]of Object.entries(i))if(t!==jl)for(const e of s)delete n[e]}this._paramsCache=e=i}return e}_getPerGridCss(e){const t="##SELECTOR##";let i=this._paramsCssCache;if(!i){let e="",n="";for(const[t,i]of Object.entries(this._getModeParams())){if(t!==jl){const i="object"===typeof CSS?CSS.escape(t):t,o=':where([data-ag-theme-mode="'.concat(i,'"]) & {\n');e+=o,n+=o}for(const[t,o]of Object.entries(i)){const i=ud(t,o);if(!1===i)gt(107,{key:t,value:o});else{const o=Yl(t),s=o.replace("--ag-","--ag-inherited-");e+="\t".concat(o,": var(").concat(s,", ").concat(i,");\n"),n+="\t".concat(s,": var(").concat(o,");\n")}}t!==jl&&(e+="}\n",n+="}\n")}let o="".concat(t," {\n").concat(e,"}\n");o+=":has(> ".concat(t,"):not(").concat(t,") {\n").concat(n,"}\n"),this._paramsCssCache=i=o}return i.replaceAll(t,":where(.".concat(e,")"))}},md=e=>{const t=new Map;for(const n of e)t.set(n.feature,n);const i=[];for(const n of e)n.feature&&t.get(n.feature)!==n||i.push(n);return i},vd=e=>{const t=new Set,i=e=>{if(Array.isArray(e))e.forEach(i);else{const i=null===e||void 0===e?void 0:e.googleFont;"string"===typeof i&&t.add(i)}};return Object.values(e._getModeParams()).flatMap((e=>Object.values(e))).forEach(i),Array.from(t).sort()},fd=!1,yd=()=>{if(!fd){fd=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},bd=new Set,Cd=async e=>{bd.add(e);const t="@import url('https://".concat(xd,"/css2?family=").concat(encodeURIComponent(e),":wght@100;200;300;400;500;600;700;800;900&display=swap');\n");_l(t,document.head,"googleFont:".concat(e))},xd="fonts.googleapis.com",wd=Wl({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:{ref:"backgroundColor"},checkboxUncheckedBorderColor:Ql(.3),checkboxCheckedBackgroundColor:Jl,checkboxCheckedBorderColor:Jl,checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:{ref:"backgroundColor"},checkboxIndeterminateBackgroundColor:Ql(.3),checkboxIndeterminateBorderColor:Ql(.3),checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:{ref:"backgroundColor"},radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:'.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'}),Sd=Wl({feature:"colorScheme",params:$l}),Md=Wl({feature:"colorScheme",params:l(l({},$l),{},{foregroundColor:"#000000de",borderColor:"#60300026",chromeBackgroundColor:"#60300005"})}),Dd=Wl({feature:"colorScheme",params:l(l({},$l),{},{foregroundColor:"#000",chromeBackgroundColor:"#f3f8f8"})}),kd=l(l({},$l),{},{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Ql(.05),rowHoverColor:Xl(.15),selectedRowBackgroundColor:Xl(.2),menuBackgroundColor:Ql(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",checkboxUncheckedBorderColor:Ql(.4),toggleButtonOffBackgroundColor:Ql(.4)}),Id=Wl({feature:"colorScheme",params:kd}),Ad=Wl({feature:"colorScheme",params:{backgroundColor:"hsl(29, 10%, 17%)",foregroundColor:"#FFF",browserColorScheme:"dark"}}),Td=l(l({},kd),{},{backgroundColor:"#1f2836"}),Ed=Wl({feature:"colorScheme",params:Td}),Rd=Wl({feature:"colorScheme",params:$l,modeParams:{light:$l,dark:kd,"dark-blue":Td}}),Ld=':where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}',Pd=Wl({feature:"iconSet",css:()=>Ld+".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24 6H8v2l8 8-8 8v2h16v-2H11l8-8-8-8h13z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 11.171 2.687 16l4.828 4.829-1.414 1.414L-.142 16l6.243-6.243zm16.97 0 1.414-1.414L32.142 16l-6.243 6.243-1.414-1.414L29.313 16zM16.028 13.2l2.829 2.828-2.829 2.829-2.828-2.829zm-4.857 11.285L16 29.313l4.829-4.828 1.414 1.414L16 32.142l-6.243-6.243zm0-16.97L9.757 6.101 16-.142l6.243 6.243-1.414 1.414L16 2.687z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667A13.32 13.32 0 0 0 2.667 16c0 7.373 5.96 13.333 13.333 13.333S29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M14 7h4v18h-4zM8 17h4v8H8zM20 13h4v12h-4z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26 25H6V7h20zM12 11H8v12h4zm6 0h-4v12h4zm6 12V11h-4v12z' style='fill-rule:nonzero' transform='translate(0 -1)'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m12 6 10 10-10 10-2-2 8-8-8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.984 13.894 27.05 2.828l2.122 2.122-11.066 11.066 11.066 11.066-2.122 2.12-11.066-11.066L4.918 29.202l-2.12-2.12 11.066-11.066L2.798 4.95l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M13.775 15.198 3.835 2.945a1.501 1.501 0 0 1 2.33-1.89l14.997 18.488A6.003 6.003 0 0 1 29.657 25c0 3.311-2.688 6-6 6s-6-2.689-6-6c0-1.335.437-2.569 1.176-3.566l-3.127-3.855-3.001 3.7A5.97 5.97 0 0 1 14 25c0 3.311-2.689 6-6 6s-6-2.689-6-6a6.003 6.003 0 0 1 8.315-5.536zm9.882 6.702a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M8 21.95a3.05 3.05 0 1 0 .001 6.101A3.05 3.05 0 0 0 8 21.95m9.63-11.505 1.932 2.381 8.015-9.881a1.5 1.5 0 0 0-2.329-1.89z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 26 10 16 20 6l2 2-8 8 8 8z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8.95 10.364 7 8.414 8.414 7l2.32 2.32A13.2 13.2 0 0 1 16.5 8c5.608 0 10.542 3.515 12.381 8.667L29 17l-.119.333a13 13 0 0 1-4.255 5.879l1.466 1.466-1.414 1.414-1.754-1.753A13.2 13.2 0 0 1 16.5 26c-5.608 0-10.542-3.515-12.381-8.667L4 17l.119-.333a13 13 0 0 1 4.83-6.303m1.445 1.445A11.02 11.02 0 0 0 6.148 17c1.646 4.177 5.728 7 10.352 7 1.76 0 3.441-.409 4.94-1.146l-1.878-1.878A5.06 5.06 0 0 1 16.5 22c-2.789 0-5.05-2.239-5.05-5 0-1.158.398-2.223 1.065-3.07zm1.855-.974 1.794 1.795A5.07 5.07 0 0 1 16.5 12c2.789 0 5.05 2.239 5.05 5 0 .9-.24 1.745-.661 2.474l2.305 2.306A11 11 0 0 0 26.852 17c-1.646-4.177-5.728-7-10.352-7-1.495 0-2.933.295-4.25.835'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16.5 23c4.624 0 8.706-2.823 10.352-7-1.646-4.177-5.728-7-10.352-7s-8.706 2.823-10.352 7c1.646 4.177 5.728 7 10.352 7M4.119 15.667C5.958 10.515 10.892 7 16.5 7s10.542 3.515 12.381 8.667L29 16l-.119.333C27.042 21.485 22.108 25 16.5 25S5.958 21.485 4.119 16.333L4 16zM16.5 21c2.789 0 5.049-2.239 5.049-5s-2.26-5-5.049-5-5.049 2.239-5.049 5 2.26 5 5.049 5' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m28 8-8 8v5l-6 6V16L6 8V6h22zM9 8l7 7v7l2-2v-5l7-7z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 7v1H9V7zm0-3v1H5.001V4zm-7 7H5v-1h2zm0-3H5V7h2zM3 5H1V4h2zm11 5v1H9v-1zm-7 4H5v-1h2zm7-1v1H9v-1z' style='fill-rule:nonzero' transform='matrix(2 0 0 2 0 -2)'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333a6.67 6.67 0 0 0-6.667 6.667 6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133 4.136 4.136 0 0 1-4.133 4.133h-5.333v2.533h5.333a6.67 6.67 0 0 0 6.667-6.667 6.67 6.67 0 0 0-6.667-6.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z' style='fill-rule:nonzero' transform='translate(-3.692 -3.692)scale(1.23077)'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 30H2V18h2.828v7.05l8.254-8.252 2.12 2.12-8.252 8.254H14zm4-28h12v12h-2.828V6.95l-8.254 8.252-2.12-2.12 8.252-8.254H18z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 13H0v-2h20zm0-6H0V5h20zm0-6H0v-2h20z' style='fill-rule:nonzero' transform='translate(6 9)'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 19a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 27a3 3 0 1 0 0-6 3 3 0 0 0 0 6'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M2 18h12v12h-2.828v-7.05l-8.254 8.252-2.12-2.12 8.252-8.254H2zm28-4H18V2h2.828v7.05L29.082.798l2.12 2.12-8.252 8.254H30z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.94 6 9.06 7.88 17.167 16 9.06 24.12 10.94 26l10-10z' style='fill-rule:nonzero' transform='translate(1)'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M23.708 14.645 16 6.939l-7.708 7.706 1.416 1.416L16 9.767l6.292 6.294zM23.708 20.355 16 28.061l-7.708-7.706 1.416-1.416L16 25.233l6.292-6.294z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.334 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4M16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008a213 213 0 0 0-4.07-.022v4.034h4.07z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.94 7.88 20.06 6l-10 10 10 10 1.88-1.88L13.833 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.708 2.355 8 10.061.292 2.355 1.708.939 8 7.233 14.292.939z' style='fill-rule:nonzero' transform='translate(8 14)'/%3E%3Cpath d='M5 26h22v2H5zM15 4h2v18h-2z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 10.667 16 21.334l8.667-10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.333 7.334 10.666 16l10.667 8.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.667 24.666 21.334 16 10.667 7.333z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 21.333 16 10.666l8.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M11.586 22.96 27.718 6.828 29.84 8.95 11.586 27.202 2.4 18.016l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m11.94 6-1.88 1.88L18.167 16l-8.107 8.12L11.94 26l10-10z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6 13.5h20v3H6z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.12 9.06 16 17.167 7.88 9.06 6 10.94l10 10 10-10z' style='fill-rule:nonzero' transform='translate(0 1)'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"}),Nd=Wl({feature:"iconSet",css:()=>Ld+".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M24 5.333H8V8l8.667 8L8 24v2.667h16v-4h-9.333L21.334 16l-6.667-6.667H24z'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='M13.333 11.556h5.333V8h3.556L16 1.778 9.778 8h3.556zm-1.777 1.777H8V9.777l-6.222 6.222L8 22.221v-3.556h3.556zM30.222 16 24 9.778v3.556h-3.556v5.333H24v3.556l6.222-6.222zm-11.555 4.444h-5.333V24H9.778L16 30.222 22.222 24h-3.556z'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 2.667C8.627 2.667 2.667 8.627 2.667 16S8.627 29.333 16 29.333 29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M5.333 10.667h5.333V5.334H5.333zm8 16h5.333v-5.333h-5.333zm-8 0h5.333v-5.333H5.333zm0-8h5.333v-5.333H5.333zm8 0h5.333v-5.333h-5.333zm8-13.334v5.333h5.333V5.333zm-8 5.334h5.333V5.334h-5.333zm8 8h5.333v-5.333h-5.333zm0 8h5.333v-5.333h-5.333z'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m25.333 8.547-1.88-1.88L16 14.12 8.547 6.667l-1.88 1.88L14.12 16l-7.453 7.453 1.88 1.88L16 17.88l7.453 7.453 1.88-1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m19 3-6 6 2 2 7-7V3m-10 9.5a.503.503 0 0 1-.5-.5c0-.274.226-.5.5-.5s.5.226.5.5-.226.5-.5.5M6 20c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2M6 8c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2m3.64-.36c.23-.5.36-1.05.36-1.64 0-2.194-1.806-4-4-4S2 3.806 2 6s1.806 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.194 0-4 1.806-4 4s1.806 4 4 4 4-1.806 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1z' style='fill-rule:nonzero' transform='translate(4 4)'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M21.106 15.088A5.19 5.19 0 0 0 16 10.814a5.17 5.17 0 0 0-3.668 1.522L9.866 9.868a12.2 12.2 0 0 1 6.133-1.646c5.186 0 9.614 3.225 11.408 7.778a12.34 12.34 0 0 1-5.276 6.133l-2.468-2.466a5.17 5.17 0 0 0 1.449-2.802h-2.123c-.148.508-.42.964-.782 1.33l-1.33-1.33h-2.514l2.196 2.196q-.272.049-.56.05a3.11 3.11 0 0 1-2.99-2.245h-2.123a5.19 5.19 0 0 0 7.3 3.836l2.247 2.247a12.2 12.2 0 0 1-4.434.828c-5.186 0-9.614-3.225-11.408-7.778a12.3 12.3 0 0 1 3.781-5.111l2.924 2.924a5.1 5.1 0 0 0-.404 1.275h4.206l-1.296-1.296a3.1 3.1 0 0 1 2.196-.903c1.404 0 2.587.924 2.976 2.199h2.13z'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16 8.222c-5.186 0-9.614 3.225-11.408 7.778 1.794 4.553 6.222 7.778 11.408 7.778S25.614 20.553 27.408 16C25.614 11.447 21.186 8.222 16 8.222m0 12.964c-2.862 0-5.186-2.324-5.186-5.186s2.324-5.186 5.186-5.186 5.186 2.324 5.186 5.186-2.324 5.186-5.186 5.186m0-8.297c-1.721 0-3.111 1.39-3.111 3.111s1.39 3.111 3.111 3.111 3.111-1.39 3.111-3.111-1.39-3.111-3.111-3.111'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M13.333 24h5.333v-2.667h-5.333zM4 8v2.667h24V8zm4 9.333h16v-2.667H8z'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M18.667 21.333h8.889A3.555 3.555 0 0 1 24 24.889h-5.333zm8.888-7.111v3.556h-8.889v-3.556zM24 7.111a3.555 3.555 0 0 1 3.556 3.556h-16V7.111zm-8.889 17.778h-3.556v-3.556h3.556zm0-7.111h-3.556v-3.556h3.556zM8 10.667H4.444A3.555 3.555 0 0 1 8 7.111z'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227v-2.667z'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333c-3.68 0-6.667 2.987-6.667 6.667s2.987 6.667 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333c2.28 0 4.133 1.853 4.133 4.133s-1.853 4.133-4.133 4.133h-5.333v2.533h5.333c3.68 0 6.667-2.987 6.667-6.667s-2.987-6.667-6.667-6.667z'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='m17.778 11.708 3.25-3.251 2.516 2.516-3.251 3.25h4.597v3.556h-4.597l3.251 3.25-2.516 2.516-3.25-3.251v4.597h-3.556v-4.597l-3.25 3.251-2.516-2.516 3.251-3.25H7.11v-3.556h4.597l-3.251-3.25 2.516-2.516 3.25 3.251V7.111h3.556zm-3.251 7.847h2.944l2.084-2.084v-2.944l-2.084-2.084h-2.944l-2.084 2.084v2.944z'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='M4 4h24v2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M4 24h24v-2.667H4zm0-6.667h24v-2.667H4zM4 8v2.667h24V8z'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 26.667a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 24q0-1.1.784-1.883A2.57 2.57 0 0 1 16 21.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 16q0-1.1.784-1.883A2.57 2.57 0 0 1 16 13.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 8q0-1.1.784-1.883A2.57 2.57 0 0 1 16 5.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='M8 25.333h16V28H8z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='M4 24h16v-2.667H4zM4 8v2.667h24V8zm0 9.333h24v-2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M25.333 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4zM16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m11.106 22.093-4.444 4.444-1.259-1.259 4.444-4.444zm5.872-16.63 9.618 9.62-.962.962-.962-.962-7.694 3.847 1.924 1.924-2.74 2.74-7.696-7.696 2.741-2.74 1.924 1.925 3.847-7.696-.962-.962z'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M26.667 30.223H5.334a3.556 3.556 0 0 1-3.556-3.556V5.334a3.556 3.556 0 0 1 3.556-3.556h21.333a3.556 3.556 0 0 1 3.556 3.556v21.333a3.556 3.556 0 0 1-3.556 3.556m-16-8.89H5.334v5.333h5.333zm16-7.11H12.444v12.444h14.223zm-9.15 6.85-2.039 2.037 2.039 2.039-1.257 1.257-3.295-3.296 3.295-3.295q.63.628 1.257 1.257zm-6.85-6.85H5.334v5.333h5.333zm15.74 3.816-1.257 1.256-2.039-2.037-2.037 2.037-1.257-1.256 3.295-3.296zM10.667 5.333H5.334v5.333h5.333zm8.889 0h-7.112v5.333h7.112zm7.111 0h-5.333v5.333h5.333z'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M9.333 12.667 16 19.334l6.667-6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M19.333 9.333 12.666 16l6.667 6.667V9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='M12.667 22.667 19.334 16l-6.667-6.667v13.333z'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='M9.333 19.333 16 12.666l6.667 6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='m11.727 21.167-5.56-5.56-1.893 1.88 7.453 7.453 16-16-1.88-1.88z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6.667 14.667h18.667v2.667H6.667z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M22.12 11.06 16 17.167 9.88 11.06 8 12.94l8 8 8-8z'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M26.667 12H5.334v2.667h21.333zM5.333 20h21.333v-2.667H5.333z'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"}),Fd={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},Od={"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>'},Bd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;const i=Od[e];if(i)return i;const n=Fd[e];if(!n)throw new Error("Missing icon data for ".concat(e));return'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="'.concat(t,'" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>')+n+"</svg>"},Gd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wl({feature:"iconSet",css:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ld;for(const i of[...Object.keys(Fd),...Object.keys(Od)]){const n=Bd(i,e.strokeWidth);t+=".ag-icon-".concat(i,"::before { mask-image: url('data:image/svg+xml,").concat(encodeURIComponent(n),"'); }\n")}return t}(e)})},zd=Gd({strokeWidth:1}),_d=Gd(),Vd=Gd({strokeWidth:2}),Hd=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}:where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',Wd={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"}},jd=(Wl({feature:"inputStyle",params:Wd,css:Hd}),Wl({feature:"inputStyle",params:l(l({},Wd),{},{inputBackgroundColor:{ref:"backgroundColor"},inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Jl},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Ql(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}}}),css:()=>Hd+":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){&:focus{box-shadow:var(--ag-focus-shadow)}}"})),Ud=(l(l({},Wd),{},{inputBorder:{width:2,color:ql(.3)},inputPaddingStart:{ref:"spacing"},inputFocusBorder:"solid 2px var(--ag-accent-color)",inputDisabledTextColor:{ref:"textColor",mix:.5},inputDisabledBorder:"solid 1px var(--ag-border-color)",inputInvalidBorder:{width:2,color:{ref:"invalidColor",mix:.3}}}),'.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}'),Kd={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},Yd=(Wl({feature:"tabStyle",params:Kd,css:Ud}),Wl({feature:"tabStyle",params:l(l({},Kd),{},{tabBarBorder:!0,tabBarBackgroundColor:ql(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:{ref:"backgroundColor"}}),css:Ud})),Zd=(l(l({},Kd),{},{tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabSelectedUnderlineColor:{ref:"primaryColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:0}),Wl({feature:"tabStyle",params:l(l({},Kd),{},{tabBarBorder:!0,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabHoverTextColor:Jl,tabSelectedTextColor:Jl,tabSelectedUnderlineColor:Jl,tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:"0.3s"}),css:Ud})),Xd=Wl({feature:"tabStyle",params:l(l({},Kd),{},{tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabBarHorizontalPadding:{ref:"spacing"},tabBarTopPadding:{ref:"spacing"},tabBarBorder:!0,tabHorizontalPadding:{calc:"spacing * 2"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:{ref:"spacing"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:{ref:"backgroundColor"}}),css:()=>Ud+".ag-tab{border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;border-top:var(--ag-tab-selected-border-width) solid transparent;flex:0;&.ag-tab-selected{border-left-color:var(--ag-tab-selected-border-color);border-right-color:var(--ag-tab-selected-border-color);border-top-color:var(--ag-tab-selected-border-color);margin-bottom:-1px;padding-bottom:calc(var(--ag-tab-bottom-padding) + 1px)}}"}),qd=pd().withPart(wd).withPart(Rd).withPart(_d).withPart(Yd).withPart((()=>jd)).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),Qd=pd().withPart(wd).withPart(Rd).withPart(Pd).withPart(Zd).withPart(jd).withParams({accentColor:"#2196f3",selectedRowBackgroundColor:Xl(.3),inputFocusBorder:{color:Xl(.4)},fontSize:13,dataFontSize:14,headerFontWeight:700,borderRadius:3,wrapperBorderRadius:3,tabSelectedUnderlineColor:Jl,tabSelectedBorderWidth:2,tabSelectedUnderlineTransitionDuration:.3}),Jd=pd().withPart(wd).withPart(Rd).withPart(Pd).withPart(Xd).withPart(jd).withParams({spacing:4,borderRadius:2,wrapperBorderRadius:2,headerColumnResizeHandleColor:"transparent",headerColumnBorder:!0,headerColumnBorderHeight:"50%",oddRowBackgroundColor:{ref:"chromeBackgroundColor",mix:.5},headerTextColor:ql(.5),fontSize:12,headerFontWeight:"bold"}),$d={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},ec={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},tc={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},ic={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},nc=0,oc=15538;function sc(e){return!!e&&e.getLeafColumns().some((e=>e.isSpanHeaderHeight()))}function rc(e,t){let i;if(ps(e)&&sc(e)&&e.isPadding()){const n=e;i=n.getLeafColumns()[0];let o=i;for(;o!==n;)t++,o=o.getParent()}return{column:i||e,headerRowIndex:t}}var ac=new Set(["gridPreDestroyed","fillStart","pasteStart"]),lc={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},dc=0,cc=0;var hc={moduleName:"ColumnHeaderComp",version:it,userComponents:{agColumnHeader:class extends En{constructor(){super(...arguments),this.eFilter=Tn,this.eFilterButton=Tn,this.eSortIndicator=Tn,this.eMenu=Tn,this.eLabel=Tn,this.eText=Tn,this.eSortOrder=Tn,this.eSortAsc=Tn,this.eSortDesc=Tn,this.eSortMixed=Tn,this.eSortNone=Tn,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&e.enableSorting==this.currentSort&&(null==this.currentSuppressMenuHide||this.shouldSuppressMenuHide()==this.currentSuppressMenuHide)&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.setDisplayName(e),!0)}workOutTemplate(){var e;const{params:t,beans:i}=this,n=null!==(e=t.template)&&void 0!==e?e:(o=!!i.sortSvc,'<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            '.concat(o?'<ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>':"","\n        </div>\n    </div>"));var o;return null!==n&&void 0!==n&&n.trim?n.trim():n}init(e){this.params=e;const{sortSvc:t,touchSvc:i,userCompFactory:n}=this.beans;this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,t?[t.getSortIndicatorSelector()]:void 0),null===i||void 0===i||i.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(n,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,On,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then((e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText.appendChild(e.getGui())):this.destroyBean(e))})))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;if(this.currentDisplayName=t,i===t||this.innerHeaderComponent||this.isLoadingInnerComponent)return;const n=Ho(t,!0);this.eText.innerText=n}addInIcon(e,t,i){if(null==t)return;const n=Wr(e,this.beans,i);n&&t.appendChild(n)}workOutShowMenu(){var e;return this.params.enableMenu&&!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return we(this.eMenu),void(this.eMenu=void 0);const{gos:e,eMenu:t,params:i}=this,n=ci(e);this.addInIcon(n?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!n);const o=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=o,this.addManagedElementListeners(t,{click:()=>i.showColumnMenu(t)}),t.classList.toggle("ag-header-menu-always-show",o)}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:n,eMenu:o,eFilterButton:s}=this,r=t.column,a=ci(i);var l,d;if(e&&!a){if(null!==(l=n.menuSvc)&&void 0!==l&&l.isFilterMenuInHeaderEnabled(r))return t.showFilter(null!==(d=null!==s&&void 0!==s?s:o)&&void 0!==d?d:this.getGui()),!0}else if(t.enableMenu){var c;return t.showColumnMenu(null!==(c=null!==o&&void 0!==o?o:s)&&void 0!==c?c:this.getGui()),!0}return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:t,eSortOrder:i,eSortAsc:n,eSortDesc:o,eSortMixed:s,eSortNone:r}=this;t.attachCustomElements(i,n,o,s,r)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;e&&this.configureFilter(t.enableFilterIcon,e,this.onFilterChangedIcon.bind(this),"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,n){if(!e)return we(t),!1;const o=this.params.column;return this.addInIcon(n,t,o),this.addManagedListeners(o,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();le(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t;const{eFilterButton:i,eMenu:n}=this;var o;return e?null!==(o=null!==i&&void 0!==i?i:n)&&void 0!==o?o:this.getGui():null!==(t=null!==n&&void 0!==n?n:i)&&void 0!==t?t:this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}}},icons:{menu:"menu",menuAlt:"menu-alt"}},uc={moduleName:"ColumnGroupHeaderComp",version:it,userComponents:{agColumnGroupHeader:class extends En{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=Tn,this.agClosed=Tn,this.agLabel=Tn,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons()}checkWarnings(){this.params.template&&pt(89)}workOutInnerHeaderGroupComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,Bn,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then((e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))})))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:n}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const o=e=>{if(yi(e))return;const t=!i.isExpanded();n.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(n,t,o),this.addTouchAndClickListeners(n,e,o);const s=e=>{fi(e)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:o}),this.updateIconVisibility();const r=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,i){var n;null===(n=e.touchSvc)||void 0===n||n.setupForHeaderGroup(this,t,i),this.addManagedElementListeners(t,{click:i})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const n=i.isExpanded();le(e,n),le(t,!n)}else le(e,!1),le(t,!1)}addInIcon(e,t){const i=Wr(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:e,agClosed:t}=this;return le(e,!1),void le(t,!1)}}setupLabel(e){var t;const{displayName:i,columnGroup:n}=e,o=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;if(ze(i)&&!o){const e=Ho(i,!0);this.agLabel.textContent=e}this.addOrRemoveCssClass("ag-sticky-label",!(null!==(t=n.getColGroupDef())&&void 0!==t&&t.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}}},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},pc={moduleName:"AnimationFrame",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const{gos:t,pagination:i}=this.beans,n=t.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,n&&0===e){var o;const e=null!==(o=null===i||void 0===i?void 0:i.getCurrentPage())&&void 0!==o?o:0;e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame")}verifyAnimationFrameOn(e){!1===this.active&&pt(92,{methodName:e})}createTask(e,t,i){this.verifyAnimationFrameOn(i);const n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,i)=>e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,n=this.createTasksP2,o=n.list,s=this.destroyTasks,r=(new Date).getTime();let a=(new Date).getTime()-r;const l=e<=0,d=this.beans.ctrlsSvc.getScrollFeature();for(;l||a<e;){if(!d.scrollGridIfNeeded()){let e;if(i.length)this.sortTaskList(t),e=i.pop().task;else if(o.length)this.sortTaskList(n),e=o.pop().task;else{if(!s.length){this.cancelledTasks.clear();break}e=s.pop()}this.cancelledTasks.has(e)||e()}a=(new Date).getTime()-r}i.length||o.length||s.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);Mo(this.beans,e)}isQueueEmpty(){return!this.ticking}}]},gc={moduleName:"Touch",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!te())return;this.mockContextMenu(e,e.element,((t,i,n)=>{var o,s;const{rowCtrl:r,cellCtrl:a}=e.getControlsForEventTarget(null!==(o=null===n||void 0===n?void 0:n.target)&&void 0!==o?o:null);null!==a&&void 0!==a&&a.column&&a.dispatchCellContextMenuEvent(null!==n&&void 0!==n?n:null),null===(s=this.beans.contextMenuSvc)||void 0===s||s.handleContextMenuMouseEvent(void 0,n,r,a)}))}handleCellDoubleClick(e,t){return!!(()=>{if(!te()||bi("dblclick"))return!1;const t=(new Date).getTime(),i=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,i})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){const{gos:t,sortSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:n,eMenu:o,eFilterButton:s}=e,r=new Pa(e.getGui(),!0),a=e.shouldSuppressMenuHide(),l=a&&ze(o),d=l?new Pa(o,!0):r;if(n.enableMenu){const t=l?"tap":"longTap",i=e=>n.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(d,{[t]:i})}if(n.enableSorting){const t=e=>{const t=e.touchStart.target;a&&(null!==o&&void 0!==o&&o.contains(t)||null!==s&&void 0!==s&&s.contains(t))||null===i||void 0===i||i.progressSort(n.column,!1,"uiColumnSorted")};e.addManagedListeners(r,{tap:t})}if(n.enableFilterButton&&s){const t=new Pa(s,!0);e.addManagedListeners(t,{tap:()=>n.showFilter(s)}),e.addDestroyFunc((()=>t.destroy()))}e.addDestroyFunc((()=>r.destroy())),l&&e.addDestroyFunc((()=>d.destroy()))}setupForHeaderGroup(e,t,i){const n=new Pa(t,!0);e.addManagedListeners(n,{tap:i}),e.addDestroyFunc((()=>n.destroy()))}mockContextMenu(e,t,i){if(!te())return;const n=new Pa(t);e.addManagedListeners(n,{longTap:e=>{i(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc((()=>n.destroy()))}}]};function mc(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var vc={moduleName:"KeyboardNavigation",version:it,beans:[class extends Si{constructor(){super(),this.beanName="navigation",this.onPageDown=et(this.onPageDown,100),this.onPageUp=et(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,n=e.altKey,o=e.ctrlKey||e.metaKey,s=!!this.beans.rangeSvc&&e.shiftKey,r=es(this.gos,e);let a=!1;switch(i){case Do.PAGE_HOME:case Do.PAGE_END:o||n||(this.onHomeOrEndKey(i),a=!0);break;case Do.LEFT:case Do.RIGHT:case Do.UP:case Do.DOWN:if(!r)return!1;!o||n||s||(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case Do.PAGE_DOWN:case Do.PAGE_UP:o||n||(a=this.handlePageUpDown(i,r,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===Do.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:o,focusColumn:s}=e,{scrollFeature:r}=this.gridBodyCon;ze(n)&&!n.isPinned()&&r.ensureColumnVisible(n),ze(t)&&r.ensureIndexVisible(t,i),e.isAsync||r.ensureIndexVisible(o);const{focusSvc:a,rangeSvc:l}=this.beans;a.setFocusedCell({rowIndex:o,column:s,rowPinned:null,forceBrowserFocus:!0}),null===l||void 0===l||l.setRangeToCell({rowIndex:o,rowPinned:null,column:s})}onPageDown(e){const t=this.beans,i=mc(t),n=this.getViewportHeight(),{pageBounds:o,rowModel:s,rowAutoHeight:r}=t,a=o.getPixelOffset(),l=i.top+n,d=s.getRowIndexAtPixel(l+a);null!==r&&void 0!==r&&r.active?this.navigateToNextPageWithAutoHeight(e,d):this.navigateToNextPage(e,d)}onPageUp(e){const t=this.beans,i=mc(t),{pageBounds:n,rowModel:o,rowAutoHeight:s}=t,r=n.getPixelOffset(),a=i.top,l=o.getRowIndexAtPixel(a+r);null!==s&&void 0!==s&&s.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pageBounds:n,rowModel:o}=this.beans,s=this.getViewportHeight(),r=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),d=o.getRow(e.rowIndex),c=i?(null===d||void 0===d?void 0:d.rowHeight)-s-l:s-l,h=(null===d||void 0===d?void 0:d.rowTop)+c;let u,p=o.getRowIndexAtPixel(h+l);if(p===e.rowIndex){const n=i?-1:1;t=p=e.rowIndex+n}i?(u="bottom",p<r&&(p=r),t<r&&(t=r)):(u="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(o.getRow(p))&&(t=p,u="top"),this.navigateTo({scrollIndex:t,scrollType:u,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),{pageBounds:n,rowModel:o}=this.beans,s=n.getLastRow();let r=0,a=e.rowIndex;for(;a>=0&&a<=s;){const e=o.getRow(a);if(e){var l;const t=null!==(l=e.rowHeight)&&void 0!==l?l:0;if(r+t>i)break;r+=t}a+=t}return Math.max(0,Math.min(a,s))}getViewportHeight(){const e=this.beans,t=mc(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return"number"===typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:n}=i,o=i.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:o,focusIndex:n,focusColumn:o})}onHomeOrEndKey(e){const t=e===Do.PAGE_HOME,{visibleCols:i,pageBounds:n}=this.beans,o=i.allCols,s=t?o[0]:Gi(o),r=t?n.getFirstRow():n.getLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:s,focusIndex:r,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t),o=this.beans,{ctrlsSvc:s,pageBounds:r,focusSvc:a,gos:l}=o;if(!1===n)if(i){const{rowIndex:i,rowPinned:n}=e.getRowPosition();(n?0===i:i===r.getFirstRow())&&(0===l.get("headerHeight")||Bo(o)?zo(o,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Xo&&e.focusCell(!0),(!i&&a.focusOverlay(!1)||zo(o,i))&&t.preventDefault();else n?t.preventDefault():null===n&&s.get("gridCtrl").allowFocusForNextCoreContainer(i)}tabToNextCell(e,t){const i=this.beans,{focusSvc:n,rowRenderer:o}=i,s=n.getFocusedCell();if(!s)return!1;let r=ds(i,s);return!!(r||(r=o.getRowByPosition(s),r&&r.isFullWidth()))&&!!this.tabToNextCellCommon(r,e,t)}tabToNextCellCommon(e,t,i){let n,o=e.editing;if(!o&&e instanceof Xo){const t=e.rowCtrl;t&&(o=t.editing)}return n=o?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),null===n?n:n||!!this.beans.focusSvc.focusedHeader}moveToNextEditingCell(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.cellPosition;e.eGui.focus(),e.stopEditing();const s=this.findNextCellToFocusOn(o,t,!0);return!1===s?null:null!=s&&(null===(i=this.beans.editSvc)||void 0===i||i.startEditing(s,null,!0,n),s.focusCell(!1),!0)}moveToNextEditingRow(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=e.cellPosition,o=this.findNextCellToFocusOn(n,t,!0);if(!1===o)return null;if(null==o)return!1;const s=o.cellPosition,r=this.isCellEditable(n),a=this.isCellEditable(s),l=s&&n.rowIndex===s.rowIndex&&n.rowPinned===s.rowPinned,{editSvc:d,rowEditSvc:c}=this.beans;if(r&&(null===d||void 0===d||d.setFocusOutOnEditor(e)),!l){const t=e.rowCtrl;null===d||void 0===d||d.stopRowEditing(t);const n=o.rowCtrl;null===c||void 0===c||c.startEditing(n,void 0,void 0,i)}return a?(null===d||void 0===d||d.setFocusInOnEditor(o),o.focusCell()):o.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.beans.visibleCols.allCols;let n;n=e instanceof Ws?l(l({},e.getRowPosition()),{},{column:t?i[0]:Gi(i)}):e.cellPosition;const o=this.findNextCellToFocusOn(n,t,!1);if(!1===o)return null;if(o instanceof Xo)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o.getRowPosition(),t);return ze(o)}findNextCellToFocusOn(e,t,i){let n=e;const o=this.beans,{cellNavigation:s,gos:r,focusSvc:a,rowRenderer:l,rangeSvc:d}=o;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=s.getNextTabbedCell(n,t);const c=r.getCallback("tabToNextCell");if(ze(c)){const o=c({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(!0===o)n=e;else{if(!1===o)return!1;n={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const e=yr(o);return a.focusHeaderPosition({headerPosition:{headerRowIndex:e+n.rowIndex,column:n.column},fromCell:!0}),null}const h="fullRow"===r.get("editType");if(i&&!h){if(!this.isCellEditable(n))continue}this.ensureCellVisible(n);const u=ds(o,n);if(!u){const e=l.getRowByPosition(n);if(!e||!e.isFullWidth()||i)continue;return e}if(!s.isSuppressNavigable(u.column,u.rowNode))return null===d||void 0===d||d.setRangeToCell(n),u}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell(e){let{rowIndex:t,rowPinned:i}=e;const{pinnedRowModel:n,rowModel:o}=this.beans;return"top"===i?null===n||void 0===n?void 0:n.getPinnedTopRow(t):"bottom"===i?null===n||void 0===n?void 0:n.getPinnedBottomRow(t):o.getRow(t)}navigateToNextCell(e,t,i,n){let o=i,s=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:d}=r;for(;o&&(o===i||!this.isValidNavigateCell(o));)d.get("enableRtl")?t===Do.LEFT&&(o=this.getLastCellOfColSpan(o)):t===Do.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=a.getNextCellToFocus(t,o),s=_e(o);if(s&&e&&e.key===Do.UP&&(o={rowIndex:-1,rowPinned:null,column:i.column}),n){const n=d.getCallback("navigateToNextCell");if(ze(n)){const s=n({key:t,previousCellPosition:i,nextCellPosition:o||null,event:e});o=ze(s)?{rowPinned:s.rowPinned,rowIndex:s.rowIndex,column:s.column}:null}}if(!o)return;if(o.rowIndex<0){const t=yr(r);return void l.focusHeaderPosition({headerPosition:{headerRowIndex:t+o.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const c=this.getNormalisedPosition(o);c?this.focusPosition(c):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=ds(this.beans,e);return t?(e=t.cellPosition,this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:n,focusSvc:o,eventSvc:s}=this.beans,r=i.allCols,a=n.getRowByPosition(e);if(!a||!a.isFullWidth())return!1;const l=o.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Gi(r):r[0])};this.focusPosition(d);const c=null==t?null!=l&&rs(d,l):t;return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:c}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),null===i||void 0===i||i.setRangeToCell(e)}isValidNavigateCell(e){return!!ls(this.beans,e)}getLastCellOfColSpan(e){const t=ds(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:Gi(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=Bt(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),n=t&&(null===i||void 0===i?void 0:i.sticky),{scrollFeature:o}=this.gridBodyCon;!n&&_e(e.rowPinned)&&o.ensureIndexVisible(e.rowIndex),e.column.isPinned()||o.ensureColumnVisible(e.column)}},class extends Si{constructor(){super(...arguments),this.beanName="cellNavigation"}getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===Do.UP,n=e===Do.DOWN,o=e===Do.LEFT;let s,r;const{pageBounds:a,gos:l,visibleCols:d}=this.beans;if(i||n)r=i?a.getFirstRow():a.getLastRow(),s=t.column;else{const e=d.allCols,i=l.get("enableRtl");r=t.rowIndex,s=o!==i?e[0]:Gi(e)}return{rowIndex:r,rowPinned:null,column:s}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case Do.UP:i=this.getCellAbove(i);break;case Do.DOWN:i=this.getCellBelow(i);break;case Do.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case Do.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,pt(8,{key:e})}n=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:n,rowModel:o}=this.beans;switch(e.rowPinned){case"top":i=null===n||void 0===n?void 0:n.getPinnedTopRow(e.rowIndex);break;case"bottom":i=null===n||void 0===n?void 0:n.getPinnedBottomRow(e.rowIndex);break;default:i=o.getRow(e.rowIndex)}if(!i)return!1;return!this.isSuppressNavigable(t,i)}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let n=!1;const{pageBounds:o,pinnedRowModel:s,rowModel:r}=this.beans;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return r.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:null!==s&&void 0!==s&&s.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return null!==s&&void 0!==s&&s.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(n=!0);const a=r.getRow(e.rowIndex),l=n?void 0:this.getNextStickyPosition(a);return l||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){const{gos:i,rowRenderer:n}=this.beans;if(!Bt(i)||!e||!e.sticky)return;let o=[];o=n.getStickyTopRowCtrls().some((t=>t.rowNode.rowIndex===e.rowIndex))?[...n.getStickyTopRowCtrls()].sort(((e,t)=>e.rowNode.rowIndex-t.rowNode.rowIndex)):[...n.getStickyBottomRowCtrls()].sort(((e,t)=>t.rowNode.rowIndex-e.rowNode.rowIndex));const s=t?-1:1,r=o.findIndex((t=>t.rowNode.rowIndex===e.rowIndex)),a=o[r+s];return a?{rowIndex:a.rowNode.rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex,{pinnedRowModel:n,pageBounds:o}=this.beans;if("top"===t){var s;return(null!==(s=null===n||void 0===n?void 0:n.getPinnedTopRowCount())&&void 0!==s?s:-1)<=i}if("bottom"===t){var r;return(null!==(r=null===n||void 0===n?void 0:n.getPinnedBottomRowCount())&&void 0!==r?r:-1)<=i}return o.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,{pageBounds:n,pinnedRowModel:o,rowModel:s}=this.beans;let r=!1;const a=()=>{var e;return{rowIndex:null!==(e=null===o||void 0===o?void 0:o.getPinnedTopRowCount())&&void 0!==e?e:-1,rowPinned:"top"}};if(i?0===t:t===n.getFirstRow()){if("top"===i)return null;if(!i)return null!==o&&void 0!==o&&o.isRowsToRender("top")?a():null;if(s.isRowsToRender()){return{rowIndex:n.getLastRow(),rowPinned:null}}return null!==o&&void 0!==o&&o.isRowsToRender("top")?a():null}i&&(r=!0);const l=s.getRow(e.rowIndex),d=r?void 0:this.getNextStickyPosition(l,!0);return d||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let o=e.rowIndex,s=e.rowPinned,r=t.getColAfter(e.column);if(!r){var a;r=n[0];const t=this.getRowBelow(e);if(_e(t))return null;if(!t.rowPinned&&null!==(a=null===i||void 0===i?void 0:i.isRowInPage(t))&&void 0!==a&&!a)return null;o=t?t.rowIndex:null,s=t?t.rowPinned:null}return{rowIndex:o,column:r,rowPinned:s}}getNextTabbedCellBackwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let o=e.rowIndex,s=e.rowPinned,r=t.getColBefore(e.column);if(!r){var a;r=Gi(n);const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(_e(t))return null;if(!t.rowPinned&&null!==(a=null===i||void 0===i?void 0:i.isRowInPage(t))&&void 0!==a&&!a)return null;o=t?t.rowIndex:null,s=t?t.rowPinned:null}return{rowIndex:o,column:r,rowPinned:s}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if("boolean"===typeof i)return i;if("function"===typeof i){return i(e.createColumnFunctionCallbackParams(t))}return!1}},class extends Si{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}));const t=Tt(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:n,colGroupSvc:o,ctrlsSvc:s}=this.beans;var r;"string"===typeof e?(i=n.getCol(e),i||(i=null!==(r=null===o||void 0===o?void 0:o.getColumnGroup(e))&&void 0!==r?r:null)):i=e;if(!i)return null;const a=s.getHeaderRowContainerCtrl(),l="filter"===Gi((null===a||void 0===a?void 0:a.getAllCtrls())||[]).type,d=yr(this.beans)-1;let c=-1,h=i;for(;h;)c++,h=h.getParent();let u=c;return t&&l&&u===d-1&&u++,-1===u?null:{headerRowIndex:u,column:i}}navigateVertically(e,t,i){const n=this.beans.focusSvc;if(t||(t=n.focusedHeader),!t)return!1;const{headerRowIndex:o}=t,s=t.column,r=yr(this.beans),a="UP"===e,l=this.getHeaderRowType(o);let{headerRowIndex:d,column:c,headerRowIndexWithoutSpan:h}=a?function(e,t,i){const n="filter"===e,o="column"===e;let s=n?t:t.getParent(),r=i-1,a=r;if(o&&sc(t.getParent())){for(;s&&s.isPadding();)s=s.getParent(),r--;a=r,r<0&&(s=t,r=i,a=void 0)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:a}}(l,s,o):function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"After",o=t,s=i+1;const r=s;if("group"===e){const e=t.getDisplayedLeafColumns(),i="After"===n?e[0]:Gi(e),r=[];let a=i;for(;a.getParent()!==t;)a=a.getParent(),r.push(a);if(o=i,i.isSpanHeaderHeight())for(let t=r.length-1;t>=0;t--){const e=r[t];if(!e.isPadding()){o=e;break}s++}else o=Gi(r),o||(o=i)}return{column:o,headerRowIndex:s,headerRowIndexWithoutSpan:r}}(l,s,o),u=!1;return d<0&&(d=0,c=s,u=!0),d>=r?(d=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==h&&(this.currentHeaderRowWithoutSpan=h),!(!u&&!c)&&n.focusHeaderPosition({headerPosition:{headerRowIndex:d,column:c},allowUserOverride:!0,event:i})}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const{focusSvc:n,gos:o}=this.beans,s=n.focusedHeader;let r,a;if(-1!==this.currentHeaderRowWithoutSpan?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,"LEFT"===e!==o.get("enableRtl")?(a="Before",r=this.findHeader(s,a)):(a="After",r=this.findHeader(s,a)),r||!t)return n.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const e=o.getCallback("tabToNextHeader");if(e)return n.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:r,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){var n;const o=e.headerRowIndex;let s,r=null;const a=this.beans;if("Before"===t?o>0&&(s=o-1,this.currentHeaderRowWithoutSpan-=1,r=this.findColAtEdgeForHeaderRow(s,"end")):(s=o+1,this.currentHeaderRowWithoutSpan<yr(a)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,r=this.findColAtEdgeForHeaderRow(s,"start")),!r)return!1;const{column:l,headerRowIndex:d}=rc(r.column,null===(n=r)||void 0===n?void 0:n.headerRowIndex);return a.focusSvc.focusHeaderPosition({headerPosition:{column:l,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if(ps(e)){const n=e.getDisplayedLeafColumns();t="Before"===i?Gi(n):n[0]}else t=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(t)}}findHeader(e,t){let i,n;const{colGroupSvc:o,visibleCols:s}=this.beans;var r;ps(e.column)?i=null!==(r=null===o||void 0===o?void 0:o.getGroupAtDirection(e.column,t))&&void 0!==r?r:void 0:(n="getCol".concat(t),i=s[n](e.column));if(!i)return;const{headerRowIndex:a}=e;if("filter"!==this.getHeaderRowType(a)){const e=[i];for(;i.getParent();)i=i.getParent(),e.push(i);i=e[Math.max(0,e.length-1-a)]}const{column:l,headerRowIndex:d}=rc(i,a);return{column:l,headerRowIndex:d}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const{visibleCols:i,ctrlsSvc:n,colGroupSvc:o}=this.beans,s=i.allCols,r=s["start"===t?0:s.length-1];if(!r)return;const a=n.getHeaderRowContainerCtrl(r.getPinned()),l=null===a||void 0===a?void 0:a.getRowType(e);if("group"==l){return{headerRowIndex:e,column:null===o||void 0===o?void 0:o.getColGroupAtLevel(r,e)}}return{headerRowIndex:null==l?-1:e,column:r}}}],apiFunctions:{getFocusedCell:function(e){return e.focusSvc.getFocusedCell()},clearFocusedCell:function(e){return e.focusSvc.clearFocusedCell()},setFocusedCell:function(e,t,i,n){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})},setFocusedHeader:function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=null===(i=e.headerNavigation)||void 0===i?void 0:i.getHeaderPositionForColumn(t,n);o&&e.focusSvc.focusHeaderPosition({headerPosition:o})},tabToNextCell:function(e,t){var i,n;return null!==(i=null===(n=e.navigation)||void 0===n?void 0:n.tabToNextCell(!1,t))&&void 0!==i&&i},tabToPreviousCell:function(e,t){var i,n;return null!==(i=null===(n=e.navigation)||void 0===n?void 0:n.tabToNextCell(!0,t))&&void 0!==i&&i}}},fc=class extends Si{constructor(e,t){super(),this.element=e,this.isLeft=t,this.getWidth=t?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({["".concat(this.isLeft?"left":"right","PinnedWidthChanged")]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;le(this.element,t),Ee(this.element,e)}},yc={moduleName:"PinnedColumn",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}));const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,n=xt(e,"print"),o=n?0:t.getColsLeftWidth(),s=n?0:t.getDisplayedColumnsRightWidth();o!=this.leftWidth&&(this.leftWidth=o,i.dispatchEvent({type:"leftPinnedWidthChanged"})),s!=this.rightWidth&&(this.rightWidth=s,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=ge(this.gridBodyCtrl.eBodyViewport);if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50);const i=this.gos.getCallback("processUnpinnedColumns");if(t.length){if(i){t=i({columns:t,viewportWidth:e})}this.setColsPinned(t,null,"viewportSizeFeature")}}createPinnedWidthFeature(e,t){return new fc(e,t)}setColsPinned(e,t,i){const{colModel:n,colAnimation:o,visibleCols:s,gos:r}=this.beans;if(!n.cols)return;if(null===e||void 0===e||!e.length)return;if(xt(r,"print"))return void pt(37);let a;null===o||void 0===o||o.start(),a=!0===t||"left"===t?"left":"right"===t?"right":null;const l=[];e.forEach((e=>{if(!e)return;const t=n.getCol(e);t&&t.getPinned()!==a&&(this.setColPinned(t,a),l.push(t))})),l.length&&(s.refresh(i),Ui(this.eventSvc,l,i)),null===o||void 0===o||o.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){e.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;const i="left"===e.pinned,n="right"===e.pinned;e.hidden=!0;const o=()=>{const o=i?this.leftWidth:this.rightWidth;if(null==o)return;const s=0==o,r=e.hidden!==s,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),d=t.verticalScrollShowing&&(a&&i||!a&&n)?o+l:o;e.comp.setPinnedContainerWidth("".concat(d,"px")),e.comp.setDisplayed(!s),r&&(e.hidden=s,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:o,rightPinnedWidthChanged:o,scrollVisibilityChanged:o,scrollbarWidthChanged:o})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:t,rightWidth:i}=this,n=ge(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+i+e>n){if(!(n>t+i))return 0;e=n-t-i}}return e}getPinnedColumnsOverflowingViewport(e){var t,i;const n=(null!==(t=this.rightWidth)&&void 0!==t?t:0)+(null!==(i=this.leftWidth)&&void 0!==i?i:0);if(n<e)return[];const{visibleCols:o}=this.beans,s=[...o.leftCols],r=[...o.rightCols];let a=0,l=0;const d=[];let c=n-0-e;for(;(l<s.length||a<r.length)&&c>0;){if(a<r.length){const e=r[a++];c-=e.getActualWidth(),d.push(e)}if(l<s.length&&c>0){const e=s[l++];c-=e.getActualWidth(),d.push(e)}}return d}}],css:[".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{display:inline-block;min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"]},bc={moduleName:"Aria",version:it,beans:[class extends Si{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=$e(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Tt(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),R(i,"polite"),S(i,"relevant","additions text"),function(e,t){S(e,"atomic",t)}(i,!0),e.eGridDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout((()=>{if(this.isAlive()&&this.descriptionContainer){let t=e;this.lastAnnouncement===t&&(t="".concat(t,".")),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}}),50)}destroy(){super.destroy();const{descriptionContainer:e}=this;var t;e&&(xe(e),null===(t=e.parentElement)||void 0===t||t.removeChild(e));this.descriptionContainer=null,this.pendingAnnouncements.clear()}}]};var Cc=class extends En{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=Tn,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}")}handleKeyDown(e){if(e.key!==Do.TAB||e.defaultPrevented||yi(e))return;const t=this.beans;if(No(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;i=e.shiftKey?t.focusSvc.focusGridView(Gi(t.visibleCols.allCols),!0,!1):zo(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList,{AUTO_HEIGHT:n,NORMAL:o,PRINT:s}=Rs;i.toggle(n,t.autoHeight),i.toggle(o,t.normal),i.toggle(s,t.print)}postConstruct(){this.createManagedBean(new Ls(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.isGridFocused()){const e=Lt(this.beans);e&&!Ft(this.beans)&&(this.elToFocusAfter=e)}e.then((t=>{if(this.activePromise===e){if(this.activePromise=null,t){if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,n)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,(t=>{var i;let{currentValue:n}=t;null===(i=e.refresh)||void 0===i||i.call(e,this.gos.addGridCommonParams(l({},null!==n&&void 0!==n?n:{})))}))}i&&this.isGridFocused()&&Po(this.eOverlayWrapper)}}else this.activeOverlay!==t&&(this.destroyBean(t),t=null)}))}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top","".concat(e,"px"))}destroyActiveOverlay(){var e,t;this.activePromise=null;const i=this.activeOverlay;if(!i)return;let n=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,n&&!this.isGridFocused()&&(n=null);const o=this.updateListenerDestroyFunc;o&&(o(),this.updateListenerDestroyFunc=null),this.destroyBean(i),xe(this.eOverlayWrapper),null===(e=n)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=Lt(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},xc={selector:"AG-OVERLAY-WRAPPER",component:Cc},wc={moduleName:"Overlay",version:it,userComponents:{agLoadingOverlay:class extends Vr{init(){var e;const t=Ge(null===(e=this.gos.get("overlayLoadingTemplate"))||void 0===e?void 0:e.trim());if(this.setTemplate(null!==t&&void 0!==t?t:'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!t){const e=this.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}},agNoRowsOverlay:class extends Vr{init(){var e;const t=Ge(null===(e=this.gos.get("overlayNoRowsTemplate"))||void 0===e?void 0:e.trim());if(this.setTemplate(null!==t&&void 0!==t?t:'<span class="ag-overlay-no-rows-center"></span>'),!t){const e=this.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}}},apiFunctions:{showLoadingOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showLoadingOverlay()},showNoRowsOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showNoRowsOverlay()},hideOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.hideOverlay()}},beans:[class extends Si{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=bt(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.eWrapper}isExclusive(){return 1===this.state&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");(t||void 0===t&&!e.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?pt(99):this.doHideOverlay()}getOverlayWrapperSelector(){return xc}getOverlayWrapperCompClass(){return Cc}updateOverlayVisibility(){if(!this.eWrapper)return void(this.state=0);const{state:e,isClientSide:t,beans:{gos:i,colModel:n,rowModel:o}}=this;let s=this.gos.get("loading");void 0!==s&&(this.showInitialOverlay=!1),this.showInitialOverlay&&void 0===s&&!i.get("suppressLoadingOverlay")&&(s=!i.get("columnDefs")||!n.ready||!i.get("rowData")&&t),s?1!==e&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,o.isEmpty()&&!i.get("suppressNoRowsOverlay")&&t?2!==e&&this.doShowNoRowsOverlay():0!==e&&this.doHideOverlay())}doShowLoadingOverlay(){var e,t;this.eWrapper&&(this.state=1,this.showOverlay((e=this.beans.userCompFactory,t={},e.getCompDetailsFromGridOptions(jn,"agLoadingOverlay",t,!0)),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){var e,t;this.eWrapper&&(this.state=2,this.showOverlay((e=this.beans.userCompFactory,t={},e.getCompDetailsFromGridOptions(Un,"agNoRowsOverlay",t,!0)),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var n,o;const s=null!==(n=null===e||void 0===e?void 0:e.newAgStackInstance())&&void 0!==n?n:null;null===(o=this.eWrapper)||void 0===o||o.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(2===this.state){const e=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(null===e||void 0===e?void 0:e.headerHeight)||0}else 0!==this.wrapperPadding&&(t=0);this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}}]},Sc=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.rowNode!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],_i(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],_i(this.entriesList,e)}getEntries(){return this.entriesList}};function Mc(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}})),t}function Dc(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}function kc(e,t){return'<span data-ref="eSort'.concat(e,'" class="ag-sort-indicator-icon ag-sort-').concat(t,' ag-hidden" aria-hidden="true"></span>')}var Ic='<span class="ag-sort-indicator-container">\n        '.concat(kc("Order","order"),"\n        ").concat(kc("Asc","ascending-icon"),"\n        ").concat(kc("Desc","descending-icon"),"\n        ").concat(kc("Mixed","mixed-icon"),"\n        ").concat(kc("None","none-icon"),"\n    </span>"),Ac=class extends En{constructor(e){super(),this.eSortOrder=Tn,this.eSortAsc=Tn,this.eSortDesc=Tn,this.eSortMixed=Tn,this.eSortNone=Tn,e||this.setTemplate(Ic)}attachCustomElements(e,t,i,n,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=o}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const n=Wr(e,this.beans,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:i,column:n,gos:o,beans:s}=this,r=s.sortSvc.getDisplaySortForColumn(n);if(e){le(e,"asc"===r,{skipAriaHidden:!0})}if(t){le(t,"desc"===r,{skipAriaHidden:!0})}if(i){le(i,!(!n.getColDef().unSortIcon&&!o.get("unSortIcon"))&&(null===r||void 0===r),{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const n=t.getColDef().showRowGroup;Gt(i)&&n&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){le(e,"mixed"===t.sortSvc.getDisplaySortForColumn(i),{skipAriaHidden:!0})}}updateSortOrder(){var e;const{eSortOrder:t,column:i,beans:{sortSvc:n}}=this;if(!t)return;const o=n.getColumnsWithSortingOrdered(),s=null!==(e=n.getDisplaySortIndexForColumn(i))&&void 0!==e?e:-1,r=o.some((e=>{var t;return null!==(t=n.getDisplaySortIndexForColumn(e))&&void 0!==t&&t}));le(t,s>=0&&r,{skipAriaHidden:!0}),s>=0?t.textContent=(s+1).toString():xe(t)}},Tc={selector:"AG-SORT-INDICATOR",component:Ac},Ec=["asc","desc",null],Rc={moduleName:"Sort",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}progressSortFromEvent(e,t){const i="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,i,n){"asc"!==t&&"desc"!==t&&(t=null);const{gos:o,showRowGroupCols:s}=this.beans;let r=[e];if(Gt(o)&&e.getColDef().showRowGroup){var a;const t=null===s||void 0===s||null===(a=s.getSourceColumnsForGroupColumn)||void 0===a?void 0:a.call(s,e),i=null===t||void 0===t?void 0:t.filter((e=>e.isSortable()));i&&(r=[e,...i])}r.forEach((e=>this.setColSort(e,t,n)));const l=[];if(!((i||o.get("alwaysMultiSort"))&&!o.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(r,n);l.push(...e)}this.updateSortIndex(e),l.push(...r),this.dispatchSortChangedEvents(n,l)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:n}=this.beans,o=Gt(t),s=null===n||void 0===n?void 0:n.getShowRowGroupCol(e.getId()),r=o&&s||e,a=this.getColumnsWithSortingOrdered();i.getAllCols().forEach((e=>this.setColSortIndex(e,null)));const l=a.filter((e=>(!o||!e.getColDef().showRowGroup)&&e!==r));(r.getSort()?[...l,r]:l).forEach(((e,t)=>this.setColSortIndex(e,t)))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.beans.colModel.getAllCols().filter((e=>!!e.getSort()));return e&&e.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.getAllCols().forEach((n=>{e.includes(n)||(n.getSort()&&i.push(n),this.setColSort(n,void 0,t))})),i}getNextSortDirection(e){var t,i;const n=null!==(t=null!==(i=e.getColDef().sortingOrder)&&void 0!==i?i:this.gos.get("sortingOrder"))&&void 0!==t?t:Ec,o=n.indexOf(e.getSort()),s=o<0,r=o==n.length-1;return s||r?n[0]:n[o+1]}getIndexedSortMap(){var e;const{gos:t,colModel:i,showRowGroupCols:n,rowGroupColsSvc:o}=this.beans;let s=i.getAllCols().filter((e=>!!e.getSort()));if(i.isPivotMode()){const e=Gt(t);s=s.filter((t=>{const i=!!t.getAggFunc(),o=!t.isPrimary(),s=e?null===n||void 0===n?void 0:n.getShowRowGroupCol(t.getId()):t.getColDef().showRowGroup;return i||o||s}))}const r=null!==(e=null===o||void 0===o?void 0:o.columns.filter((e=>!!e.getSort())))&&void 0!==e?e:[],a={};s.forEach(((e,t)=>a[e.getId()]=t)),s.sort(((e,t)=>{const i=e.getSortIndex(),n=t.getSortIndex();if(null!=i&&null!=n)return i-n;if(null==i&&null==n){return a[e.getId()]>a[t.getId()]?1:-1}return null==n?-1:1}));const l=Gt(t)&&!!r.length;l&&(s=[...new Set(s.map((e=>{var t;return null!==(t=null===n||void 0===n?void 0:n.getShowRowGroupCol(e.getId()))&&void 0!==t?t:e})))]);const d=new Map;return s.forEach(((e,t)=>d.set(e,t))),l&&r.forEach((e=>{const t=n.getShowRowGroupCol(e.getId());d.set(e,d.get(t))})),d}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(((e,t)=>{let[i,n]=e,[o,s]=t;return n-s})).map((e=>{let[t]=e;return t}))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=Gt(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){var t;const i=null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||null===i||void 0===i||!i.length)return e.getSort();const n=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...i]:i,o=n[0].getSort();return n.every((e=>e.getSort()==o))?o:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,i){let n=0;e.addManagedListeners(t,{movingChanged:()=>{n=(new Date).getTime()}}),i&&e.addManagedElementListeners(i,{click:e=>{const i=t.isMoving(),o=(new Date).getTime();i||o-n<50||this.progressSortFromEvent(t,e)}});const o=()=>{const i=t.getSort();if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===i),e.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===i),e.addOrRemoveCssClass("ag-header-cell-sorted-none",!i),t.getColDef().showRowGroup){var n;const i=null===(n=this.beans.showRowGroupCols)||void 0===n?void 0:n.getSourceColumnsForGroupColumn(t),o=!(null===i||void 0===i?void 0:i.every((e=>t.getSort()==e.getSort())));e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",o)}};e.addManagedEventListeners({sortChanged:o,columnRowGroupChanged:o})}initCol(e){const{sort:t,initialSort:i,sortIndex:n,initialSortIndex:o}=e.colDef;void 0!==t?"asc"!==t&&"desc"!==t||(e.sort=t):"asc"!==i&&"desc"!==i||(e.sort=i),void 0!==n?null!==n&&(e.sortIndex=n):null!==o&&(e.sortIndex=o)}updateColSort(e,t,i){void 0!==t&&("desc"===t||"asc"===t?this.setColSort(e,t,i):this.setColSort(e,void 0,i))}setColSort(e,t,i){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new Ac(e)}getSortIndicatorSelector(){return Tc}},class extends Si{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Gt(e),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=Gt(e)))}doFullSort(e,t){const i=e.map(((e,t)=>({currentPos:t,rowNode:e})));return i.sort(this.compareRowNodes.bind(this,t)),i.map((e=>e.rowNode))}compareRowNodes(e,t,i){const n=t.rowNode,o=i.rowNode;for(let s=0,r=e.length;s<r;s++){const t=e[s],i="desc"===t.sort,r=this.getValue(n,t.column),a=this.getValue(o,t.column);let l;const d=this.getComparator(t,n);l=d?d(r,a,n,o,i):We(r,a,this.isAccentedSort);if(!isNaN(l)&&0!==l)return"asc"===t.sort?l:-1*l}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(null!=n)return n;if(!i.getColDef().showRowGroup)return;const o=!t.group&&i.getColDef().field;if(!o)return;const s=this.beans.colModel.getColDefCol(o);return s?s.getColDef().comparator:void 0}getValue(e,t){const{valueSvc:i,colModel:n,showRowGroupCols:o,gos:s}=this.beans;if(!this.primaryColumnsSortGroups)return i.getValue(t,e,!1);if(e.rowGroupColumn===t){var r;if(Wt(s,n.isPivotActive())){var a;const n=null===(a=e.allLeafChildren)||void 0===a?void 0:a[0];return n?i.getValue(t,n,!1):void 0}const l=null===o||void 0===o?void 0:o.getShowRowGroupCol(t.getId());if(!l)return;return null===(r=e.groupData)||void 0===r?void 0:r[l.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:i.getValue(t,e,!1)}}],apiFunctions:{onSortChanged:function(e){var t;null===(t=e.sortSvc)||void 0===t||t.onSortChanged("api")}},userComponents:{agSortIndicator:Ac},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}};var Lc=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:n}=e;if(n)for(let o=0;o<n.length;++o)this.depthFirstSearchChangedPath(n[o],t);t(i)}depthFirstSearchEverything(e,t,i){const n=e.childrenAfterGroup;if(n)for(let o=0,s=n.length;o<s;++o){const e=n[o];e.childrenAfterGroup?this.depthFirstSearchEverything(e,t,i):i&&t(e)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach((e=>this.nodeIdsToColumns[i.id][e.getId()]=!0)),i=i.parent}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>i[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>!i[e.getId()]))}},Pc={moduleName:"ValueCache",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const n=this.cacheVersion;e.__cacheVersion!==n&&(e.__cacheVersion=n,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}}],apiFunctions:{expireValueCache:function(e){var t;null===(t=e.valueCache)||void 0===t||t.expire()}}},Nc={moduleName:"Expression",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);gt(15,{expression:e})}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return gt(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}}]},Fc={moduleName:"ChangeDetection",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;bt(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;const n=e.node,o=[n],s=this.clientSideRowModel,r=null===s||void 0===s?void 0:s.rootNode;if(r&&!n.isRowPinned()){const i=t.get("aggregateOnlyChangedColumns"),a=new Lc(i,r);a.addParentNode(n.parent,[e.column]),s.doAggregate(a),a.forEachChangedNodeDepthFirst((e=>{o.push(e)}))}i.refreshCells({rowNodes:o})}}]},Oc={moduleName:"CellApi",version:it,apiFunctions:{getCellValue:function(e,t){var i;const{colKey:n,rowNode:o,useFormatter:s}=t,r=null!==(i=e.colModel.getColDefCol(n))&&void 0!==i?i:e.colModel.getCol(n);if(_e(r))return null;const a=e.valueSvc.getValueForDisplay(r,o);if(s){const t=e.valueSvc.formatValue(r,o,a);return null!==t&&void 0!==t?t:Ho(a,!0)}return a}}},Bc={moduleName:"CommunityCore",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var e,t;if(this.destroyCalled)return;const{stateSvc:i,ctrlsSvc:n,context:o}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:null!==(e=null===i||void 0===i?void 0:i.getState())&&void 0!==e?e:{}}),this.destroyCalled=!0,null===(t=n.get("gridCtrl"))||void 0===t||t.destroyGridUi(),o.destroy(),super.destroy()}},class extends Si{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new $a,this.fns=l(l({},Qa),{},{dispatchEvent:Ja}),this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(qa))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:n}=this;var o,s;i!==Qa&&(i[e]=null!==(o=null===n||void 0===n||null===(s=n.validation)||void 0===s?void 0:s.validateApiFunction(e,t))&&void 0!==o?o:t)}makeApi(e){var t=this;return{[e]:function(){const{beans:i,fns:{[e]:n}}=t;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return n?n(i,...s):t.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(t){const t=qa[e];i.assertModuleRegistered(t,"api.".concat(e))&&pt(27,{fnName:e,module:t})}else pt(26,{fnName:e,preDestroyLink:n})}destroy(){super.destroy(),this.fns=Qa,this.beans=null}},class extends Si{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultParams={},this.jsComps={},this.dynamicBeans={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");null!=e&&Object.entries(e).forEach((e=>{let[t,i]=e;this.jsComps[t]=i}))}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:n,selectors:o}=e;if(i){const e=(e,t,i)=>{this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)};for(const t of Object.keys(i)){const n=i[t];"object"===typeof n?e(t,n.classImp,n.params):e(t,n)}}if(n)for(const s of Object.keys(n))this.dynamicBeans[s]=n[s];if(null===o||void 0===o||o.forEach((e=>{this.selectors[e.selector]=e})),t)for(const s of Object.keys(t))this.icons[s]=t[s]}getUserComponent(e,t){var i;const n=(e,t,i)=>({componentFromFramework:t,component:e,params:i}),{frameworkOverrides:o}=this.beans,s=o.frameworkComponent(t,this.gos.get("components"));if(null!=s)return n(s,!0);const r=this.jsComps[t];if(r){return n(r,o.isFrameworkComponent(r))}const a=this.agGridDefaults[t];return a?n(a,!1,this.agGridDefaultParams[t]):(null===(i=this.beans.validation)||void 0===i||i.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null)}createDynamicBean(e,t){const i=this.dynamicBeans[e];if(null!=i){for(var n=arguments.length,o=new Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];return new i(...o)}if(t)throw new Error(ft(256))}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},class extends Si{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.getCompDetails(this.gridOptions,e,t,i,n)}getCompDetails(e,t,i,n){var o;let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{name:r,cellRenderer:a}=t;let d,{compName:c,jsComp:h,fwComp:u,paramsFromSelector:p,popupFromSelector:g,popupPositionFromSelector:m}=Ln(this.beans.frameworkOverrides,e,t,n);const v=e=>{const t=this.registry.getUserComponent(r,e);t&&(h=t.componentFromFramework?void 0:t.component,u=t.componentFromFramework?t.component:void 0,d=t.params)};var f,y;(null!=c&&v(c),null==h&&null==u&&null!=i&&v(i),!h||!a||(y=h)&&y.prototype&&"getGui"in y.prototype)||(h=null===(f=this.agCompUtils)||void 0===f?void 0:f.adaptFunction(t,h));if(!h&&!u){const{validation:e}=this.beans;return void(!s||c===i&&i?i&&!e&&gt(146,{comp:i}):c?null!==e&&void 0!==e&&e.isProvidedUserComp(c)||gt(50,{compName:c}):i?e||gt(260,l(l({},this.gos.getModuleErrorParams()),{},{propName:r,compName:i})):gt(216,{name:r}))}const b=this.mergeParams(e,t,n,p,d),C=null==h,x=null!==(o=h)&&void 0!==o?o:u;return{componentFromFramework:C,componentClass:x,params:b,type:t,popupFromSelector:g,popupPositionFromSelector:m,newAgStackInstance:()=>this.newAgStackInstance(x,C,b,t)}}newAgStackInstance(e,t,i,n){var o,s;let r;r=!t?new e:this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n),this.createBean(r);const a=null===(o=(s=r).init)||void 0===o?void 0:o.call(s,i);return null==a?Rn.resolve(r):a.then((()=>r))}mergeParams(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4?arguments[4]:void 0;const s=this.gos.getGridCommonParams();Di(s,i),o&&Di(s,o);const r=e&&e[t.name+"Params"];if("function"===typeof r){Di(s,r(i))}else"object"===typeof r&&Di(s,r);return Di(s,n),s}},class extends Si{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==y)return y;if(!document.body)return-1;let e=1e6;const t=$()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=2*e;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),y=e,e}(),Ye(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;Ye(this.gos,"RowContainerHeightService - Div Stretch Offset = ".concat(t," (").concat(this.pixelsToShave," * ").concat(e,")")),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},class extends Si{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{colModel:n,colGroupSvc:o,colViewport:s}=this.beans;i||this.buildTrees(n,o),null===o||void 0===o||o.updateOpenClosedVisibility();const r=kl(this.treeLeft);this.leftCols=r,this.centerCols=kl(this.treeCenter);const a=kl(this.treeRight);this.rightCols=a,this.joinColsAriaOrder(n),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter((e=>e.isAutoHeight())),null===(t=this.beans.colFlex)||void 0===t||t.refreshFlexedColumns(),this.updateBodyWidths(),s.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(n,r,a,e),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}updateBodyWidths(){const e=rn(this.centerCols),t=rn(this.leftCols),i=rn(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,n){let o,s;this.gos.get("enableRtl")?(o=t?t[0]:null,s=i?Gi(i):null):(o=t?Gi(t):null,s=i?i[0]:null),e.getCols().forEach((e=>{e.setLastLeftPinned(e===o,n),e.setFirstRightPinned(e===s,n)}))}buildTrees(e,t){const i=e.getColsToShow(),n=i.filter((e=>"left"==e.getPinned())),o=i.filter((e=>"right"==e.getPinned())),s=i.filter((e=>"left"!=e.getPinned()&&"right"!=e.getPinned())),r=new Mn,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:n,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:o,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:s,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],n=[],o=[];for(const s of t){const e=s.getPinned();e?!0===e||"left"===e?i.push(s):o.push(s):n.push(s)}this.ariaOrderColumns=i.concat(n).concat(o)}getAriaColIndex(e){let t;return t=ps(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach((e=>{e.forEach((e=>{if(ps(e)){e.checkLeft()}}))}))}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),n=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach((t=>{if(n){let i=rn(t);t.forEach((t=>{i-=t.getActualWidth(),t.setLeft(i,e)}))}else{let i=0;t.forEach((t=>{t.setLeft(i,e),i+=t.getActualWidth()}))}!function(e,t){for(let i=0;i<t.length;i++){const n=e.indexOf(t[i]);n>=0&&(e[n]=e[e.length-1],e.pop())}}(i,t)})),i.forEach((t=>{t.setLeft(null,e)}))}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,n){const o=[];let s=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,d=Math.min(a.getColSpan(e),l),c=[a];if(d>1){const e=d-1;for(let i=1;i<=e;i++)c.push(t[r+i]);r+=e}let h;if(i?(h=!1,c.forEach((e=>{i(e)&&(h=!0)}))):h=!0,h){if(0===o.length&&s){!!n&&n(a)&&o.push(s)}o.push(a)}s=a}return o}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};Dl(this.treeCenter,!1,e),Dl(this.treeLeft,!1,e),Dl(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]];if(n.length)return e?Gi(n):n[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return rn(this.leftCols)}getDisplayedColumnsRightWidth(){return rn(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const n="first"===t;let o;if(ps(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;o=n?t[0]:Gi(t)}else o=e;return(n?i[0]:Gi(i))===o}},class extends Si{constructor(){super(...arguments),this.beanName="eventSvc",this.globalEventService=new C}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},class extends Si{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=cc++,this.propEventSvc=new C,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const n=ac.has(t);if(n&&!e||!n&&e)return;const o=ui(t),s=this.gridOptions[o];"function"===typeof s&&this.beans.frameworkOverrides.wrapOutgoing((()=>{s(i)}))}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:e=>{let{options:t}=e;this.updateGridOptions({options:t,force:!0,source:"gridOptionsUpdated"})}})}get(e){var t;return null!==(t=this.gridOptions[e])&&void 0!==t?t:lc[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return ze(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>e(this.addGridCommonParams(t))}return e}updateGridOptions(e){let{options:t,force:i,source:n="api"}=e;const o={id:dc++,properties:[]},s=[],{gridOptions:r,validation:a}=this;Object.entries(t).forEach((e=>{let[t,l]=e;null===a||void 0===a||a.warnOnInitialPropertyUpdate(n,t);const d=i||"object"===typeof l&&"api"===n,c=r[t];if(d||c!==l){r[t]=l;const e={type:t,currentValue:l,previousValue:c,changeSet:o,source:n};s.push(e)}})),null===a||void 0===a||a.processGridOptions(this.gridOptions),o.properties=s.map((e=>e.type)),s.forEach((e=>{Ye(this,"Updated property ".concat(e.type," from"),e.previousValue," to ",e.currentValue),this.propEventSvc.dispatchEvent(e)}))}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(e){const t=e;return t.api=this.api,t.context=this.gridOptionsContext,t}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some((e=>this.isModuleRegistered(e))):this.isModuleRegistered(e);return i||gt(200,l(l({},this.getModuleErrorParams()),{},{moduleName:e,reasonOrId:t})),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:mo(),rowModelType:this.get("rowModelType")}}isModuleRegistered(e){return go(e,this.gridId,this.get("rowModelType"))}},class extends Si{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],(e=>this.refreshAll(pn(e.source)))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],(e=>this.recreateColumnDefs(pn(e.source)))),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),pn(e.source))))}createColsFromColDefs(e){var t,i,n;const{beans:o}=this,{valueCache:s,colAutosize:r,rowGroupColsSvc:a,pivotColsSvc:l,valueColsSvc:d,visibleCols:c,colViewport:h,eventSvc:u}=o,p=this.colDefs?qi(o,e):void 0;null===s||void 0===s||s.expire();const g=null===(t=this.colDefCols)||void 0===t?void 0:t.list,m=null===(i=this.colDefCols)||void 0===i?void 0:i.tree,v=vn(o,this.colDefs,!0,m,e);an(o,null===(n=this.colDefCols)||void 0===n?void 0:n.tree,v.columnTree);const f=v.columnTree,y=v.treeDept,b=sn(f),C={};b.forEach((e=>C[e.getId()]=e)),this.colDefCols={tree:f,treeDepth:y,list:b,map:C},null===a||void 0===a||a.extractCols(e,g),null===l||void 0===l||l.extractCols(e,g),null===d||void 0===d||d.extractCols(e,g),this.ready=!0,this.refreshCols(!0),c.refresh(e),h.checkViewportColumns(),u.dispatchEvent({type:"columnEverythingChanged",source:e}),p&&(this.changeEventsDispatching=!0,p(),this.changeEventsDispatching=!1),u.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&(null===r||void 0===r||r.applyAutosizeStrategy())}refreshCols(e){var t;if(!this.colDefCols)return;const i=null===(t=this.cols)||void 0===t?void 0:t.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:o,quickFilter:s,pivotResultCols:r,showRowGroupCols:a,rowAutoHeight:l,visibleCols:d,colViewport:c,eventSvc:h}=this.beans,u=this.selectCols(r,this.colDefCols);null===n||void 0===n||n.createAutoCols(u,(e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)})),null===n||void 0===n||n.addAutoCols(u),null===o||void 0===o||o.createSelectionCols(u,(e=>{var t,i;this.lastOrder=null!==(t=e(this.lastOrder))&&void 0!==t?t:null,this.lastPivotOrder=null!==(i=e(this.lastPivotOrder))&&void 0!==i?i:null})),null===o||void 0===o||o.addSelectionCols(u);const p=(g=this.gos,this.showingPivotResult?!g.get("enableStrictPivotColumnOrder"):g.get("maintainColumnOrder"));var g;e&&!p||this.restoreColOrder(u),this.positionLockedCols(u),null===a||void 0===a||a.refresh(),null===s||void 0===s||s.refreshCols(),this.setColSpanActive(),null===l||void 0===l||l.setAutoHeightActive(u),d.clear(),c.clear();!zi(i,this.cols.tree)&&h.dispatchEvent({type:"gridColumnsChanged"})}selectCols(e,t){var i;const n=null!==(i=null===e||void 0===e?void 0:e.getPivotResultCols())&&void 0!==i?i:null;this.showingPivotResult=null!=n;const{map:o,list:s,tree:r,treeDepth:a}=null!==n&&void 0!==n?n:t;if(this.cols={list:s.slice(),map:l({},o),tree:r.slice(),treeDepth:a},n){n.list.some((e=>{var t;return void 0!==(null===(t=this.cols)||void 0===t?void 0:t.map[e.getColId()])}))||(this.lastPivotOrder=null)}return this.cols}getColsToShow(){var e;if(!this.cols)return[];const t=this.isPivotMode()&&!this.showingPivotResult,i=null===(e=this.beans.valueColsSvc)||void 0===e?void 0:e.columns;return this.cols.list.filter((e=>{const n=ln(e);if(t){const t=null===i||void 0===i?void 0:i.includes(e);return n||t}return n||e.isVisible()}))}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;Zi(this.beans,{state:e.map((e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t})))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=new Map(t.map(((e,t)=>[e,t])));if(!e.list.some((e=>i.has(e))))return;const n=new Map(e.list.map((e=>[e,!0]))),o=t.filter((e=>n.has(e))),s=new Map(o.map((e=>[e,!0]))),r=e.list.filter((e=>!s.has(e))),a=o.slice();r.forEach((e=>{let t=e.getOriginalParent();if(!t)return void a.push(e);const i=[];for(;!i.length&&t;){t.getLeafColumns().forEach((e=>{const t=a.indexOf(e)>=0,n=i.indexOf(e)<0;t&&n&&i.push(e)})),t=t.getOriginalParent()}if(!i.length)return void a.push(e);const n=i.map((e=>a.indexOf(e))),o=Math.max(...n);a.splice(o+1,0,e)})),e.list=a}positionLockedCols(e){e.list=Hi(e.list,this.gos)}saveColOrder(){var e,t,i,n;this.showingPivotResult?this.lastPivotOrder=null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:null:this.lastOrder=null!==(i=null===(n=this.cols)||void 0===n?void 0:n.list)&&void 0!==i?i:null}getColumnDefs(){var e,t,i;return this.colDefCols?null===(e=this.beans.colDefFactory)||void 0===e?void 0:e.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,null!==(t=null===(i=this.cols)||void 0===i?void 0:i.list)&&void 0!==t?t:[]):void 0}setColSpanActive(){var e;this.colSpanActive=!(null===(e=this.cols)||void 0===e||!e.list.some((e=>null!=e.getColDef().colSpan)))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode)return;if(this.pivotMode=e,!this.ready)return;this.refreshCols(!1);const{visibleCols:i,eventSvc:n}=this.beans;i.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var e;const t=null===(e=this.beans.pivotColsSvc)||void 0===e?void 0:e.columns;return this.pivotMode&&!(null===t||void 0===t||!t.length)}recreateColumnDefs(e){var t;this.cols&&(null===(t=this.beans.autoColSvc)||void 0===t||t.updateAutoCols(e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;an(this.beans,null===(e=this.colDefCols)||void 0===e?void 0:e.tree),super.destroy()}getColTree(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefColTree(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefCols(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.list)&&void 0!==e?e:null}getCols(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:[]}getAllCols(){var e,t,i,n,o,s,r;const{pivotResultCols:a,autoColSvc:l,selectionColSvc:d}=this.beans,c=null===a||void 0===a||null===(e=a.getPivotResultCols())||void 0===e?void 0:e.list;return[null!==(t=null===(i=this.colDefCols)||void 0===i?void 0:i.list)&&void 0!==t?t:[],null!==(n=null===l||void 0===l||null===(o=l.autoCols)||void 0===o?void 0:o.list)&&void 0!==n?n:[],null!==(s=null===d||void 0===d||null===(r=d.selectionCols)||void 0===r?void 0:r.list)&&void 0!==s?s:[],null!==c&&void 0!==c?c:[]].flat()}getColsForKeys(e){return e?e.map((e=>this.getCol(e))).filter((e=>null!=e)):[]}getColDefCol(e){var t;return null!==(t=this.colDefCols)&&void 0!==t&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){var i,n;if(null==t)return null;const{map:o,list:s}=t;if("string"==typeof e&&o[e])return o[e];for(let r=0;r<s.length;r++)if(gn(s[r],e))return s[r];return null!==(i=null===(n=this.beans.autoColSvc)||void 0===n?void 0:n.getAutoCol(e))&&void 0!==i?i:null}},class extends Si{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e,t;return null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getLastRow(){var e,t;return null!==(e=null===(t=this.bottomRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){var e;const{topRowBounds:t,bottomRowBounds:i}=this;return{pageFirstPixel:null!==(e=null===t||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0,pageLastPixel:i?i.rowTop+i.rowHeight:0}}calculateBounds(e,t){const{rowModel:i}=this.beans,n=i.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const o=i.getRowBounds(t);o&&(o.rowIndex=t),this.bottomRowBounds=o,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var e,t;const i=null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0;this.pixelOffset!==i&&(this.pixelOffset=i,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},class extends Si{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){var t,i,n,o,s;this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:null!==(t=null===e||void 0===e?void 0:e.animate)&&void 0!==t&&t,newData:null!==(i=null===e||void 0===e?void 0:e.newData)&&void 0!==i&&i,newPage:null!==(n=null===e||void 0===e?void 0:e.newPage)&&void 0!==n&&n,newPageSize:null!==(o=null===e||void 0===e?void 0:e.newPageSize)&&void 0!==o&&o,keepRenderedRows:null!==(s=null===e||void 0===e?void 0:e.keepRenderedRows)&&void 0!==s&&s})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},class extends Si{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onCellSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},i=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},n=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc((()=>n())),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{$t(this.gos)?i():n()}));$t(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListener("suppressCellFocus",(e=>this.onSuppressCellFocusChanged(e.currentValue))),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],(()=>this.redrawRows())),this.addManagedPropertyListener("cellSelection",(e=>{let{currentValue:t,previousValue:i}=e;(!i&&t||i&&!t)&&this.redrawRows()}));const{stickyRowSvc:e,gos:t}=this.beans;if(e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=xt(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new Sc(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyTopRowCtrls)&&void 0!==e?e:[]}getStickyBottomRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyBottomRowCtrls)&&void 0!==e?e:[]}updateAllRowCtrls(){var e,t;const i=Object.values(this.rowCtrlsByRowIndex),n=Object.values(this.zombieRowCtrls),o=null!==(e=null===(t=this.cachedRowCtrls)||void 0===t?void 0:t.getEntries())&&void 0!==e?e:[];n.length>0||o.length>0?this.allRowCtrls=[...i,...n,...o]:this.allRowCtrls=i}onCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onSuppressCellFocusChanged(e))),this.getFullWidthRowCtrls().forEach((t=>t.onSuppressCellFocusChanged(e)))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach((i=>t.onFlashCells(i,e)))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();this.colModel.getCols().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((i=>{i.column===e&&t(i)}))},i=()=>{t((e=>e.onLeftChanged()))},n=()=>{t((e=>e.onWidthChanged()))},o=()=>{t((e=>e.onFirstRightPinnedChanged()))},s=()=>{t((e=>e.onLastLeftPinnedChanged()))},r=()=>{t((e=>e.onColDefChanged()))};e.addEventListener("leftChanged",i),e.addEventListener("widthChanged",n),e.addEventListener("firstRightPinnedChanged",o),e.addEventListener("lastLeftPinnedChanged",s),e.addEventListener("colDefChanged",r),this.destroyFuncsForColumnListeners.push((()=>{e.removeEventListener("leftChanged",i),e.removeEventListener("widthChanged",n),e.removeEventListener("firstRightPinnedChanged",o),e.removeEventListener("lastLeftPinnedChanged",s),e.removeEventListener("colDefChanged",r)}))}))}onDomLayoutChanged(){const e=xt(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach((i=>{var n;const o=null===(n=i.getCellCtrl(e,!0))||void 0===n?void 0:n.eGui;o&&t.push(o)})),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}refreshFloatingRows(e,t){var i;const{pinnedRowModel:n,beans:o,printLayout:s}=this,r=Object.fromEntries(e.map((e=>[e.rowNode.id,e])));null===n||void 0===n||n.forEachPinnedRow(t,((i,a)=>{const l=e[a];l&&void 0===n.getPinnedRowById(l.rowNode.id,t)&&(l.destroyFirstPass(),l.destroySecondPass()),i.id in r?(e[a]=r[i.id],delete r[i.id]):e[a]=new Ws(i,o,!1,!1,s)}));const a=null!==(i="top"===t?null===n||void 0===n?void 0:n.getPinnedTopRowCount():null===n||void 0===n?void 0:n.getPinnedBottomRowCount())&&void 0!==i?i:0;e.length=a}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.sticky){var n;null===(n=this.stickyRowFeature)||void 0===n||n.refreshStickyNode(e)}else{if(null!==(t=this.cachedRowCtrls)&&void 0!==t&&t.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.rowNode===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}i||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return null===e||void 0===e||e.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=null!==e&&void 0!==e&&e.suppressKeepFocus?null:this.focusSvc.getFocusCellToUseAfterRefresh();if(null==t)return null;const i=Lt(this.beans),n=It(this.gos,i,Ko),o=It(this.gos,i,Hs);return n||o?t:null}redrawAfterModelUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&Ot(this.gos),o=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:s}=this;if(s){s.checkStickyRows();const e=s.extraTopHeight+s.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(o,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");var n;t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),null===(n=this.stickyRowFeature)||void 0===n||n.resetOffsets())}updateContainerHeights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let i=this.pageBounds.getCurrentPageHeight();0===i&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(ft(252));this.refreshInProgress=!0,null===(e=(t=this.beans.frameworkOverrides).getLockOnRefresh)||void 0===e||e.call(t)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,null===(e=(t=this.beans.frameworkOverrides).releaseLockOnRefresh)||void 0===e||e.call(t)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusSvc.restoreFocusedCell(e,(()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}))}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const i=t[n].getAllCellCtrls(),o=i.length;for(let t=0;t<o;t++)e.push(i[t])}return e}getAllRowCtrls(){const e=this.getStickyTopRowCtrls(),t=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t,...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}refreshCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.rowNode,!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getRowCtrls(e){const t=Mc(e),i=this.getAllRowCtrls();return e&&t?i.filter((e=>Dc(e.rowNode,t))):i}getCellCtrls(e,t){let i;ze(t)&&(i={},t.forEach((e=>{const t=this.colModel.getCol(e);ze(t)&&(i[t.getId()]=!0)})));const n=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.column.getId();i&&!i[t]||n.push(e)}))})),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i,t),null===(e=this.stickyRowFeature)||void 0===e||e.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const[i,n]of Object.entries(this.rowCtrlsByRowIndex)){null==n.rowNode.id&&e.push(i)}this.removeRowCtrls(e);const t={};for(const i of Object.values(this.rowCtrlsByRowIndex)){t[i.rowNode.id]=i}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{afterScroll:t}=e;let i;const n=this.stickyRowFeature;n&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const o=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(n){r=n.checkStickyRows();const e=n.extraTopHeight+n.extraBottomHeight;e&&this.updateContainerHeights(e)}const a=this.firstRenderedRow!==o||this.lastRenderedRow!==s;if((!t||r||a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),null!=i)){const e=this.getCellToRestoreFocusToAfterRefresh();var l;if(null!=i&&null==e)null===(l=this.beans.animationFrameSvc)||void 0===l||l.flushAllFrames(),this.restoreFocusedCell(i)}}removeRowCompsNotToDraw(e,t){const i={};e.forEach((e=>i[e]=!0));const n=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!i[e]));this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=[];for(let o=this.firstRenderedRow;o<=this.lastRenderedRow;o++)t.push(o);const i=e=>{const i=e.rowNode.rowIndex;null!=i&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&t.push(i)};for(const o of Object.values(this.rowCtrlsByRowIndex))i(o);if(e)for(const o of Object.values(e))i(o);t.sort(((e,t)=>e-t));const n=[];for(let o=0;o<t.length;o++){const e=t[o],i=this.rowModel.getRow(e);i&&!i.sticky&&n.push(e)}return n}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);const o=[];if(n.forEach((n=>{const s=this.createOrUpdateRowCtrl(n,e,t,i);ze(s)&&o.push(s)})),e){const{animationFrameSvc:n}=this.beans;n&&i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?n.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const i=t.rowNode.rowIndex;e.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=Mc(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const i=e.rowNode;return!(null!=t&&!Dc(i,t))}))}createOrUpdateRowCtrl(e,t,i,n){let o,s=this.rowCtrlsByRowIndex[e];s||(o=this.rowModel.getRow(e),ze(o)&&ze(t)&&t[o.id]&&o.alreadyRendered&&(s=t[o.id],t[o.id]=null));if(!s){if(o||(o=this.rowModel.getRow(e)),!ze(o))return;s=this.createRowCon(o,i,n)}return o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,t){const i=[];if(e)for(const n of Object.values(e))if(n)if(this.cachedRowCtrls&&n.isCacheable())this.cachedRowCtrls.addRow(n);else if(n.destroyFirstPass(!t),t){const e=n.instanceId;this.zombieRowCtrls[e]=n,i.push((()=>{n.destroySecondPass(),delete this.zombieRowCtrls[e]}))}else n.destroySecondPass();t&&(i.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),window.setTimeout((()=>i.forEach((e=>e()))),400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*Dt(this.beans)}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;let n,o;if(e.updateOffset(),i.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),o=t.getLastRow();else{const s=this.getRowBufferInPixels(),r=this.ctrlsSvc.getScrollFeature(),a=this.gos.get("suppressRowVirtualisation");let l,d,c=!1;do{const i=t.getPixelOffset(),{pageFirstPixel:n,pageLastPixel:o}=t.getCurrentPagePixelRange(),h=e.divStretchOffset,u=r.getVScrollPosition(),p=u.top,g=u.bottom;a?(l=n+h,d=o+h):(l=Math.max(p+i-s,n)+h,d=Math.min(g+i+s,o)+h),this.firstVisibleVPixel=Math.max(p+i,n)+h,this.lastVisibleVPixel=Math.min(g+i,o)+h,c=this.ensureAllRowsInRangeHaveHeightsCalculated(l,d)}while(c);let h=i.getRowIndexAtPixel(l),u=i.getRowIndexAtPixel(d);const p=t.getFirstRow(),g=t.getLastRow();h<p&&(h=p),u>g&&(u=g),n=h,o=u}else n=0,o=-1;const s=xt(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);s&&!r&&o-n>a&&(o=n+a);const l=n!==this.firstRenderedRow,d=o!==this.lastRenderedRow;(l||d)&&(this.firstRenderedRow=n,this.lastRenderedRow=o,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:o}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame((()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})})))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var i,n;const o=null===(i=this.pinnedRowModel)||void 0===i?void 0:i.ensureRowHeightsValid(),s=null===(n=this.stickyRowFeature)||void 0===n?void 0:n.ensureRowHeightsValid(),{pageBounds:r,rowModel:a}=this,l=a.ensureRowHeightsValid(e,t,r.getFirstRow(),r.getLastRow());return(l||s)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),!!(s||l||o)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){const t=!1,i=e.rowNode,n=this.focusSvc.isRowNodeFocused(i),o=e.editing,s=i.detail;if(!(n||o||s))return t;return!!this.isRowPresent(i)||t}isRowPresent(e){var t,i;return!!this.rowModel.isRowPresent(e)&&(null===(t=null===(i=this.beans.pagination)||void 0===i?void 0:i.isRowPresent(e))||void 0===t||t)}createRowCon(e,t,i){var n,o;const s=null!==(n=null===(o=this.cachedRowCtrls)||void 0===o?void 0:o.getRow(e))&&void 0!==n?n:null;if(s)return s;const r=this.gos.get("suppressAnimationFrame"),a=i&&!r&&!this.printLayout&&!!this.beans.animationFrameSvc;return new Ws(e,this.beans,t,a,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map((e=>e.rowNode))}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find((e=>e.rowNode.rowIndex===i))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.rowNode.rowIndex===i))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},class extends Si{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Ct(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc((()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValueForDisplay(e,t){const i=t.leafGroup&&this.colModel.isPivotMode(),n=t.group&&t.expanded&&!t.footer&&!i,o=this.gos.get("groupSuppressBlankHeader");if(!n||o)return this.getValue(e,t);let s=!1;const r=this.gos.get("groupTotalRow");if("function"!==typeof r)s=!!r;else{s=!!this.gos.getCallback("groupTotalRow")({node:this})}const a=n&&s;return this.getValue(e,t,a)}getValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,s=e.getColId(),r=t.data;let a;const l=t.groupData&&void 0!==t.groupData[s],d=!i&&t.aggData&&void 0!==t.aggData[s],c=this.isSsrm&&i&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(this.isTreeData&&d?a=t.aggData[s]:this.isTreeData&&n.valueGetter?a=this.executeValueGetter(n.valueGetter,r,e,t):this.isTreeData&&o&&r?a=ki(r,o,e.isFieldContainsDots()):l?a=t.groupData[s]:d?a=t.aggData[s]:n.valueGetter?a=this.executeValueGetter(n.valueGetter,r,e,t):h?a=ki(r,t.field,e.isFieldContainsDots()):o&&r&&!c&&(a=ki(r,o,e.isFieldContainsDots())),this.cellExpressions&&"string"===typeof a&&0===a.indexOf("=")){const i=a.substring(1);a=this.executeValueGetter(i,r,e,t)}if(null==a){const i=this.getOpenedGroup(t,e);if(null!=i)return i}return a}parseValue(e,t,i,n){const o=e.getColDef(),s=o.valueParser;if(ze(s)){var r;const a=this.gos.addGridCommonParams({node:t,data:null===t||void 0===t?void 0:t.data,oldValue:n,newValue:i,colDef:o,column:e});return"function"===typeof s?s(a):null===(r=this.expressionSvc)||void 0===r?void 0:r.evaluate(s,a)}return i}getDeleteValue(e,t){var i;return ze(e.getColDef().valueParser)&&null!==(i=this.parseValue(e,t,"",this.getValueForDisplay(e,t)))&&void 0!==i?i:null}formatValue(e,t,i,n){let o,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=null;const a=e.getColDef();if(n?o=n:s&&(o=a.valueFormatter),o){const n=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});r="function"===typeof o?o(n):this.expressionSvc?this.expressionSvc.evaluate(o,n):null}else if(a.refData)return a.refData[i]||"";return null==r&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let n=e.parent;for(;null!=n;){if(n.rowGroupColumn&&(!0===i||i===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,n){var o;const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;_e(e.data)&&(e.data={});const{field:r,valueSetter:a}=s.getColDef();if(_e(r)&&_e(a))return pt(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,i))return pt(135),!1;const l=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s});let d;var c;(l.newValue=i,ze(a))?d="function"===typeof a?a(l):null===(c=this.expressionSvc)||void 0===c?void 0:c.evaluate(a,l):d=this.setValueUsingField(e.data,r,i,s.isFieldContainsDots());if(void 0===d&&(d=!0),!d)return!1;e.resetQuickFilterAggregateText(),null===(o=this.valueCache)||void 0===o||o.onDataChanged();const h=this.getValue(s,e);return this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:l.column,colDef:l.colDef,data:e.data,node:e,oldValue:l.oldValue,newValue:h,value:h,source:n}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.beans.frameworkOverrides.wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})}))}setValueUsingField(e,t,i,n){if(!t)return!1;let o=!1;if(n){const n=t.split(".");let s=e;for(;n.length>0&&s;){const e=n.shift();0===n.length?(o=s[e]===i,o||(s[e]=i)):s=s[e]}}else o=e[t]===i,o||(e[t]=i);return!o}executeValueGetterWithValueCache(e,t,i,n){const o=i.getColId(),s=this.valueCache.getValue(n,o);if(void 0!==s)return s;const r=this.executeValueGetterWithoutValueCache(e,t,i,n);return this.valueCache.setValue(n,o,r),r}executeValueGetterWithoutValueCache(e,t,i,n){const o=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let s;var r;"function"===typeof e?s=e(o):s=null===(r=this.expressionSvc)||void 0===r?void 0:r.evaluate(e,o);return s}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let o=i;if(n){o=n(this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof o||null==o||(o=String(o),"[object Object]"===o&&pt(121)),o}},class extends Si{constructor(){super(...arguments),this.beanName="focusSvc"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(To(this.beans))}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCell||this.isDomDataMissingInHierarchy(Lt(this.beans),Hs)?null:this.focusedCell}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||this.isDomDataMissingInHierarchy(Lt(this.beans),Pr)?null:this.focusedHeader}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(It(this.gos,i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCell}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout((()=>{this.restoredFocusedCell=null}),0),!0)}clearRestoreFocus(){this.restoredFocusedCell=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout((()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())}))}isCellRestoreFocused(e){return null!=this.restoredFocusedCell&&ss(e,this.restoredFocusedCell)}setRestoreFocusedCell(e){"react"===this.beans.frameworkOverrides.renderingEngine&&(this.restoredFocusedCell=e)}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:n}=e,o={rowIndex:t,rowPinned:i,column:n,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return s&&(o.isFullWidthCell=s.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCell=null,null==this.focusedCell)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent(l({type:"cellFocusCleared"},e))}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:s=!1}=e,r=this.colModel.getCol(t);r?(this.focusedCell={rowIndex:i,rowPinned:Ge(n),column:r},this.eventSvc.dispatchEvent(l(l({type:"cellFocused"},this.getFocusEventParams(this.focusedCell)),{},{forceBrowserFocus:o,preventScrollOnBrowserFocus:s}))):this.focusedCell=null}isCellFocused(e){return null!=this.focusedCell&&ss(e,this.focusedCell)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:n}}=e,{column:o,headerRowIndex:s}=this.focusedHeader;return t===o&&i===s&&n==o.getPinned()}focusHeaderPosition(e){var t;if(Bo(this.beans))return!1;const{direction:i,fromTab:n,allowUserOverride:o,event:s,fromCell:r,rowWithoutSpanValue:a}=e;let{headerPosition:l}=e;if(r&&null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(o){const e=this.focusedHeader,t=yr(this.beans);if(n){const n=this.gos.getCallback("tabToNextHeader");n&&(l=this.getHeaderPositionFromUserFunc({userFunc:n,direction:i,currentPosition:e,headerPosition:l,headerRowCount:t}))}else{const i=this.gos.getCallback("navigateToNextHeader");if(i&&s){l=i({key:s.key,previousHeaderPosition:e,nextHeaderPosition:l,headerRowCount:t,event:s})}}}return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:i,event:s,fromCell:r,rowWithoutSpanValue:a})}focusHeaderPositionFromUserFunc(e){if(Bo(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:n,event:o}=e,s=this.focusedHeader,r=yr(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:s,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:o})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:n,headerPosition:o,headerRowCount:s}=e,r=t({backwards:"Before"===i,previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:s});return!0===r?n:!1===r?null:r}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:n,rowWithoutSpanValue:o,event:s}=e,{column:r,headerRowIndex:a}=t,{filterManager:l,ctrlsSvc:d,headerNavigation:c}=this.beans;if(-1===a)return null!==l&&void 0!==l&&l.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(r);null===c||void 0===c||c.scrollToColumn(r,i);const h=d.getHeaderRowContainerCtrl(r.getPinned()),u=(null===h||void 0===h?void 0:h.focusHeader(t.headerRowIndex,r,s))||!1;return c&&u&&(null!=o||n)&&(c.currentHeaderRowWithoutSpan=null!==o&&void 0!==o?o:-1),u}focusFirstHeader(){var e;if(null!==(e=this.overlays)&&void 0!==e&&e.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleCols.allCols[0];if(!t)return!1;const{colGroupSvc:i}=this.beans;i&&t.getParent()&&(t=i.getColGroupAtLevel(t,0));const n=rc(t,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(e){var t;if(null!==(t=this.overlays)&&void 0!==t&&t.isExclusive()&&this.focusOverlay(!0))return!0;const i=yr(this.beans)-1,n=Gi(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&(this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Ge(t))}focusOverlay(e){var t,i;const n=(null===(t=this.overlays)||void 0===t?void 0:t.isVisible())&&(null===(i=this.overlays.eWrapper)||void 0===i?void 0:i.getGui());return!!n&&Po(n,e)}focusGridView(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null!==(t=this.overlays)&&void 0!==t&&t.isExclusive())return n&&this.focusOverlay(i);if(Go(this.beans))return i&&!Bo(this.beans)?this.focusLastHeader():!(!n||!this.focusOverlay(i))||zo(this.beans,!1);const o=i?function(e){let t,i=null;const{pinnedRowModel:n,pageBounds:o}=e,s=null===n||void 0===n?void 0:n.getPinnedBottomRowCount(),r=null===n||void 0===n?void 0:n.getPinnedTopRowCount();return s?(i="bottom",t=s-1):e.rowModel.getRowCount()?(i=null,t=o.getLastRow()):r&&(i="top",t=r-1),void 0===t?null:{rowIndex:t,rowPinned:i}}(this.beans):function(e){let t,i=0;const{pinnedRowModel:n,rowModel:o,pageBounds:s}=e;return null!==n&&void 0!==n&&n.getPinnedTopRowCount()?t="top":o.getRowCount()?(t=null,i=s.getFirstRow()):null!==n&&void 0!==n&&n.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:i,rowPinned:t}}(this.beans);if(o){var s,r;const{rowIndex:t,rowPinned:n}=o;if(null!==(s=e)&&void 0!==s||(e=null===(r=this.focusedHeader)||void 0===r?void 0:r.column),e&&void 0!==t&&null!==t){var a,l;if(null===(a=this.navigation)||void 0===a||a.ensureCellVisible({rowIndex:t,column:e,rowPinned:n}),i){var d;const e=this.rowRenderer.getRowByPosition(o);if(null!==e&&void 0!==e&&e.isFullWidth()&&null!==(d=this.navigation)&&void 0!==d&&d.tryToFocusFullWidthRow(o,i))return!0}return this.setFocusedCell({rowIndex:t,column:e,rowPinned:Ge(n),forceBrowserFocus:!0}),null===(l=this.beans.rangeSvc)||void 0===l||l.setRangeToCell({rowIndex:t,rowPinned:n,column:e}),!0}}return!(!n||!this.focusOverlay(i))||!(!i||!this.focusLastHeader())}focusAdvancedFilter(e){var t,i;return this.advFilterFocusColumn=null===e||void 0===e?void 0:e.column,null!==(t=null===(i=this.beans.advancedFilter)||void 0===i?void 0:i.getCtrl().focusHeaderComp())&&void 0!==t&&t}focusNextFromAdvancedFilter(e,t){var i,n;const o=null!==(i=t?void 0:this.advFilterFocusColumn)&&void 0!==i?i:null===(n=this.visibleCols.allCols)||void 0===n?void 0:n[0];return e?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:yr(this.beans)-1}}):this.focusGridView(o)}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},class extends Si{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass="ag-theme-params-".concat(++nc),this.globalCSS=[]}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",(()=>this.handleThemeGridOptionChange())),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.getSizeEl($d),this.getSizeEl(ec),this.getSizeEl(tc),this.getSizeEl(ic),this.refreshRowBorderWidthVariable(),this.addDestroyFunc((()=>(e=>{if(Hl.delete(e),0===Hl.size){zl=new WeakMap;for(const e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}})(this)))}getDefaultRowHeight(){return this.getCSSVariablePixelValue($d)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(ec)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(tc)}getRowBorderWidth(){return this.getCSSVariablePixelValue(ic)}applyThemeClasses(e){const{gridTheme:t}=this;let i="";if(t)i="".concat(this.paramsClass," ").concat(t._getCssClass());else{let e=this.eGridDiv;for(;e;){for(const t of Array.from(e.classList))t.startsWith("ag-theme-")&&(i=i?"".concat(i," ").concat(t):t);e=e.parentElement}}for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&e.classList.remove(n);if(i){const t=e.className;e.className=t+(t?" ":"")+i}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;const n="".concat(i,"px");return t!=n?(e.style.setProperty("--ag-line-height",n),i):""!=t?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?_l(e,this.eGridDiv,t):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===oc?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=document.createElement("div"),e.className="ag-measurement-container",this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=document.createElement("div");const{border:n}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border","var(".concat(e.cssName,", solid ").concat(oc,"px"))):t.style.width="var(".concat(e.cssName,", ").concat(oc,"px)"),i.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);"no-styles"===o&&pt(9,{variable:e});const s=Be(this.beans,t,(()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==o&&(o=t,this.fireGridStylesChangedEvent(e.changeKey)))}));return this.addDestroyFunc((()=>s())),t}fireGridStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(ic);this.eGridDiv.style.setProperty("--ag-internal-row-border-width","".concat(e,"px"))}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:i,gridTheme:n}=this,o=e.get("theme");let s;if("legacy"===o)s=void 0;else{const e=null!==o&&void 0!==o?o:qd;e instanceof gd?s=e:gt(240,{theme:e})}if(s!==n){var r;if(s){l=this,Hl.add(l),Vl(t);for(const[e,n]of i)_l(e,t,n);i.length=0}this.gridTheme=s,null===(r=s)||void 0===r||r._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:t});let n=this.eParamsStyle;var a;if(n||(n=this.eParamsStyle=document.createElement("style"),t.appendChild(n)),!Gl)n.textContent=(null===(a=s)||void 0===a?void 0:a._getPerGridCss(this.paramsClass))||"";this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}var l;s&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&gt(o?106:239)}},class extends Si{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;null!==e&&void 0!==e&&e.isActive()?e.executeLaterVMTurn((()=>{e.executeLaterVMTurn((()=>this.updateScrollVisibleImpl()))})):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var e;const t=this.ctrlsSvc.get("center");if(!t||null!==(e=this.colAnimation)&&void 0!==e&&e.isActive())return;const i={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(i),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"===typeof e&&e>=0?e:(null==f&&ne(),f);null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},class extends Si{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t,i;this.addEventListener("ready",(()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach((e=>e(this.params))),this.readyCallbacks.length=0)}),null!==(e=null===(t=(i=this.beans.frameworkOverrides).runWhenReadyAsync)||void 0===t?void 0:t.call(i))&&void 0!==e&&e)}updateReady(){const e=Object.values(this.params);this.ready=23===e.length&&e.every((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.isAlive())&&void 0!==t&&t}))}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc((()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)}))}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc((()=>{this.updateReady()}))}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},class extends Si{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.beans.ctrlsSvc.whenReady(this,(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(null!==e&&void 0!==e?e:[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),Ye(t,"initialised successfully, enterprise = ".concat(t.isModuleRegistered("EnterpriseCore")))}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.beans.colModel.setColumnDefs(t,pn(e.source))}},class extends Si{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:o}=this.beans;return i&&o?o.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=null===t||void 0===t?void 0:t.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,o){const s=e.headerValueGetter;if(s){const l=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:o});return"function"===typeof s?s(l):"string"===typeof s?null!==(r=null===(a=this.beans.expressionSvc)||void 0===a?void 0:a.evaluate(s,l))&&void 0!==r?r:null:"";var r,a}return null!=e.headerName?e.headerName:e.field?(l=e.field)&&null!=l?l.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" "):null:"";var l}},class extends Si{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{visibleCols:n}=this,o=n.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!o)){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const i=n.bodyWidth;this.viewportLeft=i-t-e,this.viewportRight=i-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i||[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(e){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},e||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,o=this.viewportRight+200;return!(t<n&&i<n)&&!(t>o&&i>o)}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,n=i.centerCols;return i.getColsForRow(e,n,t,(e=>{const t=e.getLeft();return ze(t)&&t>this.viewportLeft}))}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){this.clear(!0);const e={},{leftCols:t,rightCols:i,treeLeft:n,treeRight:o,treeCenter:s}=this.visibleCols;this.headerColsWithinViewport.concat(t).concat(i).forEach((t=>e[t.getId()]=!0));const r=(t,i,n)=>{let o=!1;for(let s=0;s<t.length;s++){const a=t[s];let l=!1;if(Ri(a))l=!0===e[a.getId()];else{const e=a.getDisplayedChildren();e&&(l=r(e,i,n+1))}l&&(o=!0,i[n]||(i[n]=[]),i[n].push(a))}return o};r(n,this.rowsOfHeadersToRenderLeft,0),r(o,this.rowsOfHeadersToRenderRight,0),r(s,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map((e=>"".concat(e.getId(),"-").concat(e.getPinned()||"normal"))).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}}],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:function(e){return e.context.getGridId()},destroy:function(e){e.gridDestroySvc.destroy()},isDestroyed:function(e){return e.gridDestroySvc.destroyCalled},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){el(e,{[t]:i})},updateGridOptions:el},dependsOn:[Nl,bl,Sl,Rc,hc,Il,uc,wc,Fc,pc,vc,yc,bc,gc,Bl,Fl,Nc]},Gc=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return l({},t);let i={};return Di(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?Di(i,t,!0,!0):i=l(l({},i),t),e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&Di(t.context,i.context,!0,!0),i.context=t.context),i}};Gc.gridOptions=void 0,Gc.mergeStrategy="shallow";var zc=Gc;function _c(e){var t;return null===(t=zc.gridOptions)||void 0===t?void 0:t[e]}var Vc=1,Hc=class{create(e,t,i,n,o,s){var r,a;const l=zc.applyGlobalGridOptions(t),d=null!==(r=l.gridId)&&void 0!==r?r:String(Vc++),c=null!==(a=l.rowModelType)&&void 0!==a?a:"clientSide",h=this.getRegisteredModules(o,d,c),u=this.createBeansList(c,h,d),p=this.createProvidedBeans(e,l,o);if(!u)return;const g=new bo({providedBeanInstances:p,beanClasses:u,gridId:d,beanInitComparator:Ga,beanDestroyComparator:za,derivedBeans:[Oa],destroyCallback:s});return this.registerModuleFeatures(g,h),i(g),g.getBean("syncSvc").start(),n&&n(g),g.getBean("gridApi")}getRegisteredModules(e,t,i){var n;return po(Bc,void 0),null===e||void 0===e||null===(n=e.modules)||void 0===n||n.forEach((e=>po(e,t))),function(e,t){var i,n,o,s,r;const a=null!==(i=co[e])&&void 0!==i?i:{};return[...Object.values(null!==(n=lo.all)&&void 0!==n?n:{}),...Object.values(null!==(o=a.all)&&void 0!==o?o:{}),...Object.values(null!==(s=lo[t])&&void 0!==s?s:{}),...Object.values(null!==(r=a[t])&&void 0!==r?r:{})]}(t,i)}registerModuleFeatures(e,t){const i=e.getBean("registry"),n=e.getBean("apiFunctionSvc");t.forEach((e=>{i.registerModule(e);const t=e.apiFunctions;if(t){Object.keys(t).forEach((e=>{null===n||void 0===n||n.addFunction(e,t[e])}))}}))}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;_e(n)&&(n=new Fa);const o={gridOptions:t,eGridDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(o,i.providedBeanInstances),o}createBeansList(e,t,i){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"}[e];if(!n)return void mt(201,{rowModelType:e},"Unknown rowModelType ".concat(e,"."));if(!go(n,i,e))return void mt(200,{reasonOrId:"rowModelType = '".concat(e,"'"),moduleName:n,gridScoped:mo(),gridId:i,rowModelType:e},"Missing module ".concat(n,"Module for rowModelType ").concat(e,". \nIf upgrading from before v33, see ").concat(st,"/upgrading-to-ag-grid-33/#changes-to-modules/"));const o=new Set;return t.forEach((e=>{var t;return null===(t=e.beans)||void 0===t?void 0:t.forEach((e=>o.add(e)))})),Array.from(o)}};function Wc(e){const t=e.rowModel;return"clientSide"===t.getType()?t:void 0}function jc(e){const t=e.rowModel;return"infinite"===t.getType()?t:void 0}function Uc(e){const t=e.rowModel;return"serverSide"===t.getType()?t:void 0}var Kc=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged","beforeRefreshModel"],Yc=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],Zc=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],Xc=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","selectionColumnDef","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow",...Yc,"doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter",...Zc,"cellSelection","sideBar","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","theme","rowSelection"],qc=class{wrap(e,t,i,n){const o=this.createWrapper(e,n);return null===t||void 0===t||t.forEach((e=>{this.createMethod(o,e,!0)})),null===i||void 0===i||i.forEach((e=>{this.createMethod(o,e,!1)})),o}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&pt(49,{methodName:t}),null)}}};function Qc(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:n,filterByPercentageOfBestMatch:o,addSequentialWeight:s}=e;let r=i.map(((e,i)=>({value:e,relevance:Jc(t.toLowerCase(),e.toLocaleLowerCase(),s),idx:i})));if(r.sort(((e,t)=>t.relevance-e.relevance)),n&&(r=r.filter((e=>0!==e.relevance))),r.length>0&&o&&o>0){const e=r[0].relevance*o;r=r.filter((t=>e-t.relevance<0))}const a=[],l=[];for(const d of r)a.push(d.value),l.push(d.idx);return{values:a,indices:l}}function Jc(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.replace(/\s/g,""),o=t.replace(/\s/g,""),s=n.length,r=o.length,a=new Array(s+1).fill(null).map((()=>new Array(r+1).fill(0)));for(let c=0;c<=s;c+=1)a[c][0]=c;for(let c=0;c<=r;c+=1)a[0][c]=c;for(let c=1;c<=s;c++)for(let e=1;e<=r;e++)n[c-1]===o[e-1]?a[c][e]=a[c-1][e-1]:a[c][e]=1+Math.min(a[c][e-1],Math.min(a[c-1][e],a[c-1][e-1]));const l=a[s][r];let d=Math.max(s,r)-l;if(i){const e=function(e){const t=[],i=e.length;for(let n=1;n<=i;n++)for(let o=0;o<=i-n;o++){const i=o+n-1;t.push(e.slice(o,i+1))}return t}(n);for(let t=0;t<e.length;t++){const i=e[t];-1!==o.indexOf(i)&&(d+=1,d*=i.length)}}return d}function $c(e,t){if("number"!==typeof e)return"";const i=t(),n=i("thousandSeparator",","),o=i("decimalSeparator",".");return e.toString().replace(".",o).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(n))}var eh=class extends Si{getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?"".concat(e,".").concat(t):e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return"export.".concat(this.getDefaultFileExtension())}},th=class{constructor(e){this.groupColumns=[];const{colModel:t,rowGroupColsSvc:i,colNames:n,valueSvc:o,gos:s,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=n,this.valueSvc=o,this.gos=s,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=d}prepare(e){this.groupColumns=e.filter((e=>!!e.getColDef().showRowGroup))}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return null!==t&&void 0!==t?t:""}extractRowCellValue(e,t,i,n,o){const s=this.gos.get("groupHideOpenParents")&&!o.footer||!this.shouldRenderGroupSummaryCell(o,e,t)?this.valueSvc.getValue(e,o):this.createValueForGroupNode(e,o);return this.processCell({accumulatedRowIndex:i,rowNode:o,column:e,value:s,processCellCallback:this.processCellCallback,type:n})}shouldRenderGroupSummaryCell(e,t,i){if(!(e.group&&!this.gos.get("treeData")))return!1;if(-1!==this.groupColumns.indexOf(t)){var n;if(void 0!==(null===(n=e.groupData)||void 0===n?void 0:n[t.getId()]))return!0;if(Ct(this.gos)&&e.group)return!0;if(e.footer&&-1===e.level){var o;const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===(null===(o=this.rowGroupColsSvc)||void 0===o?void 0:o.columns[0].getId())}}const s=Wt(this.gos,this.colModel.isPivotMode());return 0===i&&s}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),n=t=>{var n,o;if(i)return t.key;const s=null===(n=t.groupData)||void 0===n?void 0:n[e.getId()];return s&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport&&null!==(o=this.valueSvc.formatValue(t.rowGroupColumn,t,s))&&void 0!==o?o:s},o=t.footer,s=[n(t)];if(!Ht(this.gos))for(;t.parent;)t=t.parent,s.push(n(t));const r=s.reverse().join(" -> ");return o?"Total ".concat(r):r}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:n,value:o,processCellCallback:s,type:r}=e;var a;return s?{value:null!==(a=s(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:n,node:i,value:o,type:r,parseValue:e=>this.valueSvc.parseValue(n,i,e,this.valueSvc.getValue(n,i)),formatValue:e=>{var t;return null!==(t=this.valueSvc.formatValue(n,i,e))&&void 0!==t?t:e}})))&&void 0!==a?a:""}:!1!==n.getColDef().useValueFormatterForExport?{value:null!==o&&void 0!==o?o:"",valueFormatted:this.valueSvc.formatValue(n,i,o)}:{value:null!==o&&void 0!==o?o:""}}};function ih(e,t){const i=document.defaultView||window;if(!i)return void pt(52);const n=document.createElement("a"),o=i.URL.createObjectURL(t);n.setAttribute("href",o),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(n),i.setTimeout((()=>{i.URL.revokeObjectURL(o)}),0)}var nh={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0},oh="clientSide",sh="serverSide",rh="infinite",ah={onGroupExpandedOrCollapsed:[oh],refreshClientSideRowModel:[oh],isRowDataEmpty:[oh],forEachLeafNode:[oh],forEachNodeAfterFilter:[oh],forEachNodeAfterFilterAndSort:[oh],resetRowHeights:[oh],applyTransaction:[oh],applyTransactionAsync:[oh],flushAsyncTransactions:[oh],getBestCostNodeSelection:[oh],getServerSideSelectionState:[sh],setServerSideSelectionState:[sh],applyServerSideTransaction:[sh],applyServerSideTransactionAsync:[sh],applyServerSideRowData:[sh],retryServerSideLoads:[sh],flushServerSideAsyncTransactions:[sh],refreshServerSide:[sh],getServerSideGroupLevelState:[sh],refreshInfiniteCache:[rh],purgeInfiniteCache:[rh],getInfiniteRowCount:[rh],isLastRowIndexKnown:[rh,sh],expandAll:[oh,sh],collapseAll:[oh,sh],onRowHeightChanged:[oh,sh],setRowCount:[rh,sh],getCacheBlockState:[rh,sh]},lh={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};var dh={AdvancedFilter:1,AllEnterprise:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,Pivot:1,RangeSelection:1,RichSelect:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},ch=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],hh={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:ch,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...ch,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...ch,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},uh={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};var ph={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar"};function gh(e){return"".concat(e,"Module")}var mh=e=>{let{reasonOrId:t,moduleName:i,gridScoped:n,gridId:o,rowModelType:s,additionalText:r}=e;const a=function(e,t){const i=[];return(Array.isArray(e)?e:[e]).forEach((e=>{const n=hh[e];n?n.forEach((e=>{const n=uh[e];n&&n!==t||i.push(e)})):i.push(e)})),i}(i,s),l="string"===typeof t?t:yh[t];return"Unable to use ".concat(l," as ").concat(a.length>1?"one of "+a.map(gh).join(", "):gh(a[0])," is not registered").concat(n?" for gridId: "+o:"",". Check if you have registered the module:\n").concat((e=>{const t=e.map((e=>"import { ".concat(gh(e)," } from '").concat(dh[e]?"ag-grid-enterprise":"ag-grid-community","';"))).join(" \n");return"import { ModuleRegistry } from 'ag-grid-community'; \n".concat(t," \n\nModuleRegistry.registerModules([ ").concat(e.map(gh).join(", ")," ]); \n\nFor more info see: ").concat(st,"/modules/")})(a))+(r?" \n\n".concat(r):"")},vh=e=>"".concat(e," must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.\n\nimport { AgChartsEnterpriseModule } from 'ag-charts-enterprise';\nimport { ModuleRegistry } from 'ag-grid-community';\nimport { ").concat(e," } from 'ag-grid-enterprise';\n    \nModuleRegistry.registerModules([").concat(e,".with(AgChartsEnterpriseModule)]);\n    "),fh={1:()=>"`rowData` must be an array",2:e=>{let{nodeId:t}=e;return"Duplicate node id '".concat(t,"' detected from getRowId callback, this could cause issues in your grid.")},3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:e=>{let{id:t}=e;return"Could not find row id=".concat(t,", data item was not found for this id")},5:e=>{let{data:t}=e;return["Could not find data item as object was not found.",t," Consider using getRowId to help the Grid find matching row data"]},6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:e=>{let{key:t}=e;return"Unknown key for navigation ".concat(t)},9:e=>{let{variable:t}=e;return"No value for ".concat(t.cssName,". This usually means that the grid has been initialised before styles have been loaded. The default value of ").concat(t.defaultValue," will be used and updated when styles load.")},10:e=>{let{eventType:t}=e;return"As of v33, the '".concat(t,"' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.")},11:()=>"No gridOptions provided to createGrid",12:e=>{let{colKey:t}=e;return["column ",t," not found"]},13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:e=>{let{groupPrefix:t}=e;return"Row IDs cannot start with ".concat(t,", this is a reserved prefix for AG Grid's row grouping feature.")},15:e=>{let{expression:t}=e;return["value should be either a string or a function",t]},16:e=>{let{expression:t,params:i,e:n}=e;return["Processing of the expression failed","Expression = ",t,"Params = ",i,"Exception = ",n]},17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>'You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"',21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:e=>{let{key:t}=e;return"".concat(t," is an initial property and cannot be updated.")},23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:e=>{let{id:t}=e;return["The getRowId callback must return a string. The ID ",t," is being cast to a string."]},26:e=>{let{fnName:t,preDestroyLink:i}=e;return"Grid API function ".concat(t,"() cannot be called as the grid has been destroyed.\n Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ").concat(i)},27:e=>{let{fnName:t,module:i}=e;return"API function '".concat(t,"' not registered to module '").concat(i,"'")},28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:e=>{let{toIndex:t}=e;return["tried to insert columns in invalid location, toIndex = ",t,"remember that you should not count the moving columns when calculating the new index"]},31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:e=>{let{key:t}=e;return"the column type '".concat(t,"' is a default column type and cannot be overridden.")},35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:e=>{let{t:t}=e;return"colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes"},37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:e=>{let{iconName:t}=e;return"provided icon '".concat(t,"' needs to be a string or a function")},39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:e=>{let{e:t,method:i}=e;return"".concat(t,"\n").concat((e=>"AG Grid: Unable to use the Clipboard API (navigator.clipboard.".concat(e,"()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API."))(i))},41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:e=>{let{iconName:t}=e;return"As of v33, icon '".concat(t,"' is deprecated. Use the icon CSS name instead.")},44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:e=>{let{parentCellDataType:t}=e;return"The data type definition ".concat(t," does not exist.")},46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:e=>{let{cellDataType:t}=e;return'Missing data type definition - "'.concat(t,'"')},48:e=>{let{property:t}=e;return'Cell data type is "object" but no Value '.concat(t," has been provided. Please either provide an object data type definition with a Value ").concat(t,', or set "colDef.value').concat(t,'"')},49:e=>{let{methodName:t}=e;return"Framework component is missing the method ".concat(t,"()")},50:e=>{let{compName:t}=e;return"Could not find component ".concat(t,", did you forget to configure this component?")},51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:e=>{let{colId:t}=e;return"setFilterModel() - no column found for colId: ".concat(t)},63:e=>{let{colId:t}=e;return"setFilterModel() - unable to fully apply model, filtering disabled for colId: ".concat(t)},64:e=>{let{colId:t}=e;return"setFilterModel() - unable to fully apply model, unable to create filter for colId: ".concat(t)},65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:e=>{let{guiFromFilter:t}=e;return"getGui method from filter returned ".concat(t,"; it should be a DOM element.")},70:e=>{let{newFilter:t}=e;return"Grid option quickFilterText only supports string inputs, received: ".concat(typeof t)},71:()=>"debounceMs is ignored when apply button is present",72:e=>{let{keys:t}=e;return["ignoring FilterOptionDef as it doesn't contain one of ",t]},73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:e=>{let{filterModelType:t}=e;return['Unexpected type of filter "',t,'", it looks like the filter was configured with incorrect Filter Options']},77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:e=>{let{param:t}=e;return"DateFilter ".concat(t," is not a number")},83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:e=>{let{index:t}=e;return"Invalid row index for ensureIndexVisible: ".concat(t)},89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:e=>{let{methodName:t}=e;return"AnimationFrameService.".concat(t," called but animation frames are off")},93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:e=>{let{paginationPageSizeOption:t,pageSizeSet:i,pageSizesSet:n,pageSizeOptions:o}=e;return"'paginationPageSize=".concat(t,"'").concat(i?"":" (default value)",", but ").concat(t," is not included in").concat(n?"":" the default"," paginationPageSizeSelector=[").concat(o.join(", "),"].")},95:e=>{let{paginationPageSizeOption:t,paginationPageSizeSelector:i}=e;return"Either set '".concat(i,"' to an array that includes ").concat(t," or to 'false' to disable the page size selector.")},96:e=>{let{id:t,data:i}=e;return["Duplicate ID",t,"found for pinned row with data",i,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."]},97:e=>{let{colId:t}=e;return"cellEditor for column ".concat(t," is missing getGui() method")},98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",100:e=>{let{rowModelType:t}=e;return"selectAll only available when rowModelType='clientSide', ie not ".concat(t)},101:e=>{let{propertyName:t,componentName:i,agGridDefaults:n,jsComps:o}=e;const s=[],r=Qc({inputValue:i,allSuggestions:[...Object.keys(n).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(o)],hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push("Could not find '".concat(i,"' component. It was configured as \"").concat(t,": '").concat(i,"'\" but it wasn't found in the list of registered components.\n")),r.length>0&&s.push("         Did you mean: [".concat(r.slice(0,3),"]?\n")),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selecting just filtered only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:e=>{let{value:t,param:i}=e;return"Numeric value ".concat(t," passed to ").concat(i," param will be interpreted as ").concat(t,' seconds. If this is intentional use "').concat(t,'s" to silence this warning.')},105:e=>{let{e:t}=e;return["chart rendering failed",t]},106:()=>"Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ".concat(st,"/theming-migration/"),107:e=>{let{key:t,value:i}=e;return"Invalid value for theme param ".concat(t," - ").concat(i)},108:e=>{let{e:t}=e;return["chart update failed",t]},109:e=>{let{aggFuncOrString:t}=e;return"unrecognised aggregation function ".concat(t)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelectsChildren` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:e=>{let{component:t}=e;return"Could not find component with name of ".concat(t,". Is it in Vue.components?")},115:()=>"The provided selection state should be an object.",116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:e=>{let{chartId:t}=e;return"Unable to update chart. No active chart found with ID: ".concat(t,".")},126:()=>"unable to restore chart as no chart model is provided",127:e=>{let{allRange:t}=e;return"unable to create chart as ".concat(t?"there are no columns in the grid":"no range is selected",".")},128:e=>{let{feature:t}=e;return"".concat(t," is only available if using 'multiRow' selection mode.")},129:e=>{let{feature:t,rowModel:i}=e;return"".concat(t," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(i,".")},130:()=>'cannot multi select unless selection mode is "multiRow"',131:()=>"cannot range select while selecting multiple rows",132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:e=>{let{iconName:t}=e;return"icon '".concat(t,"' function should return back a string or a dom object")},134:e=>{let{iconName:t}=e;return"Did not find icon '".concat(t,"'")},135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:e=>{let{type:t,currentChartType:i}=e;return"Unable to update chart as a '".concat(t,"' update type is not permitted on a ").concat(i,".")},138:e=>{let{chartType:t}=e;return"invalid chart type supplied: ".concat(t)},139:e=>{let{customThemeName:t}=e;return"a custom chart theme with the name ".concat(t," has been supplied but not added to the 'chartThemes' list")},140:e=>{let{name:t}=e;return"no stock theme exists with the name '".concat(t,"' and no custom chart theme with that name was supplied to 'customChartThemes'")},141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:e=>{let{panel:t}=e;return"'".concat(t,"' is not a valid Chart Tool Panel name")},144:e=>{let{type:t}=e;return"Invalid charts data panel group name supplied: '".concat(t,"'")},145:e=>{let{group:t}=e;return"As of v32, only one charts customize panel group can be expanded at a time. '".concat(t,"' will not be expanded.")},146:e=>{let{comp:t}=e;return"Unable to instantiate component '".concat(t,"' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.")},147:e=>{let{group:t}=e;return"Invalid charts customize panel group name supplied: '".concat(t,"'")},148:e=>{let{group:t}=e;return"invalid chartGroupsDef config '".concat(t,"'")},149:e=>{let{group:t,chartType:i}=e;return"invalid chartGroupsDef config '".concat(t,".").concat(i,"'")},150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:e=>{let{chartType:t}=e;return"invalid chartType '".concat(t,"' supplied in 'seriesChartTypes', converting to 'line' instead.")},152:e=>{let{colId:t}=e;return"no 'seriesChartType' found for colId = '".concat(t,"', defaulting to 'line'.")},153:e=>{let{chartDataType:t}=e;return"unexpected chartDataType value '".concat(t,"' supplied, instead use 'category', 'series' or 'excluded'")},154:e=>{let{colId:t}=e;return"cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ".concat(t)},155:e=>{let{option:t}=e;return"'".concat(t,"' is not a valid Chart Toolbar Option")},156:e=>{let{panel:t}=e;return"Invalid panel in chartToolPanelsDef.panels: '".concat(t,"'")},157:e=>{let{unrecognisedGroupIds:t}=e;return["unable to find group(s) for supplied groupIds:",t]},158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:e=>{let{id:t,dataType:i}=e;return"Unrecognized data type for excel export [".concat(t,".dataType=").concat(i,"]")},163:e=>{let{featureName:t}=e;return"Excel table export does not work with ".concat(t,". The exported Excel file will not contain any Excel tables.\n Please turn off ").concat(t," to enable Excel table exports.")},164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:e=>{let{unrecognisedGroupIds:t}=e;return["unable to find groups for these supplied groupIds:",t]},167:e=>{let{unrecognisedColIds:t}=e;return["unable to find columns for these supplied colIds:",t]},168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:e=>{let{providedStrategy:t}=e;return"invalid cellRendererParams.refreshStrategy = ".concat(t," supplied, defaulting to refreshStrategy = 'rows'.")},171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:e=>{let{group:t}=e;return"invalid chartGroupsDef config '".concat(t,"'")},174:e=>{let{group:t,chartType:i}=e;return"invalid chartGroupsDef config '".concat(t,".").concat(i,"'")},175:e=>{let{menuTabName:t,itemsToConsider:i}=e;return["Trying to render an invalid menu item '".concat(t,"'. Check that your 'menuTabs' contains one of "),i]},176:e=>{let{key:t}=e;return"unknown menu item type ".concat(t)},177:()=>"valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.",178:e=>{let{colId:t}=e;return"column ".concat(t," is not visible")},179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:e=>{let{parentGroupData:t,childNodeData:i}=e;return["duplicate group keys for row data, keys should be unique",[t,i]]},185:e=>{let{data:t}=e;return["getDataPath() should not return an empty path",[t]]},186:e=>{let{rowId:t,rowData:i,duplicateRowsData:n}=e;return["duplicate group keys for row data, keys should be unique",t,i,...n]},187:e=>{let{rowId:t,firstData:i,secondData:n}=e;return["Duplicate node id ".concat(t,". Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),"first instance",i,"second instance",n]},188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:e=>{let{startRow:t}=e;return"invalid value ".concat(t," for startRow, the value should be >= 0")},190:e=>{let{rowGroupId:t,data:i}=e;return["null and undefined values are not allowed for server side row model keys",t?"column = ".concat(t):"","data is ",i]},191:()=>"cannot multi select unless selection mode is 'multiRow'",192:()=>"cannot use range selection when multi selecting rows",193:()=>"cannot multi select unless selection mode is 'multiRow'",194:e=>{let{method:t}=e;return"calling gridApi.".concat(t,"() is only possible when using rowModelType=`clientSide`.")},195:e=>{let{justCurrentPage:t}=e;return"selecting just ".concat(t?"current page":"filtered"," only works when gridOptions.rowModelType='clientSide'")},196:e=>{let{key:t}=e;return"Provided ids must be of string type. Invalid id provided: ".concat(t)},197:()=>"`toggledNodes` must be an array of string ids.",198:()=>"cannot multi select unless selection mode is 'multiRow'",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:mh,201:e=>{let{rowModelType:t}=e;return"Could not find row model for rowModelType = ".concat(t)},202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:e=>{let{duplicateIdText:t}=e;return"Unable to display rows as duplicate row ids (".concat(t,") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.")},206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>"Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ".concat(st,"/filter-set-filter-list/#filter-value-types"),210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:e=>{let{key:t}=e;return"unable to lookup Tool Panel as invalid key supplied: ".concat(t)},215:e=>{let{key:t,defaultByKey:i}=e;return"the key ".concat(t," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(i).join(","))},216:e=>{let{name:t}=e;return"Missing component for '".concat(t,"'")},217:e=>{let{invalidColIds:t}=e;return["unable to find grid columns for the supplied colDef(s):",t]},218:e=>{let{property:t,defaultOffset:i}=e;return"".concat(t," must be a number, the value you provided is not a valid number. Using the default of ").concat(i,"px.")},219:e=>{let{property:t}=e;return"Property ".concat(t," does not exist on the target object.")},220:e=>{let{lineDash:t}=e;return"'".concat(t,"' is not a valid 'lineDash' option.")},221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:e=>{let{menuItemOrString:t}=e;return"unrecognised menu item ".concat(t)},229:e=>{let{index:t}=e;return["invalid row index for ensureIndexVisible: ",t]},230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:e=>{let{methodName:t}=e;return"Framework component is missing the method ".concat(t,"()")},234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:e=>{let{theme:t}=e;return'theme grid option must be a Theming API theme object or the string "legacy", received: '.concat(t)},241:()=>"cannot select multiple rows when rowSelection.mode is set to 'singleRow'",242:()=>"cannot select multiple rows when using rangeSelect",243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>"Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. \nPlease rebuild the selection state and reapply it.",248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:e=>{let{chartType:t}=e;return"AG Grid: Unable to create chart as an invalid chartType = '".concat(t,"' was supplied.")},252:()=>"cannot get grid to draw rows when it is in the middle of drawing rows. \nYour code probably called a grid API method while the grid was in the render stage. \nTo overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). \nTo see what part of your code that caused the refresh check this stacktrace.",253:e=>{let{version:t}=e;return["Illegal version string: ",t]},254:()=>"Cannot create chart: no chart themes available.",255:e=>{let{point:t}=e;return"Lone surrogate U+".concat(t.toString(16).toUpperCase()," is not a scalar value")},256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>vh("IntegratedChartsModule"),258:()=>vh("SparklinesModule"),259:e=>{let{part:t}=e;return"the argument to theme.withPart must be a Theming API part object, received: ".concat(t)},260:e=>{let{propName:t,compName:i,gridScoped:n,gridId:o,rowModelType:s}=e;return mh({reasonOrId:"AG Grid '".concat(t,"' component: ").concat(i),moduleName:ph[i],gridId:o,gridScoped:n,rowModelType:s})},261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus'};var yh={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},bh={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},Ch=()=>({objectName:"colDef",allProperties:Object.keys(bh),docsUrl:"column-properties/",deprecations:{checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:{aggFunc:{module:"SharedAggregation"},autoHeight:{supportedRowModels:["clientSide","serverSide"],module:"RowAutoHeight"},cellClass:{module:"CellStyle"},cellClassRules:{module:"CellStyle"},cellEditor:e=>{let{cellEditor:t,editable:i}=e;if(!i)return null;if("string"===typeof t){const e=ph[t];if(e)return{module:e}}return{module:"CustomEditor"}},cellRenderer:e=>{let{cellRenderer:t}=e;if("string"!==typeof t)return null;const i=ph[t];return i?{module:i}:null},cellRendererParams:{validate:e=>null==e.rowGroup&&null==e.rowGroupIndex&&"agGroupCellRenderer"!==e.cellRenderer||!("checkbox"in e.cellRendererParams)?null:'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.'},cellStyle:{module:"CellStyle"},children:()=>Ch(),columnChooserParams:{module:"ColumnMenu"},contextMenuItems:{module:"ContextMenu"},dndSource:{module:"DragAndDrop"},dndSourceOnRowDrag:{module:"DragAndDrop"},editable:e=>{let{editable:t,cellEditor:i}=e;return t&&!i?{module:"TextEditor"}:null},enableCellChangeFlash:{module:"HighlightChanges"},enablePivot:{module:"SharedPivot"},enableRowGroup:{module:"SharedRowGrouping"},enableValue:{module:"SharedAggregation"},filter:e=>{let{filter:t}=e;if(t&&"string"!==typeof t&&"boolean"!==typeof t)return{module:"CustomFilter"};if("string"===typeof t){const e=ph[t];if(e)return{module:e}}return{module:"ColumnFilter"}},floatingFilter:{module:"ColumnFilter"},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerTooltip:{module:"Tooltip"},headerValueGetter:{validate:e=>{const t=e.headerValueGetter;return"function"===typeof t||"string"===typeof t?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:e=>{let{icons:t}=e;if(t){if(t.smallDown)return ft(262);if(t.smallLeft)return ft(263);if(t.smallRight)return ft(264)}return null}},mainMenuItems:{module:"ColumnMenu"},menuTabs:e=>{var t;const i=["columnsMenuTab","generalMenuTab"];return null!==(t=e.menuTabs)&&void 0!==t&&t.some((e=>i.includes(e)))?{module:"ColumnMenu"}:null},pivot:{module:"SharedPivot"},pivotIndex:{module:"SharedPivot"},rowDrag:{module:"RowDrag"},rowGroup:{module:"SharedRowGrouping"},rowGroupIndex:{module:"SharedRowGrouping"},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter((e=>!Ec.includes(e)));if(e.length>0)return"sortingOrder must be an array with elements from [".concat(Ec.map(dt).join(),"], currently it includes [").concat(e.map(dt).join(),"]")}else if(!Array.isArray(t)||t.length<=0)return"sortingOrder must be an array with at least one element, currently it's ".concat(t);return null}},tooltipField:{module:"Tooltip"},tooltipValueGetter:{module:"Tooltip"},type:{validate:e=>{const t=e.type;return t instanceof Array?t.some((e=>"string"!==typeof e))?"if colDef.type is supplied an array it should be of type 'string[]'":null:"string"===typeof t?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,t)=>{let{suppressRowTransform:i}=t;return i?null:"colDef.rowSpan requires suppressRowTransform to be enabled."}}}});function xh(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.MAX_VALUE;return"number"===typeof t||null==t?null==t||t>=i&&t<=n?null:n===Number.MAX_VALUE?"".concat(e,": value should be greater than or equal to ").concat(i):"".concat(e,": value should be between ").concat(i," and ").concat(n):"".concat(e,": value should be a number")}var wh=()=>{const e={alignedGrids:{module:"AlignedGrids"},allowContextMenuWithControlKey:{module:"ContextMenu"},autoSizePadding:{validate(e){let{autoSizePadding:t}=e;return xh("autoSizePadding",t,0)}},autoSizeStrategy:{module:"ColumnAutoSize"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate(e){let{cacheBlockSize:t}=e;return xh("cacheBlockSize",t,1)}},cacheOverflowSize:{validate(e){let{cacheOverflowSize:t}=e;return xh("cacheOverflowSize",t,1)}},cellSelection:{module:"CellSelection"},columnHoverHighlight:{module:"ColumnHover"},datasource:{supportedRowModels:["infinite"],module:"InfiniteRowModel"},doesExternalFilterPass:{module:"ExternalFilter"},domLayout:{validate:e=>{const t=e.domLayout,i=["autoHeight","normal","print"];return t&&!i.includes(t)?"domLayout must be one of [".concat(i.join(),"], currently it's ").concat(t):null}},editType:{module:"EditCore"},enableAdvancedFilter:{module:"AdvancedFilter"},enableCharts:{module:"IntegratedCharts"},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{module:"CellSelection",dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},getContextMenuItems:{module:"ContextMenu"},getLocaleText:{module:"Locale"},getMainMenuItems:{module:"ColumnMenu"},getRowClass:{module:"RowStyle"},getRowStyle:{module:"RowStyle"},grandTotalRow:{module:"SharedRowGrouping"},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:e=>{let{icons:t}=e;if(t){if(t.smallDown)return ft(262);if(t.smallLeft)return ft(263);if(t.smallRight)return ft(264)}return null}},infiniteInitialRowCount:{validate(e){let{infiniteInitialRowCount:t}=e;return xh("infiniteInitialRowCount",t,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},initialState:{module:"GridState"},isExternalFilterPresent:{module:"ExternalFilter"},keepDetailRowsCount:{validate(e){let{keepDetailRowsCount:t}=e;return xh("keepDetailRowsCount",t,1)}},localeText:{module:"Locale"},masterDetail:{module:"SharedMasterDetail"},pagination:{module:"Pagination"},paginationPageSize:{validate(e){let{paginationPageSize:t}=e;return xh("paginationPageSize",t,1)}},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"===typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},pinnedTopRowData:{module:"PinnedRow"},pinnedBottomRowData:{module:"PinnedRow"},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}},module:"SharedPivot"},pivotPanelShow:{module:"RowGroupingPanel"},quickFilterText:{supportedRowModels:["clientSide"],module:"QuickFilter"},rowBuffer:{validate(e){let{rowBuffer:t}=e;return xh("rowBuffer",t,0)}},rowClass:{validate:e=>"function"===typeof e.rowClass?"rowClass should not be a function, please use getRowClass instead":null,module:"RowStyle"},rowClassRules:{module:"RowStyle"},rowData:{supportedRowModels:["clientSide"],module:"ClientSideRowModel"},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{treeData:{required:[!1,void 0]},pagination:{required:[!1,void 0]}},module:"RowDrag"},rowGroupPanelShow:{module:"RowGroupingPanel"},rowSelection:{validate(e){let{rowSelection:t}=e;return t&&"string"===typeof t?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':t&&"object"!==typeof t?"Expected `RowSelectionOptions` object for the `rowSelection` property.":t&&"multiRow"!==t.mode&&"singleRow"!==t.mode?'Selection mode "'.concat(t.mode,"\" is invalid. Use one of 'singleRow' or 'multiRow'."):null},module:"SharedRowSelection"},rowStyle:{validate:e=>{const t=e.rowStyle;return t&&"function"===typeof t?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null},module:"RowStyle"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"ServerSideRowModel"},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate(e){let{serverSideInitialRowCount:t}=e;return xh("serverSideInitialRowCount",t,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sideBar:{module:"SideBar"},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter((e=>!Ec.includes(e)));if(e.length>0)return"sortingOrder must be an array with elements from [".concat(Ec.map(dt).join(),"], currently it includes [").concat(e.map(dt).join(),"]")}else if(!Array.isArray(t)||t.length<=0)return"sortingOrder must be an array with at least one element, currently it's ".concat(t);return null}},statusBar:{module:"StatusBar"},tooltipHideDelay:{validate:e=>e.tooltipHideDelay&&e.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:e=>e.tooltipShowDelay&&e.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],module:"SharedTreeData",validate:e=>{var t;const i=null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide";switch(i){case"clientSide":{const t="treeData requires 'getDataPath' in the ".concat(i," row model.");return e.treeDataChildrenField||e.getDataPath?null:t}case"serverSide":{const t="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(i," row model.");return e.isServerSideGroup&&e.getServerSideGroupKey?null:t}}return null}},treeDataChildrenField:{module:"SharedTreeData"},undoRedoCellEditing:{module:"UndoRedoEdit"},valueCache:{module:"ValueCache"},viewportDatasource:{supportedRowModels:["viewport"],module:"ViewportRowModel"},viewportRowModelBufferSize:{validate(e){let{viewportRowModelBufferSize:t}=e;return xh("viewportRowModelBufferSize",t,0)}},viewportRowModelPageSize:{validate(e){let{viewportRowModelPageSize:t}=e;return xh("viewportRowModelPageSize",t,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}}},t={};return Zc.forEach((e=>{t[e]={expectedType:"boolean"}})),Yc.forEach((e=>{t[e]={expectedType:"number"}})),Di(t,e),t},Sh={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1},Mh={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore"},Dh=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),kh={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortUnSort:"Sort"};var Ih=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),Ah={moduleName:"Validation",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,ot=this}postConstruct(){this.processGridOptions(this.gridOptions)}warnOnInitialPropertyUpdate(e,t){"api"===e&&nh[t]&&pt(22,{key:t})}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...Xc,...Kc.map((e=>ui(e)))],propertyExceptions:["api","treeDataChildrenField"],docsUrl:"grid-options/",deprecations:{suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."}},validations:wh()})}validateApiFunction(e,t){return function(e,t,i){const n=lh[e];if(n){const{version:i,new:o,old:s,message:r}=n,a=null!==s&&void 0!==s?s:e;return function(){const e=o?"Please use ".concat(o," instead. "):"";Ze("Since ".concat(i," api.").concat(a," is deprecated. ").concat(e).concat(null!==r&&void 0!==r?r:""));for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return t.apply(t,s)}}const o=ah[e];return o?function(){const n=i.rowModel.getType();if(o.includes(n)){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return t.apply(t,r)}Xe("api.".concat(e," can only be called when gridOptions.rowModelType is ").concat(o.join(" or ")))}:t}(e,t,this.beans)}missingUserComponent(e,t,i,n){const o=ph[t];o?this.gos.assertModuleRegistered(o,"AG Grid '".concat(e,"' component: ").concat(t)):pt(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})}checkRowEvents(e){Ih.has(e)&&pt(10,{eventType:e})}validateIcon(e){if(Dh.has(e)&&pt(43,{iconName:e}),Sh[e])return;const t=Mh[e];t?gt(200,{reasonOrId:"icon '".concat(e,"'"),moduleName:t,gridScoped:mo(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."}):pt(134,{iconName:e})}validateMenuItem(e){const t=kh[e];t&&this.gos.assertModuleRegistered(t,"menu item '".concat(e,"'"))}isProvidedUserComp(e){return!!ph[e]}validateColDef(e,t,i){var n;!i&&null!==(n=this.beans.dataTypeSvc)&&void 0!==n&&n.isColPendingInference(t)||this.processOptions(e,Ch())}processOptions(e,t){const{validations:i,deprecations:n,allProperties:o,propertyExceptions:s,objectName:r,docsUrl:a}=t;o&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...null!==s&&void 0!==s?s:[],...Object.keys(n)],o,r,a);const l=new Set,d=t=>{const n=i[t];if(n){if("function"===typeof n){const i=n(e,this.gridOptions,this.beans);if(!i)return;if("objectName"in i){const n=e[t];return Array.isArray(n)?void n.forEach((e=>{this.processOptions(e,i)})):void this.processOptions(e[t],i)}return i}return n}};Object.keys(e).forEach((t=>{const i=n[t];if(i){const{message:e,version:n}=i;l.add("As of v".concat(n,", ").concat(String(t)," is deprecated. ").concat(null!==e&&void 0!==e?e:""))}const o=e[t];if(null==o||!1===o)return;const s=d(t);if(!s)return;const{module:r,dependencies:a,validate:c,supportedRowModels:h,expectedType:u}=s;if(u){const e=typeof o;if(e!==u)return void l.add("".concat(String(t)," should be of type '").concat(u,"' but received '").concat(e,"' (").concat(o,")."))}if(h){var p;const e=null!==(p=this.gridOptions.rowModelType)&&void 0!==p?p:"clientSide";if(!h.includes(e))return void l.add("".concat(String(t)," is not supported with the '").concat(e,"' row model. It is only valid with: ").concat(h.join(", "),"."))}if(r){const e=Array.isArray(r)?r:[r];let i=!0;if(e.forEach((e=>{this.gos.assertModuleRegistered(e,String(t))||(i=!1)})),!i)return}if(a){const i=this.checkForRequiredDependencies(t,a,e);if(i)return void l.add(i)}if(c){const t=c(e,this.gridOptions,this.beans);if(t)return void l.add(t)}})),l.size>0&&l.forEach((e=>{Ze(e)}))}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).filter((e=>{let[t,n]=e;const o=i[t];return!n.required.includes(o)}));return 0===n.length?null:n.map((t=>{var i;let[n,o]=t;return"'".concat(String(e),"' requires '").concat(n,"' to be one of [").concat(o.required.map((e=>null===e?"null":void 0===e?"undefined":e)).join(", "),"]. ").concat(null!==(i=o.reason)&&void 0!==i?i:"")})).join("\n           ")}checkProperties(e,t,i,n,o){const s=function(e,t,i){const n={},o=e.filter((e=>!t.some((t=>t===e))));o.length>0&&o.forEach((e=>n[e]=Qc({inputValue:e,allSuggestions:i}).values));return n}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i);if(Object.entries(s).forEach((e=>{let[t,o]=e,s="invalid ".concat(n," property '").concat(t,"' did you mean any of these: ").concat(o.slice(0,8).join(", "),".");i.includes("context")&&(s+="\nIf you are trying to annotate ".concat(n," with application data, use the '").concat(n,".context' property instead.")),Ze(s)})),Object.keys(s).length>0&&o){const e=this.beans.frameworkOverrides.getDocLink(o);Ze("to see all the valid ".concat(n," properties please check: ").concat(e))}}getConsoleMessage(e,t){return function(e,t){const i=fh[e];if(!i)return["Missing error text for error id ".concat(e,"!")];const n=i(t),o=ht(e,t),s="\nSee ".concat(o);return Array.isArray(n)?n.concat(s):[n,s]}(e,t)}}]};function Th(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var Eh={moduleName:"SharedMenu",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=null!==e&&void 0!==e?e:t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const{enterpriseMenuFactory:t,filterMenuFactory:i}=this.beans,n=t&&ci(this.gos)?t:i;this.showColumnMenuCommon(n,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){var n;null===(n=this.activeMenuFactory)||void 0===n||n.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){var e,t;null===(e=this.beans.contextMenuSvc)||void 0===e||e.hideActiveMenu(),null===(t=this.activeMenuFactory)||void 0===t||t.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var t;const{suppressHeaderMenuButton:i}=e.getColDef();return!i&&!(null===(t=this.activeMenuFactory)||void 0===t||!t.isMenuEnabled(e))&&(ci(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&Ri(e)?e.getColDef():null===e||void 0===e?void 0:e.getColGroupDef();return!(null!==t&&void 0!==t&&t.suppressHeaderContextMenu)&&"new"===this.gos.get("columnMenu")}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(te()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!ci(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))&&!ci(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return ci(e)?!!e.exists("suppressMenuHide")&&t:t}showColumnMenuCommon(e,t,i,n){const{positionBy:o}=t,s=t.column;if("button"===o){const{buttonElement:o}=t;null===e||void 0===e||e.showMenuAfterButtonClick(s,o,i,n)}else if("mouse"===o){const{mouseEvent:o}=t;null===e||void 0===e||e.showMenuAfterMouseEvent(s,o,i,n)}else if(s){const t=this.beans,o=t.ctrlsSvc;o.getScrollFeature().ensureColumnVisible(s,"auto"),Mo(t,(()=>{var t;const r=null===(t=o.getHeaderRowContainerCtrl(s.getPinned()))||void 0===t?void 0:t.getHeaderCtrlForColumn(s);r&&(null===e||void 0===e||e.showMenuAfterButtonClick(s,r.getAnchorElementForMenu(n),i,!0))}))}}}],apiFunctions:{showColumnMenu:function(e,t){var i;const n=e.colModel.getCol(t);n?null===(i=e.menuSvc)||void 0===i||i.showColumnMenu({column:n,positionBy:"auto"}):gt(12,{colKey:t})},hidePopupMenu:function(e){var t;null===(t=e.menuSvc)||void 0===t||t.hidePopupMenu()}}},Rh=0,Lh={moduleName:"Popup",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl})),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,n=this.getPopupIndex(i);if(-1!==n){this.popupList[n].alignedToElement=t}const o=t.getBoundingClientRect(),s=this.getParentRect(),r=this.keepXYWithinBounds(i,o.top-s.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth="".concat(a,"px");const l=s.right-s.left-a;let d;function c(){return o.right-s.left-2}function h(){return o.left-s.left-a}this.gos.get("enableRtl")?(d=h(),d<0&&(d=c(),this.setAlignedStyles(i,"left")),d>l&&(d=0,this.setAlignedStyles(i,"right"))):(d=c(),d>l&&(d=h(),this.setAlignedStyles(i,"right")),d<0&&(d=0,this.setAlignedStyles(i,"left"))),i.style.left="".concat(d,"px"),i.style.top="".concat(r,"px")}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,eventSource:s,alignSide:r="left",position:a="over",column:l,rowNode:d,type:c}=e,h=s.getBoundingClientRect(),u=this.getParentRect(),p=this.getPopupIndex(t);if(-1!==p){this.popupList[p].alignedToElement=s}this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,updatePosition:()=>{let i,o=h.left-u.left;if("right"===r&&(o-=t.offsetWidth-h.width),"over"===a)i=h.top-u.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,h,u,e.nudgeY||0)?h.top-u.top+h.height:h.top-t.offsetHeight-2*(n||0)-u.top}return{x:o,y:i}},postProcessCallback:()=>this.callPostProcessPopup(c,t,s,null,l,d)})}shouldRenderUnderOrAbove(e,t,i,n){const o=i.bottom-t.bottom,s=t.top-i.top,r=e.offsetHeight+n;return o>r?"under":s>r||s>o?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i],{alignedToElement:o}=n;if(!o)return;["right","left","over","above","under"].forEach((t=>{o.classList.remove("ag-has-popup-positioned-".concat(t)),e.classList.remove("ag-popup-positioned-".concat(t))})),t&&(o.classList.add("ag-has-popup-positioned-".concat(t)),e.classList.add("ag-popup-positioned-".concat(t)))}callPostProcessPopup(e,t,i,n,o,s){const r=this.gos.getCallback("postProcessPopup");if(r){r({column:o,rowNode:s,ePopup:t,type:e,eventSource:i,mouseEvent:n})}}positionPopup(e){var t=this;const{ePopup:i,keepWithinBounds:n,nudgeX:o,nudgeY:s,skipObserver:r,updatePosition:a}=e,l={width:0,height:0},d=function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:d,y:c}=a();r&&i.clientWidth===l.width&&i.clientHeight===l.height||(l.width=i.clientWidth,l.height=i.clientHeight,o&&(d+=o),s&&(c+=s),n&&(d=t.keepXYWithinBounds(i,d,1),c=t.keepXYWithinBounds(i,c,0)),i.style.left="".concat(d,"px"),i.style.top="".concat(c,"px"),e.postProcessCallback&&e.postProcessCallback())};if(d(),!r){const e=Be(this.beans,i,(()=>d(!0)));setTimeout((()=>e()),200)}}getActivePopups(){return this.popupList.map((e=>e.element))}getParentRect(){const e=Tt(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),fe(t)}keepXYWithinBounds(e,t,i){const n=0===i,o=n?"clientHeight":"clientWidth",s=n?"top":"left",r=n?"height":"width",a=n?"scrollTop":"scrollLeft",l=Tt(this.beans),d=l.documentElement,c=this.getPopupParent(),h=e.getBoundingClientRect(),u=c.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=c===l.body,m=Math.ceil(h[r]);let v=g?(n?me:ve)(d)+d[a]:c[o];g&&(v-=Math.abs(p[s]-u[s]));const f=v-m;return Math.min(Math.max(t,0),Math.abs(f))}addPopup(e){const t=Tt(this.beans),{eChild:i,ariaLabel:n,alwaysOnTop:o,positionCallback:s,anchorToElement:r}=e;if(!t)return pt(122),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(-1!==a){return{hideFunc:this.popupList[a].hideFunc}}this.initialisePopupPosition(i);const d=this.createPopupWrapper(i,n,!!o),c=this.addEventListenersToPopup(l(l({},e),{},{wrapperEl:d}));return s&&s(),this.addPopupToPopupList(i,d,c,r),{hideFunc:c}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();ze(e.style.top)||(e.style.top="".concat(-1*t.top,"px")),ze(e.style.left)||(e.style.left="".concat(-1*t.left,"px"))}createPopupWrapper(e,t,i){const n=this.getPopupParent(),o=document.createElement("div"),{environment:s,gos:r}=this.beans;return s.applyThemeClasses(o),o.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||I(e,"dialog"),A(e,t),o.appendChild(e),n.appendChild(o),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),o}handleThemeChange(e){if(e.themeChanged){const e=this.beans.environment;for(const t of this.popupList)e.applyThemeClasses(t.wrapper)}}addEventListenersToPopup(e){var t=this;const i=this.beans,n=Tt(i),o=this.getPopupParent(),{wrapperEl:s,eChild:r,closedCallback:a,afterGuiAttached:l,closeOnEsc:d,modal:c}=e;let h=!1;const u=e=>{if(!s.contains(Lt(i)))return;e.key!==Do.ESCAPE||yi(e)||m({keyboardEvent:e})},p=e=>m({mouseEvent:e}),g=e=>m({touchEvent:e}),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:i,touchEvent:l,keyboardEvent:d,forceHide:c}=e;(c||!t.isEventFromCurrentPopup({mouseEvent:i,touchEvent:l},r)&&!h)&&(h=!0,o.removeChild(s),n.removeEventListener("keydown",u),n.removeEventListener("mousedown",p),n.removeEventListener("touchstart",g),n.removeEventListener("contextmenu",p),t.eventSvc.removeEventListener("dragStarted",p),a&&a(i||l||d),t.removePopupFromPopupList(r))};return l&&l({hidePopup:m}),window.setTimeout((()=>{d&&n.addEventListener("keydown",u),c&&(n.addEventListener("mousedown",p),this.eventSvc.addEventListener("dragStarted",p),n.addEventListener("touchstart",g),n.addEventListener("contextmenu",p))}),0),m}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Rh++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then((e=>e&&e())),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=o,n.isAnchored=!0,o}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:o}=e,s=n.getBoundingClientRect(),r=e=>parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const n=i[e]-s[e],a=r(o.style[e]);return{initialDiff:n,lastDiff:n,initial:a,last:a,direction:t}},l=a("top",0),d=a("left",1),c=this.beans.frameworkOverrides;return new Rn((i=>{c.wrapIncoming((()=>{c.setInterval((()=>{const i=t.getBoundingClientRect(),s=n.getBoundingClientRect();if(0==s.top&&0==s.left&&0==s.height&&0==s.width)return void e.hidePopup();const a=(e,t)=>{const n=r(o.style[t]);e.last!==n&&(e.initial=n,e.last=n);const a=i[t]-s[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(o,e.initial+e.initialDiff-a,e.direction);o.style[t]="".concat(i,"px"),e.last=i}e.lastDiff=a};a(l,"top"),a(d,"left")}),200).then((e=>{i((()=>{null!=e&&window.clearInterval(e)}))}))}),"popupPositioning")}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,o=i||n;if(!o)return!1;const s=this.getPopupIndex(t);if(-1===s)return!1;for(let r=s;r<this.popupList.length;r++){if(xi(this.popupList[r].element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){const t=Tt(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,o=this.getWrapper(e);if(!o||n<=1||!t.contains(e))return;const s=[],r=[];for(const c of i)c!==o&&(c.classList.contains("ag-always-on-top")?r.push(c):s.push(c));const a=[],l=r.length,d=o.classList.contains("ag-always-on-top")||!l?[...s,...r,o]:[...s,o,...r];for(let c=0;c<=n;c++){const e=d[c];if(i[c]===d[c]||e===o)continue;e.querySelectorAll("div").forEach((e=>{0!==e.scrollTop&&a.push([e,e.scrollTop])})),0===c?t.insertAdjacentElement("afterbegin",e):d[c-1].insertAdjacentElement("afterend",e)}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}}]};var Ph={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Nh=["january","february","march","april","may","june","july","august","september","october","november","december"];function Fh(e,t){return null==e?-1:null==t?1:parseFloat(e)-parseFloat(t)}function Oh(e,t){return e?new Rn((i=>{e.then((e=>{"function"!==typeof e.setModel&&(pt(65),i()),(e.setModel(t)||Rn.resolve()).then((()=>i()))}))})):Rn.resolve()}var Bh=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach((t=>{if("string"===typeof t)return;[["displayKey"],["displayName"],["predicate","test"]].every((e=>!!e.some((e=>null!=t[e]))||(pt(72,{keys:e}),!1)))?this.customFilterOptions[t.displayKey]=t:this.filterOptions=e.filter((e=>e===t))||[]}))}selectDefaultItem(e){const{filterOptions:t}=this;if(e.defaultOption)this.defaultOption=e.defaultOption;else if(t.length>=1){const e=t[0];"string"===typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:pt(73)}else pt(74)}getCustomOption(e){return this.customFilterOptions[e]}};function Gh(e,t,i){return null==i?e.splice(t):e.splice(t,i)}function zh(e){return null==e||"string"===typeof e&&0===e.trim().length}var _h=class extends Ts{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:e}=t;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,i)=>{const n=0===i?e:this.optionsFactory.defaultOption;t.setValue(n,!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOperatorsOr:e,defaultJoinOperator:t}=this;return 0===e.length?t:!0===e[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,n=!t.operator;if(!i&&n||i&&!n)return!1;let o;if(i){const i=e,n=t;o=this.areSimpleModelsEqual(i,n)}else{const i=e,n=t;o=i.operator===n.operator&&zi(i.conditions,n.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return o}shouldRefresh(e){var t,i,n;const o=this.getModel(),s=o?null!==(t=o.conditions)&&void 0!==t?t:[o]:null,r=null!==(i=null===(n=e.filterOptions)||void 0===n?void 0:n.map((e=>"string"===typeof e?e:e.displayKey)))&&void 0!==i?i:this.getDefaultFilterOptions();return!(s&&!s.every((e=>void 0!==r.find((t=>t===e.type)))))&&!("number"===typeof e.maxNumConditions&&s&&s.length>e.maxNumConditions)}refresh(e){if(!this.shouldRefresh(e))return!1;return!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],pt(77));const n=function(e,t){let i=e.length;return i>t&&(e.splice(t),pt(78),i=t),i}(i,this.maxNumConditions),o=this.getNumConditions();if(n<o)this.removeConditionsAndOperators(n);else if(n>o)for(let e=o;e<n;e++)this.createJoinOperatorPanel(),this.createOption();const s="OR"===t.operator;this.eJoinOperatorsAnd.forEach((e=>e.setValue(!s,!0))),this.eJoinOperatorsOr.forEach((e=>e.setValue(s,!0))),i.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Rn.resolve()}doesFilterPass(e){const t=this.getModel();if(null==t)return!0;const{operator:i}=t,n=[];if(i){var o;const e=t;n.push(...null!==(o=e.conditions)&&void 0!==o?o:[])}else n.push(t);return n[i&&"OR"===i?"some":"every"]((t=>this.individualConditionPasses(e,t)))}setParams(e){var t;super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator="AND"===(t=e.defaultJoinOperator)||"OR"===t?t:"AND",this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Bh,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var t,i;let n=null!==(t=e.maxNumConditions)&&void 0!==t?t:2;n<1&&(pt(79),n=1),this.maxNumConditions=n;let o=null!==(i=e.numAlwaysVisibleConditions)&&void 0!==i?i:1;o<1&&(pt(80),o=1),o>n&&(pt(81),o=n),this.numAlwaysVisibleConditions=o}createOption(){const e=this.createManagedBean(new Ma);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,(e=>this.resetInput(e))),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const n=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,o),this.resetJoinOperatorOr(i,n,o),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const n=this.createManagedBean(new ta);e.push(n);const o="ag-filter-condition-operator";return n.addCssClass(o),n.addCssClass("".concat(o,"-").concat(i)),t.appendChild(n.getGui()),n}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map((e=>"string"===typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach((t=>{e.addOption(t)})),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{var i;const t=null!==(i=this.lastUiCompletePosition)&&void 0!==i?i:this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,n=t-i;n>0&&this.removeConditionsAndOperators(i,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,i)=>{const n=this.isConditionDisabled(i,e);t.setDisabled(n||this.filterListOptions.length<=1),1===i&&(ce(this.eJoinOperatorPanels[0],n),this.eJoinOperatorsAnd[0].setDisabled(n),this.eJoinOperatorsOr[0].setDisabled(n))})),this.eConditionBodies.forEach(((e,t)=>{le(e,this.isConditionBodyVisible(t))}));const i="OR"===(null!==t&&void 0!==t?t:this.getJoinOperator());this.eJoinOperatorsAnd.forEach((e=>{e.setValue(!i,!0)})),this.eJoinOperatorsOr.forEach((e=>{e.setValue(i,!0)})),this.forEachInput(((t,i,n,o)=>{this.setElementDisplayed(t,i<o),this.setElementDisabled(t,this.isConditionDisabled(n,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:n,eJoinOperatorPanels:o,eJoinOperatorsAnd:s,eJoinOperatorsOr:r}=this;this.removeComponents(i,e,t),this.removeElements(n,e,t),this.removeValueElements(e,t);const a=Math.max(e-1,0);this.removeElements(o,a,t),this.removeComponents(s,a,t),this.removeComponents(r,a,t)}removeElements(e,t,i){Gh(e,t,i).forEach((e=>we(e)))}removeComponents(e,t,i){Gh(e,t,i).forEach((e=>{we(e.getGui()),this.destroyBean(e)}))}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),null===e||void 0===e||!e.suppressFocus){var t;const{eFilterBody:e,eTypes:n}=this;let o;if(!this.isReadOnly()){const e=this.getInputs(0)[0];var i;if(e instanceof Kr&&this.isConditionBodyVisible(0))o=e.getInputElement();else o=null===(i=n[0])||void 0===i?void 0:i.getFocusableElement()}(null!==(t=o)&&void 0!==t?t:e).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,n=!1;const o=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))-1===t&&(t=r,i=r);else{const e=r<t;(r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1)||e)&&(this.removeConditionsAndOperators(r,1),n=!0,e&&i--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(i,o),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if("function"===typeof this.filterPlaceholder){const e=this.eTypes[t].getValue(),n=this.translate(e);i=this.filterPlaceholder({filterOptionKey:e,filterOption:n,placeholder:i})}else"string"===typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput(((t,i,n,o)=>{if(!(t instanceof Kr))return;const s=0===i&&o>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",r=0===i&&o>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(s,n)),t.setInputAriaLabel(r)}))}setElementValue(e,t,i){e instanceof Kr&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof En&&le(e.getGui(),t)}setElementDisabled(e,t){e instanceof En&&ce(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Kr&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,i)=>{this.forEachPositionTypeInput(i,t,e)}))}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const n=this.getNumberOfInputs(t),o=this.getInputs(e);for(let s=0;s<o.length;s++){const t=o[s];null!=t&&i(t,s,e,n)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){if(e>=this.getNumConditions())return!1;return"empty"!==this.getConditionType(e)&&!this.getValues(e).some((e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinOperatorsAnd.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Rn.resolve()}resetType(e){const t=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,"AND"===this.defaultJoinOperator,this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,"OR"===this.defaultJoinOperator,this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,o){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(o)).setLabel(n),t)}updateJoinOperatorsDisabled(){const e=(e,t)=>this.updateJoinOperatorDisabled(e,t);this.eJoinOperatorsAnd.forEach(e),this.eJoinOperatorsOr.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput(((e,n,o)=>{o===t&&this.setElementValue(e,null!=i[n]?i[n]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,i,n)=>{this.setElementValue(t,0===i&&0===n?e:null,!0)}))}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),n=this.mapValuesFromModel(t),o=function(e,t,i){if(null==e)return;const{predicate:n}=e;return null==n||t.some((e=>null==e))?void 0:n(t,i)}(this.optionsFactory.getCustomOption(t.type),n,i);return null!=o?o:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e)}hasInvalidInputs(){return!1}},Vh=class extends _h{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:n,includeBlanksInLessThan:o,includeBlanksInRange:s}=this.scalarFilterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(n)return!0;break;case"lessThan":case"lessThanOrEqual":if(o)return!0;break;case"inRange":if(s)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const n=this.comparator(),o=null!=e[0]?n(e[0],t):0;switch(i.type){case"equals":return 0===o;case"notEqual":return 0!==o;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const i=n(e[1],t);return this.scalarFilterParams.inRangeInclusive?o>=0&&i<=0:o>0&&i<0}case"blank":return zh(t);case"notBlank":return!zh(t);default:return pt(76,{filterModelType:i.type}),!0}}},Hh=class{constructor(e,t,i,n,o){this.alive=!0,this.context=e,this.eParent=n;const s=function(e,t){return e.getCompDetailsFromGridOptions(Pn,"agDateInput",t,!0)}(t,i);s&&s.newAgStackInstance().then((t=>{var i;if(!this.alive)return void e.destroyBean(t);if(this.dateComp=t,!t)return;n.appendChild(t.getGui()),null===t||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t);const{tempValue:s,disabled:r}=this;var a;(s&&t.setDate(s),null!=r)&&(null===(a=t.setDisabled)||void 0===a||a.call(t,r));null===o||void 0===o||o(this)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;var i;t?null===(i=t.setDisabled)||void 0===i||i.call(t,e):this.disabled=e}setDisplayed(e){le(this.eParent,e)}setInputPlaceholder(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.setInputPlaceholder)||void 0===i||i.call(t,e)}setInputAriaLabel(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.setInputAriaLabel)||void 0===i||i.call(t,e)}afterGuiAttached(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e)}updateParams(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.refresh)||void 0===i||i.call(t,e)}},Wh=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],jh=class{constructor(e,t,i){this.getLocaleTextFunc=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.getLocaleTextFunc();if(t){var n;const t=e,o=(null!==(n=t.conditions)&&void 0!==n?n:[]).map((e=>this.getModelAsString(e))),s="AND"===t.operator?"andCondition":"orCondition";return o.join(" ".concat(i(s,ks[s])," "))}if("blank"===e.type||"notBlank"===e.type)return i(e.type,e.type);{const t=e,n=this.optionsFactory.getCustomOption(t.type),{displayKey:o,displayName:s,numberOfInputs:r}=n||{};return o&&s&&0===r?(i(o,s),s):this.conditionToString(t,n)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;const i=this.valueFormatter;return i?null!==(t=i(null!==e&&void 0!==e?e:null))&&void 0!==t?t:"":String(e)}},Uh=class extends jh{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:n}=t||{},o="inRange"==i||2===n,s=pa(e.dateFrom),r=pa(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(o){const e=null!==s?ua(s,a):"null",t=null!==r?ua(r,a):"null";return"".concat(e,"-").concat(t)}return null!=s?ua(s,a):"".concat(i)}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},Kh=1/0;function Yh(e,t){return null==t||t<e?-1:t>e?1:0}var Zh=class extends En{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.defaultOption);let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new Bh;this.optionsFactory=i,i.init(e.filterParams,this.getDefaultOptions());const n=i.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const o=this.isTypeEditable(n);this.setEditable(o)}refresh(e){this.setSimpleParams(e)}hasSingleInput(e){var t;const i=null===(t=this.optionsFactory.getCustomOption(e))||void 0===t?void 0:t.numberOfInputs;return null==i||1==i}isTypeEditable(e){return!!e&&!this.readOnly&&this.hasSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);return"".concat(t," ").concat(this.getLocaleTextFunc()("ariaFilterInput","Filter Input"))}},Xh=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],qh=class extends jh{conditionToString(e,t){const{numberOfInputs:i}=t||{},{filter:n,filterTo:o,type:s}=e,r="inRange"==s||2===i,a=this.formatValue.bind(this);return r?"".concat(a(n),"-").concat(a(o)):null!=n?a(n):"".concat(s)}};function Qh(e){const{allowedCharPattern:t}=null!==e&&void 0!==e?e:{};return null!==t&&void 0!==t?t:null}var Jh=class extends Si{constructor(e){super(),this.params=e,this.eInput=Tn,this.onValueChanged=()=>{}}setupGui(e){var t;this.eInput=this.createManagedBean(new oa(null===(t=this.params)||void 0===t?void 0:t.config));const i=this.eInput.getGui();e.appendChild(i);const n=e=>this.onValueChanged(e);this.addManagedListeners(i,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams(e){let{ariaLabel:t,autoComplete:i}=e;const{eInput:n}=this;n.setInputAriaLabel(t),void 0!==i&&n.setAutoComplete(i)}};function $h(e){const t=null===e||void 0===e?void 0:e.trim();return""===t?e:t}var eu=class extends Zh{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Tn,this.defaultDebounceMs=500}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}onParentModelChanged(e,t){null!==t&&void 0!==t&&t.afterFloatingFilter||null!==t&&void 0!==t&&t.afterDataChange||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;const i=null!==(t=e.browserAutoComplete)&&void 0!==t&&t,{inputSvc:n,defaultDebounceMs:o,readOnly:s}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=As(e.filterParams),!s){const t=Is(e.filterParams,o),i=$e(this,this.syncUpWithParentFilter.bind(this),t);n.setValueChangedListener(i)}}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();xe(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===Do.ENTER;if(this.applyActive&&!t)return;const{inputSvc:i,params:n}=this;let o=i.getValue();n.filterParams.trimInput&&(o=$h(o),i.setValue(o,!0)),n.parentFilterInstance((e=>{null===e||void 0===e||e.onFloatingFilterChanged(this.lastType||null,o||null)}))}setEditable(e){this.inputSvc.setEditable(e)}},tu=class extends Si{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new aa),this.eTextInput=this.createManagedBean(new oa),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,(e=>this.onValueChanged(e))),this.setupListeners(i,(e=>this.onValueChanged(e)))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},iu=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],nu=class extends jh{conditionToString(e,t){const{numberOfInputs:i}=t||{},{filter:n,filterTo:o,type:s}=e;return"inRange"==s||2===i?"".concat(n,"-").concat(o):"".concat(null!=n?n:s)}};var ou={moduleName:"ClientSideRowModelFilter",version:it,rowModels:["clientSide"],beans:[class extends Si{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var t;const i=!(null===(t=this.filterManager)||void 0===t||!t.isChildFilterPresent());this.filterNodes(i,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,Th(t)};if(this.doingTreeDataFiltering()){const e=(t,n)=>{if(t.childrenAfterGroup)for(let o=0;o<t.childrenAfterGroup.length;o++){const s=t.childrenAfterGroup[o],r=n||this.filterManager.doesRowPassFilter({rowNode:s});s.childrenAfterGroup?e(t.childrenAfterGroup[o],r):i(s,r)}i(t,n)},n=t=>e(t,!1);t.executeFromRootNode(n)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}}]},su={moduleName:"FilterCore",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onAdvFilterEnabledChanged(t)},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",(()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})}))}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"===typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"===typeof t&&t(e)}setFilterModel(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.isAdvFilterEnabled()?this.warnAdvFilters():null===(t=this.colFilter)||void 0===t||t.setFilterModel(e,i)}getFilterModel(){var e,t;return null!==(e=null===(t=this.colFilter)||void 0===t?void 0:t.getFilterModel())&&void 0!==e?e:{}}isColumnFilterPresent(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isAggregateFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,i;e?null!==(t=this.colFilter)&&void 0!==t&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):null!==(i=this.advancedFilter)&&void 0!==i&&i.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!(null===(e=this.advancedFilter)||void 0===e||!e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}resetQuickFilterCache(){var e;null===(e=this.quickFilter)||void 0===e||e.resetCache()}refreshFiltersForAggregations(){zt(this.gos)&&this.onFilterChanged()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Rn.resolve()).then((()=>{var e;const o={source:t,type:"filterChanged",columns:n};i&&Di(o,i),this.eventSvc.dispatchEvent(o),null===(e=this.colFilter)||void 0===e||e.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!(null===(e=this.quickFilter)||void 0===e||!e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!zt(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){var t;const{rowNode:i}=e;return!(null===(t=this.alwaysPassFilter)||void 0===t||!t.call(this,i))||!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(i))&&!(this.isAggregateFilterPresent()&&!this.colFilter.doAggregateFiltersPass(i,e.filterInstanceToSkip))}doesRowPassFilter(e){var t;const{rowNode:i}=e;return!(null===(t=this.alwaysPassFilter)||void 0===t||!t.call(this,i))||!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(i))&&(!(this.externalFilterPresent&&!this.doesExternalFilterPass(i))&&(!(this.isColumnFilterPresent()&&!this.colFilter.doColumnFiltersPass(i,e.filterInstanceToSkip))&&!(this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(i))))}isFilterActive(e){var t;return!(null===(t=this.colFilter)||void 0===t||!t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t,i;return null!==(t=null===(i=this.colFilter)||void 0===i?void 0:i.getOrCreateFilterWrapper(e))&&void 0!==t?t:null}getDefaultFloatingFilter(e){return this.colFilter.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.colFilter.createFilterParams(e,t)}isFilterAllowed(e){var t;return!this.isAdvFilterEnabled()&&!(null===(t=this.colFilter)||void 0===t||!t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return null===(i=this.colFilter)||void 0===i?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return null===(t=this.colFilter)||void 0===t?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";null===(t=this.colFilter)||void 0===t||t.destroyFilter(e,i)}areFilterCompsDifferent(e,t){var i;return!(null===(i=this.colFilter)||void 0===i||!i.areFilterCompsDifferent(e,t))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e){var t;this.isAdvFilterEnabled()&&(null!==(t=this.beans.dataTypeSvc)&&void 0!==t&&t.isPendingInference?this.advFilterModelUpdateQueue.push(e):(this.advancedFilter.setModel(null!==e&&void 0!==e?e:null),this.onFilterChanged({source:"advancedFilter"})))}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return!this.isAdvFilterEnabled()&&!(null===(e=this.colFilter)||void 0===e||!e.hasFloatingFilters())}getColumnFilterInstance(e){var t,i;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):null!==(t=null===(i=this.colFilter)||void 0===i?void 0:i.getColumnFilterInstance(e))&&void 0!==t?t:Promise.resolve(void 0)}warnAdvFilters(){pt(68)}setupAdvFilterHeaderComp(e){var t;null===(t=this.advancedFilter)||void 0===t||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach((e=>this.setAdvFilterModel(e))),this.advFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return null===(t=this.colFilter)||void 0===t?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i,n;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):null!==(i=null===(n=this.colFilter)||void 0===n?void 0:n.setColumnFilterModel(e,t))&&void 0!==i?i:Promise.resolve()}setColDefPropertiesForDataType(e,t,i){var n;null===(n=this.colFilter)||void 0===n||n.setColDefPropertiesForDataType(e,t,i)}}],apiFunctions:{isAnyFilterPresent:function(e){var t;return!(null===(t=e.filterManager)||void 0===t||!t.isAnyFilterPresent())},onFilterChanged:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";null===(t=e.filterManager)||void 0===t||t.onFilterChanged({source:i})}},css:[".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-set-floating-filter-input [disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}"],dependsOn:[ou]},ru={moduleName:"FilterValue",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t){if(!t)return;const i=e.getColDef(),{filterValueGetter:n}=i;return n?this.executeFilterValueGetter(n,t.data,e,t,i):this.beans.valueSvc.getValue(e,t)}executeFilterValueGetter(e,t,i,n,o){const{expressionSvc:s,valueSvc:r}=this.beans,a=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:o,getValue:r.getValueCallback.bind(r,n)});return"function"===typeof e?e(a):null===s||void 0===s?void 0:s.evaluate(e,a)}}]},au={moduleName:"ColumnFilter",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:e=>{var t;let{params:i}=e;(i.rowDataUpdated||null!==(t=i.changedProps)&&void 0!==t&&t.has("treeData"))&&this.onNewRowsLoaded("rowDataUpdated")},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=l({},null!==(e=null===(t=this.gos.get("initialState"))||void 0===t||null===(t=t.filter)||void 0===t?void 0:t.filterModel)&&void 0!==e?e:{})}setFilterModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const{colModel:i,dataTypeSvc:n,filterManager:o}=this.beans;if(null!==n&&void 0!==n&&n.isPendingInference)return void this.filterModelUpdateQueue.push({model:e,source:t});const s=[],r=this.getFilterModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach(((i,n)=>{const o=e[n];s.push(Oh(i.filterPromise,o)),t.delete(n)})),t.forEach((t=>{const n=i.getColDefCol(t)||i.getCol(t);if(!n)return void pt(62,{colId:t});if(!n.isFilterAllowed())return void pt(63,{colId:t});const o=this.getOrCreateFilterWrapper(n);o?s.push(Oh(o.filterPromise,e[t])):pt(64,{colId:t})}))}else this.allColumnFilters.forEach((e=>{s.push(Oh(e.filterPromise,null))}));Rn.all(s).then((()=>{const e=this.getFilterModel(!0),i=[];this.allColumnFilters.forEach(((t,n)=>{He(r?r[n]:null,e?e[n]:null)||i.push(t.column)})),i.length>0&&(null===o||void 0===o||o.onFilterChanged({columns:i,source:t}))}))}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:n,beans:{colModel:o}}=this;return i.forEach(((e,i)=>{const n=this.getModelFromFilterWrapper(e);ze(n)&&(t[i]=n)})),e||Object.entries(n).forEach((e=>{var n;let[s,r]=e;ze(r)&&!i.has(s)&&null!==(n=o.getCol(s))&&void 0!==n&&n.isFilterAllowed()&&(t[s]=r)})),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?"function"!==typeof t.getModel?(pt(66),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){var t;return null!==(t=this.initialFilterModel[e.getColId()])&&void 0!==t?t:null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){const{allColumnFilters:e}=this;return!!e.size&&(e.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),!0)}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const{colModel:e,gos:t}=this.beans,i=!!zt(t),n=[],o=[];return this.forEachColumnFilter(((t,s)=>{const r=(e=>!!e&&(e.isFilterActive?e.isFilterActive():(pt(67),!1)))(t);r&&((t=>{if(!t.isPrimary())return!0;const n=!e.isPivotActive();return!(!t.isValueActive()||!n)&&(!!e.isPivotMode()||i)})(s.column)?n.push(t):o.push(t))})).then((()=>{this.activeAggregateFilters=n,this.activeColumnFilters=o}))}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter(((i,n)=>this.setColFilterActive(n.column,i.isFilterActive(),e,t)))}forEachColumnFilter(e){const t=[];return this.allColumnFilters.forEach((i=>{const n=i.filterPromise;n&&t.push(n.then((t=>e(t,i))))})),Rn.all(t)}doColumnFiltersPass(e,t,i){const{data:n,aggData:o}=e,s=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?o:n;for(let a=0;a<s.length;a++){const i=s[a];if(null!=i&&i!==t)if("function"===typeof i.doesFilterPass){if(!i.doesFilterPass({node:e,data:r}))return!1}else gt(91)}return!0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,n=()=>{this.isAlive()&&(null===i||void 0===i||i.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(n,0):n()}updateBeforeFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((e=>{e.filterPromise&&e.filterPromise.then((e=>{e&&e!==t&&e.onAnyFilterChanged&&e.onAnyFilterChanged()}))})),this.processingFilterChange=!0}))))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null!==(e=this.gos.get("allowShowChangeAfterFilter"))&&void 0!==e&&e)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter((e=>{var t;null===(t=e.onNewRowsLoaded)||void 0===t||t.call(e)})).then((()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0}))).then((()=>this.updateActiveFilters()))}createGetValue(e){const{filterValueSvc:t,colModel:i}=this.beans;return(n,o)=>{const s=o?i.getCol(o):e;return s?t.getValue(s,n):void 0}}isFilterActive(e){var t;const{filter:i}=null!==(t=this.cachedFilter(e))&&void 0!==t?t:{};return i?i.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;const{gos:i,dataTypeSvc:n}=this.beans;if(di(i))t="agSetColumnFilter";else{const i=null===n||void 0===n?void 0:n.getBaseDataType(e);t="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;const{gos:i,dataTypeSvc:n}=this.beans;if(di(i))t="agSetColumnFloatingFilter";else{const i=null===n||void 0===n?void 0:n.getBaseDataType(e);t="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),n=e.getColDef();let o;const s=l(l({},this.createFilterParams(e,n)),{},{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(o,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(o,e)(t),doesRowPassOtherFilter:e=>{var t,i;return null===(t=null===(i=this.beans.filterManager)||void 0===i?void 0:i.doesRowPassOtherFilters(o,e))||void 0===t||t}}),r=no(this.beans.userCompFactory,n,s,i);return r?{filterPromise:()=>{const e=r.newAgStackInstance();return e.then((e=>{o=e,t&&(t.filter=null!==e&&void 0!==e?e:void 0)})),e},compDetails:r}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:t,rowModel:this.beans.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){var t;const i={column:e,filterPromise:null,compDetails:null},{filterPromise:n,compDetails:o}=this.createFilterInstance(e,i);return i.filterPromise=null!==(t=null===n||void 0===n?void 0:n())&&void 0!==t?t:null,i.compDetails=o,i}onColumnsChanged(){const e=[],{colModel:t,filterManager:i}=this.beans;this.allColumnFilters.forEach(((i,n)=>{let o;o=i.column.isPrimary()?t.getColDefCol(n):t.getCol(n),o&&o===i.column||(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(n))}));const n=e.every((e=>"agGroupColumnFilter"===e.getColDef().filter));e.length>0&&!n?null===i||void 0===i||i.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){var e;null===(e=this.beans.autoColSvc)||void 0===e||null===(e=e.getAutoCols())||void 0===e||e.forEach((e=>{"agGroupColumnFilter"===e.getColDef().filter&&this.getOrCreateFilterWrapper(e)}))}isFilterAllowed(e){var t;if(!e.isFilterAllowed())return!1;const{filter:i}=null!==(t=this.allColumnFilters.get(e.getColId()))&&void 0!==t?t:{};return!i||("function"!==typeof(null===i||void 0===i?void 0:i.isFilterAllowed)||i.isFilterAllowed())}getFloatingFilterCompDetails(e,t){const i=t=>{var i;const n=null===(i=this.getOrCreateFilterWrapper(e))||void 0===i?void 0:i.filterPromise;null!=n&&n.then((e=>{t(so(e))}))},n=e.getColDef(),o=l(l({},this.createFilterParams(e,n)),{},{filterChangedCallback:()=>i((t=>this.filterChangedCallbackFactory(t,e)()))}),{userCompFactory:s,frameworkOverrides:r}=this.beans,a=function(e,t,i){return e.mergeParams(t,Yn,i)}(s,n,o);let d=Es(r,n,(()=>this.getDefaultFloatingFilter(e)));null==d&&(d="agReadOnlyFloatingFilter");return oo(s,n,{column:e,filterParams:a,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t},d)}getCurrentFloatingFilterParentModel(e){var t;return this.getModelFromFilterWrapper(null!==(t=this.cachedFilter(e))&&void 0!==t?t:{column:e})}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=e.getColId(),n=this.allColumnFilters.get(i);var o;(this.disposeColumnListener(i),delete this.initialFilterModel[i],n)&&(this.disposeFilterWrapper(n,t),null===(o=this.beans.filterManager)||void 0===o||o.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){var i;null===(i=e.filterPromise)||void 0===i||i.then((i=>{this.destroyBean(i),this.setColFilterActive(e.column,!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})}))}filterModifiedCallbackFactory(e,t){return()=>{this.eventSvc.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{var n;const o=null!==(n=null===i||void 0===i?void 0:i.source)&&void 0!==n?n:"columnFilter",s={filter:e,additionalEventAttributes:i,columns:[t],source:o};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n))return void this.destroyFilter(i,"paramsUpdated");const o=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then((e=>{!1===(null===e||void 0===e||!e.refresh||e.refresh(l(l({},this.createFilterParams(i,i.getColDef())),{},{filterModifiedCallback:this.filterModifiedCallbackFactory(e,i),filterChangedCallback:this.filterChangedCallbackFactory(e,i),doesRowPassOtherFilter:t=>{var i,n;return null===(i=null===(n=this.beans.filterManager)||void 0===n?void 0:n.doesRowPassOtherFilters(e,t))||void 0===i||i}},o)))&&this.destroyFilter(i,"paramsUpdated")})):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||(null===i||void 0===i?void 0:i.render)&&(null===n||void 0===n?void 0:n.render)&&i.render===n.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some((e=>e.getColDef().floatingFilter))}getColumnFilterInstance(e){return new Promise((t=>{this.getFilterInstanceImpl(e).then((e=>{t(so(e))}))}))}getFilterInstanceImpl(e){var t;const i=this.beans.colModel.getColDefCol(e);if(!i)return Rn.resolve(void 0);const n=null===(t=this.getOrCreateFilterWrapper(i))||void 0===t?void 0:t.filterPromise;return null!==n&&void 0!==n?n:Rn.resolve(null)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach((e=>{let{model:t,source:i}=e;return this.setFilterModel(t,i)})),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach((e=>{let{key:t,model:i,resolve:n}=e;this.setColumnFilterModel(t,i).then((()=>n()))})),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){const{colModel:i,dataTypeSvc:n}=this.beans;if(null!==n&&void 0!==n&&n.isPendingInference){let i=()=>{};const n=new Promise((e=>{i=e}));return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:i}),n}const o=i.getColDefCol(e),s=o?this.getOrCreateFilterWrapper(o):null;return s?(r=Oh(s.filterPromise,t),new Promise((e=>{r.then((t=>e(t)))}))):Promise.resolve();var r}getFilterWrapper(e){var t;const i=this.beans.colModel.getColDefCol(e);return i&&null!==(t=this.cachedFilter(i))&&void 0!==t?t:null}setColDefPropertiesForDataType(e,t,i){const n=di(this.gos),o=this.getLocaleTextFunc(),s=t=>{const{filterParams:i}=e;e.filterParams="object"===typeof i?l(l({},i),t):t};switch(t.baseDataType){case"number":n&&s({comparator:Fh});break;case"boolean":s(n?{valueFormatter:e=>ze(e.value)?o(String(e.value),e.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":n&&s({valueFormatter:e=>{const t=i(e);return ze(t)?t:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Nh[Number(e)-1];return o(t,Ph[t])}return null!==e&&void 0!==e?e:o("blanks","(Blanks)")}});break;case"dateString":{const e=t.dateParser;s(n?{valueFormatter:e=>{const t=i(e);return ze(t)?t:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:t=>{const i=e(null!==t&&void 0!==t?t:void 0);return i?[String(i.getFullYear()),String(i.getMonth()+1),String(i.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Nh[Number(e)-1];return o(t,Ph[t])}return null!==e&&void 0!==e?e:o("blanks","(Blanks)")}}:{comparator:(t,i)=>{const n=e(i);return null==i||n<t?-1:n>t?1:0}});break}case"object":n?s({valueFormatter:e=>{const t=i(e);return ze(t)?t:o("blanks","(Blanks)")}}):e.filterValueGetter=e=>i({column:e.column,node:e.node,value:this.beans.valueSvc.getValue(e.column,e.node)})}}setColFilterActive(e,t,i,n){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,n)}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear()}},class extends Si{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;null===(e=this.hidePopup)||void 0===e||e.call(this)}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,(n=>{var o;null===(o=this.popupSvc)||void 0===o||o.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})}),i,t.target,ci(this.gos))}showMenuAfterButtonClick(e,t,i){let n=-1,o="left";const s=ci(this.gos);!s&&this.gos.get("enableRtl")&&(n=1,o="right");const r=s?void 0:4*n,a=s?void 0:4;this.showPopup(e,(n=>{var s;null===(s=this.popupSvc)||void 0===s||s.positionPopupByComponent({type:i,eventSource:t,ePopup:n,nudgeX:r,nudgeY:a,alignSide:o,keepWithinBounds:!0,position:"under",column:e})}),i,t,s)}showPopup(e,t,i,n,o){var s;const r=e?this.createBean(new bs(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,null===r||void 0===r||!r.hasFilter()||!e)return void gt(57);const a=document.createElement("div");let l;I(a,"presentation"),a.classList.add("ag-menu"),o||a.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(a,{keydown:e=>this.trapFocusWithin(e,a)}),a.appendChild(null===r||void 0===r?void 0:r.getGui());const d=hi(this.gos)?null!==n&&void 0!==n?n:this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,c=this.getLocaleTextFunc(),h=o&&"columnFilter"!==i?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),u=null===(s=this.popupSvc)||void 0===s?void 0:s.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:t=>{_r(e,!1,"contextMenu");const o=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),o&&n&&Me(n)){const e=Fo(n);null===e||void 0===e||e.focus({preventScroll:!0})}null===r||void 0===r||r.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},positionCallback:()=>t(a),anchorToElement:d,ariaLabel:h});u&&(this.hidePopup=l=u.hideFunc),r.afterInit().then((()=>{t(a),r.afterGuiAttached({container:i,hidePopup:l})})),_r(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==Do.TAB||e.defaultPrevented||No(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),Po(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:null!==i&&void 0!==i?i:null,columnGroup:null})}isMenuEnabled(e){var t;return e.isFilterAllowed()&&(null!==(t=e.getColDef().menuTabs)&&void 0!==t?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}}],dynamicBeans:{headerFilterCellCtrl:class extends Nr{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,i,n,o){this.comp=e;const s=kn(this,this.beans.context,o);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t,s),this.setupActive(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s),s.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(s)}),s.addDestroyFunc((()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()}))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Wr("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Ds(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();A(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if(Lt(t)===this.eGui)return;const i=No(t,this.eGui,null,e.shiftKey);var n;if(i)return null===(n=t.headerNavigation)||void 0===n||n.scrollToColumn(this.column),e.preventDefault(),void i.focus();const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Do.UP:case Do.DOWN:t||e.preventDefault();case Do.LEFT:case Do.RIGHT:if(t)return;e.stopPropagation();case Do.ENTER:t&&Po(this.eGui)&&e.preventDefault();break;case Do.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&he(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==Do.TAB);if(e&&t){const t=e.shiftKey;Po(this.eGui,t)}}this.focusThis()}setupHover(e){var t;null===(t=this.beans.colHover)||void 0===t||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new Rr(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!(null!==(e=this.beans.menuSvc)&&void 0!==e&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!ci(this.gos)}setupUserComp(){var e;if(!this.active)return;const t=null===(e=this.beans.filterManager)||void 0===e?void 0:e.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));t&&this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var e;const t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;null===(e=this.beans.menuSvc)||void 0===e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=e=>{if("filterDestroyed"===(null===e||void 0===e?void 0:e.source)&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then((i=>{if(i){var n;const o=null===t||void 0===t?void 0:t.getCurrentFloatingFilterParentModel(this.column),s=e?l(l({},e),{},{columns:null!==(n=e.columns)&&void 0!==n?n:[],source:"api"===e.source?"api":"columnFilter"}):null;i.onParentModelChanged(o,s)}}))};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),null!==t&&void 0!==t&&t.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const e="".concat(this.column.getActualWidth(),"px");this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){var e;const t=!(null===(e=this.beans.filterManager)||void 0===e||!e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var t;const i=this.active;this.setupActive();const n=!i&&this.active;i&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const o=this.active?null===(t=this.beans.filterManager)||void 0===t?void 0:t.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,s=this.comp.getFloatingFilterComp();s&&o?s.then((t=>{var i,s;!t||null!==(i=this.beans.filterManager)&&void 0!==i&&i.areFilterCompsDifferent(null!==(s=this.userCompDetails)&&void 0!==s?s:null,o)?this.updateCompDetails(e,o,n):this.updateFloatingFilterParams(o)})):this.updateCompDetails(e,o,n)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var t;if(!e)return;const i=e.params;null===(t=this.comp.getFloatingFilterComp())||void 0===t||t.then((e=>{null!==e&&void 0!==e&&e.refresh&&"function"===typeof e.refresh&&e.refresh(i)}))}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:function(e){const t=e.filterManager;return!(null===t||void 0===t||!t.isColumnFilterPresent())||!(null===t||void 0===t||!t.isAggregateFilterPresent())},getColumnFilterInstance:function(e,t){var i,n;return null!==(i=null===(n=e.filterManager)||void 0===n?void 0:n.getColumnFilterInstance(t))&&void 0!==i?i:Promise.resolve(void 0)},destroyFilter:function(e,t){const i=e.colModel.getColDefCol(t);var n;if(i)return null===(n=e.filterManager)||void 0===n?void 0:n.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.filterManager)||void 0===i?void 0:i.setFilterModel(t)}))},getFilterModel:function(e){var t,i;return null!==(t=null===(i=e.filterManager)||void 0===i?void 0:i.getFilterModel())&&void 0!==t?t:{}},getColumnFilterModel:function(e,t){var i,n;return null!==(i=null===(n=e.filterManager)||void 0===n?void 0:n.getColumnFilterModel(t))&&void 0!==i?i:null},setColumnFilterModel:function(e,t,i){var n,o;return null!==(n=null===(o=e.filterManager)||void 0===o?void 0:o.setColumnFilterModel(t,i))&&void 0!==n?n:Promise.resolve()},showColumnFilter:function(e,t){var i;const n=e.colModel.getCol(t);n?null===(i=e.menuSvc)||void 0===i||i.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"}):gt(12,{colKey:t})}},dependsOn:[su,Lh,ru,Eh]},lu={moduleName:"CustomFilter",version:it,userComponents:{agReadOnlyFloatingFilter:class extends En{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[sa]),this.eFloatingFilterText=Tn}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(t," ").concat(this.getLocaleTextFunc()("ariaFilterInput","Filter Input")))}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})):this.eFloatingFilterText.setValue("")}refresh(e){this.init(e)}}},dependsOn:[au]},du={moduleName:"TextFilter",version:it,dependsOn:[au],userComponents:{agTextColumnFilter:class extends _h{constructor(){super("textFilter"),this.filterType="text",this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=e=>{let{filterOption:t,value:i,filterText:n}=e;if(null==n)return!1;switch(t){case"contains":return i.indexOf(n)>=0;case"notContains":return i.indexOf(n)<0;case"equals":return i===n;case"notEqual":return i!=n;case"startsWith":return 0===i.indexOf(n);case"endsWith":{const e=i.lastIndexOf(n);return e>=0&&e===i.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=e.textMatcher||this.defaultMatcher,this.formatter=e.textFormatter||(e.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new nu(this.getLocaleTextFunc.bind(this),this.optionsFactory)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,((e,n,o,s)=>{if(n<s){let n=Ge(e.getValue());var r;if(t&&this.textFilterParams.trimInput)n=null!==(r=$h(n))&&void 0!==r?r:null,e.setValue(n,!0);i.push(n)}})),i}getDefaultFilterOptions(){return iu}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),I(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new oa);n.addCssClass("ag-filter-".concat(i)),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,n){const o=e.map((e=>this.formatter(e)))||[],s=this.formatter(t),{api:r,colDef:a,column:d,context:c,textFormatter:h}=this.textFilterParams;if("blank"===i.type)return zh(t);if("notBlank"===i.type)return!zh(t);const u={api:r,colDef:a,column:d,context:c,node:n.node,data:n.data,filterOption:i.type,value:s,textFormatter:h};return o.some((e=>this.matcher(l(l({},u),{},{filterText:e}))))}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}},agTextColumnFloatingFilter:class extends eu{init(e){super.init(e),this.filterModelFormatter=new nu(this.getLocaleTextFunc.bind(this),this.optionsFactory)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return iu}createFloatingFilterInputService(){return this.createManagedBean(new Jh)}}}},cu={moduleName:"NumberFilter",version:it,dependsOn:[au],userComponents:{agNumberColumnFilter:class extends Vh{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new qh(this.getLocaleTextFunc.bind(this),this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return Xh}setElementValue(e,t,i){const{numberFormatter:n}=this.numberFilterParams,o=!i&&n?n(null!==t&&void 0!==t?t:null):t;super.setElementValue(e,o)}createValueElement(){const e=Qh(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),I(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const o=this.createManagedBean(n?new oa({allowedCharPattern:n}):new aa);o.addCssClass("ag-filter-".concat(i)),o.addCssClass("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeValueElements(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,n,o)=>{i<o&&t.push(this.processValue(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"===typeof e)return e;let t=Ge(e);null!=t&&""===t.trim()&&(t=null);const i=this.numberFilterParams.numberParser;return i?i(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}},agNumberColumnFloatingFilter:class extends eu{init(e){var t;super.init(e),this.filterModelFormatter=new qh(this.getLocaleTextFunc.bind(this),this.optionsFactory,null===(t=e.filterParams)||void 0===t?void 0:t.numberFormatter)}refresh(e){Qh(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return Xh}createFloatingFilterInputService(e){return this.allowedCharPattern=Qh(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Jh({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new tu)}}}},hu={moduleName:"DateFilter",version:it,dependsOn:[au],userComponents:{agDateColumnFilter:class extends Vh{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=Kh,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&pa(t)||null,i&&pa(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){var e;return null!==(e=this.dateFilterParams.comparator)&&void 0!==e?e:Yh}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,i)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);pt(82,{param:t})}return i};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",Kh),this.minValidYear>this.maxValidYear&&pt(83),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:pa(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:pa(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&pt(84),this.filterModelFormatter=new Uh(this.dateFilterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory)}createDateCompWrapper(e){const{userCompFactory:t,context:i}=this.beans,n=new Hh(i,t,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams,location:"filter"},e);return this.addDestroyFunc((()=>n.destroy())),n}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return Wh}createValueElement(){const e=Tt(this.beans).createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,n){const o=Tt(this.beans).createElement("div");o.classList.add("ag-filter-".concat(n)),o.classList.add("ag-filter-date-".concat(n)),t.push(o),e.appendChild(o),i.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),Gh(this.eConditionPanelsFrom,e,t),Gh(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){Gh(e,t,i).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:n,maxValidYear:o}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<n)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>o)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((i,n,o,s)=>{o!==e||!t||n>=s||(t=t&&this.isValidDateValue(i.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=ca(n[0])),n.length>1&&(i.dateTo=ca(n[1])),l({dateFrom:null,dateTo:null,filterType:this.filterType,type:t},i)}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)}))}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,n,o)=>{i<o&&t.push(e.getDate())})),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}},agDateInput:class extends En{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[sa]),this.eDateInput=Tn,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e,t){if(t.target===Lt(this.beans)&&!this.eDateInput.isDisabled())return this.isApply?(this.applyOnFocusOut=!e,void(e&&this.params.onDateChanged())):void(e||this.params.onDateChanged())}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Q(),t.type=i?"date":"text";const{minValidYear:n,maxValidYear:o,minValidDate:s,maxValidDate:r,buttons:a}=e.filterParams||{};if(s&&n&&pt(85),r&&o&&pt(86),s&&r){const[e,t]=[s,r].map((e=>e instanceof Date?e:pa(e)));e&&t&&e.getTime()>t.getTime()&&pt(87)}s?s instanceof Date?t.min=ua(s):t.min=s:n&&(t.min="".concat(n,"-01-01")),r?r instanceof Date?t.max=ua(r):t.max=r:o&&(t.max="".concat(o,"-12-31")),this.isApply="floatingFilter"===e.location&&!(null===a||void 0===a||!a.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return pa(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(ca(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t,i;return null===(t=null===e||void 0===e||null===(i=e.filterParams)||void 0===i?void 0:i.browserDatePicker)||void 0===t||t}},agDateColumnFloatingFilter:class extends Zh{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[sa]),this.eReadOnlyText=Tn,this.eDateWrapper=Tn}getDefaultOptions(){return Wh}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Uh(this.filterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory);const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams;const t=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const t=e?pa(e.dateFrom):null;this.dateComp.setDate(t),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){le(this.eDateWrapper,e),le(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){null!==t&&void 0!==t&&t.afterFloatingFilter||null!==t&&void 0!==t&&t.afterDataChange||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=ca(this.dateComp.getDate());this.params.parentFilterInstance((t=>{if(t){const i=pa(e);t.onFloatingFilterChanged(this.lastType||null,i)}}))}getDateComponentParams(){const{filterParams:e,column:t}=this.params,i=Is(e,this.defaultDebounceMs);return{onDateChanged:$e(this,this.onDateChanged.bind(this),i),filterParams:t.getColDef().filterParams,location:"floatingFilter"}}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i}=this;this.dateComp=new Hh(e,t,this.getDateComponentParams(),i,(e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}}}},uu={moduleName:"QuickFilter",version:it,rowModels:["clientSide"],beans:[class extends Si{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",(e=>this.setFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onColumnConfigChanged())),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setParserAndMatcher()))}refreshCols(){var e,t;const{autoColSvc:i,colModel:n,gos:o,pivotResultCols:s}=this.beans,r=n.isPivotMode(),a=null===i||void 0===i?void 0:i.getAutoCols(),l=n.getColDefCols();let d=null!==(e=r&&!o.get("applyQuickFilterBeforePivotOrAgg")?null===s||void 0===s||null===(t=s.getPivotResultCols())||void 0===t?void 0:t.list:l)&&void 0!==e?e:[];a&&(d=d.concat(a)),this.colsToUse=o.get("includeHiddenColumnsInQuickFilter")?d:d.filter((e=>e.isVisible()||e.isRowGroupActive()))}isFilterPresent(){return null!==this.quickFilter}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every((i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i)))}resetCache(){this.beans.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}setFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseFilter(e){return ze(e)?e.toUpperCase():null}setFilter(e){if(null!=e&&"string"!==typeof e)return void pt(70,{newFilter:e});const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some((i=>{const n=this.getTextForColumn(i,e);return ze(n)&&n.indexOf(t)>=0}))}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:n,matcher:o}=this;return o(n,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const n=e.getColDef();if(n.getQuickFilterText){const o=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(o)}return ze(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach((i=>{const n=this.getTextForColumn(i,e);ze(n)&&t.push(n)})),t.join("\n")}}],apiFunctions:{isQuickFilterPresent:function(e){var t;return!(null===(t=e.filterManager)||void 0===t||!t.isQuickFilterPresent())},getQuickFilter:function(e){return e.gos.get("quickFilterText")},resetQuickFilter:function(e){var t;null===(t=e.filterManager)||void 0===t||t.resetQuickFilterCache()}},dependsOn:[su,ru]},pu={moduleName:"ExternalFilter",version:it,dependsOn:[su]},gu=class{constructor(e){this.cellValueChanges=e}},mu=class extends gu{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},vu=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},fu=class extends La{constructor(e){super('\n            <div class="ag-cell-edit-wrapper">\n                '.concat(e.getTemplate(),"\n            </div>"),e.getAgComponents()),this.cellEditorInput=e,this.eInput=Tn}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:n}=e,o=this.eInput;let s;this.cellEditorInput.init(o,e);let r=!0;t?(this.focusAfterAttached=!0,i===Do.BACKSPACE||i===Do.DELETE?s="":i&&1===i.length?n?r=!1:s=i:(s=this.cellEditorInput.getStartValue(),i!==Do.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=this.cellEditorInput.getStartValue()),r&&null!=s&&o.setStartValue(s),this.addManagedElementListeners(o.getGui(),{keydown:e=>{const{key:t}=e;t!==Do.PAGE_UP&&t!==Do.PAGE_DOWN||e.preventDefault()}})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Q()||t.getFocusableElement().focus();const i=t.getInputElement();var n,o;this.highlightAllOnFocus?i.select():null===(n=(o=this.cellEditorInput).setCaret)||void 0===n||n.call(o)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},yu=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[va]}init(e,t){this.eInput=e,this.params=t;const{min:i,max:n,step:o}=t;null!=i&&e.setMin(i),null!=n&&e.setMax(n),null!=o&&e.setStep(o)}getValue(){const{eInput:e,params:t}=this,i=e.getDate();return ze(i)||ze(t.value)?null!==i&&void 0!==i?i:null:t.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return ca(e,!1)}},bu=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[va]}init(e,t){this.eInput=e,this.params=t;const{min:i,max:n,step:o}=t;null!=i&&e.setMin(i),null!=n&&e.setMax(n),null!=o&&e.setStep(o)}getValue(){const{params:e,eInput:t}=this,i=this.formatDate(t.getDate());return ze(i)||ze(e.value)?e.parseValue(null!==i&&void 0!==i?i:""):e.value}getStartValue(){var e,t;return ca(null!==(e=this.parseDate(null!==(t=this.params.value)&&void 0!==t?t:void 0))&&void 0!==e?e:null,!1)}parseDate(e){var t;const i=this.getDataTypeService();return i?i.getDateParserFunction(this.params.column)(e):null!==(t=pa(e))&&void 0!==t?t:void 0}formatDate(e){var t;const i=this.getDataTypeService();return i?i.getDateFormatterFunction(this.params.column)(e):null!==(t=ca(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0}},Cu=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[la]}init(e,t){this.eInput=e,this.params=t;const{max:i,min:n,precision:o,step:s}=t;null!=i&&e.setMax(i),null!=n&&e.setMin(n),null!=o&&e.setPrecision(o),null!=s&&e.setStep(s);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==Do.UP&&e.key!==Do.DOWN||e.preventDefault()}getValue(){const{eInput:e,params:t}=this,i=e.getValue();if(!ze(i)&&!ze(t.value))return t.value;let n=t.parseValue(i);if(null==n)return n;if("string"===typeof n){if(""===n)return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){Q()&&this.eInput.getInputElement().focus({preventScroll:!0})}},xu=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[sa]}init(e,t){this.eInput=e,this.params=t;const i=t.maxLength;null!=i&&e.setMaxLength(i)}getValue(){const{eInput:e,params:t}=this,i=e.getValue();return ze(i)||ze(t.value)?t.parseValue(i):t.value}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){const e=this.eInput,t=e.getValue(),i=ze(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}},wu=class extends fu{constructor(){super(new xu)}};function Su(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i)),"ensureVisible")}function Mu(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i)),"ensureVisible")}var Du=class extends La{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){At(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{Us(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}};function ku(e,t,i){e.editCompDetails=i,e.editing!==t&&(e.editing=t)}var Iu={moduleName:"EditCore",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="editSvc"}startEditing(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e.isCellEditable()||e.editing)return!0;if(!e.comp)return e.onCompAttachedFuncs.push((()=>{this.startEditing(e,i,n,o)})),!0;const s=this.createCellEditorParams(e,i,n),r=e.column.getColDef(),a=io(this.beans.userCompFactory,r,s),l=null!=(null===a||void 0===a?void 0:a.popupFromSelector)?a.popupFromSelector:!!r.cellEditorPopup,d=null!=(null===a||void 0===a?void 0:a.popupPositionFromSelector)?a.popupPositionFromSelector:r.cellEditorPopupPosition;return ku(e,!0,a),e.comp.setEditDetails(a,l,d,this.gos.get("reactiveCustomComponents")),this.eventSvc.dispatchEvent(e.createEvent(o,"cellEditingStarted")),!(null!==a&&void 0!==a&&null!==(t=a.params)&&void 0!==t&&t.suppressPreventDefault)}stopEditing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.onEditorAttachedFuncs=[],!e.editing)return!1;const{comp:i,column:n,rowNode:o}=e,{newValue:s,newValueExists:r}=function(e,t){const i={newValueExists:!1};if(e)return i;const n=t.getCellEditor();if(!n)return i;if(n.isCancelAfterEnd&&n.isCancelAfterEnd())return i;const o=n.getValue();return{newValue:o,newValueExists:!0}}(t,i),a=this.beans.valueSvc.getValueForDisplay(n,o);let d=!1;return r&&(d=function(e,t,i,n,o){if(i===t)return!1;e.suppressRefreshCell=!0;const s=n.setDataValue(o,i,"edit");return e.suppressRefreshCell=!1,s}(e,a,s,o,n)),ku(e,!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventSvc.dispatchEvent(l(l({},e.createEvent(null,"cellEditingStopped")),{},{oldValue:a,newValue:s,valueChanged:d})),d}handleColDefChanged(e){var t;const i=null===(t=e.comp)||void 0===t?void 0:t.getCellEditor();if(null!==i&&void 0!==i&&i.refresh){const{eventKey:t,cellStartedEdit:n}=e.editCompDetails.params,o=this.createCellEditorParams(e,t,n),s=e.column.getColDef(),r=io(this.beans.userCompFactory,s,o);i.refresh(r.params)}}setFocusOutOnEditor(e){if(!e.editing)return;const t=e.comp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){if(!e.editing)return;const t=e.comp,i=t.getCellEditor();null!==i&&void 0!==i&&i.focusIn?i.focusIn():(e.focusCell(!0),e.onEditorAttachedFuncs.push((()=>{var e,i;return null===(e=t.getCellEditor())||void 0===e||null===(i=e.focusIn)||void 0===i?void 0:i.call(e)})))}stopEditingAndFocus(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.stopRowOrCellEdit(e),e.focusCell(!0),t||this.navigateAfterEdit(i,e.cellPosition)}createPopupEditorWrapper(e){return new Du(e)}stopAllEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.beans.rowRenderer.getAllRowCtrls().forEach((t=>this.stopRowEditing(t,e)))}stopRowEditing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.stoppingRowEdit)return;const i=e.getAllCellCtrls(),n=e.editing;e.stoppingRowEdit=!0;let o=!1;for(const r of i){const e=r.stopEditing(t);n&&!t&&!o&&e&&(o=!0)}var s;(o&&this.eventSvc.dispatchEvent(e.createRowEvent("rowValueChanged")),n)&&(null===(s=this.beans.rowEditSvc)||void 0===s||s.setEditing(e,!1));e.stoppingRowEdit=!1}addStopEditingWhenGridLosesFocus(e){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const t=t=>{const i=t.relatedTarget;if(null===ie(i))return void this.stopAllEditing();let n=e.some((e=>e.contains(i)))&&$o(this.gos,i);if(!n){const e=this.beans.popupSvc;n=!!e&&(e.getActivePopups().some((e=>e.contains(i)))||e.isElementWithinCustomPopup(i))}n||this.stopAllEditing()};e.forEach((e=>this.addManagedElementListeners(e,{focusout:t})))}setInlineEditingCss(e){const t=e.editing||e.getAllCellCtrls().some((e=>e.editing));e.forEachGui(void 0,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),e.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)}))}isCellEditable(e,t){if(t.group)if(this.gos.get("treeData")){if(!t.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return e.isColumnFunc(t,e.colDef.editable)}startRowOrCellEdit(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.comp?"fullRow"===this.gos.get("editType")?null===(n=null===(o=this.beans.rowEditSvc)||void 0===o?void 0:o.startEditing(e.rowCtrl,t,e))||void 0===n||n:this.startEditing(e,t,!0,i):(e.onCompAttachedFuncs.push((()=>{this.startRowOrCellEdit(e,t,i)})),!0);var n,o}stopRowOrCellEdit(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"fullRow"===this.gos.get("editType")?this.stopRowEditing(e.rowCtrl,t):this.stopEditing(e,t)}createCellEditorParams(e,t,i){const{column:n,rowNode:o,eGui:s,cellPosition:{rowIndex:r}}=e,{valueSvc:a,gos:l}=this.beans;return l.addGridCommonParams({value:a.getValueForDisplay(n,o),eventKey:t,column:n,colDef:n.getColDef(),rowIndex:r,node:o,data:o.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:s,parseValue:t=>a.parseValue(n,o,t,e.value),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){var i;const n=e?Do.UP:Do.DOWN;null===(i=this.beans.navigation)||void 0===i||i.navigateToNextCell(null,n,t,!1)}}},class extends Si{constructor(){super(...arguments),this.beanName="rowEditSvc"}startEditing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.editing)return!0;let o=!0,s=!1;const{editSvc:r}=this.beans;return e.getAllCellCtrls().forEach((e=>{const a=e===i;var l;a?o=null===(l=null===r||void 0===r?void 0:r.startEditing(e,t,a,n))||void 0===l||l:null===r||void 0===r||r.startEditing(e,null,a,n);s||(s=e.editing)})),s&&this.setEditing(e,!0),o}setEditing(e,t){e.editing=t,e.forEachGui(void 0,(e=>e.rowComp.addOrRemoveCssClass("ag-row-editing",t)));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventSvc.dispatchEvent(i)}}],apiFunctions:{getCellEditorInstances:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[];return e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach((e=>{var t;const n=null===(t=e.comp)||void 0===t?void 0:t.getCellEditor();n&&i.push(so(n))})),i},getEditingCells:function(e){const t=[];return e.rowRenderer.getAllCellCtrls().forEach((e=>{if(e.editing){const{cellPosition:i}=e;t.push(i)}})),t},stopEditing:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=e.editSvc)||void 0===t||t.stopAllEditing(i)},startEditingCell:function(e,t){const i=e.colModel.getCol(t.colKey);if(!i)return void pt(12,{colKey:t.colKey});const n={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};null==t.rowPinned&&Mu(e,t.rowIndex),Su(e,t.colKey);const o=ds(e,n);if(!o)return;const{focusSvc:s,gos:r,editSvc:a}=e,d=r.get("stopEditingWhenCellsLoseFocus")&&(()=>{const t=Lt(e),i=o.eGui;return t!==i&&!(null===i||void 0===i||!i.contains(t))})();!d&&s.isCellFocused(n)||s.setFocusedCell(l(l({},n),{},{forceBrowserFocus:d,preventScrollOnBrowserFocus:!0})),null===a||void 0===a||a.startRowOrCellEdit(o,t.key)}},dependsOn:[Lh],css:[".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;width:100%}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}"]},Au={moduleName:"UndoRedoEdit",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&ss(this.activeCellEdit,t),n=null!==this.activeRowEdit&&as(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:s,column:r,oldValue:a,value:l}=e,d={rowPinned:o,rowIndex:s,columnId:r.getColId(),newValue:l,oldValue:a};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new vu(i),this.redoStack=new vu(i),this.addListeners();const n=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:n,newColumnsLoaded:n,columnGroupOpened:n,columnRowGroupChanged:n,columnMoved:n,columnPinned:n,columnVisible:n,rowDragEnd:n}),t.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){var e,t;return null!==(e=null===(t=this.undoStack)||void 0===t?void 0:t.getCurrentStackSize())&&void 0!==e?e:0}getCurrentRedoStackSize(){var e,t;return null!==(e=null===(t=this.redoStack)||void 0===t?void 0:t.getCurrentStackSize())&&void 0!==e?e:0}undo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"undoStarted",source:e});const o=this.undoRedo(i,n,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:o})}redo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"redoStarted",source:e});const o=this.undoRedo(n,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:o})}undoRedo(e,t,i,n,o){if(!e)return!1;const s=e.pop();return!(!s||!s.cellValueChanges)&&(this.processAction(s,(e=>e[n]),o),s instanceof mu?this.processRange(s.ranges||[s[i]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,i){e.cellValueChanges.forEach((e=>{const{rowIndex:n,rowPinned:o,columnId:s}=e,r={rowIndex:n,rowPinned:o},a=ls(this.beans,r);a.displayed&&a.setDataValue(s,t(e),i)}))}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach(((n,o)=>{if(!n)return;const s=n.startRow,r=n.endRow;o===e.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:n.startColumn,columns:n.columns};i.addCellRange(a)}))}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,o={rowIndex:i,rowPinned:n},s=ls(this.beans,o),r={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:n}=e,{colModel:o,focusSvc:s,rangeSvc:r}=this.beans,a=o.getCol(i);if(!a)return;const{scrollFeature:d}=this.gridBodyCtrl;d.ensureIndexVisible(t),d.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:n};s.setFocusedCell(l(l({},c),{},{forceBrowserFocus:!0})),null===r||void 0===r||r.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new gu(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new gu(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new gu(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new mu(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;e=t&&$t(i)?new mu(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):new gu(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],apiFunctions:{undoCellEditing:function(e){var t;null===(t=e.undoRedo)||void 0===t||t.undo("api")},redoCellEditing:function(e){var t;null===(t=e.undoRedo)||void 0===t||t.redo("api")},getCurrentUndoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedo)||void 0===i?void 0:i.getCurrentUndoStackSize())&&void 0!==t?t:0},getCurrentRedoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedo)||void 0===i?void 0:i.getCurrentRedoStackSize())&&void 0!==t?t:0}},dependsOn:[Iu]},Tu={moduleName:"TextEditor",version:it,userComponents:{agCellEditor:wu,agTextCellEditor:wu},dependsOn:[Iu]},Eu={moduleName:"NumberEditor",version:it,userComponents:{agNumberCellEditor:{classImp:class extends fu{constructor(){super(new Cu)}},params:{suppressPreventDefault:!0}}},dependsOn:[Iu]},Ru={moduleName:"DateEditor",version:it,userComponents:{agDateCellEditor:class extends fu{constructor(){super(new yu)}},agDateStringCellEditor:class extends fu{constructor(){super(new bu((()=>this.beans.dataTypeSvc)))}}},dependsOn:[Iu]},Lu={moduleName:"CheckboxEditor",version:it,userComponents:{agCheckboxCellEditor:class extends La{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[Zr]),this.eCheckbox=Tn}init(e){var t;this.params=e;const i=null!==(t=e.value)&&void 0!==t?t:void 0,n=this.eCheckbox;n.setValue(i);n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListeners(n,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=q(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel("".concat(n," (").concat(i,")"))}}},dependsOn:[Iu]},Pu={moduleName:"SelectEditor",version:it,userComponents:{agSelectCellEditor:class extends La{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[Da]),this.eSelect=Tn,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueSvc:i,gos:n}=this,{values:o,value:s,eventKey:r}=e;if(_e(o))return void pt(58);this.startedByEnter=null!=r&&r===Do.ENTER;let a=!1;o.forEach((n=>{const o={value:n},r=i.formatValue(e.column,null,n),l=null!==r&&void 0!==r;o.text=l?r:n,t.addOption(o),a=a||s===n})),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:d,valueListMaxHeight:c}=e;null!=l&&t.setPickerGap(l),null!=c&&t.setPickerMaxHeight(c),null!=d&&t.setPickerMaxWidth(d),"fullRow"!==n.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eSelect.showPicker()}))}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}},dependsOn:[Iu]},Nu={moduleName:"LargeTextEditor",version:it,userComponents:{agLargeTextCellEditor:class extends La{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[ra]),this.eTextArea=Tn}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),null!=e.value&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===Do.LEFT||t===Do.UP||t===Do.RIGHT||t===Do.DOWN||e.shiftKey&&t===Do.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue(),t=this.params;return ze(e)||ze(t.value)?t.parseValue(e):t.value}}},dependsOn:[Iu]},Fu={moduleName:"CustomEditor",version:it,dependsOn:[Iu]};var Ou={moduleName:"SharedRowSelection",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",(e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,pn(e.source))}))}addSelectionCols(e){const t=this.selectionCols;null!=t&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),un(e))}createSelectionCols(e,t){var i,n,o,s,r,a;const l=e.treeDepth,d=(null!==(i=null===(n=this.selectionCols)||void 0===n?void 0:n.treeDepth)&&void 0!==i?i:-1)==l,c=this.generateSelectionCols();if(hn(c,null!==(o=null===(s=this.selectionCols)||void 0===s?void 0:s.list)&&void 0!==o?o:[])&&d)return;(()=>{var e;an(this.beans,null===(e=this.selectionCols)||void 0===e?void 0:e.tree),this.selectionCols=null})();const{colGroupSvc:h}=this.beans,u=null!==(r=null===h||void 0===h?void 0:h.findDepth(e.tree))&&void 0!==r?r:0,p=null!==(a=null===h||void 0===h?void 0:h.balanceTreeForAutoCols(c,u))&&void 0!==a?a:[];this.selectionCols={list:c,tree:p,treeDepth:u,map:{}};t((e=>{if(!e)return null;const t=e.filter((e=>!dn(e)));return[...c,...t]}))}isSelectionColumnEnabled(){var e,t;const{gos:i,beans:n}=this,o=i.get("rowSelection");if("object"!==typeof o||!wt(i))return!1;const s=(null!==(e=null===(t=n.autoColSvc)||void 0===t||null===(t=t.getAutoCols())||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0;if("autoGroupColumn"===o.checkboxLocation&&s)return!1;const r=!!Yt(o),a=Zt(o);return r||a}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const{gos:e,validation:t}=this.beans,i=e.get("selectionColumnDef"),n=l(l({width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(e,t,i,n){const o=i.isSelected();return o===n.isSelected()?0:o?1:-1},editable:!1,suppressFillHandle:!0},i),{},{colId:en}),o=n.colId;null===t||void 0===t||t.validateColDef(n,o,!0);const s=new Li(n,null,o,!1);return this.createBean(s),[s]}putSelectionColsFirstInList(e,t){if(!t)return null;return[...e,...t.filter((e=>!dn(e)))]}getSelectionCol(e){var t,i;return null!==(t=null===(i=this.selectionCols)||void 0===i?void 0:i.list.find((t=>gn(t,e))))&&void 0!==t?t:null}getSelectionCols(){var e,t;return null!==(e=null===(t=this.selectionCols)||void 0===t?void 0:t.list)&&void 0!==e?e:null}onSelectionOptionsChanged(e,t,i){const n=(t&&"string"!==typeof t?Yt(t):void 0)!==(e&&"string"!==typeof e?Yt(e):void 0),o=(t&&"string"!==typeof t?Zt(t):void 0)!==(e&&"string"!==typeof e?Zt(e):void 0),s=Xt(e),r=Xt(t);(n||o||s!==r)&&this.beans.colModel.refreshAll(i)}destroy(){var e;an(this.beans,null===(e=this.selectionCols)||void 0===e?void 0:e.tree),super.destroy()}refreshVisibility(e){var t;if(!this.isSelectionColumnEnabled())return;const i=this.beans,n=null!==(t=i.visibleCols.getAllTrees())&&void 0!==t?t:[];if(0!==n.length){if(!n.some(tn)){const t=Qi(i).find((e=>dn(e.colId)));t&&Zi(i,{state:[{colId:t.colId,hide:!t.hide}]},e)}if(1===n.length){const t=nn(n[0]);if(!t)return;Zi(i,{state:[{colId:t.getColId(),hide:!0}]},e)}}}}],apiFunctions:{setNodesSelected:function(e,t){var i;if(!t.nodes.every((e=>e.rowPinned?(pt(59),!1):void 0!==e.id||(pt(60),!1))))return;const{nodes:n,source:o,newValue:s}=t,r=n;null===(i=e.selectionSvc)||void 0===i||i.setNodesSelected({nodes:r,source:null!==o&&void 0!==o?o:"api",newValue:s})},selectAll:function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apiSelectAll";null===(i=e.selectionSvc)||void 0===i||i.selectAllRowNodes({source:n,selectAll:t})},deselectAll:function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apiSelectAll";null===(i=e.selectionSvc)||void 0===i||i.deselectAllRowNodes({source:n,selectAll:t})},selectAllFiltered:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";null===(t=e.selectionSvc)||void 0===t||t.selectAllRowNodes({source:i,selectAll:"filtered"})},deselectAllFiltered:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";null===(t=e.selectionSvc)||void 0===t||t.deselectAllRowNodes({source:i,selectAll:"filtered"})},selectAllOnCurrentPage:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";null===(t=e.selectionSvc)||void 0===t||t.selectAllRowNodes({source:i,selectAll:"currentPage"})},deselectAllOnCurrentPage:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";null===(t=e.selectionSvc)||void 0===t||t.deselectAllRowNodes({source:i,selectAll:"currentPage"})},getSelectedNodes:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectedNodes())&&void 0!==t?t:[]},getSelectedRows:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectedRows())&&void 0!==t?t:[]}}},Bu={moduleName:"RowSelection",version:it,rowModels:["clientSide","infinite","viewport"],beans:[class extends ea{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=oi(e),this.groupSelectsDescendants=li(e),this.groupSelectsFiltered="filteredDescendants"===ri(e),this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],(()=>{const t=li(e),i=oi(e),n="filteredDescendants"===ri(e);t===this.groupSelectsDescendants&&n===this.groupSelectsFiltered&&i===this.mode||(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=n,this.mode=i)})),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);return null==n?0:"select"in n?(n.reset?this.resetNodes():this.selectRange(n.deselect,!1,i),this.selectRange(n.select,!0,i)):this.setNodesSelected({nodes:[n.node],newValue:n.newValue,clearSelection:n.clearSelection,event:e,source:i})}setNodesSelected(e){let{newValue:t,clearSelection:i,suppressFinishActions:n,nodes:o,event:s,source:r}=e;if(!wt(this.gos)&&t)return pt(132),0;if(0===o.length)return 0;if(o.length>1&&!this.isMultiSelect())return pt(130),0;let a=0;for(let d=0;d<o.length;d++){var l;const e=o[d],i=e.footer?e.sibling:e,n=this.groupSelectsFiltered&&i.group;if(i.rowPinned)pt(59);else if(void 0!==i.id){if(!n){this.selectRowNode(i,t,s,r)&&a++}this.groupSelectsDescendants&&null!==(l=i.childrenAfterGroup)&&void 0!==l&&l.length&&(a+=this.selectChildren(i,t,r))}else pt(60)}if(!n){t&&(i||!this.isMultiSelect())&&(a+=this.clearOtherNodes(o[0],r)),a>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r))}return a}selectRange(e,t,i){let n=0;return e.forEach((e=>{if(e.group&&this.groupSelectsDescendants)return;this.selectRowNode(e,t,void 0,i)&&n++})),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i){const n=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return n?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:n}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>e.push(t.data))),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((i,n)=>{e(i)&&t.set(n,i)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:n}=this.beans;if(!bt(i))return!1;const o=n.rootNode;if(!o)return!1;t||((t=new Lc(!0,o)).active=!1);let s=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==o){const i=this.calculateSelectedFromChildren(t);s=this.selectRowNode(t,null!==i&&i,void 0,e)||s}})),s}clearOtherNodes(e,t){const i=new Map;let n=0;return this.selectedNodes.forEach((o=>{if(o&&o.id!==e.id){const e=this.selectedNodes.get(o.id);n+=this.setNodesSelected({nodes:[e],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}})),i.forEach((e=>{const i=this.calculateSelectedFromChildren(e);this.selectRowNode(e,null!==i&&i,void 0,t)})),n}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new fs(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){if(t&&e.id!==t.id){this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach((e=>{this.selectRowNode(e,!1)})),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!bt(e))return;const i=t.getTopLevelNodes();if(null===i)return;const n=[];return function e(t){for(let i=0,o=t.length;i<o;i++){const o=t[i];o.isSelected()?n.push(o):o.group&&o.childrenAfterGroup&&e(o.childrenAfterGroup)}}(i),n}isEmpty(){return 0===this.getSelectionCount()}deselectAllRowNodes(e){const t=e=>this.selectRowNode(e.footer?e.sibling:e,!1,void 0,n),i=bt(this.gos),{source:n,selectAll:o}=e;if("currentPage"===o||"filtered"===o){if(!i)return void gt(102);this.getNodesToSelect(o).forEach(t)}else this.selectedNodes.forEach(t),this.reset(n);i&&this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach((e=>{this.groupSelectsDescendants&&e.group||(e.isSelected()?t++:e.selectable&&i++)})),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:i}=this.getSelectedCounts(e);return(0!==t||0!==i)&&(t>0&&i>0?null:t>0)}hasNodesToSelect(e){return this.getNodesToSelect(e).filter((e=>e.selectable)).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[];if("currentPage"===e)return this.forEachNodeOnPage((e=>{if(e.group)if(e.expanded||e.footer)this.groupSelectsDescendants||t.push(e);else{const i=e=>{var n;t.push(e),null!==(n=e.childrenAfterFilter)&&void 0!==n&&n.length&&e.childrenAfterFilter.forEach(i)};i(e)}else t.push(e)})),t;const i=this.beans.rowModel;return"filtered"===e?(i.forEachNodeAfterFilter((e=>{t.push(e)})),t):(i.forEachNode((e=>{t.push(e)})),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,n=t.getFirstRow(),o=t.getLastRow();for(let s=n;s<=o;s++){const t=i.getRow(s);t&&e(t)}}selectAllRowNodes(e){const{gos:t}=this;if(!wt(t))return void pt(132);if(Qt(t)&&!si(t))return void pt(130);if(!this.canSelectAll())return;const{source:i,selectAll:n}=e;this.getNodesToSelect(n).forEach((e=>{this.selectRowNode(e.footer?e.sibling:e,!0,void 0,i)})),bt(t)&&this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectionState(){const e=[];return this.selectedNodes.forEach((t=>{null!==t&&void 0!==t&&t.id&&e.push(t.id)})),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return void gt(103);const i=new Set(e),n=[];this.beans.rowModel.forEachNode((e=>{i.has(e.id)&&n.push(e)})),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){const{gos:e,rowModel:t}=this.beans;return!!bt(e)||(gt(100,{rowModelType:t.getType()}),!1)}updateSelectable(e){const{gos:t,rowModel:i}=this.beans;if(!wt(t))return;const n="selectableChanged",o=void 0!==e,s=bt(t)&&this.groupSelectsDescendants,r=[],a=e=>{if(o&&!e.group)return;if(s&&e.group){var t,i;const n=null!==(t=null===(i=e.childrenAfterGroup)||void 0===i?void 0:i.some((e=>e.selectable)))&&void 0!==t&&t;return void this.setRowSelectable(e,n,!0)}!this.updateRowSelectable(e,!0)&&e.isSelected()&&r.push(e)};if(s){var l;if(void 0===e){const t=i.rootNode;e=t?new Lc(!1,t):void 0}null===(l=e)||void 0===l||l.forEachChangedNodeDepthFirst(a,!o,!o)}else i.forEachNode(a);var d;(r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:n}),!o&&s)&&(null===(d=this.updateGroupsFromChildrenSelections)||void 0===d||d.call(this,n))}updateSelectableAfterGrouping(e){if(this.updateSelectable(e),this.groupSelectsDescendants){var t;(null===(t=this.updateGroupsFromChildrenSelections)||void 0===t?void 0:t.call(this,"rowGroupChanged",e))&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"})}}}],dependsOn:[Ou]};var Gu={moduleName:"CsrmSsrmSharedApi",version:it,apiFunctions:{expandAll:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.expandAll(!0)},collapseAll:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.expandAll(!1)},onRowHeightChanged:function(e){const t=Wc(e),i=Uc(e);t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}}},zu={moduleName:"SsrmInfiniteSharedApi",version:it,apiFunctions:{setRowCount:function(e,t,i){const n=Uc(e);var o;if(n)return 0===(null===(o=e.rowGroupColsSvc)||void 0===o?void 0:o.columns.length)?t<0?void gt(238):void n.setRowCount(t,i):void gt(28);const s=jc(e);s&&s.setRowCount(t,i)},getCacheBlockState:function(e){var t,i;if(Ct(e.gos)){return e.rowModel.getBlockStates()}return null!==(t=null===(i=e.rowNodeBlockLoader)||void 0===i?void 0:i.getBlockState())&&void 0!==t?t:{}},isLastRowIndexKnown:function(e){return e.rowModel.isLastRowIndexKnown()}}},_u={moduleName:"AlignedGrids",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){var e;let t=null!==(e=this.gos.get("alignedGrids"))&&void 0!==e?e:[];const i="function"===typeof t;"function"===typeof t&&(t=t());return t.map((e=>{if(!e)return gt(18),void(i||gt(20));if(this.isGridApi(e))return e;const t=e;var n;return"current"in t?null===(n=t.current)||void 0===n?void 0:n.api:(t.api||gt(19),t.api)})).filter((e=>!!e&&!e.isDestroyed()))}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:e=>{let{event:t}=e;return this.onColumnEvent(t)},alignedGridScroll:e=>{let{event:t}=e;return this.onScrollEvent(t)}})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{t.isDestroyed()||t.dispatchEvent(e)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent((()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach((e=>{i.push(t(e))})):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,(e=>e))}getColumnIds(e){return this.extractDataFromEvent(e,(e=>e.getColId()))}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":pt(21)}}))}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach((e=>{let i=null;e&&(i=t.getProvidedColGroup(e.getGroupId())),e&&!i||t.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged")}))}processColumnEvent(e){const t=e.column;let i=null;const n=this.beans,{colResize:o,ctrlsSvc:s,colModel:r}=n;if(t&&(i=r.getColDefCol(t.getColId())),t&&!i)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":Zi(n,{state:e.api.getColumnState().map((e=>({colId:e.colId}))),applyOrder:!0},"alignedGridChanged");break;case"columnVisible":Zi(n,{state:e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})))},"alignedGridChanged");break;case"columnPinned":Zi(n,{state:e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})))},"alignedGridChanged");break;case"columnResized":{var l;const t=e,i={};a.forEach((e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),null===(l=t.flexColumns)||void 0===l||l.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),null===o||void 0===o||o.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const d=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",d)}))}}]},Vu=class{constructor(){this.removals=new Set,this.updates=new Map}remove(e){this.removals.add(e),this.updates.delete(e)}update(e){this.updates.has(e)||(this.removals.delete(e),this.updates.set(e,!1))}add(e){this.removals.delete(e),this.updates.set(e,!0)}};function Hu(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),function(e){if(_e(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const n=t[i],o=0===i,s=i===e.childrenAfterSort.length-1;n.setFirstChild(o),n.lastChild!==s&&(n.lastChild=s,n.dispatchRowEvent("lastChildChanged")),n.childIndex!==i&&(n.childIndex=i,n.dispatchRowEvent("childIndexChanged"))}}(e)}var Wu={moduleName:"ClientSideRowModel",version:it,rowModels:["clientSide"],beans:[class extends Xr{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},class extends Si{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=$e(this,this.onRowHeightChanged.bind(this),100),this.rootNode=null,this.rowsToDisplay=[],this.started=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter((e=>!!e));const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new fs(this.beans),this.initRowManager()}initRowManager(){const{gos:e,beans:t,nodeManager:i}=this,n=e.get("treeData"),o=e.get("treeDataChildrenField");let s;(o||n)&&(s=o?t.csrmChildrenTreeNodeSvc:t.csrmPathTreeNodeSvc),s||(s=t.csrmNodeSvc),i!==s&&(null===i||void 0===i||i.deactivate(),this.nodeManager=s),s.activate(this.rootNode)}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap((e=>{let{refreshProps:t}=e;return[...t]}))];this.addManagedPropertyListeners(e,(e=>{var t;const i=null===(t=e.changeSet)||void 0===t?void 0:t.properties;i&&this.onPropChange(i)})),this.addManagedPropertyListener("rowData",(()=>this.onPropChange(["rowData"]))),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.started=!0,this.shouldSkipSettingDataOnStart?this.refreshModel({step:"group",newData:!0,rowDataUpdated:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&(this.shouldSkipSettingDataOnStart=!0,this.onPropChange(["rowData"]))}ensureRowHeightsValid(e,t,i,n){let o,s=!1;do{o=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),d=Math.min(a,n);for(let e=l;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=Mt(this.beans,t);t.setRowHeight(e.height),o=!0,s=!0}}o&&this.setRowTopAndRowIndex()}while(o);return s}onPropChange(e){if(!this.rootNode)return;const t=this.gos,i=new Set(e),n={step:"nothing",changedProps:i},o=i.has("rowData"),s=i.has("treeData"),r=i.has("treeDataChildrenField")||s&&!t.get("treeDataChildrenField");let a;if(s&&(n.step="group"),(r||o)&&(a=t.get("rowData"),null==a||Array.isArray(a)||(a=null,pt(1))),r){var l,d;if(!o)a=null!==(l=null===(d=this.nodeManager)||void 0===d?void 0:d.extractRowData())&&void 0!==l?l:a;this.initRowManager()}if(a){var c;if(!r&&this.started&&!this.isEmpty()&&a.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate"))n.keepRenderedRows=!0,n.animate=!this.gos.get("suppressAnimationFrame"),n.changedRowNodes=new Vu,this.nodeManager.setImmutableRowData(n,a);else n.step="group",n.rowDataUpdated=!0,n.newData=!0,null===(c=this.beans.selectionSvc)||void 0===c||c.reset("rowDataChanged"),this.rowNodesCountReady=!0,this.nodeManager.setNewRowData(a)}if("nothing"===n.step)for(const{refreshProps:h,step:u}of this.orderedStages)if(e.some((e=>h.has(e)))){n.step=u;break}"nothing"!==n.step&&this.refreshModel(n)}setRowTopAndRowIndex(){const{beans:e}=this,t=e.environment.getDefaultRowHeight();let i=0;const n=new Set,o=xt(this.gos,"normal"),s=this.rowsToDisplay;for(let r=0,a=s.length;r<a;++r){const a=s[r];if(null!=a.id&&n.add(a.id),null==a.rowHeight){const i=Mt(e,a,o,t);a.setRowHeight(i.height,i.estimated)}a.setRowTop(i),a.setRowIndex(r),i+=a.rowHeight}return n}clearRowTopAndRowIndex(e,t){const i=e.active,n=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},o=e=>{if(null!==e&&(n(e),n(e.detailNode),n(e.sibling),e.hasChildren()&&e.childrenAfterGroup)){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(o)}};o(this.rootNode)}ensureRowsAtPixel(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=this.getRowIndexAtPixel(t),s=this.getRow(o),r=!this.gos.get("suppressAnimationFrame");if(s===e[0])return!1;const a=null===(i=this.rootNode)||void 0===i?void 0:i.allLeafChildren;return!!a&&(e.forEach((e=>{_i(a,e)})),e.forEach(((e,t)=>{a.splice(Math.max(o+n,0)+t,0,e)})),e.forEach(((e,t)=>{e.sourceRowIndex=t})),this.refreshModel({step:"group",keepRenderedRows:!0,animate:r,rowNodesOrderChanged:!0}),!0)}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,n=null!=i?this.getRow(i):null;if(!n||!e||null==t)return void this.clearHighlightedRow();const o=this.getHighlightPosition(t,n),s=this.isHighlightingCurrentPosition(e,n,o),r=null!=this.lastHighlightedRow&&this.lastHighlightedRow!==n;(s||r)&&(this.clearHighlightedRow(),s)||(this.setRowNodeHighlighted(n,o),this.lastHighlightedRow=n)}setRowNodeHighlighted(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchRowEvent("rowHighlightChanged"))}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(!(t=this.getRow(i||0)))return"Below"}const{rowTop:i,rowHeight:n}=t;return e-i<n/2?"Above":"Below"}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const n="Above"===i?-1:1;return this.getRow(t.rowIndex+n)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.setRowNodeHighlighted(this.lastHighlightedRow,null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e)return 0;if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const t=e.childrenAfterAggFilter,i=e.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;const{childrenAfterSort:n}=t,o=e=>{let t=n[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},{footerSvc:s}=this.beans;return s?s.getTopDisplayIndex(i,e,n,o):o(e)}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=Ot(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=Ot(this.gos),i=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=Ot(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=!(null!==e&&void 0!==e&&e.length),i=new Lc(!1,this.rootNode);return t&&(i.active=!1),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const t=e.rowNodeTransactions;if(!t)return!1;return!t.some((e=>null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0))}refreshModel(e){var t,i,n;if(!this.rootNode)return;const o=e.rowNodeTransactions,s=null!==(t=e.changedPath)&&void 0!==t?t:e.changedPath=this.createChangePath(o);if(null===(i=(n=this.nodeManager).refreshModel)||void 0===i||i.call(n,e),this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params:e}),!this.started)return;if(e.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.rowNodeTransactions,e.changedRowNodes,s,!!e.rowNodesOrderChanged,!!e.afterColumnsChanged);case"filter":this.doFilter(s);case"pivot":this.doPivot(s);case"aggregate":this.doAggregate(s);case"filter_aggregates":this.doFilterAggregates(s);case"sort":this.doSort(e.changedRowNodes,s);case"map":this.doRowsToDisplay()}const r=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(s,r),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t;return!(null!==(e=this.rootNode)&&void 0!==e&&null!==(e=e.allLeafChildren)&&void 0!==e&&e.length)||!(null!==(t=this.colModel)&&void 0!==t&&t.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const o=[],s=li(this.gos);return this.forEachNodeAfterFilterAndSort((r=>{if(n)return;if(i&&(r===t||r===e)&&(n=!0,r.group&&s))return void o.push(...r.allLeafChildren);if(!i){if(r!==t&&r!==e)return;i=!0}(!r.group||!s)&&o.push(r)})),o}getTopLevelNodes(){var e,t;return null!==(e=null===(t=this.rootNode)||void 0===t?void 0:t.childrenAfterGroup)&&void 0!==e?e:null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||0===t.length)return-1;let i=0,n=t.length-1;if(e<=0)return 0;if(Gi(t).rowTop<=e)return t.length-1;let o=-1,s=-1;for(;;){const r=Math.floor((i+n)/2),a=t[r];if(this.isRowInPixel(a,e))return r;a.rowTop<e?i=r+1:a.rowTop>e&&(n=r-1);if(o===i&&s===n)return r;o=i,s=n}}isRowInPixel(e,t){const i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){var t;null===(t=this.rootNode)||void 0===t||null===(t=t.allLeafChildren)||void 0===t||t.forEach(((t,i)=>e(t,i)))}forEachNode(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...(null===(t=this.rootNode)||void 0===t?void 0:t.childrenAfterGroup)||[]],callback:e,recursionType:0,index:0,includeFooterNodes:i})}forEachNodeAfterFilter(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...(null===(t=this.rootNode)||void 0===t?void 0:t.childrenAfterAggFilter)||[]],callback:e,recursionType:1,index:0,includeFooterNodes:i})}forEachNodeAfterFilterAndSort(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...(null===(t=this.rootNode)||void 0===t?void 0:t.childrenAfterSort)||[]],callback:e,recursionType:2,index:0,includeFooterNodes:i})}forEachPivotNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.rootNode;i&&this.recursivelyWalkNodesAndCallback({nodes:[i],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:n,includeFooterNodes:o}=e;let{index:s}=e;const{footerSvc:r}=this.beans;null===r||void 0===r||r.addNodes(e,t,i,o,this.rootNode,"top");for(let a=0;a<t.length;a++){const e=t[a];if(i(e,s++),e.hasChildren()&&!e.footer){let t=null;switch(n){case 0:t=e.childrenAfterGroup;break;case 1:t=e.childrenAfterAggFilter;break;case 2:t=e.childrenAfterSort;break;case 3:t=e.leafGroup?null:e.childrenAfterSort}t&&(s=this.recursivelyWalkNodesAndCallback({nodes:[...t],callback:i,recursionType:n,index:s,includeFooterNodes:o}))}}return null===r||void 0===r||r.addNodes(e,t,i,o,this.rootNode,"bottom"),s}doAggregate(e){const t=this.rootNode;var i;t&&(null===(i=this.aggStage)||void 0===i||i.execute({rowNode:t,changedPath:e}))}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const{groupHideOpenParentsSvc:i}=this.beans;this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst((e=>{null===i||void 0===i||i.pullDownGroupDataForHideOpenParents(e.childrenAfterAggFilter,!0),e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),Hu(e)})),null===i||void 0===i||i.updateGroupDataForHideOpenParents(t)}doRowGrouping(e,t,i,n,o){const s=this.nodeManager.treeData,r=this.rootNode;if(!s){const s=this.groupStage;if(s)s.execute({rowNode:r,changedPath:i,changedRowNodes:t,rowNodeTransactions:e,rowNodesOrderChanged:n,afterColumnsChanged:o});else{const e=r.sibling;r.childrenAfterGroup=r.allLeafChildren,e&&(e.childrenAfterGroup=r.childrenAfterGroup),r.updateHasChildren()}}this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst((e=>{e.childrenAfterFilter=e.childrenAfterGroup,Th(e)}),!0)}doPivot(e){var t;null===(t=this.pivotStage)||void 0===t||t.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){if("string"==typeof e&&0==e.indexOf(ms)){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}return this.nodeManager.getRowNode(e)}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.isAlive()&&this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var e,t;null===(e=this.valueCache)||void 0===e||e.onDataChanged();const i=[],n=[],o=new Vu;let s=!1;null===(t=this.rowDataTransactionBatch)||void 0===t||t.forEach((e=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:t,rowsInserted:r}=this.nodeManager.updateRowData(e.rowDataTransaction,o);r&&(s=!0),n.push(t),e.callback&&i.push(e.callback.bind(null,t))})),this.commitTransactions(n,s,o),i.length>0&&window.setTimeout((()=>{i.forEach((e=>e()))}),0),n.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:n}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){var t;null===(t=this.valueCache)||void 0===t||t.onDataChanged(),this.rowNodesCountReady=!0;const i=new Vu,{rowNodeTransaction:n,rowsInserted:o}=this.nodeManager.updateRowData(e,i);return this.commitTransactions([n],o,i),n}commitTransactions(e,t,i){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:i,changedPath:this.createChangePath(e)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let i;if(e)i=e.execute({rowNode:t});else{var n;i=null!==(n=null===t||void 0===t?void 0:t.childrenAfterSort)&&void 0!==n?n:[];for(const e of i)e.setUiLevel(0)}this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(e){if(e.rowHeightChanged){var t;if(null!==(t=this.beans.rowAutoHeight)&&void 0!==t&&t.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.lastHighlightedRow=null,this.orderedStages=Bi,this.rowsToDisplay=Bi}},class extends Si{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,i=t.sortSvc.getSortOptions(),n=ze(i)&&i.length>0,o=n&&!!e.changedRowNodes&&this.gos.get("deltaSort"),s=i.some((e=>{let{column:i}=e;return Gt(t.gos)?i.isPrimary()&&i.isRowGroupActive():!!i.getColDef().showRowGroup}));this.sort(t,i,n,o,e.changedRowNodes,e.changedPath,s)}sort(e,t,i,n,o,s,r){const{gos:a,colModel:l,rowGroupColsSvc:d,groupHideOpenParentsSvc:c,rowNodeSorter:h}=e,u=a.get("groupMaintainOrder"),p=l.getCols().some((e=>e.isRowGroupActive())),g=l.isPivotMode(),m=a.getCallback("postSortRows");null===s||void 0===s||s.forEachChangedNodeDepthFirst((e=>{null===c||void 0===c||c.pullDownGroupDataForHideOpenParents(e.childrenAfterAggFilter,!0);const a=g&&e.leafGroup;let l;if(u&&p&&!e.leafGroup&&!r){var v;const t=null===d||void 0===d||null===(v=d.columns)||void 0===v?void 0:v[e.level+1],i=null===(null===t||void 0===t?void 0:t.getSort()),n=e.childrenAfterAggFilter.slice(0);if(e.childrenAfterSort&&!i){const t={};e.childrenAfterSort.forEach(((e,i)=>{t[e.id]=i})),n.sort(((e,i)=>{var n,o;return(null!==(n=t[e.id])&&void 0!==n?n:0)-(null!==(o=t[i.id])&&void 0!==o?o:0)}))}l=n}else l=!i||a?e.childrenAfterAggFilter.slice(0):n&&o?function(e,t,i,n,o){const s=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(s,o);const a=new Set,l=[],d=i.updates;for(let h=0,u=s.length;h<u;++h){const e=s[h];d.has(e)||n&&!n.canSkip(e)?l.push({currentPos:l.length,rowNode:e}):a.add(e.id)}const c=r.filter((e=>a.has(e.id))).map(((e,t)=>({currentPos:t,rowNode:e})));return l.sort(((t,i)=>e.compareRowNodes(o,t,i))),function(e,t,i,n){const o=[];let s=0,r=0;const a=i.length,l=n.length;for(;s<a&&r<l;){const a=i[s],l=n[r];let d;e.compareRowNodes(t,a,l)<0?(d=a,++s):(d=l,++r),o.push(d.rowNode)}for(;s<a;)o.push(i[s++].rowNode);for(;r<l;)o.push(n[r++].rowNode);return o}(e,o,l,c)}(h,e,o,s,t):h.doFullSort(e.childrenAfterAggFilter,t);if(e.childrenAfterSort=l,Hu(e),m){const t={nodes:e.childrenAfterSort};m(t)}}))}}],dependsOn:[Rc]},ju={moduleName:"ClientSideRowModelApi",version:it,rowModels:["clientSide"],apiFunctions:{onGroupExpandedOrCollapsed:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){const i=Wc(e);i&&(t&&"everything"!==t||(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))},isRowDataEmpty:function(e){var t,i;return null===(t=null===(i=Wc(e))||void 0===i?void 0:i.isEmpty())||void 0===t||t},forEachLeafNode:function(e,t){var i;null===(i=Wc(e))||void 0===i||i.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){var i;null===(i=Wc(e))||void 0===i||i.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){var i;null===(i=Wc(e))||void 0===i||i.forEachNodeAfterFilterAndSort(t)},resetRowHeights:function(e){var t,i;null!==(t=e.rowAutoHeight)&&void 0!==t&&t.active?pt(3):null===(i=Wc(e))||void 0===i||i.resetRowHeights()},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=Wc(e))||void 0===i?void 0:i.updateRowData(t)}))},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>{var n;return null===(n=Wc(e))||void 0===n?void 0:n.batchUpdateRowData(t,i)}))},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming((()=>{var t;return null===(t=Wc(e))||void 0===t?void 0:t.flushAsyncTransactions()}))},getBestCostNodeSelection:function(e){var t;return null===(t=e.selectionSvc)||void 0===t?void 0:t.getBestCostNodeSelection()}},dependsOn:[Gu]},Uu={moduleName:"SharedExport",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:i,columnKeys:n,skipRowGroups:o}=t,s=this.getColumnsToExport(i,o,n);return[this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t)].reduce(((e,t)=>t(e)),e).parse()}processRow(e,t,i,n){var o;const s=t.shouldRowBeSkipped||(()=>!1),r=null!=t.rowPositions||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,d=!!n.footer,c=1===n.allChildrenCount&&1===(null===(o=n.childrenAfterGroup)||void 0===o?void 0:o.length)&&function(e,t){const i=e.get("groupHideParentOfSingleChild");return!0===i||!("leafGroupsOnly"!==i||!t.leafGroup)||!!e.get("groupRemoveSingleChildren")||!(!e.get("groupRemoveLowestSingleChildren")||!t.leafGroup)}(this.gos,n);if(!l&&!d&&(t.skipRowGroups||c||a)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&"top"===n.rowPinned||t.skipPinnedBottom&&"bottom"===n.rowPinned)return;if(-1===n.level&&!l&&!d)return;if(s(this.gos.addGridCommonParams({node:n})))return;const h=e.onNewBodyRow(n);if(i.forEach(((e,t)=>{h.onColumn(e,t,n)})),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:n}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new Mn,{colGroupSvc:o}=this.beans,s=o?o.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach(((t,i)=>{e.onColumn(t,i,void 0)}))}return i}}processPinnedTopRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);var o;e.rowPositions?e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedTopRow(e.rowIndex)})).forEach(n):null===(o=this.pinnedRowModel)||void 0===o||o.forEachPinnedRow("top",n);return i}}processRows(e,t){return i=>{const n=this.rowModel,o=bt(this.gos),s=Ct(this.gos),r=!o&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>n.getRow(e.rowIndex))).forEach(a),i;if(this.colModel.isPivotMode())return o?n.forEachPivotNode(a,!0):s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a),i;if(e.onlySelectedAllPages||r){var d,c;const e=null!==(d=null===(c=this.beans.selectionSvc)||void 0===c?void 0:c.getSelectedNodes())&&void 0!==d?d:[];this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?n.forEachNode(a):o||s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const n=t.getSortOptions(),o=(e,t)=>{return null!=e.rowIndex&&null!=t.rowIndex?e.rowIndex-t.rowIndex:e.level===t.level?(null===(s=e.parent)||void 0===s?void 0:s.id)===(null===(r=t.parent)||void 0===r?void 0:r.id)?i.compareRowNodes(n,{rowNode:e,currentPos:null!==(a=e.rowIndex)&&void 0!==a?a:-1},{rowNode:t,currentPos:null!==(l=t.rowIndex)&&void 0!==l?l:-1}):o(e.parent,t.parent):e.level>t.level?o(e.parent,t):o(e,t.parent);var s,r,a,l};e.sort(o)}processPinnedBottomRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);var o;e.rowPositions?e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomRow(e.rowIndex)})).forEach(n):null===(o=this.pinnedRowModel)||void 0===o||o.forEachPinnedRow("bottom",n);return i}}getColumnsToExport(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const{colModel:n,gos:o,visibleCols:s}=this,r=n.isPivotMode();if(i&&i.length)return n.getColsForKeys(i);const a=o.get("treeData");let l=[];return l=e&&!r?n.getCols():s.allCols,l=l.filter((e=>!dn(e)&&(!(t&&!a)||!ln(e)))),l}recursivelyAddHeaderGroups(e,t,i){const n=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>n.push(e)))})),e.length>0&&ps(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let o=0;t.forEach((e=>{const t=e;let s;s=i?i(this.gos.addGridCommonParams({columnGroup:t})):this.beans.colNames.getDisplayNameForColumnGroup(t,"header");const r=t.getLeafColumns().reduce(((e,t,i,n)=>{let o=Gi(e);return"open"===t.getColumnGroupShow()?o&&null==o[1]||(o=[i],e.push(o)):o&&null==o[1]&&(o[1]=i-1),i===n.length-1&&o&&null==o[1]&&(o[1]=i),e}),[]);n.onColumn(t,s||"",o++,t.getLeafColumns().length-1,r)}))}}]},Ku=class extends th{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){var n;0!=t&&(this.result+=this.columnSeparator);const o=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(null!==(n=o.valueFormatted)&&void 0!==n?n:o.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():(pt(53),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}};var Yu={moduleName:"CsvExport",version:it,beans:[class extends eh{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void pt(51);const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\ufeff",i],{type:"text/plain"}),o="function"===typeof t.fileName?t.fileName(this.gos.getGridCommonParams()):t.fileName;ih(this.getFileName(o),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:n,valueSvc:o,gos:s}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d,suppressQuotes:c,columnSeparator:h}=e;return new Ku({colModel:t,colNames:i,valueSvc:o,gos:s,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:d||void 0,suppressQuotes:c||!1,columnSeparator:h||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}}],apiFunctions:{getDataAsCsv:function(e,t){var i;return null===(i=e.csvCreator)||void 0===i?void 0:i.getDataAsCsv(t)},exportDataAsCsv:function(e,t){var i;null===(i=e.csvCreator)||void 0===i||i.exportDataAsCsv(t)}},dependsOn:[Uu]},Zu=class extends Si{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"});this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:n,rowNodes:o}=this;for(let s=0;s<e;s++){const e=i+s,r=new fs(n);r.setRowHeight(t),r.uiLevel=0,r.setRowIndex(e),r.setRowTop(t*e),o.push(r)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:n}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:n}}}setDataAndId(e,t,i){ze(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();_e(this.params.datasource.getRows)?pt(90):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:n,filterModel:o},gos:s}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:n,filterModel:o,context:s.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach(((n,o)=>{this.startRow+o<i&&e(n,t.value++)}))}getRow(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.lastAccessed=this.params.lastAccessedSequence.value++);const t=e-this.startRow;return this.rowNodes[t]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach(((n,o)=>{const s=e.rowData?e.rowData[o]:void 0;!n.id&&n.alreadyRendered&&s&&(t[o]=new fs(i),t[o].setRowIndex(n.rowIndex),t[o].setRowTop(n.rowTop),t[o].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(t[o],s,this.startRow+o)}));const n=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)}destroy(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()})),super.destroy()}},Xu=class extends Si{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Math.floor(e/this.params.blockSize);let n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new Zu(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e))),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(Ye(this.gos,"InfiniteCache - onPageLoaded: page = ".concat(e.id,", lastRow = ").concat(t)),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter((t=>t!=e));t.sort(((e,t)=>t.lastAccessed-e.lastAccessed));const i=this.params.maxBlocksInCache>0,n=i?this.params.maxBlocksInCache-1:null;t.forEach(((e,t)=>{if("needsLoading"===e.state&&t>=1||!!i&&t>=n){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const{startRow:i,endRow:n}=e;return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"===typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:t,overflowSize:i}=this.params,n=(e.id+1)*t+i;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,ze(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach((i=>i.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){return Object.values(this.blocks).sort(((e,t)=>e.id-t.id))}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let n=-1,o=!1;const s={value:0};let r=!1;this.getBlocksInOrder().forEach((a=>{r||(o&&n+1!==a.id?r=!0:(n=a.id,a.forEachNode((n=>{const s=n===e||n===t;(o||s)&&i.push(n),s&&(o=!o)}),s,this.rowCount)))}));return r||o?[]:i}};var qu={moduleName:"InfiniteRowModel",version:it,rowModels:["infinite"],apiFunctions:{refreshInfiniteCache:function(e){var t;null===(t=jc(e))||void 0===t||t.refreshCache()},purgeInfiniteCache:function(e){var t;null===(t=jc(e))||void 0===t||t.purgeCache()},getInfiniteRowCount:function(e){var t;return null===(t=jc(e))||void 0===t?void 0:t.getRowCount()}},beans:[class extends Si{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=Dt(this.beans),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=Dt(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onColumnEverything(){let e;var t,i;this.cacheParams?e=!He(this.cacheParams.sortModel,null!==(t=null===(i=this.beans.sortSvc)||void 0===i?void 0:i.getSortModel())&&void 0!==t?t:[]):e=!0;e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){var i,n;return null!==(i=null===(n=this.infiniteCache)||void 0===n?void 0:n.getRowNodesInRange(e,t))&&void 0!==i?i:[]}reset(){if(!this.datasource)return;var e;null!=jt(this.gos)||(null===(e=this.beans.selectionSvc)||void 0===e||e.reset("rowDataChanged"));this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e,t;this.destroyCache();const i=this.beans,{filterManager:n,sortSvc:o,rowNodeBlockLoader:s,eventSvc:r,gos:a}=i;this.cacheParams={datasource:this.datasource,filterModel:null!==(e=null===n||void 0===n?void 0:n.getFilterModel())&&void 0!==e?e:{},sortModel:null!==(t=null===o||void 0===o?void 0:o.getSortModel())&&void 0!==t?t:[],rowNodeBlockLoader:s,initialRowCount:a.get("infiniteInitialRowCount"),maxBlocksInCache:a.get("maxBlocksInCache"),rowHeight:Dt(i),overflowSize:a.get("cacheOverflowSize"),blockSize:a.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new Xu(this.cacheParams)),r.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)})),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}forEachNode(e){var t;null===(t=this.infiniteCache)||void 0===t||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;null===(e=this.infiniteCache)||void 0===e||e.refreshCache()}purgeCache(){var e;null===(e=this.infiniteCache)||void 0===e||e.purgeCache()}isLastRowIndexKnown(){var e,t;return null!==(e=null===(t=this.infiniteCache)||void 0===t?void 0:t.isLastRowIndexKnown())&&void 0!==e&&e}setRowCount(e,t){var i;null===(i=this.infiniteCache)||void 0===i||i.setRowCount(e,t)}},class extends Si{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=Ut(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=$e(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){_i(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void Ye(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");const e=null!=this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter((e=>"needsLoading"===e.state)).slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach((t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n})),e}printCacheStatus(){Ye(this.gos,"RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,", blocks = ").concat(JSON.stringify(this.getBlockState())))}}],dependsOn:[zu]};var Qu={moduleName:"HighlightChanges",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="cellFlashSvc"}onFlashCells(e,t){if(!e.comp)return;const i=os(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",null===t||void 0===t?void 0:t.flashDuration,null===t||void 0===t?void 0:t.fadeDuration)}animateCell(e,t,i,n){const o=e.comp;if(!o)return;const{gos:s}=this;if(i||(i=s.get("cellFlashDuration")),0===i)return;ze(n)||(n=s.get("cellFadeDuration"));const r="ag-cell-".concat(t),a="ag-cell-".concat(t,"-animation");o.addOrRemoveCssClass(r,!0),o.addOrRemoveCssClass(a,!1);const{eGui:l}=e;this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e.isAlive()&&(o.addOrRemoveCssClass(r,!1),o.addOrRemoveCssClass(a,!0),l.style.transition="background-color ".concat(n,"ms"),window.setTimeout((()=>{e.isAlive()&&(o.addOrRemoveCssClass(a,!1),l.style.transition="")}),n))}),i)}))}}],userComponents:{agAnimateShowChangeCellRenderer:class extends En{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),o=ze(n)?n:i,s=t>=0,r=this.eDelta;r.textContent=s?"\u2191"+o:"\u2193"+o,r.classList.toggle("ag-value-change-delta-up",s),r.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),xe(this.eDelta)}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{value:n,valueFormatted:o}=e,{eValue:s,lastValue:r,beans:a}=this;if(n===r)return!1;if(ze(o)?s.textContent=o:ze(n)?s.textContent=n:xe(s),null!==(t=a.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"===typeof n&&"number"===typeof r){const t=n-r;this.showDelta(e,t)}return r&&s.classList.add("ag-value-change-value-highlight"),i||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},agAnimateSlideCellRenderer:class extends En{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current"),this.registerCSS(".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:i}=this,n=Tt(t).createElement("span");n.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=n,n.textContent=i.textContent,this.getGui().insertBefore(n,i),t.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.value;if(_e(n)&&(n=""),n===this.lastValue)return!1;if(null!==(t=this.beans.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;i||this.addSlideAnimation(),this.lastValue=n;const o=this.eCurrent;return ze(e.valueFormatted)?o.textContent=e.valueFormatted:ze(e.value)?o.textContent=n:xe(o),!0}}},apiFunctions:{flashCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming((()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach((e=>i.flashCell(e,t)))}))}}};function Ju(e){if((e=l({},e)).version||(e.version="32.1.0"),"32.1.0"===e.version)e=function(e){return e.cellSelection=function(e,t){if(e&&"object"===typeof e)return e[t]}(e,"rangeSelection"),e}(e);return e}var $u={moduleName:"GridState",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=$e(this,(()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=$e(this,(()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())}),0),this.onRowSelectedDebounced=$e(this,(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=bt(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",it);const e=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,(()=>e((()=>this.setupStateOnGridReady()))));const[t,i,n]=this.addManagedEventListeners({newColumnsLoaded:i=>{let{source:n}=i;"gridInitializing"===n&&(t(),e((()=>this.setupStateOnColumnsInitialised())))},rowCountReady:()=>{null===i||void 0===i||i(),e((()=>this.setupStateOnRowCountReady()))},firstDataRendered:()=>{null===n||void 0===n||n(),e((()=>this.setupStateOnFirstDataRendered()))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getInitialState(){var e;return Ju(null!==(e=this.gos.get("initialState"))&&void 0!==e?e:{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){const e=()=>this.updateCachedState("sideBar",this.getSideBarState());e(),this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:n}=this.getInitialState();e&&this.setFilterState(e),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),n&&this.setPaginationState(n);const o=this.updateCachedState.bind(this);o("filter",this.getFilterState()),o("rowGroupExpansion",this.getRowGroupExpansionState()),o("rowSelection",this.getRowSelectionState()),o("pagination",this.getPaginationState());const s=()=>{this.updateRowGroupExpansionStateTimer=0,o("rowGroupExpansion",this.getRowGroupExpansionState())};this.addManagedEventListeners({filterChanged:()=>o("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:s,columnRowGroupChanged:s,rowDataUpdated:()=>{0!==this.gos.get("groupDefaultExpanded")&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(s)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&o("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:n}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!(null===n||void 0===n||!n.orderedColIds));const o=this.updateCachedState.bind(this);o("sideBar",this.getSideBarState()),o("focusedCell",this.getFocusedCellState());const s=this.getRangeSelectionState();o("rangeSelection",s),o("cellSelection",s),o("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>o("focusedCell",this.getFocusedCellState()),cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();o("rangeSelection",e),o("cellSelection",e)}},bodyScrollEnd:()=>o("scroll",this.getScrollState())})}getColumnState(){const e=this.beans,t=e.colModel.isPivotMode(),i=[],n=[],o=[],s=[],r=[],a=[],l=[],d=[],c=[];let h=0;const u=Qi(e);for(let p=0;p<u.length;p++){const{colId:e,sort:t,sortIndex:g,rowGroup:m,rowGroupIndex:v,aggFunc:f,pivot:y,pivotIndex:b,pinned:C,hide:x,width:w,flex:S}=u[p];c.push(e),t&&(i[null!==g&&void 0!==g?g:h++]={colId:e,sort:t}),m&&(n[null!==v&&void 0!==v?v:0]=e),"string"===typeof f&&o.push({colId:e,aggFunc:f}),y&&(s[null!==b&&void 0!==b?b:0]=e),C&&("right"===C?a:r).push(e),x&&l.push(e),(S||w)&&d.push({colId:e,flex:null!==S&&void 0!==S?S:void 0,width:w})}return{sort:i.length?{sortModel:i}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:o.length?{aggregationModel:o}:void 0,pivot:s.length||t?{pivotMode:t,pivotColIds:s}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:d.length?{columnSizingModel:d}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:n,pivot:o,columnPinning:s,columnVisibility:r,columnSizing:a,columnOrder:l,partialColumnState:d}=e,c={},h=e=>{let t=c[e];return t||(t={colId:e},c[e]=t,t)},u=d?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(((e,t)=>{let{colId:i,sort:n}=e;const o=h(i);o.sort=n,o.sortIndex=t})),u.sort=null,u.sortIndex=null),i&&(i.groupColIds.forEach(((e,t)=>{const i=h(e);i.rowGroup=!0,i.rowGroupIndex=t})),u.rowGroup=null,u.rowGroupIndex=null),n&&(n.aggregationModel.forEach((e=>{let{colId:t,aggFunc:i}=e;h(t).aggFunc=i})),u.aggFunc=null),o&&(o.pivotColIds.forEach(((e,t)=>{const i=h(e);i.pivot=!0,i.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:o.pivotMode},source:"gridInitializing"}),u.pivot=null,u.pivotIndex=null),s&&(s.leftColIds.forEach((e=>{h(e).pinned="left"})),s.rightColIds.forEach((e=>{h(e).pinned="right"})),u.pinned=null),r&&(r.hiddenColIds.forEach((e=>{h(e).hide=!0})),u.hide=null),a&&(a.columnSizingModel.forEach((e=>{let{colId:t,flex:i,width:n}=e;const o=h(t);o.flex=null!==i&&void 0!==i?i:null,o.width=n})),u.flex=null);const p=null===l||void 0===l?void 0:l.orderedColIds,g=!(null===p||void 0===p||!p.length),m=g?p.map((e=>h(e))):Object.values(c);m.length&&(this.columnStates=m,Zi(this.beans,{state:m,applyOrder:g,defaultState:u},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const n=this.beans,{pivotResultCols:o,colGroupSvc:s}=n;if(null!==o&&void 0!==o&&o.isPivotResultColsPresent()){if(t){const i=[];for(const e of t)o.getPivotResultCol(e.colId)&&i.push(e);Zi(n,{state:i,applyOrder:e},"gridInitializing")}i&&(null===s||void 0===s||s.setColumnGroupState(i,"gridInitializing"))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState(),i=[];return t.forEach((e=>{let{groupId:t,open:n}=e;n&&i.push(t)})),i.length?{openColumnGroupIds:i}:void 0}setColumnGroupState(e){var t;const i=this.beans.colGroupSvc;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup")||!i)return;const n=new Set(null===(t=e.columnGroup)||void 0===t?void 0:t.openColumnGroupIds),o=i.getColumnGroupState().map((e=>{let{groupId:t}=e;const i=n.has(t);return i&&n.delete(t),{groupId:t,open:i}}));n.forEach((e=>{o.push({groupId:e,open:!0})})),o.length&&(this.columnGroupStates=o),i.setColumnGroupState(o,"gridInitializing")}getFilterState(){var e;const t=this.beans.filterManager;let i=null===t||void 0===t?void 0:t.getFilterModel();i&&0===Object.keys(i).length&&(i=void 0);const n=null!==(e=null===t||void 0===t?void 0:t.getAdvFilterModel())&&void 0!==e?e:void 0;return i||n?{filterModel:i,advancedFilterModel:n}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:i,advancedFilterModel:n}=null!==e&&void 0!==e?e:{};i&&(null===t||void 0===t||t.setFilterModel(i,"columnFilter")),n&&(null===t||void 0===t||t.setAdvFilterModel(n))}getRangeSelectionState(){var e;const t=null===(e=this.beans.rangeSvc)||void 0===e?void 0:e.getCellRanges().map((e=>{const{id:t,type:i,startRow:n,endRow:o,columns:s,startColumn:r}=e;return{id:t,type:i,startRow:n,endRow:o,colIds:s.map((e=>e.getColId())),startColId:r.getColId()}}));return null!==t&&void 0!==t&&t.length?{cellRanges:t}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:n,visibleCols:o}=this.beans;if(!$t(t)||!i)return;const s=[];e.cellRanges.forEach((e=>{const t=[];if(e.colIds.forEach((e=>{const i=n.getCol(e);i&&t.push(i)})),!t.length)return;let i=n.getCol(e.startColId);if(!i){const e=o.allCols,n=new Set(t);i=e.find((e=>n.has(e)))}s.push(l(l({},e),{},{columns:t,startColumn:i}))})),i.setCellRanges(s)}getScrollState(){var e,t;if(!this.isClientSideRowModel)return;const i=this.beans.ctrlsSvc.getScrollFeature(),{left:n}=null!==(e=null===i||void 0===i?void 0:i.getHScrollPosition())&&void 0!==e?e:{left:0},{top:o}=null!==(t=null===i||void 0===i?void 0:i.getVScrollPosition())&&void 0!==t?t:{top:0};return o||n?{top:o,left:n}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e,{frameworkOverrides:n,rowRenderer:o,animationFrameSvc:s,ctrlsSvc:r}=this.beans;n.wrapIncoming((()=>{var e;r.get("center").setCenterViewportScrollLeft(i),null===(e=r.getScrollFeature())||void 0===e||e.setVerticalScrollPosition(t),o.redraw({afterScroll:!0}),null===s||void 0===s||s.flushAllFrames()}))}getSideBarState(){var e;return null===(e=this.beans.sideBar)||void 0===e||null===(e=e.comp)||void 0===e?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:n}=e,{focusSvc:o,colModel:s}=this.beans;o.setFocusedCell({column:s.getCol(t),rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),n=t.get("paginationAutoPageSize")?void 0:e.getPageSize();return i||n?{page:i,pageSize:n}:void 0}setPaginationState(e){const{pagination:t,gos:i}=this.beans;t&&(e.pageSize&&!i.get("paginationAutoPageSize")&&t.setPageSize(e.pageSize,"initialState"),"number"===typeof e.page&&t.setPage(e.page))}getRowSelectionState(){var e;const t=this.beans.selectionSvc;if(!t)return;const i=t.getSelectionState();return!i||!Array.isArray(i)&&(!1===i.selectAll||!1===i.selectAllChildren)&&!(null!==i&&void 0!==i&&null!==(e=i.toggledNodes)&&void 0!==e&&e.length)?void 0:i}setRowSelectionState(e){var t;null===(t=this.beans.selectionSvc)||void 0===t||t.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;const i=[];return t.forEachNode((e=>{let{expanded:t,id:n}=e;t&&n&&i.push(n)})),i.length?{expandedRowGroupIds:i}:void 0}setRowGroupExpansionState(e){var t;null===(t=this.beans.expansionSvc)||void 0===t||t.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;const n=this.cachedState;Object.entries(t).forEach((e=>{let[t,o]=e;He(o,n[t])||(i=!0)})),this.cachedState=l(l({},n),t),i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),He(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=l(l({},this.cachedState),{},{[e]:t})}refreshStaleState(){const e=this.staleStateKeys;e.forEach((e=>{if("rowSelection"===e)this.setCachedStateValue(e,this.getRowSelectionState())})),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0;const t=this.beans.colAnimation;null===t||void 0===t||t.setSuppressAnimation(!0),e(),setTimeout((()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(null===t||void 0===t||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))}))}}],apiFunctions:{getState:function(e){var t,i;return null!==(t=null===(i=e.stateSvc)||void 0===i?void 0:i.getState())&&void 0!==t?t:{}}}};var ep="paginationPageSizeSelector",tp={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends En{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(ep,(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||null===e||void 0===e||!e.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){xe(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(ep)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),n=!0!==this.gos.get(ep);pt(94,{pageSizeSet:i,pageSizesSet:n,pageSizeOptions:e,paginationPageSizeOption:t}),n||pt(95,{paginationPageSizeOption:t,paginationPageSizeSelector:ep}),e.unshift("")}const n=String(i?"":t);this.selectPageSizeComp?(zi(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map((e=>({value:String(e)})))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Ma).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(o).setLabel(n).onValueChange((()=>this.handlePageSizeItemSelected())),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(ep);return Array.isArray(t)&&null!==t&&void 0!==t&&t.length?[...t].sort(((e,t)=>e-t)):e}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},ip={selector:"AG-PAGINATION",component:class extends Ra{constructor(){super(),this.btFirst=Tn,this.btPrevious=Tn,this.btNext=Tn,this.btLast=Tn,this.lbRecordCount=Tn,this.lbFirstRowOnPage=Tn,this.lbLastRowOnPage=Tn,this.lbCurrent=Tn,this.lbTotal=Tn,this.pageSizeComp=Tn,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:max(var(--ag-row-height),22px);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}")}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[tp]);const{btFirst:t,btPrevious:i,btNext:n,btLast:o}=this;this.activateTabIndex([t,i,n,o]),t.insertAdjacentElement("afterbegin",Wr(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",Wr(e?"next":"previous",this.beans)),n.insertAdjacentElement("afterbegin",Wr(e?"previous":"next",this.beans)),o.insertAdjacentElement("afterbegin",Wr(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):Oo(this.beans,e)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==Do.ENTER&&e.key!==Do.SPACE||(e.preventDefault(),i())}})})),Ro(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}return $c(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),o=e("firstPage","First Page"),s=e("previousPage","Previous Page"),r=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'.concat(l,'">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel">\n                    <span id="ag-').concat(l,'-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(l,'-to">').concat(i,'</span>\n                    <span id="ag-').concat(l,'-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(l,'-of">').concat(n,'</span>\n                    <span id="ag-').concat(l,'-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="').concat(o,'"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="').concat(s,'"></div>\n                    <span class="ag-paging-description">\n                        <span id="ag-').concat(l,'-start-page">').concat(t,'</span>\n                        <span id="ag-').concat(l,'-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-').concat(l,'-of-page">').concat(n,'</span>\n                        <span id="ag-').concat(l,'-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="').concat(r,'"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="').concat(a,'"></div>\n                </span>\n            </div>')}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),o=e===i-1;this.nextButtonDisabled=o||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){P(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),n=e?i:null;if(1===n){const e=this.rowModel.getRow(0);if(e&&e.group&&!(e.groupData||e.aggData))return void this.setTotalLabelsToZero()}const o=this.pagination.getCurrentPage(),s=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=s*o+1,a=r+s-1,e&&a>n&&(a=n));const l=!e&&i<r+s-1,d=this.formatNumber(r);let c;this.lbFirstRowOnPage.textContent=d;const h=this.getLocaleTextFunc();c=l?h("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=c;const u=t>0?o+1:0,p=this.formatNumber(u);let g,m;if(this.lbCurrent.textContent=p,e)g=this.formatNumber(t),m=this.formatNumber(n);else{const e=h("more","more");g=e,m=e}this.lbTotal.textContent=g,this.lbRecordCount.textContent=m,this.announceAriaStatus(d,c,m,p,g)}announceAriaStatus(e,t,i,n,o){const s=this.getLocaleTextFunc(),r=s("page","Page"),a=s("to","to"),l=s("of","of"),d="".concat(e," ").concat(a," ").concat(t," ").concat(l," ").concat(i),c="".concat(r," ").concat(n," ").concat(l," ").concat(o);var h,u;d!==this.ariaRowStatus&&(this.ariaRowStatus=d,null===(h=this.ariaAnnounce)||void 0===h||h.announceValue(d,"paginationRow"));c!==this.ariaPageStatus&&(this.ariaPageStatus=c,null===(u=this.ariaAnnounce)||void 0===u||u.announceValue(c,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}}},np={moduleName:"Pagination",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return ip}isPaginateChildRows(){const e=this.gos;return!!(e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren"))||e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;this.active&&t!==e&&"number"===typeof t&&(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){if(!this.active)return!0;return this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return ze(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:ze(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ze(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ze(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0)return void this.setZeroRows();const i=this.pageSize,n=t-1;this.totalPages=Math.floor(n/i)+1,this.adjustCurrentPageIfInvalid();const o=this.currentPage,s=i*o;let r=i*(o+1)-1;if(r>n&&(r=n),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(s),r===n)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const t=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=t-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,0===e)return void this.setZeroRows();const{pageSize:t,currentPage:i}=this,n=e-1;this.totalPages=Math.floor(n/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>n&&(this.bottomDisplayedRowIndex=n)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}},class extends Si{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const i=Math.max(Dt(t),1),n=Math.floor(e/i);t.pagination.setPageSize(n,"autoCalculated")};this.isBodyRendered?$e(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getPageSize())&&void 0!==t?t:100},paginationGetCurrentPage:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getCurrentPage())&&void 0!==t?t:0},paginationGetTotalPages:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getTotalPages())&&void 0!==t?t:1},paginationGetRowCount:function(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToNextPage()},paginationGoToPreviousPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToPreviousPage()},paginationGoToFirstPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToFirstPage()},paginationGoToLastPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToLastPage()},paginationGoToPage:function(e,t){var i;null===(i=e.pagination)||void 0===i||i.goToPage(t)}},dependsOn:[Lh]};var op={moduleName:"RowApi",version:it,apiFunctions:{redrawRows:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.redrawRows(i)))},setRowNodeExpanded:function e(t,i,n,o,s){i&&(o&&i.parent&&-1!==i.parent.level&&e(t,i.parent,n,o,s),i.setExpanded(n,void 0,s))},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRowIndex:function(e){return e.rowRenderer.firstRenderedRow},getLastDisplayedRowIndex:function(e){return e.rowRenderer.lastRenderedRow},getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()}}},sp={moduleName:"ScrollApi",version:it,apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()},ensureColumnVisible:Su,ensureIndexVisible:Mu,ensureNodeVisible:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i)),"ensureVisible")}}};var rp={moduleName:"RenderApi",version:it,apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;const n=e.ctrlsSvc.getGridBodyCtrl().eGridBody,o="aria-".concat(t);null===i?n.removeAttribute(o):n.setAttribute(o,i)},refreshCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.refreshCells(t)))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))},isAnimationFrameQueueEmpty:function(e){var t,i;return null===(t=null===(i=e.animationFrameSvc)||void 0===i?void 0:i.isQueueEmpty())||void 0===t||t},flushAllAnimationFrames:function(e){var t;null===(t=e.animationFrameSvc)||void 0===t||t.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:Dt(e),headerHeight:wr(e)}},getCellRendererInstances:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];if(e.rowRenderer.getCellCtrls(i.rowNodes,i.columns).forEach((e=>{const t=e.getCellRenderer();null!=t&&n.push(so(t))})),null!==(t=i.columns)&&void 0!==t&&t.length)return n;const o=[],s=Mc(i.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach((e=>{if(s&&!Dc(e.rowNode,s))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let i=0;i<t.length;i++){const e=t[i];null!=e&&o.push(so(e))}})),[...o,...n]}}};function ap(e,t){const i=e.getMinWidth();t<i&&(t=i);const n=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=n),t}var lp={moduleName:"ColumnAutoSize",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.autoSizeCols(e)));const{colKeys:t,skipHeader:i,skipHeaderGroups:n,stopAtGroup:o,source:s="api"}=e,{animationFrameSvc:r,renderStatus:a,colModel:l,autoWidthCalc:d,visibleCols:c}=this.beans;if(null===r||void 0===r||r.flushAllFrames(),this.timesDelayed<5&&a&&!a.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout((()=>{this.isAlive()&&this.autoSizeCols(e)}));this.timesDelayed=0;const h=[];let u=-1;const p=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),g=null!=n?n:p;for(;0!==u;){u=0;const e=[];t.forEach((t=>{if(!t)return;const i=l.getCol(t);if(!i)return;if(h.indexOf(i)>=0)return;const n=d.getPreferredWidthForColumn(i,p);if(n>0){const e=ap(i,n);i.setActualWidth(e,s),h.push(i),u++}e.push(i)})),e.length&&c.refresh(s)}g||this.autoSizeColumnGroupsByColumns(t,s,o),Yi(this.eventSvc,h,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:n,ctrlsSvc:o}=this.beans,s=new Set;let r;n.getColsForKeys(e).forEach((e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||s.add(t),t=t.getParent()}));for(const a of s){for(const e of o.getHeaderRowContainerCtrls())if(r=e.getHeaderCtrlForColumn(a),r)break;r&&r.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.autoSizeAllColumns(e,t)));const i=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}addColumnAutosize(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",n);const o=new Pa(e);return o.addEventListener("doubleTap",n),()=>{e.removeEventListener("dblclick",n),o.removeEventListener("doubleTap",n),o.destroy()}}addColumnGroupResize(e,t,i){const n=this.gos.get("skipHeaderOnAutoSize"),o=()=>{const e=[];t.getDisplayedLeafColumns().forEach((t=>{t.getColDef().suppressAutoSize||e.push(t.getColId())})),e.length>0&&this.autoSizeCols({colKeys:e,skipHeader:n,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",o),()=>e.removeEventListener("dblclick",o)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:i,scrollVisibleSvc:n}=this.beans,o=i.getGridBodyCtrl(),s=o.isVerticalScrollShowing()?n.getScrollbarWidth():0,r=ge(o.eGridBody)-s;r>0?this.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,-1)}),500):pt(29)}sizeColumnsToFit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sizeColumnsToFit",i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.sizeColumnsToFit(e,t,i,o)));const s={};var r;o&&(null===o||void 0===o||null===(r=o.columnLimits)||void 0===r||r.forEach((e=>{let{key:t}=e,i=n(e,d);s["string"===typeof t?t:t.getColId()]=i})));const a=this.beans.visibleCols.allCols,l=e===rn(a);if(e<=0||!a.length||l)return;const c=[],h=[];a.forEach((e=>{!0===e.getColDef().suppressSizeToFit?h.push(e):c.push(e)}));const u=c.slice(0);let p=!1;const g=e=>{_i(c,e),h.push(e)};for(c.forEach((e=>{var i,n;e.resetActualWidth(t);const r=null===s||void 0===s?void 0:s[e.getId()],a=null!==(i=null===r||void 0===r?void 0:r.minWidth)&&void 0!==i?i:null===o||void 0===o?void 0:o.defaultMinWidth,l=null!==(n=null===r||void 0===r?void 0:r.maxWidth)&&void 0!==n?n:null===o||void 0===o?void 0:o.defaultMaxWidth,d=e.getActualWidth();"number"===typeof a&&d<a?e.setActualWidth(a,t,!0):"number"===typeof l&&d>l&&e.setActualWidth(l,t,!0)}));!p;){p=!0;const i=e-rn(h);if(i<=0)c.forEach((e=>{var i,n;const r=null!==(i=null===s||void 0===s||null===(n=s[e.getId()])||void 0===n?void 0:n.minWidth)&&void 0!==i?i:null===o||void 0===o?void 0:o.defaultMinWidth;"number"!==typeof r?e.setActualWidth(e.minWidth,t):e.setActualWidth(r,t,!0)}));else{const e=i/rn(c);let n=i;for(let i=c.length-1;i>=0;i--){var m,v;const r=c[i],a=null===s||void 0===s?void 0:s[r.getId()],l=null!==(m=null===a||void 0===a?void 0:a.minWidth)&&void 0!==m?m:null===o||void 0===o?void 0:o.defaultMinWidth,d=null!==(v=null===a||void 0===a?void 0:a.maxWidth)&&void 0!==v?v:null===o||void 0===o?void 0:o.defaultMaxWidth,h=r.getMinWidth(),u=r.getMaxWidth(),f="number"===typeof l&&l>h?l:h,y="number"===typeof d&&d<u?d:u;let b=Math.round(r.getActualWidth()*e);b<f?(b=f,g(r),p=!1):b>y?(b=y,g(r),p=!1):0===i&&(b=n),r.setActualWidth(b,t,!0),n-=b}}}u.forEach((e=>{e.fireColumnWidthChangedEvent(t)}));const f=this.beans.visibleCols;f.setLeftValues(t),f.updateBodyWidths(),i||Yi(this.eventSvc,u,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:n}=e,o=null===t||void 0===t?void 0:t.map((e=>{let{colId:t,minWidth:i,maxWidth:n}=e;return{key:t,minWidth:i,maxWidth:n}}));this.sizeColumnsToFitGridBody({defaultMinWidth:i,defaultMaxWidth:n,columnLimits:o})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==(null===e||void 0===e?void 0:e.type))return;const{colIds:t,skipHeader:i}=e;setTimeout((()=>{t?this.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)}))}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}}],apiFunctions:{sizeColumnsToFit:function(e,t){var i,n;"number"===typeof t?null===(i=e.colAutosize)||void 0===i||i.sizeColumnsToFit(t,"api"):null===(n=e.colAutosize)||void 0===n||n.sizeColumnsToFitGridBody(t)},autoSizeColumns:function(e,t,i){var n;null===(n=e.colAutosize)||void 0===n||n.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})},autoSizeAllColumns:function(e,t){var i;null===(i=e.colAutosize)||void 0===i||i.autoSizeAllColumns("api",t)}},dependsOn:[Cl]};function dp(e){const t=pp(e);if(0===t)return 0;const i=hp(e,t-1);return void 0===i?0:i.rowTop+i.rowHeight}function cp(e,t){return e.cache[t]}function hp(e,t){return cp(e,e.order[t])}function up(e,t){e.order.forEach(((i,n)=>{const o=cp(e,i);o&&t(o,n)}))}function pp(e){return e.order.length}var gp={moduleName:"PinnedRow",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",(e=>this.setPinnedRowData(e.currentValue,"top"))),this.addManagedPropertyListener("pinnedBottomRowData",(e=>this.setPinnedRowData(e.currentValue,"bottom"))),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return 0===this.getCache(e).order.length}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};up(this.pinnedBottomRows,e),up(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const n=Mt(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return up(this.pinnedBottomRows,i),t=0,up(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=this.getCache(t);if(void 0===e)return i.order.length=0,void(i.cache={});const n=jt(this.gos),o="top"===t?"t-":"b-",s=new Set(i.order),r=[],a=new Set;let l=0,d=-1;for(const h of e){var c;const e=null!==(c=null===n||void 0===n?void 0:n({data:h,level:0,rowPinned:t}))&&void 0!==c?c:o+this.nextId++;if(a.has(e)){pt(96,{id:e,data:h});continue}d++,a.add(e),r.push(e);const u=cp(i,e);if(void 0!==u)u.data!==h&&u.setData(h),l+=this.setRowTopAndRowIndex(u,l,d),s.delete(e);else{const n=new fs(this.beans);n.id=e,n.data=h,n.rowPinned=t,l+=this.setRowTopAndRowIndex(n,l,d),i.cache[e]=n,i.order.push(e)}}s.forEach((e=>{var t;null===(t=cp(i,e))||void 0===t||t.clearRowTopAndRowIndex(),delete i.cache[e]})),i.order=r}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Mt(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return dp(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return dp(this.pinnedBottomRows)}getPinnedTopRowCount(){return pp(this.pinnedTopRows)}getPinnedBottomRowCount(){return pp(this.pinnedBottomRows)}getPinnedTopRow(e){return hp(this.pinnedTopRows,e)}getPinnedBottomRow(e){return hp(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return cp(this.getCache(t),e)}forEachPinnedRow(e,t){return up(this.getCache(e),t)}getCache(e){return"top"===e?this.pinnedTopRows:this.pinnedBottomRows}}],apiFunctions:{getPinnedTopRowCount:function(e){var t,i;return null!==(t=null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRowCount())&&void 0!==t?t:0},getPinnedBottomRowCount:function(e){var t,i;return null!==(t=null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRowCount())&&void 0!==t?t:0},getPinnedTopRow:function(e,t){var i;return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){var i;return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRow(t)}}},mp=class extends Si{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,n=i.cellClassRules,o=this.getCellClassParams(e,i);zs(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,o,(e=>t.addOrRemoveCssClass(e,!0)),(e=>t.addOrRemoveCssClass(e,!1))),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let n;if("function"===typeof i){n=i(this.getCellClassParams(e,t))}else n=i;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,n=this.getCellClassParams(e,i);this.staticClasses.forEach((e=>t.addOrRemoveCssClass(e,!1)));const o=this.beans.cellStyles.getStaticCellClasses(i,n);this.staticClasses=o,o.forEach((e=>t.addOrRemoveCssClass(e,!0)))}getCellClassParams(e,t){const{value:i,rowNode:n}=this.cellCtrl;return this.beans.gos.addGridCommonParams({value:i,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}},vp={moduleName:"CellStyle",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,n){zs(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;if("function"===typeof i){n=i(t)}else n=i;return"string"===typeof n&&(n=[n]),n||[]}createCellCustomStyleFeature(e,t){return new mp(e,t)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach((e=>{i(e)}))}}]},fp={moduleName:"RowStyle",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,n=t=>{"string"===typeof t?e.push(t):Array.isArray(t)&&t.forEach((t=>e.push(t)))},o=i.get("rowClass");o&&n(o);const s=i.getCallback("getRowClass");if(s){n(s({data:t.data,node:t,rowIndex:t.rowIndex}))}}preProcessRowClassRules(e,t){this.processRowClassRules(t,(t=>{e.push(t)}),(()=>{}))}processRowClassRules(e,t,i){const{gos:n,expressionSvc:o}=this.beans,s=n.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});zs(o,void 0,n.get("rowClassRules"),s,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),n=t.getCallback("getRowStyle");let o;if(n){o=n({data:e.data,node:e,rowIndex:e.rowIndex})}if(o||i)return Object.assign({},i,o)}}]};var yp=class extends Si{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){if(this.gos.get("columnHoverHighlight")){const e=this.beans.colHover;this.addManagedListeners(this.element,{mouseout:e.clearMouseOver.bind(e),mouseover:e.setMouseOver.bind(e,this.columns)})}}},bp={moduleName:"ColumnHover",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colHover"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const n=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.isHovered(i);t.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:n}),n()}onCellColumnHover(e,t){if(!t)return;if(!this.gos.get("columnHoverHighlight"))return;const i=this.isHovered(e);t.addOrRemoveCssClass("ag-column-hover",i)}addHeaderFilterColumnHoverListener(e,t,i,n){this.createHoverFeature(e,[i],n);const o=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.isHovered(i);t.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:o}),o()}createHoverFeature(e,t,i){e.createManagedBean(new yp(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}}],apiFunctions:{isColumnHovered:function(e,t){var i;return!(null===(i=e.colHover)||void 0===i||!i.isHovered(t))}}};var Cp={moduleName:"EventApi",version:it,apiFunctions:{addEventListener:function(e,t,i){var n;null===(n=e.apiEventSvc)||void 0===n||n.addEventListener(t,i)},addGlobalListener:function(e,t){var i;null===(i=e.apiEventSvc)||void 0===i||i.addGlobalListener(t)},removeEventListener:function(e,t,i){var n;null===(n=e.apiEventSvc)||void 0===n||n.removeEventListener(t,i)},removeGlobalListener:function(e,t){var i;null===(i=e.apiEventSvc)||void 0===i||i.removeGlobalListener(t)}},beans:[class extends Si{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=null===(e=(t=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)||void 0===e?void 0:e.call(t)}addEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.wrapSvc)||void 0===n?void 0:n.wrap(t))&&void 0!==i?i:t,s=!ac.has(e),r=s?this.asyncListeners:this.syncListeners;r.has(e)||r.set(e,new Set),r.get(e).add(o),this.eventSvc.addEventListener(e,o,s)}removeEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.wrapSvc)||void 0===n?void 0:n.unwrap(t))&&void 0!==i?i:t,s=this.asyncListeners.get(e),r=!(null===s||void 0===s||!s.delete(o));var a;r||(null===(a=this.syncListeners.get(e))||void 0===a||a.delete(o));this.eventSvc.removeEventListener(e,o,r)}addGlobalListener(e){var t,i;const n=null!==(t=null===(i=this.wrapSvc)||void 0===i?void 0:i.wrapGlobal(e))&&void 0!==t?t:e,o=(e,t)=>{ac.has(e)&&n(e,t)},s=(e,t)=>{ac.has(e)||n(e,t)};this.globalListenerPairs.set(e,{syncListener:o,asyncListener:s});const r=this.eventSvc;r.addGlobalListener(o,!1),r.addGlobalListener(s,!0)}removeGlobalListener(e){var t;const{eventSvc:i,wrapSvc:n,globalListenerPairs:o}=this,s=null!==(t=null===n||void 0===n?void 0:n.unwrapGlobal(e))&&void 0!==t?t:e;if(o.has(s)){const{syncListener:t,asyncListener:n}=o.get(s);i.removeGlobalListener(t,!1),i.removeGlobalListener(n,!0),o.delete(e)}else this.syncGlobalListeners.delete(s),i.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach(((e,i)=>{e.forEach((e=>this.eventSvc.removeEventListener(i,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventSvc.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach((e=>{let{syncListener:i,asyncListener:n}=e;t.removeGlobalListener(i,!1),t.removeGlobalListener(n,!0)})),e.clear()}}]},xp={moduleName:"Tooltip",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,n){e&&t.destroyBean(e);const o=ba(this.gos),{column:s,eGui:r}=t,a=s.getColDef();n||!o||a.headerComponent||(n=xa((()=>r.querySelector(".ag-header-cell-text"))));const l={getColumn:()=>s,getColDef:()=>s.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>{if(null!=i)return i;return s.getColDef().headerTooltip},shouldDisplayTooltip:n};let d=this.createTooltipFeature(l);return d&&(d=t.createBean(d),t.setRefreshFunction("tooltip",(()=>d.refreshTooltip()))),d}setupHeaderGroupTooltip(e,t,i,n){e&&t.destroyBean(e);const o=ba(this.gos),{column:s,eGui:r}=t,a=s.getColGroupDef();n||!o||null!==a&&void 0!==a&&a.headerGroupComponent||(n=xa((()=>r.querySelector(".ag-header-group-text"))));const l={getColumn:()=>s,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>null!==i&&void 0!==i?i:a&&a.headerTooltip,shouldDisplayTooltip:n};a&&(l.getColDef=()=>a);const d=this.createTooltipFeature(l);return d?t.createBean(d):d}enableCellTooltipFeature(e,t,i){const{column:n,rowNode:o}=e,s=ba(this.gos);i||!s||e.isCellRenderer()||(i=xa((()=>{const{eGui:t}=e;return 0===t.children.length?t:t.querySelector(".ag-cell-value")})));const r={getColumn:()=>n,getColDef:()=>n.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>o,getGui:()=>e.eGui,getLocation:()=>"cell",getTooltipValue:null!=t?()=>t:()=>{const t=n.getColDef(),i=o.data;if(t.tooltipField&&ze(i))return ki(i,t.tooltipField,n.isTooltipFieldContainsDots());const s=t.tooltipValueGetter;return s?s(this.gos.addGridCommonParams({location:"cell",colDef:n.getColDef(),column:n,rowIndex:e.cellPosition.rowIndex,node:o,data:o.data,value:e.value,valueFormatted:e.valueFormatted})):null},getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:i};return this.createTooltipFeature(r,this.beans)}refreshRowTooltip(e,t,i,n){const o={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},s=this.beans,r=s.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(o,s);return t.createBean(a,r)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=ze(t.tooltipField)||ze(t.tooltipValueGetter)||ze(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}}],dynamicBeans:{tooltipFeature:class extends Si{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(null!=e&&""!=e?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){null==this.tooltipManager&&(this.tooltipManager=this.createBean(new ya(this.ctrl,(()=>this.tooltip)),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}}},userComponents:{agTooltipComponent:class extends La{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=Ho(t,!0)}}},dependsOn:[Lh],css:[".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);white-space:normal}.ag-tooltip,.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}"]},wp={moduleName:"Locale",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");if(t)return(e,i,n)=>t({key:e,defaultValue:i,variableValues:n});const i=e.get("localeText");return(e,t,n)=>{var o;let s=i&&i[e];if(s&&n&&n.length){let e=0;for(;!(e>=n.length);){if(-1===s.indexOf("${variable}"))break;s=s.replace("${variable}",n[e++])}}return null!==(o=s)&&void 0!==o?o:t}}}]},Sp={moduleName:"AllCommunity",version:it,dependsOn:[Wu,Yu,qu,Ah,Tu,Eu,Ru,Lu,Pu,Nu,Fu,Au,du,cu,hu,lu,uu,pu,$u,_u,np,Ol,op,sp,rp,lp,ll,gp,Bu,Pc,vp,bp,fp,Cp,Oc,Qu,xp,wp,{moduleName:"RowAutoHeight",version:it,beans:[class extends Si{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1}setRowAutoHeight(e,t,i){e.__autoHeights||(e.__autoHeights={}),e.__autoHeights[i.getId()]=t,null!=t&&(null==e.__checkAutoHeightsDebounced&&(e.__checkAutoHeightsDebounced=$e(this,this.doCheckAutoHeights.bind(this,e),1)),e.__checkAutoHeightsDebounced())}checkAutoHeights(e){this.wasEverActive&&this.doCheckAutoHeights(e)}doCheckAutoHeights(e){var t;const i=e.__autoHeights;if(null==i)return;let n=!1,o=!0,s=0;const{visibleCols:r,colModel:a,colViewport:l,rowModel:d}=this.beans;r.autoHeightCols.forEach((t=>{let d=i[t.getId()];if(null==d){if(!a.colSpanActive)return void(n=!0);{let i=[];switch(t.getPinned()){case"left":i=r.getLeftColsForRow(e);break;case"right":i=r.getRightColsForRow(e);break;case null:i=l.getColsWithinViewport(e)}if(i.includes(t))return void(n=!0);d=-1}}else o=!1;d>s&&(s=d)})),n||((o||s<10)&&(s=Mt(this.beans,e).height),s!=e.rowHeight&&(e.setRowHeight(s),null===(t=d.onRowHeightChangedDebounced)||void 0===t||t.call(d)))}setupCellAutoHeight(e,t,i){const n=t.parentElement,{rowNode:o,column:s}=e,r=this.beans,a=Mt(r,o).height,l=d=>{if(e.editing)return;if(!e.isAlive()||!i.isAlive())return;const{paddingTop:c,paddingBottom:h,borderBottomWidth:u,borderTopWidth:p}=ue(n),g=c+h+u+p,m=t.offsetHeight+g;if(d<5){const e=Tt(r);if(!e||!e.contains(t)||0==m)return void window.setTimeout((()=>l(d+1)),0)}const v=Math.max(m,a);this.setRowAutoHeight(o,v,s)},d=()=>l(0);d();const c=Be(r,t,d);i.addDestroyFunc((()=>{c(),this.setRowAutoHeight(o,void 0,s)}))}setAutoHeightActive(e){this.active=e.list.some((e=>e.isVisible()&&e.isAutoHeight())),this.active&&(this.wasEverActive=!0)}}]},rl,ju]},Mp=i(989);const Dp=["key"];var kp,Ip=e.createContext({}),Ap=(e,t,i,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let s,r,a=!1;return o.then((e=>{a?t.destroyBean(e):(s=e,r=s.getGui(),i.appendChild(r),Tp(n,s))})),()=>{var e;a=!0,s&&(null===(e=r)||void 0===e||null===(e=e.parentElement)||void 0===e||e.removeChild(r),t.destroyBean(s),n&&Tp(n,void 0))}},Tp=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},Ep=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>null!=e&&""!==e)).join(" ")},Rp=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,i){if(!!this.classesMap[t]==i)return this;const n=new e;return n.classesMap=l({},this.classesMap),n.classesMap[t]=i,n}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},Lp=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),Pp=null===(kp=e.version)||void 0===kp?void 0:kp.split(".")[0],Np="16"===Pp||"17"===Pp;var Fp=!1;var Op=(e,t)=>{Np||!e||Fp?t():Mp.flushSync(t)};function Bp(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const n=[],o=[],s=new Map,r=new Map;for(let a=0;a<t.length;a++){const e=t[a];r.set(e.instanceId,e)}for(let a=0;a<e.length;a++){const t=e[a];s.set(t.instanceId,t),r.has(t.instanceId)&&n.push(t)}for(let a=0;a<t.length;a++){const e=t[a],i=e.instanceId;s.has(i)||o.push(e)}return n.length===e.length&&0===o.length?e:0===n.length&&o.length===t.length?t:0===n.length?o:0===o.length?n:[...n,...o]}var Gp=(0,e.forwardRef)(((t,i)=>{var n;const{registry:o,context:s}=(0,e.useContext)(Ip),r=(0,e.useRef)(null),a=(0,e.useRef)(null),d=(0,e.useRef)(null),c=(0,e.useRef)(null),h=(0,e.useRef)(null),u=(0,e.useRef)(),[p,g]=(0,e.useState)(),[m,v]=(0,e.useState)(),[f,y]=(0,e.useState)(),[b,C]=(0,e.useState)((()=>new Rp)),[x,w]=(0,e.useState)((()=>new Rp("ag-hidden"))),[S,M]=(0,e.useState)((()=>new Rp("ag-hidden"))),[D,k]=(0,e.useState)((()=>new Rp("ag-invisible")));(0,e.useImperativeHandle)(i,(()=>({refresh:()=>!1}))),(0,e.useLayoutEffect)((()=>Ap(p,s,a.current)),[p]);const I=(0,e.useCallback)((e=>{if(r.current=e,!e)return void(u.current=s.destroyBean(u.current));const i={setInnerRenderer:(e,t)=>{g(e),y(t)},setChildCount:e=>v(e),addOrRemoveCssClass:(e,t)=>C((i=>i.setClass(e,t))),setContractedDisplayed:e=>M((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>w((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>k((t=>t.setClass("ag-invisible",!e)))},n=o.createDynamicBean("groupCellRendererCtrl",!0);n&&(u.current=s.createBean(n),u.current.init(i,e,d.current,c.current,h.current,Gp,t))}),[]),A=(0,e.useMemo)((()=>"ag-cell-wrapper ".concat(b.toString())),[b]),T=(0,e.useMemo)((()=>"ag-group-expanded ".concat(x.toString())),[x]),E=(0,e.useMemo)((()=>"ag-group-contracted ".concat(S.toString())),[S]),R=(0,e.useMemo)((()=>"ag-group-checkbox ".concat(D.toString())),[D]),L=p&&p.componentFromFramework,P=L?p.componentClass:void 0,N=null==p&&null!=f,F=Ho(f,!0);return e.createElement("span",l({className:A,ref:I},t.colDef?{}:{role:null===(n=u.current)||void 0===n?void 0:n.getCellAriaRole()}),e.createElement("span",{className:T,ref:c}),e.createElement("span",{className:E,ref:h}),e.createElement("span",{className:R,ref:d}),e.createElement("span",{className:"ag-group-value",ref:a},N&&e.createElement(e.Fragment,null,F),L&&e.createElement(P,l({},p.params))),e.createElement("span",{className:"ag-group-child-count"},m))})),zp=Gp,_p=(0,e.createContext)({setMethods:()=>{}}),Vp=(0,e.memo)((t=>{const{initialProps:i,addUpdateCallback:o,CustomComponentClass:s,setMethods:r}=t,[a,d]=(0,e.useState)(i),{key:c}=a,h=n(a,Dp);return(0,e.useEffect)((()=>{o((e=>d(e)))}),[]),e.createElement(_p.Provider,{value:{setMethods:r}},e.createElement(s,l({key:c},h)))})),Hp=0;function Wp(){return"agPortalKey_".concat(++Hp)}var jp=class{constructor(e,t,i,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Wp(),this.portalKey=Wp(),this.instanceCreated=this.isStatelessComponent()?Rn.resolve(!1):new Rn((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout((()=>this.callMethod(e,t)));const n=i[e];return n?n.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Rn((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,l(l({},e),{},{key:this.key})),this.portal=(0,Mp.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(t,i){return(0,e.createElement)(t,i)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this["".concat(e,"Component")]}};function Up(e,t,i){e.forEach((e=>{const n=t[e];n&&(i[e]=n)}))}var Kp=class extends jp{constructor(){super(...arguments),this.awaitUpdateCallback=new Rn((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=Vp}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new Rn((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Up(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return l(l({},this.sourceParams),{},{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new Rn((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},Yp=class extends Kp{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Zp=class extends Kp{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Xp=class extends Kp{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:n}=this;return e.label=t,e.icon=i,e.shake=n,e}},qp=class extends Kp{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;!1===this.expectingNewMethods&&this.hasBeenActive&&(null===(t=this.providedMethods)||void 0===t?void 0:t.doesFilterPass)!==(null===e||void 0===e?void 0:e.doesFilterPass)&&setTimeout((()=>{this.sourceParams.filterChangedCallback()})),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then((()=>this.sourceParams.filterChangedCallback()))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function Qp(e,t){e.parentFilterInstance((i=>{(i.setModel(t)||Rn.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var Jp=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return l(l({},this.floatingFilterParams),{},{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Up(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Qp(this.floatingFilterParams,e)}},$p=class extends Kp{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Qp(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},eg=class extends Kp{refresh(e){this.sourceParams=e,this.refreshProps()}},tg=class extends Kp{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},ig=class extends Kp{refresh(e){this.sourceParams=e,this.refreshProps()}},ng=class extends Kp{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},og=class extends Kp{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function sg(){pt(231)}var rg=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout((()=>{this.waitForInstance(e,t,i)}))}}},ag=(0,e.memo)((t=>{let{ctrl:i}=t;const n=i.isAlive(),{context:o}=(0,e.useContext)(Ip),s=n?i.column.getColId():void 0,[r,a]=(0,e.useState)(),d=(0,e.useRef)(),c=(0,e.useRef)(null),h=(0,e.useRef)(null),u=(0,e.useRef)(null),p=(0,e.useRef)(),g=(0,e.useRef)();n&&!g.current&&(g.current=new In((()=>c.current)));const m=(0,e.useCallback)((e=>{if(c.current=e,d.current=e?o.createBean(new Dn):o.destroyBean(d.current),!e||!n)return;const t={setWidth:e=>{c.current&&(c.current.style.width=e)},addOrRemoveCssClass:(e,t)=>g.current.addOrRemoveCssClass(e,t),setAriaSort:e=>{c.current&&(e?U(c.current,e):K(c.current))},setUserCompDetails:e=>a(e),getUserCompInstance:()=>p.current||void 0};i.setComp(t,e,h.current,u.current,d.current);const s=i.getSelectAllGui();var r;s&&(null===(r=h.current)||void 0===r||r.insertAdjacentElement("afterend",s),d.current.addDestroyFunc((()=>s.remove())))}),[]);(0,e.useLayoutEffect)((()=>Ap(r,o,u.current,p)),[r]),(0,e.useEffect)((()=>{i.setDragSource(c.current)}),[r]);const v=(0,e.useMemo)((()=>!!((null===r||void 0===r?void 0:r.componentFromFramework)&&Lp(r.componentClass))),[r]),f=r&&r.componentFromFramework,y=r&&r.componentClass;return e.createElement("div",{ref:m,className:"ag-header-cell","col-id":s,role:"columnheader"},e.createElement("div",{ref:h,className:"ag-header-cell-resize",role:"presentation"}),e.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&v&&e.createElement(y,l({},r.params)),f&&!v&&e.createElement(y,l(l({},r.params),{},{ref:p}))))})),lg=(0,e.memo)((t=>{let{ctrl:i}=t;const{context:n,gos:o}=(0,e.useContext)(Ip),[s,r]=(0,e.useState)((()=>new Rp("ag-header-cell","ag-floating-filter"))),[a,d]=(0,e.useState)((()=>new Rp)),[c,h]=(0,e.useState)((()=>new Rp("ag-floating-filter-button","ag-hidden"))),[u,p]=(0,e.useState)("false"),[g,m]=(0,e.useState)(),[,v]=(0,e.useState)(1),f=(0,e.useRef)(),y=(0,e.useRef)(null),b=(0,e.useRef)(null),C=(0,e.useRef)(null),x=(0,e.useRef)(null),w=(0,e.useRef)(),S=(0,e.useRef)(),M=e=>{null!=e&&w.current&&w.current(e)},D=(0,e.useCallback)((e=>{if(y.current=e,f.current=e?n.createBean(new Dn):n.destroyBean(f.current),!e)return;S.current=new Rn((e=>{w.current=e}));const t={addOrRemoveCssClass:(e,t)=>r((i=>i.setClass(e,t))),addOrRemoveBodyCssClass:(e,t)=>d((i=>i.setClass(e,t))),setButtonWrapperDisplayed:e=>{h((t=>t.setClass("ag-hidden",!e))),p(e?"false":"true")},setWidth:e=>{y.current&&(y.current.style.width=e)},setCompDetails:e=>m(e),getFloatingFilterComp:()=>S.current?S.current:null,setMenuIcon:e=>{var t;return null===(t=x.current)||void 0===t?void 0:t.appendChild(e)}};i.setComp(t,e,x.current,b.current,f.current)}),[]);(0,e.useLayoutEffect)((()=>Ap(g,n,b.current,M)),[g]);const k=(0,e.useMemo)((()=>s.toString()),[s]),I=(0,e.useMemo)((()=>a.toString()),[a]),A=(0,e.useMemo)((()=>c.toString()),[c]),T=(0,e.useMemo)((()=>!!(g&&g.componentFromFramework&&Lp(g.componentClass))),[g]),E=(0,e.useMemo)((()=>o.get("reactiveCustomComponents")),[]),R=(0,e.useMemo)((()=>{if(g){if(E){const e=new Jp(g.params,(()=>v((e=>e+1))));return M(e),e}g.componentFromFramework&&sg()}}),[g]),L=null===R||void 0===R?void 0:R.getProps(),P=g&&g.componentFromFramework,N=g&&g.componentClass;return e.createElement("div",{ref:D,className:k,role:"gridcell"},e.createElement("div",{ref:b,className:I,role:"presentation"},P&&!E&&e.createElement(N,l(l({},g.params),{},{ref:T?()=>{}:M})),P&&E&&e.createElement(_p.Provider,{value:{setMethods:e=>R.setMethods(e)}},e.createElement(N,l({},L)))),e.createElement("div",{ref:C,"aria-hidden":u,className:A,role:"presentation"},e.createElement("button",{ref:x,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})),dg=(0,e.memo)((t=>{let{ctrl:i}=t;const{context:n}=(0,e.useContext)(Ip),[o,s]=(0,e.useState)((()=>new Rp)),[r,a]=(0,e.useState)((()=>new Rp)),[d,c]=(0,e.useState)("false"),[h,u]=(0,e.useState)(),[p,g]=(0,e.useState)(),m=(0,e.useMemo)((()=>i.column.getUniqueId()),[]),v=(0,e.useRef)(),f=(0,e.useRef)(null),y=(0,e.useRef)(null),b=(0,e.useRef)(null),C=(0,e.useRef)(),x=(0,e.useCallback)((e=>{if(f.current=e,v.current=e?n.createBean(new Dn):n.destroyBean(v.current),!e)return;const t={setWidth:e=>{f.current&&(f.current.style.width=e)},addOrRemoveCssClass:(e,t)=>s((i=>i.setClass(e,t))),setHeaderWrapperHidden:e=>{const t=b.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=b.current;t&&(null!=e?t.style.setProperty("max-height","".concat(e,"px")):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>g(e),setResizableDisplayed:e=>{a((t=>t.setClass("ag-hidden",!e))),c(e?"false":"true")},setAriaExpanded:e=>u(e),getUserCompInstance:()=>C.current||void 0};i.setComp(t,e,y.current,b.current,v.current)}),[]);(0,e.useLayoutEffect)((()=>Ap(p,n,b.current)),[p]),(0,e.useEffect)((()=>{f.current&&i.setDragSource(f.current)}),[p]);const w=(0,e.useMemo)((()=>!!((null===p||void 0===p?void 0:p.componentFromFramework)&&Lp(p.componentClass))),[p]),S=(0,e.useMemo)((()=>"ag-header-group-cell "+o.toString()),[o]),M=(0,e.useMemo)((()=>"ag-header-cell-resize "+r.toString()),[r]),D=p&&p.componentFromFramework,k=p&&p.componentClass;return e.createElement("div",{ref:x,className:S,"col-id":m,role:"columnheader","aria-expanded":h},e.createElement("div",{ref:b,className:"ag-header-cell-comp-wrapper",role:"presentation"},D&&w&&e.createElement(k,l({},p.params)),D&&!w&&e.createElement(k,l(l({},p.params),{},{ref:C}))),e.createElement("div",{ref:y,"aria-hidden":d,className:M}))})),cg=(0,e.memo)((t=>{let{ctrl:i}=t;const{context:n}=(0,e.useContext)(Ip),{topOffset:o,rowHeight:s}=(0,e.useMemo)((()=>i.getTopAndHeight()),[]),r=i.getAriaRowIndex(),a=i.headerRowClass,[l,d]=(0,e.useState)((()=>s+"px")),[c,h]=(0,e.useState)((()=>o+"px")),u=(0,e.useRef)(null),p=(0,e.useRef)(null),[g,m]=(0,e.useState)((()=>i.getHeaderCtrls())),v=(0,e.useRef)(),f=(0,e.useRef)(null),y=(0,e.useCallback)((e=>{if(f.current=e,v.current=e?n.createBean(new Dn):n.destroyBean(v.current),!e)return;const t={setHeight:e=>d(e),setTop:e=>h(e),setHeaderCtrls:(e,t,i)=>{p.current=u.current,u.current=e;const n=Bp(p.current,e,t);n!==p.current&&Op(i,(()=>m(n)))},setWidth:e=>{f.current&&(f.current.style.width=e)}};i.setComp(t,v.current,!1)}),[]),b=(0,e.useMemo)((()=>({height:l,top:c})),[l,c]),C=(0,e.useCallback)((t=>{switch(i.type){case"group":return e.createElement(dg,{ctrl:t,key:t.instanceId});case"filter":return e.createElement(lg,{ctrl:t,key:t.instanceId});default:return e.createElement(ag,{ctrl:t,key:t.instanceId})}}),[]);return e.createElement("div",{ref:y,className:a,role:"row",style:b,"aria-rowindex":r},g.map(C))})),hg=(0,e.memo)((t=>{let{pinned:i}=t;const[n,o]=(0,e.useState)(!0),[s,r]=(0,e.useState)([]),{context:a}=(0,e.useContext)(Ip),l=(0,e.useRef)(null),d=(0,e.useRef)(null),c=(0,e.useRef)(),h="left"===i,u="right"===i,p=!h&&!u,g=(0,e.useCallback)((e=>{if(l.current=e,c.current=e?a.createBean(new zr(i)):a.destroyBean(c.current),!e)return;const t={setDisplayed:o,setCtrls:e=>r(e),setCenterWidth:e=>{d.current&&(d.current.style.width=e)},setViewportScrollLeft:e=>{l.current&&(l.current.scrollLeft=e)},setPinnedContainerWidth:e=>{l.current&&(l.current.style.width=e,l.current.style.minWidth=e,l.current.style.maxWidth=e)}};c.current.setComp(t,l.current)}),[]),m=n?"":"ag-hidden",v=()=>s.map((t=>e.createElement(cg,{ctrl:t,key:t.instanceId})));return e.createElement(e.Fragment,null,h&&e.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!n,role:"rowgroup"},v()),u&&e.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!n,role:"rowgroup"},v()),p&&e.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"presentation"},e.createElement("div",{ref:d,className:"ag-header-container",role:"rowgroup"},v())))})),ug=(0,e.memo)((()=>{const[t,i]=(0,e.useState)((()=>new Rp)),[n,o]=(0,e.useState)(),{context:s}=(0,e.useContext)(Ip),r=(0,e.useRef)(null),a=(0,e.useRef)(),l=(0,e.useCallback)((e=>{if(r.current=e,a.current=e?s.createBean(new Dr):s.destroyBean(a.current),!e)return;const t={addOrRemoveCssClass:(e,t)=>i((i=>i.setClass(e,t))),setHeightAndMinHeight:e=>o(e)};a.current.setComp(t,e,e)}),[]),d=(0,e.useMemo)((()=>"ag-header "+t.toString()),[t]),c=(0,e.useMemo)((()=>({height:n,minHeight:n})),[n]);return e.createElement("div",{ref:l,className:d,style:c,role:"presentation"},e.createElement(hg,{pinned:"left"}),e.createElement(hg,{pinned:null}),e.createElement(hg,{pinned:"right"}))})),pg=(t,i)=>{(0,e.useEffect)((()=>{const e=i.current;if(e){const i=e.parentElement;if(i){const n=document.createComment(t);return i.insertBefore(n,e),()=>{i.removeChild(n)}}}}),[t])},gg=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Rn((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return l(l({},this.cellEditorParams),{},{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Up(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},mg=(0,e.memo)((t=>{const[i,n]=(0,e.useState)(),{context:o,popupSvc:s,localeSvc:r,gos:a,editSvc:l}=(0,e.useContext)(Ip);return(t=>{const i=(0,e.useRef)(t),n=(0,e.useRef)(),o=(0,e.useRef)(!1),s=(0,e.useRef)(!1),[,r]=(0,e.useState)(0);o.current&&(s.current=!0),(0,e.useEffect)((()=>(o.current||(n.current=i.current(),o.current=!0),r((e=>e+1)),()=>{var e;s.current&&(null===(e=n.current)||void 0===e||e.call(n))})),[])})((()=>{var e,i;const{editDetails:d,cellCtrl:c,eParentCell:h}=t,{compDetails:u}=d,p=a.get("stopEditingWhenCellsLoseFocus"),g=o.createBean(l.createPopupEditorWrapper(u.params)),m=g.getGui();if(t.jsChildComp){const e=t.jsChildComp.getGui();e&&m.appendChild(e)}const{column:v,rowNode:f}=c,y={column:v,rowNode:f,type:"popupCellEditor",eventSource:h,ePopup:m,position:d.popupPosition,keepWithinBounds:!0},b=null===s||void 0===s?void 0:s.positionPopupByComponent.bind(s,y),C=w(r),x=null===s||void 0===s?void 0:s.addPopup({modal:p,eChild:m,closeOnEsc:!0,closedCallback:()=>{c.onPopupEditorClosed()},anchorToElement:h,positionCallback:b,ariaLabel:C("ariaLabelCellEditor","Cell Editor")}),S=x?x.hideFunc:void 0;return n(g),null===(e=t.jsChildComp)||void 0===e||null===(i=e.afterGuiAttached)||void 0===i||i.call(e),()=>{null===S||void 0===S||S(),o.destroyBean(g)}})),e.createElement(e.Fragment,null,i&&t.wrappedContent&&(0,Mp.createPortal)(t.wrappedContent,i.getGui()))})),vg=(t,i,n,o,s,r)=>{const{context:a}=(0,e.useContext)(Ip),l=(0,e.useCallback)((()=>{const e=s.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),a.destroyBean(e),s.current=void 0}),[]);(0,e.useEffect)((()=>{const e=null!=t,o=(null===t||void 0===t?void 0:t.compDetails)&&!t.compDetails.componentFromFramework;if(!(e&&o&&!(i&&null==n)))return void l();const a=t.compDetails;if(s.current){const e=s.current,i=!!(null!=e.refresh&&0==t.force)&&e.refresh(a.params);if(!0===i||void 0===i)return;l()}a.newAgStackInstance().then((e=>{if(!e)return;const t=e.getGui();if(!t)return;(i?n:r.current).appendChild(t),s.current=e}))}),[t,i,o]),(0,e.useEffect)((()=>l),[])},fg=(t,i,n)=>{const o=t.compProxy;return e.createElement(e.Fragment,null,o?((t,i,n)=>{const{compProxy:o}=t;n(o);const s=o.getProps(),r=Lp(i);return e.createElement(_p.Provider,{value:{setMethods:e=>o.setMethods(e)}},r?e.createElement(i,l({},s)):e.createElement(i,l(l({},s),{},{ref:e=>o.setRef(e)})))})(t,i,n):e.createElement(i,l(l({},t.compDetails.params),{},{ref:n})))},yg=(0,e.memo)((t=>{let{cellCtrl:i,printLayout:n,editingRow:o}=t;const{context:s}=(0,e.useContext)(Ip),{colIdSanitised:r,instanceId:a}=i,d=(0,e.useRef)(),[c,h]=(0,e.useState)((()=>i.isCellRenderer()?void 0:{compDetails:void 0,value:i.getValueToDisplay(),force:!1})),[u,p]=(0,e.useState)(),[g,m]=(0,e.useState)(1),[v,f]=(0,e.useState)(),[y,b]=(0,e.useState)(!1),[C,x]=(0,e.useState)(!1),[w,S]=(0,e.useState)(!1),[M,D]=(0,e.useState)(),k=(0,e.useMemo)((()=>i.isForceWrapper()),[i]),I=(0,e.useMemo)((()=>i.getCellAriaRole()),[i]),A=(0,e.useRef)(null),T=(0,e.useRef)(null),E=(0,e.useRef)(),R=(0,e.useRef)(),L=(0,e.useRef)(),P=(0,e.useRef)([]),N=(0,e.useRef)(),[F,O]=(0,e.useState)(0),B=(0,e.useCallback)((e=>{N.current=e,O((e=>e+1))}),[]),G=k||null!=c&&(y||w||C),z=(0,e.useCallback)((e=>{if(R.current=e,e){const t=e.isCancelBeforeStart&&e.isCancelBeforeStart();setTimeout((()=>{t?(i.stopEditing(!0),i.focusCell(!0)):i.cellEditorAttached()}))}}),[i]),_=(0,e.useRef)();_.current||(_.current=new In((()=>A.current))),vg(c,G,N.current,F,E,A);const V=(0,e.useRef)();(0,e.useLayoutEffect)((()=>{var e;const t=V.current,i=c;if(V.current=c,null==t||null==t.compDetails||null==i||null==i.compDetails)return;const n=t.compDetails,o=i.compDetails;if(n.componentClass!=o.componentClass)return;if(null==(null===(e=T.current)||void 0===e?void 0:e.refresh))return;1!=T.current.refresh(o.params)&&m((e=>e+1))}),[c]),(0,e.useLayoutEffect)((()=>{if(!(u&&!u.compDetails.componentFromFramework))return;const e=u.compDetails,t=!0===u.popup,i=e.newAgStackInstance();return i.then((e=>{if(!e)return;const i=e.getGui();if(z(e),!t){const t=(k?L:A).current;null===t||void 0===t||t.appendChild(i),e.afterGuiAttached&&e.afterGuiAttached()}D(e)})),()=>{i.then((e=>{var t;const i=e.getGui();s.destroyBean(e),z(void 0),D(void 0),null===i||void 0===i||null===(t=i.parentElement)||void 0===t||t.removeChild(i)}))}}),[u]);const H=(0,e.useCallback)((e=>{if(L.current=e,!e)return P.current.forEach((e=>e())),void(P.current=[]);const t=t=>{if(t){const i=t.getGui();e.insertAdjacentElement("afterbegin",i),P.current.push((()=>{s.destroyBean(t),we(i)}))}return t};if(y){t(i.createSelectionCheckbox())}w&&t(i.createDndSource()),C&&t(i.createRowDragComp())}),[i,s,w,C,y]),W=(0,e.useCallback)((e=>{if(A.current=e,d.current=e?s.createBean(new Dn):s.destroyBean(d.current),!e||!i)return;const t={addOrRemoveCssClass:(e,t)=>_.current.addOrRemoveCssClass(e,t),setUserStyles:e=>f(e),getFocusableElement:()=>A.current,setIncludeSelection:e=>b(e),setIncludeRowDrag:e=>x(e),setIncludeDndSource:e=>S(e),getCellEditor:()=>R.current||null,getCellRenderer:()=>{var e;return null!==(e=T.current)&&void 0!==e?e:E.current},getParentOfValue:()=>{var e,t;return null!==(e=null!==(t=N.current)&&void 0!==t?t:L.current)&&void 0!==e?e:A.current},setRenderDetails:(e,t,i)=>{h((n=>(null===n||void 0===n?void 0:n.compDetails)!==e||(null===n||void 0===n?void 0:n.value)!==t||(null===n||void 0===n?void 0:n.force)!==i?{value:t,compDetails:e,force:i}:n))},setEditDetails:(e,t,i,n)=>{if(e){let o;n?o=new gg(e.params,(()=>m((e=>e+1)))):e.componentFromFramework&&sg(),p({compDetails:e,popup:t,popupPosition:i,compProxy:o}),t||h(void 0)}else p((e=>{null!==e&&void 0!==e&&e.compProxy&&(R.current=void 0)}))}},r=L.current||void 0;i.setComp(t,e,r,n,o,d.current)}),[]),j=(0,e.useMemo)((()=>{var e;return!!((null===c||void 0===c||null===(e=c.compDetails)||void 0===e?void 0:e.componentFromFramework)&&Lp(c.compDetails.componentClass))}),[c]);(0,e.useLayoutEffect)((()=>{A.current&&(_.current.addOrRemoveCssClass("ag-cell-value",!G),_.current.addOrRemoveCssClass("ag-cell-inline-editing",!!u&&!u.popup),_.current.addOrRemoveCssClass("ag-cell-popup-editing",!!u&&!!u.popup),_.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!u||!!u.popup),i.setInlineEditingCss(),i.shouldRestoreFocus()&&!i.editing&&A.current.focus({preventScroll:!0}))}));const U=()=>e.createElement(e.Fragment,null,null!=c&&((t,i,n,o,s,r,a)=>{const{compDetails:d,value:c}=t,h=!d,u=d&&d.componentFromFramework,p=d&&d.componentClass,g=null!==c&&void 0!==c&&c.toString?c.toString():c,m=()=>e.createElement(e.Fragment,null,h&&e.createElement(e.Fragment,null,g),u&&!r&&e.createElement(p,l(l({},d.params),{},{key:i,ref:o})),u&&r&&e.createElement(p,l(l({},d.params),{},{key:i})));return e.createElement(e.Fragment,null,s?e.createElement("span",{role:"presentation",id:"cell-".concat(n),className:"ag-cell-value",ref:a},m()):m())})(c,g,a,T,G,j,B),null!=u&&((t,i,n,o,s)=>{const r=t.compDetails,a=r.componentClass,l=r.componentFromFramework&&!t.popup,d=r.componentFromFramework&&t.popup,c=!r.componentFromFramework&&t.popup;return e.createElement(e.Fragment,null,l&&fg(t,a,i),d&&e.createElement(mg,{editDetails:t,cellCtrl:o,eParentCell:n,wrappedContent:fg(t,a,i)}),c&&s&&e.createElement(mg,{editDetails:t,cellCtrl:o,eParentCell:n,jsChildComp:s}))})(u,z,A.current,i,M)),K=(0,e.useCallback)((()=>i.onFocusOut()),[]);return e.createElement("div",{ref:W,style:v,role:I,"col-id":r,onBlur:K},G?e.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:H},U()):U())})),bg=(0,e.memo)((t=>{let{rowCtrl:i,containerType:n}=t;const{context:o,gos:s}=(0,e.useContext)(Ip),r=(0,e.useRef)(),a=(0,e.useRef)(i.getDomOrder()),d=i.isFullWidth(),c=i.rowNode.displayed,[h,u]=(0,e.useState)((()=>c?i.rowNode.getRowIndexString():null)),[p,g]=(0,e.useState)((()=>i.rowId)),[m,v]=(0,e.useState)((()=>i.businessKey)),[f,y]=(0,e.useState)((()=>i.rowStyles)),b=(0,e.useRef)(null),C=(0,e.useRef)(null),[x,w]=(0,e.useState)((()=>null)),[S,M]=(0,e.useState)(),[D,k]=(0,e.useState)((()=>c?i.getInitialRowTop(n):void 0)),[I,A]=(0,e.useState)((()=>c?i.getInitialTransform(n):void 0)),T=(0,e.useRef)(null),E=(0,e.useRef)(),R=(0,e.useRef)(!1),[L,P]=(0,e.useState)(0);(0,e.useEffect)((()=>{var e;if(R.current||!S||L>10)return;const t=null===(e=T.current)||void 0===e?void 0:e.firstChild;t?(i.setupDetailRowAutoHeight(t),R.current=!0):P((e=>e+1))}),[S,L]);const N=(0,e.useRef)();N.current||(N.current=new In((()=>T.current)));const F=(0,e.useCallback)((e=>{if(T.current=e,r.current=e?o.createBean(new Dn):o.destroyBean(r.current),!e)return void i.unsetComp(n);if(!i.isAlive())return;const t={setTop:k,setTransform:A,addOrRemoveCssClass:(e,t)=>N.current.addOrRemoveCssClass(e,t),setDomOrder:e=>a.current=e,setRowIndex:u,setRowId:g,setRowBusinessKey:v,setUserStyles:y,setCellCtrls:(e,t)=>{C.current=b.current,b.current=e;const i=Bp(C.current,e,a.current);i!==C.current&&Op(t,(()=>w(i)))},showFullWidth:e=>M(e),getFullWidthCellRenderer:()=>E.current,refreshFullWidth:e=>_.current?(M((t=>l(l({},t),{},{params:e()}))),!0):!(!E.current||!E.current.refresh)&&E.current.refresh(e())};i.setComp(t,e,n,r.current)}),[]);(0,e.useLayoutEffect)((()=>Ap(S,o,T.current,E)),[S]);const O=(0,e.useMemo)((()=>{const e={top:D,transform:I};return Object.assign(e,f),e}),[D,I,f]),B=d&&(null===S||void 0===S?void 0:S.componentFromFramework),G=!d&&null!=x,z=(0,e.useMemo)((()=>!!((null===S||void 0===S?void 0:S.componentFromFramework)&&Lp(S.componentClass))),[S]),_=(0,e.useRef)(!1);(0,e.useEffect)((()=>{_.current=z&&!!S&&!!s.get("reactiveCustomComponents")}),[z,S]);return e.createElement("div",{ref:F,role:"row",style:O,"row-index":h,"row-id":p,"row-business-key":m},G&&(null===x||void 0===x?void 0:x.map((t=>e.createElement(yg,{cellCtrl:t,editingRow:i.editing,printLayout:i.printLayout,key:t.instanceId})))),B&&(()=>{const t=S.componentClass;return e.createElement(e.Fragment,null,z?e.createElement(t,l({},S.params)):e.createElement(t,l(l({},S.params),{},{ref:E})))})())})),Cg=(0,e.memo)((t=>{let{name:i}=t;const{context:n}=(0,e.useContext)(Ip),o=(0,e.useMemo)((()=>er(i)),[i]),s=(0,e.useRef)(null),r=(0,e.useRef)(null),a=(0,e.useRef)([]),l=(0,e.useRef)([]),[d,c]=(0,e.useState)((()=>[])),h=(0,e.useRef)(!1),u=(0,e.useRef)(),p=(0,e.useMemo)((()=>Ep(o.viewport)),[o]),g=(0,e.useMemo)((()=>Ep(o.container)),[o]),m="center"===o.type;pg(" AG Row Container "+i+" ",m?s:r);const v=(0,e.useCallback)((()=>m?null!=s.current&&null!=r.current:null!=r.current),[]),f=(0,e.useCallback)((()=>m?null==s.current&&null==r.current:null==r.current),[]),y=(0,e.useCallback)((()=>{if(f()&&(u.current=n.destroyBean(u.current)),v()){const e=e=>{const t=Bp(l.current,a.current,h.current);t!==l.current&&(l.current=t,Op(e,(()=>c(t))))},t={setHorizontalScroll:e=>{s.current&&(s.current.scrollLeft=e)},setViewportHeight:e=>{s.current&&(s.current.style.height=e)},setRowCtrls:t=>{let{rowCtrls:i,useFlushSync:n}=t;const o=!!n&&a.current.length>0&&i.length>0;a.current=i,e(o)},setDomOrder:t=>{h.current!=t&&(h.current=t,e(!1))},setContainerWidth:e=>{r.current&&(r.current.style.width=e)},setOffsetTop:e=>{r.current&&(r.current.style.transform="translateY(".concat(e,")"))}};u.current=n.createBean(new dr(i)),u.current.setComp(t,r.current,s.current)}}),[v,f]),b=(0,e.useCallback)((e=>{r.current=e,y()}),[y]),C=(0,e.useCallback)((e=>{s.current=e,y()}),[y]),x=()=>e.createElement("div",{className:g,ref:b,role:"rowgroup"},d.map((t=>e.createElement(bg,{rowCtrl:t,containerType:o.type,key:t.instanceId}))));return e.createElement(e.Fragment,null,m?e.createElement("div",{className:p,ref:C,role:"presentation"},x()):x())})),xg=(0,e.memo)((()=>{const t=(0,e.useContext)(Ip),{context:i,overlays:n}=t,[o,s]=(0,e.useState)(""),[r,a]=(0,e.useState)(0),[l,d]=(0,e.useState)(0),[c,h]=(0,e.useState)("0px"),[u,p]=(0,e.useState)("0px"),[g,m]=(0,e.useState)("100%"),[v,f]=(0,e.useState)("0px"),[y,b]=(0,e.useState)("0px"),[C,x]=(0,e.useState)("100%"),[w,S]=(0,e.useState)(""),[M,D]=(0,e.useState)(""),[k,I]=(0,e.useState)(null),[A,T]=(0,e.useState)(""),[E,R]=(0,e.useState)(null),[L,P]=(0,e.useState)("ag-layout-normal"),N=(0,e.useRef)();N.current||(N.current=new In((()=>F.current)));const F=(0,e.useRef)(null),O=(0,e.useRef)(null),B=(0,e.useRef)(null),G=(0,e.useRef)(null),z=(0,e.useRef)(null),V=(0,e.useRef)(null),W=(0,e.useRef)(null),j=(0,e.useRef)([]),U=(0,e.useRef)([]);pg(" AG Grid Body ",F),pg(" AG Pinned Top ",O),pg(" AG Sticky Top ",B),pg(" AG Middle ",V),pg(" AG Pinned Bottom ",W);const K=(0,e.useCallback)((e=>{if(F.current=e,!e)return j.current=i.destroyBeans(j.current),U.current.forEach((e=>e())),void(U.current=[]);if(!i)return;const o=(e,t)=>{e.appendChild(t),U.current.push((()=>e.removeChild(t)))},r=(e,t,n)=>{o(e,document.createComment(n)),o(e,(e=>{const t=i.createBean(new e);return j.current.push(t),t})(t).getGui())};r(e,pr," AG Fake Horizontal Scroll ");const l=null===n||void 0===n?void 0:n.getOverlayWrapperCompClass();l&&r(e,l," AG Overlay Wrapper "),z.current&&r(z.current,mr," AG Fake Vertical Scroll ");const c={setRowAnimationCssOnBodyViewport:s,setColumnCount:e=>{F.current&&H(F.current,e)},setRowCount:e=>{F.current&&_(F.current,e)},setTopHeight:a,setBottomHeight:d,setStickyTopHeight:h,setStickyTopTop:p,setStickyTopWidth:m,setTopDisplay:S,setBottomDisplay:D,setColumnMovingCss:(e,t)=>N.current.addOrRemoveCssClass(e,t),updateLayoutClasses:P,setAlwaysVerticalScrollClass:I,setPinnedTopBottomOverflowY:T,setCellSelectableCss:(e,t)=>R(t?e:null),setBodyViewportWidth:e=>{V.current&&(V.current.style.width=e)},registerBodyViewportResizeListener:e=>{if(V.current){const i=Be(t,V.current,e);U.current.push((()=>i()))}},setStickyBottomHeight:f,setStickyBottomBottom:b,setStickyBottomWidth:x,setGridRootRole:t=>e.setAttribute("role",t)},u=i.createBean(new hr);j.current.push(u),u.setComp(c,e,V.current,O.current,W.current,B.current,G.current)}),[]),Y=(0,e.useMemo)((()=>Ep("ag-root","ag-unselectable",L)),[L]),Z=(0,e.useMemo)((()=>Ep("ag-body-viewport",o,L,k,E)),[o,L,k,E]),X=(0,e.useMemo)((()=>Ep("ag-body",L)),[L]),q=(0,e.useMemo)((()=>Ep("ag-floating-top",E)),[E]),Q=(0,e.useMemo)((()=>Ep("ag-sticky-top",E)),[E]),J=(0,e.useMemo)((()=>Ep("ag-sticky-bottom","0px"===v?"ag-hidden":null,E)),[E,v]),$=(0,e.useMemo)((()=>Ep("ag-floating-bottom",E)),[E]),ee=(0,e.useMemo)((()=>({height:r,minHeight:r,display:w,overflowY:A})),[r,w,A]),te=(0,e.useMemo)((()=>({height:c,top:u,width:g})),[c,u,g]),ie=(0,e.useMemo)((()=>({height:v,bottom:y,width:C})),[v,y,C]),ne=(0,e.useMemo)((()=>({height:l,minHeight:l,display:M,overflowY:A})),[l,M,A]),oe=t=>e.createElement(Cg,{name:t,key:"".concat(t,"-container")}),se=t=>{let{section:i,children:n,className:o,style:s}=t;return e.createElement("div",{ref:i,className:o,role:"presentation",style:s},n.map(oe))};return e.createElement("div",{ref:K,className:Y},e.createElement(ug,null),se({section:O,className:q,style:ee,children:["topLeft","topCenter","topRight","topFullWidth"]}),e.createElement("div",{className:X,ref:z,role:"presentation"},se({section:V,className:Z,children:["left","center","right","fullWidth"]})),se({section:B,className:Q,style:te,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),se({section:G,className:J,style:ie,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),se({section:W,className:$,style:ne,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))})),wg=(0,e.forwardRef)(((t,i)=>{const{children:n,eFocusableElement:o,onTabKeyDown:s,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:a}=t,{context:l}=(0,e.useContext)(Ip),d=(0,e.useRef)(null),c=(0,e.useRef)(null),h=(0,e.useRef)(),u=e=>{const t=null==e?void 0:parseInt(e,10).toString();[d,c].forEach((e=>{var i,n;void 0===t?null===(i=e.current)||void 0===i||i.removeAttribute("tabindex"):null===(n=e.current)||void 0===n||n.setAttribute("tabindex",t)}))};(0,e.useImperativeHandle)(i,(()=>({forceFocusOutOfContainer(e){var t;null===(t=h.current)||void 0===t||t.forceFocusOutOfContainer(e)}})));const p=(0,e.useCallback)((()=>{const e=d.current,t=c.current;if(e||t){if(e&&t){const i={setTabIndex:u};h.current=l.createBean(new Ta({comp:i,eTopGuard:e,eBottomGuard:t,eFocusableElement:o,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>r.focusInnerElement(e)}))}}else h.current=l.destroyBean(h.current)}),[]),g=(0,e.useCallback)((e=>{d.current=e,p()}),[p]),m=(0,e.useCallback)((e=>{c.current=e,p()}),[p]),v=t=>{const i="top"===t?Ia:Aa;return e.createElement("div",{className:"".concat(ka," ").concat(i),role:"presentation",ref:"top"===t?g:m})};return e.createElement(e.Fragment,null,v("top"),n,v("bottom"))})),Sg=(0,e.memo)(wg),Mg=(0,e.memo)((t=>{let{context:i}=t;const[n,o]=(0,e.useState)(""),[s,r]=(0,e.useState)(""),[a,l]=(0,e.useState)(null),[d,c]=(0,e.useState)(null),[h,u]=(0,e.useState)(!1),[p,g]=(0,e.useState)(),m=(0,e.useRef)(),v=(0,e.useRef)(null),f=(0,e.useRef)(),[y,b]=(0,e.useState)(null),C=(0,e.useRef)((()=>{})),x=(0,e.useRef)(),w=(0,e.useRef)([]),S=(0,e.useCallback)((()=>{}),[]),M=(0,e.useMemo)((()=>i.isDestroyed()?null:i.getBeans()),[i]);pg(" AG Grid ",v);const D=(0,e.useCallback)((e=>{if(v.current=e,m.current=e?i.createBean(new Ya):i.destroyBean(m.current),!e||i.isDestroyed())return;const t=m.current;C.current=t.focusInnerElement.bind(t);const n={destroyGridUi:()=>{},setRtlClass:o,forceFocusOutOfContainer:e=>{var t,i;e||null===(t=x.current)||void 0===t||!t.isDisplayed()?null===(i=f.current)||void 0===i||i.forceFocusOutOfContainer(e):x.current.forceFocusOutOfContainer(e)},updateLayoutClasses:r,getFocusableContainers:()=>{var e;const t=[],i=null===(e=v.current)||void 0===e?void 0:e.querySelector(".ag-root");return i&&t.push({getGui:()=>i}),w.current.forEach((e=>{e.isDisplayed()&&t.push(e)})),t},setCursor:l,setUserSelect:c};t.setComp(n,e,e),u(!0)}),[]);(0,e.useEffect)((()=>{const e=m.current,t=v.current;if(!p||!M||!e||!y||!t)return;const n=[],{watermarkSelector:o,paginationSelector:s,sideBarSelector:r,statusBarSelector:a,gridHeaderDropZonesSelector:l}=e.getOptionalSelectors(),d=[];if(l){const e=i.createBean(new l.component),o=e.getGui();t.insertAdjacentElement("afterbegin",o),d.push(o),n.push(e)}if(r){const e=i.createBean(new r.component),t=e.getGui(),o=y.querySelector(".ag-tab-guard-bottom");o&&(o.insertAdjacentElement("beforebegin",t),d.push(t)),n.push(e),w.current.push(e)}const c=e=>{const o=i.createBean(new e),s=o.getGui();return t.insertAdjacentElement("beforeend",s),d.push(s),n.push(o),o};if(a&&c(a.component),s){const e=c(s.component);x.current=e,w.current.push(e)}return o&&c(o.component),()=>{i.destroyBeans(n),d.forEach((e=>{var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e)}))}}),[p,y,M]);const k=(0,e.useMemo)((()=>Ep("ag-root-wrapper",n,s)),[n,s]),I=(0,e.useMemo)((()=>Ep("ag-root-wrapper-body","ag-focus-managed",s)),[s]),A=(0,e.useMemo)((()=>({userSelect:null!=d?d:"",WebkitUserSelect:null!=d?d:"",cursor:null!=a?a:""})),[d,a]),T=(0,e.useCallback)((e=>{f.current=e,g(null!==e)}),[]);return e.createElement("div",{ref:D,className:k,style:A,role:"presentation"},e.createElement("div",{className:I,ref:b,role:"presentation"},h&&y&&M&&e.createElement(Ip.Provider,{value:M},e.createElement(Sg,{ref:T,eFocusableElement:y,onTabKeyDown:S,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0},e.createElement(xg,null)))))})),Dg=class extends Si{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every((e=>e.getAllCtrls().every((e=>e.areCellsRendered()))))}},kg=new Set(Object.keys({gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,setGridApi:void 0,componentWrappingElement:void 0,maxComponentCreationTimeMs:void 0,children:void 0})),Ig=t=>{var i,n;const o=(0,e.useRef)(),s=(0,e.useRef)(null),r=(0,e.useRef)(null),a=(0,e.useRef)([]),d=(0,e.useRef)([]),c=(0,e.useRef)(t),h=(0,e.useRef)(),u=(0,e.useRef)(),p=(0,e.useRef)(!1),[g,m]=(0,e.useState)(void 0),[,v]=(0,e.useState)(0),f=(0,e.useCallback)((e=>{var i,n,c;if(s.current=e,!e)return a.current.forEach((e=>e())),void(a.current.length=0);const g=t.modules||[];r.current||(r.current=new rg((()=>v((e=>e+1))),t.componentWrappingElement,t.maxComponentCreationTimeMs),a.current.push((()=>{var e;null===(e=r.current)||void 0===e||e.destroy(),r.current=null})));const f=function(e,t,i){"object"!==typeof e&&(e={});const n=l({},e);return i.forEach((e=>{const i=t[e];"undefined"!==typeof i&&(n[e]=i)})),n}(t.gridOptions,t,Object.keys(t).filter((e=>!kg.has(e)))),y=new Eg((()=>{if(p.current){const e=()=>{var e;return null!==(e=h.current)&&void 0!==e&&e.shouldQueueUpdates()?void 0:d.current.shift()};let t=e();for(;t;)t(),t=e()}}));h.current=y;const b=new Dg,C={providedBeanInstances:{frameworkCompWrapper:new Ag(r.current,null===(i=null!==(n=f.reactiveCustomComponents)&&void 0!==n?n:_c("reactiveCustomComponents"))||void 0===i||i),renderStatus:b},modules:g,frameworkOverrides:y,setThemeOnGridDiv:!0},x=new Hc;null!==(c=f.gridId)&&void 0!==c||(f.gridId=u.current),o.current=x.create(e,f,(e=>{m(e),e.createBean(b),a.current.push((()=>{e.destroy()})),e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},(()=>{if(e.isDestroyed())return;const i=o.current;var n;i&&(null===(n=t.setGridApi)||void 0===n||n.call(t,i))}))}),(e=>{e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},(()=>{d.current.forEach((e=>e())),d.current.length=0,p.current=!0}))}),C),a.current.push((()=>{o.current=void 0})),o.current&&(u.current=o.current.getGridId())}),[]),y=(0,e.useMemo)((()=>l({height:"100%"},t.containerStyle||{})),[t.containerStyle]),b=(0,e.useCallback)((e=>{var t;!p.current||null!==(t=h.current)&&void 0!==t&&t.shouldQueueUpdates()?d.current.push(e):e()}),[]);return(0,e.useEffect)((()=>{const e=function(e,t){const i={};return Object.keys(t).forEach((n=>{if(kg.has(n))return;const o=t[n];e[n]!==o&&(i[n]=o)})),i}(c.current,t);c.current=t,b((()=>{o.current&&function(e,t){if(!e)return;const i={};let n=!1;if(Object.keys(e).forEach((t=>{i[t]=e[t],n=!0})),!n)return;const o={type:"gridOptionsChanged",options:i};t.dispatchEvent(o);const s=l({type:"componentStateChanged"},i);t.dispatchEvent(s)}(e,o.current)}))}),[t]),e.createElement("div",{style:y,className:t.className,ref:f},g&&!g.isDestroyed()?e.createElement(Mg,{context:g}):null,null!==(i=null===(n=r.current)||void 0===n?void 0:n.getPortals())&&void 0!==i?i:null)};var Ag=class extends qc{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const i=(e=>{switch(e){case"filter":return qp;case"floatingFilterComponent":return $p;case"dateComponent":return Zp;case"dragAndDropImageComponent":return Xp;case"loadingOverlayComponent":return eg;case"noRowsOverlayComponent":return ig;case"statusPanel":return ng;case"toolPanel":return og;case"menuItem":return tg;case"cellRenderer":return Yp}})(t.name);if(i)return new i(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":sg()}const i=!t.cellRenderer&&"toolPanel"!==t.name;return new jp(e,this.parent,t,i)}},Tg=(0,e.forwardRef)(((t,i)=>{const n=(0,e.useContext)(Ip),{registry:o,context:s,gos:r,rowModel:a}=n,[d,c]=(0,e.useState)((()=>new Rp)),[h,u]=(0,e.useState)((()=>new Rp)),[p,g]=(0,e.useState)(),[m,v]=(0,e.useState)(),f=(0,e.useRef)(),y=(0,e.useRef)(null),b=(0,e.useRef)(),C=(0,e.useMemo)((()=>{var e;return vo(t.api.getGridId(),null!==(e=null===p||void 0===p?void 0:p.rowModelType)&&void 0!==e?e:"clientSide")}),[t]),x=(0,e.useMemo)((()=>d.toString()+" ag-details-row"),[d]),w=(0,e.useMemo)((()=>h.toString()+" ag-details-grid"),[h]);i&&(0,e.useImperativeHandle)(i,(()=>({refresh(){var e,t;return null!==(e=null===(t=f.current)||void 0===t?void 0:t.refresh())&&void 0!==e&&e}}))),t.template&&pt(230);const S=(0,e.useCallback)((e=>{var i;if(y.current=e,!e)return f.current=s.destroyBean(f.current),void(null===(i=b.current)||void 0===i||i.call(b));const l={addOrRemoveCssClass:(e,t)=>c((i=>i.setClass(e,t))),addOrRemoveDetailGridCssClass:(e,t)=>u((i=>i.setClass(e,t))),setDetailGrid:e=>g(e),setRowData:e=>v(e),getGui:()=>y.current},d=o.createDynamicBean("detailCellRendererCtrl",!0);if(d&&(s.createBean(d),d.init(l,t),f.current=d,r.get("detailRowAutoHeight"))){const i=()=>{if(null==y.current)return;const e=y.current.clientHeight;if(null!=e&&e>0){setTimeout((()=>{t.node.setRowHeight(e),(bt(r)||Ct(r))&&a.onRowHeightChanged()}),0)}};b.current=Be(n,e,i),i()}}),[]),M=(0,e.useCallback)((e=>{var t;null===(t=f.current)||void 0===t||t.registerDetailWithMaster(e)}),[]);return e.createElement("div",{className:x,ref:S},p&&e.createElement(Ig,l(l({className:w},p),{},{modules:C,rowData:m,setGridApi:M})))})),Eg=class extends Fa{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:zp,agGroupRowRenderer:zp,agDetailCellRenderer:Tg},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,Fp||setTimeout((()=>Fp=!1),0),Fp=!0,i()):e();var i},this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===Pp}},Rg=class extends e.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return e.createElement(Ig,l(l({},this.props),{},{setGridApi:this.setGridApi}))}};var Lg,Pg,Ng,Fg,Og,Bg,Gg,zg,_g,Vg=i(502),Hg=i.n(Vg),Wg=i(273);!function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(Lg||(Lg={})),function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(Pg||(Pg={})),function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(Ng||(Ng={})),function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(Fg||(Fg={})),function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(Og||(Og={})),function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(Bg||(Bg={})),function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"}(Gg||(Gg={})),function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"}(zg||(zg={})),function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"}(_g||(_g={}));function jg(e){if(null===e)return"null";if(undefined===e)return"undefined";switch(typeof e){case"number":case"bigint":return"".concat(e);case"string":return'"'.concat(e,'"')}return"function"===typeof e[Symbol.toPrimitive]?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?"[".concat([...e].map((e=>jg(e))),"]"):"[".concat(e,"]"):ArrayBuffer.isView(e)?"[".concat(e,"]"):JSON.stringify(e,((e,t)=>"bigint"===typeof t?"".concat(t):t))}function Ug(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))}Object.create;function Kg(e){var t="function"===typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yg(e){return this instanceof Yg?(this.v=e,this):new Yg(e)}function Zg(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=i.apply(e,t||[]),s=[];return n=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),r("next"),r("throw"),r("return",(function(e){return function(t){return Promise.resolve(t).then(e,d)}})),n[Symbol.asyncIterator]=function(){return this},n;function r(e,t){o[e]&&(n[e]=function(t){return new Promise((function(i,n){s.push([e,t,i,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{(i=o[e](t)).value instanceof Yg?Promise.resolve(i.value.v).then(l,d):c(s[0][2],i)}catch(n){c(s[0][3],n)}var i}function l(e){a("next",e)}function d(e){a("throw",e)}function c(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Xg(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(i=!i)?{value:Yg(e[n](t)),done:!1}:o?o(t):t}:o}}function qg(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=Kg(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,o){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,o,(t=e[i](t)).done,t.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;const Qg=new TextDecoder("utf-8"),Jg=e=>Qg.decode(e),$g=new TextEncoder,em=e=>$g.encode(e),[tm,im]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},"undefined"!==typeof BigInt?[BigInt,!0]:[t,!1]})(),[nm,om]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}},!1]})(),[sm,rm]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}},!1]})(),am=e=>"number"===typeof e,lm=e=>"boolean"===typeof e,dm=e=>"function"===typeof e,cm=e=>null!=e&&Object(e)===e,hm=e=>cm(e)&&dm(e.then),um=e=>cm(e)&&dm(e[Symbol.iterator]),pm=e=>cm(e)&&dm(e[Symbol.asyncIterator]),gm=e=>cm(e)&&cm(e.schema),mm=e=>cm(e)&&"done"in e&&"value"in e,vm=e=>cm(e)&&dm(e.stat)&&am(e.fd),fm=e=>cm(e)&&bm(e.body),ym=e=>"_getDOMStream"in e&&"_getNodeStream"in e,bm=e=>cm(e)&&dm(e.cancel)&&dm(e.getReader)&&!ym(e),Cm=e=>cm(e)&&dm(e.read)&&dm(e.pipe)&&lm(e.readable)&&!ym(e),xm="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function wm(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength;const o=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,o),r=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,o));return s.set(r,i),e}function Sm(e,t){const i=function(e){const t=e[0]?[e[0]]:[];let i,n,o,s;for(let r,a,l=0,d=0,c=e.length;++l<c;)r=t[d],a=e[l],!r||!a||r.buffer!==a.buffer||a.byteOffset<r.byteOffset?a&&(t[++d]=a):(({byteOffset:i,byteLength:o}=r),({byteOffset:n,byteLength:s}=a),i+o<n||n+s<i?a&&(t[++d]=a):t[d]=new Uint8Array(r.buffer,i,n-i+s));return t}(e),n=i.reduce(((e,t)=>e+t.byteLength),0);let o,s,r,a=0,l=-1;const d=Math.min(t||Number.POSITIVE_INFINITY,n);for(const c=i.length;++l<c;){if(o=i[l],s=o.subarray(0,Math.min(o.length,d-a)),d<=a+s.length){s.length<o.length?i[l]=o.subarray(s.length):s.length===o.length&&l++,r?wm(r,s,a):r=s;break}wm(r||(r=new Uint8Array(d)),s,a),a+=s.length}return[r||new Uint8Array(0),i.slice(l),n-(r?r.byteLength:0)]}function Mm(e,t){let i=mm(t)?t.value:t;return i instanceof e?e===Uint8Array?new e(i.buffer,i.byteOffset,i.byteLength):i:i?("string"===typeof i&&(i=em(i)),i instanceof ArrayBuffer||i instanceof xm?new e(i):cm(n=i)&&dm(n.clear)&&dm(n.bytes)&&dm(n.position)&&dm(n.setPosition)&&dm(n.capacity)&&dm(n.getBufferIdentifier)&&dm(n.createLong)?Mm(e,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new e(0):new e(i.buffer,i.byteOffset,i.byteLength/e.BYTES_PER_ELEMENT):e.from(i)):new e(0);var n}const Dm=e=>Mm(Int32Array,e),km=e=>Mm(Uint8Array,e),Im=e=>(e.next(),e);function*Am(e,t){const i=function*(e){yield e},n="string"===typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof xm?i(t):um(t)?t:i(t);return yield*Im(function*(t){let i=null;do{i=t.next(yield Mm(e,i))}while(!i.done)}(n[Symbol.iterator]())),new e}function Tm(e,t){return Zg(this,arguments,(function*(){if(hm(t))return yield Yg(yield Yg(yield*Xg(qg(Tm(e,yield Yg(t))))));const i=function(e){return Zg(this,arguments,(function*(){yield yield Yg(yield Yg(e))}))},n="string"===typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof xm?i(t):um(t)?function(e){return Zg(this,arguments,(function*(){yield Yg(yield*Xg(qg(Im(function*(e){let t=null;do{t=e.next(yield null===t||void 0===t?void 0:t.value)}while(!t.done)}(e[Symbol.iterator]())))))}))}(t):pm(t)?t:i(t);return yield Yg(yield*Xg(qg(Im(function(t){return Zg(this,arguments,(function*(){let i=null;do{i=yield Yg(t.next(yield yield Yg(Mm(e,i))))}while(!i.done)}))}(n[Symbol.asyncIterator]()))))),yield Yg(new e)}))}function Em(e,t,i){if(0!==e){i=i.slice(0,t+1);for(let n=-1;++n<=t;)i[n]+=e}return i}const Rm=Symbol.for("isArrowBigNum");function Lm(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return 0===i.length?Object.setPrototypeOf(Mm(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...i),this.constructor.prototype)}function Pm(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Lm.apply(this,t)}function Nm(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Lm.apply(this,t)}function Fm(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Lm.apply(this,t)}function Om(e){const{buffer:t,byteOffset:i,length:n,signed:o}=e,s=new sm(t,i,n),r=o&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=r?BigInt(1):BigInt(0),l=BigInt(0);if(r){for(const e of s)a+=~e*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const d of s)a+=d*(BigInt(1)<<BigInt(32)*l++);return a}let Bm,Gm;function zm(e){let t="";const i=new Uint32Array(2);let n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const o=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let s=-1;const r=n.length-1;do{for(i[0]=n[s=0];s<r;)n[s++]=i[1]=i[0]/10,i[0]=(i[0]-10*i[1]<<16)+n[s];n[s]=i[1]=i[0]/10,i[0]=i[0]-10*i[1],t="".concat(i[0]).concat(t)}while(o[0]||o[1]||o[2]||o[3]);return t||"0"}Lm.prototype[Rm]=!0,Lm.prototype.toJSON=function(){return'"'.concat(Bm(this),'"')},Lm.prototype.valueOf=function(){return Om(this)},Lm.prototype.toString=function(){return Bm(this)},Lm.prototype[Symbol.toPrimitive]=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"number":return Om(this);case"string":return Bm(this);case"default":return Gm(this)}return Bm(this)},Object.setPrototypeOf(Pm.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Nm.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(Fm.prototype,Object.create(Uint32Array.prototype)),Object.assign(Pm.prototype,Lm.prototype,{constructor:Pm,signed:!0,TypedArray:Int32Array,BigIntArray:nm}),Object.assign(Nm.prototype,Lm.prototype,{constructor:Nm,signed:!1,TypedArray:Uint32Array,BigIntArray:sm}),Object.assign(Fm.prototype,Lm.prototype,{constructor:Fm,signed:!0,TypedArray:Uint32Array,BigIntArray:sm}),im?(Gm=e=>8===e.byteLength?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:zm(e),Bm=e=>8===e.byteLength?"".concat(new e.BigIntArray(e.buffer,e.byteOffset,1)[0]):zm(e)):(Bm=zm,Gm=Bm);class _m{static new(e,t){switch(t){case!0:return new Pm(e);case!1:return new Nm(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case nm:return new Pm(e)}return 16===e.byteLength?new Fm(e):new Nm(e)}static signed(e){return new Pm(e)}static unsigned(e){return new Nm(e)}static decimal(e){return new Fm(e)}constructor(e,t){return _m.new(e,t)}}var Vm,Hm,Wm,jm,Um,Km,Ym,Zm,Xm,qm,Qm,Jm,$m,ev,tv,iv,nv,ov,sv,rv;class av{static isNull(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Null}static isInt(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Int}static isFloat(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Float}static isBinary(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Binary}static isUtf8(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Utf8}static isBool(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Bool}static isDecimal(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Decimal}static isDate(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Date}static isTime(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Time}static isTimestamp(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Timestamp}static isInterval(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Interval}static isList(e){return(null===e||void 0===e?void 0:e.typeId)===zg.List}static isStruct(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Struct}static isUnion(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Union}static isFixedSizeBinary(e){return(null===e||void 0===e?void 0:e.typeId)===zg.FixedSizeBinary}static isFixedSizeList(e){return(null===e||void 0===e?void 0:e.typeId)===zg.FixedSizeList}static isMap(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Map}static isDictionary(e){return(null===e||void 0===e?void 0:e.typeId)===zg.Dictionary}static isDenseUnion(e){return av.isUnion(e)&&e.mode===Pg.Dense}static isSparseUnion(e){return av.isUnion(e)&&e.mode===Pg.Sparse}get typeId(){return zg.NONE}}Vm=Symbol.toStringTag,av[Vm]=((rv=av.prototype).children=null,rv.ArrayType=Array,rv[Symbol.toStringTag]="DataType");class lv extends av{toString(){return"Null"}get typeId(){return zg.Null}}Hm=Symbol.toStringTag,lv[Hm]=(e=>e[Symbol.toStringTag]="Null")(lv.prototype);class dv extends av{constructor(e,t){super(),this.isSigned=e,this.bitWidth=t}get typeId(){return zg.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}Wm=Symbol.toStringTag,dv[Wm]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(dv.prototype);class cv extends dv{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends dv{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends dv{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(cv.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends dv{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(class extends dv{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends dv{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends dv{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends dv{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}.prototype,"ArrayType",{value:BigUint64Array});class hv extends av{constructor(e){super(),this.precision=e}get typeId(){return zg.Float}get ArrayType(){switch(this.precision){case Ng.HALF:return Uint16Array;case Ng.SINGLE:return Float32Array;case Ng.DOUBLE:return Float64Array}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"Float".concat(this.precision<<5||16)}}jm=Symbol.toStringTag,hv[jm]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(hv.prototype);Object.defineProperty(class extends hv{constructor(){super(Ng.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends hv{constructor(){super(Ng.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends hv{constructor(){super(Ng.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class uv extends av{constructor(){super()}get typeId(){return zg.Binary}toString(){return"Binary"}}Um=Symbol.toStringTag,uv[Um]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(uv.prototype);class pv extends av{constructor(){super()}get typeId(){return zg.Utf8}toString(){return"Utf8"}}Km=Symbol.toStringTag,pv[Km]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(pv.prototype);class gv extends av{constructor(){super()}get typeId(){return zg.Bool}toString(){return"Bool"}}Ym=Symbol.toStringTag,gv[Ym]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(gv.prototype);class mv extends av{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;super(),this.scale=e,this.precision=t,this.bitWidth=i}get typeId(){return zg.Decimal}toString(){return"Decimal[".concat(this.precision,"e").concat(this.scale>0?"+":"").concat(this.scale,"]")}}Zm=Symbol.toStringTag,mv[Zm]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(mv.prototype);class vv extends av{constructor(e){super(),this.unit=e}get typeId(){return zg.Date}toString(){return"Date".concat(32*(this.unit+1),"<").concat(Fg[this.unit],">")}}Xm=Symbol.toStringTag,vv[Xm]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(vv.prototype);class fv extends av{constructor(e,t){super(),this.unit=e,this.bitWidth=t}get typeId(){return zg.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(Og[this.unit],">")}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}}qm=Symbol.toStringTag,fv[qm]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(fv.prototype);class yv extends av{constructor(e,t){super(),this.unit=e,this.timezone=t}get typeId(){return zg.Timestamp}toString(){return"Timestamp<".concat(Og[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}Qm=Symbol.toStringTag,yv[Qm]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(yv.prototype);class bv extends av{constructor(e){super(),this.unit=e}get typeId(){return zg.Interval}toString(){return"Interval<".concat(Bg[this.unit],">")}}Jm=Symbol.toStringTag,bv[Jm]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(bv.prototype);class Cv extends av{constructor(e){super(),this.children=[e]}get typeId(){return zg.List}toString(){return"List<".concat(this.valueType,">")}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}$m=Symbol.toStringTag,Cv[$m]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Cv.prototype);class xv extends av{constructor(e){super(),this.children=e}get typeId(){return zg.Struct}toString(){return"Struct<{".concat(this.children.map((e=>"".concat(e.name,":").concat(e.type))).join(", "),"}>")}}ev=Symbol.toStringTag,xv[ev]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(xv.prototype);class wv extends av{constructor(e,t,i){super(),this.mode=e,this.children=i,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce(((e,t,i)=>(e[t]=i)&&e||e),Object.create(null))}get typeId(){return zg.Union}toString(){return"".concat(this[Symbol.toStringTag],"<").concat(this.children.map((e=>"".concat(e.type))).join(" | "),">")}}tv=Symbol.toStringTag,wv[tv]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(wv.prototype);class Sv extends av{constructor(e){super(),this.byteWidth=e}get typeId(){return zg.FixedSizeBinary}toString(){return"FixedSizeBinary[".concat(this.byteWidth,"]")}}iv=Symbol.toStringTag,Sv[iv]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Sv.prototype);class Mv extends av{constructor(e,t){super(),this.listSize=e,this.children=[t]}get typeId(){return zg.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}nv=Symbol.toStringTag,Mv[nv]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Mv.prototype);class Dv extends av{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.children=[e],this.keysSorted=t}get typeId(){return zg.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return"Map<{".concat(this.children[0].type.children.map((e=>"".concat(e.name,":").concat(e.type))).join(", "),"}>")}}ov=Symbol.toStringTag,Dv[ov]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Dv.prototype);const kv=(Iv=-1,()=>++Iv);var Iv;class Av extends av{constructor(e,t,i,n){super(),this.indices=t,this.dictionary=e,this.isOrdered=n||!1,this.id=null==i?kv():"number"===typeof i?i:i.low}get typeId(){return zg.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return"Dictionary<".concat(this.indices,", ").concat(this.dictionary,">")}}function Tv(e){const t=e;switch(e.typeId){case zg.Decimal:return e.bitWidth/32;case zg.Timestamp:return 2;case zg.Date:case zg.Interval:return 1+t.unit;case zg.FixedSizeList:return t.listSize;case zg.FixedSizeBinary:return t.byteWidth;default:return 1}}sv=Symbol.toStringTag,Av[sv]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Av.prototype);class Ev{visitMany(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.map(((e,t)=>this.visit(e,...i.map((e=>e[t])))))}visit(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(e){return function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"===typeof t)return Rv(e,t,i);if("string"===typeof t&&t in zg)return Rv(e,zg[t],i);if(t&&t instanceof av)return Rv(e,Lv(t),i);if((null===t||void 0===t?void 0:t.type)&&t.type instanceof av)return Rv(e,Lv(t.type),i);return Rv(e,zg.NONE,i)}(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}getVisitFnByTypeId(e){return Rv(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(e){return null}visitBool(e){return null}visitInt(e){return null}visitFloat(e){return null}visitUtf8(e){return null}visitBinary(e){return null}visitFixedSizeBinary(e){return null}visitDate(e){return null}visitTimestamp(e){return null}visitTime(e){return null}visitDecimal(e){return null}visitList(e){return null}visitStruct(e){return null}visitUnion(e){return null}visitDictionary(e){return null}visitInterval(e){return null}visitFixedSizeList(e){return null}visitMap(e){return null}}function Rv(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;switch(t){case zg.Null:n=e.visitNull;break;case zg.Bool:n=e.visitBool;break;case zg.Int:n=e.visitInt;break;case zg.Int8:n=e.visitInt8||e.visitInt;break;case zg.Int16:n=e.visitInt16||e.visitInt;break;case zg.Int32:n=e.visitInt32||e.visitInt;break;case zg.Int64:n=e.visitInt64||e.visitInt;break;case zg.Uint8:n=e.visitUint8||e.visitInt;break;case zg.Uint16:n=e.visitUint16||e.visitInt;break;case zg.Uint32:n=e.visitUint32||e.visitInt;break;case zg.Uint64:n=e.visitUint64||e.visitInt;break;case zg.Float:n=e.visitFloat;break;case zg.Float16:n=e.visitFloat16||e.visitFloat;break;case zg.Float32:n=e.visitFloat32||e.visitFloat;break;case zg.Float64:n=e.visitFloat64||e.visitFloat;break;case zg.Utf8:n=e.visitUtf8;break;case zg.Binary:n=e.visitBinary;break;case zg.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case zg.Date:n=e.visitDate;break;case zg.DateDay:n=e.visitDateDay||e.visitDate;break;case zg.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case zg.Timestamp:n=e.visitTimestamp;break;case zg.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case zg.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case zg.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case zg.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case zg.Time:n=e.visitTime;break;case zg.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case zg.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case zg.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case zg.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case zg.Decimal:n=e.visitDecimal;break;case zg.List:n=e.visitList;break;case zg.Struct:n=e.visitStruct;break;case zg.Union:n=e.visitUnion;break;case zg.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case zg.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case zg.Dictionary:n=e.visitDictionary;break;case zg.Interval:n=e.visitInterval;break;case zg.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case zg.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case zg.FixedSizeList:n=e.visitFixedSizeList;break;case zg.Map:n=e.visitMap}if("function"===typeof n)return n;if(!i)return()=>null;throw new Error("Unrecognized type '".concat(zg[t],"'"))}function Lv(e){switch(e.typeId){case zg.Null:return zg.Null;case zg.Int:{const{bitWidth:t,isSigned:i}=e;switch(t){case 8:return i?zg.Int8:zg.Uint8;case 16:return i?zg.Int16:zg.Uint16;case 32:return i?zg.Int32:zg.Uint32;case 64:return i?zg.Int64:zg.Uint64}return zg.Int}case zg.Float:switch(e.precision){case Ng.HALF:return zg.Float16;case Ng.SINGLE:return zg.Float32;case Ng.DOUBLE:return zg.Float64}return zg.Float;case zg.Binary:return zg.Binary;case zg.Utf8:return zg.Utf8;case zg.Bool:return zg.Bool;case zg.Decimal:return zg.Decimal;case zg.Time:switch(e.unit){case Og.SECOND:return zg.TimeSecond;case Og.MILLISECOND:return zg.TimeMillisecond;case Og.MICROSECOND:return zg.TimeMicrosecond;case Og.NANOSECOND:return zg.TimeNanosecond}return zg.Time;case zg.Timestamp:switch(e.unit){case Og.SECOND:return zg.TimestampSecond;case Og.MILLISECOND:return zg.TimestampMillisecond;case Og.MICROSECOND:return zg.TimestampMicrosecond;case Og.NANOSECOND:return zg.TimestampNanosecond}return zg.Timestamp;case zg.Date:switch(e.unit){case Fg.DAY:return zg.DateDay;case Fg.MILLISECOND:return zg.DateMillisecond}return zg.Date;case zg.Interval:switch(e.unit){case Bg.DAY_TIME:return zg.IntervalDayTime;case Bg.YEAR_MONTH:return zg.IntervalYearMonth}return zg.Interval;case zg.Map:return zg.Map;case zg.List:return zg.List;case zg.Struct:return zg.Struct;case zg.Union:switch(e.mode){case Pg.Dense:return zg.DenseUnion;case Pg.Sparse:return zg.SparseUnion}return zg.Union;case zg.FixedSizeBinary:return zg.FixedSizeBinary;case zg.FixedSizeList:return zg.FixedSizeList;case zg.Dictionary:return zg.Dictionary}throw new Error("Unrecognized type '".concat(zg[e.typeId],"'"))}Ev.prototype.visitInt8=null,Ev.prototype.visitInt16=null,Ev.prototype.visitInt32=null,Ev.prototype.visitInt64=null,Ev.prototype.visitUint8=null,Ev.prototype.visitUint16=null,Ev.prototype.visitUint32=null,Ev.prototype.visitUint64=null,Ev.prototype.visitFloat16=null,Ev.prototype.visitFloat32=null,Ev.prototype.visitFloat64=null,Ev.prototype.visitDateDay=null,Ev.prototype.visitDateMillisecond=null,Ev.prototype.visitTimestampSecond=null,Ev.prototype.visitTimestampMillisecond=null,Ev.prototype.visitTimestampMicrosecond=null,Ev.prototype.visitTimestampNanosecond=null,Ev.prototype.visitTimeSecond=null,Ev.prototype.visitTimeMillisecond=null,Ev.prototype.visitTimeMicrosecond=null,Ev.prototype.visitTimeNanosecond=null,Ev.prototype.visitDenseUnion=null,Ev.prototype.visitSparseUnion=null,Ev.prototype.visitIntervalDayTime=null,Ev.prototype.visitIntervalYearMonth=null;const Pv=new Float64Array(1),Nv=new Uint32Array(Pv.buffer);function Fv(e){const t=(31744&e)>>10,i=(1023&e)/1024,n=Math.pow(-1,(32768&e)>>15);switch(t){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,t-15)*(1+i)}class Ov extends Ev{}function Bv(e){return(t,i,n)=>{if(t.setValid(i,null!=n))return e(t,i,n)}}const Gv=(e,t,i)=>{e[t]=Math.trunc(i%4294967296),e[t+1]=Math.trunc(i/4294967296)},zv=(e,t,i,n)=>{if(i+1<t.length){const{[i]:o,[i+1]:s}=t;e.set(n.subarray(0,s-o),o)}},_v=(e,t,i)=>{let{values:n}=e;n[t]=i},Vv=(e,t,i)=>{let{values:n}=e;n[t]=i},Hv=(e,t,i)=>{let{values:n}=e;n[t]=function(e){if(e!==e)return 32256;Pv[0]=e;const t=(2147483648&Nv[1])>>16&65535;let i=2146435072&Nv[1],n=0;return i>=1089470464?Nv[0]>0?i=31744:(i=(2080374784&i)>>16,n=(1048575&Nv[1])>>10):i<=1056964608?(n=1048576+(1048575&Nv[1]),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=512+(1048575&Nv[1])>>10),t|i|65535&n}(i)},Wv=(e,t,i)=>{let{values:n}=e;((e,t,i)=>{e[t]=Math.trunc(i/864e5)})(n,t,i.valueOf())},jv=(e,t,i)=>{let{values:n}=e;Gv(n,2*t,i.valueOf())},Uv=(e,t,i)=>{let{values:n}=e;return Gv(n,2*t,i/1e3)},Kv=(e,t,i)=>{let{values:n}=e;return Gv(n,2*t,i)},Yv=(e,t,i)=>{let{values:n}=e;return((e,t,i)=>{e[t]=Math.trunc(1e3*i%4294967296),e[t+1]=Math.trunc(1e3*i/4294967296)})(n,2*t,i)},Zv=(e,t,i)=>{let{values:n}=e;return((e,t,i)=>{e[t]=Math.trunc(1e6*i%4294967296),e[t+1]=Math.trunc(1e6*i/4294967296)})(n,2*t,i)},Xv=(e,t,i)=>{let{values:n}=e;n[t]=i},qv=(e,t,i)=>{let{values:n}=e;n[t]=i},Qv=(e,t,i)=>{let{values:n}=e;n[t]=i},Jv=(e,t,i)=>{let{values:n}=e;n[t]=i},$v=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],o=e.children[n];of.visit(o,e.valueOffsets[t],i)},ef=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],o=e.children[n];of.visit(o,t,i)},tf=(e,t,i)=>{let{values:n}=e;n.set(i.subarray(0,2),2*t)},nf=(e,t,i)=>{let{values:n}=e;n[t]=12*i[0]+i[1]%12};Ov.prototype.visitBool=Bv(((e,t,i)=>{let{offset:n,values:o}=e;const s=n+t;i?o[s>>3]|=1<<s%8:o[s>>3]&=~(1<<s%8)})),Ov.prototype.visitInt=Bv(_v),Ov.prototype.visitInt8=Bv(_v),Ov.prototype.visitInt16=Bv(_v),Ov.prototype.visitInt32=Bv(_v),Ov.prototype.visitInt64=Bv(_v),Ov.prototype.visitUint8=Bv(_v),Ov.prototype.visitUint16=Bv(_v),Ov.prototype.visitUint32=Bv(_v),Ov.prototype.visitUint64=Bv(_v),Ov.prototype.visitFloat=Bv(((e,t,i)=>{switch(e.type.precision){case Ng.HALF:return Hv(e,t,i);case Ng.SINGLE:case Ng.DOUBLE:return Vv(e,t,i)}})),Ov.prototype.visitFloat16=Bv(Hv),Ov.prototype.visitFloat32=Bv(Vv),Ov.prototype.visitFloat64=Bv(Vv),Ov.prototype.visitUtf8=Bv(((e,t,i)=>{let{values:n,valueOffsets:o}=e;zv(n,o,t,em(i))})),Ov.prototype.visitBinary=Bv(((e,t,i)=>{let{values:n,valueOffsets:o}=e;return zv(n,o,t,i)})),Ov.prototype.visitFixedSizeBinary=Bv(((e,t,i)=>{let{stride:n,values:o}=e;o.set(i.subarray(0,n),n*t)})),Ov.prototype.visitDate=Bv(((e,t,i)=>{e.type.unit===Fg.DAY?Wv(e,t,i):jv(e,t,i)})),Ov.prototype.visitDateDay=Bv(Wv),Ov.prototype.visitDateMillisecond=Bv(jv),Ov.prototype.visitTimestamp=Bv(((e,t,i)=>{switch(e.type.unit){case Og.SECOND:return Uv(e,t,i);case Og.MILLISECOND:return Kv(e,t,i);case Og.MICROSECOND:return Yv(e,t,i);case Og.NANOSECOND:return Zv(e,t,i)}})),Ov.prototype.visitTimestampSecond=Bv(Uv),Ov.prototype.visitTimestampMillisecond=Bv(Kv),Ov.prototype.visitTimestampMicrosecond=Bv(Yv),Ov.prototype.visitTimestampNanosecond=Bv(Zv),Ov.prototype.visitTime=Bv(((e,t,i)=>{switch(e.type.unit){case Og.SECOND:return Xv(e,t,i);case Og.MILLISECOND:return qv(e,t,i);case Og.MICROSECOND:return Qv(e,t,i);case Og.NANOSECOND:return Jv(e,t,i)}})),Ov.prototype.visitTimeSecond=Bv(Xv),Ov.prototype.visitTimeMillisecond=Bv(qv),Ov.prototype.visitTimeMicrosecond=Bv(Qv),Ov.prototype.visitTimeNanosecond=Bv(Jv),Ov.prototype.visitDecimal=Bv(((e,t,i)=>{let{values:n,stride:o}=e;n.set(i.subarray(0,o),o*t)})),Ov.prototype.visitList=Bv(((e,t,i)=>{const n=e.children[0],o=e.valueOffsets,s=of.getVisitFn(n);if(Array.isArray(i))for(let r=-1,a=o[t],l=o[t+1];a<l;)s(n,a++,i[++r]);else for(let r=-1,a=o[t],l=o[t+1];a<l;)s(n,a++,i.get(++r))})),Ov.prototype.visitStruct=Bv(((e,t,i)=>{const n=e.type.children.map((e=>of.getVisitFn(e.type))),o=i instanceof Map?(s=t,r=i,(e,t,i,n)=>t&&e(t,s,r.get(i.name))):i instanceof xy?((e,t)=>(i,n,o,s)=>n&&i(n,e,t.get(s)))(t,i):Array.isArray(i)?((e,t)=>(i,n,o,s)=>n&&i(n,e,t[s]))(t,i):((e,t)=>(i,n,o,s)=>n&&i(n,e,t[o.name]))(t,i);var s,r;e.type.children.forEach(((t,i)=>o(n[i],e.children[i],t,i)))})),Ov.prototype.visitUnion=Bv(((e,t,i)=>{e.type.mode===Pg.Dense?$v(e,t,i):ef(e,t,i)})),Ov.prototype.visitDenseUnion=Bv($v),Ov.prototype.visitSparseUnion=Bv(ef),Ov.prototype.visitDictionary=Bv(((e,t,i)=>{var n;null===(n=e.dictionary)||void 0===n||n.set(e.values[t],i)})),Ov.prototype.visitInterval=Bv(((e,t,i)=>{e.type.unit===Bg.DAY_TIME?tf(e,t,i):nf(e,t,i)})),Ov.prototype.visitIntervalDayTime=Bv(tf),Ov.prototype.visitIntervalYearMonth=Bv(nf),Ov.prototype.visitFixedSizeList=Bv(((e,t,i)=>{const{stride:n}=e,o=e.children[0],s=of.getVisitFn(o);if(Array.isArray(i))for(let r=-1,a=t*n;++r<n;)s(o,a+r,i[r]);else for(let r=-1,a=t*n;++r<n;)s(o,a+r,i.get(r))})),Ov.prototype.visitMap=Bv(((e,t,i)=>{const n=e.children[0],{valueOffsets:o}=e,s=of.getVisitFn(n);let{[t]:r,[t+1]:a}=o;const l=i instanceof Map?i.entries():Object.entries(i);for(const d of l)if(s(n,r,d),++r>=a)break}));const of=new Ov,sf=Symbol.for("parent"),rf=Symbol.for("rowIndex");class af{constructor(e,t){return this[sf]=e,this[rf]=t,new Proxy(this,new df)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[rf],t=this[sf],i=t.type.children,n={};for(let o=-1,s=i.length;++o<s;)n[i[o].name]=Rf.visit(t.children[o],e);return n}toString(){return"{".concat([...this].map((e=>{let[t,i]=e;return"".concat(jg(t),": ").concat(jg(i))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new lf(this[sf],this[rf])}}class lf{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Rf.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(af.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[sf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[rf]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class df{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[sf].type.children.map((e=>e.name))}has(e,t){return-1!==e[sf].type.children.findIndex((e=>e.name===t))}getOwnPropertyDescriptor(e,t){if(-1!==e[sf].type.children.findIndex((e=>e.name===t)))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const i=e[sf].type.children.findIndex((e=>e.name===t));if(-1!==i){const n=Rf.visit(e[sf].children[i],e[rf]);return Reflect.set(e,t,n),n}}set(e,t,i){const n=e[sf].type.children.findIndex((e=>e.name===t));return-1!==n?(of.visit(e[sf].children[n],e[rf],i),Reflect.set(e,t,i)):!(!Reflect.has(e,t)&&"symbol"!==typeof t)&&Reflect.set(e,t,i)}}class cf extends Ev{}function hf(e){return(t,i)=>t.getValid(i)?e(t,i):null}const uf=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),pf=e=>new Date(e),gf=(e,t,i)=>{if(i+1>=t.length)return null;const n=t[i],o=t[i+1];return e.subarray(n,o)},mf=(e,t)=>{let{values:i}=e;return((e,t)=>pf(((e,t)=>864e5*e[t])(e,t)))(i,t)},vf=(e,t)=>{let{values:i}=e;return((e,t)=>pf(uf(e,t)))(i,2*t)},ff=(e,t)=>{let{stride:i,values:n}=e;return n[i*t]},yf=(e,t)=>{let{values:i}=e;return i[t]},bf=(e,t)=>{let{values:i}=e;return 1e3*uf(i,2*t)},Cf=(e,t)=>{let{values:i}=e;return uf(i,2*t)},xf=(e,t)=>{let{values:i}=e;return((e,t)=>e[t+1]/1e3*4294967296+(e[t]>>>0)/1e3)(i,2*t)},wf=(e,t)=>{let{values:i}=e;return((e,t)=>e[t+1]/1e6*4294967296+(e[t]>>>0)/1e6)(i,2*t)},Sf=(e,t)=>{let{values:i}=e;return i[t]},Mf=(e,t)=>{let{values:i}=e;return i[t]},Df=(e,t)=>{let{values:i}=e;return i[t]},kf=(e,t)=>{let{values:i}=e;return i[t]},If=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return Rf.visit(n,e.valueOffsets[t])},Af=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return Rf.visit(n,t)},Tf=(e,t)=>{let{values:i}=e;return i.subarray(2*t,2*(t+1))},Ef=(e,t)=>{let{values:i}=e;const n=i[t],o=new Int32Array(2);return o[0]=Math.trunc(n/12),o[1]=Math.trunc(n%12),o};cf.prototype.visitNull=hf(((e,t)=>null)),cf.prototype.visitBool=hf(((e,t)=>{let{offset:i,values:n}=e;const o=i+t;return 0!==(n[o>>3]&1<<o%8)})),cf.prototype.visitInt=hf(((e,t)=>{let{values:i}=e;return i[t]})),cf.prototype.visitInt8=hf(ff),cf.prototype.visitInt16=hf(ff),cf.prototype.visitInt32=hf(ff),cf.prototype.visitInt64=hf(yf),cf.prototype.visitUint8=hf(ff),cf.prototype.visitUint16=hf(ff),cf.prototype.visitUint32=hf(ff),cf.prototype.visitUint64=hf(yf),cf.prototype.visitFloat=hf(((e,t)=>{let{type:i,values:n}=e;return i.precision!==Ng.HALF?n[t]:Fv(n[t])})),cf.prototype.visitFloat16=hf(((e,t)=>{let{stride:i,values:n}=e;return Fv(n[i*t])})),cf.prototype.visitFloat32=hf(ff),cf.prototype.visitFloat64=hf(ff),cf.prototype.visitUtf8=hf(((e,t)=>{let{values:i,valueOffsets:n}=e;const o=gf(i,n,t);return null!==o?Jg(o):null})),cf.prototype.visitBinary=hf(((e,t)=>{let{values:i,valueOffsets:n}=e;return gf(i,n,t)})),cf.prototype.visitFixedSizeBinary=hf(((e,t)=>{let{stride:i,values:n}=e;return n.subarray(i*t,i*(t+1))})),cf.prototype.visitDate=hf(((e,t)=>e.type.unit===Fg.DAY?mf(e,t):vf(e,t))),cf.prototype.visitDateDay=hf(mf),cf.prototype.visitDateMillisecond=hf(vf),cf.prototype.visitTimestamp=hf(((e,t)=>{switch(e.type.unit){case Og.SECOND:return bf(e,t);case Og.MILLISECOND:return Cf(e,t);case Og.MICROSECOND:return xf(e,t);case Og.NANOSECOND:return wf(e,t)}})),cf.prototype.visitTimestampSecond=hf(bf),cf.prototype.visitTimestampMillisecond=hf(Cf),cf.prototype.visitTimestampMicrosecond=hf(xf),cf.prototype.visitTimestampNanosecond=hf(wf),cf.prototype.visitTime=hf(((e,t)=>{switch(e.type.unit){case Og.SECOND:return Sf(e,t);case Og.MILLISECOND:return Mf(e,t);case Og.MICROSECOND:return Df(e,t);case Og.NANOSECOND:return kf(e,t)}})),cf.prototype.visitTimeSecond=hf(Sf),cf.prototype.visitTimeMillisecond=hf(Mf),cf.prototype.visitTimeMicrosecond=hf(Df),cf.prototype.visitTimeNanosecond=hf(kf),cf.prototype.visitDecimal=hf(((e,t)=>{let{values:i,stride:n}=e;return _m.decimal(i.subarray(n*t,n*(t+1)))})),cf.prototype.visitList=hf(((e,t)=>{const{valueOffsets:i,stride:n,children:o}=e,{[t*n]:s,[t*n+1]:r}=i,a=o[0].slice(s,r-s);return new xy([a])})),cf.prototype.visitStruct=hf(((e,t)=>new af(e,t))),cf.prototype.visitUnion=hf(((e,t)=>e.type.mode===Pg.Dense?If(e,t):Af(e,t))),cf.prototype.visitDenseUnion=hf(If),cf.prototype.visitSparseUnion=hf(Af),cf.prototype.visitDictionary=hf(((e,t)=>{var i;return null===(i=e.dictionary)||void 0===i?void 0:i.get(e.values[t])})),cf.prototype.visitInterval=hf(((e,t)=>e.type.unit===Bg.DAY_TIME?Tf(e,t):Ef(e,t))),cf.prototype.visitIntervalDayTime=hf(Tf),cf.prototype.visitIntervalYearMonth=hf(Ef),cf.prototype.visitFixedSizeList=hf(((e,t)=>{const{stride:i,children:n}=e,o=n[0].slice(t*i,i);return new xy([o])})),cf.prototype.visitMap=hf(((e,t)=>{const{valueOffsets:i,children:n}=e,{[t]:o,[t+1]:s}=i,r=n[0];return new Nf(r.slice(o,s-o))}));const Rf=new cf,Lf=Symbol.for("keys"),Pf=Symbol.for("vals");class Nf{constructor(e){return this[Lf]=new xy([e.children[0]]).memoize(),this[Pf]=e.children[1],new Proxy(this,new Of)}[Symbol.iterator](){return new Ff(this[Lf],this[Pf])}get size(){return this[Lf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Lf],t=this[Pf],i={};for(let n=-1,o=e.length;++n<o;)i[e.get(n)]=Rf.visit(t,n);return i}toString(){return"{".concat([...this].map((e=>{let[t,i]=e;return"".concat(jg(t),": ").concat(jg(i))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Ff{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Rf.visit(this.vals,e)]})}}class Of{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Lf].toArray().map(String)}has(e,t){return e[Lf].includes(t)}getOwnPropertyDescriptor(e,t){if(-1!==e[Lf].indexOf(t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const i=e[Lf].indexOf(t);if(-1!==i){const n=Rf.visit(Reflect.get(e,Pf),i);return Reflect.set(e,t,n),n}}set(e,t,i){const n=e[Lf].indexOf(t);return-1!==n?(of.visit(Reflect.get(e,Pf),n,i),Reflect.set(e,t,i)):!!Reflect.has(e,t)&&Reflect.set(e,t,i)}}let Bf;function Gf(e,t,i,n){const{length:o=0}=e;let s="number"!==typeof t?0:t,r="number"!==typeof i?o:i;return s<0&&(s=(s%o+o)%o),r<0&&(r=(r%o+o)%o),r<s&&(Bf=s,s=r,r=Bf),r>o&&(r=o),n?n(e,s,r):[s,r]}Object.defineProperties(Nf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Lf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Pf]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const zf=e=>e!==e;function _f(e){if("object"!==typeof e||null===e)return zf(e)?zf:t=>t===e;if(e instanceof Date){const t=e.valueOf();return e=>e instanceof Date&&e.valueOf()===t}return ArrayBuffer.isView(e)?t=>!!t&&function(e,t){let i=0;const n=e.length;if(n!==t.length)return!1;if(n>0)do{if(e[i]!==t[i])return!1}while(++i<n);return!0}(e,t):e instanceof Map?function(e){let t=-1;const i=[];for(const n of e.values())i[++t]=_f(n);return Vf(i)}(e):Array.isArray(e)?function(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=_f(e[i]);return Vf(t)}(e):e instanceof xy?function(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=_f(e.get(i));return Vf(t)}(e):function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Object.keys(e);if(!t&&0===i.length)return()=>!1;const n=[];for(let o=-1,s=i.length;++o<s;)n[o]=_f(e[i[o]]);return Vf(n,i)}(e,!0)}function Vf(e,t){return i=>{if(!i||"object"!==typeof i)return!1;switch(i.constructor){case Array:return function(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t[n]))return!1;return!0}(e,i);case Map:return Hf(e,i,i.keys());case Nf:case af:case Object:case void 0:return Hf(e,i,t||Object.keys(i))}return i instanceof xy&&function(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t.get(n)))return!1;return!0}(e,i)}}function Hf(e,t,i){const n=i[Symbol.iterator](),o=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let r=0;const a=e.length;let l=s.next(),d=n.next(),c=o.next();for(;r<a&&!d.done&&!c.done&&!l.done&&(d.value===c.value&&e[r](l.value));++r,d=n.next(),c=o.next(),l=s.next());return!!(r===a&&d.done&&c.done&&l.done)||(n.return&&n.return(),o.return&&o.return(),s.return&&s.return(),!1)}class Wf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function jf(e){return e.reduce(((e,t)=>e+t.nullCount),0)}function Uf(e){return e.reduce(((e,t,i)=>(e[i+1]=e[i]+t.length,e)),new Uint32Array(e.length+1))}function Kf(e,t,i,n){const o=[];for(let s=-1,r=e.length;++s<r;){const r=e[s],a=t[s],{length:l}=r;if(a>=n)break;if(i>=a+l)continue;if(a>=i&&a+l<=n){o.push(r);continue}const d=Math.max(0,i-a),c=Math.min(n-a,l);o.push(r.slice(d,c-d))}return 0===o.length&&o.push(e[0].slice(0,0)),o}function Yf(e,t,i,n){let o=0,s=0,r=t.length-1;do{if(o>=r-1)return i<t[r]?n(e,o,i-t[o]):null;s=o+Math.trunc(.5*(r-o)),i<t[s]?r=s:o=s}while(o<r)}function Zf(e,t){return e.getValid(t)}function Xf(e){function t(t,i,n){return e(t[i],n)}return function(e){return Yf(this.data,this._offsets,e,t)}}function qf(e){let t;function i(i,n,o){return e(i[n],o,t)}return function(e,n){const o=this.data;t=n;const s=Yf(o,this._offsets,e,i);return t=void 0,s}}function Qf(e){let t;function i(i,n,o){let s=o,r=0,a=0;for(let l=n-1,d=i.length;++l<d;){const n=i[l];if(~(r=e(n,t,s)))return a+r;s=0,a+=n.length}return-1}return function(e,n){t=e;const o=this.data,s="number"!==typeof n?i(o,0,0):Yf(o,this._offsets,n,i);return t=void 0,s}}function Jf(e,t,i,n){return 0!==(i&1<<n)}function $f(e,t,i,n){return(i&1<<n)>>n}function ey(e,t,i){const n=i.byteLength+7&-8;if(e>0||i.byteLength<n){const o=new Uint8Array(n);return o.set(e%8===0?i.subarray(e>>3):ty(new iy(i,e,t,null,Jf)).subarray(0,n)),o}return i}function ty(e){const t=[];let i=0,n=0,o=0;for(const r of e)r&&(o|=1<<n),8===++n&&(t[i++]=o,o=n=0);(0===i||n>0)&&(t[i++]=o);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class iy{constructor(e,t,i,n,o){this.bytes=e,this.length=i,this.context=n,this.get=o,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ny(e,t,i){if(i-t<=0)return 0;if(i-t<8){let n=0;for(const o of new iy(e,t,i-t,e,$f))n+=o;return n}const n=i>>3<<3,o=t+(t%8===0?0:8-t%8);return ny(e,t,o)+ny(e,n,i)+function(e,t,i){let n=0,o=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),r=void 0===i?e.byteLength:o+i;for(;r-o>=4;)n+=oy(s.getUint32(o)),o+=4;for(;r-o>=2;)n+=oy(s.getUint16(o)),o+=2;for(;r-o>=1;)n+=oy(s.getUint8(o)),o+=1;return n}(e,o>>3,n-o>>3)}function oy(e){let t=Math.trunc(e);return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24}class sy extends Ev{}function ry(e,t,i){if(void 0===t)return-1;if(null===t)return function(e,t){const{nullBitmap:i}=e;if(!i||e.nullCount<=0)return-1;let n=0;for(const o of new iy(i,e.offset+(t||0),e.length,i,Jf)){if(!o)return n;++n}return-1}(e,i);const n=Rf.getVisitFn(e),o=_f(t);for(let s=(i||0)-1,r=e.length;++s<r;)if(o(n(e,s)))return s;return-1}function ay(e,t,i){const n=Rf.getVisitFn(e),o=_f(t);for(let s=(i||0)-1,r=e.length;++s<r;)if(o(n(e,s)))return s;return-1}sy.prototype.visitNull=function(e,t){return null===t&&e.length>0?0:-1},sy.prototype.visitBool=ry,sy.prototype.visitInt=ry,sy.prototype.visitInt8=ry,sy.prototype.visitInt16=ry,sy.prototype.visitInt32=ry,sy.prototype.visitInt64=ry,sy.prototype.visitUint8=ry,sy.prototype.visitUint16=ry,sy.prototype.visitUint32=ry,sy.prototype.visitUint64=ry,sy.prototype.visitFloat=ry,sy.prototype.visitFloat16=ry,sy.prototype.visitFloat32=ry,sy.prototype.visitFloat64=ry,sy.prototype.visitUtf8=ry,sy.prototype.visitBinary=ry,sy.prototype.visitFixedSizeBinary=ry,sy.prototype.visitDate=ry,sy.prototype.visitDateDay=ry,sy.prototype.visitDateMillisecond=ry,sy.prototype.visitTimestamp=ry,sy.prototype.visitTimestampSecond=ry,sy.prototype.visitTimestampMillisecond=ry,sy.prototype.visitTimestampMicrosecond=ry,sy.prototype.visitTimestampNanosecond=ry,sy.prototype.visitTime=ry,sy.prototype.visitTimeSecond=ry,sy.prototype.visitTimeMillisecond=ry,sy.prototype.visitTimeMicrosecond=ry,sy.prototype.visitTimeNanosecond=ry,sy.prototype.visitDecimal=ry,sy.prototype.visitList=ry,sy.prototype.visitStruct=ry,sy.prototype.visitUnion=ry,sy.prototype.visitDenseUnion=ay,sy.prototype.visitSparseUnion=ay,sy.prototype.visitDictionary=ry,sy.prototype.visitInterval=ry,sy.prototype.visitIntervalDayTime=ry,sy.prototype.visitIntervalYearMonth=ry,sy.prototype.visitFixedSizeList=ry,sy.prototype.visitMap=ry;const ly=new sy;class dy extends Ev{}function cy(e){const{type:t}=e;if(0===e.nullCount&&1===e.stride&&(t.typeId===zg.Timestamp||t instanceof dv&&64!==t.bitWidth||t instanceof fv&&64!==t.bitWidth||t instanceof hv&&t.precision!==Ng.HALF))return new Wf(e.data.length,(t=>{const i=e.data[t];return i.values.subarray(0,i.length)[Symbol.iterator]()}));let i=0;return new Wf(e.data.length,(t=>{const n=e.data[t].length,o=e.slice(i,i+n);return i+=n,new hy(o)}))}class hy{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}dy.prototype.visitNull=cy,dy.prototype.visitBool=cy,dy.prototype.visitInt=cy,dy.prototype.visitInt8=cy,dy.prototype.visitInt16=cy,dy.prototype.visitInt32=cy,dy.prototype.visitInt64=cy,dy.prototype.visitUint8=cy,dy.prototype.visitUint16=cy,dy.prototype.visitUint32=cy,dy.prototype.visitUint64=cy,dy.prototype.visitFloat=cy,dy.prototype.visitFloat16=cy,dy.prototype.visitFloat32=cy,dy.prototype.visitFloat64=cy,dy.prototype.visitUtf8=cy,dy.prototype.visitBinary=cy,dy.prototype.visitFixedSizeBinary=cy,dy.prototype.visitDate=cy,dy.prototype.visitDateDay=cy,dy.prototype.visitDateMillisecond=cy,dy.prototype.visitTimestamp=cy,dy.prototype.visitTimestampSecond=cy,dy.prototype.visitTimestampMillisecond=cy,dy.prototype.visitTimestampMicrosecond=cy,dy.prototype.visitTimestampNanosecond=cy,dy.prototype.visitTime=cy,dy.prototype.visitTimeSecond=cy,dy.prototype.visitTimeMillisecond=cy,dy.prototype.visitTimeMicrosecond=cy,dy.prototype.visitTimeNanosecond=cy,dy.prototype.visitDecimal=cy,dy.prototype.visitList=cy,dy.prototype.visitStruct=cy,dy.prototype.visitUnion=cy,dy.prototype.visitDenseUnion=cy,dy.prototype.visitSparseUnion=cy,dy.prototype.visitDictionary=cy,dy.prototype.visitInterval=cy,dy.prototype.visitIntervalDayTime=cy,dy.prototype.visitIntervalYearMonth=cy,dy.prototype.visitFixedSizeList=cy,dy.prototype.visitMap=cy;const uy=new dy,py=(e,t)=>e+t;class gy extends Ev{visitNull(e,t){return 0}visitInt(e,t){return e.type.bitWidth/8}visitFloat(e,t){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,t){return 1/8}visitDecimal(e,t){return e.type.bitWidth/8}visitDate(e,t){return 4*(e.type.unit+1)}visitTime(e,t){return e.type.bitWidth/8}visitTimestamp(e,t){return e.type.unit===Og.SECOND?4:8}visitInterval(e,t){return 4*(e.type.unit+1)}visitStruct(e,t){return e.children.reduce(((e,i)=>e+fy.visit(i,t)),0)}visitFixedSizeBinary(e,t){return e.type.byteWidth}visitMap(e,t){return 8+e.children.reduce(((e,i)=>e+fy.visit(i,t)),0)}visitDictionary(e,t){var i;return e.type.indices.bitWidth/8+((null===(i=e.dictionary)||void 0===i?void 0:i.getByteLength(e.values[t]))||0)}}const my=(e,t)=>{let{type:i,children:n,typeIds:o,valueOffsets:s}=e;const r=i.typeIdToChildIndex[o[t]];return 8+fy.visit(n[r],s[t])},vy=(e,t)=>{let{children:i}=e;return 4+fy.visitMany(i,i.map((()=>t))).reduce(py,0)};gy.prototype.visitUtf8=(e,t)=>{let{valueOffsets:i}=e;return i[t+1]-i[t]+8},gy.prototype.visitBinary=(e,t)=>{let{valueOffsets:i}=e;return i[t+1]-i[t]+8},gy.prototype.visitList=(e,t)=>{let{valueOffsets:i,stride:n,children:o}=e;const s=o[0],{[t*n]:r}=i,{[t*n+1]:a}=i,l=fy.getVisitFn(s.type),d=s.slice(r,a-r);let c=8;for(let h=-1,u=a-r;++h<u;)c+=l(d,h);return c},gy.prototype.visitFixedSizeList=(e,t)=>{let{stride:i,children:n}=e;const o=n[0],s=o.slice(t*i,i),r=fy.getVisitFn(o.type);let a=0;for(let l=-1,d=s.length;++l<d;)a+=r(s,l);return a},gy.prototype.visitUnion=(e,t)=>e.type.mode===Pg.Dense?my(e,t):vy(e,t),gy.prototype.visitDenseUnion=my,gy.prototype.visitSparseUnion=vy;const fy=new gy;var yy;const by={},Cy={};class xy{constructor(e){var t,i,n;const o=e[0]instanceof xy?e.flatMap((e=>e.data)):e;if(0===o.length||o.some((e=>!(e instanceof Sy))))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=null===(t=o[0])||void 0===t?void 0:t.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{const{get:e,set:t,indexOf:i,byteLength:n}=by[s.typeId],r=o[0];this.isValid=e=>Zf(r,e),this.get=t=>e(r,t),this.set=(e,i)=>t(r,e,i),this.indexOf=e=>i(r,e),this.getByteLength=e=>n(r,e),this._offsets=[0,r.length];break}default:Object.setPrototypeOf(this,Cy[s.typeId]),this._offsets=Uf(o)}this.data=o,this.type=s,this.stride=Tv(s),this.numChildren=null!==(n=null===(i=s.children)||void 0===i?void 0:i.length)&&void 0!==n?n:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((e,t)=>e+t.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=jf(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return"".concat(this.VectorName,"<").concat(this.type[Symbol.toStringTag],">")}get VectorName(){return"".concat(zg[this.type.typeId],"Vector")}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>0}getByteLength(e){return 0}[Symbol.iterator](){return uy.visit(this)}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new xy(this.data.concat(t.flatMap((e=>e.data)).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new xy(Gf(this,e,t,((e,t,i)=>{let{data:n,_offsets:o}=e;return Kf(n,o,t,i)})))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:i,stride:n,ArrayType:o}=this;switch(e.typeId){case zg.Int:case zg.Float:case zg.Decimal:case zg.Time:case zg.Timestamp:switch(t.length){case 0:return new o;case 1:return t[0].values.subarray(0,i*n);default:return t.reduce(((e,t)=>{let{values:i}=t;return e.array.set(i,e.offset),e.offset+=i.length,e}),{array:new o(i*n),offset:0}).array}}return[...this]}toString(){return"[".concat([...this].join(","),"]")}getChild(e){var t;return this.getChildAt(null===(t=this.type.children)||void 0===t?void 0:t.findIndex((t=>t.name===e)))}getChildAt(e){return e>-1&&e<this.numChildren?new xy(this.data.map((t=>{let{children:i}=t;return i[e]}))):null}get isMemoized(){return!!av.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(av.isDictionary(this.type)){const e=new wy(this.data[0].dictionary),t=this.data.map((t=>{const i=t.clone();return i.dictionary=e,i}));return new xy(t)}return new wy(this)}unmemoize(){if(av.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map((t=>{const i=t.clone();return i.dictionary=e,i}));return new xy(t)}return this}}yy=Symbol.toStringTag,xy[yy]=(e=>{e.type=av.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(zg).map((e=>zg[e])).filter((e=>"number"===typeof e&&e!==zg.NONE));for(const i of t){const t=Rf.getVisitFnByTypeId(i),n=of.getVisitFnByTypeId(i),o=ly.getVisitFnByTypeId(i),s=fy.getVisitFnByTypeId(i);by[i]={get:t,set:n,indexOf:o,byteLength:s},Cy[i]=Object.create(e,{isValid:{value:Xf(Zf)},get:{value:Xf(Rf.getVisitFnByTypeId(i))},set:{value:qf(of.getVisitFnByTypeId(i))},indexOf:{value:Qf(ly.getVisitFnByTypeId(i))},getByteLength:{value:Xf(fy.getVisitFnByTypeId(i))}})}return"Vector"})(xy.prototype);class wy extends xy{constructor(e){super(e.data);const t=this.get,i=this.set,n=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(e){const i=o[e];if(void 0!==i)return i;const n=t.call(this,e);return o[e]=n,n}}),Object.defineProperty(this,"set",{value(e,t){i.call(this,e,t),o[e]=t}}),Object.defineProperty(this,"slice",{value:(e,t)=>new wy(n.call(this,e,t))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new xy(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Sy{constructor(e,t,i,n,o){let s,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;this.type=e,this.children=r,this.dictionary=a,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(n||0,-1)),o instanceof Sy?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=Tv(e),o&&((s=o[0])&&(this.valueOffsets=s),(s=o[1])&&(this.values=s),(s=o[2])&&(this.nullBitmap=s),(s=o[3])&&(this.typeIds=s))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:t,values:i,nullBitmap:n,typeIds:o}=this;return t&&(e+=t.byteLength),i&&(e+=i.byteLength),n&&(e+=n.byteLength),o&&(e+=o.byteLength),this.children.reduce(((e,t)=>e+t.byteLength),e)}get nullCount(){let e,t=this._nullCount;return t<=-1&&(e=this.nullBitmap)&&(this._nullCount=t=this.length-ny(e,this.offset,this.offset+this.length)),t}getValid(e){if(this.nullable&&this.nullCount>0){const t=this.offset+e;return 0!==(this.nullBitmap[t>>3]&1<<t%8)}return!0}setValid(e,t){if(!this.nullable)return t;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:e}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:e,_nullCount:0})}const{nullBitmap:i,offset:n}=this,o=n+e>>3,s=(n+e)%8,r=i[o]>>s&1;return t?0===r&&(i[o]|=1<<s,this._nullCount=this.nullCount+1):1===r&&(i[o]&=~(1<<s),this._nullCount=this.nullCount-1),t}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.children;return new Sy(e,t,i,n,o,s,this.dictionary)}slice(e,t){const{stride:i,typeId:n,children:o}=this,s=+(0===this._nullCount)-1,r=16===n?i:1,a=this._sliceBuffers(e,t,i,n);return this.clone(this.type,this.offset+e,t,s,a,0===o.length||this.valueOffsets?o:this._sliceChildren(o,r*e,r*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===zg.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:i}=this,n=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);n[t>>3]=(1<<t-(-8&t))-1,i>0&&n.set(ey(this.offset,t,this.nullBitmap),0);const o=this.buffers;return o[_g.VALIDITY]=n,this.clone(this.type,0,e,i+(e-t),o)}_sliceBuffers(e,t,i,n){let o;const{buffers:s}=this;return(o=s[_g.TYPE])&&(s[_g.TYPE]=o.subarray(e,e+t)),(o=s[_g.OFFSET])&&(s[_g.OFFSET]=o.subarray(e,e+t+1))||(o=s[_g.DATA])&&(s[_g.DATA]=6===n?o:o.subarray(i*e,i*(e+t))),s}_sliceChildren(e,t,i){return e.map((e=>e.slice(t,i)))}}Sy.prototype.children=Object.freeze([]);class My extends Ev{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{type:t,offset:i=0,length:n=0}=e;return new Sy(t,i,n,0)}visitBool(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length>>3,nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitInt(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length,nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitFloat(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length,nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitUtf8(e){const{type:t,offset:i=0}=e,n=km(e.data),o=km(e.nullBitmap),s=Dm(e.valueOffsets),{length:r=s.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,r,a,[s,n,o])}visitBinary(e){const{type:t,offset:i=0}=e,n=km(e.data),o=km(e.nullBitmap),s=Dm(e.valueOffsets),{length:r=s.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,r,a,[s,n,o])}visitFixedSizeBinary(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length/Tv(t),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitDate(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length/Tv(t),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitTimestamp(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length/Tv(t),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitTime(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length/Tv(t),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitDecimal(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length/Tv(t),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitList(e){const{type:t,offset:i=0,child:n}=e,o=km(e.nullBitmap),s=Dm(e.valueOffsets),{length:r=s.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,r,a,[s,void 0,o],[n])}visitStruct(e){const{type:t,offset:i=0,children:n=[]}=e,o=km(e.nullBitmap),{length:s=n.reduce(((e,t)=>{let{length:i}=t;return Math.max(e,i)}),0),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,void 0,o],n)}visitUnion(e){const{type:t,offset:i=0,children:n=[]}=e,o=km(e.nullBitmap),s=Mm(t.ArrayType,e.typeIds),{length:r=s.length,nullCount:a=(e.nullBitmap?-1:0)}=e;if(av.isSparseUnion(t))return new Sy(t,i,r,a,[void 0,void 0,o,s],n);const l=Dm(e.valueOffsets);return new Sy(t,i,r,a,[l,void 0,o,s],n)}visitDictionary(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.indices.ArrayType,e.data),{dictionary:s=new xy([(new My).visit({type:t.dictionary})])}=e,{length:r=o.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,r,a,[void 0,o,n],[],s)}visitInterval(e){const{type:t,offset:i=0}=e,n=km(e.nullBitmap),o=Mm(t.ArrayType,e.data),{length:s=o.length/Tv(t),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,o,n])}visitFixedSizeList(e){const{type:t,offset:i=0,child:n=(new My).visit({type:t.valueType})}=e,o=km(e.nullBitmap),{length:s=n.length/Tv(t),nullCount:r=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,s,r,[void 0,void 0,o],[n])}visitMap(e){const{type:t,offset:i=0,child:n=(new My).visit({type:t.childType})}=e,o=km(e.nullBitmap),s=Dm(e.valueOffsets),{length:r=s.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Sy(t,i,r,a,[s,void 0,o],[n])}}function Dy(e){return(new My).visit(e)}class ky{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this.fields=e||[],this.metadata=t||new Map,i||(i=Ty(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((e=>e.name))}toString(){return"Schema<{ ".concat(this.fields.map(((e,t)=>"".concat(t,": ").concat(e))).join(", ")," }>")}select(e){const t=new Set(e),i=this.fields.filter((e=>t.has(e.name)));return new ky(i,this.metadata)}selectAt(e){const t=e.map((e=>this.fields[e])).filter(Boolean);return new ky(t,this.metadata)}assign(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t[0]instanceof ky?t[0]:Array.isArray(t[0])?new ky(t[0]):new ky(t),o=[...this.fields],s=Ay(Ay(new Map,this.metadata),n.metadata),r=n.fields.filter((e=>{const t=o.findIndex((t=>t.name===e.name));return!~t||(o[t]=e.clone({metadata:Ay(Ay(new Map,o[t].metadata),e.metadata)}))&&!1})),a=Ty(r,new Map);return new ky([...o,...r],s,new Map([...this.dictionaries,...a]))}}ky.prototype.fields=null,ky.prototype.metadata=null,ky.prototype.dictionaries=null;class Iy{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;this.name=e,this.type=t,this.nullable=i,this.metadata=n||new Map}static new(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let[n,o,s,r]=t;return t[0]&&"object"===typeof t[0]&&(({name:n}=t[0]),void 0===o&&(o=t[0].type),void 0===s&&(s=t[0].nullable),void 0===r&&(r=t[0].metadata)),new Iy("".concat(n),o,s,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return"".concat(this.name,": ").concat(this.type)}clone(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let[n,o,s,r]=t;return t[0]&&"object"===typeof t[0]?({name:n=this.name,type:o=this.type,nullable:s=this.nullable,metadata:r=this.metadata}=t[0]):[n=this.name,o=this.type,s=this.nullable,r=this.metadata]=t,Iy.new(n,o,s,r)}}function Ay(e,t){return new Map([...e||new Map,...t||new Map])}function Ty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let i=-1,n=e.length;++i<n;){const n=e[i].type;if(av.isDictionary(n))if(t.has(n.id)){if(t.get(n.id)!==n.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else t.set(n.id,n.dictionary);n.children&&n.children.length>0&&Ty(n.children,t)}return t}Iy.prototype.type=null,Iy.prototype.name=null,Iy.prototype.nullable=null,Iy.prototype.metadata=null;class Ey extends Ev{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,i)=>this.compareFields(e,t[i])))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function Ry(e,t){return t instanceof e.constructor}function Ly(e,t){return e===t||Ry(e,t)}function Py(e,t){return e===t||Ry(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Ny(e,t){return e===t||Ry(e,t)&&e.precision===t.precision}function Fy(e,t){return e===t||Ry(e,t)&&e.unit===t.unit}function Oy(e,t){return e===t||Ry(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function By(e,t){return e===t||Ry(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Gy(e,t){return e===t||Ry(e,t)&&e.mode===t.mode&&e.typeIds.every(((e,i)=>e===t.typeIds[i]))&&_y.compareManyFields(e.children,t.children)}function zy(e,t){return e===t||Ry(e,t)&&e.unit===t.unit}Ey.prototype.visitNull=Ly,Ey.prototype.visitBool=Ly,Ey.prototype.visitInt=Py,Ey.prototype.visitInt8=Py,Ey.prototype.visitInt16=Py,Ey.prototype.visitInt32=Py,Ey.prototype.visitInt64=Py,Ey.prototype.visitUint8=Py,Ey.prototype.visitUint16=Py,Ey.prototype.visitUint32=Py,Ey.prototype.visitUint64=Py,Ey.prototype.visitFloat=Ny,Ey.prototype.visitFloat16=Ny,Ey.prototype.visitFloat32=Ny,Ey.prototype.visitFloat64=Ny,Ey.prototype.visitUtf8=Ly,Ey.prototype.visitBinary=Ly,Ey.prototype.visitFixedSizeBinary=function(e,t){return e===t||Ry(e,t)&&e.byteWidth===t.byteWidth},Ey.prototype.visitDate=Fy,Ey.prototype.visitDateDay=Fy,Ey.prototype.visitDateMillisecond=Fy,Ey.prototype.visitTimestamp=Oy,Ey.prototype.visitTimestampSecond=Oy,Ey.prototype.visitTimestampMillisecond=Oy,Ey.prototype.visitTimestampMicrosecond=Oy,Ey.prototype.visitTimestampNanosecond=Oy,Ey.prototype.visitTime=By,Ey.prototype.visitTimeSecond=By,Ey.prototype.visitTimeMillisecond=By,Ey.prototype.visitTimeMicrosecond=By,Ey.prototype.visitTimeNanosecond=By,Ey.prototype.visitDecimal=Ly,Ey.prototype.visitList=function(e,t){return e===t||Ry(e,t)&&e.children.length===t.children.length&&_y.compareManyFields(e.children,t.children)},Ey.prototype.visitStruct=function(e,t){return e===t||Ry(e,t)&&e.children.length===t.children.length&&_y.compareManyFields(e.children,t.children)},Ey.prototype.visitUnion=Gy,Ey.prototype.visitDenseUnion=Gy,Ey.prototype.visitSparseUnion=Gy,Ey.prototype.visitDictionary=function(e,t){return e===t||Ry(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&_y.visit(e.indices,t.indices)&&_y.visit(e.dictionary,t.dictionary)},Ey.prototype.visitInterval=zy,Ey.prototype.visitIntervalDayTime=zy,Ey.prototype.visitIntervalYearMonth=zy,Ey.prototype.visitFixedSizeList=function(e,t){return e===t||Ry(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&_y.compareManyFields(e.children,t.children)},Ey.prototype.visitMap=function(e,t){return e===t||Ry(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&_y.compareManyFields(e.children,t.children)};const _y=new Ey;function Vy(e,t){return _y.compareSchemas(e,t)}var Hy,Wy;class jy{constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof ky))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Dy({nullCount:0,type:new xv(this.schema.fields),children:this.schema.fields.map((e=>Dy({type:e.type,nullCount:0})))})]=t,!(this.data instanceof Sy))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Uy(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:i,children:n,length:o}=Object.keys(e).reduce(((t,i,n)=>(t.children[n]=e[i],t.length=Math.max(t.length,e[i].length),t.fields[n]=Iy.new({name:i,type:e[i].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),s=new ky(i),r=Dy({type:new xv(i),length:o,children:n,nullCount:0});[this.schema,this.data]=Uy(s,r.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Ky(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Rf.visit(this.data,e)}set(e,t){return of.visit(this.data,e,t)}indexOf(e,t){return ly.visit(this.data,e,t)}getByteLength(e){return fy.visit(this.data,e)}[Symbol.iterator](){return uy.visit(new xy([this.data]))}toArray(){return[...this]}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new qy(this.schema,[this,...t])}slice(e,t){const[i]=new xy([this.data]).slice(e,t).data;return new jy(this.schema,i)}getChild(e){var t;return this.getChildAt(null===(t=this.schema.fields)||void 0===t?void 0:t.findIndex((t=>t.name===e)))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new xy([this.data.children[e]]):null}setChild(e,t){var i;return this.setChildAt(null===(i=this.schema.fields)||void 0===i?void 0:i.findIndex((t=>t.name===e)),t)}setChildAt(e,t){let i=this.schema,n=this.data;if(e>-1&&e<this.numCols){t||(t=new xy([Dy({type:new lv,length:this.numRows})]));const o=i.fields.slice(),s=n.children.slice(),r=o[e].clone({type:t.type});[o[e],s[e]]=[r,t.data[0]],i=new ky(o,new Map(this.schema.metadata)),n=Dy({type:new xv(o),children:s})}return new jy(i,n)}select(e){const t=this.schema.select(e),i=new xv(t.fields),n=[];for(const o of e){const e=this.schema.fields.findIndex((e=>e.name===o));~e&&(n[e]=this.data.children[e])}return new jy(t,Dy({type:i,length:this.numRows,children:n}))}selectAt(e){const t=this.schema.selectAt(e),i=e.map((e=>this.data.children[e])).filter(Boolean),n=Dy({type:new xv(t.fields),length:this.numRows,children:i});return new jy(t,n)}}function Uy(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.reduce(((e,t)=>Math.max(e,t.length)),0);var n;const o=[...e.fields],s=[...t],r=(i+63&-64)>>3;for(const[a,l]of e.fields.entries()){const e=t[a];e&&e.length===i||(o[a]=l.clone({nullable:!0}),s[a]=null!==(n=null===e||void 0===e?void 0:e._changeLengthAndBackfillNullBitmap(i))&&void 0!==n?n:Dy({type:l.type,length:i,nullCount:i,nullBitmap:new Uint8Array(r)}))}return[e.assign(o),Dy({type:new xv(o),length:i,children:s})]}function Ky(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;for(let n=-1,o=e.length;++n<o;){const o=e[n].type,s=t[n];if(av.isDictionary(o))if(i.has(o.id)){if(i.get(o.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else s.dictionary&&i.set(o.id,s.dictionary);o.children&&o.children.length>0&&Ky(o.children,s.children,i)}return i}Hy=Symbol.toStringTag,jy[Hy]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(jy.prototype);class Yy extends jy{constructor(e){const t=e.fields.map((e=>Dy({type:e.type})));super(e,Dy({type:new xv(e.fields),nullCount:0,children:t}))}}function Zy(e,t){return function(e,t){const i=[...e.fields],n=[],o={numBatches:t.reduce(((e,t)=>Math.max(e,t.length)),0)};let s=0,r=0,a=-1;const l=t.length;let d,c=[];for(;o.numBatches-- >0;){for(r=Number.POSITIVE_INFINITY,a=-1;++a<l;)c[a]=d=t[a].shift(),r=Math.min(r,d?d.length:r);Number.isFinite(r)&&(c=Xy(i,r,c,t,o),r>0&&(n[s++]=Dy({type:new xv(i),length:r,nullCount:0,children:c.slice()})))}return[e=e.assign(i),n.map((t=>new jy(e,t)))]}(e,t.map((e=>e.data.concat())))}function Xy(e,t,i,n,o){var s;const r=(t+63&-64)>>3;for(let a=-1,l=n.length;++a<l;){const l=i[a],d=null===l||void 0===l?void 0:l.length;if(d>=t)d===t?i[a]=l:(i[a]=l.slice(0,t),o.numBatches=Math.max(o.numBatches,n[a].unshift(l.slice(t,d-t))));else{const n=e[a];e[a]=n.clone({nullable:!0}),i[a]=null!==(s=null===l||void 0===l?void 0:l._changeLengthAndBackfillNullBitmap(t))&&void 0!==s?s:Dy({type:n.type,length:t,nullCount:t,nullBitmap:new Uint8Array(r)})}}return i}class qy{constructor(){for(var e,t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];if(0===n.length)return this.batches=[],this.schema=new ky([]),this._offsets=[0],this;let s,r;n[0]instanceof ky&&(s=n.shift()),n[n.length-1]instanceof Uint32Array&&(r=n.pop());const a=e=>{if(e){if(e instanceof jy)return[e];if(e instanceof qy)return e.batches;if(e instanceof Sy){if(e.type instanceof xv)return[new jy(new ky(e.type.children),e)]}else{if(Array.isArray(e))return e.flatMap((e=>a(e)));if("function"===typeof e[Symbol.iterator])return[...e].flatMap((e=>a(e)));if("object"===typeof e){const t=Object.keys(e),i=t.map((t=>new xy([e[t]]))),n=new ky(t.map(((e,t)=>new Iy(String(e),i[t].type)))),[,o]=Zy(n,i);return 0===o.length?[new jy(e)]:o}}}return[]},l=n.flatMap((e=>a(e)));if(s=null!==(t=null!==s&&void 0!==s?s:null===(e=l[0])||void 0===e?void 0:e.schema)&&void 0!==t?t:new ky([]),!(s instanceof ky))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const d of l){if(!(d instanceof jy))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Vy(s,d.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=l,this._offsets=null!==r&&void 0!==r?r:Uf(this.data)}get data(){return this.batches.map((e=>{let{data:t}=e;return t}))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((e,t)=>e+t.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=jf(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?uy.visit(new xy(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return"[\n  ".concat(this.toArray().join(",\n  "),"\n]")}concat(){const e=this.schema;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const o=this.data.concat(i.flatMap((e=>{let{data:t}=e;return t})));return new qy(e,o.map((t=>new jy(e,t))))}slice(e,t){const i=this.schema;[e,t]=Gf({length:this.numRows},e,t);const n=Kf(this.data,this._offsets,e,t);return new qy(i,n.map((e=>new jy(i,e))))}getChild(e){return this.getChildAt(this.schema.fields.findIndex((t=>t.name===e)))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map((t=>t.children[e]));if(0===t.length){const{type:i}=this.schema.fields[e],n=Dy({type:i,length:0,nullCount:0});t.push(n._changeLengthAndBackfillNullBitmap(this.numRows))}return new xy(t)}return null}setChild(e,t){var i;return this.setChildAt(null===(i=this.schema.fields)||void 0===i?void 0:i.findIndex((t=>t.name===e)),t)}setChildAt(e,t){let i=this.schema,n=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new xy([Dy({type:new lv,length:this.numRows})]));const o=i.fields.slice(),s=o[e].clone({type:t.type}),r=this.schema.fields.map(((e,t)=>this.getChildAt(t)));[o[e],r[e]]=[s,t],[i,n]=Zy(i,r)}return new qy(i,n)}select(e){const t=this.schema.fields.reduce(((e,t,i)=>e.set(t.name,i)),new Map);return this.selectAt(e.map((e=>t.get(e))).filter((e=>e>-1)))}selectAt(e){const t=this.schema.selectAt(e),i=this.batches.map((t=>t.selectAt(e)));return new qy(t,i)}assign(e){const t=this.schema.fields,[i,n]=e.schema.fields.reduce(((e,i,n)=>{const[o,s]=e,r=t.findIndex((e=>e.name===i.name));return~r?s[r]=n:o.push(n),e}),[[],[]]),o=this.schema.assign(e.schema),s=[...t.map(((e,t)=>[t,n[t]])).map((t=>{let[i,n]=t;return void 0===n?this.getChildAt(i):e.getChildAt(n)})),...i.map((t=>e.getChildAt(t)))].filter(Boolean);return new qy(...Zy(o,s))}}Wy=Symbol.toStringTag,qy[Wy]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Xf(Zf),e.get=Xf(Rf.getVisitFn(zg.Struct)),e.set=qf(of.getVisitFn(zg.Struct)),e.indexOf=Qf(ly.getVisitFn(zg.Struct)),e.getByteLength=Xf(fy.getVisitFn(zg.Struct)),"Table"))(qy.prototype);class Qy{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,i,n){return e.prep(8,24),e.writeInt64(n),e.pad(4),e.writeInt32(i),e.writeInt64(t),e.offset()}}const Jy=new Int32Array(2),$y=new Float32Array(Jy.buffer),eb=new Float64Array(Jy.buffer),tb=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class ib{constructor(e,t){this.low=0|e,this.high=0|t}static create(e,t){return 0==e&&0==t?ib.ZERO:new ib(e,t)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(e){return this.low==e.low&&this.high==e.high}}var nb,ob,sb,rb,ab;ib.ZERO=new ib(0,0),function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(nb||(nb={}));class lb{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new lb(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new ib(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new ib(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return Jy[0]=this.readInt32(e),$y[0]}readFloat64(e){return Jy[tb?0:1]=this.readInt32(e),Jy[tb?1:0]=this.readInt32(e+4),eb[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)}writeUint64(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)}writeFloat32(e,t){$y[0]=t,this.writeInt32(e,Jy[0])}writeFloat64(e,t){eb[0]=t,this.writeInt32(e,Jy[tb?0:1]),this.writeInt32(e+4,Jy[tb?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}__offset(e,t){const i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const i=this.readInt32(e);let n="",o=0;if(e+=4,t===nb.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;o<i;){let t;const i=this.readUint8(e+o++);if(i<192)t=i;else{const n=this.readUint8(e+o++);if(i<224)t=(31&i)<<6|63&n;else{const s=this.readUint8(e+o++);if(i<240)t=(15&i)<<12|(63&n)<<6|63&s;else{t=(7&i)<<18|(63&n)<<12|(63&s)<<6|63&this.readUint8(e+o++)}}}t<65536?n+=String.fromCharCode(t):(t-=65536,n+=String.fromCharCode(55296+(t>>10),56320+(1023&t)))}return n}__union_with_string(e,t){return"string"===typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}createLong(e,t){return ib.create(e,t)}createScalarList(e,t){const i=[];for(let n=0;n<t;++n)null!==e(n)&&i.push(e(n));return i}createObjList(e,t){const i=[];for(let n=0;n<t;++n){const t=e(n);null!==t&&i.push(t.unpack())}return i}}class db{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,t=e||1024,this.bb=lb.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const i=1+~(this.bb.capacity()-this.space+t)&e-1;for(;this.space<i+e+t;){const e=this.bb.capacity();this.bb=db.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){!this.force_defaults&&t.equals(i)||(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=t<<1,n=lb.allocate(i);return n.setPosition(i-t),n.bytes().set(e.bytes(),i-t),n}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);const i=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);const n=2*(i+2);this.addInt16(n);let o=0;const s=this.space;e:for(t=0;t<this.vtables.length;t++){const e=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(e)){for(let t=2;t<n;t+=2)if(this.bb.readInt16(s+t)!=this.bb.readInt16(e+t))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){const n=i?4:0;if(t){const e=t;if(this.prep(this.minalign,8+n),4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=3;t>=0;t--)this.writeInt8(e.charCodeAt(t))}this.prep(this.minalign,4+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const i=this.bb.capacity()-e,n=i-this.bb.readInt32(i);if(!(0!=this.bb.readInt16(n+t)))throw new Error("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(4,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(!e)return 0;let t;if(e instanceof Uint8Array)t=e;else{t=[];let i=0;for(;i<e.length;){let n;const o=e.charCodeAt(i++);if(o<55296||o>=56320)n=o;else{n=(o<<10)+e.charCodeAt(i++)+-56613888}n<128?t.push(n):(n<2048?t.push(n>>6&31|192):(n<65536?t.push(n>>12&15|224):t.push(n>>18&7|240,n>>12&63|128),t.push(n>>6&63|128)),t.push(63&n|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(let i=0,n=this.space,o=this.bb.bytes();i<t.length;i++)o[n++]=t[i];return this.endVector()}createLong(e,t){return ib.create(e,t)}createObjectOffset(e){return null===e?0:"string"===typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let i=0;i<e.length;++i){const n=e[i];if(null===n)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(n))}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e),this.endVector()}}class cb{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new cb).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+4),(t||new cb).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,i){return cb.startKeyValue(e),cb.addKey(e,t),cb.addValue(e,i),cb.endKeyValue(e)}}!function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(ob||(ob={})),function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(sb||(sb={})),function(e){e[e.DenseArray=0]="DenseArray"}(rb||(rb={}));class hb{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new hb).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+4),(t||new hb).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,i){return hb.startInt(e),hb.addBitWidth(e,t),hb.addIsSigned(e,i),hb.endInt(e)}}class ub{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new ub).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+4),(t||new ub).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new hb).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):rb.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,rb.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}!function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"}(ab||(ab={}));class pb{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new pb).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+4),(t||new pb).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):ab.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new ub).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){const i=this.bb.__offset(this.bb_pos,14);return i?(t||new pb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,16);return i?(t||new cb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,ab.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}}class gb{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new gb).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+4),(t||new gb).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):sb.Little}fields(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new pb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new cb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,sb.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let i=t.length-1;i>=0;i--)e.addInt64(t[i]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,i,n,o){return gb.startSchema(e),gb.addEndianness(e,t),gb.addFields(e,i),gb.addCustomMetadata(e,n),gb.addFeatures(e,o),gb.endSchema(e)}}class mb{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new mb).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+4),(t||new mb).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ob.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new gb).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new Qy).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new Qy).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new cb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,ob.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}var vb=ib,fb=db,yb=lb;class bb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lg.V4,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.schema=e,this.version=t,i&&(this._recordBatches=i),n&&(this._dictionaryBatches=n)}static decode(e){e=new yb(km(e));const t=mb.getRootAsFooter(e),i=ky.decode(t.schema());return new Cb(i,t)}static encode(e){const t=new fb,i=ky.encode(t,e.schema);mb.startRecordBatchesVector(t,e.numRecordBatches);for(const s of[...e.recordBatches()].slice().reverse())xb.encode(t,s);const n=t.endVector();mb.startDictionariesVector(t,e.numDictionaries);for(const s of[...e.dictionaryBatches()].slice().reverse())xb.encode(t,s);const o=t.endVector();return mb.startFooter(t),mb.addSchema(t,i),mb.addVersion(t,Lg.V4),mb.addRecordBatches(t,n),mb.addDictionaries(t,o),mb.finishFooterBuffer(t,mb.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,t=-1,i=this.numRecordBatches;++t<i;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,i=this.numDictionaries;++t<i;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class Cb extends bb{constructor(e,t){super(e,t.version()),this._footer=t}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return xb.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return xb.decode(t)}return null}}class xb{constructor(e,t,i){this.metaDataLength=e,this.offset="number"===typeof i?i:i.low,this.bodyLength="number"===typeof t?t:t.low}static decode(e){return new xb(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:i}=t,n=new vb(t.offset,0),o=new vb(t.bodyLength,0);return Qy.createBlock(e,n,i,o)}}const wb={fromIterable:e=>Sb(function*(e){let t,i,n,o,s=!1,r=[],a=0;function l(){return"peek"===n?Sm(r,o)[0]:([i,r,a]=Sm(r,o),i)}({cmd:n,size:o}=yield null);const d=(c=e,Am(Uint8Array,c))[Symbol.iterator]();var c;try{do{if(({done:t,value:i}=Number.isNaN(o-a)?d.next():d.next(o-a)),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do{({cmd:n,size:o}=yield l())}while(o<a)}while(!t)}catch(h){(s=!0)&&"function"===typeof d.throw&&d.throw(h)}finally{!1===s&&"function"===typeof d.return&&d.return(null)}return null}(e)),fromAsyncIterable:e=>Sb(function(e){return Zg(this,arguments,(function*(){let t,i,n,o,s=!1,r=[],a=0;function l(){return"peek"===n?Sm(r,o)[0]:([i,r,a]=Sm(r,o),i)}({cmd:n,size:o}=yield yield Yg(null));const d=(c=e,Tm(Uint8Array,c))[Symbol.asyncIterator]();var c;try{do{if(({done:t,value:i}=Number.isNaN(o-a)?yield Yg(d.next()):yield Yg(d.next(o-a))),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do{({cmd:n,size:o}=yield yield Yg(l()))}while(o<a)}while(!t)}catch(h){(s=!0)&&"function"===typeof d.throw&&(yield Yg(d.throw(h)))}finally{!1===s&&"function"===typeof d.return&&(yield Yg(d.return(new Uint8Array(0))))}return yield Yg(null)}))}(e)),fromDOMStream:e=>Sb(function(e){return Zg(this,arguments,(function*(){let t,i,n,o=!1,s=!1,r=[],a=0;function l(){return"peek"===i?Sm(r,n)[0]:([t,r,a]=Sm(r,n),t)}({cmd:i,size:n}=yield yield Yg(null));const d=new Mb(e);try{do{if(({done:o,value:t}=Number.isNaN(n-a)?yield Yg(d.read()):yield Yg(d.read(n-a))),!o&&t.byteLength>0&&(r.push(km(t)),a+=t.byteLength),o||n<=a)do{({cmd:i,size:n}=yield yield Yg(l()))}while(n<a)}while(!o)}catch(c){(s=!0)&&(yield Yg(d.cancel(c)))}finally{!1===s?yield Yg(d.cancel()):e.locked&&d.releaseLock()}return yield Yg(null)}))}(e)),fromNodeStream:e=>Sb(function(e){return Zg(this,arguments,(function*(){const t=[];let i,n,o,s="error",r=!1,a=null,l=0,d=[];function c(){return"peek"===i?Sm(d,n)[0]:([o,d,l]=Sm(d,n),o)}if(({cmd:i,size:n}=yield yield Yg(null)),e.isTTY)return yield yield Yg(new Uint8Array(0)),yield Yg(null);try{t[0]=Db(e,"end"),t[1]=Db(e,"error");do{if(t[2]=Db(e,"readable"),[s,a]=yield Yg(Promise.race(t.map((e=>e[2])))),"error"===s)break;if((r="end"===s)||(Number.isFinite(n-l)?(o=km(e.read(n-l)),o.byteLength<n-l&&(o=km(e.read()))):o=km(e.read()),o.byteLength>0&&(d.push(o),l+=o.byteLength)),r||n<=l)do{({cmd:i,size:n}=yield yield Yg(c()))}while(n<l)}while(!r)}finally{yield Yg(h(t,"error"===s?a:null))}return yield Yg(null);function h(t,i){return o=d=null,new Promise(((n,o)=>{for(const[i,r]of t)e.off(i,r);try{const t=e.destroy;t&&t.call(e,i),i=void 0}catch(s){i=s||i}finally{null!=i?o(i):n()}}))}}))}(e)),toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Sb=e=>(e.next(),e);class Mb{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return Ug(this,void 0,void 0,(function*(){const{reader:t,source:i}=this;t&&(yield t.cancel(e).catch((()=>{}))),i&&i.locked&&this.releaseLock()}))}read(e){return Ug(this,void 0,void 0,(function*(){if(0===e)return{done:null==this.reader,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=km(t)),t}))}}const Db=(e,t)=>{const i=e=>n([t,e]);let n;return[t,i,new Promise((o=>(n=o)&&e.once(t,i)))]};const kb=Object.freeze({done:!0,value:void 0});class Ib{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Ab{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Tb extends Ab{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((e=>this._closedPromiseResolve=e))}get closed(){return this._closedPromise}cancel(e){return Ug(this,void 0,void 0,(function*(){yield this.return(e)}))}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(kb);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return wb.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return wb.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return Ug(this,void 0,void 0,(function*(){return yield this.abort(e),kb}))}return(e){return Ug(this,void 0,void 0,(function*(){return yield this.close(),kb}))}read(e){return Ug(this,void 0,void 0,(function*(){return(yield this.next(e,"read")).value}))}peek(e){return Ug(this,void 0,void 0,(function*(){return(yield this.next(e,"peek")).value}))}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((e,t)=>{this.resolvers.push({resolve:e,reject:t})})):Promise.resolve(kb)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Eb extends Tb{write(e){if((e=km(e)).byteLength>0)return super.write(e)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Jg(this.toUint8Array(!0)):this.toUint8Array(!1).then(Jg)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Sm(this._values)[0]:(()=>Ug(this,void 0,void 0,(function*(){var e,t;const i=[];let n=0;try{for(var o,s=qg(this);!(o=yield s.next()).done;){const e=o.value;i.push(e),n+=e.byteLength}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=s.return)&&(yield t.call(s))}finally{if(e)throw e.error}}return Sm(i,n)[0]})))()}}class Rb{constructor(e){e&&(this.source=new Pb(wb.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Lb{constructor(e){e instanceof Lb?this.source=e.source:e instanceof Eb?this.source=new Nb(wb.fromAsyncIterable(e)):Cm(e)?this.source=new Nb(wb.fromNodeStream(e)):bm(e)?this.source=new Nb(wb.fromDOMStream(e)):fm(e)?this.source=new Nb(wb.fromDOMStream(e.body)):um(e)?this.source=new Nb(wb.fromIterable(e)):(hm(e)||pm(e))&&(this.source=new Nb(wb.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Pb{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||kb)}return(e){return Object.create(this.source.return&&this.source.return(e)||kb)}}class Nb{constructor(e){this.source=e,this._closedPromise=new Promise((e=>this._closedPromiseResolve=e))}cancel(e){return Ug(this,void 0,void 0,(function*(){yield this.return(e)}))}get closed(){return this._closedPromise}read(e){return Ug(this,void 0,void 0,(function*(){return(yield this.next(e,"read")).value}))}peek(e){return Ug(this,void 0,void 0,(function*(){return(yield this.next(e,"peek")).value}))}next(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return Ug(this,void 0,void 0,(function*(){return yield this.source.next({cmd:t,size:e})}))}throw(e){return Ug(this,void 0,void 0,(function*(){const t=this.source.throw&&(yield this.source.throw(e))||kb;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)}))}return(e){return Ug(this,void 0,void 0,(function*(){const t=this.source.return&&(yield this.source.return(e))||kb;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)}))}}class Fb extends Rb{constructor(e,t){super(),this.position=0,this.buffer=km(e),this.size="undefined"===typeof t?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:i}=this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:i,position:n}=this;return t&&n<i?("number"!==typeof e&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,n+Math.min(i-n,e)),t.subarray(n,this.position)):null}readAt(e,t){const i=this.buffer,n=Math.min(this.size,e+t);return i?i.subarray(e,n):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Ob extends Lb{constructor(e,t){super(),this.position=0,this._handle=e,"number"===typeof t?this.size=t:this._pending=(()=>Ug(this,void 0,void 0,(function*(){this.size=(yield e.stat()).size,delete this._pending})))()}readInt32(e){return Ug(this,void 0,void 0,(function*(){const{buffer:t,byteOffset:i}=yield this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)}))}seek(e){return Ug(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size}))}read(e){return Ug(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:t,size:i,position:n}=this;if(t&&n<i){"number"!==typeof e&&(e=Number.POSITIVE_INFINITY);let o=n,s=0,r=0;const a=Math.min(i,o+Math.min(i-o,e)),l=new Uint8Array(Math.max(0,(this.position=a)-o));for(;(o+=r)<a&&(s+=r)<l.byteLength;)({bytesRead:r}=yield t.read(l,s,l.byteLength-s,o));return l}return null}))}readAt(e,t){return Ug(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:i,size:n}=this;if(i&&e+t<n){const o=Math.min(n,e+t),s=new Uint8Array(o-e);return(yield i.read(s,0,t,e)).buffer}return new Uint8Array(t)}))}close(){return Ug(this,void 0,void 0,(function*(){const e=this._handle;this._handle=null,e&&(yield e.close())}))}throw(e){return Ug(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:e}}))}return(e){return Ug(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:e}}))}}function Bb(e){return e<0&&(e=4294967295+e+1),"0x".concat(e.toString(16))}const Gb=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class zb{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),i=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]);let n=t[3]*i[3];this.buffer[0]=65535&n;let o=n>>>16;return n=t[2]*i[3],o+=n,n=t[3]*i[2]>>>0,o+=n,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<n?65536:0,this.buffer[1]+=o>>>16,this.buffer[1]+=t[1]*i[3]+t[2]*i[2]+t[3]*i[1],this.buffer[1]+=t[0]*i[3]+t[1]*i[2]+t[2]*i[1]+t[3]*i[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return"".concat(Bb(this.buffer[1])," ").concat(Bb(this.buffer[0]))}}class _b extends zb{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return _b.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return _b.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const i=e.length,n=new _b(t);for(let o=0;o<i;){const t=8<i-o?8:i-o,s=new _b(new Uint32Array([Number.parseInt(e.slice(o,o+t),10),0])),r=new _b(new Uint32Array([Gb[t],0]));n.times(r),n.plus(s),o+=t}return n}static convertArray(e){const t=new Uint32Array(2*e.length);for(let i=-1,n=e.length;++i<n;)_b.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new _b(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new _b(new Uint32Array(e.buffer)).plus(t)}}class Vb extends zb{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]|0,i=e.buffer[1]|0;return t<i||t===i&&this.buffer[0]<e.buffer[0]}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return Vb.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return Vb.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const i=e.startsWith("-"),n=e.length,o=new Vb(t);for(let s=i?1:0;s<n;){const t=8<n-s?8:n-s,i=new Vb(new Uint32Array([Number.parseInt(e.slice(s,s+t),10),0])),r=new Vb(new Uint32Array([Gb[t],0]));o.times(r),o.plus(i),s+=t}return i?o.negate():o}static convertArray(e){const t=new Uint32Array(2*e.length);for(let i=-1,n=e.length;++i<n;)Vb.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new Vb(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Vb(new Uint32Array(e.buffer)).plus(t)}}class Hb{constructor(e){this.buffer=e}high(){return new Vb(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Vb(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(e){const t=new _b(new Uint32Array([this.buffer[3],0])),i=new _b(new Uint32Array([this.buffer[2],0])),n=new _b(new Uint32Array([this.buffer[1],0])),o=new _b(new Uint32Array([this.buffer[0],0])),s=new _b(new Uint32Array([e.buffer[3],0])),r=new _b(new Uint32Array([e.buffer[2],0])),a=new _b(new Uint32Array([e.buffer[1],0])),l=new _b(new Uint32Array([e.buffer[0],0]));let d=_b.multiply(o,l);this.buffer[0]=d.low();const c=new _b(new Uint32Array([d.high(),0]));d=_b.multiply(n,l),c.plus(d),d=_b.multiply(o,a),c.plus(d),this.buffer[1]=c.low(),this.buffer[3]=c.lessThan(d)?1:0,this.buffer[2]=c.high();return new _b(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(_b.multiply(i,l)).plus(_b.multiply(n,a)).plus(_b.multiply(o,r)),this.buffer[3]+=_b.multiply(t,l).plus(_b.multiply(i,a)).plus(_b.multiply(n,r)).plus(_b.multiply(o,s)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return"".concat(Bb(this.buffer[3])," ").concat(Bb(this.buffer[2])," ").concat(Bb(this.buffer[1])," ").concat(Bb(this.buffer[0]))}static multiply(e,t){return new Hb(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Hb(new Uint32Array(e.buffer)).plus(t)}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return Hb.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return Hb.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const i=e.startsWith("-"),n=e.length,o=new Hb(t);for(let s=i?1:0;s<n;){const t=8<n-s?8:n-s,i=new Hb(new Uint32Array([Number.parseInt(e.slice(s,s+t),10),0,0,0])),r=new Hb(new Uint32Array([Gb[t],0,0,0]));o.times(r),o.plus(i),s+=t}return i?o.negate():o}static convertArray(e){const t=new Uint32Array(4*e.length);for(let i=-1,n=e.length;++i<n;)Hb.from(e[i],new Uint32Array(t.buffer,t.byteOffset+16*i,4));return t}}class Wb extends Ev{constructor(e,t,i,n){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=i,this.dictionaries=n}visit(e){return super.visit(e instanceof Iy?e.type:e)}visitNull(e){let{length:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t})}visitBool(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===Pg.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return Dy({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return t>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e){let{length:t,offset:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(i,i+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class jb extends Wb{constructor(e,t,i,n){super(new Uint8Array(0),t,i,n),this.sources=e}readNullBitmap(e,t){let{offset:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return t<=0?new Uint8Array(0):ty(this.sources[i])}readOffsets(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return Mm(Uint8Array,Mm(Int32Array,this.sources[t]))}readTypeIds(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return Mm(Uint8Array,Mm(e.ArrayType,this.sources[t]))}readData(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:i}=this;return av.isTimestamp(e)||(av.isInt(e)||av.isTime(e))&&64===e.bitWidth||av.isDate(e)&&e.unit===Fg.MILLISECOND?Mm(Uint8Array,Vb.convertArray(i[t])):av.isDecimal(e)?Mm(Uint8Array,Hb.convertArray(i[t])):av.isBinary(e)||av.isFixedSizeBinary(e)?function(e){const t=e.join(""),i=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)i[n>>1]=Number.parseInt(t.slice(n,n+2),16);return i}(i[t]):av.isBool(e)?ty(i[t]):av.isUtf8(e)?em(i[t].join("")):Mm(Uint8Array,Mm(e.ArrayType,i[t].map((e=>+e))))}}var Ub,Kb,Yb,Zb,Xb,qb,Qb,Jb;!function(e){e[e.BUFFER=0]="BUFFER"}(Ub||(Ub={})),function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"}(Kb||(Kb={}));class $b{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new $b).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+4),(t||new $b).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Kb.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Ub.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,Kb.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,Ub.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,i){return $b.startBodyCompression(e),$b.addCodec(e,t),$b.addMethod(e,i),$b.endBodyCompression(e)}}class eC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(t),e.offset()}}class tC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(t),e.offset()}}class iC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new iC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+4),(t||new iC).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new tC).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new eC).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new $b).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}}class nC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new nC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+4),(t||new nC).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new iC).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}}!function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(Yb||(Yb={}));class oC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new oC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+4),(t||new oC).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Yb.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,Yb.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return oC.startFloatingPoint(e),oC.addPrecision(e,t),oC.endFloatingPoint(e)}}class sC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new sC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+4),(t||new sC).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,i,n){return sC.startDecimal(e),sC.addPrecision(e,t),sC.addScale(e,i),sC.addBitWidth(e,n),sC.endDecimal(e)}}!function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(Zb||(Zb={}));class rC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new rC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+4),(t||new rC).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Zb.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,Zb.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return rC.startDate(e),rC.addUnit(e,t),rC.endDate(e)}}!function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(Xb||(Xb={}));class aC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new aC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+4),(t||new aC).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Xb.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,Xb.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,i){return aC.startTime(e),aC.addUnit(e,t),aC.addBitWidth(e,i),aC.endTime(e)}}class lC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new lC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+4),(t||new lC).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Xb.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,Xb.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,i){return lC.startTimestamp(e),lC.addUnit(e,t),lC.addTimezone(e,i),lC.endTimestamp(e)}}!function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(qb||(qb={}));class dC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new dC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+4),(t||new dC).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qb.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,qb.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return dC.startInterval(e),dC.addUnit(e,t),dC.endInterval(e)}}!function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(Qb||(Qb={}));class cC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new cC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+4),(t||new cC).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Qb.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,Qb.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addInt32(t[i]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,i){return cC.startUnion(e),cC.addMode(e,t),cC.addTypeIds(e,i),cC.endUnion(e)}}class hC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new hC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+4),(t||new hC).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return hC.startFixedSizeBinary(e),hC.addByteWidth(e,t),hC.endFixedSizeBinary(e)}}class uC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new uC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+4),(t||new uC).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return uC.startFixedSizeList(e),uC.addListSize(e,t),uC.endFixedSizeList(e)}}class pC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new pC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+4),(t||new pC).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return pC.startMap(e),pC.addKeysSorted(e,t),pC.endMap(e)}}!function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"}(Jb||(Jb={}));class gC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new gC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+4),(t||new gC).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ob.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Jb.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new cb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,ob.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,Jb.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,e.createLong(0,0))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,i,n,o,s){return gC.startMessage(e),gC.addVersion(e,t),gC.addHeaderType(e,i),gC.addHeader(e,n),gC.addBodyLength(e,o),gC.addCustomMetadata(e,s),gC.endMessage(e)}}class mC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new mC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+4),(t||new mC).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return mC.startNull(e),mC.endNull(e)}}class vC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new vC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+4),(t||new vC).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return vC.startBinary(e),vC.endBinary(e)}}class fC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new fC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+4),(t||new fC).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return fC.startBool(e),fC.endBool(e)}}class yC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new yC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+4),(t||new yC).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return yC.startUtf8(e),yC.endUtf8(e)}}class bC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new bC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+4),(t||new bC).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return bC.startList(e),bC.endList(e)}}class CC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new CC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+4),(t||new CC).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return CC.startStruct_(e),CC.endStruct_(e)}}var xC=ib;const wC=new class extends Ev{visit(e,t){return null==e||null==t?void 0:super.visit(e,t)}visitNull(e,t){return mC.startNull(t),mC.endNull(t)}visitInt(e,t){return hb.startInt(t),hb.addBitWidth(t,e.bitWidth),hb.addIsSigned(t,e.isSigned),hb.endInt(t)}visitFloat(e,t){return oC.startFloatingPoint(t),oC.addPrecision(t,e.precision),oC.endFloatingPoint(t)}visitBinary(e,t){return vC.startBinary(t),vC.endBinary(t)}visitBool(e,t){return fC.startBool(t),fC.endBool(t)}visitUtf8(e,t){return yC.startUtf8(t),yC.endUtf8(t)}visitDecimal(e,t){return sC.startDecimal(t),sC.addScale(t,e.scale),sC.addPrecision(t,e.precision),sC.addBitWidth(t,e.bitWidth),sC.endDecimal(t)}visitDate(e,t){return rC.startDate(t),rC.addUnit(t,e.unit),rC.endDate(t)}visitTime(e,t){return aC.startTime(t),aC.addUnit(t,e.unit),aC.addBitWidth(t,e.bitWidth),aC.endTime(t)}visitTimestamp(e,t){const i=e.timezone&&t.createString(e.timezone)||void 0;return lC.startTimestamp(t),lC.addUnit(t,e.unit),void 0!==i&&lC.addTimezone(t,i),lC.endTimestamp(t)}visitInterval(e,t){return dC.startInterval(t),dC.addUnit(t,e.unit),dC.endInterval(t)}visitList(e,t){return bC.startList(t),bC.endList(t)}visitStruct(e,t){return CC.startStruct_(t),CC.endStruct_(t)}visitUnion(e,t){cC.startTypeIdsVector(t,e.typeIds.length);const i=cC.createTypeIdsVector(t,e.typeIds);return cC.startUnion(t),cC.addMode(t,e.mode),cC.addTypeIds(t,i),cC.endUnion(t)}visitDictionary(e,t){const i=this.visit(e.indices,t);return ub.startDictionaryEncoding(t),ub.addId(t,new xC(e.id,0)),ub.addIsOrdered(t,e.isOrdered),void 0!==i&&ub.addIndexType(t,i),ub.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return hC.startFixedSizeBinary(t),hC.addByteWidth(t,e.byteWidth),hC.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return uC.startFixedSizeList(t),uC.addListSize(t,e.listSize),uC.endFixedSizeList(t)}visitMap(e,t){return pC.startMap(t),pC.addKeysSorted(t,e.keysSorted),pC.endMap(t)}};function SC(e){return new NC(e.count,DC(e.columns),kC(e.columns))}function MC(e,t){return(e.children||[]).filter(Boolean).map((e=>Iy.fromJSON(e,t)))}function DC(e){return(e||[]).reduce(((e,t)=>{return[...e,new BC(t.count,(i=t.VALIDITY,(i||[]).reduce(((e,t)=>e+ +(0===t)),0))),...DC(t.children)];var i}),[])}function kC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let i=-1,n=(e||[]).length;++i<n;){const n=e[i];n.VALIDITY&&t.push(new OC(t.length,n.VALIDITY.length)),n.TYPE&&t.push(new OC(t.length,n.TYPE.length)),n.OFFSET&&t.push(new OC(t.length,n.OFFSET.length)),n.DATA&&t.push(new OC(t.length,n.DATA.length)),t=kC(n.children,t)}return t}function IC(e){return new Map(Object.entries(e||{}))}function AC(e){return new dv(e.isSigned,e.bitWidth)}function TC(e,t){const i=e.type.name;switch(i){case"NONE":case"null":return new lv;case"binary":return new uv;case"utf8":return new pv;case"bool":return new gv;case"list":return new Cv((t||[])[0]);case"struct":case"struct_":return new xv(t||[])}switch(i){case"int":{const t=e.type;return new dv(t.isSigned,t.bitWidth)}case"floatingpoint":{const t=e.type;return new hv(Ng[t.precision])}case"decimal":{const t=e.type;return new mv(t.scale,t.precision,t.bitWidth)}case"date":{const t=e.type;return new vv(Fg[t.unit])}case"time":{const t=e.type;return new fv(Og[t.unit],t.bitWidth)}case"timestamp":{const t=e.type;return new yv(Og[t.unit],t.timezone)}case"interval":{const t=e.type;return new bv(Bg[t.unit])}case"union":{const i=e.type;return new wv(Pg[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const t=e.type;return new Sv(t.byteWidth)}case"fixedsizelist":{const i=e.type;return new Mv(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new Dv((t||[])[0],i.keysSorted)}}throw new Error('Unrecognized type: "'.concat(i,'"'))}var EC=ib,RC=db,LC=lb;class PC{constructor(e,t,i,n){this._version=t,this._headerType=i,this.body=new Uint8Array(0),n&&(this._createHeader=()=>n),this._bodyLength="number"===typeof e?e:e.low}static fromJSON(e,t){const i=new PC(0,Lg.V4,t);return i._createHeader=function(e,t){return()=>{switch(t){case Gg.Schema:return ky.fromJSON(e);case Gg.RecordBatch:return NC.fromJSON(e);case Gg.DictionaryBatch:return FC.fromJSON(e)}throw new Error("Unrecognized Message type: { name: ".concat(Gg[t],", type: ").concat(t," }"))}}(e,t),i}static decode(e){e=new LC(km(e));const t=gC.getRootAsMessage(e),i=t.bodyLength(),n=t.version(),o=t.headerType(),s=new PC(i,n,o);return s._createHeader=function(e,t){return()=>{switch(t){case Gg.Schema:return ky.decode(e.header(new gb));case Gg.RecordBatch:return NC.decode(e.header(new iC),e.version());case Gg.DictionaryBatch:return FC.decode(e.header(new nC),e.version())}throw new Error("Unrecognized Message type: { name: ".concat(Gg[t],", type: ").concat(t," }"))}}(t,o),s}static encode(e){const t=new RC;let i=-1;return e.isSchema()?i=ky.encode(t,e.header()):e.isRecordBatch()?i=NC.encode(t,e.header()):e.isDictionaryBatch()&&(i=FC.encode(t,e.header())),gC.startMessage(t),gC.addVersion(t,Lg.V4),gC.addHeader(t,i),gC.addHeaderType(t,e.headerType),gC.addBodyLength(t,new EC(e.bodyLength,0)),gC.finishMessageBuffer(t,gC.endMessage(t)),t.asUint8Array()}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof ky)return new PC(0,Lg.V4,Gg.Schema,e);if(e instanceof NC)return new PC(t,Lg.V4,Gg.RecordBatch,e);if(e instanceof FC)return new PC(t,Lg.V4,Gg.DictionaryBatch,e);throw new Error("Unrecognized Message header: ".concat(e))}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Gg.Schema}isRecordBatch(){return this.headerType===Gg.RecordBatch}isDictionaryBatch(){return this.headerType===Gg.DictionaryBatch}}class NC{constructor(e,t,i){this._nodes=t,this._buffers=i,this._length="number"===typeof e?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class FC{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=e,this._isDelta=i,this._id="number"===typeof t?t:t.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class OC{constructor(e,t){this.offset="number"===typeof e?e:e.low,this.length="number"===typeof t?t:t.low}}class BC{constructor(e,t){this.length="number"===typeof e?e:e.low,this.nullCount="number"===typeof t?t:t.low}}function GC(e,t){const i=[];for(let n,o=-1,s=-1,r=e.childrenLength();++o<r;)(n=e.children(o))&&(i[++s]=Iy.decode(n,t));return i}function zC(e){const t=new Map;if(e)for(let i,n,o=-1,s=Math.trunc(e.customMetadataLength());++o<s;)(i=e.customMetadata(o))&&null!=(n=i.key())&&t.set(n,i.value());return t}function _C(e){return new dv(e.isSigned(),e.bitWidth())}function VC(e,t){const i=e.typeType();switch(i){case ab.NONE:case ab.Null:return new lv;case ab.Binary:return new uv;case ab.Utf8:return new pv;case ab.Bool:return new gv;case ab.List:return new Cv((t||[])[0]);case ab.Struct_:return new xv(t||[])}switch(i){case ab.Int:{const t=e.type(new hb);return new dv(t.isSigned(),t.bitWidth())}case ab.FloatingPoint:{const t=e.type(new oC);return new hv(t.precision())}case ab.Decimal:{const t=e.type(new sC);return new mv(t.scale(),t.precision(),t.bitWidth())}case ab.Date:{const t=e.type(new rC);return new vv(t.unit())}case ab.Time:{const t=e.type(new aC);return new fv(t.unit(),t.bitWidth())}case ab.Timestamp:{const t=e.type(new lC);return new yv(t.unit(),t.timezone())}case ab.Interval:{const t=e.type(new dC);return new bv(t.unit())}case ab.Union:{const i=e.type(new cC);return new wv(i.mode(),i.typeIdsArray()||[],t||[])}case ab.FixedSizeBinary:{const t=e.type(new hC);return new Sv(t.byteWidth())}case ab.FixedSizeList:{const i=e.type(new uC);return new Mv(i.listSize(),(t||[])[0])}case ab.Map:{const i=e.type(new pC);return new Dv((t||[])[0],i.keysSorted())}}throw new Error('Unrecognized type: "'.concat(ab[i],'" (').concat(i,")"))}Iy.encode=function(e,t){let i=-1,n=-1,o=-1;const s=t.type;let r=t.typeId;av.isDictionary(s)?(r=s.dictionary.typeId,o=wC.visit(s,e),n=wC.visit(s.dictionary,e)):n=wC.visit(s,e);const a=(s.children||[]).map((t=>Iy.encode(e,t))),l=pb.createChildrenVector(e,a),d=t.metadata&&t.metadata.size>0?pb.createCustomMetadataVector(e,[...t.metadata].map((t=>{let[i,n]=t;const o=e.createString("".concat(i)),s=e.createString("".concat(n));return cb.startKeyValue(e),cb.addKey(e,o),cb.addValue(e,s),cb.endKeyValue(e)}))):-1;t.name&&(i=e.createString(t.name));pb.startField(e),pb.addType(e,n),pb.addTypeType(e,r),pb.addChildren(e,l),pb.addNullable(e,!!t.nullable),-1!==i&&pb.addName(e,i);-1!==o&&pb.addDictionary(e,o);-1!==d&&pb.addCustomMetadata(e,d);return pb.endField(e)},Iy.decode=function(e,t){let i,n,o,s,r,a;t&&(a=e.dictionary())?t.has(i=a.id().low)?(s=(s=a.indexType())?_C(s):new cv,r=new Av(t.get(i),s,i,a.isOrdered()),n=new Iy(e.name(),r,e.nullable(),zC(e))):(s=(s=a.indexType())?_C(s):new cv,t.set(i,o=VC(e,GC(e,t))),r=new Av(o,s,i,a.isOrdered()),n=new Iy(e.name(),r,e.nullable(),zC(e))):(o=VC(e,GC(e,t)),n=new Iy(e.name(),o,e.nullable(),zC(e)));return n||null},Iy.fromJSON=function(e,t){let i,n,o,s,r,a;return t&&(s=e.dictionary)?t.has(i=s.id)?(n=(n=s.indexType)?AC(n):new cv,a=new Av(t.get(i),n,i,s.isOrdered),o=new Iy(e.name,a,e.nullable,IC(e.customMetadata))):(n=(n=s.indexType)?AC(n):new cv,t.set(i,r=TC(e,MC(e,t))),a=new Av(r,n,i,s.isOrdered),o=new Iy(e.name,a,e.nullable,IC(e.customMetadata))):(r=TC(e,MC(e,t)),o=new Iy(e.name,r,e.nullable,IC(e.customMetadata))),o||null},ky.encode=function(e,t){const i=t.fields.map((t=>Iy.encode(e,t)));gb.startFieldsVector(e,i.length);const n=gb.createFieldsVector(e,i),o=t.metadata&&t.metadata.size>0?gb.createCustomMetadataVector(e,[...t.metadata].map((t=>{let[i,n]=t;const o=e.createString("".concat(i)),s=e.createString("".concat(n));return cb.startKeyValue(e),cb.addKey(e,o),cb.addValue(e,s),cb.endKeyValue(e)}))):-1;gb.startSchema(e),gb.addFields(e,n),gb.addEndianness(e,HC?sb.Little:sb.Big),-1!==o&&gb.addCustomMetadata(e,o);return gb.endSchema(e)},ky.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;const i=function(e,t){const i=[];for(let n,o=-1,s=-1,r=e.fieldsLength();++o<r;)(n=e.fields(o))&&(i[++s]=Iy.decode(n,t));return i}(e,t);return new ky(i,zC(e),t)},ky.fromJSON=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new ky(function(e,t){return(e.fields||[]).filter(Boolean).map((e=>Iy.fromJSON(e,t)))}(e,t),IC(e.customMetadata),t)},NC.encode=function(e,t){const i=t.nodes||[],n=t.buffers||[];iC.startNodesVector(e,i.length);for(const r of i.slice().reverse())BC.encode(e,r);const o=e.endVector();iC.startBuffersVector(e,n.length);for(const r of n.slice().reverse())OC.encode(e,r);const s=e.endVector();return iC.startRecordBatch(e),iC.addLength(e,new EC(t.length,0)),iC.addNodes(e,o),iC.addBuffers(e,s),iC.endRecordBatch(e)},NC.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lg.V4;if(null!==e.compression())throw new Error("Record batch compression not implemented");return new NC(e.length(),function(e){const t=[];for(let i,n=-1,o=-1,s=e.nodesLength();++n<s;)(i=e.nodes(n))&&(t[++o]=BC.decode(i));return t}(e),function(e,t){const i=[];for(let n,o=-1,s=-1,r=e.buffersLength();++o<r;)(n=e.buffers(o))&&(t<Lg.V4&&(n.bb_pos+=8*(o+1)),i[++s]=OC.decode(n));return i}(e,t))},NC.fromJSON=SC,FC.encode=function(e,t){const i=NC.encode(e,t.data);return nC.startDictionaryBatch(e),nC.addId(e,new EC(t.id,0)),nC.addIsDelta(e,t.isDelta),nC.addData(e,i),nC.endDictionaryBatch(e)},FC.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lg.V4;return new FC(NC.decode(e.data(),t),e.id(),e.isDelta())},FC.fromJSON=function(e){return new FC(SC(e.data),e.id,e.isDelta)},BC.encode=function(e,t){return tC.createFieldNode(e,new EC(t.length,0),new EC(t.nullCount,0))},BC.decode=function(e){return new BC(e.length(),e.nullCount())},OC.encode=function(e,t){return eC.createBuffer(e,new EC(t.offset,0),new EC(t.length,0))},OC.decode=function(e){return new OC(e.offset(),e.length())};const HC=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),WC=e=>"Expected ".concat(Gg[e]," Message in stream, but was null or length 0."),jC=e=>"Header pointer of flatbuffer-encoded ".concat(Gg[e]," Message is null or length 0."),UC=(e,t)=>"Expected to read ".concat(e," metadata bytes, but only read ").concat(t,"."),KC=(e,t)=>"Expected to read ".concat(e," bytes for message body, but only read ").concat(t,".");class YC{constructor(e){this.source=e instanceof Rb?e:new Rb(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||-1===e.value&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?kb:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(WC(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=km(this.source.read(e));if(t.byteLength<e)throw new Error(KC(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Gg.Schema,i=this.readMessage(t),n=null===i||void 0===i?void 0:i.header();if(e&&!n)throw new Error(jC(t));return n}readMetadataLength(){const e=this.source.read(qC),t=e&&new lb(e),i=(null===t||void 0===t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}}readMetadata(e){const t=this.source.read(e);if(!t)return kb;if(t.byteLength<e)throw new Error(UC(e,t.byteLength));return{done:!1,value:PC.decode(t)}}}class ZC{constructor(e,t){this.source=e instanceof Lb?e:vm(e)?new Ob(e,t):new Lb(e)}[Symbol.asyncIterator](){return this}next(){return Ug(this,void 0,void 0,(function*(){let e;return(e=yield this.readMetadataLength()).done||-1===e.value&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?kb:e}))}throw(e){return Ug(this,void 0,void 0,(function*(){return yield this.source.throw(e)}))}return(e){return Ug(this,void 0,void 0,(function*(){return yield this.source.return(e)}))}readMessage(e){return Ug(this,void 0,void 0,(function*(){let t;if((t=yield this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(WC(e));return t.value}))}readMessageBody(e){return Ug(this,void 0,void 0,(function*(){if(e<=0)return new Uint8Array(0);const t=km(yield this.source.read(e));if(t.byteLength<e)throw new Error(KC(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}))}readSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ug(this,void 0,void 0,(function*(){const t=Gg.Schema,i=yield this.readMessage(t),n=null===i||void 0===i?void 0:i.header();if(e&&!n)throw new Error(jC(t));return n}))}readMetadataLength(){return Ug(this,void 0,void 0,(function*(){const e=yield this.source.read(qC),t=e&&new lb(e),i=(null===t||void 0===t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}}))}readMetadata(e){return Ug(this,void 0,void 0,(function*(){const t=yield this.source.read(e);if(!t)return kb;if(t.byteLength<e)throw new Error(UC(e,t.byteLength));return{done:!1,value:PC.decode(t)}}))}}class XC extends YC{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof Ib?e:new Ib(e)}next(){const{_json:e}=this;if(!this._schema){this._schema=!0;return{done:!1,value:PC.fromJSON(e.schema,Gg.Schema)}}if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];this._body=t.data.columns;return{done:!1,value:PC.fromJSON(t,Gg.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];this._body=t.columns;return{done:!1,value:PC.fromJSON(t,Gg.RecordBatch)}}return this._body=[],kb}readMessageBody(e){return function e(t){return(t||[]).reduce(((t,i)=>[...t,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE&&[i.TYPE]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...e(i.children)]),[])}(this._body)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(WC(e));return t.value}readSchema(){const e=Gg.Schema,t=this.readMessage(e),i=null===t||void 0===t?void 0:t.header();if(!t||!i)throw new Error(jC(e));return i}}const qC=4,QC="ARROW1",JC=new Uint8Array(6);for(let i=0;i<6;i+=1)JC[i]=QC.codePointAt(i);function $C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=-1,n=JC.length;++i<n;)if(JC[i]!==e[t+i])return!1;return!0}const ex=JC.length,tx=ex+qC,ix=2*ex+qC;class nx extends Ab{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return hm(t)?t.then((()=>this)):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return wb.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return wb.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof nx?e:gm(e)?function(e){return new ox(new px(e))}(e):vm(e)?function(e){return Ug(this,void 0,void 0,(function*(){const{size:t}=yield e.stat(),i=new Ob(e,t);return t>=ix&&$C(yield i.readAt(0,ex+7&-8))?new ax(new ux(i)):new sx(new cx(i))}))}(e):hm(e)?(()=>Ug(this,void 0,void 0,(function*(){return yield nx.from(yield e)})))():fm(e)||bm(e)||Cm(e)||pm(e)?function(e){return Ug(this,void 0,void 0,(function*(){const t=yield e.peek(ex+7&-8);return t&&t.byteLength>=4?$C(t)?new rx(new hx(yield e.read())):new sx(new cx(e)):new sx(new cx(function(){return Zg(this,arguments,(function*(){}))}()))}))}(new Lb(e)):function(e){const t=e.peek(ex+7&-8);return t&&t.byteLength>=4?$C(t)?new rx(new hx(e.read())):new ox(new dx(e)):new ox(new dx(function*(){}()))}(new Rb(e))}static readAll(e){return e instanceof nx?e.isSync()?mx(e):vx(e):gm(e)||ArrayBuffer.isView(e)||um(e)||mm(e)?mx(e):vx(e)}}class ox extends nx{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Zg(this,arguments,(function*(){yield Yg(yield*Xg(qg(this[Symbol.iterator]())))}))}}class sx extends nx{constructor(e){super(e),this._impl=e}readAll(){var e,t;return Ug(this,void 0,void 0,(function*(){const i=new Array;try{for(var n,o=qg(this);!(n=yield o.next()).done;){const e=n.value;i.push(e)}}catch(s){e={error:s}}finally{try{n&&!n.done&&(t=o.return)&&(yield t.call(o))}finally{if(e)throw e.error}}return i}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class rx extends ox{constructor(e){super(e),this._impl=e}}class ax extends sx{constructor(e){super(e),this._impl=e}}class lx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const i=this._loadVectors(e,t,this.schema.fields),n=Dy({type:new xv(this.schema.fields),length:e.length,children:i});return new jy(this.schema,n)}_loadDictionaryBatch(e,t){const{id:i,isDelta:n}=e,{dictionaries:o,schema:s}=this,r=o.get(i);if(n||!r){const o=s.dictionaries.get(i),a=this._loadVectors(e.data,t,[o]);return(r&&n?r.concat(new xy(a)):new xy(a)).memoize()}return r.memoize()}_loadVectors(e,t,i){return new Wb(t,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class dx extends lx{constructor(e,t){super(t),this._reader=gm(e)?new XC(this._handle=e):new YC(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=gx(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):kb}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):kb}next(){if(this.closed)return kb;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),n=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,n)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),n=t.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,o)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Yy(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class cx extends lx{constructor(e,t){super(t),this._reader=new ZC(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return Ug(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(e){return Ug(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=gx(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(e){return Ug(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):kb}))}return(e){return Ug(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):kb}))}next(){return Ug(this,void 0,void 0,(function*(){if(this.closed)return kb;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),n=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,n)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),n=yield t.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,o)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Yy(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(e){return Ug(this,void 0,void 0,(function*(){return yield this._reader.readMessage(e)}))}}class hx extends dx{constructor(e,t){super(e instanceof Fb?e:new Fb(e),t)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const i=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const e=this._reader.readMessage(Gg.RecordBatch);if(null===e||void 0===e?void 0:e.isRecordBatch()){const t=e.header(),i=this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null}_readDictionaryBatch(e){var t;const i=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const e=this._reader.readMessage(Gg.DictionaryBatch);if(null===e||void 0===e?void 0:e.isDictionaryBatch()){const t=e.header(),i=this._reader.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,n)}}}_readFooter(){const{_handle:e}=this,t=e.size-tx,i=e.readInt32(t),n=e.readAt(t-i,i);return bb.decode(n)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class ux extends cx{constructor(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const o="number"!==typeof i[0]?i.shift():void 0,s=i[0]instanceof Map?i.shift():void 0;super(e instanceof Ob?e:new Ob(e,o),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return Ug(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)}))}readRecordBatch(e){var t;return Ug(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const i=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const e=yield this._reader.readMessage(Gg.RecordBatch);if(null===e||void 0===e?void 0:e.isRecordBatch()){const t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null}))}_readDictionaryBatch(e){var t;return Ug(this,void 0,void 0,(function*(){const i=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const e=yield this._reader.readMessage(Gg.DictionaryBatch);if(null===e||void 0===e?void 0:e.isDictionaryBatch()){const t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,n)}}}))}_readFooter(){return Ug(this,void 0,void 0,(function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-tx,i=yield e.readInt32(t),n=yield e.readAt(t-i,i);return bb.decode(n)}))}_readNextMessageAndValidate(e){return Ug(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null}))}}class px extends dx{constructor(e,t){super(e,t)}_loadVectors(e,t,i){return new jb(t,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function gx(e,t){return t&&"boolean"===typeof t.autoDestroy?t.autoDestroy:e.autoDestroy}function*mx(e){const t=nx.from(e);try{if(!t.open({autoDestroy:!1}).closed)do{yield t}while(!t.reset().open().closed)}finally{t.cancel()}}function vx(e){return Zg(this,arguments,(function*(){const t=yield Yg(nx.from(e));try{if(!(yield Yg(t.open({autoDestroy:!1}))).closed)do{yield yield Yg(t)}while(!(yield Yg(t.reset().open())).closed)}finally{yield Yg(t.cancel())}}))}class fx extends Ev{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof jy?t.data.children:t.data)),t=new fx;for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t.visitMany(e(n)),t}visit(e){if(e instanceof xy)return this.visitMany(e.data),this;const{type:t}=e;if(!av.isDictionary(t)){const{length:i,nullCount:n}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");av.isNull(t)||yx.call(this,n<=0?new Uint8Array(0):ey(e.offset,i,e.nullBitmap)),this.nodes.push(new BC(i,n))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function yx(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new OC(this._byteLength,t)),this._byteLength+=t,this}function bx(e){return yx.call(this,e.values.subarray(0,e.length*e.stride))}function Cx(e){const{length:t,values:i,valueOffsets:n}=e,o=n[0],s=n[t],r=Math.min(s-o,i.byteLength-o);return yx.call(this,Em(-n[0],t,n)),yx.call(this,i.subarray(o,o+r)),this}function xx(e){const{length:t,valueOffsets:i}=e;return i&&yx.call(this,Em(i[0],t,i)),this.visit(e.children[0])}function wx(e){return this.visitMany(e.type.children.map(((t,i)=>e.children[i])).filter(Boolean))[0]}fx.prototype.visitBool=function(e){let t;return e.nullCount>=e.length?yx.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?yx.call(this,ey(e.offset,e.length,t)):yx.call(this,ty(e.values))},fx.prototype.visitInt=bx,fx.prototype.visitFloat=bx,fx.prototype.visitUtf8=Cx,fx.prototype.visitBinary=Cx,fx.prototype.visitFixedSizeBinary=bx,fx.prototype.visitDate=bx,fx.prototype.visitTimestamp=bx,fx.prototype.visitTime=bx,fx.prototype.visitDecimal=bx,fx.prototype.visitList=xx,fx.prototype.visitStruct=wx,fx.prototype.visitUnion=function(e){const{type:t,length:i,typeIds:n,valueOffsets:o}=e;if(yx.call(this,n),t.mode===Pg.Sparse)return wx.call(this,e);if(t.mode===Pg.Dense){if(e.offset<=0)return yx.call(this,o),wx.call(this,e);{const s=n.reduce(((e,t)=>Math.max(e,t)),n[0]),r=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),l=new Int32Array(i),d=Em(-o[0],i,o);for(let e,t,o=-1;++o<i;)-1===(t=a[e=n[o]])&&(t=a[e]=d[e]),l[o]=d[o]-t,++r[e];yx.call(this,l);for(let n,o=-1,c=t.children.length;++o<c;)if(n=e.children[o]){const e=t.typeIds[o],s=Math.min(i,r[e]);this.visit(n.slice(a[e],s))}}}return this},fx.prototype.visitInterval=bx,fx.prototype.visitFixedSizeList=xx,fx.prototype.visitMap=xx;class Sx extends Ab{constructor(e){super(),this._position=0,this._started=!1,this._sink=new Eb,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,cm(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof e.autoDestroy||e.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(e)}toUint8Array(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(e)}writeAll(e){return hm(e)?e.then((e=>this.writeAll(e))):pm(e)?Ix(this,e):kx(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var i;return e===this._sink||e instanceof Eb?this._sink=e:(this._sink=new Eb,e&&(cm(i=e)&&dm(i.abort)&&dm(i.getWriter)&&!ym(i))?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&(e=>cm(e)&&dm(e.end)&&dm(e.write)&&lm(e.writable)&&!ym(e))(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,t&&Vy(t,this._schema)||(null==t?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==e)return this.finish()&&void 0;if(e instanceof qy&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof jy&&!(t=e.schema))return this.finish()&&void 0;if(t&&!Vy(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof jy?e instanceof Yy||this._writeRecordBatch(e):e instanceof qy?this.writeAll(e.batches):um(e)&&this.writeAll(e)}_writeMessage(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,i=PC.encode(e),n=i.byteLength,o=this._writeLegacyIpcFormat?4:8,s=n+o+t&~t,r=s-n-o;return e.headerType===Gg.RecordBatch?this._recordBatchBlocks.push(new xb(s,e.bodyLength,this._position)):e.headerType===Gg.DictionaryBatch&&this._dictionaryBlocks.push(new xb(s,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(s-o)),n>0&&this._write(i),this._writePadding(r)}_write(e){if(this._started){const t=km(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(PC.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(JC)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:i,bufferRegions:n,buffers:o}=fx.assemble(e),s=new NC(e.numRows,i,n),r=PC.from(s,t);return this._writeDictionaries(e)._writeMessage(r)._writeBodyBuffers(o)}_writeDictionaryBatch(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dictionaryDeltaOffsets.set(t,e.length+(this._dictionaryDeltaOffsets.get(t)||0));const{byteLength:n,nodes:o,bufferRegions:s,buffers:r}=fx.assemble(new xy([e])),a=new NC(e.length,o,s),l=new FC(a,t,i),d=PC.from(l,n);return this._writeMessage(d)._writeBodyBuffers(r)}_writeBodyBuffers(e){let t,i,n;for(let o=-1,s=e.length;++o<s;)(t=e[o])&&(i=t.byteLength)>0&&(this._write(t),(n=(i+7&-8)-i)>0&&this._writePadding(n));return this}_writeDictionaries(e){for(let[t,i]of e.dictionaries){let e=this._dictionaryDeltaOffsets.get(t)||0;if(0===e||(i=null===i||void 0===i?void 0:i.slice(e)).length>0)for(const n of i.data)this._writeDictionaryBatch(n,t,e>0),e+=n.length}return this}}class Mx extends Sx{static writeAll(e,t){const i=new Mx(t);return hm(e)?e.then((e=>i.writeAll(e))):pm(e)?Ix(i,e):kx(i,e)}}class Dx extends Sx{static writeAll(e){const t=new Dx;return hm(e)?e.then((e=>t.writeAll(e))):pm(e)?Ix(t,e):kx(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const t=bb.encode(new bb(e,Lg.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function kx(e,t){let i=t;t instanceof qy&&(i=t.batches,e.reset(void 0,t.schema));for(const n of i)e.write(n);return e.finish()}function Ix(e,t){var i,n,o,s;return Ug(this,void 0,void 0,(function*(){try{for(i=qg(t);!(n=yield i.next()).done;){const t=n.value;e.write(t)}}catch(r){o={error:r}}finally{try{n&&!n.done&&(s=i.return)&&(yield s.call(i))}finally{if(o)throw o.error}}return e.finish()}))}function Ax(e){const t=nx.from(e);return hm(t)?t.then((e=>Ax(e))):t.isAsync()?t.readAll().then((e=>new qy(e))):new qy(t.readAll())}function Tx(e){return("stream"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stream")?Mx:Dx).writeAll(e).toUint8Array(!0)}var Ex,Rx=function(){function e(e,t,i,n){var o=this;this.getCell=function(e,t){var i=e<o.headerRows&&t<o.headerColumns,n=e>=o.headerRows&&t<o.headerColumns,s=e<o.headerRows&&t>=o.headerColumns;if(i){var r=["blank"];return t>0&&r.push("level"+e),{type:"blank",classNames:r.join(" "),content:""}}if(s)return{type:"columns",classNames:(r=["col_heading","level"+e,"col"+(l=t-o.headerColumns)]).join(" "),content:o.getContent(o.columnsTable,l,e)};if(n){r=["row_heading","level"+t,"row"+(a=e-o.headerRows)];return{type:"index",id:"T_".concat(o.uuid,"level").concat(t,"_row").concat(a),classNames:r.join(" "),content:o.getContent(o.indexTable,a,t)}}r=["data","row"+(a=e-o.headerRows),"col"+(l=t-o.headerColumns)];var a,l,d=o.styler?o.getContent(o.styler.displayValuesTable,a,l):o.getContent(o.dataTable,a,l);return{type:"data",id:"T_".concat(o.uuid,"row").concat(a,"_col").concat(l),classNames:r.join(" "),content:d}},this.getContent=function(e,t,i){var n=e.getChildAt(i);return null===n?"":o.getColumnTypeId(e,i)===zg.Timestamp?o.nanosToDate(n.get(t)):n.get(t)},this.dataTable=Ax(e),this.indexTable=Ax(t),this.columnsTable=Ax(i),this.styler=n?{caption:n.caption,displayValuesTable:Ax(n.displayValues),styles:n.styles,uuid:n.uuid}:void 0}return Object.defineProperty(e.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{data:Tx(this.dataTable),index:Tx(this.indexTable),columns:Tx(this.columnsTable)}},e.prototype.getColumnTypeId=function(e,t){return e.schema.fields[t].type.typeId},e.prototype.nanosToDate=function(e){return new Date(e/1e6)},e}(),Lx=function(){return Lx=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lx.apply(this,arguments)};!function(e){e.COMPONENT_READY="streamlit:componentReady",e.SET_COMPONENT_VALUE="streamlit:setComponentValue",e.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(Ex||(Ex={}));var Px=function(){function e(){}return e.API_VERSION=1,e.RENDER_EVENT="streamlit:render",e.events=new EventTarget,e.registeredMessageListener=!1,e.setComponentReady=function(){e.registeredMessageListener||(window.addEventListener("message",e.onMessageEvent),e.registeredMessageListener=!0),e.sendBackMsg(Ex.COMPONENT_READY,{apiVersion:e.API_VERSION})},e.setFrameHeight=function(t){void 0===t&&(t=document.body.scrollHeight),t!==e.lastFrameHeight&&(e.lastFrameHeight=t,e.sendBackMsg(Ex.SET_FRAME_HEIGHT,{height:t}))},e.setComponentValue=function(t){var i;t instanceof Rx?(i="dataframe",t=t.serialize()):!function(e){var t=!1;try{t=e instanceof BigInt64Array||e instanceof BigUint64Array}catch(i){}return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array||t}(t)?t instanceof ArrayBuffer?(i="bytes",t=new Uint8Array(t)):i="json":(i="bytes",t=new Uint8Array(t.buffer)),e.sendBackMsg(Ex.SET_COMPONENT_VALUE,{value:t,dataType:i})},e.onMessageEvent=function(t){if(t.data.type===e.RENDER_EVENT)e.onRenderMessage(t.data)},e.onRenderMessage=function(t){var i=t.args;null==i&&(console.error("Got null args in onRenderMessage. This should never happen"),i={});var n=t.dfs&&t.dfs.length>0?e.argsDataframeToObject(t.dfs):{};i=Lx(Lx({},i),n);var o=Boolean(t.disabled),s=t.theme;s&&Nx(s);var r={disabled:o,args:i,theme:s},a=new CustomEvent(e.RENDER_EVENT,{detail:r});e.events.dispatchEvent(a)},e.argsDataframeToObject=function(t){var i=t.map((function(t){var i=t.key,n=t.value;return[i,e.toArrowTable(n)]}));return Object.fromEntries(i)},e.toArrowTable=function(e){var t,i=(t=e.data).data,n=t.index,o=t.columns,s=t.styler;return new Rx(i,n,o,s)},e.sendBackMsg=function(e,t){window.parent.postMessage(Lx({isStreamlitMessage:!0,type:e},t),"*")},e}(),Nx=function(e){var t=document.createElement("style");document.head.appendChild(t),t.innerHTML="\n    :root {\n      --primary-color: ".concat(e.primaryColor,";\n      --background-color: ").concat(e.backgroundColor,";\n      --secondary-background-color: ").concat(e.secondaryBackgroundColor,";\n      --text-color: ").concat(e.textColor,";\n      --font: ").concat(e.font,";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  ")};var Fx=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Fx(t,e),t.prototype.componentDidMount=function(){Px.setFrameHeight()},t.prototype.componentDidUpdate=function(){Px.setFrameHeight()}}(Wg.PureComponent);const Ox=["phase","start","finish","delay","duration"],Bx=["phase","start","finish","delay","duration"],Gx=["start"],zx=["idsMap"],_x=["idsMap"],Vx=["props"],Hx=["props"],Wx=["props"],jx=["type","data","listeners","seriesGrouping","showInMiniChart"],Ux=["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"],Kx=["min","max"],Yx=["onlyPositive"],Zx=["datum","isHighlighted","style","highlightStyle","itemStyler","seriesId"],Xx=["useLabelLayer","pickModes","canHaveAxes","animationResetFns"],qx=["animation","background","container","contextMenu","footnote","height","listeners","locale","minHeight","minWidth","padding","subtitle","theme","title","width","type","cursor","nodeClickRange","tooltip","value","scale","startAngle","endAngle","highlightStyle","segmentation","bar","needle","targets","outerRadius","innerRadius","outerRadiusRatio","innerRadiusRatio","cornerRadius","cornerMode","label","secondaryLabel","spacing"],Qx=["animation","background","container","contextMenu","footnote","height","listeners","locale","minHeight","minWidth","padding","subtitle","theme","title","width","type","cursor","nodeClickRange","tooltip","value","scale","direction","thickness","highlightStyle","segmentation","bar","targets","cornerRadius","cornerMode","label"],Jx=["placement"],$x=["targets"],ew=["dateKey","highKey","openKey","lowKey","closeKey","volumeKey","chartType","navigator","volume","rangeButtons","statusBar","toolbar","zoom","theme","data"],tw=["background","container","height","listeners","locale","minHeight","minWidth","padding","width","theme","data","crosshair","axis","min","max","tooltip","context"],iw=["fills","strokes"],nw=["axes","annotations","series"],ow=["axesButtons","enabled","optionsToolbar","toolbar"],sw=["crossLines"],rw=["top","right","bottom","left"],aw=["innerLabels"],lw=["innerLabels"],dw=["stacked","grouped"],cw=["pool"],hw=["overrideDevicePixelRatio","document","window","styleContainer"];var uw=Object.defineProperty,pw=Object.getOwnPropertyDescriptor,gw=(e,t)=>{for(var i in t)uw(e,i,{get:t[i],enumerable:!0})},mw=(e,t,i,n)=>{for(var o,s=n>1?void 0:n?pw(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(s=(n?o(t,i,s):o(s))||s);return n&&s&&uw(t,i,s),s},vw={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}"},fw=["bar","line","scatter"];var yw=(e=>(e.POINTER="pointer",e.NODE="node",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e))(yw||{});var bw={};gw(bw,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>tM,fromToMotion:()=>iM,staticFromToMotion:()=>nM});var Cw=new Map;function xw(){Cw.clear()}function ww(e){var t;const i=e.constructor,n=Object.hasOwn(i,"className")?i.className:i.name;if(!n)throw new Error("The ".concat(i," is missing the 'className' property."));const o=(null!==(t=Cw.get(n))&&void 0!==t?t:0)+1;return Cw.set(n,o),"".concat(n,"-").concat(o)}function Sw(){var e,t,i;return null!==(e=null===(t=(i=crypto).randomUUID)||void 0===t?void 0:t.call(i))&&void 0!==e?e:function(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t="";for(let i=0;i<e.length;i++)4!==i&&6!==i&&8!==i&&10!==i||(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}()}function*Mw(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)yield*n}function Dw(e){return null!=e&&"object"===typeof e&&Symbol.iterator in e?e:[e]}var kw={containsPoint:function(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height},isEmpty:function(e){return null==e||0===e.height||0===e.width||isNaN(e.height)||isNaN(e.width)},normalize:function(e){let{x:t,y:i,width:n,height:o}=e;if((null==n||n>0)&&(null==o||o>0))return e;null!=t&&null!=n&&n<0&&(n=-n,t-=n);null!=i&&null!=o&&o<0&&(o=-o,i-=o);return{x:t,y:i,width:n,height:o}}};var Iw=Symbol("interpolate"),Aw=e=>null!=e[Iw];function Tw(e,t,i){const n={nearest:void 0,distanceSquared:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0};for(const o of i){const i=o.distanceSquared(e,t);if(0===i)return{nearest:o,distanceSquared:0};i<n.distanceSquared&&(n.nearest=o,n.distanceSquared=i)}return n}function Ew(e,t,i){var n,o;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const{x:r=e,y:a=t}=null!==(n=null===(o=i.transformPoint)||void 0===o?void 0:o.call(i,e,t))&&void 0!==n?n:{},l={nearest:void 0,distanceSquared:s};for(const d of i.children){const{nearest:e,distanceSquared:t}=d.nearestSquared(r,a,l.distanceSquared);if(0===t)return{nearest:e,distanceSquared:t};t<l.distanceSquared&&(l.nearest=e,l.distanceSquared=t)}return l}function Rw(e,t,i){return Math.min(i,Math.max(e,t))}function Lw(e,t){const[i,n]=Pw(t);return Rw(i,e,n)}function Pw(e){if(0===e.length)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function Nw(e){const[t,i]=Pw(e);return i-t}function Fw(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return e>=t[0]-i&&e<=t[1]+i}function Ow(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return Math.abs(e-t)<i}function Bw(e){return-1===Math.sign(e)||Object.is(e,-0)}function Gw(e){return e%1===0}function zw(e){const t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2);return Math.round(e*t)/t}function _w(e,t){return Math.floor(e%t+(e<0?t:0))}function Vw(e){var t,i;if(Math.floor(e)===e)return 0;let n=String(e),o=0;if(e<1e-6||e>=1e21){let e;[n,e]=n.split("e"),null!=e&&(o=Number(e))}const s=null!==(t=null===(i=n.split(".")[1])||void 0===i?void 0:i.length)&&void 0!==t?t:0;return Math.max(s-o,0)}var Hw=class e{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}static fromDOMRect(t){let{x:i,y:n,width:o,height:s}=t;return new e(i,n,o,s)}static merge(t){let i=1/0,n=1/0,o=-1/0,s=-1/0;for(const e of t)e.x<i&&(i=e.x),e.y<n&&(n=e.y),e.x+e.width>o&&(o=e.x+e.width),e.y+e.height>s&&(s=e.y+e.height);return new e(i,n,o-i,s-n)}static nearestBox(e,t,i){return Tw(e,t,i)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON:()=>({})}}clone(){const{x:t,y:i,width:n,height:o}=this;return new e(t,i,n,o)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,t){return kw.containsPoint(this,e,t)}containsBBox(e){const[t,i]=[this.x,this.x+this.width],[n,o]=[this.y,this.y+this.height],[s,r]=[e.x,e.x+e.width],[a,l]=[e.y,e.y+e.height];return Math.min(t,s)===t&&Math.max(i,r)===i&&Math.min(n,a)===n&&Math.max(o,l)===o}intersection(t){if(!this.collidesBBox(t))return;const i=Rw(t.x,this.x,t.x+t.width),n=Rw(t.y,this.y,t.y+t.height),o=Rw(t.x,this.x+this.width,t.x+t.width),s=Rw(t.y,this.y+this.height,t.y+t.height);return new e(i,n,o-i,s-n)}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const i=e-Rw(this.x,e,this.x+this.width),n=t-Rw(this.y,t,this.y+this.height);return i*i+n*n}shrink(e,t){if("number"===typeof e)this.applyMargin(e,t);else for(const[i,n]of Object.entries(e))this.applyMargin(n,i);return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(e,t){if("number"===typeof e)this.applyMargin(-e,t);else for(const[i,n]of Object.entries(e))this.applyMargin(-n,i);return this}applyMargin(e,t){switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.y+=e,this.width-=2*e,this.height-=2*e}}translate(e,t){return this.x+=e,this.y+=t,this}combine(e){const{x:t,y:i,width:n,height:o}=this;this.x=Math.min(t,e.x),this.y=Math.min(i,e.y),this.width=Math.max(t+n,e.x+e.width)-this.x,this.height=Math.max(i+o,e.y+e.height)-this.y}[Iw](t,i){return new e(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};Hw.zero=Object.freeze(new Hw(0,0,0,0)),Hw.NaN=Object.freeze(new Hw(NaN,NaN,NaN,NaN));var Ww=Hw;function jw(e){return function(t,i){const n="__".concat(i);t[i]||function(e,t,i,n){const{type:o="normal",changeCb:s,convertor:r,checkDirtyOnAssignment:a=!1}=null!==n&&void 0!==n?n:{},l={type:o,changeCb:s,checkDirtyOnAssignment:a,convertor:r};let d;switch(o){case"normal":d=function(e,t){const{changeCb:i}=t;return function(t){return t!==this[e]?(this[e]=t,this.markDirty(),null===i||void 0===i||i(this),t):Uw}}(i,l);break;case"transform":d=function(e){return function(t){return t!==this[e]?(this[e]=t,this.markDirtyTransform(),t):Uw}}(i);break;case"path":d=function(e){return function(t){return t!==this[e]?(this[e]=t,this._dirtyPath||(this._dirtyPath=!0,this.markDirty()),t):Uw}}(i)}d=function(e,t){const{checkDirtyOnAssignment:i}=t;if(i)return function(t){const i=e.call(this,t);return i!==Uw&&!0===(null===t||void 0===t?void 0:t._dirty)&&this.markDirty(),i};return e}(function(e,t){const{changeCb:i}=t;if(i)return function(t){const n=e.call(this,t);return n!==Uw&&i.call(this,this),n};return e}(function(e,t){const{convertor:i}=t;if(i)return function(t){e.call(this,i(t))};return e}(d,l),l),l);const c=function(){return this[i]};Object.defineProperty(e,t,{set:d,get:c,enumerable:!0,configurable:!0})}(t,i,n,e)}}var Uw=Symbol("no-change");var Kw=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(Kw||{}),Yw=class e{constructor(t){var i,n;this.serialNumber=e._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=ww(this),this.pointerEvents=0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=null===t||void 0===t?void 0:t.name,this.tag=null!==(i=null===t||void 0===t?void 0:t.tag)&&void 0!==i?i:NaN,this.zIndex=null!==(n=null===t||void 0===t?void 0:t.zIndex)&&void 0!==n?n:0}static toSVG(e,t,i){var n,o;const s=null===e||void 0===e?void 0:e.toSVG();if(null==s||!s.elements.length&&(null===(n=s.defs)||void 0===n||!n.length))return;const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("width",String(t)),r.setAttribute("height",String(i)),r.setAttribute("viewBox","0 0 ".concat(t," ").concat(i)),null!==(o=s.defs)&&void 0!==o&&o.length){const e=document.createElementNS("http://www.w3.org/2000/svg","defs");e.append(...s.defs),r.append(e)}return r.append(...s.elements),r.outerHTML}static*extractBBoxes(e,t){for(const i of e)if(!t||i.visible&&!i.transitionOut){const e=i.getBBox();e&&(yield e)}}get datum(){var e,t;return null!==(e=this._datum)&&void 0!==e?e:null===(t=this.parentNode)||void 0===t?void 0:t.datum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum,this._datum=e)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}preRender(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=e,this.childNodeCounts.thisComplexity=e;for(const t of this.children()){const e=t.preRender();this.childNodeCounts.groups+=e.groups,this.childNodeCounts.nonGroups+=e.nonGroups,this.childNodeCounts.complexity+=e.complexity}return this.childNodeCounts}render(e){const{stats:t}=e;if(this._dirty=!1,e.debugNodeSearch){var i;const t=null!==(i=this.name)&&void 0!==i?i:this.id;var n;if(e.debugNodeSearch.some((e=>"string"===typeof e?e===t:e.test(t))))e.debugNodes[null!==(n=this.name)&&void 0!==n?n:this.id]=this}t&&(t.nodesRendered++,t.opsPerformed+=this.childNodeCounts.thisComplexity)}_setLayerManager(e){this._layerManager=e,this._debug=null===e||void 0===e?void 0:e.debug;for(const t of this.children())t._setLayerManager(e)}sortChildren(e){if(this.dirtyZIndex=!1,!this.childNodes)return;const t=[...this.childNodes].sort(e);this.childNodes.clear();for(const i of t)this.childNodes.add(i)}*traverseUp(e){let t=this;for(e&&(yield t);t=t.parentNode;)yield t}*children(){if(this.childNodes)for(const e of this.childNodes)yield e}isLeaf(){var e;return!(null!==(e=this.childNodes)&&void 0!==e&&e.size)}isRoot(){return!this.parentNode}append(e){var t;null!==(t=this.childNodes)&&void 0!==t||(this.childNodes=new Set);for(const n of Dw(e)){var i;null===(i=n.parentNode)||void 0===i||i.removeChild(n),this.childNodes.add(n),n.parentNode=this,n._setLayerManager(this.layerManager)}this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(e){return this.append(e),e}removeChild(e){var t;return!(null===(t=this.childNodes)||void 0===t||!t.delete(e))&&(delete e.parentNode,e._setLayerManager(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(),!0)}remove(){var e,t;return null!==(e=null===(t=this.parentNode)||void 0===t?void 0:t.removeChild(this))&&void 0!==e&&e}clear(){var e;for(const t of this.children())delete t.parentNode,t._setLayerManager();null===(e=this.childNodes)||void 0===e||e.clear(),this.invalidateCachedBBox()}destroy(){var e;null===(e=this.parentNode)||void 0===e||e.removeChild(this)}setProperties(e,t){if(t)for(const i of t)this[i]=e[i];else Object.assign(this,e);return this}containsPoint(e,t){return!1}pickNode(e,t){if(!this.visible||1===this.pointerEvents||!this.containsPoint(e,t))return;const i=[...this.children()];if(i.length>1e3)for(let n=i.length-1;n>=0;n--){const o=i[n],s=o.containsPoint(e,t)?o.pickNode(e,t):void 0;if(s)return s}else if(i.length)for(let n=i.length-1;n>=0;n--){const o=i[n].pickNode(e,t);if(o)return o}else if(!this.isContainerNode)return this}invalidateCachedBBox(){var e;null!=this.cachedBBox&&(this.cachedBBox=void 0,null===(e=this.parentNode)||void 0===e||e.invalidateCachedBBox())}getBBox(){return null==this.cachedBBox&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(){const{_dirty:e}=this;null==this.cachedBBox&&e||(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty){this._dirty=!1;for(const e of this.children())e.markClean()}}onZIndexChange(){const{parentNode:e}=this;e&&(e.dirtyZIndex=!0)}toSVG(){}};Yw._nextSerialNumber=0,mw([jw()],Yw.prototype,"visible",2),mw([jw({changeCb:e=>e.onZIndexChange()})],Yw.prototype,"zIndex",2);var Zw=Yw,Xw=(e,t,i)=>e*(1-i)+t*i,qw=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},Qw=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},Jw=class e{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=Rw(0,e||0,1),this.g=Rw(0,t||0,1),this.b=Rw(0,i||0,1),this.a=Rw(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!e.parseHex(t):t.indexOf("rgb")>=0?!!e.stringToRgba(t):!!e.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.indexOf("#")>=0)return e.fromHexString(t);const i=e.nameToHex.get(t.toLowerCase());if(i)return e.fromHexString(i);if(t.indexOf("rgb")>=0)return e.fromRgbaString(t);throw new Error("Invalid color string: '".concat(t,"'"))}static parseHex(e){var t;let i;switch((e=e.replace(/ /g,"").slice(1)).length){case 6:case 8:i=[];for(let t=0;t<e.length;t+=2)i.push(parseInt("".concat(e[t]).concat(e[t+1]),16));break;case 3:case 4:i=e.split("").map((e=>parseInt(e,16))).map((e=>e+16*e))}if((null===(t=i)||void 0===t?void 0:t.length)>=3&&i.every((e=>e>=0)))return 3===i.length&&i.push(255),i}static fromHexString(t){const i=e.parseHex(t);if(i){const[t,n,o,s]=i;return new e(t/255,n/255,o/255,s/255)}throw new Error("Malformed hexadecimal color string: '".concat(t,"'"))}static stringToRgba(e){let t=-1,i=-1;for(let s=0;s<e.length;s++){const n=e[s];if(-1===t&&"("===n)t=s;else if(")"===n){i=s;break}}if(-1===t||-1===i)return;const n=e.substring(t+1,i).split(","),o=[];for(let s=0;s<n.length;s++){const e=n[s];let t=parseFloat(e);if(!Number.isFinite(t))return;e.indexOf("%")>=0?(t=Rw(0,t,100),t/=100):3===s?t=Rw(0,t,1):(t=Rw(0,t,255),t/=255),o.push(t)}return o}static fromRgbaString(t){const i=e.stringToRgba(t);if(i){if(3===i.length)return new e(i[0],i[1],i[2]);if(4===i.length)return new e(i[0],i[1],i[2],i[3])}throw new Error("Malformed rgb/rgba color string: '".concat(t,"'"))}static fromArray(t){if(4===t.length)return new e(t[0],t[1],t[2],t[3]);if(3===t.length)return new e(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.HSBtoRGB(t,i,n);return new e(s[0],s[1],s[2],o)}static fromHSL(t,i,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.HSLtoRGB(t,i,n);return new e(s[0],s[1],s[2],o)}static fromOKLCH(t,i,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.OKLCHtoRGB(t,i,n);return new e(s[0],s[1],s[2],o)}static padHex(e){return 1===e.length?"0"+e:e}toHexString(){let t="#"+e.padHex(Math.round(255*this.r).toString(16))+e.padHex(Math.round(255*this.g).toString(16))+e.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=e.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,e);return 1!==this.a?(t.push(Math.round(this.a*i)/i),"rgba(".concat(t.join(", "),")")):"rgb(".concat(t.join(", "),")")}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return e.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,i){const n=qw(e),o=qw(t),s=qw(i),r=Math.cbrt(.4122214708*n+.5363325363*o+.0514459929*s),a=Math.cbrt(.2119034982*n+.6806995451*o+.1073969566*s),l=Math.cbrt(.0883024619*n+.2817188376*o+.6299787005*s),d=.2104542553*r+.793617785*a-.0040720468*l,c=1.9779984951*r-2.428592205*a+.4505937099*l,h=.0259040371*r+.7827717662*a-.808675766*l,u=180*Math.atan2(h,c)/Math.PI;return[d,Math.hypot(c,h),u>=0?u:u+360]}static OKLCHtoRGB(e,t,i){const n=e,o=t*Math.cos(i*Math.PI/180),s=t*Math.sin(i*Math.PI/180),r=(n+.3963377774*o+.2158037573*s)**3,a=(n-.1055613458*o-.0638541728*s)**3,l=(n-.0894841775*o-1.291485548*s)**3,d=-1.2684380046*r+2.6097574011*a-.3413193965*l,c=-.0041960863*r-.7034186147*a+1.707614701*l;return[Qw(4.0767416621*r-3.3077115913*a+.2309699292*l),Qw(d),Qw(c)]}static RGBtoHSL(e,t,i){const n=Math.min(e,t,i),o=Math.max(e,t,i),s=(o+n)/2;let r,a;if(o===n)r=0,a=0;else{const l=o-n;a=s>.5?l/(2-o-n):l/(o+n),r=o===e?(t-i)/l+(t<i?6:0):o===t?(i-e)/l+2:(e-t)/l+4,r*=60}return[r,a,s]}static HSLtoRGB(e,t,i){if(0===t)return[i,i,i];const n=i<.5?i*(1+t):i+t-i*t,o=2*i-n;function s(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?o+6*(n-o)*e:e<.5?n:e<2/3?o+(n-o)*(2/3-e)*6:o}return[s((e=(e%360+360)%360)/360+1/3),s(e/360),s(e/360-1/3)]}static RGBtoHSB(e,t,i){const n=Math.min(e,t,i),o=Math.max(e,t,i);let s=0;if(n!==o){const r=o-n,a=(o-e)/r,l=(o-t)/r,d=(o-i)/r;s=e===o?d-l:t===o?2+a-d:4+l-a,s/=6,s<0&&(s+=1)}return[360*s,0===o?0:(o-n)/o,o]}static HSBtoRGB(e,t,i){e=(e%360+360)%360/360;let n=0,o=0,s=0;if(0===t)n=o=s=i;else{const r=6*(e-Math.floor(e)),a=r-Math.floor(r),l=i*(1-t),d=i*(1-t*a),c=i*(1-t*(1-a));switch(r|0){case 0:n=i,o=c,s=l;break;case 1:n=d,o=i,s=l;break;case 2:n=l,o=i,s=c;break;case 3:n=l,o=d,s=i;break;case 4:n=c,o=l,s=i;break;case 5:n=i,o=l,s=d}}return[n,o,s]}static mix(t,i,n){return new e(Xw(t.r,i.r,n),Xw(t.g,i.g,n),Xw(t.b,i.b,n),Xw(t.a,i.a,n))}};Jw.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var $w=Jw;function eS(e,t){if("string"===typeof e)try{e=$w.fromString(e)}catch(i){e=$w.fromArray([0,0,0])}if("string"===typeof t)try{t=$w.fromString(t)}catch(n){t=$w.fromArray([0,0,0])}return i=>$w.mix(e,t,i).toRgbaString()}var tS=Symbol("BREAK"),iS="__decorator_config";function nS(e,t){null==Object.getOwnPropertyDescriptor(e,iS)&&Object.defineProperty(e,iS,{value:{}});const i=e[iS],n=t.toString();if("undefined"!==typeof i[n])return i[n];const o=new WeakMap;i[n]={setters:[],getters:[],observers:[],valuesMap:o};const s=Object.getOwnPropertyDescriptor(e,t),r=null===s||void 0===s?void 0:s.set,a=null===s||void 0===s?void 0:s.get;return Object.defineProperty(e,t,{set:function(e){const{setters:s,observers:l}=i[n];let d;s.some((e=>e.length>2))&&(d=a?a.call(this):o.get(this));for(const i of s)if((e=i(this,t,e,d))===tS)return;r?r.call(this,e):o.set(this,e);for(const t of l)t(this,e,d)},get:function(){let e=a?a.call(this):o.get(this);for(const o of i[n].getters)if(e=o(this,t,e),e===tS)return;return e},enumerable:!0,configurable:!1}),i[n]}function oS(e,t,i){return(n,o)=>{const s=nS(n,o);s.setters.push(e),t&&s.getters.unshift(t),i&&Object.assign(s,i)}}function sS(e){return(t,i)=>{nS(t,i).observers.push(e)}}function rS(e){return"undefined"!==typeof e&&iS in e}function aS(e){const t=new Set;for(;rS(e);){var i;t.add(null===(i=e)||void 0===i?void 0:i[iS]),e=Object.getPrototypeOf(e)}return Array.from(t).flatMap((e=>Object.keys(e)))}function lS(e){return aS(e).reduce(((t,i)=>{var n;return t[i]=null!==(n=e[i])&&void 0!==n?n:null,t}),{})}function dS(e){return null!=e}function cS(e){return Array.isArray(e)}function hS(e){return"boolean"===typeof e}function uS(e){return e instanceof Date}function pS(e){return uS(e)&&!isNaN(Number(e))}function gS(e){return e instanceof RegExp}function mS(e){return"function"===typeof e}function vS(e){return"object"===typeof e&&null!==e&&!cS(e)}function fS(e){return cS(e)||yS(e)}function yS(e){return"object"===typeof e&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function bS(e){return"string"===typeof e}function CS(e){return"number"===typeof e}function xS(e){return Number.isFinite(e)}function wS(e){return"undefined"!==typeof window&&e instanceof HTMLElement}function SS(e,t){return bS(t)&&Object.keys(e).includes(t)}function MS(e,t){return Object.values(e).includes(t)}function DS(e){return"symbol"===typeof e}function kS(e,t){return e.type!==t}function IS(e,t){return Array.isArray(e)?!!Array.isArray(t)&&(e.length===t.length&&e.every(((e,i)=>IS(e,t[i])))):yS(e)?!!yS(t)&&AS(e,t,IS):e===t}function AS(e,t,i){for(const n of Object.keys(t))if(!(n in e))return!1;for(const n of Object.keys(e)){if(!(n in t))return!1;if(!i(e[n],t[n]))return!1}return!0}function TS(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return ES(...t.reverse())}function ES(){const e={};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(const s of i){if(!vS(s))continue;const t=rS(s)?aS(s):Object.keys(s);for(const i of t){var o;if(yS(e[i])&&yS(s[i]))e[i]=ES(e[i],s[i]);else null!==(o=e[i])&&void 0!==o||(e[i]=s[i])}}return e}function RS(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i&&cS(e)?e.map((e=>ES(e,...i))):e}function LS(e,t){return Object.entries(e).reduce(((i,n)=>{let[o,s]=n;return i[o]=t(s,o,e),i}),{})}function PS(e,t){const i=l({},e);for(const n of t)delete i[n];return i}function NS(e,t){return(cS(t)?t:t.split(".")).reduce(((e,t)=>e[t]),e)}var FS=new Set(["__proto__","constructor","prototype"]);function OS(e,t,i){const n=cS(t)?t.slice():t.split("."),o=n.pop();if(n.some((e=>FS.has(e))))return;const s=n.reduce(((e,t)=>e[t]),e);return s[o]=i,s[o]}function BS(e,t,i){if(void 0===i)return t;for(const n of e){const e=i[n];void 0!==e&&(t[n]=e)}return t}function GS(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((t=>{const i=e[t];null===i||"object"!==typeof i&&"function"!==typeof i||Object.isFrozen(i)||GS(i)})),e}var zS={};gw(zS,{easeIn:()=>VS,easeInOut:()=>WS,easeInOutQuad:()=>KS,easeInQuad:()=>jS,easeOut:()=>HS,easeOutQuad:()=>US,inverseEaseOut:()=>YS,linear:()=>_S});var _S=e=>e,VS=e=>1-Math.cos(e*Math.PI/2),HS=e=>Math.sin(e*Math.PI/2),WS=e=>-(Math.cos(e*Math.PI)-1)/2,jS=e=>e*e,US=e=>1-(1-e)**2,KS=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,YS=e=>2*Math.asin(e)/Math.PI,ZS=.2,XS=["initial","remove","update","add","trailing","end","none"],qS={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:ZS,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},QS=(e=>(e.Loop="loop",e.Reverse="reverse",e))(QS||{});function JS(e){return e.every((e=>e instanceof Zw))?{nodes:e,selections:[]}:{nodes:[],selections:e}}function $S(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(((e,i)=>$S(e,t[i]))):Aw(e)&&Aw(t)?e.equals(t):!(!yS(e)||!yS(t))&&AS(e,t,$S))}var eM=class{constructor(e){var t,i,n,o;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=null===(t=e.autoplay)||void 0===t||t,this.ease=null!==(i=e.ease)&&void 0!==i?i:_S,this.phase=e.phase;const s=null!==(n=e.duration)&&void 0!==n?n:qS[this.phase].animationDuration;var r,a,l;(this.duration=s*e.defaultDuration,this.delay=(null!==(o=e.delay)&&void 0!==o?o:0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,!0===e.skip)&&(null===(r=this.onUpdate)||void 0===r||r.call(this,e.to,!1,this),null===(a=this.onStop)||void 0===a||a.call(this,this),null===(l=this.onComplete)||void 0===l||l.call(this,this),this.isComplete=!0);!1!==e.collapsable&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return $S(e.from,e.to)?0:t}play(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isPlaying||this.isComplete||(this.isPlaying=!0,null===(e=this.onPlay)||void 0===e||e.call(this,this),this.autoplay&&(this.autoplay=!1,i&&(null===(t=this.onUpdate)||void 0===t||t.call(this,this.from,!0,this))))}pause(){this.isPlaying=!1}stop(){var e;(this.isPlaying=!1,this.isComplete)||(this.isComplete=!0,null===(e=this.onStop)||void 0===e||e.call(this,this))}update(e){var t;if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);const i=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);null===(t=this.onUpdate)||void 0===t||t.call(this,n,!1,this);const o=this.delay+this.duration;var s;return this.elapsed>=o?(this.stop(),this.isComplete=!0,null===(s=this.onComplete)||void 0===s||s.call(this,this),e-(o-i)):0}get delta(){return this.ease(Rw(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if("object"!==typeof t||Aw(t))return this.interpolateValue(e,t);const i=[];for(const n of Object.keys(t)){const o=this.interpolateValue(e[n],t[n]);null!=o&&i.push([n,o])}return e=>{const t={};for(const[n,o]of i)t[n]=o(e);return t}}interpolateValue(e,t){if(null!=e&&null!=t){if(Aw(e))return i=>e[Iw](t,i);try{switch(typeof e){case"number":return function(e,t){return i=>Number(e)*(1-i)+Number(t)*i}(e,t);case"string":return eS(e,t);case"boolean":if(e===t)return()=>e}}catch(i){}throw new Error("Unable to interpolate values: ".concat(e,", ").concat(t))}}},tM={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function iM(e,t,i,o,s,r,a){const{fromFn:d,toFn:c,applyFn:h=(e,t)=>e.setProperties(t)}=s,{nodes:u,selections:p}=JS(o),g=(o,s)=>{let u,p=0,g=0;for(const v of s){var m;const f=o[p]===v,y={last:g>=s.length-1,lastLive:p>=o.length-1,prev:s[g-1],prevFromProps:u,prevLive:o[p-1],next:s[g+1],nextLive:o[p+(f?1:0)]},b="".concat(e,"_").concat(t,"_").concat(v.id);i.stopByAnimationId(b);let C="unknown";f?r&&a&&(C=oM(v,v.datum,r,a)):C="removed",v.transitionOut="removed"===C;const x=d(v,v.datum,C,y),{phase:w,start:S,finish:M,delay:D,duration:k}=x,I=n(x,Ox),A=c(v,v.datum,C,y),{phase:T,start:E,finish:R,delay:L,duration:P}=A,N=n(A,Bx),F=null==M;i.animate({id:b,groupId:e,phase:null!==(m=null!==w&&void 0!==w?w:T)&&void 0!==m?m:"update",duration:null!==k&&void 0!==k?k:P,delay:null!==D&&void 0!==D?D:L,from:I,to:N,ease:HS,collapsable:F,onPlay:()=>{h(v,l(l(l({},S),E),I))},onUpdate(e){h(v,e)},onStop:()=>{h(v,l(l(l(l(l(l({},S),E),I),N),M),R))}}),f&&p++,g++,u=I}};let m=0;for(const n of p){const o=n.nodes();g(o.filter((e=>!n.isGarbage(e))),o),i.animate({id:"".concat(e,"_").concat(t,"_selection_").concat(m),groupId:e,phase:"end",from:0,to:1,ease:HS,onStop(){n.cleanup()}}),m++}g(u,u)}function nM(e,t,i,n,o,s,r){const{nodes:a,selections:d}=JS(n),{start:c,finish:h,phase:u}=r;i.animate({id:"".concat(e,"_").concat(t),groupId:e,phase:null!==u&&void 0!==u?u:"update",from:o,to:s,ease:HS,onPlay:()=>{if(c){for(const e of a)e.setProperties(c);for(const e of d)for(const t of e.nodes())t.setProperties(c)}},onUpdate(e){for(const t of a)t.setProperties(e);for(const t of d)for(const i of t.nodes())i.setProperties(e)},onStop:()=>{for(const e of a)e.setProperties(l(l({},s),h));for(const e of d){for(const t of e.nodes())t.setProperties(l(l({},s),h));e.cleanup()}}})}function oM(e,t,i,n){const o=i(e,t);return n.added.has(o)?"added":n.removed.has(o)?"removed":"updated"}var sM=new Map;function rM(e,t){sM.has(t)||(sM.set(t,!0),e())}function aM(e){return e}function lM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const{leading:n=!1,trailing:o=!0,maxWait:s=1/0}=null!==i&&void 0!==i?i:{};let r,a;if(s<t)throw new Error("Value of maxWait cannot be lower than waitMs.");return Object.assign((function(){for(var i,l=arguments.length,d=new Array(l),c=0;c<l;c++)d[c]=arguments[c];if(n&&!a)return a=Date.now(),r=setTimeout((()=>a=null),t),void e(...d);let h=t;if(s!==1/0&&a){const e=Date.now()-a;t>s-e&&(h=s-e)}clearTimeout(r),null!==(i=a)&&void 0!==i||(a=Date.now()),r=setTimeout((()=>{a=null,o&&e(...d)}),h)}),{cancel(){clearTimeout(r),a=null}})}function dM(e,t,i){const{leading:n=!0,trailing:o=!0}=null!==i&&void 0!==i?i:{};let s,r,a=!1;function l(){o&&r?(s=setTimeout(l,t),e(...r)):a=!1,r=null}return Object.assign((function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];a?r=o:(a=!0,s=setTimeout(l,t),n?e(...o):r=o)}),{cancel(){clearTimeout(s),a=!1,r=null}})}rM.clear=()=>sM.clear();var cM={log(){console.log(...arguments)},warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];console.warn("AG Charts - ".concat(e),...i)},error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];"object"===typeof e?console.error("AG Charts error",e,...i):console.error("AG Charts - ".concat(e),...i)},table(){console.table(...arguments)},warnOnce(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];rM((()=>cM.warn(e,...i)),"Logger.warn: ".concat(e))},errorOnce(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];rM((()=>cM.error(e,...i)),"Logger.error: ".concat(e))}},hM=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(e){this[i]!==e&&(this[i]=e,this.invalid=!0)},enumerable:!0,configurable:!1})},uM=class e{constructor(t,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=e.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClamp=!1,this.domain=t,this.range=i}static is(t){return t instanceof e}transform(e){return e}transformInvert(e){return e}calcBandwidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.getDomain(),i=this.getPixelRange(),n=Math.abs(t[1]-t[0])/e+1,o=Math.floor(i),s=Math.min(n,o);return i/Math.max(1,s)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,t){if(!this.domain||this.domain.length<2)return NaN;this.refresh();const i=this.getDomain().map((e=>this.transform(e))),[n,o]=i,{range:s}=this,[r,a]=s;if(e=this.transform(e),null!==t&&void 0!==t?t:this.defaultClamp){const[t,n]=Pw(i.map(Number));if(Number(e)<t)return r;if(Number(e)>n)return a}return n===o?(r+a)/2:e===n?r:e===o?a:r+(Number(e)-Number(n))/(Number(o)-Number(n))*(a-r)}invert(e,t){this.refresh();const i=this.getDomain().map((e=>this.transform(e))),[n,o]=i,{range:s}=this,[r,a]=s,l=r>a,d=l?a:r,c=l?r:a;if(null!==t&&void 0!==t?t:this.defaultClamp){if(e<d)return l?o:n;if(e>c)return l?n:o}let h;return h=r===a?this.toDomain((Number(n)+Number(o))/2):this.toDomain(Number(n)+(e-r)/(a-r)*(Number(o)-Number(n))),this.transformInvert(h)}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&cM.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[e,t]=this.range;return Math.abs(t-e)}};uM.defaultTickCount=5,uM.defaultMaxTickCount=6,mw([hM],uM.prototype,"domain",2),mw([hM],uM.prototype,"range",2),mw([hM],uM.prototype,"nice",2),mw([hM],uM.prototype,"interval",2),mw([hM],uM.prototype,"tickCount",2),mw([hM],uM.prototype,"minTickCount",2),mw([hM],uM.prototype,"maxTickCount",2);var pM=uM;function gM(e){if(0===e.length)return null;let t=1/0,i=-1/0;for(let o of e)o instanceof Date&&(o=o.getTime()),"number"===typeof o&&(o<t&&(t=o),o>i&&(i=o));const n=[t,i];return n.every(isFinite)?n:null}function mM(e,t,i){let n=!1;var o;e.length>2&&(e=null!==(o=gM(e))&&void 0!==o?o:[NaN,NaN]);return isNaN(t)||(n||(n=t>e[0]),e=[t,e[1]]),isNaN(i)||(n||(n=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{extent:e,clipped:n}}function vM(e,t){if(null==e||null==t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!vM(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function fM(e){return"undefined"===typeof e?[]:Array.isArray(e)?e:[e]}function yM(e){return Array.from(new Set(e))}function bM(e,t){return e.reduce(((e,i)=>{var n;const o=t(i);return null!==(n=e[o])&&void 0!==n||(e[o]=[]),e[o].push(i),e}),{})}function CM(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return[];const n=[];for(let o=0;o<t;o++)n.push(e.at((o+i)%e.length));return n}function xM(e,t){const i=new Map;return t.forEach(((e,t)=>{i.set(e,t)})),e.sort(((e,t)=>{var n,o;return(null!==(n=i.get(e))&&void 0!==n?n:1/0)-(null!==(o=i.get(t))&&void 0!==o?o:1/0)}))}function wM(e,t){return e.includes(t)}var SM=1e3,MM=6e4,DM=36e5,kM=864e5,IM=6048e5,AM=2592e6,TM=31536e6,EM=class{constructor(e,t,i){this._encode=e,this._decode=t,this._rangeCallback=i}floor(e){const t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){const t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}range(e,t,i){var n;const o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,e,t),s=this._encode(i?this.floor(e):this.ceil(e)),r=this._encode(i?this.ceil(t):this.floor(t));if(r<s)return[];const a=[];for(let l=s;l<=r;l++){const e=this._decode(l);a.push(e)}return null===o||void 0===o||o(),a}},RM=class extends EM{getOffset(e,t){const i="number"===typeof e||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(i)%t}every(e,t){let i,n=0;const o=e;o!==(e=Math.max(1,Math.round(e)))&&cM.warnOnce("interval step of [".concat(o,"] rounded to [").concat(e,"]."));const{snapTo:s="start"}=null!==t&&void 0!==t?t:{};if("string"===typeof s){const t=n;i=(i,o)=>{const r="start"===s?i:o;return n=this.getOffset(r,e),()=>n=t}}else"number"===typeof s?n=this.getOffset(new Date(s),e):s instanceof Date&&(n=this.getOffset(s,e));return new EM((t=>{const i=this._encode(t);return Math.floor((i-n)/e)}),(t=>this._decode(t*e+n)),i)}};var LM=new RM((function(e){const t=e.getTimezoneOffset()*MM;return Math.floor((e.getTime()-t)/kM)}),(function(e){const t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t})),PM=(new Date).getTimezoneOffset()*MM;var NM=new RM((function(e){return Math.floor((e.getTime()-PM)/DM)}),(function(e){return new Date(PM+e*DM)})),FM=(new Date).getTimezoneOffset()*MM;var OM=new RM((function(e){return Math.floor((e.getTime()-FM)/MM)}),(function(e){return new Date(FM+e*MM)}));var BM=new RM((function(e){return 12*e.getFullYear()+e.getMonth()}),(function(e){const t=Math.floor(e/12);return new Date(t,e-12*t,1)})),GM=(new Date).getTimezoneOffset()*MM;var zM=new RM((function(e){return Math.floor((e.getTime()-GM)/SM)}),(function(e){return new Date(GM+e*SM)}));function _M(e){const t=(7+e-4)%7;return new RM((function(e){const i=e.getTimezoneOffset()*MM;return Math.floor((e.getTime()-i)/IM-t/7)}),(function(e){const i=new Date(1970,0,1);return i.setDate(i.getDate()+7*e+t),i}))}var VM=_M(0),HM=_M(1),WM=_M(2),jM=_M(3),UM=_M(4),KM=_M(5),YM=_M(6);var ZM=new RM((function(e){return e.getFullYear()}),(function(e){const t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t})),XM={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function qM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(e.getFullYear(),0,1);const i=e.getTimezoneOffset()-t.getTimezoneOffset(),n=e.getTime()-t.getTime()+6e4*i;return Math.floor(n/864e5)}function QM(e,t){const i=(t-new Date(e.getFullYear(),0,1).getDay()+7)%7,n=new Date(e.getFullYear(),0,i+1);return n<=e?Math.floor(qM(e,n)/7)+1:0}function JM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getFullYear();const i=new Date(t,0,1).getDay(),n=new Date(t,0,(4-i+7)%7-3+1);return n<=e?Math.floor(qM(e,n)/7)+1:JM(e,t-1)}var $M={a:e=>XM.shortDays[e.getDay()],A:e=>XM.days[e.getDay()],b:e=>XM.shortMonths[e.getMonth()],B:e=>XM.months[e.getMonth()],c:"%x, %X",d:(e,t)=>tD(e.getDate(),2,null!==t&&void 0!==t?t:"0"),e:"%_d",f:(e,t)=>tD(1e3*e.getMilliseconds(),6,null!==t&&void 0!==t?t:"0"),H:(e,t)=>tD(e.getHours(),2,null!==t&&void 0!==t?t:"0"),I:(e,t)=>{const i=e.getHours()%12;return 0===i?"12":tD(i,2,null!==t&&void 0!==t?t:"0")},j:(e,t)=>tD(qM(e)+1,3,null!==t&&void 0!==t?t:"0"),m:(e,t)=>tD(e.getMonth()+1,2,null!==t&&void 0!==t?t:"0"),M:(e,t)=>tD(e.getMinutes(),2,null!==t&&void 0!==t?t:"0"),L:(e,t)=>tD(e.getMilliseconds(),3,null!==t&&void 0!==t?t:"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>tD(e.getSeconds(),2,null!==t&&void 0!==t?t:"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>tD(QM(e,0),2,null!==t&&void 0!==t?t:"0"),V:(e,t)=>tD(JM(e),2,null!==t&&void 0!==t?t:"0"),w:(e,t)=>tD(e.getDay(),2,null!==t&&void 0!==t?t:"0"),W:(e,t)=>tD(QM(e,1),2,null!==t&&void 0!==t?t:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>tD(e.getFullYear()%100,2,null!==t&&void 0!==t?t:"0"),Y:(e,t)=>tD(e.getFullYear(),4,null!==t&&void 0!==t?t:"0"),Z:e=>function(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return"".concat(t>0?"-":"+").concat(tD(Math.floor(i/60),2,"0")).concat(tD(Math.floor(i%60),2,"0"))}(e),"%":()=>"%"},eD={_:" ",0:"0","-":""};function tD(e,t,i){const n=String(Math.floor(e));return n.length>=t?n:"".concat(i.repeat(t-n.length)).concat(n)}function iD(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(0!==i){const n=i>0?e.substring(0,i):e;t.push(n)}if(i<0)break;const n=e[i+1],o=eD[n];null!=o&&i++;const s=e[i+1],r=$M[s];if("function"===typeof r)t.push([r,o]);else if("string"===typeof r){const e=iD(r);t.push([e,o])}else t.push("".concat(null!==o&&void 0!==o?o:"").concat(s));e=e.substring(i+2)}return e=>{const i="number"===typeof e?new Date(e):e;return t.map((e=>"string"===typeof e?e:e[0](i,e[1]))).join("")}}function nD(e){return e instanceof Date?e.getTime():e}function oD(e,t,i){const n=iD(sD(e,t,i));return e=>n(e)}function sD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=1/0;for(let a=1;a<e.length;a++)n=Math.min(n,Math.abs(e[a]-e[a-1]));const o=new Date(t[0]).getFullYear(),s=new Date(t.at(-1)).getFullYear()-o>0,r=isFinite(n)?function(e,t){if(e<SM)return 0;if(e<MM)return 1;if(e<DM)return 2;if(e<kM)return 3;if(e<IM)return 4;if(e<24192e5||e<26784e5&&function(e){let t=new Date(e[0]).getMonth();for(let i=1;i<e.length;i++){const n=new Date(e[i]).getMonth();if(t===n)return!0;t=n}return!1}(t))return 5;if(e<TM)return 6;return 7}(n,e):function(e){if(zM.floor(e)<e)return 0;if(OM.floor(e)<e)return 1;if(NM.floor(e)<e)return 2;if(LM.floor(e)<e)return 3;if(BM.floor(e)<e)return VM.floor(e)<e?4:5;if(ZM.floor(e)<e)return 6;return 7}(e[0]);return function(e,t,i){const n=nD(i[0]),o=nD(i.at(-1)),s=Math.abs(o-n),r=t||7===e,a=0===s,l=[["hour",216e5,12096e5,3,"%I %p"],["hour",MM,216e5,3,"%I:%M"],["second",1e3,216e5,1,":%S"],["ms",0,216e5,0,".%L"],["am/pm",MM,216e5,3,"%p"]," ",["day",kM,IM,4,"%a"],["month",a?0:IM,314496e5,5,"%b %d"],["month",3024e6,31536e7,6,"%B"]," ",["year",r?0:TM,1/0,7,"%Y"]].filter((t=>{if("string"===typeof t)return!0;const[i,n,o,r]=t;return r>=e&&n<=s&&s<o})).reduce(((e,t)=>("string"===typeof t?e.result.push(t):e.used.has(t[0])||(e.result.push(t),e.used.add(t[0])),e)),{result:[],used:new Set}).result,d=l.findIndex((e=>"string"!==typeof e)),c=l.findLastIndex((e=>"string"!==typeof e));return l.slice(d,c+1).map((e=>"string"===typeof e?e:e[4])).join("").replaceAll(/\s+/g," ").trim()}(Math.max(r-i,0),s,e)}var rD=class e{constructor(){this.type="band",this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this.index=new Map,this._domain=[],this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof e}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&cM.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.index=new Map,this.invalid=!0,this._domain=[];for(const t of e){const e=nD(t);void 0===this.getIndex(e)&&this.index.set(e,this._domain.push(t)-1)}}get domain(){return this._domain}getDomain(){return this._domain}ticks(){return this.refresh(),this._domain}convert(e){this.refresh();const t=this.getIndex(e);return null==t||t<0||t>=this.domain.length?NaN:this.ordinalRange(t)}invertNearestIndex(e){this.refresh();const{domain:t}=this;if(0===t.length)return-1;let i=0,n=t.length-1,o=1/0,s=0;for(;i<=n;){const t=(n+i)/2|0,r=this.ordinalRange(t),a=Math.abs(r-e);if(0===a)return t;a<o&&(o=a,s=t),r<e?i=t+1:n=t-1}return s}invert(e){this.refresh();const t=this.invertNearestIndex(e);return e===this.ordinalRange(t)?this.domain[t]:void 0}invertNearest(e){const t=this.invertNearestIndex(e);return this.domain[t]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=Rw(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=Rw(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=Rw(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){const e=this._domain.length;if(0===e)return;const[t,i]=this.range;let{_paddingInner:n}=this;const{_paddingOuter:o,round:s}=this,r=i-t;let a;1===e?(n=0,a=r*(1-2*o)):a=r/Math.max(1,e-n+2*o);const l=s?Math.floor(a):a;let d=t+(r-l*(e-n))/2,c=l*(1-n);s&&(d=Math.round(d),c=Math.round(c)),this._step=l,this._inset=d,this._bandwidth=c,this._rawBandwidth=a*(1-n)}ordinalRange(e){const{_inset:t,_step:i,range:n}=this;return Rw(Math.min(n[0],n[1]),t+i*e,Math.max(n[0],n[1]))}getIndex(e){return this.index.get(e instanceof Date?e.getTime():e)}};mw([hM],rD.prototype,"range",2),mw([hM],rD.prototype,"round",2),mw([hM],rD.prototype,"interval",2);var aD=rD,lD=class{set(e){const{className:t=this.constructor.name}=this.constructor;if("object"!==typeof e)return cM.warn("unable to set ".concat(t," - expecting a properties object")),this;const i=new Set(Object.keys(e));for(const n of aS(this))if(i.has(n)){const t=e[n],o=this;if(cD(o[n]))if(o[n]instanceof dD){const e=o[n].reset(t);null!=e?o[n]=e:cM.warn("unable to set [".concat(n,"] - expecting a properties array"))}else o[n].set(t);else o[n]=t;i.delete(n)}for(const n of i)cM.warn("unable to set [".concat(n,"] in ").concat(t," - property is unknown"));return this}isValid(e){return aS(this).every((t=>{const{optional:i}=function(e,t){const i=t.toString();for(;rS(e);){const t=e[iS];if(Object.hasOwn(t,i))return t[i];e=Object.getPrototypeOf(e)}}(this,t),n=!0===i||"undefined"!==typeof this[t];return n||cM.warnOnce("".concat(null!==e&&void 0!==e?e:"","[").concat(t,"] is required.")),n}))}toJson(){return aS(this).reduce(((e,t)=>{const i=this[t];return e[t]=cD(i)?i.toJson():i,e}),{})}},dD=class e extends Array{constructor(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];super(i.length);const o=(e=>{var t;return Boolean(null===e||void 0===e||null===(t=e.prototype)||void 0===t||null===(t=t.constructor)||void 0===t?void 0:t.name)})(e)?t=>(new e).set(t):e;Object.defineProperty(this,"itemFactory",{value:o,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(cS(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=this.itemFactory(e[t])}return this}reset(t){if(Array.isArray(t))return new e(this.itemFactory,...t)}toJson(){return this.map((e=>{var t,i;return null!==(t=null===e||void 0===e||null===(i=e.toJson)||void 0===i?void 0:i.call(e))&&void 0!==t?t:e}))}};function cD(e){return e instanceof lD||e instanceof dD}function hD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{optional:i=!1,property:n}=t;return oS(((o,s,r)=>{var a;const d=l(l({},t),{},{target:o,property:s});if(i&&"undefined"===typeof r||e(r,d))return cD(o[s])&&!cD(r)?(o[s].set(r),o[s]):r;const c=null!==n&&void 0!==n?n:String(s).replace(/^_*/,""),h=null!==(a=o.constructor.className)&&void 0!==a?a:o.constructor.name.replace(/Properties$/,"");let u=lk(r);if(null!=u&&u.length>50){const e=u.length-50;u=u.slice(0,50)+"... (+".concat(e," characters)")}return cM.warn("Property [".concat(c,"] of [").concat(h,"] cannot be set to [").concat(u,"]").concat(e.message?"; expecting ".concat(rk(e,d)):"",", ignoring.")),tS}),void 0,{optional:i})}var uD,pD=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=[];return sk(((e,i)=>(n.length=0,t.every((t=>{const o=t(e,i);return o||n.push(rk(t,i)),o})))),(()=>n.filter(Boolean).join(" AND ")))},gD=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return sk(((e,i)=>t.some((t=>t(e,i)))),(e=>t.map(function(e){return t=>rk(t,e)}(e)).filter(Boolean).join(" OR ")))},mD=ak(sk(((e,t)=>cD(e)||vS(e)&&cD(t.target[t.property])),"a properties object")),vD=ak(sk((e=>vS(e)),"an object")),fD=sk(hS,"a boolean"),yD=sk(mS,"a function"),bD=sk(bS,"a string"),CD=(uD=sk(xS,"a number"),Object.assign(uD,{restrict(){let{min:e,max:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=["a number"],n=CS(e),o=CS(t);return n&&o?i.push("between ".concat(e," and ").concat(t," inclusive")):n?i.push("greater than or equal to ".concat(e)):o&&i.push("less than or equal to ".concat(t)),sk((i=>xS(i)&&(!n||i>=e)&&(!o||i<=t)),i.join(" "))}})),xD=sk((e=>CS(e)&&!isNaN(e)),"a real number"),wD=sk((e=>CS(e)&&isNaN(e)),"NaN"),SD=CD.restrict({min:0}),MD=CD.restrict({min:0,max:1}),DD=gD(CD,wD),kD=function(e){return Object.assign(e,{restrict(){let{length:e,minLength:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i="an array";return CS(t)&&t>0?i="a non-empty array":CS(e)&&(i="an array of length ".concat(e)),sk((i=>cS(i)&&(!CS(e)||i.length===e)&&(!CS(t)||i.length>=t)),i)}})}(sk(cS,"an array")),ID=(e,t)=>sk(((t,i)=>cS(t)&&t.every((t=>e(t,i)))),(e=>{var i;const n=null!==(i=rk(kD,e))&&void 0!==i?i:"";return"function"===typeof t?"".concat(n," of ").concat(t(e)):t?"".concat(n," of ").concat(t):n})),AD=e=>xS(e)||pS(e),TD=e=>sk(((t,i)=>!AD(t)||!AD(i.target[e])||t<i.target[e]),"to be less than ".concat(e)),ED=e=>sk(((t,i)=>!AD(t)||!AD(i.target[e])||t>i.target[e]),"to be greater than ".concat(e)),RD=sk(pS,"Date object"),LD=gD(RD,SD),PD="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",ND=sk((e=>bS(e)&&$w.validColorString(e)),"color String. ".concat(PD)),FD=sk(ID(ND),"color strings. ".concat(PD)),OD=ID(fD,"boolean values"),BD=ID(CD,"numbers"),GD=ID(bD,"strings"),zD=sk(ID(RD),"Date objects"),_D=sk(ID(mD),"objects"),VD=ik(["butt","round","square"],"a line cap"),HD=ik(["round","bevel","miter"],"a line join"),WD=ik(["solid","dashed","dotted"],"a line style"),jD=sk(ID(SD),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),UD=ik(["top","right","bottom","left"],"a position"),KD=ik(["normal","italic","oblique"],"a font style"),YD=gD(ik(["normal","bold","bolder","lighter"],"a font weight"),CD.restrict({min:1,max:1e3})),ZD=ik(["never","always","hyphenate","on-space"],"a text wrap strategy"),XD=ik(["left","center","right"],"a text align"),qD=ik(["top","middle","bottom"],"a vertical align"),QD=ik(["ellipsis","hide"],"an overflow strategy"),JD=ik(["horizontal","vertical"],"a direction"),$D=ik(["inside","outside"],"a placement"),ek=gD(ik(["exact","nearest"],"interaction range"),CD),tk=ik(["top","bottom","left","right"]);function ik(e){return sk(((t,i)=>{const n=e.find((e=>{const i="string"===typeof e?e:e.value;return t===i}));if(null==n)return!1;if("string"!==typeof n&&(!0===n.deprecated||null!=n.deprecatedTo)){const e=["Property [%s] with value '".concat(n.value,"' is deprecated.")];n.deprecatedTo&&e.push("Use ".concat(n.deprecatedTo," instead.")),cM.warnOnce(e.join(" "),i.property)}return!0}),"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a"," keyword such as ").concat(function(e){const t=e.filter((e=>"string"===typeof e||!0!==e.undocumented)).map((e=>"'".concat("string"===typeof e?e:e.value,"'")));if(1===t.length)return t[0];const i=t.pop();return"".concat(t.join(", ")," or ").concat(i)}(e)))}var nk=gD(pD(CD.restrict({min:1}),TD("maxSpacing")),wD),ok=gD(pD(CD.restrict({min:1}),ED("minSpacing")),wD);function sk(e,t){return e.message=t,e}function rk(e,t){return mS(e.message)?e.message(t):e.message}function ak(e){return Object.assign(e,{restrict:t=>sk((e=>e instanceof t),(i=>{var n;return null!==(n=rk(e,i))&&void 0!==n?n:"an instance of ".concat(t.name)}))})}function lk(e){if("number"===typeof e){if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}return JSON.stringify(e)}var dk=(e=>(e.X="x",e.Y="y",e))(dk||{}),ck=class{constructor(){this.moduleMap=new Map}*modules(){for(const e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error("AG Charts - module already initialised: ".concat(e.optionsKey));this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){var t;const i=bS(e)?e:e.optionsKey;null===(t=this.moduleMap.get(i))||void 0===t||t.moduleInstance.destroy(),this.moduleMap.delete(i)}getModule(e){var t;return null===(t=this.moduleMap.get(bS(e)?e:e.optionsKey))||void 0===t?void 0:t.moduleInstance}isEnabled(e){return this.moduleMap.has(bS(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),((t,i)=>e(t.moduleInstance,i)))}destroy(){for(const t of this.moduleMap.keys()){var e;null===(e=this.moduleMap.get(t))||void 0===e||e.moduleInstance.destroy()}this.moduleMap.clear()}},hk={};function uk(e,t){const{nodes:i,selections:n}=JS(e);for(const o of n){for(const e of o.nodes()){const i=t(e,e.datum);e.setProperties(i)}o.cleanup()}for(const o of i){const e=t(o,o.datum);o.setProperties(e)}}function pk(e){let t,i;const n=vk.exec(e);n&&([,t,e,i]=n);const o=mk.exec(e);if(!o)throw new Error("The number formatter is invalid: ".concat(e));const[,s,r,a,l,d,c,h,u,p,g]=o;return{fill:s,align:r,sign:a,symbol:l,zero:d,width:parseInt(c),comma:h,precision:parseInt(u),trim:Boolean(p),type:g,prefix:t,suffix:i}}function gk(e){const t="string"===typeof e?pk(e):e,{fill:i,align:n,sign:o="-",symbol:s,zero:r,width:a,comma:l,type:d,prefix:c="",suffix:h="",precision:u}=t;let{trim:p}=t;const g=null==u||isNaN(u);let m,v;if(d)if(d in yk&&d in fk)m=g?fk[d]:yk[d];else if(d in yk)m=yk[d];else{if(!(d in fk))throw new Error("The number formatter type is invalid: ".concat(d));m=fk[d]}else m=yk.g,p=!0;return v=null==u||g?d?6:12:u,e=>{let t=m(e,v);return p&&(t=t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(t=function(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const n=e.substring(0,i).split(""),o=e.substring(i);for(let s=n.length-3;s>0;s-=3)n.splice(s,0,t);return"".concat(n.join("")).concat(o)}(t,l)),t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return e>=0?t:"(".concat(t,")");const n="+"===i?"+":"";return"".concat(e>=0?n:wk).concat(t)}(e,t,o),s&&"#"!==s&&(t="".concat(s).concat(t)),"#"===s&&"x"===d&&(t="0x".concat(t)),"s"===d&&(t="".concat(t).concat(function(e){return xk[Mk(e)]}(e))),"%"!==d&&"p"!==d||(t="".concat(t,"%")),null==a||isNaN(a)||(t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",o=e;if(">"!==n&&n){if("<"===n)o=o.padEnd(t,i);else if("^"===n){const e=Math.max(0,t-o.length),n=Math.ceil(e/2),s=Math.floor(e/2);o=o.padStart(n+o.length,i),o=o.padEnd(s+o.length,i)}}else o=o.padStart(t,i);return o}(t,a,null!==i&&void 0!==i?i:r,n)),t="".concat(c).concat(t).concat(h),t}}gw(hk,{resetMotion:()=>uk});var mk=/^(?:(.)?([<>=^]))?([+\-( ])?([$\u20ac\xa3\xa5\u20a3\u20b9#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,vk=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,fk={b:e=>Sk(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>Sk(e).toString(8),x:e=>Sk(e).toString(16),X:e=>fk.x(e).toUpperCase(),n:e=>fk.d(e),"%":e=>"".concat(Sk(100*e).toFixed(0))},yk={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>yk.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>yk.f(e,t).toUpperCase(),g:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i));return n>=-4&&n<t?i.toFixed(t-1-n):i.toExponential(t-1)},G:(e,t)=>yk.g(e,t).toUpperCase(),n:(e,t)=>yk.g(e,t),p:(e,t)=>yk.r(100*e,t),r:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i))-(t-1);if(n<=0)return i.toFixed(-n);const o=10**n;return(Math.round(i/o)*o).toFixed()},s:(e,t)=>{const i=Mk(e);return yk.r(e/10**i,t)},"%":(e,t)=>yk.f(100*e,t)},bk=-24,Ck=24,xk={[bk]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Ck]:"Y"},wk="\u2212";function Sk(e){return Math.floor(Math.abs(e))}function Mk(e){return Rw(bk,e?3*Math.floor(Math.log10(Math.abs(e))/3):0,Ck)}var Dk=new RM((function(e){return e.getTime()}),(function(e){return new Date(e)})),kk=(e,t,i)=>({duration:t*i,timeInterval:e,step:i}),Ik=[kk(zM,SM,1),kk(zM,SM,5),kk(zM,SM,15),kk(zM,SM,30),kk(OM,MM,1),kk(OM,MM,5),kk(OM,MM,15),kk(OM,MM,30),kk(NM,DM,1),kk(NM,DM,3),kk(NM,DM,6),kk(NM,DM,12),kk(LM,kM,1),kk(LM,kM,2),kk(VM,IM,1),kk(VM,IM,2),kk(VM,IM,3),kk(BM,AM,1),kk(BM,AM,2),kk(BM,AM,3),kk(BM,AM,4),kk(BM,AM,6),kk(ZM,TM,1)],Ak=[1,2,5,10];function Tk(e,t){return Math.abs(Math.round(e)-e)<t}function Ek(e,t,i,n,o){if(i<2)return[e,t];const s=Lk(e,t,i,n,o);return Number.isFinite(s)?(Tk(e/s,1e-12)||(e=Math.ceil(e/s)*s),Tk(t/s,1e-12)||(t=Math.floor(t/s)*s),Nk(e,t,s)):[]}function Rk(e,t,i,n,o,s){const r=null!==s&&void 0!==s?s:Math.abs(t-e)/Math.max(i,1);let a=0;for(const u of Ik){if(r<=u.duration)break;a++}if(0===a){const s=Math.max(Lk(e,t,i,n,o),1);return Dk.every(s)}if(a===Ik.length){const r=null==s?Lk(e/TM,t/TM,i,n,o):1;return ZM.every(r)}const l=Ik[a-1],d=Ik[a],{timeInterval:c,step:h}=r-l.duration<d.duration-r?l:d;return c.every(h)}function Lk(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if(e===t)return Rw(1,n,o);if(i<1)return NaN;const s=Math.abs(t-e),r=10**Math.floor(Math.log10(s/i));let a=NaN,l=1/0,d=!1;for(const c of Ak){const e=Math.ceil(s/(c*r)),t=e>=n&&e<=o;if(d&&!t)continue;const h=Math.abs(e-i);(l>h||d!==t)&&(d||(d=t),l=h,a=c)}return a*r}function Pk(e){for(let t=e.length-1;t>=0;t-=1)if("0"!==e[t])return t+1;return 0}function Nk(e,t,i){if(!Number.isFinite(i)||i<=0)return[];const n=10**Vw(i),o=Math.min(e,t),s=Math.max(e,t),r=[];for(let a=0;;a+=1){const e=Math.round((o+i*a)*n)/n;if(e>s)break;r.push(e)}return r}function Fk(e,t){return e>=t&&(cM.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}function Ok(e,t,i,n,o){o=Math.max(o,e/(n+1)),isNaN(t)&&(t=o),isNaN(i)&&(i=e),t>i&&(t===o?t=i:i=t);const s=Math.max(1,Math.floor(e/t)),r=Math.min(s,Math.ceil(e/i));return{minTickCount:r,maxTickCount:s,tickCount:Rw(r,n,s)}}var Bk=class e extends pM{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=aM,this.basePow=aM,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClamp=!0}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,cM.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=e.getBaseLogMethod(this.base),this.basePow=e.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[e,t]=this.domain,i=e>t?Math.ceil:Math.floor,n=e>t?Math.floor:Math.ceil,o=this.pow(i(this.log(e))),s=this.pow(n(this.log(t)));this.niceDomain=[o,s]}ticks(){var e;const t=null!==(e=this.tickCount)&&void 0!==e?e:10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();const i=this.base,[n,o]=this.getDomain(),s=Math.min(n,o),r=Math.max(n,o);let a=this.log(s),l=this.log(r);if(this.interval){const e=e=>e>=s&&e<=r,t=Nk(a,l,Math.min(Math.abs(this.interval),Math.abs(l-a))).map(this.pow).filter(e);if(!Fk(t.length,this.getPixelRange()))return t}if(!Gw(i)||l-a>=t)return Ek(a,l,Math.min(l-a,t)).map(this.pow);const d=[],c=s>0;a=Math.floor(a)-1,l=Math.round(l)+1;const h=Nw(this.range)/t;let u=1/0;for(let p=a;p<=l;p++){const e=this.convert(this.pow(p+1));for(let t=1;t<i;t++){const n=c?t:i-t+1,o=this.pow(p)*n,a=this.convert(o),l=Math.abs(u-a),g=Math.abs(a-e);o>=s&&o<=r&&(1===t||l>=h&&g>=h||0===d.length)&&(d.push(o),u=a)}}return d}tickFormat(e){var t;let{specifier:i}=e;return null!==(t=i)&&void 0!==t||(i=10===this.base?".0e":","),bS(i)?gk(i):i}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:return t=>Math.log(t)/Math.log(e)}}static getBasePowerMethod(e){switch(e){case 10:return e=>e>=0?10**e:1/10**-e;case Math.E:return Math.exp;default:return t=>e**t}}};mw([hM],Bk.prototype,"base",2);var Gk=Bk;function zk(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2);i(o)?(n=o,e=o+1):t=o-1}return n}function _k(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2);i(o)?(n=o,t=o-1):e=o+1}return n}function Vk(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2),s=i(o);null==s?t=o-1:(n=s,e=o+1)}return n}function Hk(e,t,i){if(e>t)return;let n;for(;t>=e;){const o=Math.floor((t+e)/2),s=i(o);null==s?e=o+1:(n=s,t=o-1)}return n}function Wk(e,t){return e.valueOf()-t.valueOf()}function jk(e){const t=e.slice().sort(Wk);return null==Uk(e)?function(e){let t=NaN;const i=[];for(const n of e){const e=n.valueOf();t!==e&&i.push(n),t=e}return i}(t):t}function Uk(e){if(0===e.length)return 1;const t=Number(e[e.length-1])>Number(e[0])?1:-1;let i=-1/0*t;for(const n of e){const e=n.valueOf();if(Math.sign(e-i)!==t)return;i=e}return t}var Kk=class e extends pM{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}convert(e,t){return e instanceof Date||(e=new Date(e)),super.convert(e,t)}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const{interval:t,nice:i,tickCount:n,minTickCount:o,maxTickCount:s}=this,[r,a]=Pw(this.getDomain().map(nD));var l;return null!=t?null!==(l=e.getTicksForInterval({start:r,stop:a,interval:t,availableRange:this.getPixelRange()}))&&void 0!==l?l:e.getDefaultTicks({start:r,stop:a,tickCount:n,minTickCount:o,maxTickCount:s}):i&&2===n?this.niceDomain:i&&1===n?this.niceDomain.slice(0,1):e.getDefaultTicks({start:r,stop:a,tickCount:n,minTickCount:o,maxTickCount:s})}static getDefaultTicks(e){let{start:t,stop:i,tickCount:n,minTickCount:o,maxTickCount:s}=e;const r=Rk(t,i,n,o,s);return r?r.range(new Date(t),new Date(i)):[]}static getTicksForInterval(e){let{start:t,stop:i,interval:n,availableRange:o}=e;if(!n)return[];if(n instanceof EM){const e=n.range(new Date(t),new Date(i));if(Fk(e.length,o))return;return e}const s=Math.abs(n);if(Fk((i-t)/s,o))return;const r=Ik.findLast((e=>s%e.duration===0));if(r){return r.timeInterval.every(s/(r.duration/r.step)).range(new Date(t),new Date(i))}let a=new Date(t);const l=new Date(i),d=[];for(;a<=l;)d.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+s);return d}tickFormat(e){let{ticks:t,domain:i,specifier:n,formatOffset:o}=e;return null==n?oD(t,i,o):iD(n)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,t]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(e,t);const[i,n]=this.niceDomain;if(nD(e)===nD(i)&&nD(t)===nD(n))break;e=i,t=n}}updateNiceDomainIteration(e,t){const i=Math.min(nD(e),nD(t)),n=Math.max(nD(e),nD(t)),o=e>t,{interval:s}=this;let r;if(s instanceof EM)r=s;else{r=Rk(i,n,"number"===typeof s?(n-i)/Math.max(s,1):this.tickCount,this.minTickCount,this.maxTickCount)}if(r){const e=r.range(new Date(i),new Date(n),!0),t=o?[...e].reverse():e,s=t[0],a=t.at(-1);this.niceDomain=[s,a]}}},Yk=class e extends aD{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=pM.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this._domain=[],this.sortedTimestamps=[],this.visibleRange=[0,1],this.isReversed=!1,this._values=void 0}static is(t){return t instanceof e}setVisibleRange(e){this.visibleRange=e}set domain(e){if(e===this._values)return;this.invalid=!0;const t=Uk(e),i=null==t?jk(e):e,n=-1===t,o=i.map(nD);n&&o.reverse(),this._values=e,this._domain=i,this.isReversed=n,this.sortedTimestamps=o,this.precomputedSteps=void 0;const s=e.length<1e4?o.length:Math.ceil(o.length/16);if(s<=1)return;this.refresh();const r=new Int32Array(s),a=o[0].valueOf(),l=o[o.length-1].valueOf()-a;for(let d=0;d<r.length;d+=1)r[d]=this.findInterval(a+d/s*l);this.precomputedSteps=r}get domain(){return this._domain}ticks(){var e;if(!this._domain.length)return[];this.refresh();const{domain:t,isReversed:i,interval:n}=this,[o,s]=[t[0].valueOf(),t.at(-1).valueOf()],r=Math.min(o,s),a=Math.max(o,s);if(null==n)return this.getDefaultTicks(this.maxTickCount,i);const[l,d]=this.range,c=Math.abs(d-l),h=null!==(e=Kk.getTicksForInterval({start:r,stop:a,interval:n,availableRange:c}))&&void 0!==e?e:[];let u=-1;return h.filter((e=>{const t=this.findInterval(e.valueOf()),i=t===u;return u=t,!i}))}getDefaultTicks(e,t){const{domain:i,visibleRange:n}=this,o=[],s=Math.ceil(i.length*(n[1]-n[0])/e),r=Math.floor(s/2);for(let a=0;a<i.length;a+=1){const e=i[a],n=t?i.length-1-a:a;(s<=0||(n+r)%s===0)&&o.push(e)}return t&&o.reverse(),o}convert(e){this.refresh();const t=Number(e);if(t<this.sortedTimestamps[0])return NaN;let i=this.findInterval(t);return this.isReversed&&(i=this.domain.length-i-1),this.ordinalRange(i)}findInterval(e){const{sortedTimestamps:t,precomputedSteps:i}=this;let n,o;if(null==i)n=0,o=t.length-1;else{const s=t[0].valueOf(),r=t[t.length-1].valueOf(),a=Math.min((e-s)/(r-s)*i.length|0,i.length-1|0);n=i[a],o=a<i.length-2?i[a+1]:t.length-1}for(;n<=o;){const i=(n+o)/2|0;if(t[i]===e)return i;t[i]<e?n=i+1:o=i-1}return n}tickFormat(e){let{ticks:t,domain:i,specifier:n}=e;return null==n?oD(t,i):iD(n)}invert(e){this.refresh();const{domain:t}=this,i=Hk(0,t.length-1,(i=>this.ordinalRange(i)>=e?t[i]:void 0));return null!==i&&void 0!==i?i:t[0]}invertNearest(e){return super.invertNearest(e)}};mw([hM],Yk.prototype,"tickCount",2),mw([hM],Yk.prototype,"minTickCount",2),mw([hM],Yk.prototype,"maxTickCount",2),mw([hM],Yk.prototype,"interval",2);var Zk=Yk;var Xk=[1,0,0,1,0,0];function qk(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8;return e===t||Math.abs(t-e)<i}var Qk=class e{get e(){return[...this.elements]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[...Xk];this.elements=e}setElements(e){const t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){const e=this.elements;return qk(e[0],1)&&qk(e[1],0)&&qk(e[2],0)&&qk(e[3],1)&&qk(e[4],0)&&qk(e[5],0)}AxB(e,t,i){var n;const o=e[0]*t[0]+e[2]*t[1],s=e[1]*t[0]+e[3]*t[1],r=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],l=e[0]*t[4]+e[2]*t[5]+e[4],d=e[1]*t[4]+e[3]*t[5]+e[5];(i=null!==(n=i)&&void 0!==n?n:e)[0]=o,i[1]=s,i[2]=r,i[3]=a,i[4]=l,i[5]=d}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(t){const i=new Array(6);return t instanceof e?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new e(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],n=t[1],o=t[2],s=t[3];const r=t[4],a=t[5],l=1/(i*s-n*o);return i*=l,n*=l,o*=l,s*=l,new e([s,-n,-o,i,o*a-s*r,n*r-i*a])}inverseTo(e){const t=this.elements;let i=t[0],n=t[1],o=t[2],s=t[3];const r=t[4],a=t[5],l=1/(i*s-n*o);return i*=l,n*=l,o*=l,s*=l,e.setElements([s,-n,-o,i,o*a-s*r,n*r-i*a]),this}invertSelf(){const e=this.elements;let t=e[0],i=e[1],n=e[2],o=e[3];const s=e[4],r=e[5],a=1/(t*o-i*n);return t*=a,i*=a,n*=a,o*=a,e[0]=o,e[1]=-i,e[2]=-n,e[3]=t,e[4]=n*r-o*s,e[5]=i*s-t*r,this}transformPoint(e,t){const i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){var i;const n=this.elements,o=n[0],s=n[1],r=n[2],a=n[3],l=.5*e.width,d=.5*e.height,c=e.x+l,h=e.y+d,u=Math.abs(l*o)+Math.abs(d*r),p=Math.abs(l*s)+Math.abs(d*a);return null!==(i=t)&&void 0!==i||(t=new Ww(0,0,0,0)),t.x=c*o+h*r+n[4]-u,t.y=c*s+h*a+n[5]-p,t.width=u+u,t.height=p+p,t}toContext(e){if(this.identity)return;const t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static flyweight(t){return e.instance.setElements(t.elements)}static updateTransformMatrix(e,t,i,n,o,s,r){const a=t,l=i;let d,c;var h,u;1===a&&1===l?(d=0,c=0):(d=null!==(h=null===r||void 0===r?void 0:r.scalingCenterX)&&void 0!==h?h:0,c=null!==(u=null===r||void 0===r?void 0:r.scalingCenterY)&&void 0!==u?u:0);const p=n,g=Math.cos(p),m=Math.sin(p);let v,f;var y,b;0===p?(v=0,f=0):(v=null!==(y=null===r||void 0===r?void 0:r.rotationCenterX)&&void 0!==y?y:0,f=null!==(b=null===r||void 0===r?void 0:r.rotationCenterY)&&void 0!==b?b:0);const C=o,x=s,w=d*(1-a)-v,S=c*(1-l)-f;return e.setElements([g*a,m*a,-m*l,g*l,g*w-m*S+v+C,m*w+g*S+f+x]),e}static fromContext(t){const i=t.getTransform();return new e([i.a,i.b,i.c,i.d,i.e,i.f])}};Qk.instance=new Qk;var Jk=Qk;function $k(e){return tI(e.constructor)}var eI=Symbol("isMatrixTransform");function tI(e){return!0===e[eI]}function iI(e){var t;const i=e;if(tI(e))return e;const n=Symbol("matrix_combined_transform");class o extends i{constructor(){super(...arguments),this[t]=new Jk,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}updateMatrix(e){}computeTransformMatrix(){this._dirtyTransform&&(this[n].setElements(Xk),this.updateMatrix(this[n]),this._dirtyTransform=!1)}toParent(e){return this.computeTransformMatrix(),this[n].identity?e.clone():this[n].transformBBox(e)}toParentPoint(e,t){return this.computeTransformMatrix(),this[n].identity?{x:e,y:t}:this[n].transformPoint(e,t)}fromParent(e){return this.computeTransformMatrix(),this[n].identity?e.clone():this[n].inverse().transformBBox(e)}fromParentPoint(e,t){return this.computeTransformMatrix(),this[n].identity?{x:e,y:t}:this[n].inverse().transformPoint(e,t)}computeBBox(){const e=super.computeBBox();return e?this.toParent(e):e}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||({x:e,y:t}=this.fromParentPoint(e,t)),super.pickNode(e,t)}render(e){this.computeTransformMatrix();const{ctx:t}=e,i=this[n];let o=!1;i.identity||(t.save(),o=!0,i.toContext(t)),super.render(e),o&&t.restore()}toSVG(){this.computeTransformMatrix();const e=super.toSVG(),t=this[n];if(t.identity||null==e)return e;const i=document.createElementNS("http://www.w3.org/2000/svg","g");i.append(...e.elements);const[o,s,r,a,l,d]=t.e;return i.setAttribute("transform","matrix(".concat(o," ").concat(s," ").concat(r," ").concat(a," ").concat(l," ").concat(d,")")),{elements:[i],defs:e.defs}}}return t=n,o[eI]=!0,o}function nI(e){var t;const i=e,n=Symbol("matrix_rotation");class o extends(iI(i)){constructor(){super(...arguments),this[t]=new Jk,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(e){super.updateMatrix(e);const{rotation:t,rotationCenterX:i,rotationCenterY:o}=this;0!==t&&(Jk.updateTransformMatrix(this[n],1,1,t,0,0,{rotationCenterX:i,rotationCenterY:o}),e.multiplySelf(this[n]))}}return t=n,mw([jw({type:"transform"})],o.prototype,"rotationCenterX",2),mw([jw({type:"transform"})],o.prototype,"rotationCenterY",2),mw([jw({type:"transform"})],o.prototype,"rotation",2),o}function oI(e){var t;const i=e,n=Symbol("matrix_scale");class o extends(iI(i)){constructor(){super(...arguments),this[t]=new Jk,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(e){super.updateMatrix(e);const{scalingX:t,scalingY:i,scalingCenterX:o,scalingCenterY:s}=this;1===t&&1===i||(Jk.updateTransformMatrix(this[n],t,i,0,0,0,{scalingCenterX:o,scalingCenterY:s}),e.multiplySelf(this[n]))}}return t=n,mw([jw({type:"transform"})],o.prototype,"scalingX",2),mw([jw({type:"transform"})],o.prototype,"scalingY",2),mw([jw({type:"transform"})],o.prototype,"scalingCenterX",2),mw([jw({type:"transform"})],o.prototype,"scalingCenterY",2),o}function sI(e){var t;const i=e,n=Symbol("matrix_translation");class o extends(iI(i)){constructor(){super(...arguments),this[t]=new Jk,this.translationX=0,this.translationY=0}updateMatrix(e){super.updateMatrix(e);const{translationX:t,translationY:i}=this;0===t&&0===i||(Jk.updateTransformMatrix(this[n],1,1,0,t,i),e.multiplySelf(this[n]))}}return t=n,mw([jw({type:"transform"})],o.prototype,"translationX",2),mw([jw({type:"transform"})],o.prototype,"translationY",2),o}var rI=class{static fromCanvas(e,t){const i=[];for(const n of e.traverseUp())$k(n)&&i.unshift(n);for(const n of i)t=n.fromParent(t);return $k(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){null==t?t=e.getBBox():$k(e)&&(t=e.toParent(t));for(const i of e.traverseUp())$k(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){const n=[];for(const o of e.traverseUp())$k(o)&&n.unshift(o);for(const o of n)({x:t,y:i}=o.fromParentPoint(t,i));return $k(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){$k(e)&&({x:t,y:i}=e.toParentPoint(t,i));for(const n of e.traverseUp())$k(n)&&({x:t,y:i}=n.toParentPoint(t,i));return{x:t,y:i}}},aI=(e,t)=>Math.sign(e-t);function lI(e,t){if("number"===typeof e&&"number"===typeof t)return aI(e,t);const i="number"===typeof e?[e]:e,n="number"===typeof t?[t]:t,o=Math.min(i.length,n.length);for(let s=0;s<o;s+=1){const e=aI(i[s],n[s]);if(0!==e)return e}return aI(i.length,n.length)}var dI=class e extends Zw{constructor(e){super(e),this.opacity=1,this.layer=void 0,this.renderToOffscreenCanvas=!1,this.isContainerNode=!0,this.renderToOffscreenCanvas=!0===(null===e||void 0===e?void 0:e.renderToOffscreenCanvas)}static is(t){return t instanceof e}static computeChildrenBBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ww.merge(Zw.extractBBoxes(e,t))}static compareChildren(e,t){return lI(e.zIndex,t.zIndex)||function(e,t){return"number"===typeof e&&"number"===typeof t?e-t:"string"===typeof e&&"string"===typeof t?e.localeCompare(t):null==e&&null==t?0:null==e?-1:null==t?1:String(e).localeCompare(String(t))}(e.serialNumber,t.serialNumber)}containsPoint(e,t){return!0}computeBBox(){return e.computeChildrenBBox(this.children())}isDirty(e){const{resized:t}=e,{dirty:i,dirtyZIndex:n}=this;if(i||n||t)return!0;for(const o of this.children())if(o.dirty)return!0;return!1}preRender(){const e=super.preRender(0);var t,i;if(e.groups+=1,e.nonGroups-=1,this.renderToOffscreenCanvas&&e.nonGroups>0&&this.getVisibility())null!==(t=this.layer)&&void 0!==t||(this.layer=null===(i=this._layerManager)||void 0===i?void 0:i.addLayer({name:this.name}));else if(null!=this.layer){var n;null===(n=this._layerManager)||void 0===n||n.removeLayer(this.layer),this.layer=void 0}return e}render(e){const{layer:t}=this,i=l({},e);if(null==t)return this.renderInContext(i),void super.render(i);const{ctx:n,stats:o}=e;if(this.isDirty(e)){var s;const e=n.getTransform(),{globalAlpha:r}=n,a=t.context;i.ctx=a,t.clear(),a.save(),a.setTransform(e),a.globalAlpha=r,this.renderInContext(i),a.restore(),null===(s=a.verifyDepthZero)||void 0===s||s.call(a),o&&o.layersRendered++}else this.skipRender(i),o&&o.layersSkipped++;n.save(),n.resetTransform(),t.drawImage(n),n.restore(),super.render(i)}skipRender(e){const{stats:t}=e;for(const i of this.children())i.markClean(),t&&(t.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,t.opsSkipped+=this.childNodeCounts.complexity)}applyClip(e,t){const{x:i,y:n,width:o,height:s}=t;e.beginPath(),e.rect(i,n,o,s),e.clip()}renderInContext(t){const{ctx:i,stats:n}=t;this.dirtyZIndex&&this.sortChildren(e.compareChildren),i.save(),i.globalAlpha*=this.opacity,null!=this.clipRect&&(this.applyClip(i,this.clipRect),t.clipBBox=rI.toCanvas(this,this.clipRect));for(const e of this.children())e.visible?(i.save(),e.render(t),i.restore()):(e.markClean(),n&&(n.nodesSkipped+=e.childNodeCounts.nonGroups+e.childNodeCounts.groups,n.opsSkipped+=e.childNodeCounts.complexity));i.restore()}setClipRect(e){this.clipRect=e?rI.fromCanvas(this,e):void 0}setClipRectCanvasSpace(e){this.clipRect=e}_setLayerManager(e){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.removeLayer(this.layer),this.layer=void 0);super._setLayerManager(e)}getVisibility(){for(const e of this.traverseUp(!0))if(!e.visible)return!1;return!0}toSVG(){if(!this.visible)return;const e=[],t=[];for(const i of this.children()){const n=i.toSVG();null!=n&&(t.push(...n.elements),null!=n.defs&&e.push(...n.defs))}return{elements:t,defs:e}}};dI.className="Group",mw([jw({convertor:e=>Rw(0,e,1)})],dI.prototype,"opacity",2);var cI=dI,hI=class extends(oI(cI)){},uI=class extends(nI(cI)){},pI=class extends(sI(cI)){},gI=class extends(nI(sI(cI))){},mI={};function vI(e){var t;return e?null===(t=mI.document)||void 0===t?void 0:t[e]:mI.document}function fI(e){var t;return e?null===(t=mI.window)||void 0===t?void 0:t[e]:mI.window}function yI(e,t,i){const n=vI().createElement(e);if("object"===typeof t&&(i=t,t=void 0),t)for(const o of t.split(" "))n.classList.add(o);return i&&Object.assign(n.style,i),n}function bI(e,t){return vI().createElementNS(e,t)}function CI(e,t){const{body:i}=vI(),n=yI("a",{display:"none"});n.href=e,n.download=t,i.appendChild(n),n.click(),setTimeout((()=>i.removeChild(n)))}function xI(e){mI.document=e}function wI(e){mI.window=e}function SI(e,t){e&&(null==(t=kw.normalize(t)).width?e.style.removeProperty("width"):e.style.width="".concat(t.width,"px"),null==t.height?e.style.removeProperty("height"):e.style.height="".concat(t.height,"px"),null==t.x?e.style.removeProperty("left"):e.style.left="".concat(t.x,"px"),null==t.y?e.style.removeProperty("top"):e.style.top="".concat(t.y,"px"))}function MI(e){const t=parseFloat(e.style.width)||e.offsetWidth,i=parseFloat(e.style.height)||e.offsetHeight;return{x:parseFloat(e.style.left)||e.offsetLeft,y:parseFloat(e.style.top)||e.offsetTop,width:t,height:i}}function DI(e){var t;if(e.focus({preventScroll:!0}),null==(null===(t=e.lastChild)||void 0===t?void 0:t.textContent))return;const i=vI().createRange();i.setStart(e.lastChild,e.lastChild.textContent.length),i.setEnd(e.lastChild,e.lastChild.textContent.length);const n=fI().getSelection();null===n||void 0===n||n.removeAllRanges(),null===n||void 0===n||n.addRange(i)}"undefined"!==typeof window?mI.window=window:"undefined"!==typeof global&&(mI.window=global.window),"undefined"!==typeof document?mI.document=document:"undefined"!==typeof global&&(mI.document=global.document);var kI=0;function II(e){return"".concat(null!==e&&void 0!==e?e:"ag-charts-element","-").concat(kI++)}function AI(){const e=fI().navigator;if("scheduling"in e){const t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function TI(e){return"ag-charts-icon ag-charts-icon-".concat(e)}var EI=Date.now(),RI={create(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Object.assign((function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];RI.check(...t)&&("function"===typeof i[0]&&(i=fM(i[0]())),(()=>{const e=Date.now()-EI;if(e>2e3){const t=(Math.floor(e/100)/10).toFixed(1);cM.log("**** ".concat(t,"s since last log message ****"))}EI=Date.now()})(),cM.log(...i))}),{check:()=>RI.check(...t)})},check(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];0===t.length&&t.push(!0);return fM(fI("agChartsDebug")).some((e=>t.includes(e)))}},LI=class e{constructor(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=RI.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Zw,t)?()=>new t:t}static select(t,i){return new e(t,i,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(e,t){const i=[],n=e=>{t(e)&&i.push(e);for(const t of e.children())n(t)};return n(e),i}static selectByClass(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return e.selectAll(t,(e=>n.some((t=>e instanceof t))))}static selectByTag(t,i){return e.selectAll(t,(e=>e.tag===i))}createNode(e,t,i){const n=this.nodeFactory(e);return n.datum=e,null===t||void 0===t||t(n),null==i?this._nodes.push(n):this._nodes.splice(i,0,n),this.parentNode.appendChild(n),n}update(e,t,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",e),i){const n=new Map(e.map(((e,t)=>[i(e),[e,t]])));for(const[e,t]of this._nodesMap.entries())if(n.has(t)){const[i]=n.get(t);e.datum=i,this.garbageBin.delete(e),n.delete(t)}else this.garbageBin.add(e);for(const[e,[i,o]]of n.entries())this._nodesMap.set(this.createNode(i,t,o),e)}else{const i=Math.max(e.length,this.data.length);for(let n=0;n<i;n++)n>=e.length?this.garbageBin.add(this._nodes[n]):n>=this._nodes.length?this.createNode(e[n],t):(this._nodes[n].datum=e[n],this.garbageBin.delete(this._nodes[n]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((e=>!this.garbageBin.has(e)||(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1)))),this}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){for(const t of this._nodes.entries())e(t[1],t[1].datum,t[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const t=this._nodes[e];yield{node:t,datum:t.datum,index:e}}}select(t){return e.selectAll(this.parentNode,t)}selectByClass(t){return e.selectByClass(this.parentNode,t)}selectByTag(t){return e.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(e){return this._nodes.at(e)}get length(){return this._nodes.length}},PI=2*Math.PI,NI=Math.PI/2;function FI(e){return e%=PI,e+=PI,e%=PI}function OI(e){return e%=PI,(e+=PI)!==PI&&(e%=PI),e}function BI(e){return(e%=PI)<-Math.PI?e+=PI:e>=Math.PI&&(e-=PI),e}function GI(e,t,i){const n=FI(e),o=FI(t),s=FI(i);return o<s?o<=n&&n<=s:!(o>s)||(o<=n||n<=s)}function zI(e){return e/180*Math.PI}function _I(e){return e/Math.PI*180}function VI(e,t,i){i&&([e,t]=[t,e]);const n=FI(e);return(FI(t)+PI-n)%PI}function HI(e,t){return e=FI(e),(t=FI(t))-e+(e>t?PI:0)}function WI(e,t,i,n){return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function jI(e,t){return HI(e,t)<1e-6?t:FI(e-t)+t}function UI(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.abs(t-e)>=PI?PI:FI(t-e);return{startAngle:e=jI(e,i),endAngle:t=e+n}}function KI(e){const t=FI(e);return t<=NI?t/NI:t<=Math.PI?(Math.PI-t)/NI:t<=1.5*Math.PI?(t-Math.PI)/NI:(PI-t)/NI}function YI(e,t,i,n){const o=e-i,s=t-n;return o*o+s*s}function ZI(e,t,i,n,o,s,r){if(i===o&&n===s)return Math.min(r,YI(e,t,i,n));const a=o-i,l=s-n,d=Math.max(0,Math.min(1,((e-i)*a+(t-n)*l)/(a*a+l*l))),c=i+d*a,h=n+d*l;return Math.min(r,YI(e,t,c,h))}function XI(e,t,i,n,o,s,r,a,l){a&&([r,s]=[s,r]);if(!GI(Math.atan2(t-n,e-i),s,r)){const r=i+Math.cos(s)*o,a=n+Math.sin(s)*o,d=i+Math.cos(s)*o,c=n+Math.sin(s)*o;return Math.min(l,YI(e,t,r,a),YI(e,t,d,c))}const d=o-Math.sqrt(YI(e,t,i,n));return Math.min(l,d*d)}var qI=e=>{const t=$w.fromString(e),[i,n,o]=$w.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:n,h:o,a:t.a}},QI=1e-6,JI=e=>e.c<QI||e.l<QI||e.l>.999999,$I=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(qI)}update(){const{domain:e,range:t}=this;e.length<2&&(cM.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(let i=1;i<e.length;i++){if(e[i-1]>=e[i]){cM.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort(((e,t)=>e-t));break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(qI)}convert(e){this.refresh();const{domain:t,range:i,parsedRange:n}=this,o=t[0],s=t.at(-1),r=i[0],a=i[i.length-1];if(e<=o)return r;if(e>=s)return a;let l,d;if(2===t.length){const t=(e-o)/(s-o),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(t*(i.length-1)),i.length-2),d=(t-l*n)/n}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);const i=t[l];d=(e-i)/(t[l+1]-i)}return((e,t,i)=>{let n;if(i=Rw(0,i,1),JI(e))n=t.h;else if(JI(t))n=e.h;else{const o=e.h;let s=t.h;const r=t.h-e.h;r>180?s-=360:r<-180&&(s+=360),n=o*(1-i)+s*i}const o=e.c*(1-i)+t.c*i,s=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return $w.fromOKLCH(s,o,n,r)})(n[l],n[l+1],d).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&cM.warnOnce("Expected update to not invalidate scale"))}};mw([hM],$I.prototype,"domain",2),mw([hM],$I.prototype,"range",2);var eA=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t){var i;const n=null!==(i=this.bbox)&&void 0!==i?i:t;if(null!=this._cache&&this._cache.ctx===e&&this._cache.bbox.equals(n))return this._cache.gradient;const{stops:o,colorSpace:s}=this;if(0===o.length)return;if(1===o.length)return o[0].color;let r=this.createCanvasGradient(e,n);if(null==r)return;const a="oklch"===s;let l=o[0];r.addColorStop(l.offset,l.color);for(let d=1;d<o.length;d+=1){const e=o[d];if(a){const t=new $I;t.domain=[l.offset,e.offset],t.range=[l.color,e.color];for(let i=l.offset+.05;i<e.offset;i+=.05)r.addColorStop(i,t.convert(i))}r.addColorStop(e.offset,e.color),l=e}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:e,bbox:n,gradient:r},r}},tA=class extends eA{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}createCanvasGradient(e,t){const{angle:i}=this,n=FI(zI(i+90)),o=Math.cos(n),s=Math.sin(n),r=t.width,a=t.height,l=t.x+.5*r,d=t.y+.5*a,c=Math.sqrt(a*a+r*r)/2,h=Math.atan2(a,r);let u;u=n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<1.5*Math.PI?n-Math.PI:2*Math.PI-n;const p=c*Math.abs(Math.cos(u-h));return e.createLinearGradient(l+o*p,d+s*p,l-o*p,d-s*p)}},iA=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,nA=class e extends Zw{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=e.defaultStyles.fill,this.stroke=e.defaultStyles.stroke,this.strokeWidth=e.defaultStyles.strokeWidth,this.lineDash=e.defaultStyles.lineDash,this.lineDashOffset=e.defaultStyles.lineDashOffset,this.lineCap=e.defaultStyles.lineCap,this.lineJoin=e.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=e.defaultStyles.opacity,this.fillShadow=e.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:e}=this.constructor;Object.assign(this,e)}getGradient(e){let t;if(e instanceof eA)return e;if(null!==e&&void 0!==e&&e.startsWith("linear-gradient")&&(t=iA.exec(e))){const e=parseFloat(t[1]),i=[],n=t[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let s;for(;s=o.exec(n);)i.push(s[0]);return new tA("rgb",i.map(((e,t)=>({color:e,offset:t/(i.length-1)}))),e)}}onFillChange(){this.fillGradient=this.getGradient(this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,t){var i,n;const o=null!==(i=null===(n=this.layerManager)||void 0===n||null===(n=n.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==i?i:1,s=Math.round(e*o)/o;return null==t?s:0===t?0:t<1?Math.ceil(t*o)/o:Math.round((t+e)*o)/o-s}fillStroke(e,t){this.renderFill(e,t),this.renderStroke(e,t)}renderFill(e,t){if(this.fill){const{globalAlpha:i}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),this.executeFill(e,t),e.globalAlpha=i}e.shadowColor="rgba(0, 0, 0, 0)"}executeFill(e,t){t?e.fill(t):e.fill()}applyFill(e){var t,i,n;e.fillStyle=null!==(t=null!==(i=null===(n=this.fillGradient)||void 0===n?void 0:n.createGradient(e,this.getBBox()))&&void 0!==i?i:"string"===typeof this.fill?this.fill:void 0)&&void 0!==t?t:"black"}applyStroke(e){var t,i,n;e.strokeStyle=null!==(t=null!==(i=null===(n=this.strokeGradient)||void 0===n?void 0:n.createGradient(e,this.getBBox()))&&void 0!==i?i:"string"===typeof this.stroke?this.stroke:void 0)&&void 0!==t?t:"black"}applyFillAlpha(e){e.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(e){var t,i;const n=null!==(t=null===(i=this.layerManager)||void 0===i?void 0:i.canvas.pixelRatio)&&void 0!==t?t:1,o=this.fillShadow;null!==o&&void 0!==o&&o.enabled&&(e.shadowColor=o.color,e.shadowOffsetX=o.xOffset*n,e.shadowOffsetY=o.yOffset*n,e.shadowBlur=o.blur*n)}renderStroke(e,t){if(this.stroke&&this.strokeWidth){const{globalAlpha:i}=e;this.applyStroke(e),e.globalAlpha*=this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),null!=this.miterLimit&&(e.miterLimit=this.miterLimit),this.executeStroke(e,t),e.globalAlpha=i}}executeStroke(e,t){t?e.stroke(t):e.stroke()}containsPoint(e,t){return this.isPointInPath(e,t)}applySvgFillAttributes(e){e.setAttribute("fill","string"===typeof this.fill?this.fill:"none"),e.setAttribute("fill-opacity",String(this.fillOpacity))}applySvgStrokeAttributes(e){null!=this.stroke&&(e.setAttribute("stroke","string"===typeof this.stroke?this.stroke:"none"),e.setAttribute("stroke-opacity",String(this.strokeOpacity)),e.setAttribute("stroke-width",String(this.strokeWidth))),null!=this.lineDash&&e.setAttribute("stroke-dasharray",this.lineDash.join(" "))}};nA.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},mw([jw()],nA.prototype,"fillOpacity",2),mw([jw()],nA.prototype,"strokeOpacity",2),mw([jw({changeCb:e=>e.onFillChange()})],nA.prototype,"fill",2),mw([jw({changeCb:e=>e.onStrokeChange()})],nA.prototype,"stroke",2),mw([jw()],nA.prototype,"strokeWidth",2),mw([jw()],nA.prototype,"lineDash",2),mw([jw()],nA.prototype,"lineDashOffset",2),mw([jw()],nA.prototype,"lineCap",2),mw([jw()],nA.prototype,"lineJoin",2),mw([jw()],nA.prototype,"miterLimit",2),mw([jw({convertor:e=>Rw(0,e,1)})],nA.prototype,"opacity",2),mw([jw({checkDirtyOnAssignment:!0})],nA.prototype,"fillShadow",2);var oA=nA,sA=class extends oA{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new Ww(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t)}distanceSquared(e,t){const{x1:i,y1:n,x2:o,y2:s}=this;return ZI(e,t,i,n,o,s,1/0)}render(e){var t;const{ctx:i,devicePixelRatio:n}=e;let{x1:o,y1:s,x2:r,y2:a}=this;if(o===r){const{strokeWidth:e}=this,t=Math.round(o*n)/n+Math.trunc(e*n)%2/(2*n);o=t,r=t}else if(s===a){const{strokeWidth:e}=this,t=Math.round(s*n)/n+Math.trunc(e*n)%2/(2*n);s=t,a=t}i.beginPath(),i.moveTo(o,s),i.lineTo(r,a),this.fillStroke(i),null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}toSVG(){if(!this.visible)return;const e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};sA.className="Line",sA.defaultStyles=l(l({},oA.defaultStyles),{},{fill:void 0,strokeWidth:1}),mw([jw()],sA.prototype,"x1",2),mw([jw()],sA.prototype,"y1",2),mw([jw()],sA.prototype,"x2",2),mw([jw()],sA.prototype,"y2",2);var rA=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.maxCacheSize=e,this.store=new Map}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){if(this.store.set(e,t),this.store.size>this.maxCacheSize){const e=this.store.keys();let t=this.store.size-this.maxCacheSize;for(;t>0;){const i=e.next();i.done||this.store.delete(i.value),t--}}return t}clear(){this.store.clear()}},aA=class{static measureText(e,t){return this.getMeasurer(t).measureText(e)}static measureLines(e,t){return this.getMeasurer(t).measureLines(e)}static getMeasurer(e){var t,i,n;const o="string"===typeof e.font?e.font:dA.toFontString(e.font),s="".concat(o,"-").concat(null!==(t=e.textAlign)&&void 0!==t?t:"start","-").concat(null!==(i=e.textBaseline)&&void 0!==i?i:"alphabetic");return null!==(n=this.instanceMap.get(s))&&void 0!==n?n:this.createFontMeasurer(o,e,s)}static createFontMeasurer(e,t,i){var n,o;const s=function(){return new OffscreenCanvas(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).getContext("2d")}();s.font=e,s.textAlign=null!==(n=t.textAlign)&&void 0!==n?n:"start",s.textBaseline=null!==(o=t.textBaseline)&&void 0!==o?o:"alphabetic";const r=new lA(s,t);return this.instanceMap.set(i,r),r}};aA.instanceMap=new rA(10);var lA=class{constructor(e,t){var i;this.ctx=e,this.measureMap=new rA(100),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font="string"===typeof t.font?t.font:dA.toFontString(t.font),this.textMeasurer=new cA((e=>this.cachedCtxMeasureText(e)),null!==(i=t.textBaseline)&&void 0!==i?i:"alphabetic")}textWidth(e,t){return this.textMeasurer.textWidth(e,t)}measureText(e){return this.textMeasurer.measureText(e)}measureLines(e){return this.textMeasurer.measureLines(e)}cachedCtxMeasureText(e){if(!this.measureMap.has(e)){const t=this.ctx.measureText(e);this.measureMap.set(e,{actualBoundingBoxAscent:t.actualBoundingBoxAscent,emHeightAscent:t.emHeightAscent,emHeightDescent:t.emHeightDescent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,actualBoundingBoxLeft:t.actualBoundingBoxLeft,actualBoundingBoxRight:t.actualBoundingBoxRight,alphabeticBaseline:t.alphabeticBaseline,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent,hangingBaseline:t.hangingBaseline,ideographicBaseline:t.ideographicBaseline,width:t.width})}return this.measureMap.get(e)}},dA=class{static toFontString(e){let{fontSize:t=10,fontStyle:i,fontWeight:n,fontFamily:o,lineHeight:s}=e,r="";return i&&(r+="".concat(i," ")),n&&(r+="".concat(n," ")),r+="".concat(t,"px"),s&&(r+="/".concat(s,"px")),r+=" ".concat(o),r.trim()}static getLineHeight(e){return Math.ceil(e*this.defaultLineHeight)}static getVerticalModifier(e){switch(e){case"hanging":case"top":return 0;case"middle":return.5;default:return 1}}};dA.EllipsisChar="\u2026",dA.defaultLineHeight=1.15,dA.lineSplitter=/\r?\n/g;var cA=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alphabetic";this.measureTextFn=e,this.textBaseline=t,this.charMap=new Map}getMetrics(e){var t,i;const n=this.measureTextFn(e);return null!==(t=n.fontBoundingBoxAscent)&&void 0!==t||(n.fontBoundingBoxAscent=n.emHeightAscent),null!==(i=n.fontBoundingBoxDescent)&&void 0!==i||(n.fontBoundingBoxDescent=n.emHeightDescent),{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent,lineHeight:n.fontBoundingBoxAscent+n.fontBoundingBoxDescent,offsetTop:n.actualBoundingBoxAscent,offsetLeft:n.actualBoundingBoxLeft}}getMultilineMetrics(e){let t=0,i=0,n=0,o=0,s=0;const r=dA.getVerticalModifier(this.textBaseline),a=[];let l=0;const d=e.length;for(const u of e){var c,h;const e=this.measureTextFn(u);null!==(c=e.fontBoundingBoxAscent)&&void 0!==c||(e.fontBoundingBoxAscent=e.emHeightAscent),null!==(h=e.fontBoundingBoxDescent)&&void 0!==h||(e.fontBoundingBoxDescent=e.emHeightDescent),t<e.width&&(t=e.width),o<e.actualBoundingBoxLeft&&(o=e.actualBoundingBoxLeft),0===l?(i+=e.actualBoundingBoxAscent,n+=e.actualBoundingBoxAscent):s+=e.fontBoundingBoxAscent,l===d-1?i+=e.actualBoundingBoxDescent:s+=e.fontBoundingBoxDescent,a.push({text:u,width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}),l++}return i+=s,n+=s*r,{width:t,height:i,offsetTop:n,offsetLeft:o,lineMetrics:a}}textWidth(e,t){var i;if(t){let t=0;for(let i=0;i<e.length;i++)t+=this.textWidth(e.charAt(i));return t}return e.length>1?this.measureTextFn(e).width:null!==(i=this.charMap.get(e))&&void 0!==i?i:this.charWidth(e)}measureText(e){return this.getMetrics(e)}measureLines(e){const t="string"===typeof e?e.split(dA.lineSplitter):e;return this.getMultilineMetrics(t)}charWidth(e){const{width:t}=this.measureTextFn(e);return this.charMap.set(e,t),t}},hA=class e extends oA{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=e.defaultStyles.textAlign,this.textBaseline=e.defaultStyles.textBaseline}onTextChange(){var e,t;this.lines=null!==(e=null===(t=this.text)||void 0===t?void 0:t.split("\n").map((e=>e.trim())))&&void 0!==e?e:[]}static computeBBox(e,t,i,n){const{offsetTop:o,offsetLeft:s,width:r,height:a}=aA.measureLines(e,n);return new Ww(t-s,i-o,r,a)}computeBBox(){const{x:t,y:i,lines:n,textBaseline:o,textAlign:s}=this;return e.computeBBox(n,t,i,{font:this,textBaseline:o,textAlign:s})}isPointInPath(e,t){const i=this.getBBox();return!!i&&i.containsPoint(e,t)}render(e){const{ctx:t,stats:i}=e;if(!this.lines.length||!this.layerManager)return i&&(i.nodesSkipped+=1),super.render(e);const{fill:n,stroke:o,strokeWidth:s}=this,{pixelRatio:r}=this.layerManager.canvas;if(t.font=dA.toFontString(this),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,n){this.applyFill(t),t.globalAlpha*=this.opacity*this.fillOpacity;const{fillShadow:e}=this;null!==e&&void 0!==e&&e.enabled&&(t.shadowColor=e.color,t.shadowOffsetX=e.xOffset*r,t.shadowOffsetY=e.yOffset*r,t.shadowBlur=e.blur*r),this.renderLines(((e,i,n)=>t.fillText(e,i,n)))}if(o&&s){this.applyStroke(t),t.lineWidth=s,t.globalAlpha*=this.opacity*this.strokeOpacity;const{lineDash:e,lineDashOffset:i,lineCap:n,lineJoin:o}=this;e&&t.setLineDash(e),i&&(t.lineDashOffset=i),n&&(t.lineCap=n),o&&(t.lineJoin=o),this.renderLines(((e,i,n)=>t.strokeText(e,i,n)))}super.render(e)}renderLines(e){var t;const{lines:i,x:n,y:o}=this,s=null!==(t=this.lineHeight)&&void 0!==t?t:dA.getLineHeight(this.fontSize);let r=(s-s*i.length)*dA.getVerticalModifier(this.textBaseline);for(const a of i)e(a,n,o+r),r+=s}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}toSVG(){var e,t,i,n,o,s,r;if(!this.visible||!this.text)return;const a=document.createElementNS("http://www.w3.org/2000/svg","text");return this.applySvgFillAttributes(a),a.setAttribute("font-family",null!==(e=null===(t=this.fontFamily)||void 0===t?void 0:t.split(",")[0])&&void 0!==e?e:""),a.setAttribute("font-size",String(this.fontSize)),a.setAttribute("font-style",null!==(i=this.fontStyle)&&void 0!==i?i:""),a.setAttribute("font-weight",String(null!==(n=this.fontWeight)&&void 0!==n?n:"")),a.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[null!==(o=this.textAlign)&&void 0!==o?o:"start"]),a.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[null!==(s=this.textBaseline)&&void 0!==s?s:"alphabetic"]),a.setAttribute("x",String(this.x)),a.setAttribute("y",String(this.y)),a.textContent=null!==(r=this.text)&&void 0!==r?r:"",{elements:[a]}}};hA.className="Text",hA.defaultStyles=l(l({},oA.defaultStyles),{},{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),mw([jw()],hA.prototype,"x",2),mw([jw()],hA.prototype,"y",2),mw([jw({changeCb:e=>e.onTextChange()})],hA.prototype,"text",2),mw([jw()],hA.prototype,"fontStyle",2),mw([jw()],hA.prototype,"fontWeight",2),mw([jw()],hA.prototype,"fontSize",2),mw([jw()],hA.prototype,"fontFamily",2),mw([jw()],hA.prototype,"textAlign",2),mw([jw()],hA.prototype,"textBaseline",2),mw([jw()],hA.prototype,"lineHeight",2);var uA=hA,pA=class extends(nI(uA)){},gA=class extends(nI(sI(uA))){};function mA(e,t,i,n,o,s){if(0===e.size)return!1;let r=e.x,a=e.y;null!=t&&(r-=(t.x-.5)*e.size,a-=(t.y-.5)*e.size);let l=r;r<i?l=i:r>i+o&&(l=i+o);let d=a;a<n?d=n:a>n+s&&(d=n+s);const c=r-l,h=a-d;return Math.sqrt(c*c+h*h)<=.5*e.size}function vA(e,t,i,n,o){const s=e.x+e.width>t&&e.x<t+n,r=e.y+e.height>i&&e.y<i+o;return s&&r}function fA(e){return null!=e&&"object"===typeof e.point&&"object"===typeof e.label}var yA={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function bA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=[];for(let n=0;n<e.length;n++){const o=e[n],{point:{x:s,y:r},label:{text:a}}=o;let{width:l,height:d}=o.label;if(l+=t,d+=t,i.some((e=>vA(e,s,r,l,d))))return!0;i.push({index:n,text:a,x:s,y:r,width:l,height:d,datum:o})}return!1}var CA=new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}),xA=new Intl.NumberFormat("en-US",{style:"percent"});function wA(e){return"number"===typeof e?MA(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:2):String(null!==e&&void 0!==e?e:"")}function SA(e){return xA.format(e)}function MA(e,t){return 2===t?CA.format(e):new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}).format(e)}var DA="class-instance";function kA(e,t,i){if(cS(t)){if(!cS(e)||e.length!==t.length||t.some(((t,i)=>null!=kA(e[i],t))))return t}else{if(yS(t)){if(!yS(e))return t;const n={},o=new Set([...Object.keys(e),...Object.keys(t)]);for(const s of o)if(!(e[s]===t[s]||null!==i&&void 0!==i&&i.includes(s)))if(typeof e[s]===typeof t[s]){const i=kA(e[s],t[s]);null!==i&&(n[s]=i)}else n[s]=t[s];return Object.keys(n).length?n:null}if(e!==t)return t}return null}function IA(e,t){for(const i of Object.keys(e))if(e[i]!==(null===t||void 0===t?void 0:t[i]))return!1;return!0}function AA(e,t){return cS(e)?e.map((e=>AA(e,t))):yS(e)?function(e,t){const i={};for(const n of Object.keys(e))i[n]=null!==t&&void 0!==t&&t.has(n)?TA(e[n]):AA(e[n],t);return i}(e,t):e instanceof Map?new Map(AA(Array.from(e))):TA(e)}function TA(e){return cS(e)?e.slice(0):yS(e)?l({},e):uS(e)?new Date(e):gS(e)?new RegExp(e.source,e.flags):e}function EA(e,t,i,n,o){if(cS(e)){t(e,n,o);let s=0;for(const r of e)EA(r,t,i,null===n||void 0===n?void 0:n[s],o),s++}else if(yS(e)){t(e,n,o);for(const s of Object.keys(e)){if(null!==i&&void 0!==i&&i.has(s))continue;EA(e[s],t,i,null===n||void 0===n?void 0:n[s],o)}}}function RA(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{path:n,matcherPath:o=(null===n||void 0===n?void 0:n.replace(/(\[[0-9+]+])/i,"[]")),skip:s=[]}=i;if(null==e)throw new Error("AG Charts - target is uninitialised: ".concat(null!==n&&void 0!==n?n:"<root>"));if(null==t)return e;if(cD(e))return e.set(t);const r=e,a=LA(e);for(const c of Object.keys(t)){if(FS.has(c))continue;const h="".concat(o?o+".":"").concat(c);if(s.includes(h))continue;const u=t[c],p="".concat(n?n+".":"").concat(c),g=r.constructor,m=r[c];try{const t=LA(m),n=LA(u);if(a===DA&&!(c in e)){if(void 0===u)continue;cM.warn("unable to set [".concat(p,"] in ").concat(null===g||void 0===g?void 0:g.name," - property is unknown"));continue}if(null!=t&&null!=n&&n!==t&&(t!==DA||"object"!==n)){cM.warn("unable to set [".concat(p,"] in ").concat(null===g||void 0===g?void 0:g.name," - can't apply type of [").concat(n,"], allowed types are: [").concat(t,"]"));continue}cD(m)?r[c].set(u):"object"===n?(null==m&&(r[c]={}),RA(null!==m&&void 0!==m?m:r[c],u,l(l({},i),{},{path:p,matcherPath:h}))):r[c]=u}catch(d){cM.warn("unable to set [".concat(p,"] in [").concat(null===g||void 0===g?void 0:g.name,"]; nested error is: ").concat(d.message))}}return e}function LA(e){return null==e?null:wS(e)||uS(e)?"primitive":cS(e)?"array":vS(e)?yS(e)?"object":DA:mS(e)?"function":"primitive"}function PA(e,t){const i=cS(e)?e:e.split(".");if(1===i.length){const[e]=i;return oS(((t,i,n)=>t[e]=n),(t=>t[e]),t)}return oS(((e,t,n)=>OS(e,i,n)),(e=>NS(e,i)),t)}function NA(e){return oS(((t,i,n)=>t[e]=n))}function FA(e,t){return oS(((i,n,o)=>i[e][null!==t&&void 0!==t?t:n]=o))}function OA(e){const{newValue:t,oldValue:i,changeValue:n}=e;return oS(((e,o,s,r)=>(s!==r&&(void 0!==r&&(null===i||void 0===i||i.call(e,r)),void 0!==s&&(null===t||void 0===t||t.call(e,s)),null===n||void 0===n||n.call(e,s,r)),s)))}function BA(e){return sS(e)}var GA="color: green",zA="color: grey";function _A(){return sS((()=>{}))}function VA(e,t){const i=aS(t);if(0===i.length)return;const n=lS(e);for(const o of i)o in n&&(t[o]=n[o])}var HA=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},WA=class e extends HA{constructor(e,t,i){super(),this.defaultState=e,this.states=t,this.enterEach=i,this.debug=RI.create(!0,"animation"),this.state=e,this.debug("%c".concat(this.constructor.name," | init -> ").concat(e),GA)}transition(t,i){var n;if(!this.transitionChild(t,i)||this.state===e.child||this.state===e.parent)return;const o=this.state,s=this.states[this.state];let r=s[t];const a="%c".concat(this.constructor.name," | ").concat(this.state," -> ").concat(t," ->");if(Array.isArray(r))r=r.find((e=>{if(!e.guard)return!0;const t=e.guard(i);return t||this.debug("".concat(a," (guarded)"),e.target,zA),t}));else if("object"===typeof r&&!(r instanceof e)&&r.guard&&!r.guard(i))return void this.debug("".concat(a," (guarded)"),r.target,zA);if(!r)return void this.debug("".concat(a," ").concat(this.state),zA);const l=this.getDestinationState(r),d=l===this.state?void 0:s.onExit;if(this.debug("".concat(a," ").concat(l),GA),this.state=l,"function"===typeof r)r(i);else if("object"===typeof r&&!(r instanceof e)){var c,h;null===(c=(h=r).action)||void 0===c||c.call(h,i)}var u,p;(null===d||void 0===d||d(),null===(n=this.enterEach)||void 0===n||n.call(this,o,l),l!==o&&l!==e.child&&l!==e.parent)&&(null===(u=(p=this.states[l]).onEnter)||void 0===u||u.call(p,o,i))}transitionAsync(e,t){setTimeout((()=>{this.transition(e,t)}),0)}is(t){return this.state===e.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug("%c".concat(this.constructor.name," | ").concat(this.state," -> [resetHierarchy] -> ").concat(this.defaultState),"color: green"),this.state=this.defaultState}transitionChild(t,i){var n,o;return this.state!==e.child||!this.childState||(VA(this,this.childState),this.childState.transition(t,i),!this.childState.is(e.parent)||(this.debug("%c".concat(this.constructor.name," | ").concat(this.state," -> ").concat(t," -> ").concat(this.defaultState),GA),this.state=this.defaultState,null===(n=(o=this.states[this.state]).onEnter)||void 0===n||n.call(o),this.childState.resetHierarchy(),!1))}getDestinationState(t){let i=this.state;return"string"===typeof t?i=t:t instanceof e?(this.childState=t,this.childState.parent=this,i=e.child):"object"===typeof t&&(t.target instanceof e?(this.childState=t.target,this.childState.parent=this,i=e.child):null!=t.target&&(i=t.target)),i}};WA.child="__child",WA.parent="__parent";var jA=WA,UA=class extends HA{constructor(){super();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.stateMachines=t;for(const n of t)n.parent=this}transition(e,t){for(const i of this.stateMachines)VA(this,i),i.transition(e,t)}transitionAsync(e,t){for(const i of this.stateMachines)VA(this,i),i.transitionAsync(e,t)}};function KA(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),"".concat(t,"_").concat(i)):(e.set(t,1),t)}}var YA=class{static wrapText(e,t){return this.wrapLines(e,t).join("\n")}static wrapLines(e,t){const i=this.textWrap(e,t);return"hide"===t.overflow&&i.some((e=>e.endsWith(dA.EllipsisChar)))?[]:i}static appendEllipsis(e){return e.replace(/[.,]{1,5}$/,"")+dA.EllipsisChar}static truncateLine(e,t,i,n){const o=t.textWidth(dA.EllipsisChar);let s=0,r=0;for(;r<e.length;r++){const n=t.textWidth(e.charAt(r));if(s+n>i)break;s+=n}if(e.length===r&&(!n||s+o<=i))return n?e+dA.EllipsisChar:e;for(e=e.slice(0,r).trimEnd();e.length&&t.textWidth(e)+o>i;)e=e.slice(0,-1).trimEnd();return e+dA.EllipsisChar}static textWrap(e,t){const i=e.split(dA.lineSplitter),n=aA.getMeasurer(t);if("never"===t.textWrap)return i.map((e=>this.truncateLine(e.trimEnd(),n,t.maxWidth)));const o=[],s="hyphenate"===t.textWrap,r=null==t.textWrap||"on-space"===t.textWrap;for(const a of i){let e=a.trimEnd();if(""!==e){for(let i=0,a=0,l=0;i<e.length;i++){const d=e.charAt(i);if(a+=n.textWidth(d)," "===d&&(l=i),a>t.maxWidth){if(0===i)break;const d=n.textWidth(e.slice(0,i+1));if(d<=t.maxWidth){a=d;continue}if(l){const s=this.getWordAt(e,l+1),d=n.textWidth(s);if(d<=t.maxWidth){o.push(e.slice(0,l).trimEnd()),e=e.slice(l).trimStart(),i=-1,a=0,l=0;continue}r&&d>t.maxWidth&&o.push(e.slice(0,l).trimEnd(),this.truncateLine(e.slice(l).trimStart(),n,t.maxWidth,!0))}else r&&o.push(this.truncateLine(e,n,t.maxWidth,!0));if(r){e="";break}const c=s?"-":"";let h=e.slice(0,i).trim();for(;h.length&&n.textWidth(h+c)>t.maxWidth;)h=h.slice(0,-1).trimEnd();if(o.push(h+c),!h.length){e="";break}e=e.slice(h.length).trimStart(),i=-1,a=0,l=0}}e&&o.push(e)}else o.push(e)}return this.avoidOrphans(o,n,t),this.clipLines(o,n,t)}static getWordAt(e,t){const i=e.indexOf(" ",t);return-1===i?e.slice(t):e.slice(t,i)}static clipLines(e,t,i){if(!i.maxHeight)return e;const{height:n,lineMetrics:o}=t.measureLines(e);if(n<=i.maxHeight)return e;for(let s=0,r=0;s<o.length;s++){const{lineHeight:n}=o[s];if(r+=n,r>i.maxHeight){if("hide"===i.overflow)return[];const n=e.slice(0,s||1),o=n.pop();return n.concat(this.truncateLine(o,t,i.maxWidth,!0))}}return e}static avoidOrphans(e,t,i){if(!1===i.avoidOrphans||e.length<2)return;const{length:n}=e,o=e[n-1],s=e[n-2];if(s.length<o.length)return;const r=s.lastIndexOf(" ");if(-1===r||r===s.indexOf(" ")||o.includes(" "))return;const a=s.slice(r+1);t.textWidth(o+a)<=i.maxWidth&&(e[n-2]=s.slice(0,r),e[n-1]=a+" "+o)}},ZA=class extends lD{constructor(){super(...arguments),this.id=ww(this),this.node=new pA({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){return e.layoutManager.addListener("layout:complete",(()=>this.updateA11yText(e,t)))}computeTextWrap(e,t){var i,n;const{text:o,padding:s,wrapping:r}=this,a=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,e)-2*s,l=null!==(n=this.maxHeight)&&void 0!==n?n:t-2*s;if(!isFinite(a)&&!isFinite(l))return void(this.node.text=o);const d=YA.wrapText(null!==o&&void 0!==o?o:"",{maxWidth:a,maxHeight:l,font:this,textWrap:r});this.node.text=d,this.truncated=d.includes(dA.EllipsisChar)}updateA11yText(e,t){const{proxyInteractionService:i}=e;if(this.enabled&&this.text){const o=rI.toCanvas(this.node);if(o){var n;const{id:s}=this;null!==(n=this.proxyText)&&void 0!==n||(this.proxyText=i.createProxyElement({type:"text",domManagerId:s,where:t})),this.proxyText.textContent=this.text,this.proxyText.setBounds(o),this.proxyText.addListener("mousemove",(t=>this.handleMouseMove(e,t))),this.proxyText.addListener("mouseleave",(t=>this.handleMouseLeave(e,t)))}}else{var o;null===(o=this.proxyText)||void 0===o||o.destroy(),this.proxyText=void 0}}handleMouseMove(e,t){if(null!=t&&this.enabled&&this.node.visible&&this.truncated){const{x:i,y:n}=rI.toCanvas(this.node),o=t.sourceEvent.offsetX+i,s=t.sourceEvent.offsetY+n,r={type:"hover",canvasX:o,canvasY:s};e.tooltipManager.updateTooltip(this.id,{canvasX:o,canvasY:s,lastPointerEvent:r,showArrow:!1},{title:this.text})}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};ZA.SMALL_PADDING=10,ZA.LARGE_PADDING=20,mw([hD(fD),FA("node","visible")],ZA.prototype,"enabled",2),mw([hD(bD,{optional:!0}),FA("node")],ZA.prototype,"text",2),mw([hD(XD,{optional:!0}),FA("node")],ZA.prototype,"textAlign",2),mw([hD(KD,{optional:!0}),FA("node")],ZA.prototype,"fontStyle",2),mw([hD(YD,{optional:!0}),FA("node")],ZA.prototype,"fontWeight",2),mw([hD(SD),FA("node")],ZA.prototype,"fontSize",2),mw([hD(bD),FA("node")],ZA.prototype,"fontFamily",2),mw([hD(ND,{optional:!0}),FA("node","fill")],ZA.prototype,"color",2),mw([hD(SD,{optional:!0})],ZA.prototype,"spacing",2),mw([hD(SD,{optional:!0})],ZA.prototype,"maxWidth",2),mw([hD(SD,{optional:!0})],ZA.prototype,"maxHeight",2),mw([hD(ZD)],ZA.prototype,"wrapping",2),mw([hD(SD)],ZA.prototype,"padding",2),mw([hD(bD)],ZA.prototype,"layoutStyle",2);var XA=class extends oA{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Ww(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var t;const{ctx:i}=e;let{x1:n,y1:o,x2:s,y2:r}=this;n=this.align(n),o=this.align(o),s=this.align(s),r=this.align(r);const{fill:a,opacity:l,isRange:d}=this;if(!(!d||!a)){const{fillOpacity:e}=this;this.applyFill(i),i.globalAlpha=l*e,i.beginPath(),i.moveTo(n,o),i.lineTo(s,o),i.lineTo(s,r),i.lineTo(n,r),i.closePath(),i.fill()}const{stroke:c,strokeWidth:h,startLine:u,endLine:p}=this;if(!(!u&&!p||!c||!h)){const{strokeOpacity:e,lineDash:t,lineDashOffset:a,lineCap:d,lineJoin:c}=this;this.applyStroke(i),i.globalAlpha=l*e,i.lineWidth=h,t&&i.setLineDash(t),a&&(i.lineDashOffset=a),d&&(i.lineCap=d),c&&(i.lineJoin=c),i.beginPath(),u&&(i.moveTo(n,o),i.lineTo(s,o)),p&&(i.moveTo(s,r),i.lineTo(n,r)),i.stroke()}null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}};XA.className="Range",XA.defaultStyles=l(l({},oA.defaultStyles),{},{strokeWidth:1}),mw([jw()],XA.prototype,"x1",2),mw([jw()],XA.prototype,"y1",2),mw([jw()],XA.prototype,"x2",2),mw([jw()],XA.prototype,"y2",2),mw([jw()],XA.prototype,"startLine",2),mw([jw()],XA.prototype,"endLine",2),mw([jw()],XA.prototype,"isRange",2);var qA=class extends lD{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return dA.toFontString(this)}};function QA(e){const{parallelFlipRotation:t=0,regularFlipRotation:i=0}=e,n=e.rotation?FI(zI(e.rotation)):0,o=!n&&t>=0&&t<=Math.PI?-1:1,s=!n&&i>=0&&i<=Math.PI?-1:1;let r=0;return e.parallel?r=o*Math.PI/2:-1===s&&(r=Math.PI),{configuredRotation:n,defaultRotation:r,parallelFlipFlag:o,regularFlipFlag:s}}function JA(e,t){return isNaN(e)?t?0:10:e}function $A(e,t,i,n,o){const s=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI;if(e){if(!t&&!i)return"center";if(n*(s||r?-1:1)===-1)return"end"}else if(n*o===-1)return"end";return"start"}function eT(e,t,i,n){const o=[];for(const{tickLabel:s,translationY:r}of e){if(!s)continue;const{width:e,height:a}=n.measureLines(s),l=new Ww(t,r,e,a),d=new Ww(t,r,0,0);i.transformBBox(d,l);const{x:c,y:h}=l;o.push({point:{x:c,y:h},label:{text:s,width:e,height:a}})}return o}function tT(e){return xS(e)||pS(e)||function(e){return null!=e&&Object.hasOwn(e,"valueOf")&&xS(e.valueOf())}(e)}function iT(e,t){return null!=e&&(!t||tT(e))}function nT(e){return function(e){return null!=e&&Object.hasOwn(e,"toString")&&bS(e.toString())}(e)&&Object.hasOwn(e,"id")?e.id:e}mw([hD(fD)],qA.prototype,"enabled",2),mw([hD(ND,{optional:!0})],qA.prototype,"color",2),mw([hD(KD,{optional:!0})],qA.prototype,"fontStyle",2),mw([hD(YD,{optional:!0})],qA.prototype,"fontWeight",2),mw([hD(SD)],qA.prototype,"fontSize",2),mw([hD(bD)],qA.prototype,"fontFamily",2),mw([hD(yD,{optional:!0})],qA.prototype,"formatter",2);var oT=e=>"value"===e?sk(((e,t)=>"line"===t.target.type),(e=>"range"===e.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'")):sk(((e,t)=>"range"===t.target.type),(e=>"line"===e.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'")),sT=(e,t,i,n,o)=>{const s="line"===e&&void 0!==t,r="range"===e&&void 0!==i;if(!s&&!r)return!0;const[a,l]=null!==i&&void 0!==i?i:[t,void 0],d=pM.is(n)||Zk.is(n),c=iT(a,d)&&!isNaN(n.convert(a)),h=iT(l,d)&&!isNaN(n.convert(l));var u;if(s&&c||r&&c&&h)return null===(u=null===o||void 0===o?void 0:o())||void 0===u||u;const p=["Expecting crossLine"];return r?(c||p.push("range start ".concat(lk(a))),h||p.push("".concat(c?"":"and ","range end ").concat(lk(l)))):p.push("value ".concat(lk(a))),p.push("to match the axis scale domain."),cM.warnOnce(p.join(" ")),!1},rT={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},aT={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function lT(e){let{yDirection:t,padding:i=0,position:n="top",bbox:o}=e;const s=t?rT:aT,{xTranslationDirection:r,yTranslationDirection:a}=s[n];return{xTranslation:r*(i+o.width/2),yTranslation:a*(i+o.height/2)}}function dT(e){let{yDirection:t,bbox:i,padding:n=0,position:o="top"}=e;const s={};return o.startsWith("inside")||("top"!==o||t?"bottom"!==o||t?"left"===o&&t?s.left=n+i.width:"right"===o&&t&&(s.right=n+i.width):s.bottom=n+i.height:s.top=n+i.height),s}var cT=e=>{let{direction:t,xEnd:i,yStart:n,yEnd:o}=e;return"y"===t?{x:i/2,y:n}:{x:i,y:isNaN(o)?n:(n+o)/2}},hT=e=>{let{direction:t,xStart:i,xEnd:n,yStart:o,yEnd:s}=e;return"y"===t?{x:i,y:isNaN(s)?o:(o+s)/2}:{x:n/2,y:o}},uT=e=>{let{direction:t,xEnd:i,yStart:n,yEnd:o}=e;return"y"===t?{x:i,y:isNaN(o)?n:(n+o)/2}:{x:i/2,y:isNaN(o)?n:o}},pT=e=>{let{direction:t,xStart:i,xEnd:n,yStart:o,yEnd:s}=e;return"y"===t?{x:n/2,y:isNaN(s)?o:s}:{x:i,y:isNaN(s)?o:(o+s)/2}},gT=e=>{let{direction:t,xStart:i,xEnd:n,yStart:o}=e;return"y"===t?{x:i/2,y:o}:{x:n,y:o}},mT=e=>{let{direction:t,xStart:i,yStart:n,yEnd:o}=e;return"y"===t?{x:i,y:isNaN(o)?n:o}:{x:i,y:n}},vT=e=>{let{direction:t,xEnd:i,yStart:n,yEnd:o}=e;return"y"===t?{x:i,y:n}:{x:i,y:isNaN(o)?n:o}},fT=e=>{let{direction:t,xStart:i,xEnd:n,yStart:o,yEnd:s}=e;return"y"===t?{x:n,y:isNaN(s)?o:s}:{x:i,y:isNaN(s)?o:s}},yT={top:{c:cT},bottom:{c:pT},left:{c:hT},right:{c:uT},"top-left":{c:gT},"top-right":{c:vT},"bottom-left":{c:mT},"bottom-right":{c:fT},inside:{c:e=>{let{xEnd:t,yStart:i,yEnd:n}=e;return{x:t/2,y:isNaN(n)?i:(i+n)/2}}},"inside-left":{c:hT},"inside-right":{c:uT},"inside-top":{c:cT},"inside-bottom":{c:pT},"inside-top-left":{c:gT},"inside-bottom-left":{c:mT},"inside-top-right":{c:vT},"inside-bottom-right":{c:fT}},bT=ik(["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"],"crossLine label position"),CT=class extends lD{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};mw([hD(fD,{optional:!0})],CT.prototype,"enabled",2),mw([hD(bD,{optional:!0})],CT.prototype,"text",2),mw([hD(KD,{optional:!0})],CT.prototype,"fontStyle",2),mw([hD(YD,{optional:!0})],CT.prototype,"fontWeight",2),mw([hD(SD)],CT.prototype,"fontSize",2),mw([hD(bD)],CT.prototype,"fontFamily",2),mw([hD(CD)],CT.prototype,"padding",2),mw([hD(ND,{optional:!0})],CT.prototype,"color",2),mw([hD(bT,{optional:!0})],CT.prototype,"position",2),mw([hD(CD,{optional:!0})],CT.prototype,"rotation",2),mw([hD(fD,{optional:!0})],CT.prototype,"parallel",2);var xT=class extends lD{constructor(){super(),this.id=ww(this),this.label=new CT,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.rangeGroup=new cI({name:this.id}),this.lineGroup=new cI({name:this.id}),this.labelGroup=new cI({name:this.id}),this.crossLineRange=new XA,this.crossLineLabel=new gA,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(e){const{enabled:t,data:i,type:n,value:o,range:s,scale:r}=this;if(!n||!r||!t||!e||!sT(n,o,s,r)||0===i.length)return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();const{isRange:a}=this;a!==this._isRange&&(a?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=a}calculateLayout(e,t){var i,n,o;if(!e)return;const{scale:s,gridLength:r,sideFlag:a,direction:l,label:{position:d="top"},clippedRange:c,strokeWidth:h=0}=this;if(this.data=[],!s)return;const u=null!==(i=s.bandwidth)&&void 0!==i?i:0,p=null!==(n=s.step)&&void 0!==n?n:0,g=(t?-1:1)*(s instanceof aD?(p-u)/2:0),[m,v]=[0,a*r];let[f,y]=this.getRange();const b=void 0===y&&Zk.is(s)?u/2+g:0;let[C,x]=[Number(s.convert(f,!0))-g+b,s.convert(y,!0)+u+g];C=Lw(C,c),x=Lw(x,c),[f,y]=[Number(s.convert(f))+b,s.convert(y)+u];const w=(f===C||y===x||C!==x)&&Math.abs(x-C)>0;if(w&&C>x&&([C,x]=[x,C],[f,y]=[y,f]),f-g>=C&&(f-=g),y+g<=x&&(y+=g),this.isRange=w,this.startLine=h>0&&f>=C&&f<=C+g,this.endLine=h>0&&y>=x-u-g&&y<=x,!w&&!this.startLine&&!this.endLine)return;if(this.data=[C,x],!this.label.enabled)return;const{c:S=cT}=null!==(o=yT[d])&&void 0!==o?o:{},{x:M,y:D}=S({direction:l,xStart:m,xEnd:v,yStart:C,yEnd:x});this.labelPoint={x:M,y:D}}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){var e;const{crossLineRange:t,sideFlag:i,gridLength:n,data:o,startLine:s,endLine:r,isRange:a,fill:l,fillOpacity:d,stroke:c,strokeWidth:h,lineDash:u}=this;t.x1=0,t.x2=i*n,t.y1=o[0],t.y2=o[1],t.startLine=s,t.endLine=r,t.isRange=a,t.fill=l,t.fillOpacity=null!==d&&void 0!==d?d:1,t.stroke=c,t.strokeWidth=null!==h&&void 0!==h?h:1,t.strokeOpacity=null!==(e=this.strokeOpacity)&&void 0!==e?e:1,t.lineDash=u}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:t,y:i}={},label:{parallel:n,rotation:o,position:s="top",padding:r=0},direction:a,parallelFlipRotation:l,regularFlipRotation:d}=this;if(void 0===t||void 0===i)return;const{defaultRotation:c,configuredRotation:h}=QA({rotation:o,parallel:n,regularFlipRotation:d,parallelFlipRotation:l});e.rotation=c+h,e.textBaseline="middle",e.textAlign="center";const u=e.getBBox();if(!u)return;const p="y"===a,{xTranslation:g,yTranslation:m}=lT({yDirection:p,padding:r,position:s,bbox:u});e.translationX=t+g,e.translationY=i+m}getRange(){var e;const{value:t,range:i,scale:n}=this,o=pM.is(n)||Zk.is(n),s=null!==(e=null===i||void 0===i?void 0:i[0])&&void 0!==e?e:t;let r=null===i||void 0===i?void 0:i[1];return o||void 0!==r||(r=s),o&&s===r&&(r=void 0),[s,r]}computeLabelBBox(){const{label:e}=this;if(!e.enabled)return;const t=new gA;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text;const{labelPoint:{x:i,y:n}={},label:{parallel:o,rotation:s,position:r="top",padding:a=0},direction:l,parallelFlipRotation:d,regularFlipRotation:c}=this;if(void 0===i||void 0===n)return;const{configuredRotation:h}=QA({rotation:s,parallel:o,regularFlipRotation:c,parallelFlipRotation:d});t.rotation=h,t.textBaseline="middle",t.textAlign="center";const u=t.getBBox();if(!u)return;const p="y"===l,{xTranslation:g,yTranslation:m}=lT({yDirection:p,padding:a,position:r,bbox:u});return t.x=i+g,t.y=n+m,t.getBBox()}calculatePadding(e){var t,i,n,o,s,r,a,l;const{isRange:d,startLine:c,endLine:h,direction:u,label:{padding:p=0,position:g="top"}}=this;if(!d&&!c&&!h)return;const m=this.computeLabelBBox();if(null==(null===m||void 0===m?void 0:m.x)||null==(null===m||void 0===m?void 0:m.y))return;const v=dT({yDirection:"y"===u,padding:p,position:g,bbox:m});e.left=Math.max(null!==(t=e.left)&&void 0!==t?t:0,null!==(i=v.left)&&void 0!==i?i:0),e.right=Math.max(null!==(n=e.right)&&void 0!==n?n:0,null!==(o=v.right)&&void 0!==o?o:0),e.top=Math.max(null!==(s=e.top)&&void 0!==s?s:0,null!==(r=v.top)&&void 0!==r?r:0),e.bottom=Math.max(null!==(a=e.bottom)&&void 0!==a?a:0,null!==(l=v.bottom)&&void 0!==l?l:0)}};xT.className="CrossLine",mw([hD(fD,{optional:!0})],xT.prototype,"enabled",2),mw([hD(ik(["range","line"],"a crossLine type"),{optional:!0})],xT.prototype,"type",2),mw([hD(pD(oT("range"),kD.restrict({length:2})),{optional:!0})],xT.prototype,"range",2),mw([hD(oT("value"),{optional:!0})],xT.prototype,"value",2),mw([hD(ND,{optional:!0})],xT.prototype,"fill",2),mw([hD(MD,{optional:!0})],xT.prototype,"fillOpacity",2),mw([hD(ND,{optional:!0})],xT.prototype,"stroke",2),mw([hD(CD,{optional:!0})],xT.prototype,"strokeWidth",2),mw([hD(MD,{optional:!0})],xT.prototype,"strokeOpacity",2),mw([hD(jD,{optional:!0})],xT.prototype,"lineDash",2),mw([hD(mD)],xT.prototype,"label",2);var wT=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_GRID=1]="AXIS_GRID",e[e.AXIS=2]="AXIS",e[e.SERIES_CROSSLINE_RANGE=3]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=4]="SERIES_LAYER",e[e.AXIS_FOREGROUND=5]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=6]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=7]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=8]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=9]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=10]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=11]="STATUS_BAR",e[e.SERIES_LABEL=12]="SERIES_LABEL",e[e.LEGEND=13]="LEGEND",e[e.NAVIGATOR=14]="NAVIGATOR",e[e.FOREGROUND=15]="FOREGROUND",e))(wT||{}),ST=["stroke","lineDash"],MT=ID((e=>vS(e)&&Object.keys(e).every((e=>ST.includes(e)))),"objects with gridline style properties such as 'stroke' or 'lineDash'"),DT=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};function kT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[void 0];return oS(((i,n,o)=>t.includes(o)?mS(e)?e(o):e:o))}mw([hD(fD)],DT.prototype,"enabled",2),mw([hD(SD)],DT.prototype,"width",2),mw([hD(MT)],DT.prototype,"style",2);gw({},{TimeInterval:()=>EM,day:()=>LM,friday:()=>KM,hour:()=>NM,millisecond:()=>Dk,minute:()=>OM,monday:()=>HM,month:()=>BM,saturday:()=>YM,second:()=>zM,sunday:()=>VM,thursday:()=>UM,tuesday:()=>WM,utcDay:()=>TT,utcHour:()=>AT,utcMinute:()=>IT,utcMonth:()=>ET,utcYear:()=>RT,wednesday:()=>jM,year:()=>ZM});var IT=new RM((function(e){return Math.floor(e.getTime()/MM)}),(function(e){return new Date(e*MM)}));var AT=new RM((function(e){return Math.floor(e.getTime()/DM)}),(function(e){return new Date(e*DM)}));var TT=new RM((function(e){return Math.floor(e.getTime()/kM)}),(function(e){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}));var ET=new RM((function(e){return 12*e.getUTCFullYear()+e.getUTCMonth()}),(function(e){const t=Math.floor(e/12),i=e-12*t;return new Date(Date.UTC(t,i,1))}));var RT=new RM((function(e){return e.getUTCFullYear()}),(function(e){const t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t})),LT=sk((e=>xS(e)&&e>0||e instanceof EM),"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),PT=class extends lD{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};mw([hD(LT,{optional:!0})],PT.prototype,"step",2),mw([hD(kD,{optional:!0})],PT.prototype,"values",2),mw([hD(nk),kT(NaN)],PT.prototype,"minSpacing",2),mw([hD(ok),kT(NaN)],PT.prototype,"maxSpacing",2);var NT=class extends lD{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.spacing=5,this.minSpacing=NaN,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};mw([hD(fD)],NT.prototype,"enabled",2),mw([hD(KD,{optional:!0})],NT.prototype,"fontStyle",2),mw([hD(YD,{optional:!0})],NT.prototype,"fontWeight",2),mw([hD(CD.restrict({min:1}))],NT.prototype,"fontSize",2),mw([hD(bD)],NT.prototype,"fontFamily",2),mw([hD(SD)],NT.prototype,"spacing",2),mw([hD(DD),kT(NaN)],NT.prototype,"minSpacing",2),mw([hD(ND,{optional:!0})],NT.prototype,"color",2),mw([hD(CD,{optional:!0})],NT.prototype,"rotation",2),mw([hD(fD)],NT.prototype,"avoidCollisions",2),mw([hD(fD)],NT.prototype,"mirrored",2),mw([hD(fD)],NT.prototype,"parallel",2),mw([hD(yD,{optional:!0})],NT.prototype,"itemStyler",2),mw([hD(yD,{optional:!0})],NT.prototype,"formatter",2),mw([hD(bD,{optional:!0})],NT.prototype,"format",2);var FT=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};mw([hD(fD)],FT.prototype,"enabled",2),mw([hD(SD)],FT.prototype,"width",2),mw([hD(ND,{optional:!0})],FT.prototype,"stroke",2);var OT=class extends lD{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};mw([hD(fD)],OT.prototype,"enabled",2),mw([hD(SD)],OT.prototype,"width",2),mw([hD(SD)],OT.prototype,"size",2),mw([hD(ND,{optional:!0})],OT.prototype,"stroke",2);var BT=class extends lD{constructor(){super(...arguments),this.caption=new ZA,this.enabled=!1,this.spacing=ZA.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};function GT(e){const[t,i]=Pw(e.range),n=Math.floor(t),o=Math.ceil(i);return{min:n,max:o,visible:n!==o}}mw([hD(fD)],BT.prototype,"enabled",2),mw([hD(bD,{optional:!0})],BT.prototype,"text",2),mw([hD(SD,{optional:!0})],BT.prototype,"spacing",2),mw([hD(KD,{optional:!0})],BT.prototype,"fontStyle",2),mw([hD(YD,{optional:!0})],BT.prototype,"fontWeight",2),mw([hD(SD)],BT.prototype,"fontSize",2),mw([hD(bD)],BT.prototype,"fontFamily",2),mw([hD(ND,{optional:!0})],BT.prototype,"color",2),mw([hD(ZD)],BT.prototype,"wrapping",2),mw([hD(yD,{optional:!0})],BT.prototype,"formatter",2);var zT=2*Math.PI,_T=zT/2;function VT(e){const t=(t,i)=>{const[n=e.min,o=e.max]=Pw(null!==i&&void 0!==i?i:[]);return t<n||t>o},i={fromFn(e,i,n){let o=e.y1+e.translationY,s=e.opacity;return("added"===n||t(e.datum.translationY,e.datum.range))&&(o=i.translationY,s=0),{y:0,translationY:o,opacity:s,phase:tM[n]}},toFn(e,t,i){const n=t.translationY;let o=1;return"removed"===i&&(o=0),{y:0,translationY:n,opacity:o,finish:{y:n,translationY:0}}},applyFn(e,i){e.setProperties(i),e.visible=!t(e.y)}},n={fromFn(e,i,n){var o;const s=null!==(o=e.previousDatum)&&void 0!==o?o:i,r=s.x,a=s.y,l=s.rotationCenterX;let d=Math.round(e.translationY),c=s.rotation,h=e.opacity;return"removed"===n||t(s.y,s.range)?c=i.rotation:("added"===n||t(e.datum.y,e.datum.range))&&(d=Math.round(s.translationY),h=0,c=i.rotation),{x:r,y:a,rotationCenterX:l,translationY:d,rotation:c,opacity:h,phase:tM[n]}},toFn(e,t,i){const n=t.x,o=t.y,s=t.rotationCenterX,r=Math.round(t.translationY);let a=0,l=1;if("added"===i)a=t.rotation;else if("removed"===i)l=0,a=t.rotation;else{var d,c;h=null!==(d=null===(c=e.previousDatum)||void 0===c?void 0:c.rotation)&&void 0!==d?d:t.rotation,u=t.rotation,a=Math.abs(u-h)<_T?u:h>u?u+zT:u-zT}var h,u;return{x:n,y:o,rotationCenterX:s,translationY:r,rotation:a,opacity:l,finish:{rotation:t.rotation}}}};return{tick:i,line:{fromFn(e,t){var i;return l(l({},null!==(i=e.previousDatum)&&void 0!==i?i:t),{},{phase:tM.updated})},toFn:(e,t)=>l({},t)},label:n,group:{fromFn(e,t){const{rotation:i,translationX:n,translationY:o}=e;return{rotation:i,translationX:n,translationY:o,phase:tM.updated}},toFn(e,t){const{rotation:i,translationX:n,translationY:o}=t;return{rotation:i,translationX:n,translationY:o}}}}}function HT(){return(e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})}function WT(e){const{visible:t,min:i,max:n}=e;return(e,o)=>{const s=o.translationY;return{y:s,translationY:0,opacity:1,visible:t&&s>=i&&s<=n}}}function jT(){return(e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})}function UT(){return(e,t)=>l({},t)}var KT=Object.freeze({tickData:{ticks:[],rawTicks:[],labelCount:0,fractionDigits:0},combinedRotation:0,textAlign:"center",textBaseline:"bottom",labelData:[]}),YT=class extends(sI(sA)){},ZT=class e{constructor(t,i){let n;this.moduleCtx=t,this.scale=i,this.id=ww(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new PT,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new gI({name:"".concat(this.id,"-axis")}),this.tickLineGroup=this.axisGroup.appendChild(new cI({name:"".concat(this.id,"-Axis-tick-lines")})),this.lineNode=this.axisGroup.appendChild(new YT({name:"".concat(this.id,"-Axis-line")})),this.tickLabelGroup=this.axisGroup.appendChild(new cI({name:"".concat(this.id,"-Axis-tick-labels")})),this.labelGroup=new cI({name:"".concat(this.id,"-Labels"),zIndex:8}),this.gridGroup=new gI({name:"".concat(this.id,"-Axis-grid"),zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new cI({name:"".concat(this.id,"-gridLines")})),this.crossLineRangeGroup=new gI({name:"".concat(this.id,"-CrossLines-Range"),zIndex:3}),this.crossLineLineGroup=new gI({name:"".concat(this.id,"-CrossLines-Line"),zIndex:7}),this.crossLineLabelGroup=new gI({name:"".concat(this.id,"-CrossLines-Label"),zIndex:12}),this.tickLineGroupSelection=LI.select(this.tickLineGroup,YT,!1),this.tickLabelGroupSelection=LI.select(this.tickLabelGroup,gA,!1),this.gridLineGroupSelection=LI.select(this.gridLineGroup,YT,!1),this._crossLines=[],this.line=new FT,this.tick=new OT,this.gridLine=new DT,this.label=this.createLabel(),this.tempText=new gA,this.tempCaption=new ZA,this.defaultTickMinSpacing=e.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new BT,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this._domainCalculated=!1,this.moduleMap=new ck,this.range=this.scale.range.slice(),this.crossLines.forEach((e=>this.initCrossLine(e))),this.axisGroup.appendChild(this.title.caption.node),this.animationManager=t.animationManager,this.animationState=new jA("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:e=>this.animateReadyUpdate(e),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"),t.layoutManager.addListener("layout:complete",(e=>{null!=n&&null!=kA(e.chart,n)&&this.animationState.transition("resize"),n=l({},e.chart)})))}get type(){var e;return null!==(e=this.constructor.type)&&void 0!==e?e:""}set crossLines(e){const{CrossLineConstructor:t}=this.constructor;this._crossLines.forEach((e=>this.detachCrossLine(e))),this._crossLines=e.map((e=>{const i=new t;return i.set(e),i})),this._crossLines.forEach((e=>{this.attachCrossLine(e),this.initCrossLine(e)}))}get crossLines(){return this._crossLines}resetAnimation(e){"initial"===e&&this.animationState.transition("reset")}attachCrossLine(e){this.crossLineRangeGroup.appendChild(e.rangeGroup),this.crossLineLineGroup.appendChild(e.lineGroup),this.crossLineLabelGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineRangeGroup.removeChild(e.rangeGroup),this.crossLineLineGroup.removeChild(e.lineGroup),this.crossLineLabelGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach((e=>e()))}updateRange(){var e;const{range:t,visibleRange:i,scale:n}=this,o=(t[1]-t[0])/(i[1]-i[0]),s=o*i[0],r=t[0]-s;null===(e=n.setVisibleRange)||void 0===e||e.call(n,i),n.range=[r,r+o],this.crossLines.forEach((e=>{e.clippedRange=[t[0],t[1]]}))}setCrossLinesVisible(e){this.crossLineRangeGroup.visible=e,this.crossLineLineGroup.visible=e,this.crossLineLabelGroup.visible=e}attachAxis(e){e.gridNode.appendChild(this.gridGroup),e.axisNode.appendChild(this.axisGroup),e.labelNode.appendChild(this.labelGroup),e.crossLineRangeNode.appendChild(this.crossLineRangeGroup),e.crossLineLineNode.appendChild(this.crossLineLineGroup),e.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(e){e.gridNode.removeChild(this.gridGroup),e.axisNode.removeChild(this.axisGroup),e.labelNode.removeChild(this.labelGroup),e.crossLineRangeNode.removeChild(this.crossLineRangeGroup),e.crossLineLineNode.removeChild(this.crossLineLineGroup),e.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(e){this.labelGroup.append(e)}inRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[i,n]=Pw(this.range);return e>=i-t&&e<=n+t}onFormatChange(e,t,i,n){const{scale:o}=this,s=o instanceof Gk;if(n&&null!==o&&void 0!==o&&o.tickFormat)try{const t=o.tickFormat({ticks:e,specifier:n});return this.labelFormatter=t,void(this.datumFormatter=t)}catch(r){cM.warnOnce("the axis label format string ".concat(n," is invalid. No formatting will be applied"))}this.labelFormatter=s?String:e=>wA(e,t),this.datumFormatter=s?String:e=>wA(e,t+1)}onGridLengthChange(e,t){t^e&&this.onGridVisibilityChange(),this.crossLines.forEach((e=>this.initCrossLine(e)))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new NT}update(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.tickGenerationResult)return;this.updatePosition();const t=this.getAxisLineCoordinates(),{tickData:i,combinedRotation:n,textBaseline:o,textAlign:s}=this.tickGenerationResult,r=this.tickLabelGroupSelection.nodes().slice();if(this.updateSelections(t,i.ticks,{combinedRotation:n,textAlign:s,textBaseline:o,range:this.scale.range}),!e||this.animationManager.isSkipped())this.resetSelectionNodes();else{const e=function(e,t){const i=Math.max(e.length,t.length),n=new Set,o=new Set;for(let s=0;s<i;s++){const i=e[s],r=t[s];i!==r&&(o.has(r)?o.delete(r):r&&n.add(r),n.has(i)?n.delete(i):i&&o.add(i))}return{changed:n.size>0||o.size>0,added:n,removed:o}}(r.map((e=>e.datum.tickId)),i.ticks.map((e=>e.tickId)));this.animationState.transition("update",e)}this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled;const{enabled:a,stroke:l,width:d}=this.line;this.lineNode.setProperties({stroke:l,strokeWidth:a?d:0}),this.updateLabels(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(!i.ticks.length),this.updateCrossLines()}getAxisLineCoordinates(){const[e,t]=Pw(this.range);return{x:0,y1:e,y2:t}}getTickLineCoordinates(e){const t=this.label.getSideFlag()*this.getTickSize(),i=Math.min(0,t);return{x1:i,x2:i+Math.abs(t),y:e.translationY}}getLabelStyles(e,t){const{label:i}=this,n={color:i.color,spacing:i.spacing,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight};let o;i.itemStyler&&(o=this.moduleCtx.callbackCache.call(i.itemStyler,l(l({},e),n)));const{color:s,fontFamily:r,fontSize:a,fontStyle:d,fontWeight:c,spacing:h}=ES(o,t,n);return{fill:s,fontFamily:r,fontSize:a,fontStyle:d,fontWeight:c,spacing:h}}getTickLabelProps(e,t){const{label:i}=this,{combinedRotation:n,textBaseline:o,textAlign:s,range:r}=t,a=e.tickLabel,d=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),c=""!==a&&null!=a;return l(l({},this.getLabelStyles({value:e.tickLabel})),{},{tickId:e.tickId,rotation:n,rotationCenterX:d,translationY:e.translationY,text:a,textAlign:s,textBaseline:o,visible:c,x:d,y:0,range:r})}getTickSize(){return this.tick.enabled?this.tick.size:0}setTitleProps(e,t){var i;const{title:n}=this;if(!n.enabled)return e.enabled=!1,void(e.node.visible=!1);e.color=n.color,e.fontFamily=n.fontFamily,e.fontSize=n.fontSize,e.fontStyle=n.fontStyle,e.fontWeight=n.fontWeight,e.enabled=n.enabled,e.wrapping=n.wrapping;const o=e.node,s=(null!==(i=n.spacing)&&void 0!==i?i:0)+t.spacing,r=this.label.getSideFlag(),a=FI(this.rotation),l=-1===r&&a>Math.PI&&a<2*Math.PI?-1:1,d=l*r*Math.PI/2,c=1===l?"bottom":"top",{range:h}=this,u=Math.floor(l*r*(h[0]+h[1])/2),p=-1===r?Math.floor(l*-s):Math.floor(-s),{callbackCache:g}=this.moduleCtx,{formatter:m=e=>e.defaultValue}=n,v=g.call(m,this.getTitleFormatterParams());e.text=v,o.setProperties({visible:!0,text:v,textBaseline:c,x:u,y:p,rotation:d})}processData(){this._domainCalculated=!1}calculateLayout(e,t){var i,n;const{rotation:o,parallelFlipRotation:s,regularFlipRotation:r}=this.calculateRotations(),a=this.label.getSideFlag();this.updateScale({domain:e,skipDomainCalculation:this._domainCalculated}),this._domainCalculated=null==e;const l=this.processTicks(t,s,r);this.tickGenerationResult=l.tickGenerationResult;const d=Ww.merge(l.boxes),c=this.getTransformBox(d),h=this.isAnySeriesActive();return this.crossLines.forEach((e=>{var t,i,n;(e.sideFlag=-a,e.direction=o===-Math.PI/2?"x":"y",e instanceof xT)&&(null!==(n=(i=e.label).parallel)&&void 0!==n||(i.parallel=this.label.parallel));e.parallelFlipRotation=s,e.regularFlipRotation=r,null===(t=e.calculateLayout)||void 0===t||t.call(e,h,this.reverse)})),{primaryTickCount:null!==(i=null===(n=l.tickGenerationResult)||void 0===n?void 0:n.primaryTickCount)&&void 0!==i?i:t,bbox:c}}processTicks(e,t,i){var n;const o=this.label.getSideFlag(),s=o*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),r=this.label.enabled||this.tick.enabled||this.gridLine.enabled?this.generateTicks({primaryTickCount:e,parallelFlipRotation:t,regularFlipRotation:i,labelX:s,sideFlag:o}):KT,{tickData:a,combinedRotation:d,textBaseline:c,textAlign:h}=r;this.updateLayoutState(a.fractionDigits);const u=[],{x:p,y1:g,y2:m}=this.getAxisLineCoordinates(),v=new Ww(p+Math.min(o*this.seriesAreaPadding,0),g,this.seriesAreaPadding,m-g);u.push(v),this.tick.enabled&&a.ticks.forEach((e=>{const{x1:t,x2:i,y:n}=this.getTickLineCoordinates(e),o=new Ww(t,n,i-t,0);u.push(o)}));const{tempText:f}=this;if(this.label.enabled&&a.ticks.forEach((e=>{const t=this.getTickLabelProps(e,{combinedRotation:d,textAlign:h,textBaseline:c,range:this.scale.range});if(!t.visible)return;f.setProperties(l(l({},t),{},{translationY:Math.round(e.translationY)}));const i=f.getBBox();i&&u.push(i)})),null!==(n=this.title)&&void 0!==n&&n.enabled){const e=Ww.merge(u).width;this.setTitleProps(this.tempCaption,{spacing:e});const t=this.tempCaption.node.getBBox();t&&u.push(t)}return{tickGenerationResult:r,boxes:u}}updateLayoutState(e){this.layout.label={fractionDigits:e,spacing:this.label.spacing,format:this.label.format}}getTransformBox(e){const t=new Jk,{rotation:i,translationX:n,translationY:o}=this.getAxisTransform();return Jk.updateTransformMatrix(t,1,1,i,n,o),t.transformBBox(e)}setDomain(e){this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(e){var t;const i=null===e||void 0===e?void 0:e.domain;null!==(t=null===e||void 0===e?void 0:e.skipDomainCalculation)&&void 0!==t&&t||(i?this.setDomain(i):this.calculateDomain()),this.updateRange(),this.scale.interval=this.interval.step,pM.is(this.scale)&&(this.scale.nice=this.nice,this.scale.update())}calculateRotations(){const e=zI(this.rotation);return{rotation:e,parallelFlipRotation:FI(e),regularFlipRotation:FI(e-Math.PI/2)}}generateTicks(e){let{primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:n,labelX:o,sideFlag:s}=e;const{scale:r,interval:{minSpacing:a,maxSpacing:l},label:{parallel:d,rotation:c,fontFamily:h,fontSize:u,fontStyle:p,fontWeight:g}}=this,m=void 0!==t,{defaultRotation:v,configuredRotation:f,parallelFlipFlag:y,regularFlipFlag:b}=QA({rotation:c,parallel:d,regularFlipRotation:n,parallelFlipRotation:i}),C=f+v,x=new Jk,{maxTickCount:w}=this.estimateTickCount(a,l),S=!(pM.is(r)||Zk.is(r))||isNaN(w)?10:w;let M=$A(d,f,0,s,b);const D=function(e,t,i,n){return e&&!t?i*n===-1?"hanging":"bottom":"middle"}(d,f,s,y),k=dA.toFontString({fontFamily:h,fontSize:u,fontStyle:p,fontWeight:g}),I=aA.getMeasurer({font:k}),A={fontFamily:h,fontSize:u,fontStyle:p,fontWeight:g,textBaseline:D,textAlign:M};let T={ticks:[],rawTicks:[],fractionDigits:0,labelCount:0},E=0,R=0,L=!0,P=[],N=!1;for(;L&&E<=S&&!N;){R=0,M=$A(d,f,0,s,b);const e=this.getTickStrategies({secondaryAxis:m,index:E});for(const i of e){({tickData:T,index:E,autoRotation:R,terminate:N}=i({index:E,tickData:T,textProps:A,labelOverlap:L,terminate:N,primaryTickCount:t}));const e=0!==f||0!==R,n=C+R,r=JA(this.label.minSpacing,e);Jk.updateTransformMatrix(x,1,1,n,0,0),M=$A(d,f,R,s,b),P=eT(T.ticks,o,x,I),L=!!this.label.avoidCollisions&&bA(P,r)}}const F=v+f+R;return!m&&T.rawTicks.length>0&&(t=T.rawTicks.length),{tickData:T,primaryTickCount:t,combinedRotation:F,textBaseline:D,textAlign:M,labelData:P}}getTickStrategies(e){let{index:t,secondaryAxis:i}=e;const{scale:n,label:o}=this,{minSpacing:s}=this.interval,r=pM.is(n)||Zk.is(n),a=o.enabled&&o.avoidCollisions,l=!r&&0!==t&&a,d=!0===o.autoRotate&&void 0===o.rotation,c=[];let h;h=this.interval.values?3:i?1:l?2:0;if(c.push((e=>{let{index:t,tickData:i,primaryTickCount:n,terminate:o}=e;return this.createTickData(h,t,i,o,n)})),!r&&!isNaN(s)){const e=e=>{let{index:t,tickData:i,primaryTickCount:n,terminate:o}=e;return this.createTickData(2,t,i,o,n)};c.push(e)}if(a&&d){const e=e=>{var t;let{index:i,tickData:n,labelOverlap:o,terminate:s}=e;return{index:i,tickData:n,autoRotation:o?FI(zI(null!==(t=this.label.autoRotateAngle)&&void 0!==t?t:0)):0,terminate:s}};c.push(e)}return c}createTickData(e,t,i,n,o){const{scale:s}=this,{step:r,values:a,minSpacing:l,maxSpacing:d}=this.interval,{maxTickCount:c,minTickCount:h,tickCount:u}=this.estimateTickCount(l,d),p=pM.is(s)||Zk.is(s),g=!p||isNaN(c)?10:c,m=e=>p?Math.max(u-e,h):c,v=null==r&&null==a&&m(t)>h&&(p||2===e);for(;t<=g;){const n=i.rawTicks;if(i=this.getTicks({tickGenerationType:e,previousTicks:n,minTickCount:h,maxTickCount:c,primaryTickCount:o,tickCount:m(t)}),t++,!v||!vM(i.rawTicks,n))break}return n||(n=null!=r||null!=a),{tickData:i,index:t,autoRotation:0,terminate:n}}getTicks(e){var t;let{tickGenerationType:i,previousTicks:n,tickCount:o,minTickCount:s,maxTickCount:r,primaryTickCount:a}=e;const{range:l,scale:d,visibleRange:c}=this,h=KA();let u;switch(i){case 3:if(u=this.interval.values,pM.is(d)){const[e,t]=Pw(d.getDomain().map(Number));u=u.filter((i=>i>=e&&i<=t)).sort(((e,t)=>e-t))}break;case 1:u=pM.is(d)?this.updateSecondaryAxisTicks(a):this.createTicks(o,s,r);break;case 2:u=this.filterTicks(n,o);break;default:u=this.createTicks(o,s,r)}const p=u.reduce(((e,t)=>Math.max(e,"number"===typeof t?Vw(t):0)),0),g=(null!==(t=d.bandwidth)&&void 0!==t?t:0)/2,m=[];let v=0;const f=Math.max(0,Math.floor(c[0]*u.length)),y=Math.min(u.length,Math.ceil(c[1]*u.length)),b=u.slice(f,y);this.onFormatChange(b,p,u,this.label.format);for(let C=0;C<b.length;C++){const e=b[C],t=d.convert(e)+g;if(l.length>0&&!this.inRange(t,.001))continue;const i=this.formatTick(e,f+C,p);m.push({tick:e,tickId:h(i),tickLabel:i,translationY:Math.floor(t)}),""!==i&&null!=i&&v++}return{rawTicks:u,fractionDigits:p,ticks:m,labelCount:v}}filterTicks(e,t){const{minSpacing:i,maxSpacing:n}=this.interval,o=!isNaN(i)||!isNaN(n)?Math.ceil(e.length/t):2;return e.filter(((e,t)=>t%o===0))}createTicks(e,t,i){var n,o;const{scale:s}=this;return e&&(pM.is(s)||Zk.is(s))&&(s.tickCount=e,s.minTickCount=null!==t&&void 0!==t?t:0,s.maxTickCount=null!==i&&void 0!==i?i:1/0),null!==(n=null===(o=s.ticks)||void 0===o?void 0:o.call(s))&&void 0!==n?n:[]}estimateTickCount(e,t){return Ok(this.calculateRangeWithBleed(),e,t,pM.defaultTickCount,this.defaultTickMinSpacing)}updateCrossLines(){const e=this.isAnySeriesActive();this.crossLines.forEach((t=>{t.update(e)}))}updateTickLines(){const{tick:e,label:t}=this,i=t.getSideFlag();this.tickLineGroupSelection.each(((t,n)=>{var o,s,r;t.strokeWidth=null!==(o=n.tickWidth)&&void 0!==o?o:e.width,t.stroke=null!==(s=n.tickStroke)&&void 0!==s?s:e.stroke,t.x1=i*(null!==(r=n.tickSize)&&void 0!==r?r:this.getTickSize()),t.x2=0}))}calculateAvailableRange(){return Nw(this.range)}calculateRangeWithBleed(){return zw(this.calculateAvailableRange()/Nw(this.visibleRange),2)}calculateDomain(){const{includeInvisibleDomains:e,boundSeries:t,direction:i}=this,n=e?t:t.filter((e=>e.isEnabled())),o=1===n.length?n[0].getDomain(i):n.flatMap((e=>e.getDomain(i)));this.setDomain(o)}getAxisTransform(){return{rotation:zI(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineRangeGroup:e,crossLineLineGroup:t,crossLineLabelGroup:i,axisGroup:n,gridGroup:o,translation:s}=this,{rotation:r}=this.calculateRotations(),a=Math.floor(s.x),l=Math.floor(s.y);e.setProperties({rotation:r,translationX:a,translationY:l}),t.setProperties({rotation:r,translationX:a,translationY:l}),i.setProperties({rotation:r,translationX:a,translationY:l}),o.setProperties({rotation:r,translationX:a,translationY:l}),n.datum=this.getAxisTransform()}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,t,i){const n=e=>e.tickId,o=t.map((e=>this.getTickLabelProps(e,i)));this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?t:[],void 0,n),this.tickLineGroupSelection.update(t,void 0,n),this.tickLabelGroupSelection.update(o,void 0,n)}updateGridLines(){const e=this.label.getSideFlag(),{gridLine:{style:t,width:i},gridPadding:n,gridLength:o}=this;0!==o&&0!==t.length&&this.gridLineGroupSelection.each(((s,r,a)=>{const{stroke:l,lineDash:d}=t[a%t.length];s.setProperties({x1:n,x2:-e*o+n,stroke:l,strokeWidth:i,lineDash:d})}))}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each(((e,t)=>{e.setProperties(t,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])}))}updateTitle(e,t){var i;const{title:n,lineNode:o,tickLineGroup:s,tickLabelGroup:r}=this;if(n.enabled&&!e&&null==t){t=cI.computeChildrenBBox([s,r,o]).width+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}null!==(i=t)&&void 0!==i||(t=0),this.setTitleProps(n.caption,{spacing:t})}formatTick(e,t,i){var n;const{labelFormatter:o,label:{formatter:s},moduleCtx:{callbackCache:r}}=this;let a;return s?a=r.call(s,{value:e,index:t,fractionDigits:i}):o&&(a=r.call(o,e)),String(null!==(n=a)&&void 0!==n?n:e)}formatDatum(e){var t;const{label:{formatter:i},moduleCtx:{callbackCache:n},datumFormatter:o=this.labelFormatter}=this;let s;return i?s=n.call(i,{value:e,index:NaN}):o?s=n.call(o,e):cS(e)&&(s=e.filter(Boolean).join(" - ")),String(null!==(t=s)&&void 0!==t?t:e)}getScaleValueFormatter(e){if(e&&this.scale.tickFormat)try{return this.scale.tickFormat({specifier:e})}catch(t){cM.warnOnce("the format string ".concat(e," is invalid, ignoring."))}return e=>this.formatDatum(e)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some((e=>this.includeInvisibleDomains||e.isEnabled()))}clipTickLines(e,t,i,n){this.tickLineGroup.setClipRect(new Ww(e,t,i,n))}clipGrid(e,t,i,n){this.gridGroup.setClipRect(new Ww(e,t,i,n))}getTitleFormatterParams(){var e;const{direction:t}=this,i=[];for(const n of this.boundSeries){const e=n.getKeys(t),o=n.getNames(t);for(let t=0;t<e.length;t++)i.push({key:e[t],name:o[t]})}return{direction:t,boundSeries:i,defaultValue:null===(e=this.title)||void 0===e?void 0:e.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return l({id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var e;return null!==(e=this.axisContext)&&void 0!==e||(this.axisContext=this.createAxisContext()),l(l({},this.moduleCtx),{},{parent:this.axisContext})}createAxisContext(){const{scale:e}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:pM.is(e)||Zk.is(e),getCanvasBounds:()=>rI.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce(((e,t)=>(t.getKeyProperties(this.direction).forEach((t=>{e.indexOf(t)<0&&e.push(t)})),e)),[]),scaleValueFormatter:e=>this.getScaleValueFormatter(e),scaleInvert:Zk.is(e)?t=>{var i;return null===(i=e.invertNearest)||void 0===i?void 0:i.call(e,t)}:t=>{var i;return null===(i=e.invert)||void 0===i?void 0:i.call(e,t)},scaleInvertNearest:t=>{var i;return null===(i=e.invertNearest)||void 0===i?void 0:i.call(e,t)},attachLabel:e=>this.attachLabel(e),inRange:(e,t)=>this.inRange(e,t)}}animateReadyUpdate(e){const{animationManager:t}=this.moduleCtx,i=VT(GT(this));iM(this.id,"axis-group",t,[this.axisGroup],i.group),iM(this.id,"line",t,[this.lineNode],i.line),iM(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((e,t)=>t.tickId),e),iM(this.id,"tick-labels",t,[this.tickLabelGroupSelection],i.label,((e,t)=>t.tickId),e)}resetSelectionNodes(){const e=GT(this);uk([this.axisGroup],((e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY}))),uk([this.gridLineGroupSelection,this.tickLineGroupSelection],WT(e)),uk([this.tickLabelGroupSelection],((e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX}))),uk([this.lineNode],UT())}isReversed(){return this.reverse}};ZT.defaultTickMinSpacing=50,ZT.CrossLineConstructor=xT,mw([hD(fD)],ZT.prototype,"nice",2),mw([hD(fD)],ZT.prototype,"reverse",2),mw([hD(GD)],ZT.prototype,"keys",2),mw([hD(mD)],ZT.prototype,"interval",2),mw([hD(mD)],ZT.prototype,"title",2),mw([BA(((e,t,i)=>e.onGridLengthChange(t,i)))],ZT.prototype,"gridLength",2);var XT=ZT,qT=class extends NT{constructor(){super(...arguments),this.autoRotateAngle=335}};mw([hD(fD,{optional:!0})],qT.prototype,"autoRotate",2),mw([hD(CD)],qT.prototype,"autoRotateAngle",2);var QT=class e extends XT{static is(t){return t instanceof e}get direction(){return"top"===this.position||"bottom"===this.position?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e){this.updateDirection(),super.update(e)}calculateLayout(e,t){return this.updateDirection(),super.calculateLayout(e,t)}createAxisContext(){return l(l({},super.createAxisContext()),{},{position:this.position})}createLabel(){return new qT}};mw([hD(SD,{optional:!0})],QT.prototype,"thickness",2),mw([hD(UD)],QT.prototype,"position",2);var JT=QT,$T=class e extends JT{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new aD),this.groupPaddingInner=.1,this.categoryAnimatable=!0,this.includeInvisibleDomains=!0}static is(t){return t instanceof e}domainOrderedToNormalizedDomain(e,t){let i=-1;for(const n of e){const e=t.indexOf(n);if(-1===e)i=1/0;else{if(e<=i)return!1;i=e}}return!0}calculateDomain(){var e;let t;const i=new Set;let n=!0;for(const o of this.boundSeries){if(!this.includeInvisibleDomains&&!o.isEnabled())continue;const e=o.getDomain(this.direction);i.has(e)||(i.add(e),null==t?t=this.normaliseDataDomain(e).domain:(n&&(n=this.domainOrderedToNormalizedDomain(e,t)),t=this.normaliseDataDomain([...t,...e]).domain))}null!==(e=t)&&void 0!==e||(t=[]),this.setDomain(t),this.categoryAnimatable=n}update(){super.update(),this.categoryAnimatable||this.moduleCtx.animationManager.skip()}normaliseDataDomain(e){const t=[],i=new Set;for(const n of e){const e=n instanceof Date?n.getTime():n;i.has(e)||(i.add(e),t.push(n))}return{domain:t,clipped:!1}}updateScale(e){var t,i;let{paddingInner:n,paddingOuter:o}=this;if(!xS(n)||!xS(o)){var s,r;const e=this.reduceBandScalePadding();null!==(s=n)&&void 0!==s||(n=e.inner),null!==(r=o)&&void 0!==r||(o=e.outer)}this.scale.paddingInner=null!==(t=n)&&void 0!==t?t:0,this.scale.paddingOuter=null!==(i=o)&&void 0!==i?i:0,super.updateScale(e)}reduceBandScalePadding(){return this.boundSeries.reduce(((e,t)=>{var i;const n=null===(i=t.getBandScalePadding)||void 0===i?void 0:i.call(t);return n&&(e.inner>n.inner&&(e.inner=n.inner),e.outer<n.outer&&(e.outer=n.outer)),e}),{inner:1/0,outer:-1/0})}};$T.className="CategoryAxis",$T.type="category",mw([hD(MD)],$T.prototype,"groupPaddingInner",2),mw([hD(MD,{optional:!0})],$T.prototype,"paddingInner",2),mw([hD(MD,{optional:!0})],$T.prototype,"paddingOuter",2);var eE=$T,tE=class{constructor(){this.destroyFns=[]}destroy(){for(const e of this.destroyFns)e()}},iE=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t){this.registerDependencies(n);const e=this.modules.find((e=>n.type===e.type&&(!("optionsKey"in n)||!("optionsKey"in e)||n.optionsKey===e.optionsKey)&&n.identifier===e.identifier));if(e){if("enterprise"===n.packageType&&"community"===e.packageType){const t=this.modules.indexOf(e);this.modules.splice(t,1,n),"optionsKey"in n&&this.modulesByOptionKey.set(n.optionsKey,n)}}else this.modules.push(n),"optionsKey"in n&&this.modulesByOptionKey.set(n.optionsKey,n)}}hasEnterpriseModules(){return this.modules.some((e=>"enterprise"===e.packageType))}*byType(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=new Set,o=this.modules.filter((e=>t.includes(e.type))),s=e=>{var t;const i=this.dependencies.get(e);return null!==(t=null===i||void 0===i?void 0:i.flatMap(s).concat(i))&&void 0!==t?t:[]},r=[];for(const a of o){const e="optionsKey"in a?a.optionsKey:a.contextKey;if(!n.has(e)){for(const i of s(e)){if(n.has(i))continue;const e=this.modulesByOptionKey.get(i);e?t.includes(e.type)&&(yield e,n.add(i)):r.push(i)}yield a,n.add(e)}}if(r.length>0)throw new Error("Could not resolve module dependencies: ".concat(r))}registerDependencies(e){if(null==e.dependencies||0===e.dependencies.length)return;const t="optionsKey"in e?e.optionsKey:e.contextKey;this.dependencies.set(t,e.dependencies)}},nE=new iE,oE=class{constructor(){this.queue=[]}await(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return new Promise((t=>{const i=()=>{clearTimeout(n),t(!0)},n=setTimeout((()=>{const e=this.queue.indexOf(i);e<0||(this.queue.splice(e,1),t(!1))}),e);this.queue.push(i)}))}notify(){this.queue.splice(0).forEach((e=>e()))}};var sE=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise((t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch((e=>cM.errorOnce(e)))}))}async acquireImmediately(e){return!!this.available&&(await this.acquire(e),!0)}async waitForClearAcquireQueue(){return this.acquire((()=>Promise.resolve(void 0)))}async dispatchNext(){var e;this.available=!1;let[t,i]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[];for(;t;){var n;try{var o;await t(),null===(o=i)||void 0===o||o()}catch(r){var s;cM.error("mutex callback error",r),null===(s=i)||void 0===s||s()}[t,i]=null!==(n=this.acquireQueue.shift())&&void 0!==n?n:[]}this.available=!0}},rE=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if("function"!==typeof t)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){var i;null===(i=this.eventListeners.get(e))||void 0===i||i.delete(t),0===this.eventListeners.size&&this.eventListeners.delete(e)}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){var t;null===(t=this.eventListeners.get(e.type))||void 0===t||t.forEach((t=>t(e)))}},aE=class extends lD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;super(),this.top=e,this.right=t,this.bottom=i,this.left=n}};function lE(e,t){let i,n,o=0,s=!1;const r=()=>s,a=()=>{var t;s=!1,null===(t=n)||void 0===t||t(),n=void 0,i=void 0,o>0&&e(l)},l=()=>{const e=o;o=0,s=!0;const i=t({count:e});i?i.then(a,a):a()};return{schedule(t){0!==o||r()||e(l,t),o++},async await(){if(r())for(null==i&&(i=new Promise((e=>{n=e})));r();)await i}}}mw([hD(SD)],aE.prototype,"top",2),mw([hD(SD)],aE.prototype,"right",2),mw([hD(SD)],aE.prototype,"bottom",2),mw([hD(SD)],aE.prototype,"left",2);var dE=class{constructor(){this.events=new Map}on(e,t){var i;return this.events.has(e)||this.events.set(e,new Set),null===(i=this.events.get(e))||void 0===i||i.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),0===i.size&&this.events.delete(e))}emit(e,t){for(const n of null!==(i=this.events.get(e))&&void 0!==i?i:[]){var i;const e=n(t);e&&e.catch((e=>cM.error(e)))}}clear(e){e?this.events.delete(e):this.events.clear()}},cE=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(cE||{}),hE=class{constructor(){this.events=new dE,this.elements=new Map}addListener(e,t){return this.events.on(e,t)}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>{var i;return null===(i=this.elements.get(e))||void 0===i?void 0:i.delete(t)}}createContext(e,t){const i=new uE(e,t);for(const o of Object.values(cE)){var n;"number"===typeof o&&(null===(n=this.elements.get(o))||void 0===n||n.forEach((e=>{var t;null===(t=e(i))||void 0===t||t.catch((e=>cM.error(e)))})))}return i}emitLayoutComplete(e,t){var i,n;const o="layout:complete",{width:s,height:r}=e;this.events.emit(o,{type:o,axes:null!==(i=t.axes)&&void 0!==i?i:[],chart:{width:s,height:r},clipSeries:null!==(n=t.clipSeries)&&void 0!==n&&n,series:t.series})}},uE=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new Ww(0,0,e,t)}},pE=class{constructor(){this.title=new ZA,this.subtitle=new ZA,this.footnote=new ZA}positionCaptions(e){const{title:t,subtitle:i,footnote:n}=this,o=e.layoutBox.height/10;if(t.enabled){const{spacing:n=(i.enabled?ZA.SMALL_PADDING:ZA.LARGE_PADDING)}=t;this.positionCaption("top",t,e.layoutBox,o),this.shrinkLayoutByCaption("top",t,e.layoutBox,n)}i.enabled&&(this.positionCaption("top",i,e.layoutBox,o),this.shrinkLayoutByCaption("top",i,e.layoutBox,i.spacing)),n.enabled&&(this.positionCaption("bottom",n,e.layoutBox,o),this.shrinkLayoutByCaption("bottom",n,e.layoutBox,n.spacing))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:n}=this,{rect:o}=e.series;for(const s of[t,i,n])if("overlay"===s.layoutStyle)if("left"===s.textAlign)s.node.x=o.x+s.padding;else if("right"===s.textAlign){const e=s.node.getBBox();s.node.x=o.x+o.width-e.width-s.padding}}computeX(e,t){return"left"===e?t.x:"right"===e?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,n){const o=Math.max(dA.getLineHeight(t.fontSize),n);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+("top"===e?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,o)}shrinkLayoutByCaption(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("block"===t.layoutStyle){const o=t.node.getBBox();i.shrink("top"===e?Math.ceil(o.y-i.y+o.height+n):Math.ceil(i.y+i.height-o.y+n),e)}}};mw([hD(mD)],pE.prototype,"title",2),mw([hD(mD)],pE.prototype,"subtitle",2),mw([hD(mD)],pE.prototype,"footnote",2);var gE=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],mE=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){var e;let t=null===(e=this.chartService.publicApi)||void 0===e||null===(e=e.getOptions())||void 0===e?void 0:e.chartType;return null==t&&(t="candlestick"),t}guardMemento(e){return null==e||bS(e)&&wM(gE,e)}restoreMemento(e,t,i){var n;if(null==i)return;const o={chartType:i};null===(n=this.chartService.publicApi)||void 0===n||n.updateDelta(o).catch((e=>cM.error("error restoring state",e)))}},vE=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const n=i.findIndex((t=>t.symbol===e));if(n>=0){i.splice(n,1),0===i.length&&this.registeredListeners.delete(t);break}}}dispatch(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of this.getListenersByType(e))try{s.handler(...i)}catch(o){cM.errorOnce(o)}}dispatchWrapHandlers(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];for(const r of this.getListenersByType(e))try{t(r.handler,...n)}catch(s){cM.errorOnce(s)}}getListenersByType(e){var t;return null!==(t=this.registeredListeners.get(e))&&void 0!==t?t:[]}destroy(){this.registeredListeners.clear()}},fE=class{constructor(){this.listeners=new vE,this.destroyFns=[]}addListener(e,t){return this.listeners.addListener(e,t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach((e=>e()))}},yE=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.All=63]="All",e))(yE||{}),bE=class extends fE{addListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return super.addListener(e,(e=>{this.getState()&i&&t(e)}))}},CE=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach((e=>e())),this.destroyFns.length=0}setFns(e){this.destroy(),this.destroyFns=e}push(){this.destroyFns.push(...arguments)}},xE="11.0.3",wE=Symbol("previous-memento-not-found"),SE=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=RI.create(!0,"history"),this.destroyFns=new CE,this.destroyFns.setFns([e.addListener("undo",this.undo.bind(this),63),e.addListener("redo",this.redo.bind(this),63)])}destroy(){this.destroyFns.destroy()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const t=new Map;for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(const s of n){if(!this.originators.has(s.mementoOriginatorKey))throw new Error("Originator [".concat(s.mementoOriginatorKey,"] has not been added to the HistoryManager."));t.set(s.mementoOriginatorKey,s.createMemento())}this.history.push({label:e,mementos:t}),this.historyIndex=this.history.length-1,this.debugEvent("History record: [".concat(e,"]"))}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const e=this.findPreviousMemento(t);if(e===wE)throw new Error("Could not find previous memento for [".concat(t,"]."));this.restoreMemento(t,e)}this.historyIndex-=1,this.debugEvent("History undo: [".concat(e.label,"]"))}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent("History redo: [".concat(e.label,"]"))}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):wE}restoreMemento(e,t){var i;null===(i=this.originators.get(e))||void 0===i||i.restoreMemento(xE,xE,t)}debugEvent(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.debug(...t,this.history.map(((e,t)=>t===this.historyIndex?"** ".concat(e.label," **"):e.label)))}},ME=class e{constructor(e){this.version=e.split("-")[0]}save(){const e={version:this.version};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(const o of Object.values(i))e[o.mementoOriginatorKey]=this.encode(o,o.createMemento());return e}restore(e){if("object"===typeof e)if(null!=e)if("version"in e&&"string"===typeof e.version){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const t of i){const i=this.decode(t,e[t.mementoOriginatorKey]);if(!t.guardMemento(i))return void cM.warnOnce("Could not restore [".concat(t.mementoOriginatorKey,"] data, value was invalid, ignoring."),i);t.restoreMemento(this.version,e.version,i)}}else cM.warnOnce("Could not restore data, missing [version] string in object, ignoring.");else cM.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");else cM.warnOnce("Could not restore data of type [".concat(typeof e,"], expecting an object, ignoring."))}encode(t,i){try{return JSON.parse(JSON.stringify(i,e.encodeTypes))}catch(n){throw new Error("Failed to encode [".concat(t.mementoOriginatorKey,"] value [").concat(n,"]."),{cause:n})}}decode(t,i){if(null==i)return i;try{return JSON.parse(JSON.stringify(i),e.decodeTypes)}catch(n){throw new Error("Failed to decode [".concat(t.mementoOriginatorKey,"] value [").concat(n,"]."),{cause:n})}}static encodeTypes(e,t){return uS(this[e])?{__type:"date",value:this[e].toISOString()}:t}static decodeTypes(e,t){return vS(this[e])&&"__type"in this[e]&&"date"===this[e].__type?new Date(this[e].value):t}},DE=class{constructor(){this.caretaker=new ME(xE),this.state=new Map}setState(e,t){IS(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const n=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:n},e)}};function kE(e){return"true"===e}function IE(e){return e}var AE={role:IE,"aria-checked":kE,"aria-controls":IE,"aria-describedby":IE,"aria-disabled":kE,"aria-expanded":kE,"aria-haspopup":kE,"aria-hidden":kE,"aria-label":IE,"aria-labelledby":IE,"aria-live":IE,"aria-orientation":IE,"aria-selected":kE,"data-preventdefault":kE,class:IE,id:IE,tabindex:function(e){return Number(e)},title:IE,placeholder:IE};function TE(e,t,i){null==i||""===i||""===i?null===e||void 0===e||e.removeAttribute(t):null===e||void 0===e||e.setAttribute(t,i.toString())}function EE(e,t){if(null!=t)for(const[i,n]of Object.entries(t))"class"!==i&&TE(e,i,n)}function RE(e,t,i){var n,o;if(!(e instanceof HTMLElement))return;const s=e.getAttribute(t);return null===s?i:null!==(n=null===(o=AE[t])||void 0===o?void 0:o.call(AE,s))&&void 0!==n?n:void 0}function LE(e,t,i){null!=e&&(null==i?e.style.removeProperty(t):e.style.setProperty(t,i.toString()))}var PE=class e{constructor(e,t,i){this.element=e,this.topTabGuard=t,this.bottomTabGuard=i,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,(e=>this.onTab(e,!1))),this.initTabGuard(this.bottomTabGuard,(e=>this.onTab(e,!0))),this.element.addEventListener("focus",(()=>this.onFocus()),{capture:!0}),this.element.addEventListener("blur",(e=>this.onBlur(e)),{capture:!0})}set tabIndex(e){this.guardTabIndex=e,0===this.guardTabIndex?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(const e of this.destroyFns)e();this.destroyFns.length=0}initTabGuard(e,t){const i=()=>t(e);e.addEventListener("focus",i),this.destroyFns.push((()=>e.removeEventListener("focus",i)))}setGuardIndices(e){const t=e;TE(this.topTabGuard,"tabindex",t),TE(this.bottomTabGuard,"tabindex",t)}onFocus(){this.hasFocus=!0,0!==this.guardTabIndex&&this.setGuardIndices(0)}onBlur(e){let{relatedTarget:t}=e;const{topTabGuard:i,bottomTabGuard:n}=this;this.hasFocus=!1,0!==this.guardTabIndex&&t!==i&&t!==n&&this.setGuardIndices(this.guardTabIndex)}onTab(e,t){if(0!==this.guardTabIndex){var i;let n;0===e.tabIndex?(n=this.findExitTarget(!t),this.setGuardIndices(this.guardTabIndex)):n=this.findEnterTarget(t),null===(i=n)||void 0===i||i.focus()}}static queryFocusable(e,t){const i=fI();return Array.from(e.querySelectorAll(t)).filter((e=>{if(e instanceof HTMLElement){const t=i.getComputedStyle(e);return"none"!==t.display&&"none"!==t.visibility}return!1}))}findEnterTarget(t){const i=e.queryFocusable(this.element,'[tabindex="0"]');return i[t?i.length-1:0]}findExitTarget(t){const i=e.queryFocusable(vI(),"[tabindex]").filter((e=>e.tabIndex>0)).sort(((e,t)=>e.tabIndex-t.tabIndex)),{before:n,after:o}=e.findBeforeAndAfter(i,this.guardTabIndex);return t?n:o}static findBeforeAndAfter(e,t){let i,n,o=0,s=e.length-1;for(;o<=s;){const r=Math.floor((o+s)/2),a=e[r].tabIndex;if(a===t){i=e[r-1]||void 0,n=e[r+1]||void 0;break}a<t?(i=e[r],o=r+1):(n=e[r],s=r-1)}return{before:i,after:n}}};function NE(e,t,i,n){t.addEventListener(i,n);const o=()=>t.removeEventListener(i,n);return e.push(o),o}function FE(e,t,i){NE(e,t,"keydown",(e=>{"Escape"===e.key&&i(e)}))}function OE(e,t,i){const n=NE(e,window,"mousedown",(e=>{[0,2].includes(e.button)&&!function(e,t){if(t.target instanceof Element){const{x:i,y:n,width:o,height:s}=e.getBoundingClientRect(),{clientX:r,clientY:a}=t;return r>=i&&a>=n&&r<=i+o&&a<=n+s}return!1}(t,e)&&(i(),n())}));return n}function BE(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function GE(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return BE(e)&&(e.key===t||n.some((t=>e.key===t)))}function zE(e,t,i,n){i&&NE(e,t,"keydown",(e=>{GE(e,n)&&i.focus()}))}function _E(e,t,i,n,o,s){zE(e,t,o,s),zE(e,t,i,n),NE(e,t,"keydown",(e=>{GE(e,n,s)&&e.preventDefault()}))}var VE={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function HE(e){return e.toolbar.role="toolbar",e.toolbar.ariaOrientation=e.orientation,e.toolbar.ariaHidden=(0===e.buttons.length).toString(),WE(e)}function WE(e){const{orientation:t,buttons:i,wrapAround:n=!1,onEscape:o,onFocus:s,onBlur:r}=e,{nextKey:a,prevKey:l}=VE[t],d=e=>{e.target&&"tabIndex"in e.target&&(i.forEach((e=>e.tabIndex=-1)),e.target.tabIndex=0)},[c,h]=n?[i.length,i.length]:[0,1/0],u=[];for(let p=0;p<i.length;p++){const e=i[(c+p-1)%h],t=i[p],n=i[(c+p+1)%h];NE(u,t,"focus",d),s&&NE(u,t,"focus",s),r&&NE(u,t,"blur",r),o&&FE(u,t,o),_E(u,t,n,a,e,l),t.tabIndex=0===p?0:-1}return u}var jE=class{constructor(e,t,i){this.lastFocus=t,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(OE(this.destroyFns,e,(()=>this.close(!0))))}close(e){this.destroyFns.forEach((e=>e())),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(e)}finishClosing(e){var t;(this.destroyFns.forEach((e=>e())),this.destroyFns.length=0,TE(this.lastFocus,"aria-expanded",!1),e)||(null===(t=this.lastFocus)||void 0===t||t.focus({preventScroll:!0}));this.lastFocus=void 0}};function UE(e){var t;const{sourceEvent:i,orientation:n,menu:o,buttons:s,closeCallback:r,autoCloseOnBlur:a=!1}=e,{nextKey:l,prevKey:d}=VE[n],c=ZE(i);TE(c,"aria-expanded",!0);const h=new jE(o,c,r),u=()=>h.close(),{destroyFns:p}=h;if(o.role="menu",o.ariaOrientation=n,p.push(...WE({orientation:n,buttons:s,onEscape:u,wrapAround:!0})),o.tabIndex=-1,FE(p,o,u),NE(p,o,"keydown",(e=>{var t;e.target!==o||e.key!==l&&e.key!==d||(e.preventDefault(),null===(t=s[0])||void 0===t||t.focus())})),a){const e=e=>{!s.includes(e.relatedTarget)&&u()};for(const t of s)NE(p,t,"blur",e)}return null===(t=s[0])||void 0===t||t.focus({preventScroll:!0}),h}function KE(e,t){return i=>{if("true"===e.ariaDisabled)return i.preventDefault();t(i)}}function YE(e){return"button"in e?0===e.button:BE(e)&&("Space"===e.code||"Enter"===e.key)}function ZE(e){if((null===e||void 0===e?void 0:e.target)instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function XE(e){const t=e=>{if(e.defaultPrevented)return;RE(e.target,"data-preventdefault",!0)&&GE(e,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&e.preventDefault()};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}var qE=class{constructor(){var e;(this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach((e=>{let[t,i]=e;return this.observe(t,i)})),this.queuedObserveRequests=[]},"undefined"!==typeof ResizeObserver)&&(this.resizeObserver=new ResizeObserver((e=>{for(const{target:t,contentRect:{width:i,height:n}}of e){const e=this.elements.get(t);this.checkSize(e,t,i,n)}})),this.documentReady="complete"===vI("readyState"),this.documentReady||null===(e=fI())||void 0===e||e.addEventListener("load",this.onLoad))}destroy(){var e,t;null===(e=fI())||void 0===e||e.removeEventListener("load",this.onLoad),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=null}checkSize(e,t,i,n){var o,s;e&&(i===(null===(o=e.size)||void 0===o?void 0:o.width)&&n===(null===(s=e.size)||void 0===s?void 0:s.height)||(e.size={width:i,height:n},e.cb(e.size,t)))}observe(e,t){if(!this.documentReady)return void this.queuedObserveRequests.push([e,t]);var i;this.elements.has(e)?this.removeFromQueue(e):null===(i=this.resizeObserver)||void 0===i||i.observe(e);const n={cb:t};this.elements.set(e,n)}unobserve(e){var t;null===(t=this.resizeObserver)||void 0===t||t.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter((t=>{let[i]=t;return i!==e}))}},QE=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area"],JE=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}]]);var $E={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>$E};function eR(e,t){const i=yI("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var tR=class extends fE{constructor(e,t){super(),this.styles=new Map,this.container=void 0,this.containerSize=void 0,this.sizeMonitor=new qE;const i=yI("div");i.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay"></div></div></div></div>',this.element=i.children.item(0),this.styleRootElement=t,this.rootElements=QE.reduce(((e,t)=>{const i="ag-charts-".concat(t),n=this.element.classList.contains(i)?this.element:this.element.querySelector(".".concat(i));if(!n)throw new Error("AG Charts - unable to find DOM element ".concat(i));return e[t]={element:n,children:new Map,listeners:[]},e}),{});let n=!1;this.observer=function(e,t){if("undefined"===typeof IntersectionObserver)return;const i=new IntersectionObserver((i=>{for(const n of i)n.target===e&&t(n.intersectionRatio)}),{root:e});return i.observe(e),i}(this.element,(e=>{0!==e||n||this.listeners.dispatch("hidden",{type:"hidden"}),n=0===e})),this.setSizeOptions(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{position:relative;user-select:none}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--ag-charts-align);justify-content:var(--ag-charts-justify)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{display:block;pointer-events:none}.ag-charts-series-area{outline:none;pointer-events:none;position:absolute}.ag-charts-swapchain{outline:none;opacity:0;pointer-events:auto;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-active-color: var(--ag-active-color, #2196f3);--ag-charts-background-color: var(--ag-background-color, #fff);--ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);--ag-charts-border-color: var(--ag-border-color, #dddddd);--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);--ag-charts-font-family: "Verdana", sans-serif;--ag-charts-font-size: var(--ag-font-size, 14px);--ag-charts-size: var(--ag-grid-size, 8px);--ag-charts-border: var(--ag-charts-border-color) var(--ag-borders, solid 1px);--ag-charts-border-critical: var(--ag-borders-critical, solid 1px);--ag-charts-floating-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1;--ag-charts-align: center;--ag-charts-justify: center;--ag-charts-axis-label-background-color: #474747;--ag-charts-axis-label-color: #ffffff;--ag-charts-tooltip-background-color: #fafafb;--ag-charts-tooltip-text-color: var(--ag-charts-foreground-color);--ag-charts-tooltip-border: 1px solid var(--ag-charts-border-color);--ag-charts-content-padding: 8px 12px;--ag-charts-content-gap: 8px;--ag-charts-content-compact-padding: 3px 6px;--ag-charts-tooltip-border-radius: 4px;--ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));--ag-charts-toolbar-background-color: var( --ag-header-background-color, color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%) );--ag-charts-toolbar-shadow: var(--ag-charts-floating-shadow);--ag-charts-toolbar-size: 34px;--ag-charts-toolbar-size-small: 24px;--ag-charts-toolbar-border: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12% );--ag-charts-toolbar-focus-color: var(--ag-charts-active-color);--ag-charts-toolbar-active-background-color: var(--ag-charts-toolbar-hover-color);--ag-charts-toolbar-active-color: var(--ag-charts-active-color);--ag-charts-toolbar-disabled-foreground-color: var( --ag-disabled-foreground-color, color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%) );--ag-charts-toolbar-disabled-background-color: color-mix( in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6% );--ag-charts-toolbar-gap: var(--ag-charts-size);--ag-charts-toolbar-font-size: 13px;--ag-charts-toolbar-font-size-small: 12px;--ag-charts-toolbar-button-padding: 6px;--ag-charts-toolbar-button-padding-small: 1px;--ag-charts-popover-background-color: var(--ag-charts-toolbar-background-color);--ag-charts-popover-foreground-color: var(--ag-charts-toolbar-foreground-color);--ag-charts-popover-border: var(--ag-charts-toolbar-border);--ag-charts-popover-border-radius: var(--ag-border-radius, 4px);--ag-charts-popover-active-color: var(--ag-charts-toolbar-active-color);--ag-charts-popover-hover-color: var(--ag-charts-toolbar-hover-color);--ag-charts-popover-active-background-color: var(--ag-charts-toolbar-active-background-color);--ag-charts-popover-font-size: 14px;--ag-charts-popover-font-size-small: var(--ag-charts-toolbar-font-size-small);--ag-charts-popover-shadow: var(--ag-charts-floating-shadow);--ag-charts-dialog-input-group-label-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-dialog-tab-color--inactive: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-button-radius: var(--ag-border-radius, 4px);--ag-charts-focus-border-color: var(--ag-input-focus-border-color, var(--ag-charts-active-color));--ag-charts-focus-border: solid 1px var(--ag-charts-focus-border-color);--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-focus-box-shadow: var(--box-shadow), 0 0 0 2px #fff8, var(--ag-charts-focus-border-shadow);--ag-charts-icon-font-family: "agChartsDefault";--ag-charts-icon-font-weight: normal;--ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);--ag-charts-icon-size: 20px;--ag-charts-input-background-color: var(--ag-charts-background-color);--ag-charts-input-background-color--hover: var(--ag-charts-hover-color);--ag-charts-input-background-color--active: var(--ag-charts-hover-color);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-color--active: var(--ag-charts-active-color);--ag-charts-input-border-radius: var(--ag-border-radius, 4px);--ag-charts-input-color--active: var(--ag-charts-active-color);--ag-charts-input-focus-outline: var(--ag-charts-focus-border);--ag-charts-input-focus-box-shadow: var(--ag-charts-focus-border-shadow);--ag-charts-input-font-family: var(--ag-charts-font-family);--ag-charts-input-font-size: var(--ag-charts-font-size);--ag-charts-input-padding: 8px;--ag-charts-input-padding-large: 10px;--ag-charts-input-placeholder-color: #888888;--ag-charts-input-spacing: 8px;--ag-charts-input-transition-duration: .25s;--ag-charts-input-transition-duration--fast: .1s;--ag-charts-input-transition-timing-function: ease-out;--ag-charts-input-checkbox-background-color: #babbbc;--ag-charts-input-checkbox-background-color--checked: var(--ag-charts-active-color)}.ag-charts-theme-default-dark{--ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));--ag-charts-foreground-color: var(--ag-foreground-color, #fff);--ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, .16));--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18%);--ag-charts-floating-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-axis-label-background-color: #9caebb;--ag-charts-axis-label-color: #000000;--ag-charts-tooltip-background-color: #28313e;--ag-charts-tooltip-border: 1px solid #474e59;--ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18% );--ag-charts-dialog-input-group-label-text-color: #ffffff;--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-input-placeholder-color: #aaaaaa}.ag-charts-icon{display:block;width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size);speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;color:inherit;font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);transition-duration:var(--ag-charts-input-transition-duration);transition-property:none;transition-timing-function:var(--ag-charts-input-transition-timing-function)}.ag-charts-input:focus-visible{outline:var(--ag-charts-input-focus-outline);box-shadow:var(--ag-charts-input-focus-box-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);cursor:pointer;padding:var(--ag-charts-input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-input-background-color--hover)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{appearance:none;background:var(--ag-charts-input-checkbox-background-color);border-radius:9px;cursor:pointer;height:18px;margin:0;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:7px;content:" ";height:14px;margin:2px;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-input-checkbox-background-color--checked)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--line-height);font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);padding:var(--ag-charts-input-padding-large) var(--ag-charts-input-padding)}.ag-charts-textarea[placeholder]:empty:before{color:var(--ag-charts-input-placeholder);content:attr(placeholder)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:var(--ag-charts-focus-border);outline-width:2px;box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;stroke:var(--ag-charts-focus-border-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{position:fixed;inset:unset;margin:0;padding:0;overflow:visible;width:max-content;max-width:100%;font:12px Verdana,sans-serif;color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:0 4px 8px #00000014}.ag-charts-tooltip--compact{--ag-charts-content-padding: var(--ag-charts-content-compact-padding)}.ag-charts-tooltip--arrow:before{--tooltip-arrow-size: 8px;content:"";position:absolute;top:100%;left:50%;margin:0 auto;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(45deg);display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;background:inherit;border-top:none;border-left:none;clip-path:polygon(0 100%,100% 0,100% 100%)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:var(--ag-charts-content-padding);gap:var(--ag-charts-content-gap)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;align-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:16px;align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-popover{position:absolute;border:var(--ag-charts-popover-border);border-radius:var(--ag-charts-popover-border-radius);background:var(--ag-charts-popover-background-color);color:var(--ag-charts-popover-foreground-color);font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-popover-font-size);box-shadow:var(--ag-charts-popover-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-popover-foreground-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-popover-font-size-small)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-popover-hover-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-popover-active-color);background:var(--ag-charts-popover-active-background-color);color:var(--ag-charts-popover-active-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);cursor:pointer;display:flex;font:var(--ag-charts-toolbar-font-size) var(--ag-charts-font-family);justify-content:center;min-height:var(--ag-charts-toolbar-size);min-width:var(--ag-charts-toolbar-size);padding:var(--ag-charts-toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-toolbar-hover-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-toolbar-active-background-color);border-color:var(--ag-charts-toolbar-active-color);color:var(--ag-charts-toolbar-active-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-toolbar-disabled-background-color);color:var(--ag-charts-toolbar-disabled-foreground-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-button-radius);border-bottom-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}\n'),e&&this.setContainer(e),this.destroyFns.push(XE(this.element));const o=this.element.querySelector(".ag-charts-canvas-center");if(null==o)throw new Error("Error initializing tab guards");const s=eR(o,"beforebegin"),r=eR(o,"afterend");this.tabGuards=new PE(o,s,r)}destroy(){var e;super.destroy(),null===(e=this.observer)||void 0===e||e.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach((e=>{e.children.forEach((e=>e.remove())),e.element.remove()})),this.element.remove()}setSizeOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const{style:o}=this.element;o.width="".concat(null!==i&&void 0!==i?i:e,"px"),o.height="".concat(null!==n&&void 0!==n?n:t,"px")}updateContainerSize(){var e,t,i,n;const{style:o}=this.rootElements["canvas-center"].element;o.width="".concat(null!==(e=null===(t=this.containerSize)||void 0===t?void 0:t.width)&&void 0!==e?e:0,"px"),o.height="".concat(null!==(i=null===(n=this.containerSize)||void 0===n?void 0:n.height)&&void 0!==i?i:0,"px")}setTabGuardIndex(e){this.tabGuards.tabIndex=e}setContainer(e){if(e===this.container)return;this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container));if(!(null!=this.getShadowDocumentRoot(e)))for(const t of this.rootElements.styles.children.keys())this.removeChild("styles",t);this.container=e;for(const[t,i]of this.styles)this.addStyles(t,i);e.appendChild(this.element),this.sizeMonitor.observe(e,(e=>{this.containerSize=e,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})})),this.listeners.dispatch("container-changed",{type:"container-changed"})}setThemeClass(e){this.element.classList.forEach((t=>{t.startsWith("ag-charts-theme-")&&t!==e&&this.element.classList.remove(t)})),this.element.classList.add(e)}updateCanvasLabel(e){TE(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,t){return["focus","blur","keydown","keyup"].includes(t)?this.rootElements["series-area"].element:e}addEventListener(e,t,i){this.getEventElement(this.element,e).addEventListener(e,t,i)}removeEventListener(e,t,i){this.getEventElement(this.element,e).removeEventListener(e,t,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){var e,t;const i=fI(),n=new Ww(0,0,i.innerWidth,i.innerHeight),o=this.getRawOverlayClientRect();return null!==(e=null===(t=n.intersection(o))||void 0===t?void 0:t.toDOMRect())&&void 0!==e?e:$E}getRawOverlayClientRect(){let e=this.element;for(;null!=e;){var t,i,n;const o=null===(t=(i=e).computedStyleMap)||void 0===t?void 0:t.call(i),s=null===o||void 0===o||null===(n=o.get("overflow-y"))||void 0===n?void 0:n.toString();if("auto"===s||"scroll"===s)return Ww.fromDOMRect(e.getBoundingClientRect());e=e.parentElement}const o=this.getShadowDocumentRoot();if(null!=o)return Ww.fromDOMRect(o.getBoundingClientRect());const{innerWidth:s,innerHeight:r}=fI();return new Ww(0,0,s,r)}getShadowDocumentRoot(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;const n=null!==(e=null===(t=i)||void 0===t||null===(t=t.ownerDocument)||void 0===t?void 0:t.body)&&void 0!==e?e:vI("body");for(;null!=i;){if(i===n)return;if(i.parentNode instanceof DocumentFragment)return i;i=i.parentNode}return this.container}getParent(e){return this.rootElements[e].element}getChildBoundingClientRect(e){const{children:t}=this.rootElements[e],i=[];for(const n of t.values())i.push(Ww.fromDOMRect(n.getBoundingClientRect()));return Ww.merge(i)}calculateCanvasPosition(e){var t;let i=0,n=0;const{x:o=0,y:s=0}=null!==(t=this.getChildBoundingClientRect("canvas"))&&void 0!==t?t:{},r=e.getBoundingClientRect();return i=r.x-o,n=r.y-s,{x:i,y:n}}isManagedChildDOMElement(e,t,i){const{children:n}=this.rootElements[t],o=null===n||void 0===n?void 0:n.get(i);return null!=o&&e.contains(o)}contains(e,t){return null==t?this.element.contains(e):this.rootElements[t].element.contains(e)}addStyles(e,t){const i="data-ag-charts";if(this.styles.set(e,t),null==this.container)return;const n=t=>t.getAttribute(i)===e,o=e=>{const t=new Set(["TITLE","META"]);let o,s=!0;for(const a of e.children)if(s&&t.has(a.tagName))o=a;else{if(s=!1,n(a))return;a.hasAttribute(i)&&(o=a)}const r=yI("style");return null!=o?e.insertBefore(r,o.nextSibling):e.prepend(r),r};let s;if(this.styleRootElement)s=o(this.styleRootElement);else{s=null!=this.getShadowDocumentRoot(this.container)?this.addChild("styles",e):o(vI("head"))}null==s||n(s)||(s.setAttribute(i,e),s.innerHTML=t)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e){this.element.style.cursor=e}getCursor(){return this.element.style.cursor}addChild(e,t,i,n){var o;const{element:s,children:r,listeners:a}=this.rootElements[e];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(t))return r.get(t);const{childElementType:l="div"}=null!==(o=JE.get(e))&&void 0!==o?o:{};if(i&&i.tagName.toLowerCase()!==l.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const d=null!==i&&void 0!==i?i:yI(l);for(const[c,h,u]of a)d.addEventListener(c,h,u);if(r.set(t,d),n){const e=s.querySelector(n.query);if(null==e)throw new Error("AG Charts - addChild query failed ".concat(n.query));e.insertAdjacentElement(n.where,d)}else null===s||void 0===s||s.appendChild(d);return d}removeChild(e,t){var i;const{children:n}=this.rootElements[e];n&&(null===(i=n.get(t))||void 0===i||i.remove(),n.delete(t))}incrementDataCounter(e){var t;const{dataset:i}=this.element;null!==(t=i[e])&&void 0!==t||(i[e]="0"),i[e]=String(Number(i[e])+1)}setDataBoolean(e,t){this.element.dataset[e]=String(t)}},iR=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel"];function nR(e,t){const{offsetX:i,offsetY:n,clientX:o,clientY:s}=t;return{type:e,offsetX:i,offsetY:n,clientX:o,clientY:s,sourceEvent:t}}var oR={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:e=>nR("contextmenu",e),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:e=>nR("click",e),dblclick:e=>nR("dblclick",e),mouseenter:e=>nR("mouseenter",e),mousemove:e=>nR("mousemove",e),mouseleave:e=>nR("mouseleave",e),wheel:e=>{const{offsetX:t,offsetY:i,clientX:n,clientY:o,deltaX:s,deltaY:r}=e;return{type:"wheel",offsetX:t,offsetY:i,clientX:n,clientY:o,deltaX:s,deltaY:r,sourceEvent:e}}},sR=class{static alloc(e,t){return oR[e](t)}static isHTMLEvent(e){return iR.includes(e)}},rR=class{constructor(){this.maps={}}lazyGetMap(e){let t=this.maps[e];return void 0===t&&(t=new Map,this.maps[e]=t),t}add(e,t,i){const n=this.lazyGetMap(e);if(n.has(i))throw new Error("AG Charts - duplicate add(handler)");const o=n=>{const o=sR.alloc(e,n);i(o,t)};t.getElement().addEventListener(e,o),n.set(i,o)}remove(e,t,i){const n=this.lazyGetMap(e),o=n.get(i);o&&t.getElement().removeEventListener(e,o),n.delete(i)}destroy(e){for(const t of Object.keys(this.maps))this.typedDestroy(t,e)}typedDestroy(e,t){const i=this.maps[e];if(null!=i)for(const[n,o]of i.entries())t.getElement().removeEventListener(e,o)}};function aR(e,t,i){const n=i.pageX-t.pageX,o=i.pageY-t.pageY;return{type:e,offsetX:t.offsetX+n,offsetY:t.offsetY+o,clientX:i.clientX,clientY:i.clientY,originDeltaX:n,originDeltaY:o,sourceEvent:i}}var lR=class e{destroy(){var t;null===(t=this.dragTriggerRemovers)||void 0===t||t.forEach((e=>e())),this.dragTriggerRemovers=void 0,this.dragStartListeners=void 0,this.dragMoveListeners=void 0,this.dragEndListeners=void 0,e.globalDragCallbacks===this.localDragCallbacks&&(e.globalDragCallbacks=void 0)}add(e,t,i){switch(e){case"drag-start":var n;null!==(n=this.dragStartListeners)&&void 0!==n||(this.dragStartListeners=[]),this.dragStartListeners.push(i),this.registerDragTrigger(t,i);break;case"drag-move":var o;null!==(o=this.dragMoveListeners)&&void 0!==o||(this.dragMoveListeners=[]),this.dragMoveListeners.push(i);break;case"drag-end":var s;null!==(s=this.dragEndListeners)&&void 0!==s||(this.dragEndListeners=[]),this.dragEndListeners.push(i)}}remove(e,t,i){switch(e){case"drag-start":return this.removeHandler(this.dragStartListeners,i);case"drag-move":return this.removeHandler(this.dragMoveListeners,i);case"drag-end":return this.removeHandler(this.dragEndListeners,i)}}removeHandler(e,t){const i=null===e||void 0===e?void 0:e.indexOf(t);void 0!==i&&(null===e||void 0===e||e.splice(i,1))}registerDragTrigger(e,t){var i;const n=t=>0===t.button&&this.startDrag(e,t);e.getElement().addEventListener("mousedown",n),null!==(i=this.dragTriggerRemovers)&&void 0!==i||(this.dragTriggerRemovers=new Map),this.dragTriggerRemovers.set(t,(()=>e.getElement().removeEventListener("mousedown",n)))}startDrag(t,i){const n={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};BS(["pageX","pageY","offsetX","offsetY"],n,i);const o={down:e=>{this.localDragCallbacks=o;const i=aR("drag-start",n,e);this.dispatch("drag-start",t,i)},move:e=>{const i=aR("drag-move",n,e);this.dispatch("drag-move",t,i)},up:e=>{const i=aR("drag-end",n,e);this.dispatch("drag-end",t,i),this.endDrag(t,i)}};!function(e,t,i){if(null!=e.globalDragCallbacks)return;const n=fI(),o=e=>{e.stopPropagation(),e.stopImmediatePropagation()},s=t=>{var i;t.stopPropagation(),t.stopImmediatePropagation(),null===(i=e.globalDragCallbacks)||void 0===i||i.move(t)},r=t=>{var i;0===t.button&&(t.stopPropagation(),t.stopImmediatePropagation(),n.removeEventListener("mousedown",o,{capture:!0}),n.removeEventListener("mouseenter",o,{capture:!0}),n.removeEventListener("mouseleave",o,{capture:!0}),n.removeEventListener("mouseout",o,{capture:!0}),n.removeEventListener("mouseover",o,{capture:!0}),n.removeEventListener("mousemove",s,{capture:!0}),n.removeEventListener("mouseup",r,{capture:!0}),null===(i=e.globalDragCallbacks)||void 0===i||i.up(t),e.globalDragCallbacks=void 0)};n.addEventListener("mousedown",o,{capture:!0}),n.addEventListener("mouseenter",o,{capture:!0}),n.addEventListener("mouseleave",o,{capture:!0}),n.addEventListener("mouseout",o,{capture:!0}),n.addEventListener("mouseover",o,{capture:!0}),n.addEventListener("mousemove",s,{capture:!0}),n.addEventListener("mouseup",r,{capture:!0}),e.globalDragCallbacks=t,e.globalDragCallbacks.down(i)}(e,o,i)}endDrag(e,t){let{sourceEvent:i,clientX:n,clientY:o}=t;const s=e.getElement(),r=s.getBoundingClientRect();var a;kw.containsPoint(r,n,o)||(s.dispatchEvent(new MouseEvent("mouseleave",i)),null===(a=i.target)||void 0===a||a.dispatchEvent(new MouseEvent("mouseenter",i)))}dispatch(e,t,i){var n,o,s;switch(e){case"drag-start":return null===(n=this.dragStartListeners)||void 0===n?void 0:n.forEach((e=>e(i,t)));case"drag-move":return null===(o=this.dragMoveListeners)||void 0===o?void 0:o.forEach((e=>e(i,t)));case"drag-end":return null===(s=this.dragEndListeners)||void 0===s?void 0:s.forEach((e=>e(i,t)))}}},dR=class{constructor(e){this.elem=e}setBounds(e){var t;SI(null!==(t=this.elemContainer)&&void 0!==t?t:this.elem,e)}getBounds(){var e;return MI(null!==(e=this.elemContainer)&&void 0!==e?e:this.elem)}static setElementContainer(e,t){SI(t,e.getBounds()),function(e,t){for(const[i,n]of Object.entries(t))LE(e,i,n)}(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},cR=class extends dR{constructor(e){super(e),this.elem=e,this.index=NaN,this.children=[]}getElement(){return this.elem}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){var e,t,i,n;null===(e=this.parent)||void 0===e||e.removeChild(this),this.children.forEach((e=>{e.parent=void 0,e.destroy()})),this.children.length=0,this.destructor(),this.elem.remove(),null===(t=this.elemContainer)||void 0===t||t.remove(),null===(i=this.internalListener)||void 0===i||i.destroy(),null===(n=this.htmlListener)||void 0===n||n.destroy(this)}setHidden(e){LE(this.elem,"display",e?"none":void 0)}isHidden(){var e,t;return"none"===(null===(e=fI())||void 0===e||null===(t=e.getComputedStyle)||void 0===t?void 0:t.call(e,this.elem).display)}setCursor(e){LE(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=null!==e&&void 0!==e?e:null}setAriaDescribedBy(e){TE(this.elem,"aria-describedby",e)}setAriaHidden(e){TE(this.elem,"aria-hidden",e)}setAriaLabel(e){TE(this.elem,"aria-label",e)}setInnerHTML(e){this.elem.innerHTML=e}isDisabled(){return RE(this.elem,"aria-disabled",!1)}parseFloat(e){return""===e?0:parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}focus(){this.elem.focus()}setPreventsDefault(e){TE(this.elem,"data-preventdefault",e)}setTabIndex(e){TE(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){const t=this.children.findIndex((t=>t===e));this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}addClass(){this.elem.classList.add(...arguments)}removeClass(){this.elem.classList.remove(...arguments)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){this.elem.removeChild(e.getElement())}onChildAdded(e){}onChildRemoved(e){}getBefore(e){let{domIndex:t}=e;if(void 0!==t)return this.children.filter((e=>void 0!==e.domIndex&&e.domIndex>t)).reduce(((e,t)=>!e||t.domIndex<e.domIndex?t:e),void 0)}addListener(e,t){var i,n;sR.isHTMLEvent(e)?(null!==(i=this.htmlListener)&&void 0!==i||(this.htmlListener=new rR),this.htmlListener.add(e,this,t)):(null!==(n=this.internalListener)&&void 0!==n||(this.internalListener=new lR),this.internalListener.add(e,this,t))}removeListener(e,t){var i;if(sR.isHTMLEvent(e))null===(i=this.htmlListener)||void 0===i||i.remove(e,this,t);else if(null!=this.htmlListener){var n;null===(n=this.internalListener)||void 0===n||n.remove(e,this,t)}}},hR=class extends cR{constructor(){super(vI().createElement("div")),this.textElement=bI("http://www.w3.org/2000/svg","text"),this.textElement.role="presentation",this.svgElement=bI("http://www.w3.org/2000/svg","svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){var t;this.textElement.textContent=e;const i=this.textElement,n=null===(t=i.getBBox)||void 0===t?void 0:t.call(i);n&&this.svgElement.setAttribute("viewBox","".concat(n.x," ").concat(n.y," ").concat(n.width," ").concat(n.height))}get textContent(){return this.textElement.textContent}destructor(){}},uR=class extends cR{constructor(){super(vI().createElement("button")),this.setEnabled(!0)}destructor(){}setEnabled(e){TE(this.elem,"aria-disabled",!e),LE(this.elem,"pointer-events",e?void 0:"none")}addListener(e,t){return super.addListener(e,((i,n)=>{("click"!==e&&"dblclick"!==e||!this.isDisabled())&&t(i,n)}))}},pR=class extends cR{constructor(){super(vI().createElement("div")),TE(this.elem,"role","group")}destructor(){}},gR=class extends cR{constructor(e,t){super(vI().createElement("div")),this.focusedChildIndex=0,this.onChildFocus=(e,t)=>{const i=this.children[this.focusedChildIndex];this.focusedChildIndex=t.index,null===i||void 0===i||i.setTabIndex(-1),t.setTabIndex(0)},this.onChildKeyDown=(e,t)=>{var i;const n=this.orientation,[o,s]="both"===n?[VE.horizontal,VE.vertical]:[VE[n],void 0];let r=-1;if(BE(e.sourceEvent)){const i=e.sourceEvent.key;i===o.nextKey||i===(null===s||void 0===s?void 0:s.nextKey)?r=t.index+1:i!==o.prevKey&&i!==(null===s||void 0===s?void 0:s.prevKey)||(r=t.index-1)}null===(i=this.children[r])||void 0===i||i.focus()},this.orientation=e,TE(this.elem,"role",t)}get orientation(){var e;return null!==(e=RE(this.elem,"aria-orientation"))&&void 0!==e?e:"both"}set orientation(e){TE(this.elem,"aria-orientation","both"!==e?e:void 0)}focus(){var e;null===(e=this.children[this.focusedChildIndex])||void 0===e||e.focus()}onChildAdded(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown),e.setTabIndex(1===this.children.length?0:-1)}onChildRemoved(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}},mR=class extends gR{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach((e=>e.getElement().parentElement.remove()))}addChildToDOM(e,t){const i=vI().createElement("div");TE(i,"role","listitem"),LE(i,"position","absolute"),cR.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(0===this.children.length)}setHidden(e){0===this.children.length&&(e=!0),super.setHidden(e)}},vR=class extends cR{constructor(e){super(e)}destructor(){}},fR=class e extends cR{constructor(){super(vI().createElement("input")),this._step=e.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(e){this._step=e,this.getElement().step=e.attributeValue}get keyboardStep(){var e,t;return null!==(e=null===(t=this._keyboardStep)||void 0===t?void 0:t.step)&&void 0!==e?e:this._step}set keyboardStep(e){var t;if(e!==(null===(t=this._keyboardStep)||void 0===t?void 0:t.step)&&(void 0!==this._keyboardStep&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),void 0!==e)){const t=()=>this.getElement().step=e.attributeValue,i=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:e,onKeyDown:t,onKeyUp:i,onBlur:i},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){var e;return null!==(e=RE(this.elem,"aria-orientation"))&&void 0!==e?e:"both"}set orientation(t){TE(this.elem,"aria-orientation","both"!==t?t:void 0),e.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(e,t){const i=this.getValueRatio(),n=Rw(e,i,t);return n!==i&&this.setValueRatio(n),n}setValueRatio(e,t){const{divider:i}=this.step,n=Math.round(1e4*e)/i,{ariaValueText:o=SA(n/i)}=null!==t&&void 0!==t?t:{},s=this.getElement();s.value="".concat(n),s.ariaValueText=o}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(t,i){"both"===i?t.removeListener("keydown",e.onKeyDown):t.addListener("keydown",e.onKeyDown)}static onKeyDown(e,t){let i=[];const{orientation:n}=t;"horizontal"===n?i=["ArrowUp","ArrowDown"]:"vertical"===n&&(i=["ArrowLeft","ArrowRight"]),i.includes(e.sourceEvent.code)&&e.sourceEvent.preventDefault()}};fR.STEP_ONE={attributeValue:"1",divider:1},fR.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var yR=fR,bR=class extends uR{constructor(){super(),TE(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){TE(this.elem,"aria-checked",e)}},CR=class extends gR{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal","toolbar")}destructor(){}};function xR(e,t){var i;return(null===(i=t.params)||void 0===i?void 0:i.type)===e}function wR(e){const t={params:e,result:void 0};return t.result=function(e){if("button"===e)return new uR;if("slider"===e)return new yR;if("toolbar"===e)return new CR;if("group"===e)return new pR;if("list"===e)return new mR;if("region"===e)return new vR(yI("div"));if("text"===e)return new hR;if("listswitch"===e)return new bR;throw Error("AG Charts - error allocating meta")}(t.params.type),t}var SR=class{constructor(e,t){this.localeManager=e,this.domManager=t,this.destroyFns=[]}destroy(){this.destroyFns.forEach((e=>e()))}addLocalisation(e){e(),this.destroyFns.push(this.localeManager.addListener("locale-changed",e))}createProxyContainer(e){const t=wR(e),{params:i,result:n}=t,o=n.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,o),o.classList.add(...i.classList,"ag-charts-proxy-container"),o.role=i.type,"ariaOrientation"in i&&(o.ariaOrientation=i.ariaOrientation),xR("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation((()=>{o.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)})),n}createProxyElement(e){const t=wR(e);if(xR("button",t)){const{params:e,result:i}=t,n=i.getElement();if(this.initInteract(e,i),"string"===typeof e.textContent)n.textContent=e.textContent;else{const{textContent:t}=e;this.addLocalisation((()=>{n.textContent=this.localeManager.t(t.id,t.params)}))}this.setParent(t.params,t.result)}if(xR("slider",t)){const{params:e,result:i}=t,n=i.getElement();this.initInteract(e,i),n.type="range",n.role="presentation",n.style.margin="0px",this.addLocalisation((()=>{n.ariaLabel=this.localeManager.t(e.ariaLabel.id,e.ariaLabel.params)})),this.setParent(t.params,t.result)}if(xR("text",t)){const{params:e,result:i}=t;this.initElement(e,i),this.setParent(t.params,t.result)}if(xR("listswitch",t)){const{params:e,result:i}=t;this.initInteract(e,i),i.setTextContent(e.textContent),i.setChecked(e.ariaChecked),i.setAriaDescribedBy(e.ariaDescribedBy),this.setParent(t.params,t.result)}if(xR("region",t)){const{params:e,result:i}=t,n=i.getElement();this.initInteract(e,i),n.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){const i=t.getElement();return TE(i,"id",e.id),LE(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){const{tabIndex:i,domIndex:n}=e,o=this.initElement(e,t);void 0!==i&&(o.tabIndex=i),void 0!==n&&(t.domIndex=n)}setParent(e,t){if("parent"in e){var i;null===(i=e.parent)||void 0===i||i.addChild(t)}else{const i={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),i)}}},MR=/\$\{(\w+)}(?:\[(\w+)])?/gi,DR={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},kR=class extends vE{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.dispatch("locale-changed"))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.dispatch("locale-changed"))}t(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{localeText:o=vw,getLocaleText:s}=this,r=o[e];return null!==(t=null!==(i=null===s||void 0===s?void 0:s({key:e,defaultValue:r,variables:n}))&&void 0!==i?i:(e=>{let{defaultValue:t,variables:i}=e;return null===t||void 0===t?void 0:t.replaceAll(MR,((e,t,n)=>{const o=i[t],s=null!=n?DR[n]:null;return null!=n&&null==s&&cM.warnOnce("Format style [".concat(n,"] is not supported")),null!=s?s.format(o):"number"===typeof o?DR.number.format(o):o instanceof Date?DR.datetime.format(o):String(o)}))})({key:e,defaultValue:r,variables:n}))&&void 0!==t?t:e}};function IR(e){let{context:t,pixelRatio:i,width:n,height:o}=e;t.save(),t.setTransform(i,0,0,i,0,0),t.clearRect(0,0,n,o),t.restore()}function AR(e){if(RI.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let n=0;Object.assign(e,{save(){t(),n++},restore(){if(0===n)throw new Error("AG Charts - Unable to restore() past depth 0");i(),n--},verifyDepthZero(){if(0!==n)throw new Error("AG Charts - Save/restore depth is non-zero: ".concat(n))}})}}var TR=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:t,height:i,pixelRatio:n,canvasElement:o,willReadFrequently:s=!1}=e;this.pixelRatio=null!==n&&void 0!==n?n:fI("devicePixelRatio"),this.element=null!==o&&void 0!==o?o:yI("canvas"),this.element.style.display="block",this.element.style.width=(null!==t&&void 0!==t?t:this.width)+"px",this.element.style.height=(null!==i&&void 0!==i?i:this.height)+"px",this.element.width=Math.round((null!==t&&void 0!==t?t:this.width)*this.pixelRatio),this.element.height=Math.round((null!==i&&void 0!==i?i:this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:s}),this.onEnabledChange(),this.resize(null!==t&&void 0!==t?t:0,null!==i&&void 0!==i?i:0),AR(this.context)}drawImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t){if(!(e>0&&t>0))return;const{element:i,context:n,pixelRatio:o}=this;i.width=Math.round(e*o),i.height=Math.round(t*o),n.setTransform(o,0,0,o,0,0),i.style.width=e+"px",i.style.height=t+"px",this.width=e,this.height=t}clear(){IR(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};mw([BA((e=>e.onEnabledChange()))],TR.prototype,"enabled",2);var ER=class{constructor(e){this.width=600,this.height=300;const{width:t,height:i,pixelRatio:n,willReadFrequently:o=!1}=e;this.pixelRatio=null!==n&&void 0!==n?n:fI("devicePixelRatio"),this.canvas=new OffscreenCanvas(null!==t&&void 0!==t?t:this.width,null!==i&&void 0!==i?i:this.height),this.context=this.canvas.getContext("2d",{willReadFrequently:o}),this.resize(null!==t&&void 0!==t?t:0,null!==i&&void 0!==i?i:0),AR(this.context)}drawImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.drawImage(this.context.canvas,t,i)}resize(e,t){if(!(e>0&&t>0))return;const{canvas:i,context:n,pixelRatio:o}=this;i.width=Math.round(e*o),i.height=Math.round(t*o),n.setTransform(o,0,0,o,0,0),this.width=e,this.height=t}clear(){IR(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},RR=class{constructor(e){this.canvas=e,this.debug=RI.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t){this.canvas.resize(e,t),this.layersMap.forEach((i=>{let{canvas:n}=i;return n.resize(e,t)}))}addLayer(e){const{width:t,height:i,pixelRatio:n}=this.canvas,{name:o}=e,s=new ER({width:t,height:i,pixelRatio:n});return this.layersMap.set(s,{id:this.nextLayerId++,name:o,canvas:s}),this.debug("Scene.addLayer() - layers",this.layersMap),s}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}},LR=class e{constructor(){this.offscreenCanvas=new OffscreenCanvas(1,1),e.offscreenCanvasCount++;const t=this.offscreenCanvas.getContext("2d");if(null==t)throw new TypeError("AG Charts - invalid 2d context");this.renderCtx={ctx:t,devicePixelRatio:1,resized:!1,debugNodes:{}}}resize(e){let{spritePixelRatio:t,spriteWidth:i,spriteHeight:n}=e;this.offscreenCanvas.width=Math.max(i,0)*t,this.offscreenCanvas.height=Math.max(n,0)*t}renderSprite(e,t){e=Dw(e);const{renderCtx:i,renderCtx:{ctx:n},offscreenCanvas:o}=this,{scale:s=1,translateX:r=0,translateY:a=0}=null!==t&&void 0!==t?t:{};n.save(),n.resetTransform(),n.clearRect(0,0,o.width,o.height),n.beginPath(),n.setTransform(s,0,0,s,r,a);for(const l of e)l.preRender(),l.render(i);return n.closePath(),n.restore(),o.transferToImageBitmap()}};LR.offscreenCanvasCount=0;var PR=LR;function NR(e){for(const t of["B","KB","MB","GB"]){if(e<1536)return"".concat(e.toFixed(1)).concat(t);e/=1024}return"".concat(e.toFixed(1),"TB}")}function FR(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ww.zero;if(!RI.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:a=0,layersSkipped:l=0,nodesRendered:d=0,nodesSkipped:c=0,opsPerformed:h=0,opsSkipped:u=0}=null!==o&&void 0!==o?o:{},p=performance.now(),{start:g}=t,m=n(t,Gx),v=Object.entries(m).map((e=>{let[t,i]=e;return HR(t,i)})).filter((e=>null!=e)).join(" + "),f=Object.entries(s).map((e=>{let[t,i]=e;return"".concat(t,": ").concat(JSON.stringify(i))})).join(" ; "),y=RI.check("scene:stats:verbose"),b=function(){if(!("memory"in performance))return;const{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,n=[];for(const o of[t,e,i])"number"===typeof o&&n.push(NR(o));return"Heap ".concat(n.join(" / "))}(),C=["".concat(HR("\u23f1\ufe0f",g,p)," (").concat(v,")"),"".concat(f),"Layers: ".concat(y?VR(a,l):e.size,"; Sprites: ").concat(PR.offscreenCanvasCount),y?"Nodes: ".concat(VR(d,c)):null,y?"Ops: ".concat(VR(h,u)):null,y&&b?b:null].filter(bS),x=new cA((e=>i.measureText(e))),w=new Map(C.map((e=>[e,x.measureLines(e)]))),S=Math.max(...Array.from(w.values(),(e=>e.width))),M=function(e,t){let i=0;for(const n of e)i+=t(n);return i}(w.values(),(e=>e.height)),D=2+r.x;i.save(),i.fillStyle="white",i.fillRect(D,0,S,M),i.fillStyle="black";let k=0;for(const[n,I]of w.entries())k+=I.height,i.fillText(n,D,k);i.restore()}var OR=new Set,BR=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function GR(e){const t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));for(const i of Object.keys(t))BR.has(i)||"number"!==typeof t[i]&&"string"!==typeof t[i]&&"boolean"!==typeof t[i]&&(OR.add(i),delete t[i]);return t}function zR(e,t){var i;if(!RI.check(!0,"scene"))return{};let n=0;return l({node:"json"===t?GR(e):e,name:null!==(i=e.name)&&void 0!==i?i:e.id,dirty:e.dirty},Array.from(e.children(),(e=>zR(e,t))).reduce(((e,t)=>{var i;let{name:o}=t;const{node:{visible:s,opacity:r,zIndex:a,translationX:l,translationY:d,rotation:c,scalingX:h,scalingY:u},node:p}=t;(!s||r<=0)&&(o="(".concat(o,")")),cI.is(p)&&p.renderToOffscreenCanvas&&(o="*".concat(o,"*"));const g=Array.isArray(a)?"(".concat(a.join(", "),")"):a,m=["".concat((n++).toString().padStart(3,"0"),"|"),"".concat(null!==(i=o)&&void 0!==i?i:"<unknown>"),"z: ".concat(g),l&&"x: ".concat(l),d&&"y: ".concat(d),c&&"r: ".concat(c),null!=h&&1!==h&&"sx: ".concat(h),null!=u&&1!==u&&"sy: ".concat(u)].filter((e=>!!e)).join(" ");let v=m,f=1;for(;null!=e[v]&&f<100;)v="".concat(m," (").concat(f++,")");return e[v]=t,e}),{}))}function _R(e){var t;if(!e.dirty)return{dirtyTree:{},paths:[]};const i=Array.from(e.children(),(e=>_R(e))).filter((e=>e.paths.length>0)),n=cI.is(e)&&null!==(t=e.name)&&void 0!==t?t:e.id,o=i.length?i.flatMap((e=>e.paths)).map((e=>"".concat(n,".").concat(e))):[n];return{dirtyTree:l({name:n,node:e,dirty:e.dirty},i.map((e=>e.dirtyTree)).filter((e=>null!=e.dirty)).reduce(((e,t)=>{var i;return e[null!==(i=t.name)&&void 0!==i?i:"<unknown>"]=t,e}),{})),paths:o}}function VR(e,t){const i=e+t;return"".concat(e," / ").concat(i," (").concat(Math.round(100*e/i),"%)")}function HR(e,t,i){const n=null!=i?i-t:t;return"".concat(e,": ").concat(Math.round(100*n)/100,"ms")}var WR=class{constructor(e){this.debug=RI.create(!0,"scene"),this.id=ww(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.canvas=new TR(e),this.layersManager=new RR(this.canvas)}get width(){var e,t;return null!==(e=null===(t=this.pendingSize)||void 0===t?void 0:t[0])&&void 0!==e?e:this.canvas.width}get height(){var e,t;return null!==(e=null===(t=this.pendingSize)||void 0===t?void 0:t[1])&&void 0!==e?e:this.canvas.height}setContainer(e){var t;const{element:i}=this.canvas;return null===(t=i.parentElement)||void 0===t||t.removeChild(i),e.appendChild(i),this}setRoot(e){var t;return this.root===e||(this.isDirty=!0,null===(t=this.root)||void 0===t||t._setLayerManager(),this.root=e,e&&(e.visible=!0,e._setLayerManager(this.layersManager))),this}clear(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>this.removeChild(e)}appendChild(e){var t;return null===(t=this.root)||void 0===t||t.appendChild(e),this}removeChild(e){var t;return null===(t=this.root)||void 0===t||t.removeChild(e),this}download(e,t){var i;CI(this.canvas.toDataURL(t),null!==(i=null===e||void 0===e?void 0:e.trim())&&void 0!==i?i:"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t){return e=Math.round(e),t=Math.round(t),e>0&&t>0&&(e!==this.width||t!==this.height)&&(this.pendingSize=[e,t],this.isDirty=!0,!0)}render(e){var t,i;const{debugSplitTimes:n={start:performance.now()},extraDebugStats:o,seriesRect:s}=null!==e&&void 0!==e?e:{},{canvas:r,canvas:{context:a}={},root:l,pendingSize:d}=this;if(!a)return;const c=performance.now();if(d&&(this.layersManager.resize(...d),this.pendingSize=null),l&&!l.visible)return void(this.isDirty=!1);if(!1===(null===l||void 0===l?void 0:l.dirty)&&!this.isDirty)return this.debug.check()&&this.debug("Scene.render() - no-op",{tree:zR(l,"console")}),void FR(this.layersManager,n,a,void 0,o,s);const h={ctx:a,devicePixelRatio:null!==(t=this.canvas.pixelRatio)&&void 0!==t?t:1,resized:Boolean(d),debugNodes:{}};RI.check("scene:stats:verbose")&&(h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),function(e){const t=fM(fI("agChartsSceneDebug")),i=[];for(const n of t)"layout"===n?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(n);e.debugNodeSearch=i}(h);let u=!1;if(!1!==(null===l||void 0===l?void 0:l.dirty)&&(u=!0,r.clear()),l&&RI.check("scene:dirtyTree")){const{dirtyTree:e,paths:t}=_R(l);RI.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:e,paths:t})}if(l&&u){if(l.visible&&l.preRender(),this.debug.check()){const e=zR(l,"console");this.debug("Scene.render() - before",{canvasCleared:u,tree:e})}l.visible&&(a.save(),l.render(h),a.restore())}n["\u270d\ufe0f"]=performance.now()-c,null===(i=a.verifyDepthZero)||void 0===i||i.call(a),this.isDirty=!1,FR(this.layersManager,n,a,h.stats,o,s),function(e,t){e.save();for(const[i,n]of Object.entries(t)){const t=rI.toCanvas(n);t?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,t.x,t.y,t.width),e.fillText(i,t.x,t.y,t.width)):cM.log("Scene.render() - no bbox for debugged node [".concat(i,"]."))}e.restore()}(a,h.debugNodes),l&&this.debug.check()&&this.debug("Scene.render() - after",{tree:zR(l,"console"),canvasCleared:u})}toSVG(){const{root:e,width:t,height:i}=this;if(null!=e)return Zw.toSVG(e,t,i)}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};WR.className="Scene";var jR=class{constructor(){this.cache=new WeakMap}call(e){let t,i=this.cache.get(e);for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];try{t=JSON.stringify(o)}catch(r){return this.invoke(e,o,i)}return null==i&&(i=new Map,this.cache.set(e,i)),i.has(t)?i.get(t):this.invoke(e,o,i,t)}invoke(e,t,i,n){try{const o=e(...t);return i&&null!=n&&i.set(n,o),o}catch(o){return void cM.warnOnce("User callback errored, ignoring",o)}}invalidateCache(){this.cache=new WeakMap}},UR=class extends fE{constructor(e){super(),this.annotationRoot=e,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return null==e||cS(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(null!==i&&void 0!==i?i:[]).map((e=>ES(e,this.getAnnotationTypeStyles(e.type)))),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(null!==e&&void 0!==e?e:[])}attachNode(e){return this.annotationRoot.append(e),()=>{var t;return null===(t=this.annotationRoot)||void 0===t||t.removeChild(e),this}}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){var t;return null===(t=this.styles)||void 0===t?void 0:t[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},KR=class{constructor(e){this.sceneRoot=e,this.axes=new Map,this.axisGridGroup=new cI({name:"Axes-Grids",zIndex:1}),this.axisGroup=new cI({name:"Axes",zIndex:2}),this.axisLabelGroup=new cI({name:"Axes-Labels",zIndex:12}),this.axisCrosslineRangeGroup=new cI({name:"Axes-Crosslines-Range",zIndex:3}),this.axisCrosslineLineGroup=new cI({name:"Axes-Crosslines-Line",zIndex:7}),this.axisCrosslineLabelGroup=new cI({name:"Axes-Crosslines-Label",zIndex:12}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const o of e)t.includes(o)||(o.detachAxis(i),o.destroy());for(const o of t)null!==e&&void 0!==e&&e.includes(o)||o.attachAxis(i);this.axes.clear();for(const o of t){const e=o.createAxisContext();var n;if(this.axes.has(e.direction))null===(n=this.axes.get(e.direction))||void 0===n||n.push(e);else this.axes.set(e.direction,[e])}}getAxisContext(e){var t;return null!==(t=this.axes.get(e))&&void 0!==t?t:[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},YR=class extends vE{constructor(e){super(),this.animationManager=e,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=RI.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){"function"===typeof e&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(e){this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(e){return dM((e=>this.fetch(e).catch((e=>cM.error("callback failed",e)))),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return dM(((e,t)=>{this.debug("DataService - dispatching 'data-load' | ".concat(e)),this.dispatch("data-load",{type:"data-load",data:t})}),e,{leading:!0,trailing:!0})}async fetch(e){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const t=performance.now(),i=this.requestCounter++;let n;this.debug("DataService - requesting | ".concat(i)),this.freshRequests.push(i);try{n=await this.dataSourceCallback(e),this.debug("DataService - response | ".concat(performance.now()-t,"ms | ").concat(i))}catch(s){this.debug("DataService - request failed | ".concat(i)),cM.errorOnce("DataService - request failed | [".concat(s,"]"))}this.isLoadingInitialData=!1;const o=this.freshRequests.findIndex((e=>e===i));-1===o||this.dispatchOnlyLatest&&o!==this.freshRequests.length-1?this.debug("DataService - discarding stale request | ".concat(i)):(this.freshRequests=this.freshRequests.slice(o+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(n)?this.throttledDispatch(i,n):this.dispatch("data-error"))}};mw([OA({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],YR.prototype,"dispatchThrottle",2),mw([OA({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],YR.prototype,"requestThrottle",2);var ZR=class{constructor(e){this.maxAnimationTime=e,this.debug=RI.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(XS.map((e=>[e,[]]))),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){var e;return null!==(e=this.phases.get(XS[this.currentPhase]))&&void 0!==e?e:[]}checkOverlappingId(e){null!=e&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug("Skipping animation batch due to update of existing animation: ".concat(e)),this.skip())}addAnimation(e){var t;if(e.isComplete)return;if(XS.indexOf(e.phase)<this.currentPhase)return this.debug("Skipping animation due to being for an earlier phase",e.id),void e.stop();this.controllers.set(e.id,e),null===(t=this.phases.get(e.phase))||void 0===t||t.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=null===t||void 0===t?void 0:t.indexOf(e);null!=i&&i>=0&&(null===t||void 0===t||t.splice(i,1))}progress(e){var t;if(!this.isReady)return;let i=0===e?.01:e;const n=()=>{const e=XS[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:e,phaseMeta:qS[e]}};let{phase:o,phaseControllers:s,phaseMeta:r}=n();const a=()=>null==XS[this.currentPhase],l=()=>{for(({phase:o,phaseControllers:s,phaseMeta:r}=n());!a()&&0===s.length;)this.currentPhase++,({phase:o,phaseControllers:s,phaseMeta:r}=n()),this.debug("AnimationBatch - phase changing to ".concat(o),{unusedTime:i},s)},d=this.controllers.size;this.debug("AnimationBatch - ".concat(e,"ms; phase ").concat(o," with ").concat(null===(t=s)||void 0===t?void 0:t.length," of ").concat(d));do{const e=i,t=r.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed;let n=0;for(const o of s)t?o.stop():i=Math.min(o.update(e),i),o.isComplete&&(n++,this.removeAnimation(o));this.animationTimeConsumed+=e-i,this.debug("AnimationBatch - updated ".concat(s.length," controllers; ").concat(n," completed")),this.debug("AnimationBatch - animationTimeConsumed: ".concat(this.animationTimeConsumed)),l()}while(i>0&&!a());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug("AnimationBatch - ready; skipped: ".concat(this.skipAnimations),[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&!0!==qS[t.phase].skipIfNoEarlierAnimations){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===e){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}pause(){for(const e of this.controllers.values())e.pause()}stop(){for(const t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(e){cM.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(e){if(null!=e&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach((e=>e())),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}};function XR(e){const t=l(l({},e),{},{preventDefault(){var e;null===(e=t.sourceEvent)||void 0===e||e.preventDefault()}});return t}function qR(e,t){e.dispatchWrapHandlers(t.type,((e,t)=>e(t)),XR(t))}var QR=["click","dblclick","contextmenu","hover","leave","enter","page-left","wheel"],JR=["keydown","keyup"],$R=["mousemove","mouseup"],eL=["pagehide","mousemove","mouseup"],tL=["click","dblclick","contextmenu","mousedown","mouseleave","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","keydown","keyup"];var iL=class e extends bE{constructor(e,t){super(),this.keyboardOptions=e,this.domManager=t,this.debug=RI.create(!0,"interaction"),this.eventHandler=e=>this.processEvent(e),this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=34,this.rootElement=this.domManager.getShadowDocumentRoot();for(const i of tL)i.startsWith("touch")||"wheel"===i?this.domManager.addEventListener(i,this.eventHandler,{passive:!1}):this.domManager.addEventListener(i,this.eventHandler);for(const i of eL)fI().addEventListener(i,this.eventHandler);this.containerChanged(!0),this.domManager.addListener("container-changed",(()=>this.containerChanged()))}containerChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.domManager.getShadowDocumentRoot();if(e||t!==this.rootElement){for(const e of $R){var i;null===(i=this.rootElement)||void 0===i||i.removeEventListener(e,this.eventHandler)}this.rootElement=t,this.debug("[InteractionManager] Switching rootElement to:",this.rootElement);for(const e of $R){var n;null===(n=this.rootElement)||void 0===n||n.addEventListener(e,this.eventHandler)}}}destroy(){super.destroy();for(const t of eL)fI().removeEventListener(t,this.eventHandler);for(const t of $R){var e;null===(e=this.rootElement)||void 0===e||e.removeEventListener(t,this.eventHandler)}for(const t of tL)this.domManager.removeEventListener(t,this.eventHandler);this.domManager.removeStyles("interactionManager")}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){this.debug("Received raw event",e);let t=this.decideInteractionEventTypes(e);null==t||Array.isArray(t)||(t=[t]);for(const n of null!==(i=t)&&void 0!==i?i:[]){var i;this.dispatchEvent(e,n)}}dispatchEvent(e,t){if(function(e){return QR.includes(e)}(t))return void this.dispatchPointerEvent(e,t);const{relatedElement:i,targetElement:n}=this.extractElements(e);if(function(e){return JR.includes(e)}(t)){const o=e;this.dispatchTypedEvent(this.listeners,{type:t,sourceEvent:o,relatedElement:i,targetElement:n})}}dispatchTypedEvent(e,t){const i=XR(t);this.debug("Dispatching typed event",i,this.getState()),e.dispatchWrapHandlers(t.type,((e,t)=>e(t)),i)}extractElements(e){let t,i;return"relatedTarget"in e&&e.relatedTarget instanceof HTMLElement&&(t=e.relatedTarget),"target"in e&&e.target instanceof HTMLElement&&(i=e.target),{relatedElement:t,targetElement:i}}dispatchPointerEvent(e,t){const i=this.calculateCoordinates(e);if(null==i)return;const n=this.buildPointerEvent(l({type:t,event:e},i));this.debug("Dispatching pointer event",n,this.getState()),qR(this.listeners,n)}getEventHTMLTarget(e){return e.target instanceof HTMLElement?e.target:e.currentTarget instanceof HTMLElement?e.currentTarget:void 0}recordDown(e){e instanceof MouseEvent&&(BS(["offsetX","offsetY"],this.clickHistory[0],e),BS(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),BS(["offsetX","offsetY"],this.dblclickHistory[0],e))}recordUp(e){e instanceof MouseEvent&&BS(["offsetX","offsetY"],this.dblclickHistory[1],e)}decideInteractionEventTypes(e){switch(e.type){case"keydown":case"keyup":return this.keyboardOptions.enabled?e.type:void 0;case"click":case"dblclick":case"contextmenu":case"wheel":return e.type;case"touchstart":case"mousedown":if(!this.isEventOverElement(e))return;return void this.recordDown(e);case"touchmove":case"mousemove":if(!this.isEventOverElement(e))return;return"hover";case"mouseup":case"touchend":if(!this.isEventOverElement(e))return;return void this.recordUp(e);case"mouseleave":case"touchcancel":return"leave";case"mouseenter":return"enter";case"pagehide":return"page-left"}}isEventOverElement(e){return e.target instanceof HTMLElement&&this.domManager.contains(e.target)}calculateCoordinates(t){if(t instanceof MouseEvent)return this.getMouseEventCoords(t);if("undefined"!==typeof TouchEvent&&t instanceof TouchEvent){var i;const n=null!==(i=t.touches[0])&&void 0!==i?i:t.changedTouches[0],{clientX:o,clientY:s,pageX:r,pageY:a}=n;return l(l({},e.NULL_COORDS),{},{clientX:o,clientY:s,pageX:r,pageY:a})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return e.NULL_COORDS}}getMouseEventCoords(e){const{clientX:t,clientY:i,pageX:n,pageY:o}=e;let{offsetX:s,offsetY:r}=e;const a=this.getEventHTMLTarget(e),{x:l=0,y:d=0}=a?this.domManager.calculateCanvasPosition(a):{};return s+=l,r+=d,{clientX:t,clientY:i,pageX:n,pageY:o,offsetX:s,offsetY:r}}static isWheelEvent(e){return"wheel"===e.type}static getWheelDeltas(e){let[t,i]=[NaN,NaN];if(this.isWheelEvent(e)){const n=0===e.deltaMode?.01:1;t=e.deltaX*n,i=e.deltaY*n}return{deltaX:t,deltaY:i}}buildPointerEvent(t){const{type:i,event:n,clientX:o,clientY:s}=t;let{offsetX:r,offsetY:a,pageX:l,pageY:d}=t;if(!xS(r)||!xS(a)){const e=this.domManager.getBoundingClientRect();r=o-e.left,a=s-e.top}if(!xS(l)||!xS(d)){var c,h,u;const e=null===(c=this.rootElement)||void 0===c?void 0:c.getBoundingClientRect();l=o-(null!==(h=null===e||void 0===e?void 0:e.left)&&void 0!==h?h:0),d=s-(null!==(u=null===e||void 0===e?void 0:e.top)&&void 0!==u?u:0)}const{deltaX:p,deltaY:g}=e.getWheelDeltas(n);let m=[];"click"===n.type?m=this.clickHistory:"dblclick"===n.type&&(m=this.dblclickHistory);const{relatedElement:v,targetElement:f}=this.extractElements(n),y={type:i,offsetX:r,offsetY:a,pageX:l,pageY:d,deltaX:p,deltaY:g,button:"button"in n?Number(n.button):0,pointerHistory:m,sourceEvent:n,relatedElement:v,targetElement:f};return this.debug("InteractionManager - builtEvent: ",y,this.getState()),y}};iL.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var nL=iL;function oL(e){return null==e||!isNaN(e)&&e>=0&&e<=2}var sL=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new ZR(1.5*this.defaultDuration),this.debug=RI.create(!0,"animation"),this.events=new dE,this.rafAvailable="undefined"!==typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(a){return void this.failsafeOnError(a)}let{id:i}=e;null==i&&(i="__".concat(this.currentAnonymousAnimationId),this.currentAnonymousAnimationId+=1);const n=this.isSkipped()||"none"===e.phase;n&&this.debug("AnimationManager - skipping animation");const{delay:o,duration:s}=e;if(!oL(o))throw new Error("Animation delay of ".concat(o," is unsupported (").concat(i,")"));if(!oL(s))throw new Error("Animation duration of ".concat(s," is unsupported (").concat(i,")"));const r=new eM(l(l({},e),{},{id:i,skip:n,autoplay:!!this.isPlaying&&e.autoplay,phase:e.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(e){this.failsafeOnError(e)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=fI().requestAnimationFrame((t=>{e(t).catch((e=>cM.error(e)))}))}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable)return;if(!this.batch.isActive()||null!==this.requestId)return;let e;const t=async i=>{const n=()=>{var t;const n=i-(null!==(t=e)&&void 0!==t?t:i);e=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:n}),this.interactionManager.pushState(2);try{this.batch.progress(n)}catch(o){this.failsafeOnError(o)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:n})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(n):await this.chartUpdateMutex.acquire(n),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];cM.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug("AnimationManager - startBatch() with skipAnimations=".concat(e,".")),this.reset(),this.batch.destroy(),this.batch=new ZR(1.5*this.defaultDuration),!0===e&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},rL=class extends fE{legendItemClick(e,t,i,n,o){const s={type:"legend-item-click",legendType:e,series:t,itemId:i,enabled:n,legendItemName:o};this.listeners.dispatch("legend-item-click",s)}legendItemDoubleClick(e,t,i,n,o,s){const r={type:"legend-item-double-click",legendType:e,series:t,itemId:i,enabled:n,legendItemName:s,numVisibleItems:o};this.listeners.dispatch("legend-item-double-click",r)}axisHover(e,t){const i={type:"axis-hover",axisId:e,direction:t};this.listeners.dispatch("axis-hover",i)}},aL=class{constructor(){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new vE}static check(e,t){return t.type===e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,n){var o,s;const{sourceEvent:r}=t,a=null!==(o=null===n||void 0===n?void 0:n.x)&&void 0!==o?o:t.canvasX,l=null!==(s=null===n||void 0===n?void 0:n.y)&&void 0!==s?s:t.canvasY;r.stopPropagation(),this.listeners.dispatch("",XR({type:e,x:a,y:l,context:i,sourceEvent:r}))}addListener(e){return this.listeners.addListener("",e)}filterActions(e){return this.defaultActions.filter((t=>t.id&&!this.hiddenActions.has(t.id)&&["all",e].includes(t.type)))}registerDefaultAction(e){const t=null!=e.id&&!this.defaultActions.some((t=>{let{id:i}=t;return i===e.id}));return t&&this.defaultActions.push(e),()=>{const i=t?this.defaultActions.findIndex((t=>{let{id:i}=t;return i===e.id})):-1;-1!==i&&this.defaultActions.splice(i,1)}}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}showAction(e){this.hiddenActions.add(e)}hideAction(e){this.hiddenActions.delete(e)}isDisabled(e){return this.disabledActions.has(e)}},lL=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),"undefined"!==typeof t&&super.set(e,t),this}stateId(){var e;return null!==(e=Array.from(this.keys()).pop())&&void 0!==e?e:this.defaultState}stateValue(){var e;return null!==(e=Array.from(this.values()).pop())&&void 0!==e?e:this.defaultValue}},dL=(e=>(e.Auto="auto",e.Default="default",e.Grab="grab",e.Grabbing="grabbing",e.Move="move",e.NotAllowed="not-allowed",e.Pointer="pointer",e.EWResize="ew-resize",e.NSResize="ns-resize",e.ZoomIn="zoom-in",e.ZoomOut="zoom-out",e))(dL||{}),cL=class{constructor(e){this.domManager=e,this.stateTracker=new lL("default")}updateCursor(e,t){this.stateTracker.set(e,t),this.domManager.updateCursor(this.stateTracker.stateValue())}getCursor(){return this.domManager.getCursor()}};function hL(e,t){return Math.sqrt(function(e,t){const i=e.screenX-t.screenX,n=e.screenY-t.screenY;return i*i+n*n}(e,t))}var uL=class extends fE{constructor(e){super(),this.domManager=e,this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.domManager.addEventListener("touchstart",this.touchstart,{passive:!0}),this.domManager.addEventListener("touchmove",this.touchmove,{passive:!1}),this.domManager.addEventListener("touchend",this.touchend),this.domManager.addEventListener("touchcancel",this.touchcancel)}destroy(){this.domManager.removeEventListener("touchstart",this.touchstart),this.domManager.removeEventListener("touchmove",this.touchmove),this.domManager.removeEventListener("touchend",this.touchend),this.domManager.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(e){const{touches:t}=e,{finger1:i,finger2:n}=this.pinch;if(0!==this.pinch.status&&2===t.length){if(t[0].identifier===i.identifier&&t[1].identifier===n.identifier)return[t[0],t[1]];if(t[0].identifier===n.identifier&&t[1].identifier===i.identifier)return[t[1],t[0]]}}copyTouchData(e){const t=["identifier","screenX","screenY"];BS(t,this.pinch.finger1,e.touches[0]),BS(t,this.pinch.finger2,e.touches[1]),this.pinch.distance=hL(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(e,t,i){const{finger1:n,finger2:o,origin:s}=this.pinch;this.listeners.dispatch(e,XR({sourceEvent:i,type:e,finger1:n,finger2:o,deltaDistance:t,origin:s}))}onTouchStart(e){this.stopPinchTracking(e);const{pinch:t}=this;2===e.touches.length&&(t.status=1,this.copyTouchData(e),t.origin.x=(e.touches[0].clientX+e.touches[1].clientX)/2,t.origin.y=(e.touches[0].clientY+e.touches[1].clientY)/2)}onTouchMove(e){const t=this.findPinchTouches(e);if(void 0!==t){const[i,n]=t,{pinch:o}=this,s=hL(i,n),r=s-o.distance;1===o.status?Math.abs(r)>1&&(o.status=2,this.copyTouchData(e),this.dispatchPinchEvent("pinch-start",0,e)):2===o.status?(o.distance=s,this.copyTouchData(e),this.dispatchPinchEvent("pinch-move",r,e)):cM.error("unexpected pinch.status: ".concat(o.status))}}onTouchEnd(e){this.stopPinchTracking(e)}onTouchCancel(e){this.stopPinchTracking(e)}stopPinchTracking(e){const{pinch:t}=this;2===t.status&&this.dispatchPinchEvent("pinch-end",0,e),this.pinch.status=0}},pL=class extends fE{constructor(){super(...arguments),this.highlightStates=new lL}updateHighlight(e,t){const{activeHighlight:i}=this;this.highlightStates.set(e,t),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:e})}getActiveHighlight(){return this.activeHighlight}isEqual(e,t){return e===t||null!=e&&null!=t&&(null===e||void 0===e?void 0:e.series)===(null===t||void 0===t?void 0:t.series)&&(null===e||void 0===e?void 0:e.itemId)===(null===t||void 0===t?void 0:t.itemId)&&(null===e||void 0===e?void 0:e.datum)===(null===t||void 0===t?void 0:t.datum)}},gL=class extends bE{constructor(e,t){super(),this.interactionManager=e,this.previousInputDevice="keyboard";const i=t.getRegion("series");this.destroyFns.push(e.addListener("hover",(()=>this.onMouse()),41),e.addListener("wheel",(()=>this.onClick()),41),e.addListener("keydown",(e=>this.onKeyDown(e)),63),i.addListener("click",(()=>this.onClick()),41),i.addListener("drag-start",(()=>this.onClick()),41))}getState(){return this.interactionManager.getState()}destroy(){super.destroy()}onClick(){var e;null===(e=this.focusIndicator)||void 0===e||e.overrideFocusVisible(!1),this.previousInputDevice="mouse"}onMouse(){this.previousInputDevice="mouse"}onKeyDown(e){var t;const i=this.getState(),{key:n,code:o,altKey:s,shiftKey:r,metaKey:a,ctrlKey:l}=e.sourceEvent;if(l||a){var d,c;if("y"===n||"z"===n&&r)return null===(d=this.focusIndicator)||void 0===d||d.overrideFocusVisible("keyboard"===this.previousInputDevice),this.dispatch("redo",0,e);if("z"===n)return null===(c=this.focusIndicator)||void 0===c||c.overrideFocusVisible("keyboard"===this.previousInputDevice),this.dispatch("undo",0,e)}if(9&i){var h;null===(h=this.focusIndicator)||void 0===h||h.overrideFocusVisible(!1)}else{switch(n){case"+":return this.dispatch("nav-zoom",1,e);case"-":return this.dispatch("nav-zoom",-1,e)}if(!(s||r||a||l))switch(null===(t=this.focusIndicator)||void 0===t||t.overrideFocusVisible(!0),o){case"ArrowDown":return this.dispatch("nav-vert",1,e);case"ArrowUp":return this.dispatch("nav-vert",-1,e);case"ArrowLeft":return this.dispatch("nav-hori",-1,e);case"ArrowRight":return this.dispatch("nav-hori",1,e);case"ZoomIn":case"Add":return this.dispatch("nav-zoom",1,e);case"ZoomOut":case"Substract":return this.dispatch("nav-zoom",-1,e);case"Space":case"Enter":return this.dispatch("submit",0,e)}}}dispatch(e,t,i){const{previousInputDevice:n}=this;qR(this.listeners,{type:e,delta:t,sourceEvent:i,previousInputDevice:n});"keydown"!==i.type||["redo","undo","nav-zoom"].includes(e)||(this.previousInputDevice="keyboard")}},mL=class extends vE{};function vL(e,t,i,n){var o;let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;return null!==(o=null===e||void 0===e?void 0:e.addListener(i,(e=>{t.getState()&s&&n(e)})))&&void 0!==o?o:()=>{}}function fL(e){var t,i;const{sourceEvent:n}=e,{className:o,classList:s,ariaHidden:r}=null!==(t=null===(i=e.sourceEvent)||void 0===i?void 0:i.target)&&void 0!==t?t:{};return"ag-charts-proxy-elem"!==o&&s instanceof DOMTokenList?s.contains("ag-charts-annotations__axis-button-icon")||"ag-charts-swapchain"===o||"ag-charts-canvas-container"===o||"ag-charts-canvas-proxy"===o||(null===n||void 0===n?void 0:n.target)instanceof HTMLCanvasElement?"none":function(e){if(null==e||!(e instanceof HTMLElement))return;let t=e;for(;null!=t&&(null===(i=t)||void 0===i||!i.classList.contains("ag-charts-wrapper"));){var i;if(t.classList.contains("ag-charts-tooltip"))return t;t=t.parentElement}}(n.target)&&"true"!==r?"wait":"leave":"leave"}var yL=class{constructor(e){this.interactionManager=e,this.debug=RI.create(!0,"region"),this.regions={root:{properties:{name:"root"},listeners:new mL},series:{properties:{name:"series"},listeners:new mL}},this.destroyFns=[],this.allRegionsListeners=new mL,this.isDragMoving=!1,this.blockNextClickEvent=!1,this.processPointerEvent=e=>{const t=fL(e),{current:i}=this;let n=i;if(!this.isDragMoving&&null==this.deferredDragStart)switch(t){case"wait":return;case"none":n=this.pickRegion(e);break;case"leave":n=void 0}const o=n;void 0!==i&&(null===o||void 0===o?void 0:o.properties.name)!==i.properties.name&&this.dispatch(i,e,"leave"),void 0!==o&&o.properties.name!==(null===i||void 0===i?void 0:i.properties.name)&&this.dispatch(n,e,"enter"),void 0!==o&&this.dispatch(n,e),this.current=n}}destroy(){this.destroyFns.forEach((e=>e())),this.current=void 0,this.regions.root.listeners.destroy(),this.regions.series.listeners.destroy()}initRegions(e,t){this.regions.root.properties.widget=e,this.regions.series.properties.widget=t,e.addListener("wheel",this.processPointerEvent),e.addListener("contextmenu",this.processPointerEvent),e.addListener("click",this.processPointerEvent),e.addListener("dblclick",this.processPointerEvent),e.addListener("mouseenter",this.processPointerEvent),e.addListener("mousemove",this.processPointerEvent),e.addListener("mouseleave",this.processPointerEvent),e.addListener("drag-start",this.processPointerEvent),e.addListener("drag-move",this.processPointerEvent),e.addListener("drag-end",this.processPointerEvent)}getRegion(e){return this.makeObserver(this.regions[e])}listenAll(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return vL(this.allRegionsListeners,this.interactionManager,e,t,i)}makeObserver(e){const{interactionManager:t}=this;return new class{addListener(i,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return vL(null===e||void 0===e?void 0:e.listeners,t,i,n,o)}}}widgetEventTypeToRegionEventType(e,t){if(void 0!==t)return t;return{contextmenu:"contextmenu",click:"click",dblclick:"dblclick",mouseenter:"enter",mousemove:"hover",mouseleave:"leave",wheel:"wheel","drag-start":"drag-start","drag-move":"drag","drag-end":"drag-end"}[e.type]}computeEventOffsets(e,t,i){const{deltaX:n,deltaY:o}=nL.getWheelDeltas(i.sourceEvent);if("mockRegion"in i.sourceEvent){const e=i.sourceEvent.mockRegion;if(e)return l({deltaX:n,deltaY:o},e)}const s=t.getElement().getBoundingClientRect(),r=e.getElement().getBoundingClientRect();return{canvasX:i.clientX-s.x,canvasY:i.clientY-s.y,regionX:i.clientX-r.x,regionY:i.clientY-r.y,deltaX:n,deltaY:o}}dispatch(e,t,i){var n;const{widget:o}=null!==(n=null===e||void 0===e?void 0:e.properties)&&void 0!==n?n:{},{widget:s}=this.regions.root.properties;if(null==e||null==o||null==s)return;const r=XR(l(l({},this.computeEventOffsets(o,s,t)),{},{sourceEvent:t.sourceEvent,type:this.widgetEventTypeToRegionEventType(t,i),region:e.properties.name,timestamp:Date.now()}));switch(r.type){case"drag-start":this.deferredDragStart=r;break;case"drag":if(this.deferredDragStart){if(!this.canStartDrag(r))return;this.dispatchEvent(e,this.deferredDragStart)}this.dispatchEvent(e,r),this.deferredDragStart=void 0,this.isDragMoving=!0,this.blockNextClickEvent=!0;break;case"drag-end":this.isDragMoving&&this.dispatchEvent(e,r),this.deferredDragStart=void 0,this.isDragMoving=!1;break;case"click":this.blockNextClickEvent||this.dispatchEvent(e,r),this.blockNextClickEvent=!1;break;case"leave":case"enter":this.isDragMoving&&null==this.deferredDragStart||this.dispatchEvent(e,r);break;case"hover":this.blockNextClickEvent=!1,this.dispatchEvent(e,r);break;default:this.dispatchEvent(e,r)}}dispatchEvent(e,t){this.debug("Dispatching region event: ",t),this.allRegionsListeners.dispatch(t.type,t),e.listeners.dispatch(t.type,t)}pickRegion(e){var t;let{sourceEvent:i}=e;return"mockRegion"in i&&i.mockRegion?"series"===i.mockRegion.region?this.regions.series:this.regions.root:i.target==(null===(t=this.regions.root)||void 0===t||null===(t=t.properties.widget)||void 0===t?void 0:t.getElement())?this.regions.root:this.regions.series}canStartDrag(e){if(!this.deferredDragStart)return!1;if(e.timestamp-this.deferredDragStart.timestamp>300)return!0;return Math.abs(e.canvasX-this.deferredDragStart.canvasX)+Math.abs(e.canvasY-this.deferredDragStart.canvasY)>3}};function bL(e){var t,i,n,o,s;const r=null!==(t=null!==(i=null===(n=e.yBar)||void 0===n?void 0:n.upperPoint)&&void 0!==i?i:e.midPoint)&&void 0!==t?t:null===(o=(s=e.series).datumMidPoint)||void 0===o?void 0:o.call(s,e);if(r){const{x:t,y:i}=rI.toCanvasPoint(e.series.contentGroup,r.x,r.y);return{canvasX:Math.round(t),canvasY:Math.round(i)}}}var CL=class{constructor(e,t){this.domManager=e,this.tooltip=t,this.stateTracker=new lL,this.suppressState=new lL(!1),this.appliedState=null,t.setup(e),e.addListener("hidden",(()=>this.tooltip.hide()))}updateTooltip(e,t,i){var n,o;this.tooltip.enabled&&(null!==(n=i)&&void 0!==n||(i=null===(o=this.stateTracker.get(e))||void 0===o?void 0:o.content),this.stateTracker.set(e,{content:i,meta:t}),this.applyStates())}removeTooltip(e){this.tooltip.enabled&&(this.stateTracker.delete(e),this.applyStates())}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}getTooltipMeta(e){var t;return null===(t=this.stateTracker.get(e))||void 0===t?void 0:t.meta}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){var e;const t=this.stateTracker.stateId(),i=t?this.stateTracker.get(t):null;if(this.suppressState.stateValue()||null==(null===i||void 0===i?void 0:i.meta)||null==(null===i||void 0===i?void 0:i.content))return this.appliedState=null,void this.tooltip.hide();const n=this.domManager.getBoundingClientRect(),o="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():n;if((null===(e=this.appliedState)||void 0===e?void 0:e.content)===(null===i||void 0===i?void 0:i.content)){const e=this.tooltip.isVisible();this.tooltip.show(o,n,null===i||void 0===i?void 0:i.meta,null,e)}else this.tooltip.show(o,n,null===i||void 0===i?void 0:i.meta,null===i||void 0===i?void 0:i.content);this.appliedState=i}static makeTooltipMeta(e,t){var i,n;const{canvasX:o,canvasY:s}=e,r=t.series.properties.tooltip,a={canvasX:o,canvasY:s,enableInteraction:null!==(i=null===(n=r.interaction)||void 0===n?void 0:n.enabled)&&void 0!==i&&i,lastPointerEvent:{type:e.type,canvasX:o,canvasY:s},showArrow:r.showArrow,position:{type:r.position.type,xOffset:r.position.xOffset,yOffset:r.position.yOffset}},d=bL(t);return"node"!==r.position.type&&"sparkline"!==r.position.type||!d?a:l(l({},a),{},{canvasX:d.canvasX,canvasY:d.canvasY})}},xL={bottomCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}},center:function(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}},clone:function(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}},end:function(e){return{x:e.x2,y:e.y2}},from:function(e,t,i,n){if("number"===typeof e)return{x1:e,y1:t,x2:i,y2:n};if("width"in e)return{x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height};throw new Error("Values can not be converted into a vector4: [".concat(JSON.stringify(e),"] [").concat(t,"] [").concat(i,"] [").concat(n,"]"))},height:function(e){return Math.abs(e.y2-e.y1)},round:function(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}},start:function(e){return{x:e.x1,y:e.y1}},topCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}},origin:function(){return{x1:0,y1:0,x2:0,y2:0}},width:function(e){return Math.abs(e.x2-e.x1)}};function wL(e,t,i,n,o){return t+(o-e)/(i-e)*(n-t)}function SL(e,t,i,n,o){return e+(i-e)/(n-t)*(o-t)}function ML(e,t,i){return[SL(e,i.min,t,i.max,0),SL(e,i.min,t,i.max,1)]}function DL(e,t,i,n,o,s){if(i<=o&&s<=n)return i;const r=o-i,a=s-n;return Rw(e,i+(Math.abs(r)<Math.abs(a)?r:a),t)}function kL(e,t,i){const{x:n={min:0,max:1},y:o={min:0,max:1}}=t,s=xL.from(i),r=xL.from(e),a=function(e,t,i){const[n,o]=ML(e.x1,e.x2,t),[s,r]=ML(e.y1,e.y2,i);return{x1:n,x2:o,y1:s,y2:r}}(r,n,o),l=DL(a.x1,a.x2,r.x1,r.x2,s.x1,s.x2),d=DL(a.y1,a.y2,r.y1,r.y2,s.y1,s.y2);return{x:{min:wL(r.x1,n.min,r.x2,n.max,l),max:wL(r.x1,n.min,r.x2,n.max,l+e.width)},y:{min:wL(r.y1,o.min,r.y2,o.max,d),max:wL(r.y1,o.min,r.y2,o.max,d+e.height)}}}var IL=["rangeX","rangeY","ratioX","ratioY","autoScaleYAxis"],AL=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},TL=class extends fE{constructor(){super(...arguments),this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new lL(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new AL,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0}addLayoutListeners(e){this.destroyFns.push(e.addListener("layout:complete",(()=>{const{pendingMemento:e}=this,t=!this.didLayoutAxes;this.didLayoutAxes=!0,e?this.restoreMemento(e.version,e.mementoVersion,e.memento):t&&this.autoScaleYZoom("zoom-manager")})))}createMemento(){const e=this.getDefinedZoom(),t={rangeX:this.getRangeDirection(e.x,"x"),rangeY:this.getRangeDirection(e.y,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max}};return this.autoScaleYAxis.enabled&&(t.autoScaleYAxis=!this.autoScaleYAxis.manuallyAdjusted),t}guardMemento(e){if(null==e)return!0;if(!vS(e))return!1;for(const t of Object.keys(e))if(!wM(IL,t))return!1;return!0}restoreMemento(e,t,i){const{independentAxes:n}=this;if(!this.axes||!this.didLayoutAxes)return void(this.pendingMemento={version:e,mementoVersion:t,memento:i});this.pendingMemento=void 0;const o=this.getDefinedZoom();var s,r;if(null!==i&&void 0!==i&&i.rangeX)o.x=null!==(s=this.rangeToRatio(i.rangeX,"x"))&&void 0!==s?s:{min:0,max:1};else if(null!==i&&void 0!==i&&i.ratioX){var a,l;o.x={min:null!==(a=i.ratioX.start)&&void 0!==a?a:0,max:null!==(l=i.ratioX.end)&&void 0!==l?l:1}}else o.x={min:0,max:1};if(!this.navigatorModule||this.zoomModule)if(null!==i&&void 0!==i&&i.rangeY)o.y=null!==(r=this.rangeToRatio(i.rangeY,"y"))&&void 0!==r?r:{min:0,max:1};else if(null!==i&&void 0!==i&&i.ratioY){var d,c;o.y={min:null!==(d=i.ratioY.start)&&void 0!==d?d:0,max:null!==(c=i.ratioY.end)&&void 0!==c?c:1}}else o.y={min:0,max:1};if(null!=(null===i||void 0===i?void 0:i.autoScaleYAxis)&&(this.autoScaleYAxis.manuallyAdjusted=!i.autoScaleYAxis),this.lastRestoredState=o,!0!==n)return void this.updateZoom("zoom-manager",o);const h=this.getPrimaryAxis("x"),u=this.getPrimaryAxis("y");for(const p of[h,u])p&&this.updateAxisZoom("zoom-manager",p.id,o[p.direction])}updateAxes(e){this.axes=e;const t=new Map(e.map((e=>[e.id,this.axisZoomManagers.get(e.id)])));this.axisZoomManagers.clear();for(const n of e){var i;this.axisZoomManagers.set(n.id,null!==(i=t.get(n.id))&&void 0!==i?i:new EL(n))}this.state.size>0&&e.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t}setNavigatorEnabled(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.navigatorModule=e}setZoomModuleEnabled(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zoomModule=e}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(0!==this.axisZoomManagers.size)this.state.set(e,t),this.axisZoomManagers.forEach((i=>{i.updateZoom(e,null===t||void 0===t?void 0:t[i.getDirection()])})),this.applyChanges(e);else{const i=this.state.stateId();"initial"!==i&&i!==e||this.state.set(e,t)}}updateAxisZoom(e,t,i){var n;null===(n=this.axisZoomManagers.get(t))||void 0===n||n.updateZoom(e,i),this.applyChanges(e)}resetZoom(e){var t,i,n,o,s,r,a,l;this.autoScaleYAxis.manuallyAdjusted=!1;const d=this.getRestoredZoom();this.updateZoom(e,{x:{min:null!==(t=null===d||void 0===d||null===(i=d.x)||void 0===i?void 0:i.min)&&void 0!==t?t:0,max:null!==(n=null===d||void 0===d||null===(o=d.x)||void 0===o?void 0:o.max)&&void 0!==n?n:1},y:{min:null!==(s=null===d||void 0===d||null===(r=d.y)||void 0===r?void 0:r.min)&&void 0!==s?s:0,max:null!==(a=null===d||void 0===d||null===(l=d.y)||void 0===l?void 0:l.max)&&void 0!==a?a:1}})}resetAxisZoom(e,t){var i,n;const o=this.axisZoomManagers.get(t),s=null===o||void 0===o?void 0:o.getDirection();null!=s&&("y"===s&&(this.autoScaleYAxis.manuallyAdjusted=!1),this.updateAxisZoom(e,t,null!==(i=null===(n=this.getRestoredZoom())||void 0===n?void 0:n[s])&&void 0!==i?i:{min:0,max:1}))}setAxisManuallyAdjusted(e,t){var i;"y"===(null===(i=this.axisZoomManagers.get(t))||void 0===i?void 0:i.getDirection())&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,i){const n=this.getPrimaryAxis(t);n&&this.updateAxisZoom(e,n.id,i)}panToBBox(e,t,i){const n=this.getZoom();if(void 0===n||!n.x&&!n.y)return;if(!(t.width>0&&t.height>0&&Math.abs(i.width)<=Math.abs(t.width)&&Math.abs(i.height)<=Math.abs(t.height)))return void cM.warnOnce("cannot pan to target BBox - chart too small?");const o=kL(t,n,i);this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",o.x),this.updatePrimaryAxisZoom(e,"y",o.y)):this.updateZoom(e,o)}fireZoomPanStartEvent(e){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,(e=>Number(e)-i))}extendWith(e,t,i){const n=this.getPrimaryAxis(t);if(!n)return;const o=this.getDomainExtents(n);if(!o)return;const[,s]=o,r=i(s),a=this.rangeToRatio({start:r,end:s},t);a&&this.updateZoom(e,{[t]:a})}updateWith(e,t,i){const n=this.getPrimaryAxis(t);if(!n)return;const o=this.getDomainExtents(n);if(!o)return;let[s,r]=o;[s,r]=i(s,r);const a=this.rangeToRatio({start:s,end:r},t);a&&this.updateZoom(e,{[t]:a})}getZoom(){let e,t;if(this.axisZoomManagers.forEach((i=>{var n;if("x"===i.getDirection())null!==(n=e)&&void 0!==n||(e=i.getZoom());else if("y"===i.getDirection()){var o;null!==(o=t)&&void 0!==o||(t=i.getZoom())}})),e||t)return{x:e,y:t}}getAxisZoom(e){var t,i;return null!==(t=null===(i=this.axisZoomManagers.get(e))||void 0===i?void 0:i.getZoom())&&void 0!==t?t:{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}autoScaleYZoom(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{independentAxes:i,autoScaleYAxis:n}=this,o=this.getZoom();if(null==(null===o||void 0===o?void 0:o.x)||!n.enabled||n.manuallyAdjusted)return;const{padding:s}=n,r=i?this.primaryAxisZoom("y",o.x,{padding:s}):this.combinedAxisZoom("y",o.x,{padding:s});if(null!=r){if(i){const e=this.getPrimaryAxis("y"),t=null==e?void 0:this.axisZoomManagers.get(e.id);null===t||void 0===t||t.updateZoom("zoom-manager",r)}else for(const e of this.axisZoomManagers.values())"y"===e.getDirection()&&e.updateZoom("zoom-manager",r);t&&this.applyChanges(e)}}applyChanges(e){this.autoScaleYZoom(e,!1);if(!Array.from(this.axisZoomManagers.values(),(e=>e.applyChanges())).includes(!0))return;const t={};for(const[i,n]of this.axisZoomManagers.entries())t[i]=n.getZoom();this.listeners.dispatch("zoom-change",l(l({type:"zoom-change"},this.getZoom()),{},{axes:t,callerId:e}))}getRangeDirection(e,t){const i=this.getPrimaryAxis(t);if(!i||!pM.is(i.scale)&&!Zk.is(i.scale))return;const n=this.getDomainPixelExtents(i);if(!n)return;const[o,s]=n;let r,a;var l,d,c,h,u,p,g,m;o<=s?(r=null===(l=(d=i.scale).invert)||void 0===l?void 0:l.call(d,0),a=null===(c=(h=i.scale).invert)||void 0===c?void 0:c.call(h,o+(s-o)*e.max)):(r=null===(u=(p=i.scale).invert)||void 0===u?void 0:u.call(p,o-(o-s)*e.min),a=null===(g=(m=i.scale).invert)||void 0===g?void 0:g.call(m,0));return{start:r,end:a}}rangeToRatio(e,t){var i,n,o,s;const r=this.getPrimaryAxis(t);if(!r)return;const a=this.getDomainPixelExtents(r);if(!a)return;const[l,d]=a,c=null==e.start?l:null===(i=(n=r.scale).convert)||void 0===i?void 0:i.call(n,e.start),h=null==e.end?d:null===(o=(s=r.scale).convert)||void 0===o?void 0:o.call(s,e.end);if(!xS(c)||!xS(h))return;const u=d-l;return{min:Math.abs((c-l)/u),max:Math.abs((h-l)/u)}}getPrimaryAxis(e){var t;return null===(t=this.axes)||void 0===t?void 0:t.find((t=>t.direction===e))}getDomainExtents(e){var t,i;const n=null===(t=(i=e.scale).getDomain)||void 0===t?void 0:t.call(i),o=null===n||void 0===n?void 0:n.at(0),s=null===n||void 0===n?void 0:n.at(-1);if(null!=o&&null!=s)return[o,s]}getDomainPixelExtents(e){var t,i,n,o,s,r;const a=null===(t=(i=e.scale).getDomain)||void 0===t?void 0:t.call(i),l=null===(n=(o=e.scale).convert)||void 0===n?void 0:n.call(o,null===a||void 0===a?void 0:a.at(0)),d=null===(s=(r=e.scale).convert)||void 0===s?void 0:s.call(r,null===a||void 0===a?void 0:a.at(-1));if(xS(l)&&xS(d))return[l,d]}getDefinedZoom(){var e,t,i,n,o,s,r,a;const l=this.getZoom();return{x:{min:null!==(e=null===l||void 0===l||null===(t=l.x)||void 0===t?void 0:t.min)&&void 0!==e?e:0,max:null!==(i=null===l||void 0===l||null===(n=l.x)||void 0===n?void 0:n.max)&&void 0!==i?i:1},y:{min:null!==(o=null===l||void 0===l||null===(s=l.y)||void 0===s?void 0:s.min)&&void 0!==o?o:0,max:null!==(r=null===l||void 0===l||null===(a=l.y)||void 0===a?void 0:a.max)&&void 0!==r?r:1}}}zoomBounds(e,t,i,n){const o=e.scale,s=o.range;o.range=[0,1];const[r,a]=Pw(t.scale.domain);let l=1,d=!1,c=0,h=!1;for(const p of t.boundSeries){const[e,t]=p.getRange("y",[i.min,i.max]);let n=(e-r)/(a-r),o=(t-r)/(a-r);if([n,o]=Pw([n,o]),!Number.isFinite(n)||!Number.isFinite(o))continue;const{connectsToYAxis:s}=p;n<l&&(l=n,d=!s||e<0),o>c&&(c=o,h=!s||t>0)}o.range=s;const u=(c-l)*(1+((d?n:0)+(h?n:0)));if(!(u<=0||u>=1)){if(d&&h){const e=(c+l)/2;l=e-u/2,c=e+u/2}else!d&&h?c=l+u:d&&!h&&(l=c-u);return l<0?(c+=-l,l=0):c>1&&(l-=c-1,c=1),{min:l,max:c}}}primaryAxisZoom(e,t){let{padding:i=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="x"===e?"y":"x",o=this.getPrimaryAxis(n),s=this.getPrimaryAxis(e);if(null!=o&&null!=s)return this.zoomBounds(o,s,t,i)}combinedAxisZoom(e,t){let{padding:i=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="x"===e?"y":"x",o=new Map;for(const a of this.axes)if(a.direction===n)for(const e of a.boundSeries)o.set(e,a);let s=1,r=0;for(const a of this.axes)if(a.direction===e)for(const e of a.boundSeries){const n=o.get(e);if(null==n)continue;const l=this.zoomBounds(n,a,t,i);if(null==l)return;s=Math.min(s,l.min),r=Math.max(r,l.max)}if(!(s>r))return{min:s,max:r}}},EL=class{constructor(e){this.axis=e;const[t=0,i=1]=e.visibleRange;this.state=new lL({min:t,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(e,t){this.state.set(e,t)}getZoom(){return AA(this.state.stateValue())}hasChanges(){const e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){const e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}},RL=class{constructor(){this.labelData=new Map}updateLabels(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ww.zero;const n={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},o=new Set(e.map((e=>e.id)));for(const l of this.labelData.keys())o.has(l)||this.labelData.delete(l);for(const l of e){const e=l.getLabelData();e.every(fA)&&this.labelData.set(l.id,e)}const s=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const n=new Map,o=[],s=new Map([...e.entries()].map((e=>{let[t,i]=e;return[t,i.toSorted(((e,t)=>t.point.size-e.point.size))]}))),r=[...s.values()].flat();for(const[g,m]of s.entries()){var a;const e=[];if(null!==(a=m[0])&&void 0!==a&&a.label){for(let n=0,s=m.length;n<s;n++){var l,d;const s=m[n],{point:a,label:g,marker:v}=s,{text:f,width:y,height:b}=g,C=.5*a.size;let x=0,w=0;if(C>0&&null!=s.placement){const e=yA[s.placement];x=(.5*y+C+i)*e.x,w=(.5*b+C+i)*e.y}const S=a.x-.5*y+x-((null!==(l=null===v||void 0===v?void 0:v.center.x)&&void 0!==l?l:.5)-.5)*a.size,M=a.y-.5*b+w-((null!==(d=null===v||void 0===v?void 0:v.center.y)&&void 0!==d?d:.5)-.5)*a.size;if(t&&(u=M,p=b,!((h=S)+y<(c=t).x+c.width&&h>c.x&&u>c.y&&u+p<c.y+c.height)))continue;if(r.some((e=>{var t;return mA(e.point,null===(t=e.marker)||void 0===t?void 0:t.center,S,M,y,b)})))continue;if(o.some((e=>vA(e,S,M,y,b))))continue;const D={index:n,text:f,x:S,y:M,width:y,height:b,datum:s};e.push(D),o.push(D)}n.set(g,e)}}var c,h,u,p;return n}(this.labelData,n,5);for(const l of e){var r,a;null===(r=l.updatePlacedLabelData)||void 0===r||r.call(l,null!==(a=s.get(l.id))&&void 0!==a?a:[])}}},LL=class extends fE{constructor(e){super(),this.chartService=e,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter((e=>{let{hideInLegend:t,isFixed:i}=e;return!t&&!i})).map((e=>{let{enabled:t,seriesId:i,itemId:n,legendItemName:o}=e;return{visible:t,seriesId:i,itemId:n,legendItemName:o}}))}guardMemento(e){return null==e||cS(e)}restoreMemento(e,t,i){null===i||void 0===i||i.forEach((e=>{var t;const{seriesId:i,data:n}=null!==(t=this.getRestoredData(e))&&void 0!==t?t:{};i&&n&&this.updateData(i,n)})),this.update()}getRestoredData(e){const{seriesId:t,itemId:i,legendItemName:n,visible:o}=e;if(t){var s;const e=(null!==(s=this.legendDataMap.get(t))&&void 0!==s?s:[]).map((e=>{const n=e.seriesId===t&&(!i||e.itemId===i);return n&&e.isFixed&&this.warnFixed(e.seriesId,e.itemId),!e.isFixed&&n?l(l({},e),{},{enabled:o}):e}));return{seriesId:t,data:e}}if(null!=i||null!=n)for(const a of this.getData()){var r;if(null!=i&&a.itemId!==i||null!=n&&a.legendItemName!==n)continue;if(a.isFixed)return void this.warnFixed(a.seriesId,i);const e=(null!==(r=this.legendDataMap.get(a.seriesId))&&void 0!==r?r:[]).map((e=>e.itemId===i||e.legendItemName===n?l(l({},e),{},{enabled:o}):e));return{seriesId:a.seriesId,data:e}}}warnFixed(e,t){cM.warnOnce("The legend item with seriesId [".concat(e,"] and itemId [").concat(t,"] is not configurable, this series item cannot be toggled through the legend."))}update(e){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:null!==e&&void 0!==e?e:this.getData()})}updateData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem(e){let{enabled:t,seriesId:i,itemId:n,legendItemName:o}=e;if(o)return void this.getData().forEach((e=>{var i;const n=(null!==(i=this.legendDataMap.get(e.seriesId))&&void 0!==i?i:[]).map((e=>e.legendItemName===o?l(l({},e),{},{enabled:t}):e));this.updateData(e.seriesId,n)}));const s=this.getData(i),r=1===s.length,a=s.map((e=>null==n&&r||e.itemId===n?l(l({},e),{},{enabled:t}):e));this.updateData(i,a)}getData(e){var t;return e?null!==(t=this.legendDataMap.get(e))&&void 0!==t?t:[]:[...this.legendDataMap].reduce(((e,t)=>{let[i,n]=t;return e.concat(n)}),[])}getDatum(){let{seriesId:e,itemId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getData(e).find((e=>e.itemId===t))}getSeriesEnabled(e){const t=this.getData(e);if(t.length>0)return t.some((e=>e.enabled))}getItemEnabled(){var e,t;let{seriesId:i,itemId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null===(e=null===(t=this.getDatum({seriesId:i,itemId:n}))||void 0===t?void 0:t.enabled)||void 0===e||e}},PL=class{constructor(){this.groups={}}registerSeries(e){var t;let{internalId:i,seriesGrouping:n,visible:o,type:s}=e;var r;n&&(null!==(t=(r=this.groups)[s])&&void 0!==t||(r[s]={}),this.groups[s][i]={grouping:n,visible:o})}updateSeries(e){var t;let{internalId:i,seriesGrouping:n,visible:o,type:s}=e;if(!n)return;const r=null===(t=this.groups[s])||void 0===t?void 0:t[i];r&&(r.grouping=n,r.visible=o)}deregisterSeries(e){let{internalId:t,type:i}=e;this.groups[i]&&delete this.groups[i][t],this.groups[i]&&0===Object.keys(this.groups[i]).length&&delete this.groups[i]}getVisiblePeerGroupIndex(e){let{type:t,seriesGrouping:i,visible:n}=e;if(!i)return{visibleGroupCount:n?1:0,visibleSameStackCount:n?1:0,index:0};const o=new Set,s=new Set;for(const l of Object.values(null!==(r=this.groups[t])&&void 0!==r?r:{})){var r;l.visible&&(o.add(l.grouping.groupIndex),l.grouping.groupIndex===i.groupIndex&&s.add(l.grouping.stackIndex))}const a=Array.from(o);return a.sort(((e,t)=>e-t)),{visibleGroupCount:a.length,visibleSameStackCount:s.size,index:a.indexOf(i.groupIndex)}}},NL=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=4]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=6]="SCENE_RENDER",e[e.NONE=7]="NONE",e))(NL||{}),FL=class extends vE{constructor(e){super(),this.updateCallback=e}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.updateCallback(e,t)}dispatchUpdateComplete(e){this.dispatch("update-complete",{type:"update-complete",minRect:null===e||void 0===e?void 0:e.minRect,minVisibleRect:null===e||void 0===e?void 0:e.minVisibleRect})}dispatchPreDomUpdate(){this.dispatch("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(e){this.dispatch("pre-scene-render",l({type:"pre-scene-render"},e))}},OL=class{constructor(e,t){this.callbackCache=new jR,this.chartEventManager=new rL,this.highlightManager=new pL,this.layoutManager=new hE,this.localeManager=new kR,this.seriesStateManager=new PL,this.stateManager=new DE,this.zoomManager=new TL,this.seriesLabelLayoutManager=new RL,this.contextModules=[];const{scene:i,root:n,syncManager:o,container:s,updateCallback:r,updateMutex:a,pixelRatio:l,styleContainer:d,chartType:c}=t;this.chartService=e,this.syncManager=o,this.domManager=new tR(s,d);const h=this.domManager.addChild("canvas","scene-canvas",null===i||void 0===i?void 0:i.canvas.element);this.scene=null!==i&&void 0!==i?i:new WR({pixelRatio:l,canvasElement:h}),this.scene.setRoot(n),this.axisManager=new KR(n),this.legendManager=new LL(this.chartService),this.annotationManager=new UR(e.annotationRoot),this.chartTypeOriginator=new mE(e),this.cursorManager=new cL(this.domManager),this.interactionManager=new nL(e.keyboard,this.domManager),this.regionManager=new yL(this.interactionManager),this.keyNavManager=new gL(this.interactionManager,this.regionManager),this.contextMenuRegistry=new aL,this.gestureDetector=new uL(this.domManager),this.updateService=new FL(r),this.proxyInteractionService=new SR(this.localeManager,this.domManager),this.historyManager=new SE(this.keyNavManager),this.animationManager=new sL(this.interactionManager,a),this.dataService=new YR(this.animationManager),this.tooltipManager=new CL(this.domManager,e.tooltip),this.zoomManager.addLayoutListeners(this.layoutManager);for(const u of nE.byType("context")){if(!u.chartTypes.includes(c))continue;const e=u.moduleFactory(this);this.contextModules.push(e),this[u.contextKey]=e}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.keyNavManager.destroy(),this.regionManager.destroy(),this.interactionManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.contextModules.forEach((e=>e.destroy()))}},BL=class extends lD{constructor(){super(...arguments),this.range="tooltip"}};function GL(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function zL(e,t){if(null==e||null==t)return e===t;if(e.size!==t.size)return!1;for(const[i,n]of e){const e=t.get(i);if(null==e)return!1;if(!GL(n,e))return!1}return!0}function _L(e,t){const{props:i}=e,o=n(e,Vx),{props:s}=t;return IS(o,n(t,Hx))&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const o=e[i],{idsMap:s}=o,r=n(o,zx),a=t[i],{idsMap:l}=a;if(!IS(r,n(a,_x))||!zL(s,l))return!1}return!0}(i,s)}function VL(e,t,i,n){return t===e.data&&vM(i,e.ids)&&_L(n,e.opts)}mw([hD(ik(["tooltip","node"],"a range"))],BL.prototype,"range",2);var HL=class e{constructor(){this.domain=new Set}static is(t){return t instanceof e}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},WL=class e{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof e}static extendDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of e)"number"===typeof i&&(t[0]>i&&(t[0]=i),t[1]<i&&(t[1]=i));return t}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}},jL=class{constructor(e){const t=e.reduce(((e,t)=>Math.max(e,t.length)),0);let i=1<<32-Math.clz32(t);t===i/2&&(i>>>=1),this.maxLevelSize=i;const n=new Float64Array(2*(2*i-1)).fill(NaN);for(const o of e)for(let e=0;e<o.length;e+=1){const t=Number(o[e]),s=i+e-1,r=0+(2*s|0),a=1+(2*s|0),l=n[r],d=n[a];(!Number.isFinite(l)||t<l)&&(n[r]=t),(!Number.isFinite(d)||t>d)&&(n[a]=t)}for(let o=i/2|0;o>=1;o=o/2|0){const e=o-1|0,t=e+o|0;for(let i=0;i<o;i+=1){const o=e+i,s=t+2*i,r=s+1,a=n[0+(2*s|0)],l=n[0+(2*r|0)];n[0+(2*o|0)]=!Number.isFinite(l)||a<l?a:l;const d=n[1+(2*s|0)],c=n[1+(2*r|0)];n[1+(2*o|0)]=!Number.isFinite(c)||d>c?d:c}}this.buffer=n}computeRangeInto(e,t,i,n,o,s,r){const a=o+s-1;if(a<t||o>i)return r;if(o>=t&&a<=i){const t=e[0+(2*n|0)],i=e[1+(2*n|0)];Number.isFinite(t)&&(r[0]=Math.min(r[0],t)),Number.isFinite(i)&&(r[1]=Math.max(r[1],i))}else s>1&&(n=2*n|0,s=s/2|0,this.computeRangeInto(e,t,i,n+1|0,o,s,r),this.computeRangeInto(e,t,i,n+2|0,o+s,s,r));return r}rangeBetween(e,t){const{maxLevelSize:i,buffer:n}=this,o=[1/0,-1/0];return this.computeRangeInto(n,e,t,0,0,i,o),o}get range(){const{buffer:e}=this;return[e[0],e[1]]}},UL=Symbol("domain-ranges");function KL(e){return e.map((e=>vS(e)?JSON.stringify(e):e)).join("-")}function YL(e){const t=1e4;return Number.isInteger(e)?e:Math.abs(e)>t?Math.trunc(e):Math.round(e*t)/t}function ZL(e){const t=null===e||void 0===e?void 0:e.map(Number);return null!==t&&void 0!==t&&t.every(Number.isFinite)?t:[]}function XL(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.get(e.id))&&void 0!==i?i:0}var qL=Symbol("invalid");function QL(e,t){const i=[];for(let n=0;n<e;n+=1)i[n]=t;return i}function JL(e,t){const i=[];for(const n of e){const e=n[t];if(null==e)return;i.push(e)}return i}function $L(e){const t=[];let i,n=0;const o=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;i=o.exec(e);){if(i.index!==n)return;n=i.index+i[0].length;const e=i[1].trim();if(e.startsWith("."))t.push(e.slice(1).trim());else if(e.startsWith("[")){const i=e.slice(1,-1).trim();i.startsWith("'")?t.push(i.slice(1,-1).replace(/(?<!\\)\\'/g,"'")):i.startsWith('"')?t.push(i.slice(1,-1).replace(/(?<!\\)\\"/g,'"')):t.push(i)}else t.push(e)}if(n===e.length)return t}function eP(e){return t=>{let i=t;for(const n of e)i=i[n];return i}}var tP=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standalone",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.debug=RI.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let n=!0;for(const s of e.props){if("key"===s.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===s.type&&n&&(n=!1)}const o=e=>{let{matchGroupIds:t=[]}=e;for(const i of t)if(this.values.every((e=>e.groupId!==i)))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups (".concat(i,")."))};for(const s of e.props)switch(s.type){case"key":this.keys.push(l(l({},s),{},{index:this.keys.length,missing:new Map}));break;case"value":if(null==s.property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: ".concat(JSON.stringify(s)));this.values.push(l(l({},s),{},{index:this.values.length,missing:new Map}));break;case"aggregate":o(s),this.aggregates.push(l(l({},s),{},{index:this.aggregates.length}));break;case"group-value-processor":o(s),this.groupProcessors.push(l(l({},s),{},{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(l(l({},s),{},{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(l(l({},s),{},{index:this.reducers.length}));break;case"processor":this.processors.push(l(l({},s),{},{index:this.processors.length}))}}resolveProcessedDataDefById(e,t){var i;const n=null===(i=this.scopeCache.get(e.id))||void 0===i?void 0:i.get(t);if(!n)throw new Error("AG Charts - didn't find property definition for [".concat(t,", ").concat(e.id,"]"));return{index:n.index,def:n}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveProcessedDataDefsByIds(e,t){return t.map((t=>[t,this.resolveProcessedDataDefById(e,t)]))}resolveKeysById(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),o=i.keys[n];if(null==o)throw new Error("AG Charts - didn't find keys for [".concat(t,", ").concat(e.id,"]"));return o}resolveColumnById(e,t,i){var n;const o=this.resolveProcessedDataIndexById(e,t),s=null===(n=i.columns)||void 0===n?void 0:n[o];if(null==s)throw new Error("AG Charts - didn't find column for [".concat(t,", ").concat(e.id,"]"));return s}resolveProcessedDataDefsValues(e,t){let{keys:i,values:n}=t;const o={};for(const[s,{index:r,def:a}]of e){const e="key"===a.type?i:n;o[s]=e[r]}return o}getDomain(e,t,i,n){var o;const s=this.getDomainsByType(null!==i&&void 0!==i?i:"value",n);return null!==(o=null===s||void 0===s?void 0:s[this.resolveProcessedDataIndexById(e,t)])&&void 0!==o?o:[]}getDomainBetweenRange(e,t,i,n){let[o,s]=i;const r=t.map((t=>this.resolveProcessedDataIndexById(e,t))),a=r.join(":"),l=n[UL];let d=l.get(a);if(null==d){const e=r.map((e=>n.columns[e]));d=new jL(e),l.set(a,d)}return d.rangeBetween(o,s)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e,t){const{opts:{groupByKeys:i,groupByFn:n},aggregates:o,groupProcessors:s,reducers:r,processors:a,propertyProcessors:l}=this,d=performance.now();if(i&&0===this.keys.length)return;let c=this.extractData(e,t);i?c=this.groupData(c):n&&(c=this.groupData(c,n(c))),s.length>0&&this.postProcessGroups(c),o.length>0&&this.aggregateData(c),l.length>0&&this.postProcessProperties(c),r.length>0&&this.reduceData(c),a.length>0&&this.postProcessData(c),this.warnDataMissingProperties(e);const h=performance.now();return c.time=h-d,this.debug.check()&&function(e){var t,i;const n=(e,t)=>{t.length>0&&(cM.log("DataModel.processData() - ".concat(e)),cM.table(t))};cM.log("DataModel.processData() - processedData",e),n("Key Domains",e.domain.keys),n("Group Domains",null!==(t=e.domain.groups)&&void 0!==t?t:[]),n("Value Domains",e.domain.values),n("Aggregate Domains",null!==(i=e.domain.aggValues)&&void 0!==i?i:[])}(c),this.processScopeCache(),c}warnDataMissingProperties(e){if(0!==e.length)for(const t of Mw(this.keys,this.values))for(const[i,n]of t.missing){if(n<e.length)continue;const o=null==i?"":" for ".concat(i);cM.warnOnce("the key '".concat(t.property,"' was not found in any data element").concat(o,"."))}}processScopeCache(){this.scopeCache.clear();for(const t of Mw(this.keys,this.values,this.aggregates))if(t.idsMap)for(const[i,n]of t.idsMap)for(const o of n){var e;if(this.scopeCache.has(i)){if(null!==(e=this.scopeCache.get(i))&&void 0!==e&&e.has(o))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(i).set(o,t)}else this.scopeCache.set(i,new Map([[o,t]]))}}valueGroupIdxLookup(e){let{matchGroupIds:t}=e;const i=[];for(const[n,o]of this.values.entries())(!t||o.groupId&&t.includes(o.groupId))&&i.push(n);return i}valueIdxLookup(e,t){const i=null==e||0===e.length,n="string"===typeof t?t:t.id,o=this.values.reduce(((t,o,s)=>((null==o.scopes||i&&!o.scopes.length||o.scopes.some((t=>null===e||void 0===e?void 0:e.includes(t))))&&(o.property===n||o.id===n||(t=>{if(t.idsMap)for(const[i,o]of t.idsMap)if(null!==e&&void 0!==e&&e.includes(i)&&o.has(n))return!0;return!1})(o))&&t.push(s),t)),[]);if(0===o.length)throw new Error("AG Charts - configuration error, unknown property ".concat(JSON.stringify(t)," in scope(s) ").concat(JSON.stringify(e)));return o}extractData(e,t){const{dataDomain:i,processValue:n,scopes:o,allScopesHaveSameDefs:s}=this.initDataDomainProcessor(),r=new Map(null===t||void 0===t?void 0:t.map((e=>[e.id,e]))),{keys:a,values:l}=this,d=e.length;let c,h,u=0;const p=a.map((t=>{const{invalidValue:i}=t;return e.map(((e,o)=>{var s,r;const a=n(t,e,o);return a!==qL?a:(null!==(s=c)&&void 0!==s||(c=QL(d,!1)),c[o]=!0,null!==(r=h)&&void 0!==r||(h=QL(d,!1)),h[o]=!0,i)}))}));let g;const m=(e,t)=>{var i,n;null!==(i=g)&&void 0!==i||(g=new Map);let o=g.get(e);null==o&&(o=QL(d,!1),g.set(e,o)),o[t]=!0,null!==(n=h)&&void 0!==n||(h=QL(d,!1)),h[t]=!0},v=[];l.forEach((t=>{const{invalidValue:i}=t,s=v.length>0?v[v.length-1]:void 0,a=e.map(((e,a)=>{var l;const d=!0===(null===(l=c)||void 0===l?void 0:l[a]);let h=null===s||void 0===s?void 0:s[a];for(const i of null!==(p=t.scopes)&&void 0!==p?p:o){var p,g;const o=r.get(i),s=null!==(g=null===o||void 0===o?void 0:o.data[a])&&void 0!==g?g:e;h=n(t,s,a,h,i),(d||h===qL)&&m(i,a)}return d?i:h===qL?(u+=1,i):h}));v.push(a)}));const f=e=>{const t=i.get(e),n=t.getDomain();return WL.is(t)&&n[0]>n[1]?[]:n};return{type:"ungrouped",input:{count:e.length},rawData:e,rawDataSources:null!=t?new Map(t.map((e=>[e.id,e.data]))):void 0,aggregation:void 0,keys:p,columns:v,invalidKeys:c,invalidDataScopes:g,invalidData:h,domain:{keys:a.map(f),values:l.map(f)},defs:{allScopesHaveSameDefs:s,keys:a,values:l},partialValidDataCount:u,time:0,[UL]:new Map}}groupData(e,t){const i=new Map,{rawData:n,keys:o,invalidKeys:s,invalidDataScopes:r,invalidData:a}=e;for(let l=0;l<n.length;l+=1){var d;const e=n[l],c=JL(o,l);if(null==c||0===c.length)continue;const h=null!==(d=null===t||void 0===t?void 0:t({index:l,keys:c,values:void 0,aggValues:void 0,datum:e,validScopes:void 0}))&&void 0!==d?d:c,u=KL(h);if(!0===(null===s||void 0===s?void 0:s[l]))continue;let p;if(null!=r&&!0===(null===a||void 0===a?void 0:a[l])&&(p=new Set,r.forEach(((e,t)=>{!1===e[l]&&p.add(t)})),0===p.size))continue;const g=i.get(u);if(null!=g){if(g.datumIndices.push(l),null!=p&&null!=g.validScopes)for(const t of g.validScopes)p.has(t)||g.validScopes.delete(t)}else i.set(u,{keys:h,datumIndices:[l],validScopes:p})}const c=[],h=[];for(const{keys:l,datumIndices:u,validScopes:p}of i.values())0!==(null===p||void 0===p?void 0:p.size)&&(c.push(l),h.push({datumIndices:u,keys:l,aggregation:[],validScopes:p}));return l(l({},e),{},{type:"grouped",domain:l(l({},e.domain),{},{groups:c}),groups:h})}aggregateData(e){const t=this.aggregates.map((()=>[1/0,-1/0]));e.domain.aggValues=t;const{keys:i,columns:n,rawData:o}=e;if("ungrouped"===e.type){const s=o.map(((e,o)=>{const s=[];for(const[u,p]of this.aggregates.entries()){var r,a,l,d;const e=this.valueGroupIdxLookup(p);let g=null!==(r=null===(a=p.groupAggregateFunction)||void 0===a?void 0:a.call(p))&&void 0!==r?r:[1/0,-1/0];const m=e.map((e=>n[e][o])),v=JL(i,o),f=null!=v?p.aggregateFunction(m,v):void 0;var c,h;if(f)g=null!==(c=null===(h=p.groupAggregateFunction)||void 0===h?void 0:h.call(p,f,g))&&void 0!==c?c:WL.extendDomain(f,g);const y=(null!==(l=null===(d=p.finalFunction)||void 0===d?void 0:d.call(p,g))&&void 0!==l?l:g).map((e=>YL(e)));s[u]=y,WL.extendDomain(y,t[u])}return s}));e.aggregation=s}else for(const[u,p]of this.aggregates.entries()){const i=this.valueGroupIdxLookup(p);for(const o of e.groups){var s,r,a,l,d;if(null!==(s=o.aggregation)&&void 0!==s||(o.aggregation=[]),null!=o.validScopes)continue;const e=o.keys;let g=null!==(r=null===(a=p.groupAggregateFunction)||void 0===a?void 0:a.call(p))&&void 0!==r?r:[1/0,-1/0];for(const t of o.datumIndices){const o=i.map((e=>n[e][t])),s=p.aggregateFunction(o,e);var c,h;if(s)g=null!==(c=null===(h=p.groupAggregateFunction)||void 0===h?void 0:h.call(p,s,g))&&void 0!==c?c:WL.extendDomain(s,g)}const m=(null!==(l=null===(d=p.finalFunction)||void 0===d?void 0:d.call(p,g))&&void 0!==l?l:g).map((e=>YL(e)));o.aggregation[u]=m,WL.extendDomain(m,t[u])}}}postProcessGroups(e){const{groupProcessors:t}=this,{rawData:i,columns:n,invalidData:o}=e;for(const s of t){const t=this.valueGroupIdxLookup(s),r=s.adjust()();for(let e=0;e<i.length;e+=1)!0!==(null===o||void 0===o?void 0:o[e])&&r(n,t,e);for(const s of t){const t="category"===this.values[s].valueType,r=n[s],a=t?new HL:new WL;for(let e=0;e<i.length;e+=1)!0!==(null===o||void 0===o?void 0:o[e])&&a.extend(r[e]);e.domain.values[s]=a.getDomain()}}}postProcessProperties(e){for(const{adjust:t,property:i,scopes:n}of this.propertyProcessors)for(const o of this.valueIdxLookup(n,i))t()(e,o)}reduceData(e){var t;null!==(t=e.reduced)&&void 0!==t||(e.reduced={});for(const n of this.reducers){const t=n.reducer();let o=n.initialValue;const{rawData:s,keys:r,columns:a}=e;if("grouped"===e.type)for(const l of e.groups){var i;(!l.validScopes||null!==(i=n.scopes)&&void 0!==i&&i.some((e=>{var t;return null===(t=l.validScopes)||void 0===t?void 0:t.has(e)})))&&(o=t(o,{index:l.datumIndices,keys:l.datumIndices.flatMap((e=>r.map((t=>t[e])))),values:l.datumIndices.map((e=>a[e])),datum:l.datumIndices.map((e=>s[e]))}))}else for(let e=0;e<s.length;e+=1)o=t(o,{index:[e],keys:r.map((t=>t[e])),values:[a[e]],datum:[s[e]]});e.reduced[n.property]=o}}postProcessData(e){var t;null!==(t=e.reduced)&&void 0!==t||(e.reduced={});for(const i of this.processors)e.reduced[i.property]=i.calculate(e,e.reduced[i.property])}initDataDomainProcessor(){const{keys:e,values:t}=this,i=new Set;for(const l of t)if(l.scopes)for(const e of l.scopes)i.add(e);const n=new Map,o=new Map;let s=!0;const r=()=>{for(const r of Mw(e,t)){var o;if("category"===r.valueType)n.set(r,new HL);else n.set(r,new WL),s&&(s=(null!==(o=r.scopes)&&void 0!==o?o:[]).length===i.size)}};r();const a=this.buildAccessors(Mw(e,t));return{dataDomain:n,processValue:(e,t,i,s,l)=>{var d,c;let h,u;if(a.has(e.property)){try{u=a.get(e.property)(t)}catch(m){}h=null!=u}else h=e.property in t,u=h?t[e.property]:e.missingValue;if(null!=e.forceValue){u=h&&Bw(u)?-1*e.forceValue:e.forceValue,h=!0}if(!h&&!("missingValue"in e)){var p;const t=null!==(p=e.missing.get(l))&&void 0!==p?p:0;e.missing.set(l,t+1)}if(n.has(e)||r(),h&&!1===(null===(d=e.validation)||void 0===d?void 0:d.call(e,u,t,i))){if(!("invalidValue"in e))return"integrated"!==this.mode&&cM.warnOnce("invalid value of type [".concat(typeof u,"] for [").concat(e.scopes," / ").concat(e.id,"] ignored:"),"[".concat(u,"]")),qL;u=e.invalidValue}var g;e.processor&&(o.has(e)||o.set(e,e.processor()),u=null===(g=o.get(e))||void 0===g?void 0:g(u,s===qL?void 0:s));return null===(c=n.get(e))||void 0===c||c.extend(u),u},initDataDomain:r,scopes:i,allScopesHaveSameDefs:s}}buildAccessors(e){const t=new Map;if(this.suppressFieldDotNotation)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const e=$L(i.property);if(null==e){cM.warnOnce("Invalid property path [%s]",i.property);continue}const n=eP(e);t.set(i.property,n)}return t}};var iP=class e{constructor(e,t){this.mode=e,this.suppressFieldDotNotation=t,this.debug=RI.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(e,t,i){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((n,o)=>{this.requested.push({id:e,opts:i,data:t,resolve:n,reject:o})}))}execute(e){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);const i=this.mergeRequested(t);this.debug("DataController.execute() - merged",i),this.debug.check()&&(fI().processedData=[]);const n=[];for(const{data:r,ids:a,opts:l,resolves:d,rejects:c}of i){var o;const i=null===e||void 0===e?void 0:e.find((e=>VL(e,r,a,l)));let h,u;if(null==i)try{h=new tP(l,this.mode,this.suppressFieldDotNotation),u=h.processData(r,t)}catch(s){c.forEach((e=>e(s)));continue}else({dataModel:h,processedData:u}=i);n.push({opts:l,data:r,ids:a,dataModel:h,processedData:u}),this.debug.check()&&fI("processedData").push(u),0===(null===(o=u)||void 0===o?void 0:o.partialValidDataCount)?d.forEach((e=>e({dataModel:h,processedData:u}))):u?this.splitResult(h,u,a,d):c.forEach((e=>e(new Error("AG Charts - no processed data generated"))))}return n}validateRequests(e){const t=[];for(const[i,n]of e.entries())i>0&&n.data.length!==e[0].data.length&&!1===n.opts.groupByData?n.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):t.push(n);return t}mergeRequested(t){const i=[];for(const n of t){const t=i.find(e.groupMatch(n));t?t.push(n):i.push([n])}return i.map(e.mergeRequests)}splitResult(e,t,i,n){for(let o=0;o<i.length;o++){(0,n[o])({dataModel:e,processedData:t})}}static groupMatch(e){let{data:t,opts:i}=e;function n(e){return e.filter((e=>"key"===e.type)).map((e=>e.property)).join(";")}const{groupByData:o,groupByKeys:s=!1,groupByFn:r,props:a}=i,l=n(a);return e=>{var i;let[a]=e;return(!1===o||a.data===t)&&(null!==(i=a.opts.groupByKeys)&&void 0!==i&&i)===s&&a.opts.groupByFn===r&&n(a.opts.props)===l}}static mergeRequests(t){return t.reduce(((t,i)=>{var o,s;let{id:r,data:a,resolve:d,reject:c,opts:{props:h}}=i,u=n(i.opts,Wx);t.ids.push(r),t.rejects.push(c),t.resolves.push(d),null!==(o=t.data)&&void 0!==o||(t.data=a),null!==(s=t.opts)&&void 0!==s||(t.opts=l(l({},u),{},{props:[]}));for(const n of h){var p,g,m;const i=l(l({},n),{},{scopes:[r]});e.createIdsMap(r,i);const o=t.opts.props.find((t=>t.type===i.type&&e.deepEqual(t,i)));o?(null!==(p=o.scopes)&&void 0!==p||(o.scopes=[]),o.scopes.push(...null!==(g=i.scopes)&&void 0!==g?g:[]),"key"!==o.type&&"value"!==o.type||null===(m=i.idsMap)||void 0===m||!m.size||e.mergeIdsMap(i.idsMap,o.idsMap)):t.opts.props.push(i)}return t}),{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(e,t){for(const[i,n]of e){const e=t.get(i);if(null==e)t.set(i,new Set(n));else for(const t of n)e.add(t)}}static createIdsMap(e,t){var i;null!=t.id&&(null!==(i=t.idsMap)&&void 0!==i||(t.idsMap=new Map),t.idsMap.has(e)?t.idsMap.get(e).add(t.id):t.idsMap.set(e,new Set([t.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;let n,o;if(Array.isArray(t)){if(o=t.length,o!==i.length)return!1;for(n=o-1;n>=0;n--)if(!e.deepEqual(t[n],i[n]))return!1;return!0}const s=Object.keys(t);if(o=s.length,o!==Object.keys(i).length)return!1;for(n=o-1;n>=0;n--){const o=s[n];if(!e.skipKeys.has(o)&&(!Object.hasOwn(i,o)||!e.deepEqual(t[o],i[o])))return!1}return!0}return!1}};iP.skipKeys=new Set(["id","idsMap","type","scopes"]);var nP=iP,oP=new class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate),t.hidden&&this.hidden.add(e)}create(e,t){const i=this.axesMap.get(e);if(i)return i(t);throw new Error("AG Charts - unknown axis type: ".concat(e))}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter((e=>!this.hidden.has(e)))}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},sP=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function rP(e){var t;return null===(t=sP.find((t=>"series"===t.type&&t.identifier===e)))||void 0===t?void 0:t.chartTypes}function aP(e){if(!function(e){return"enterprise"===e.packageType}(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=sP.find((t=>t.type===e.type&&(!("optionsKey"in t)||!("optionsKey"in e)||t.optionsKey===e.optionsKey)&&(!("contextKey"in t)||!("contextKey"in e)||t.contextKey===e.contextKey)&&t.identifier===e.identifier&&e.chartTypes.every((e=>t.chartTypes.includes(e)))));var i;t&&(null!==(i=t.useCount)&&void 0!==i||(t.useCount=0),t.useCount++);return null!=t}var lP=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,t){let{optionsKey:i,moduleFactory:n,themeTemplate:o}=t;this.legendMap.set(e,{optionsKey:i,moduleFactory:n}),this.themeTemplates.set(i,o)}create(e,t){var i;const n=null===(i=this.legendMap.get(e))||void 0===i?void 0:i.moduleFactory;if(n)return n(t);throw new Error("AG Charts - unknown legend type: ".concat(e))}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce(((e,t)=>{let[i,n]=t;return e[i]=n.optionsKey,e}),{})}},dP=class extends Map{get(e){var t;return null!==(t=super.get(e))&&void 0!==t?t:"unknown"}isCartesian(e){return"cartesian"===this.get(e)}isPolar(e){return"polar"===this.get(e)}isHierarchy(e){return"hierarchy"===this.get(e)}isTopology(e){return"topology"===this.get(e)}isFlowProportion(e){return"flow-proportion"===this.get(e)}isStandalone(e){return"standalone"===this.get(e)}isGauge(e){return"gauge"===this.get(e)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter((e=>this.isCartesian(e)))}get polarTypes(){return this.seriesTypes.filter((e=>this.isPolar(e)))}get hierarchyTypes(){return this.seriesTypes.filter((e=>this.isHierarchy(e)))}get topologyTypes(){return this.seriesTypes.filter((e=>this.isTopology(e)))}get flowProportionTypes(){return this.seriesTypes.filter((e=>this.isFlowProportion(e)))}get standaloneTypes(){return this.seriesTypes.filter((e=>this.isStandalone(e)))}get gaugeTypes(){return this.seriesTypes.filter((e=>this.isGauge(e)))}},cP=class extends Map{set(e,t){return super.set(e,ES(t,this.get(e)))}},hP=new dP,uP=new dP,pP=new cP,gP=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,t){let{chartTypes:[i],moduleFactory:n,tooltipDefaults:o,defaultAxes:s,themeTemplate:r,paletteFactory:a,solo:l,stackable:d,groupable:c,stackedByDefault:h,hidden:u}=t;this.setThemeTemplate(e,r),this.seriesMap.set(e,{moduleFactory:n,tooltipDefaults:o,defaultAxes:s,paletteFactory:a,solo:l,stackable:d,groupable:c,stackedByDefault:h}),hP.set(e,i),u||uP.set(e,i)}create(e,t){var i;const n=null===(i=this.seriesMap.get(e))||void 0===i?void 0:i.moduleFactory;if(n)return n(t);throw new Error("AG Charts - unknown series type: ".concat(e))}cloneDefaultAxes(e,t){var i;const n=null===(i=this.seriesMap.get(e))||void 0===i?void 0:i.defaultAxes;if(null==n)return null;return{axes:AA("function"===typeof n?n(t):n)}}setThemeTemplate(e,t){const i=this.themeTemplates.get(e);this.themeTemplates.set(e,ES(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}getPaletteFactory(e){var t;return null===(t=this.seriesMap.get(e))||void 0===t?void 0:t.paletteFactory}getTooltipDefauls(e){var t;return null===(t=this.seriesMap.get(e))||void 0===t?void 0:t.tooltipDefaults}isSolo(e){var t,i;return null!==(t=null===(i=this.seriesMap.get(e))||void 0===i?void 0:i.solo)&&void 0!==t&&t}isGroupable(e){var t,i;return null!==(t=null===(i=this.seriesMap.get(e))||void 0===i?void 0:i.groupable)&&void 0!==t&&t}isStackable(e){var t,i;return null!==(t=null===(i=this.seriesMap.get(e))||void 0===i?void 0:i.stackable)&&void 0!==t&&t}isStackedByDefault(e){var t,i;return null!==(t=null===(i=this.seriesMap.get(e))||void 0===i?void 0:i.stackedByDefault)&&void 0!==t&&t}},mP=class e extends fE{constructor(e){super(),this.chart=e}subscribe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP,i=this.get(t);return i||(i=new Set,e.chartsGroups.set(t,i)),i.add(this.chart),this}unsubscribe(){var t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return null===(t=this.get(i))||void 0===t||t.delete(this.chart),this}getChart(){return this.chart}getGroup(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;const i=this.get(t);return i?Array.from(i):[]}getGroupSiblings(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.getGroup(t).filter((e=>e!==this.chart))}get(t){return e.chartsGroups.get(t)}};mP.chartsGroups=new Map,mP.DEFAULT_GROUP=Symbol("sync-group-default");var vP=mP,fP=class extends lD{constructor(){super(...arguments),this.enabled=!1}};mw([hD(fD)],fP.prototype,"enabled",2),mw([hD(CD)],fP.prototype,"tabIndex",2);var yP=["top","right","bottom","left"];var bP=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function CP(e){var t,i;const{series:n}=e;if(n)return null!==(t=null===(i=n[0])||void 0===i?void 0:i.type)&&void 0!==t?t:"line"}function xP(e){const t=CP(e);return null!=t&&(hP.isCartesian(t)||function(e){var t;return"cartesian"===(null===(t=rP(e))||void 0===t?void 0:t.find((e=>"cartesian"===e)))}(t))}function wP(e){const t=CP(e);return null!=t&&(hP.isPolar(t)||function(e){var t;return"polar"===(null===(t=rP(e))||void 0===t?void 0:t.find((e=>"polar"===e)))}(t))}function SP(e){const t=CP(e);return null!=t&&(hP.isHierarchy(t)||function(e){var t;return"hierarchy"===(null===(t=rP(e))||void 0===t?void 0:t.find((e=>"hierarchy"===e)))}(t))}function MP(e){const t=CP(e);return null!=t&&(hP.isTopology(t)||function(e){var t;return"topology"===(null===(t=rP(e))||void 0===t?void 0:t.find((e=>"topology"===e)))}(t))}function DP(e){const t=CP(e);return null!=t&&(hP.isFlowProportion(t)||function(e){var t;return"flow-proportion"===(null===(t=rP(e))||void 0===t?void 0:t.find((e=>"flow-proportion"===e)))}(t))}function kP(e){const t=CP(e);return null!=t&&(hP.isStandalone(t)||function(e){var t;return"standalone"===(null===(t=rP(e))||void 0===t?void 0:t.find((e=>"standalone"===e)))}(t))}function IP(e){const t=CP(e);return null!=t&&(hP.isGauge(t)||function(e){var t;return"gauge"===(null===(t=rP(e))||void 0===t?void 0:t.find((e=>"gauge"===e)))}(t))}var AP=class extends ck{applyOptions(e){for(const t of this.moduleMap.values())t.module.optionsKey in e&&cD(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(const{module:e,moduleInstance:t}of this.moduleMap.values())"legend"===e.type&&(yield{legendType:e.identifier,legend:t})}},TP="ag-charts-overlay",EP="ag-charts-dark-overlay",RP=class extends lD{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){var t;return e.t(null!==(t=this.text)&&void 0!==t?t:this.defaultMessageId)}getElement(e,t,i){var n;if(null===(n=this.content)||void 0===n||n.remove(),this.focusBox=i,this.renderer){const e=this.renderer();if(e instanceof HTMLElement)this.content=e;else{const t=yI("div");t.innerHTML=e,this.content=t.firstElementChild}}else{const i=yI("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});i.innerText=this.getText(t),this.content=i,null===e||void 0===e||e.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){i.style.opacity="1"}})}return this.content}removeElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{var e;return null===(e=this.content)||void 0===e?void 0:e.remove()},t=arguments.length>1?arguments[1]:void 0;if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){null===e||void 0===e||e()}})}else null===e||void 0===e||e();this.content=void 0,this.focusBox=void 0}}};mw([hD(fD)],RP.prototype,"enabled",2),mw([hD(bD,{optional:!0})],RP.prototype,"text",2),mw([hD(yD,{optional:!0})],RP.prototype,"renderer",2);var LP=class extends lD{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new RP("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new RP("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new RP("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new RP("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(void 0!==t.focusBox)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};mw([hD(fD)],LP.prototype,"darkTheme",2),mw([hD(mD)],LP.prototype,"loading",2),mw([hD(mD)],LP.prototype,"noData",2),mw([hD(mD)],LP.prototype,"noVisibleSeries",2),mw([hD(mD)],LP.prototype,"unsupportedBrowser",2);var PP=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(PP||{}),NP=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(NP||{}),FP=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(FP||{}),OP=class{constructor(e,t,i,n){let{datum:o}=i;this.type=e,this.event=t,this.datum=o,this.seriesId=n.id}},BP=class{constructor(e,t,i){this.series=e,this.seriesGrouping=t,this.oldGrouping=i,this.type="groupingChanged"}},GP=class extends rE{constructor(e){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=OP,this.internalId=ww(this),this.contentGroup=new pI({name:"".concat(this.internalId,"-content"),zIndex:1}),this.highlightGroup=new pI({name:"".concat(this.internalId,"-highlight"),zIndex:1}),this.annotationGroup=new pI({name:"".concat(this.internalId,"-annotation")}),this.labelGroup=new pI({name:"".concat(this.internalId,"-series-labels")}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new ck,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new vE,this._pickNodeCache=new rA;const{moduleCtx:t,pickModes:i,directionKeys:n={},directionNames:o={},canHaveAxes:s=!1,usesPlacedLabels:r=!1}=e;this.ctx=t,this.directionKeys=n,this.directionNames=o,this.canHaveAxes=s,this.usesPlacedLabels=r,this.highlightGroup=new pI({name:"".concat(this.internalId,"-highlight")}),this.highlightNode=this.highlightGroup.appendChild(new cI({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new cI({name:"highlightLabel",zIndex:10})),this.pickModes=i}get pickModeAxis(){return"main"}get id(){var e,t;return null!==(e=null===(t=this.properties)||void 0===t?void 0:t.id)&&void 0!==e?e:this.internalId}get type(){var e;return null!==(e=this.constructor.type)&&void 0!==e?e:""}get data(){var e;return null!==(e=this._data)&&void 0!==e?e:this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem({enabled:e,seriesId:this.id}),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){var e;return null!==(e=this.ctx.legendManager.getSeriesEnabled(this.id))&&void 0!==e?e:this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){var e,t;return null!==(e=null===(t=this.properties.tooltip)||void 0===t?void 0:t.enabled)&&void 0!==e&&e}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:n,visible:o}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:n,visible:o,seriesGrouping:t}),this.fireEvent(new BP(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,i){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),null===i||void 0===i||i.appendChild(this.annotationGroup)}detachSeries(e,t,i){null===e||void 0===e||e.removeChild(this.contentGroup),t.removeChild(this.highlightGroup),t.removeChild(this.labelGroup),null===i||void 0===i||i.removeChild(this.annotationGroup)}setSeriesIndex(e){return e!==this._declarationOrder&&(this._declarationOrder=e,this.contentGroup.zIndex=[1,e,0],this.highlightGroup.zIndex=[1,e,1],this.labelGroup.zIndex=[1,e,2],this.annotationGroup.zIndex=e,!0)}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.destroyFns.forEach((e=>e())),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){const i=this.resolveKeyDirection(e),n=null===t||void 0===t?void 0:t[i],o=[];if(!n)return o;const s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)Array.isArray(n)?s(...n):"object"===typeof n?s(...Object.values(n)):o.push(n)};return s(...n.map((e=>this.properties[e]))),o}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){var t;return null!==(t=this.directionKeys[this.resolveKeyDirection(e)])&&void 0!==t?t:[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapModules((t=>t.getDomain(e))).flat();return 0!==i.length?t.concat(i):t}getRange(e,t){return this.getSeriesRange(e,t)}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:t=!0}=this.properties.highlightStyle.series;if(!t||1===e)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return e}}getStrokeWidth(e){const{strokeWidth:t,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===t)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){var e;const t=null===(e=this.ctx.highlightManager)||void 0===e||null===(e=e.getActiveHighlight())||void 0===e?void 0:e.series;return null==t?0:t!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules((e=>e.getTooltipParams())).reduce(((e,t)=>Object.assign(e,t)),{})}pickNode(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pickModes:n,pickModeAxis:o,visible:s,contentGroup:r}=this;if(!s||!r.visible)return;if("highlight"===t&&!this.properties.highlight.enabled)return;if("highlight-tooltip"===t&&!this.properties.highlight.enabled)return;let a=1/0;if("tooltip"===t||"highlight-tooltip"===t){const{tooltip:e}=this.properties;a="number"===typeof e.range?e.range:1/0,i||(i="exact"===e.range)}else if("event"===t||"context-menu"===t){const{nodeClickRange:e}=this.properties;a="number"===typeof e?e:1/0,i||(i="exact"===e)}const l=n.filter((e=>!i||0===e)),{x:d,y:c}=e,h=JSON.stringify({x:d,y:c,maxDistance:a,selectedPickModes:l});if(this._pickNodeCache.has(h))return this._pickNodeCache.get(h);for(const u of l){let t;switch(u){case 0:t=this.pickNodeExactShape(e);break;case 1:t=this.pickNodeClosestDatum(e);break;case 2:t=null!=o?this.pickNodeMainAxisFirst(e,"main-category"===o):void 0}if(t&&t.distance<=a)return this._pickNodeCache.set(h,{pickMode:u,match:t.datum,distance:t.distance})}return this._pickNodeCache.set(h,void 0)}pickNodeExactShape(e){const t=this.contentGroup.pickNode(e.x,e.y);if(t&&!0!==t.datum.missing)return{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){const i=Tw(e.x,e.y,t);if(void 0!==i.nearest&&!0!==i.nearest.datum.missing)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireNodeClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeClick",e,t,this))}fireNodeDoubleClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeDoubleClick",e,t,this))}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){const{visible:i=!0,itemId:n,legendItemName:o}=null!==t&&void 0!==t?t:{};this.toggleSeriesItem(i,e,n,o)}onLegendItemClick(e){const{enabled:t,itemId:i,series:n,legendType:o}=e,s="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,a=void 0!=s&&s===e.legendItemName;(n.id===this.id||a||void 0!=r)&&this.toggleSeriesItem(t,o,i,s,e)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:n,numVisibleItems:o,legendType:s}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=void 0!=r&&r===e.legendItemName;n.id===this.id||l||void 0!=a?this.toggleSeriesItem(!0,s,i,r,e):t&&1===o?this.toggleSeriesItem(!0,s,void 0,r):this.toggleSeriesItem(!1,s,void 0,r)}toggleSeriesItem(e,t,i,n,o){var s;const r=this.id;(e||"category"!==t)&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const a={type:"seriesVisibilityChange",seriesId:r,itemId:i,legendItemName:null!==(s=null===o||void 0===o?void 0:o.legendItemName)&&void 0!==s?s:n,visible:e};this.fireEvent(a),this.ctx.legendManager.toggleItem({enabled:e,seriesId:r,itemId:i,legendItemName:n})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return l(l({},this.ctx),{},{series:this})}getLabelText(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wA;var n;return e.formatter&&null!==(n=this.ctx.callbackCache.call(e.formatter,l({seriesId:this.id},t)))&&void 0!==n?n:i(t.value)}getMarkerStyle(e,t){var i,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getStyle();const s=ES({size:null!==(i=null===(n=t.datum.point)||void 0===n?void 0:n.size)&&void 0!==i?i:0},o);if(e.itemStyler){return ES(this.ctx.callbackCache.call(e.itemStyler,l(l(l({seriesId:this.id},s),t),{},{datum:t.datum.datum})),s)}return s}updateMarkerStyle(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.getStyle(),{applyTranslation:o=!0,selected:s=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{point:r}=i.datum,a=this.getMarkerStyle(t,i,n),d=this.visible&&a.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);if(o?e.setProperties(l(l({visible:d},a),{},{translationX:null===r||void 0===r?void 0:r.x,translationY:null===r||void 0===r?void 0:r.y})):e.setProperties(l({visible:d},a)),s||(e.fillOpacity*=.25,e.strokeOpacity*=.125),"function"===typeof t.shape&&!e.dirtyPath){e.path.clear(!0),e.updatePath(),e.checkPathDirty();const t=e.getBBox();if(void 0!==r&&t.isFinite()){const e=t.computeCenter(),[i,n]=["x","y"].map((t=>{var i;return(null!==(i=a.strokeWidth)&&void 0!==i?i:0)+Math.abs(e[t]-r[t])})),o=Math.max(t.width+i,t.height+n);r.focusSize=o}}}getMinRects(e,t){}get nodeDataDependencies(){var e;return null!==(e=this._nodeDataDependencies)&&void 0!==e?e:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){const{width:t,height:i}=null!==e&&void 0!==e?e:{width:NaN,height:NaN},n=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,o=null!=kA(this.nodeDataDependencies,n);return o&&(this._nodeDataDependencies=n,this.markNodeDataDirty()),o}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){const{datumCallbackCache:i}=this,n=i.get(e);if(null!=n)return n;const o=t();return i.set(e,o),o}};function zP(e,t,i,n){if(0===e)return function(e,t,i){if(0===e)return function(e,t){const i=-t/e;return 0!==e&&i>=0&&i<=1?[i]:[]}(t,i);const n=t*t-4*e*i,o=[];if(0===n){const i=-t/(2*e);i>=0&&i<=1&&o.push(i)}else if(n>0){const i=Math.sqrt(n),s=(-t-i)/(2*e),r=(-t+i)/(2*e);s>=0&&s<=1&&o.push(s),r>=0&&r<=1&&o.push(r)}return o}(t,i,n);const o=t/e,s=i/e,r=(3*s-o*o)/9,a=(9*o*s-27*(n/e)-2*o*o*o)/54,l=r*r*r+a*a,d=1/3,c=[];if(l>=0){const e=Math.sqrt(l),t=Math.sign(a+e)*Math.pow(Math.abs(a+e),d),i=Math.sign(a-e)*Math.pow(Math.abs(a-e),d),n=Math.abs(Math.sqrt(3)*(t-i)/2),s=-d*o+(t+i);if(s>=0&&s<=1&&c.push(s),0===n){const e=-d*o-(t+i)/2;e>=0&&e<=1&&c.push(e)}}else{const e=Math.acos(a/Math.sqrt(-r*r*r)),t=d*o,i=2*Math.sqrt(-r),n=i*Math.cos(d*e)-t,s=i*Math.cos(d*(e+2*Math.PI))-t,l=i*Math.cos(d*(e+4*Math.PI))-t;n>=0&&n<=1&&c.push(n),s>=0&&s<=1&&c.push(s),l>=0&&l<=1&&c.push(l)}return c}function _P(e,t,i,n,o,s,r,a){const l=(i-e)*(a-s)-(n-t)*(r-o);if(0===l)return 0;const d=((r-o)*(t-s)-(e-o)*(a-s))/l,c=((i-e)*(t-s)-(n-t)*(e-o))/l;return d>=0&&d<=1&&c>=0&&c<=1?1:0}function VP(e,t,i,n,o,s,r,a,l,d,c,h){let u=0;const p=d-h,g=c-l,m=l*(h-d)-d*(c-l),v=HP(e,i,o,r),f=HP(t,n,s,a),y=zP(p*v[0]+g*f[0],p*v[1]+g*f[1],p*v[2]+g*f[2],p*v[3]+g*f[3]+m);for(const b of y){const e=b*b,t=b*e,i=v[0]*t+v[1]*e+v[2]*b+v[3],n=f[0]*t+f[1]*e+f[2]*b+f[3];let o;o=l===c?(n-d)/(h-d):(i-l)/(c-l),o>=0&&o<=1&&u++}return u}function HP(e,t,i,n){return[3*t-e-3*i+n,3*e-6*t+3*i,-3*e+3*t,e]}function WP(e,t,i,n,o,s,r,a,l,d){if(isNaN(e)||isNaN(t))return 0;s&&([o,n]=[n,o]);const c=(d-a)/(l-r),h=a-c*r,u=Math.pow(c,2)+1,p=2*(c*(h-t)-e),g=Math.pow(e,2)+Math.pow(h-t,2)-Math.pow(i,2),m=Math.pow(p,2)-4*u*g;if(m<0)return 0;const v=(-p+Math.sqrt(m))/2/u,f=(-p-Math.sqrt(m))/2/u;let y=0;return[v,f].forEach((i=>{if(!(i>=Math.min(r,l)&&i<=Math.max(r,l)))return;const s=i-e,a=c*i+h-t;GI(Math.atan2(a,s),n,o)&&y++})),y}function jP(e,t,i,n,o){return(1-o)**3*e+3*(1-o)**2*o*t+3*(1-o)*o**2*i+o**3*n}function UP(e,t,i,n,o){if(o<=Math.min(e,n))return e<n?0:1;if(o>=Math.max(e,n))return e<n?1:0;let s=0,r=1,a=NaN;for(let l=0;l<12;l+=1){a=(s+r)/2;jP(e,t,i,n,a)<o?s=a:r=a}return a}function KP(e,t,i,n,o,s,r,a,l){const d=(1-l)*e+l*i,c=(1-l)*t+l*n,h=(1-l)*i+l*o,u=(1-l)*n+l*s,p=(1-l)*o+l*r,g=(1-l)*s+l*a,m=(1-l)*d+l*h,v=(1-l)*c+l*u,f=(1-l)*h+l*p,y=(1-l)*u+l*g,b=(1-l)*m+l*f,C=(1-l)*v+l*y;return[[{x:e,y:t},{x:d,y:c},{x:m,y:v},{x:b,y:C}],[{x:b,y:C},{x:f,y:y},{x:p,y:g},{x:r,y:a}]]}function YP(e,t,i,n){const o=3*t-e-3*i+n,s=3*e-6*t+3*i,r=-3*e+3*t;if(0===o){if(0!==s){const e=-r/s;if(e>0&&e<1)return[e]}return[]}const a=s*s-4*o*r;if(a>=0){const e=Math.sqrt(a);return[(-s+e)/(2*o),(-s-e)/(2*o)].filter((e=>e>0&&e<1))}return[]}function ZP(e,t,i,n,o,s,r,a){return[...YP(e,i,o,r),...YP(t,n,s,a)]}GP.highlightedZIndex=1e12,mw([OA({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],GP.prototype,"seriesGrouping",2);var XP=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return 0===this.commands.length}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}rect(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()}roundRect(e,t,i,n,o){o=Math.min(o,i/2,n/2),this.moveTo(e,t+o),this.arc(e+o,t+o,o,Math.PI,1.5*Math.PI),this.lineTo(e+o,t),this.lineTo(e+i-o,t),this.arc(e+i-o,t+o,o,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+o),this.lineTo(e+i,t+n-o),this.arc(e+i-o,t+n-o,o,0,Math.PI/2),this.lineTo(e+i-o,t+n),this.lineTo(e+o,t+n),this.arc(e+ +o,t+n-o,o,Math.PI/2,Math.PI),this.lineTo(e,t+n-o),this.closePath()}arc(e,t,i,n,o,s){this.openedPath=!0,this.path2d.arc(e,t,i,n,o,s),this.commands.push(2),this.params.push(e,t,i,n,o,s?1:0)}cubicCurveTo(e,t,i,n,o,s){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,n,o,s),this.commands.push(3),this.params.push(e,t,i,n,o,s)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){const i=this.commands,n=this.params,o=i.length,s=-1e4,r=-1e4;let a=NaN,l=NaN,d=0,c=0,h=0;for(let u=0,p=0;u<o;u++)switch(i[u]){case 0:h+=_P(a,l,d,c,s,r,e,t),d=n[p++],a=d,c=n[p++],l=c;break;case 1:h+=_P(d,c,n[p++],n[p++],s,r,e,t),d=n[p-2],c=n[p-1];break;case 3:h+=VP(d,c,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],s,r,e,t),d=n[p-2],c=n[p-1];break;case 2:{const i=n[p++],o=n[p++],l=n[p++],u=n[p++],g=n[p++];if(h+=WP(i,o,l,u,g,Boolean(n[p++]),s,r,e,t),!isNaN(a)){h+=_P(d,c,i+Math.cos(u)*l,o+Math.sin(u)*l,s,r,e,t)}d=i+Math.cos(g)*l,c=o+Math.sin(g)*l;break}case 4:h+=_P(a,l,d,c,s,r,e,t)}return h%2===1}distanceSquared(e,t){let i=1/0;const n=this.commands,o=this.params,s=n.length;let r=NaN,a=NaN,l=0,d=0;for(let c=0,h=0;c<s;c++)switch(n[c]){case 0:l=r=o[h++],d=a=o[h++];break;case 1:i=ZI(e,t,l,d,o[h++],o[h++],i);break;case 3:cM.error("Command.Curve distanceSquare not implemented");break;case 2:{const n=o[h++],s=o[h++],r=o[h++],a=o[h++],c=o[h++],u=n+Math.cos(a)*r,p=s+Math.sin(a)*r,g=Boolean(o[h++]);i=ZI(e,t,l,d,u,p,i),i=XI(e,t,n,s,r,a,c,g,i),l=n+Math.cos(c)*r,d=s+Math.sin(c)*r;break}case 4:i=ZI(e,t,l,d,r,a,i)}return i}getPoints(){const{commands:e,params:t}=this,i=[];let n=0;for(const o of e)switch(o){case 0:case 1:i.push({x:t[n++],y:t[n++]});break;case 3:n+=4,i.push({x:t[n++],y:t[n++]});break;case 2:i.push({x:t[n++],y:t[n++]}),n+=4}return i}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e,t)=>({x:e,y:t});const t=[],{commands:i,params:n}=this,o=function(i){t.push(i);for(let n=0;n<(arguments.length<=1?0:arguments.length-1);n+=2){const{x:i,y:o}=e(n+1<1||arguments.length<=n+1?void 0:arguments[n+1],n+1+1<1||arguments.length<=n+1+1?void 0:arguments[n+1+1]);t.push(i,o)}};let s=0;for(const r of i)switch(r){case 0:o("M",n[s++],n[s++]);break;case 1:o("L",n[s++],n[s++]);break;case 3:o("C",n[s++],n[s++],n[s++],n[s++],n[s++],n[s++]);break;case 2:{const e=n[s++],i=n[s++],r=n[s++],a=n[s++],l=n[s++],d=n[s++];let c=d?a-l:l-a;c<0&&(c+=2*Math.ceil(-c/(2*Math.PI))*Math.PI),d&&(c=-c);const h=Math.max(Math.ceil(Math.abs(c)/(Math.PI/2)),1),u=c/h,p=4/3*Math.tan(u/4);o(0===t.length?"M":"L",e+Math.cos(a)*r,i+Math.sin(a)*r);for(let t=0;t<h;t+=1){const n=a+u*(t+0),s=a+u*(t+1),l=r*Math.sin(n),d=r*Math.cos(n),c=r*Math.sin(s),h=r*Math.cos(s);o("C",e+d-p*l,i+l+p*d,e+h+p*c,i+c-p*h,e+h,i+c)}break}case 4:t.push("Z")}return t.join(" ")}computeBBox(){const{commands:e,params:t}=this;let[i,n,o,s]=[1/0,1/0,-1/0,-1/0],[r,a]=[NaN,NaN],[l,d]=[NaN,NaN];const c=(e,t,l)=>{i=Math.min(t,i),n=Math.min(e,n),o=Math.max(e,o),s=Math.max(t,s),l&&([r,a]=[e,t])};let h=0;for(const u of e)switch(u){case 0:c(t[h++],t[h++],!0),[l,d]=[r,a];break;case 1:c(t[h++],t[h++],!0);break;case 3:{const e=t[h++],i=t[h++],n=t[h++],o=t[h++],s=t[h++],l=t[h++];c(s,l,!0);ZP(r,a,e,i,n,o,s,l).forEach((t=>{const d=jP(r,e,n,s,t),h=jP(a,i,o,l,t);c(d,h)}));break}case 2:{const e=t[h++],i=t[h++],n=t[h++];let o=FI(t[h++]),s=FI(t[h++]);t[h++]&&([o,s]=[s,o]);const r=(t,o)=>{const s=e+n*Math.cos(t),r=i+n*Math.sin(t);c(s,r,o)};r(o),r(s,!0);const a=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const t of a)(o<s&&o<=t&&t<=s||o>s&&(o<=t||t<=s))&&r(t);break}case 4:[r,a]=[l,d]}return new Ww(n,i,o-n,s-i)}};function qP(e){const{changeCb:t,convertor:i}=null!==e&&void 0!==e?e:{};return jw({type:"path",convertor:i,changeCb:t})}var QP=class extends oA{constructor(){super(...arguments),this.path=new XP,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty())}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t,i,n;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(i=null===(n=this._clipPath)||void 0===n?void 0:n.isDirty())&&void 0!==i&&i)}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.updatePathIfDirty(),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(){return this.updatePathIfDirty(),super.preRender(this.path.commands.length)}render(e){var t;const{ctx:i}=e;if(!this.clip||isNaN(this._clipX)||isNaN(this._clipY))this._clipPath=void 0,this.drawPath(i);else{var n,o;i.save();const e=this.strokeWidth/2;null!==(n=this._clipPath)&&void 0!==n||(this._clipPath=new XP),this._clipPath.clear(),this._clipPath.rect(-e,-e,this._clipX+e,this._clipY+e+e),i.clip(null===(o=this._clipPath)||void 0===o?void 0:o.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(i),i.restore()}null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",this.svgPathData()),this.applySvgFillAttributes(e),this.applySvgStrokeAttributes(e),{elements:[e]}}};QP.className="Path",mw([qP()],QP.prototype,"clip",2),mw([qP()],QP.prototype,"clipX",1),mw([qP()],QP.prototype,"clipY",1);var JP=class{constructor(e){this.swapChain=e,this.div=vI().createElement("div"),this.svg=vI().createElementNS("http://www.w3.org/2000/svg","svg"),this.path=vI().createElementNS("http://www.w3.org/2000/svg","path"),this.svg.append(this.path),this.element=vI().createElement("div"),this.element.classList.add("ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",(e=>this.onSwap(e)))}updateBounds(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0!==e)if(e instanceof QP){const t=(t,o)=>{let{x:s,y:r}=rI.toCanvasPoint(e,t,o);return s-=i,r-=n,{x:s,y:r}};this.path.setAttribute("d",e.svgPathData(t)),this.show(this.svg)}else{if(null==t)SI(this.div,e);else{const i=Math.max(e.x,t.x),n=Math.max(e.y,t.y),o=Math.min(e.x+e.width,t.x+t.width),s=Math.min(e.y+e.height,t.y+t.height);SI(this.div,new Ww(i,n,o-i,s-n))}this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;const t=this.element.parentElement;null===t||void 0===t||t.style.setProperty("opacity",{true:"1",false:"0",undefined:""}["".concat(e)])}isFocusVisible(){const e=this.element.parentElement;return null!=e&&"1"===fI().getComputedStyle(e).opacity}},$P=class{constructor(e,t,i,n){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=e=>!this.skipDispatch&&this.dispatch("blur",e),this.onFocus=e=>!this.skipDispatch&&this.dispatch("focus",e),TE(this.label1,"id","".concat(i,"-label1")),TE(this.label2,"id","".concat(i,"-label2")),LE(this.label1,"display","none"),LE(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(n),this.inactiveAnnouncer=this.createAnnouncer(n),TE(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(e){const t=yI("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(const e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(){this.activeAnnouncer.focus()}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(),this.skipDispatch=!1}addListener(e,t){if(this.listeners[e].push(t),"swap"===e){t(this.activeAnnouncer)}}dispatch(e,t){"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1),this.listeners[e].forEach((e=>e(t)))}swap(e){const t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],EE(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),EE(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),LE(this.inactiveAnnouncer,"pointer-events","none"),LE(this.activeAnnouncer,"pointer-events",void 0),this.dispatch("swap",this.activeAnnouncer)}};function eN(e,t){var i;const{x:n,y:o}=null!==(i=function(e,t){const i=bL(t.datum);if(null!=i)return{x:i.canvasX,y:i.canvasY};const n=t.bounds;if(null!=n){if(n instanceof Ww){const{x:t,y:i}=n.computeCenter();return{x:e.x+t,y:e.y+i}}return rI.toCanvas(n).computeCenter()}}(e,t))&&void 0!==i?i:{};if(void 0!==n&&void 0!==o)return{type:"keyboard",canvasX:n,canvasY:o}}function tN(e,t,i,n){let{top:o,right:s,bottom:r,left:a,width:l,height:d}=n;return null!=a?null!=l?s=i.width-a+l:null!=s&&(l=i.width-a-s):null!=s&&null!=l&&(a=i.width-s-l),null!=o?null!=d?r=i.height-o-d:null!=r&&(d=i.height-r-o):null!=r&&null!=d&&(o=i.height-r-d),null==l?null==d?(l=e,d=t):l=Math.ceil(e*d/t):null==d&&(d=Math.ceil(t*l/e)),null==a&&(a=null==s?Math.floor((i.width-l)/2):i.width-s-l),null==o&&(o=null==r?Math.floor((i.height-d)/2):i.height-d-r),{x:a,y:o,width:l,height:d}}var iN=null;function nN(e){var t;if(null!=e)return""===e?"":(null!==(t=iN)&&void 0!==t||(iN=yI("div")),iN.textContent=String(e),iN.innerHTML)}var oN=["ArrowDown","ArrowUp","Circle","Cross","Diamond","Heart","MapPin","Plus","Square","Star","Triangle"],sN=Object.freeze({x:.5,y:.5}),rN=class extends QP{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}isBuiltIn(){var e;return oN.includes(null!==(e=this.constructor.className)&&void 0!==e?e:"")}computeBBox(){if(!this.isBuiltIn())return this.updatePathIfDirty(),this.path.computeBBox();const{x:e,y:t,size:i}=this,{center:n}=this.constructor;return new Ww(e-i*n.x,t-i*n.y,i,i)}applyPath(e,t){const{path:i}=this;let{x:n,y:o}=this;i.clear();for(const{x:s,y:r,t:a}of t)n+=s*e,o+=r*e,"move"===a?i.moveTo(n,o):i.lineTo(n,o);i.closePath()}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};mw([qP()],rN.prototype,"x",2),mw([qP()],rN.prototype,"y",2),mw([qP({convertor:Math.abs})],rN.prototype,"size",2);var aN=class extends(nI(oI(sI(rN)))){};aN.center=sN;var lN=class extends aN{updatePath(){const{x:e,y:t,path:i,size:n}=this,o=n/2;i.clear(),i.arc(e,t,o,0,2*Math.PI),i.closePath()}};lN.className="Circle";var dN=class e extends aN{updatePath(){const t=this.size/4.2;super.applyPath(t,e.moves)}};dN.className="Cross",dN.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var cN=dN,hN=class e extends aN{updatePath(){const t=this.size/2;super.applyPath(t,e.moves)}};hN.className="Diamond",hN.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var uN=hN,pN=class e extends aN{static rad(e){return e/180*Math.PI}updatePath(){const{x:t,path:i,size:n}=this,{rad:o}=e,s=n/4,r=this.y+s/2;i.clear(),i.arc(t-s,r-s,s,o(130),o(330)),i.arc(t+s,r-s,s,o(220),o(50)),i.lineTo(t,r+s),i.closePath()}};pN.className="Heart";var gN=pN,mN=class extends aN{updatePath(){const{path:e,x:t,y:i}=this,n=this.size,o=.5;e.clear(),e.moveTo(t+-.34375*n,i+-.65625*n),e.cubicCurveTo(t+-.34375*n,i+-.848509*n,t+-.192259*n,i+-1*n,t+0*n,i+-1*n),e.cubicCurveTo(t+(.692259-o)*n,i+-1*n,t+.34375*n,i+-.848509*n,t+.34375*n,i+-.65625*n),e.cubicCurveTo(t+.34375*n,i+-.506176*n,t+.284625*n,i+(.600181-1)*n,t+(.716461-o)*n,i+(.695393-1)*n),e.cubicCurveTo(t+.199009*n,i+-.280231*n,t+(.681271-o)*n,i+-.256896*n,t+(.663785-o)*n,i+(.766105-1)*n),e.cubicCurveTo(t+(.611893-o)*n,i+(.834367-1)*n,t+(.562228-o)*n,i+(.899699-1)*n,t+(.528896-o)*n,i+(.980648-1)*n),e.cubicCurveTo(t+(.524075-o)*n,i+(.992358-1)*n,t+(.512663-o)*n,i+0*n,t+0*n,i+0*n),e.cubicCurveTo(t+(.487337-o)*n,i+0*n,t+(.475925-o)*n,i+(.992358-1)*n,t+(.471104-o)*n,i+(.980648-1)*n),e.cubicCurveTo(t+(.487337-o)*n,i+0*n,t+(.475925-o)*n,i+(.992358-1)*n,t+(.471104-o)*n,i+(.980648-1)*n),e.cubicCurveTo(t+(.437772-o)*n,i+(.899699-1)*n,t+(.388107-o)*n,i+(.834367-1)*n,t+(.336215-o)*n,i+(.766105-1)*n),e.cubicCurveTo(t+(.318729-o)*n,i+-.256896*n,t+-.199009*n,i+-.280231*n,t+(.283539-o)*n,i+(.695393-1)*n),e.cubicCurveTo(t+-.284625*n,i+(.600181-1)*n,t+-.34375*n,i+-.506176*n,t+-.34375*n,i+-.65625*n),e.closePath()}};mN.className="MapPin",mN.center={x:.5,y:1};var vN=class e extends aN{updatePath(){const t=this.size/3;super.applyPath(t,e.moves)}};vN.className="Plus",vN.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var fN=vN,yN=class extends aN{updatePath(){const{path:e,x:t,y:i}=this,n=this.size/2;e.clear(),e.moveTo(this.align(t-n),this.align(i-n)),e.lineTo(this.align(t+n),this.align(i-n)),e.lineTo(this.align(t+n),this.align(i+n)),e.lineTo(this.align(t-n),this.align(i+n)),e.closePath()}};yN.className="Square";var bN=class extends aN{updatePath(){const{x:e,y:t,path:i,size:n}=this,o=n/2,s=o/2,r=Math.PI/2;i.clear();for(let a=0;a<10;a++){const n=a%2===0?o:s,l=a*Math.PI/5-r,d=e+Math.cos(l)*n,c=t+Math.sin(l)*n;i.lineTo(d,c)}i.closePath()}};bN.className="Star";var CN=class e extends aN{updatePath(){const t=1.1*this.size;super.applyPath(t,e.moves)}};CN.className="Triangle",CN.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var xN=CN,wN={circle:lN,cross:cN,diamond:uN,heart:gN,pin:mN,plus:fN,square:yN,star:bN,triangle:xN},SN=Object.keys(wN);function MN(e){return"string"===typeof e&&SN.includes(e)}function DN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"square";return MN(e)?wN[e]:"function"===typeof e?(t=e,class extends aN{updatePath(){const{path:e,x:i,y:n,size:o}=this;t({path:e,x:i,y:n,size:o})}}):yN;var t}function kN(e,t){var i,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t*(5/3);const s=new cI,r=Math.min(e.marker.strokeWidth,2),a=Math.min(null!==(i=null===(n=e.line)||void 0===n?void 0:n.strokeWidth)&&void 0!==i?i:0,2),l=Math.max(!1===e.marker.enabled?0:t,null==e.line?0:o),d=Math.max(!1===e.marker.enabled?0:t,a);if(null!=e.line){const{stroke:t,strokeOpacity:i,lineDash:n}=e.line,o=new sA;o.x1=0,o.y1=d/2,o.x2=l,o.y2=d/2,o.stroke=t,o.strokeOpacity=i,o.strokeWidth=a,o.lineDash=n,s.append(o)}if(!1!==e.marker.enabled){const{shape:i,fill:n,fillOpacity:o,stroke:a,strokeOpacity:c}=e.marker,h=DN(i),u=new h,{center:p}=h;u.size=t,u.translationX=l/2+(p.x-.5)*t,u.translationY=d/2+(p.y-.5)*t,u.fill=n,u.fillOpacity=o,u.stroke=a,u.strokeOpacity=c,u.strokeWidth=r;const g=l/2+(p.x-.5)*t,m=d/2+(p.y-.5)*t;if("string"===typeof i){const e=t/(t+r);u.translationX=g,u.translationY=m,u.scalingX=e,u.scalingY=e}else{const e=u.getBBox(),t=Math.min(l/(e.width+r),d/(e.height+r),1);u.translationX=g*t-e.x*t+(l-e.width*t)/2,u.translationY=m*t-e.y*t+(d-e.height*t)/2,u.scalingX=t,u.scalingY=t}s.append(u)}return cI.toSVG(s,l,d)}var IN=class extends vE{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y))return this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),void(null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0));this.x1=e,this.y1=t,this.t0=Date.now(),null==this.animationFrameHandle&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:e,y1:t,t0:i}=this,n=Date.now(),o=n-i;this.t0=n;const s=.001,r=0|Math.ceil(o/1);let{x:a,y:l,vx:d,vy:c}=this;for(let h=0;h<r;h+=1){d+=-(200*(a-e)+12*d)/.1*s,c+=-(200*(l-t)+12*c)/.1*s,a+=d*s,l+=c*s}Math.hypot(a-e,l-t)<.5?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=l,this.vx=d,this.vy=c,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}},AN="ag-charts-tooltip",TN="ag-charts-tooltip--dark";function EN(e){var t;if("string"===typeof e)return"";const i=[];return null!=e.heading&&i.push(e.heading),null!=e.title&&i.push(e.title),null===(t=e.data)||void 0===t||t.forEach((e=>{var t;i.push(null!==(t=e.label)&&void 0!==t?t:e.fallbackLabel,e.value)})),i.join("; ")}function RN(e,t,i){let n="";null==e?n+='<span class="'.concat(AN,'-label">').concat(nN(t),"</span>"):(n+='<span class="'.concat(AN,'-label">').concat(nN(e),"</span>"),n+=" ",n+='<span class="'.concat(AN,'-value">').concat(nN(t),"</span>"));const o=["".concat(AN,"-row")];return i&&o.push("".concat(AN,"-row--inline")),n='<div class="'.concat(o.join(" "),'">').concat(n,"</div>"),n}var LN=class extends lD{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};mw([hD(ik(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left",{value:"sparkline",undocumented:!0},{value:"sparkline-",undocumented:!0}],"a position type"))],LN.prototype,"type",2),mw([hD(CD)],LN.prototype,"xOffset",2),mw([hD(CD)],LN.prototype,"yOffset",2);var PN=class extends lD{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new LN,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new IN,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this._compact=!1,this._visible=!1,this.positionParams=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e){"togglePopover"in fI().HTMLElement.prototype&&(this.element=e.addChild("canvas-overlay",AN),this.element.setAttribute("popover","manual"),this.element.className=AN)}destroy(e){e.removeChild("canvas-overlay",AN)}isVisible(){return this._visible}updateTooltipPosition(){var e,t,i,n,o,s,r,a;const{element:l,positionParams:d}=this;if(null==l||null==d)return;const{canvasRect:c,relativeRect:h,meta:u}=d,{x:p,y:g}=this.springAnimation,m=null!==(e=null===(t=u.position)||void 0===t?void 0:t.type)&&void 0!==e?e:this.position.type,v=null!==(i=null===(n=u.position)||void 0===n?void 0:n.xOffset)&&void 0!==i?i:0,f=null!==(o=null===(s=u.position)||void 0===s?void 0:s.yOffset)&&void 0!==o?o:0,y=h.x,b=h.y,C=h.width-l.clientWidth-1+y,x=h.height-l.clientHeight+b;let w=this.getTooltipBounds({positionType:m,canvasX:p,canvasY:g,yOffset:f,xOffset:v,canvasRect:c}),S=tN(l.clientWidth,l.clientHeight,h,w);"sparkline"===m&&(S.x<=y||S.x>=C)&&(w=this.getTooltipBounds({positionType:"sparkline-constrained",canvasX:p,canvasY:g,yOffset:f,xOffset:v,canvasRect:c}),S=tN(l.clientWidth,l.clientHeight,h,w));const M=Rw(y,S.x,C),D=Rw(b,S.y,x),k=M!==S.x||D!==S.y,I=("node"===m||"pointer"===m)&&!k&&!v&&!f,A=null!==(r=null!==(a=u.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==r?r:I;this.updateShowArrow(A),this.updateCompact("sparkline"===m||"sparkline-constrained"===m),l.style.transform="translate(".concat(M,"px, ").concat(D,"px)")}show(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{element:s}=this;if(null!=s&&null!=n)s.innerHTML=function(e){var t;if("string"===typeof e)return e;let i="";if(null!=e.heading&&null!=e.title||1!==(null===(t=e.data)||void 0===t?void 0:t.length)||null!=e.data[0].label||null==e.data[0].value){var n,o,s;const t=null==e.title&&1===(null===(n=e.data)||void 0===n?void 0:n.length);null!=e.heading&&(i+='<span class="'.concat(AN,'-heading">').concat(nN(e.heading),"</span>"),i+=" ");const r=null==e.symbol?void 0:kN(e.symbol,12);null!=r&&(null!=e.title||null!==(o=e.data)&&void 0!==o&&o.length)&&(i+='<span class="'.concat(AN,'-symbol">').concat(r,"</span>")),null!=e.title&&(i+='<span class="'.concat(AN,'-title">').concat(nN(e.title),"</span>"),i+=" "),null===(s=e.data)||void 0===s||s.forEach((e=>{var n;i+=RN(null!==(n=e.label)&&void 0!==n?n:e.fallbackLabel,e.value,t),i+=" "}))}else{var r;const t=e.data[0];i+=RN(null!==(r=e.heading)&&void 0!==r?r:e.title,t.value,!1)}return i='<div class="'.concat(AN,'-content">').concat(i.trimEnd(),"</div>"),i}(n);else if(null==s||""===s.innerHTML)return void this.toggle(!1);const r={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};this.positionParams={canvasRect:t,relativeRect:r,meta:i},this.springAnimation.update(i.canvasX,i.canvasY),s.style.top="".concat(t.top,"px"),s.style.left="".concat(t.left,"px"),i.enableInteraction?(this.enableInteraction=!0,s.style.pointerEvents="auto",s.removeAttribute("aria-hidden")):(this.enableInteraction=!1,s.style.pointerEvents="none",s.setAttribute("aria-hidden","true")),this.delay>0&&!o?(this.toggle(!1),this.showTimeout=setTimeout((()=>{this.toggle(!0)}),this.delay)):this.toggle(!0)}hide(){this.springAnimation.reset(),this.toggle(!1)}toggle(e){var t;if(null===(t=this.element)||void 0===t||!t.isConnected)return;this._visible=e;const{classList:i}=this.element,n=(e,t)=>i.toggle("".concat(AN,"--").concat(e),t);e||clearTimeout(this.showTimeout),n("no-interaction",!this.enableInteraction),n("arrow",this._showArrow),n("compact",this._compact),i.toggle(TN,this.darkTheme),this.element.togglePopover(e),e&&this.updateTooltipPosition();for(const o of this.wrapTypes)i.toggle("".concat(AN,"--wrap-").concat(o),o===this.wrapping)}updateShowArrow(e){this._showArrow=e}updateCompact(e){this._compact=e}getTooltipBounds(e){if(!this.element)return{};const{positionType:t,canvasX:i,canvasY:n,yOffset:o,xOffset:s,canvasRect:r}=e,{clientWidth:a,clientHeight:l}=this.element,d={width:a,height:l};switch(t){case"node":case"pointer":return d.top=n+o-l-8,d.left=i+s-a/2,d;case"top":return d.top=o,d.left=r.width/2-a/2+s,d;case"right":return d.top=r.height/2-l/2+o,d.left=r.width-a/2+s,d;case"left":return d.top=r.height/2-l/2+o,d.left=s,d;case"bottom":return d.top=r.height-l+o,d.left=r.width/2-a/2+s,d;case"top-left":return d.top=o,d.left=s,d;case"top-right":return d.top=o,d.left=r.width-a+s,d;case"bottom-right":return d.top=r.height-l+o,d.left=r.width-a+s,d;case"bottom-left":return d.top=r.height-l+o,d.left=s,d;case"sparkline":return d.top=n+o-l/2,d.left=i+s+8,d;case"sparkline-constrained":return d.top=n+o-l/2,d.left=i+s-8-a,d}}};function NN(e,t,i,n){const o=[...e].reverse();let s;for(const a of o){var r;if(!a.visible||!a.contentGroup.visible)continue;const{match:e,distance:o}=null!==(r=a.pickNode(t,i,n))&&void 0!==r?r:{};if(e&&null!=o&&((!s||s.distance>o)&&(s={series:a,distance:o,datum:e}),0===o))break}return s}function FN(e,t){if(null==e||0===t.length)return[!1,!1];const i=e.valueOf(),n=t[0],o=t[t.length-1];if("string"===typeof n)return[i===n,i===o];let s=n.valueOf(),r=o.valueOf();return s>r&&([s,r]=[r,s]),[i===s,i===r]}function ON(e,t,i,n,o){const{xValue:s,yValue:r}=e,[a,l]=FN(r,o),[d,c]=FN(s,n);return{datum:e,xKey:t,yKey:i,xValue:s,yValue:r,first:d,last:c,min:a,max:l}}function BN(e,t,i){var n,o;let[s,r]=t;const a=null!==(n=_k(0,e-1,(e=>{var t;const n=null===(t=i(e))||void 0===t?void 0:t[1];return!Number.isFinite(n)||n>s})))&&void 0!==n?n:0;let l=null!==(o=zk(0,e-1,(e=>{var t;const n=null===(t=i(e))||void 0===t?void 0:t[0];return!Number.isFinite(n)||n<r})))&&void 0!==o?o:e-1;return l=Math.min(l+1,e),[a,l]}mw([hD(fD)],PN.prototype,"enabled",2),mw([hD(fD,{optional:!0})],PN.prototype,"showArrow",2),mw([hD(SD)],PN.prototype,"delay",2),mw([hD(ek,{optional:!0})],PN.prototype,"range",2),mw([hD(ZD)],PN.prototype,"wrapping",2),mw([hD(mD)],PN.prototype,"position",2),mw([hD(fD)],PN.prototype,"darkTheme",2),mw([hD(ik(["extended","canvas"]))],PN.prototype,"bounds",2);var GN=class extends fE{constructor(e){super(),this.chart=e,this.id=ww(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="mouse",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=lE(((e,t)=>fI().requestAnimationFrame(e)),(()=>{(this.tooltip.lastHover||this.highlight.pendingHoverEvent)&&(this.chart.getUpdateType()<=4?this.hoverScheduler.schedule():(this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)))}));const{domManager:t}=e.ctx,i="series-area",n=t.addChild(i,"series-area-aria-label1"),o=t.addChild(i,"series-area-aria-label2");this.seriesWidget=new vR(t.getParent(i)),this.chartWidget=new vR(t.getParent("canvas-proxy")),this.containerWidget=new vR(t.getParent("canvas-container")),e.ctx.regionManager.initRegions(this.containerWidget,this.seriesWidget),this.swapChain=new $P(n,o,this.id,"img"),this.swapChain.addListener("blur",(()=>this.onBlur(34))),this.swapChain.addListener("focus",(()=>this.onFocus(34))),this.focusIndicator=new JP(this.swapChain),this.focusIndicator.overrideFocusVisible("integrated"!==e.mode&&void 0),this.chart.ctx.keyNavManager.focusIndicator=this.focusIndicator;const s=e.ctx.regionManager.getRegion("series");this.destroyFns.push((()=>e.ctx.domManager.removeChild(i,"series-area-aria-label1")),(()=>e.ctx.domManager.removeChild(i,"series-area-aria-label2")),s.addListener("drag",(e=>this.onHoverLikeEvent(e)),41),s.addListener("hover",(e=>this.onHover(e)),41),s.addListener("leave",(()=>this.onLeave()),41),e.ctx.animationManager.addListener("animation-start",(()=>this.clearAll())),e.ctx.domManager.addListener("resize",(()=>this.clearAll())),e.ctx.highlightManager.addListener("highlight-change",(e=>this.changeHighlightDatum(e))),e.ctx.keyNavManager.addListener("nav-hori",(e=>this.onNavHori(e)),34),e.ctx.keyNavManager.addListener("nav-vert",(e=>this.onNavVert(e)),34),e.ctx.keyNavManager.addListener("submit",(e=>this.onSubmit(e)),34),e.ctx.layoutManager.addListener("layout:complete",(e=>this.layoutComplete(e))),e.ctx.regionManager.listenAll("contextmenu",(e=>this.onContextMenu(e)),63),e.ctx.regionManager.listenAll("click",(e=>this.onClick(e))),e.ctx.regionManager.listenAll("dblclick",(e=>this.onClick(e))),e.ctx.updateService.addListener("pre-scene-render",(()=>this.preSceneRender())),e.ctx.zoomManager.addListener("zoom-change",(()=>this.clearAll())),e.ctx.zoomManager.addListener("zoom-pan-start",(()=>this.clearAll())))}dataChanged(){var e,t;null!==(e=(t=this.highlight).stashedHoverEvent)&&void 0!==e||(t.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator.updateBounds(void 0),this.clearHighlight()}preSceneRender(){this.focusIndicator.isFocusVisible()&&this.handleSeriesFocus(0,0,!0),null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort(((e,t)=>{var i,n;let o=null!==(i=e.properties.focusPriority)&&void 0!==i?i:1/0,s=null!==(n=t.properties.focusPriority)&&void 0!==n?n:1/0;return o===s&&([o,s]=[e._declarationOrder,t._declarationOrder]),o<s?-1:o>s?1:0})),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.paddedRect,this.seriesWidget.setBounds(e.series.paddedRect),this.chartWidget.setBounds(e.chart)}onContextMenu(e){var t;const{Default:i,ContextMenu:n}=yE;if("root"===e.region)return void(this.chart.ctx.interactionManager.getState()&(i|n)&&this.chart.ctx.contextMenuRegistry.dispatchContext("all",e,{}));let o,s;if(this.focusIndicator.isFocusVisible())o=this.chart.ctx.highlightManager.getActiveHighlight(),o&&this.seriesRect&&o.midPoint&&(s=rI.toCanvasPoint(o.series.contentGroup,o.midPoint.x,o.midPoint.y));else if(this.chart.ctx.interactionManager.getState()&(i|n)){const t=NN(this.series,{x:e.regionX,y:e.regionY},"context-menu");t&&(this.chart.ctx.highlightManager.updateHighlight(this.id),o=t.datum)}const r=null===(t=o)||void 0===t?void 0:t.series;this.clearAll(),this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",e,{pickedSeries:r,pickedNode:o},s)}onLeave(){this.chart.ctx.cursorManager.updateCursor(this.id),this.focusIndicator.isFocusVisible()||this.clearAll()}onHover(e){this.hoverDevice="mouse",this.onHoverLikeEvent(e)}onHoverLikeEvent(e){if(kS(e,"drag")&&(this.tooltip.lastHover=e),this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),32===this.chart.ctx.interactionManager.getState()){const{regionX:t,regionY:i}=e,n=NN(this.series,{x:t,y:i},"event");null!==n&&void 0!==n&&n.series.hasEventListener("nodeClick")||null!==n&&void 0!==n&&n.series.hasEventListener("nodeDoubleClick")?this.chart.ctx.cursorManager.updateCursor(this.id,"pointer"):this.chart.ctx.cursorManager.updateCursor(this.id)}}onClick(e){var t;if(this.hoverDevice="mouse",this.onHoverLikeEvent(e),null!==(t=this.seriesRect)&&void 0!==t&&t.containsPoint(e.canvasX,e.canvasY)&&this.checkSeriesNodeClick(e))return this.update(4),void e.preventDefault();const i={type:"click"===e.type?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(i)}onFocus(e){this.chart.ctx.interactionManager.getState()&e&&(this.hoverDevice=this.focusIndicator.isFocusVisible()?"keyboard":"mouse",this.handleFocus(0,0))}onBlur(e){this.chart.ctx.interactionManager.getState()&e&&(this.hoverDevice="mouse",this.clearAll(),this.focusIndicator.overrideFocusVisible(void 0))}onNavVert(e){this.hoverDevice="keyboard",this.focus.seriesIndex+=e.delta,this.handleFocus(e.delta,0),e.preventDefault()}onNavHori(e){this.hoverDevice="keyboard",this.focus.datumIndex+=e.delta,this.handleFocus(0,e.delta),e.preventDefault()}onSubmit(e){const{series:t,datum:i}=this.focus,n=e.sourceEvent.sourceEvent;void 0!==t&&void 0!==i?t.fireNodeClickEvent(n,i):this.chart.fireEvent({type:"click",event:n}),e.preventDefault()}checkSeriesNodeClick(e){let t={x:e.regionX,y:e.regionY};"series"!==e.region&&(t=rI.fromCanvasPoint(this.chart.seriesRoot,e.canvasX,e.canvasY));const i=NN(this.series,t,"event");return null!=i&&("click"===e.type?(i.series.fireNodeClickEvent(e.sourceEvent,i.datum),!0):"dblclick"===e.type&&(e.preventZoomDblClick=0===i.distance,i.series.fireNodeDoubleClickEvent(e.sourceEvent,i.datum),!0))}handleFocus(e,t){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);null==i?this.handleSeriesFocus(e,t):this.focusIndicator.updateBounds(new Ww(0,0,i.rect.width,i.rect.height))}handleSeriesFocus(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("hierarchy"===this.chart.chartType)return void this.handleHierarchySeriesFocus(e,t,i);const{focus:n,seriesRect:o}=this,s=n.sortedSeries.filter((e=>e.visible));if(0===s.length)return;n.seriesIndex=Rw(0,n.seriesIndex,s.length-1),n.series=s[n.seriesIndex];const{datumIndex:r,seriesIndex:a}=n,l=n.series.pickFocus({datumIndex:r,datumIndexDelta:t,otherIndex:a,otherIndexDelta:e,seriesRect:o});this.updatePickedFocus(l,i)}handleHierarchySeriesFocus(e,t,i){this.focus.series=this.focus.sortedSeries[0];const{focus:{series:n,seriesIndex:o,datumIndex:s},seriesRect:r}=this;if(null==n)return;const a=n.pickFocus({datumIndex:s,datumIndexDelta:t,otherIndex:o,otherIndexDelta:e,seriesRect:r});this.updatePickedFocus(a,i)}updatePickedFocus(e,t){const{focus:i,hoverRect:n,seriesRect:o}=this;if(void 0===e||void 0===i.series||void 0===n)return;const{datum:s,datumIndex:r}=e;if(i.datumIndex=r,i.datum=s,this.focusIndicator.isFocusVisible()&&this.chart.ctx.animationManager.reset(),this.focusIndicator.isFocusVisible()){let t=function(e){let{bounds:t}=e;return t instanceof Ww?t:null!=t?t.getBBox():Ww.NaN}(e);if(null!=o){const e=t.clone();e.x+=o.x,e.y+=o.y,t=e}const{x:i,y:s}=t.computeCenter();n.containsPoint(i,s)||this.chart.ctx.zoomManager.panToBBox(this.id,n,t)}!function(e,t,i,n,o){const{bounds:s,showFocusBox:r,clipFocusBox:a=!0}=i;r&&(null===t||void 0===t||t.updateBounds(s,a?e:void 0,n,o))}(null!=o?new Ww(0,0,o.width,null===o||void 0===o?void 0:o.height):void 0,this.focusIndicator,e,null===o||void 0===o?void 0:o.x,null===o||void 0===o?void 0:o.y);const a=eN(n,e);if(void 0!==a&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const e=i.series.getTooltipContent(s),n=CL.makeTooltipMeta(a,s);this.chart.ctx.highlightManager.updateHighlight(this.id,s),this.chart.ctx.tooltipManager.updateTooltip(this.id,n,e),t||this.swapChain.update(this.getDatumAriaText(s,e))}}getDatumAriaText(e,t){var i,n,o;const s=null==t?"":EN(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:null!==(i=null===(n=(o=e.series).getDatumAriaText)||void 0===n?void 0:n.call(o,e,s))&&void 0!==i?i:s})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator.updateBounds(void 0)}handleHoverHighlight(e){var t;this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const i=this.highlight.appliedHoverEvent;if(!i)return;const n=this.chart.ctx.interactionManager.getState();if(32!==n&&8!==n&&1!==n)return;const{canvasX:o,canvasY:s}=i;if(e?this.chart.ctx.animationManager.isActive():null===(t=this.hoverRect)||void 0===t||!t.containsPoint(o,s))return void this.clearHighlight();let r={x:i.regionX,y:i.regionY};"series"!==i.region&&(r=rI.fromCanvasPoint(this.chart.seriesRoot,o,s));const{range:a}=this.chart.highlight,l="tooltip"===a?"highlight-tooltip":"highlight",d=NN(this.series,r,l);if(d)return this.chart.ctx.highlightManager.updateHighlight(this.id,d.datum),void(this.hoverDevice="mouse");this.chart.ctx.highlightManager.updateHighlight(this.id)}handleHoverTooltip(e,t){var i;const n=this.chart.ctx.interactionManager.getState();if(32!==n&&8!==n&&1!==n)return;const{canvasX:o,canvasY:s,regionX:r,regionY:a}=e,l=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():null===(i=this.hoverRect)||void 0===i||!i.containsPoint(o,s))return void("mouse"==this.hoverDevice&&this.clearTooltip());if(l&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(l,"canvas-overlay",AN))return;let d={x:r,y:a};"series"!==e.region&&(d=rI.fromCanvasPoint(this.chart.seriesRoot,o,s));const c=NN(this.series,d,"tooltip");if(!c)return void("mouse"==this.hoverDevice&&this.clearTooltip());this.hoverDevice="mouse";const h=c.series.getTooltipContent(c.datum);if(this.chart.tooltip.enabled&&c.series.tooltipEnabled&&null!=h){const t=CL.makeTooltipMeta(e,c.datum);this.chart.ctx.tooltipManager.updateTooltip(this.id,t,h)}}changeHighlightDatum(e){var t,i;const n=new Set,{series:o,datum:s}=null!==(t=e.currentHighlight)&&void 0!==t?t:{},{series:r,datum:a}=null!==(i=e.previousHighlight)&&void 0!==i?i:{};r&&n.add(r),o&&n.add(o),null!==r&&void 0!==r&&r.properties.cursor&&a&&this.chart.ctx.cursorManager.updateCursor(r.id),null!==o&&void 0!==o&&o.properties.cursor&&"default"!==(null===o||void 0===o?void 0:o.properties.cursor)&&s&&this.chart.ctx.cursorManager.updateCursor(o.id,o.properties.cursor);null==o||null==r?this.update(4):this.update(4,{seriesToUpdate:n})}},zN=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){const{internalId:t,type:i,contentGroup:n,seriesGrouping:o}=e,{groupIndex:s=t}=null!==o&&void 0!==o?o:{},r=this.series.get(t);if(null!=r)throw new Error("AG Charts - series already has an allocated layer: ".concat(JSON.stringify(r)));0===this.series.size&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal");let a=this.groups.get(i);null==a&&(a=new Map,this.groups.set(i,a));const l=this.lookupIdx(s);let d=a.get(l);var c;null==d&&(d={type:i,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new cI({name:"".concat(null!==(c=e.contentGroup.name)&&void 0!==c?c:i,"-managed-layer"),zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(l,d));return this.series.set(t,{layerState:d,seriesConfig:e}),d.seriesIds.push(t),d.group.appendChild(n),d.group}changeGroup(e){var t;const{internalId:i,seriesGrouping:n,type:o,contentGroup:s,oldGrouping:r}=e,{groupIndex:a=i}=null!==n&&void 0!==n?n:{};null!==(t=this.groups.get(o))&&void 0!==t&&null!==(t=t.get(a))&&void 0!==t&&t.seriesIds.includes(i)||(this.series.has(i)&&this.releaseGroup({internalId:i,seriesGrouping:r,type:o,contentGroup:s}),this.requestGroup(e))}releaseGroup(e){var t;const{internalId:i,contentGroup:n,type:o}=e;if(!this.series.has(i))throw new Error("AG Charts - series doesn't have an allocated layer: ".concat(i));const s=null===(t=this.series.get(i))||void 0===t?void 0:t.layerState;var r,a;(s&&(s.seriesIds=s.seriesIds.filter((e=>e!==i)),s.group.removeChild(n)),0===(null===s||void 0===s?void 0:s.seriesIds.length))?(this.seriesRoot.removeChild(s.group),null===(r=this.groups.get(s.type))||void 0===r||r.delete(s.id),null===(a=this.groups.get(o))||void 0===a||a.delete(i)):null!=s&&s.seriesIds.length>0&&(s.group.zIndex=this.getLowestSeriesZIndex(s.seriesIds));this.series.delete(i)}updateLayerCompositing(){this.groups.forEach((e=>{e.forEach((e=>{const{group:t,seriesIds:i}=e;let n;if(0===i.length)n=!1;else if(i.length>1)n=!0;else{const e=this.series.get(i[0]);n=!0===(null===e||void 0===e?void 0:e.seriesConfig.renderToOffscreenCanvas())}t.renderToOffscreenCanvas=n,t.zIndex=this.getLowestSeriesZIndex(i)}))}))}lookupIdx(e){return"normal"===this.mode?e:"string"!==typeof e||(e=Number(e.split("-").at(-1)))?Math.floor(30*Rw(0,e/this.expectedSeriesCount,1)):0}destroy(){this.groups.forEach((e=>{e.forEach((e=>{this.seriesRoot.removeChild(e.group)}))})),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){const t=e.reduce(((e,t)=>{const i=this.series.get(t),n=null===i||void 0===i?void 0:i.seriesConfig.contentGroup.zIndex;return null==e||null==n?n:lI(e,n)<=0?e:n}),void 0);return null!==t&&void 0!==t?t:1}},_N=class{constructor(e,t,i,n,o){this.chart=e,this.dataService=t,this.updateService=i,this.zoomManager=n,this.animationManager=o,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",(()=>this.onDataSourceChange())),this.dataService.addListener("data-load",(()=>this.onDataLoad())),this.dataService.addListener("data-error",(()=>this.onDataError())),this.updateService.addListener("update-complete",(()=>this.onUpdateComplete())),this.zoomManager.addListener("zoom-change",(()=>this.onZoomChange())))}destroy(){this.destroyFns.forEach((e=>e()))}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){(this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){var e,t;if(!this.dataService.isLazy())return;const i=this.getValidAxis();let n,o=!0;if(i){const e=this.zoomManager.getAxisZoom(i.id);n=this.getAxisWindow(i,e),o=this.shouldRefresh(i,e)}this.dirtyZoom=!1,this.dirtyDataSource=!1,o&&this.dataService.load({windowStart:null===(e=n)||void 0===e?void 0:e.min,windowEnd:null===(t=n)||void 0===t?void 0:t.max})}getValidAxis(){return this.chart.axes.find((e=>"time"===e.type))}shouldRefresh(e,t){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(e.id);return(!i||t.min!==i.min||t.max!==i.max)&&(this.lastAxisZooms.set(e.id,t),!0)}getAxisWindow(e,t){var i,n;const o=null===(i=(n=e.scale).getDomain)||void 0===i?void 0:i.call(n);if(!t||!o||0===o.length||isNaN(Number(o[0])))return;const s=Number(o[1])-Number(o[0]);return{min:new Date(Number(o[0])+s*t.min),max:new Date(Number(o[0])+s*t.max)}}},VN=/^((?!chrome|android).)*safari/i,HN=/Version\/(\d+(\.\d+)?)/,WN=/Chrome/,jN=/Chrome\/(\d+)/,UN=/Edg/,KN=/OPR/;var YN=class{constructor(e,t,i,n,o,s,r){this.chartLike=e,this.overlays=t,this.dataService=i,this.layoutManager=n,this.localeManager=o,this.animationManager=s,this.domManager=r,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(TP),this.destroyFns.push(this.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))))}destroy(){this.destroyFns.forEach((e=>e())),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete(e){let{series:{rect:t}}=e;const i=this.dataService.isLoading(),n=this.chartLike.series.some((e=>e.hasData)),o=this.chartLike.series.some((e=>e.visible));this.overlays.darkTheme?this.overlayElem.classList.add(EP):this.overlayElem.classList.remove(EP),this.overlayElem.style.left="".concat(t.x,"px"),this.overlayElem.style.top="".concat(t.y,"px"),this.overlayElem.style.width="".concat(t.width,"px"),this.overlayElem.style.height="".concat(t.height,"px");const s=i,r=!i&&!n,a=n&&!o,l=this.overlays.unsupportedBrowser.enabled&&function(){const{userAgent:e}=fI().navigator;if(VN.test(e)){var t,i;const n=parseFloat(null!==(t=null===(i=HN.exec(e))||void 0===i?void 0:i[1])&&void 0!==t?t:"0"),o=Math.floor(n)>16;return o||cM.warnOnce("Unsupported Safari version: ".concat(n," ; ").concat(e)),!o}if(WN.test(e)&&!UN.test(e)&&!KN.test(e)){var n,o;const t=parseInt(null!==(n=null===(o=jN.exec(e))||void 0===o?void 0:o[1])&&void 0!==n?n:"0",10),i=t>126;return i||cM.warnOnce("Unsupported Chrome version: ".concat(t," ; ").concat(e)),!i}return!1}();s?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),r?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),a?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries),l?this.showOverlay(this.overlays.unsupportedBrowser,t):this.hideOverlay(this.overlays.unsupportedBrowser);const d=s||r||a||l;TE(this.overlayElem,"aria-hidden",!d)}showOverlay(e,t){if(!e.enabled)return;const i=e.getElement(this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement((()=>{this.overlayElem.innerText="\xa0"}),this.animationManager)}},ZN=RI.create(!0,"opts"),XN=class extends lD{constructor(){super(...arguments),this.padding=new aE(0)}};mw([hD(fD,{optional:!0})],XN.prototype,"clip",2),mw([hD(mD)],XN.prototype,"padding",2);var qN=class e extends rE{constructor(e,t){var i,n,o,s,r,a;super(),this.id=ww(this),this.seriesRoot=new pI({name:"".concat(this.id,"-series-root"),zIndex:4}),this.annotationRoot=new pI({name:"".concat(this.id,"-annotation-root"),zIndex:8}),this.titleGroup=new cI({name:"titles",zIndex:12}),this.debug=RI.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new oE,this.padding=new aE(20),this.seriesArea=new XN,this.keyboard=new fP,this.mode="standalone",this.chartCaptions=new pE,this.suppressFieldDotNotation=!1,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new AP,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new oE,this.performUpdateType=7,this.runningUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new sE,this.updateRequestors={},this.performUpdateTrigger=lE((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0===t?queueMicrotask(e):setTimeout(e,t)}),(e=>{let{count:t}=e;this.destroyed||this.updateMutex.acquire((async()=>{try{await this.performUpdate(t)}catch(e){cM.error("update error",e)}})).catch((e=>cM.errorOnce(e)))})),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=e=>{this.fireEvent(l(l({},e),{},{type:"seriesNodeClick"}))},this.onSeriesNodeDoubleClick=e=>{this.fireEvent(l(l({},e),{},{type:"seriesNodeDoubleClick"}))},this.onSeriesVisibilityChange=e=>{this.fireEvent(e)},this.seriesGroupingChanged=e=>{if(!(e instanceof BP))return;const{series:t,seriesGrouping:i,oldGrouping:n}=e;t.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:t.internalId,type:t.type,contentGroup:t.contentGroup,renderToOffscreenCanvas:()=>t.renderToOffscreenCanvas(),seriesGrouping:i,oldGrouping:n})},this.chartOptions=e;const d=null===t||void 0===t?void 0:t.scene,c=null!==(i=null!==(n=null===t||void 0===t?void 0:t.container)&&void 0!==n?n:e.processedOptions.container)&&void 0!==i?i:void 0,h=null!==(o=null===t||void 0===t?void 0:t.styleContainer)&&void 0!==o?o:e.specialOverrides.styleContainer,u=new cI({name:"root"});u.visible=!1,u.append(this.seriesRoot),u.append(this.annotationRoot),u.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new PN,this.seriesLayerManager=new zN(this.seriesRoot),this.mode=null!==(s=e.userOptions.mode)&&void 0!==s?s:this.mode;const p=this.ctx=new OL(this,{chartType:this.getChartType(),scene:d,root:u,container:c,styleContainer:h,syncManager:new vP(this),pixelRatio:e.specialOverrides.overrideDevicePixelRatio,updateCallback:(e,t)=>this.update(e,t),updateMutex:this.updateMutex});this._destroyFns.push(p.domManager.addListener("resize",(()=>this.parentResize(p.domManager.containerSize)))),this.overlays=new LP,null!==(r=(a=this.overlays.loading).renderer)&&void 0!==r||(a.renderer=()=>function(e,t){const{animationDuration:i}=qS.add,n=i*t,o=yI("div","".concat(TP,"--loading"),{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:"ag-charts-loading ".concat(n,"ms linear 50ms both")}),s=yI("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),r=yI("p",{marginTop:"1em"});r.innerText=e;const a=yI("div","".concat(TP,"__loading-background"),{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=yI("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),o.replaceChildren(l,s,r,a),o}(this.overlays.loading.getText(p.localeManager),p.animationManager.defaultDuration)),this.processors=[new _N(this,p.dataService,p.updateService,p.zoomManager,p.animationManager),new YN(this,this.overlays,p.dataService,p.layoutManager,p.localeManager,p.animationManager,p.domManager)],this.highlight=new BL,this.container=c;const g=this.getModuleContext();p.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new GN(this.initSeriesAreaDependencies()),this._destroyFns.push(p.layoutManager.registerElement(0,(e=>{e.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(e)})),p.layoutManager.addListener("layout:complete",(e=>this.chartCaptions.positionAbsoluteCaptions(e))),p.dataService.addListener("data-load",(e=>{this.data=e.data})),this.title.registerInteraction(g,"beforebegin"),this.subtitle.registerInteraction(g,"beforebegin"),this.footnote.registerInteraction(g,"afterend"),p.interactionManager.addListener("page-left",(()=>this.destroy())),p.animationManager.addListener("animation-frame",(()=>{this.update(6)})),p.animationManager.addListener("animation-start",(()=>p.domManager.setDataBoolean("animating",!0))),p.animationManager.addListener("animation-stop",(()=>p.domManager.setDataBoolean("animating",!1))),p.zoomManager.addListener("zoom-change",(()=>{this.series.forEach((e=>{var t;return null===(t=e.animationState)||void 0===t?void 0:t.transition("updateData")}));const e="initial"!==this.chartAnimationPhase;this.update(3,{forceNodeDataRefresh:!0,skipAnimations:e})}))),this.parentResize(p.domManager.containerSize)}static getInstance(t){return e.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,t){this.ctx.scene.download(e,t)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){var e;return null!==(e=this.queuedUserOptions.at(-1))&&void 0!==e?e:this.chartOptions.userOptions}getChartOptions(){var e;return null!==(e=this.queuedChartOptions.at(-1))&&void 0!==e?e:this.chartOptions}initSeriesAreaDependencies(){const{ctx:e,tooltip:t,highlight:i,overlays:n,seriesRoot:o,mode:s}=this,r=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,chartType:r,ctx:e,tooltip:t,highlight:i,overlays:n,seriesRoot:o,mode:s}}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter((e=>e.enabled&&e.text)).map((e=>e.text)).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clear()}destroy(e){if(this.destroyed)return;const t=null===e||void 0===e?void 0:e.keepTransferableResources;let i;return this.performUpdateType=7,this._destroyFns.forEach((e=>e())),this.processors.forEach((e=>e.destroy())),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),t?(this.ctx.scene.strip(),i={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach((e=>e.destroy())),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),i}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((async()=>{if(!this.destroyed)try{await e(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}})).catch((e=>cM.errorOnce(e))))}update(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;const{forceNodeDataRefresh:n=!1,skipAnimations:o,seriesToUpdate:s=this.series,newAnimationBatch:r}=null!==i&&void 0!==i?i:{};n&&this.series.forEach((e=>e.markNodeDataDirty()));for(const l of s)this.seriesToUpdate.add(l);if(o&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=null!==(e=null===i||void 0===i?void 0:i.skipSync)&&void 0!==e&&e,this.debug.check()){var a;let e=null!==(a=(new Error).stack)&&void 0!==a?a:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(null===i||void 0===i?void 0:i.backOffMs))}async performUpdate(e){var t;const{performUpdateType:i,extraDebugStats:n,_performUpdateSplits:o,ctx:s}=this,r=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.runningUpdateType=i,0===this.updateShortcutCount&&i<6&&(s.animationManager.startBatch(this._performUpdateSkipAnimations),s.animationManager.onBatchStop((()=>this.chartAnimationPhase="ready"))),this.debug("Chart.performUpdate() - start",NL[i]);let a=performance.now();null!==(t=o.start)&&void 0!==t||(o.start=a);const l=e=>{var t;null!==(t=o[e])&&void 0!==t||(o[e]=0),o[e]+=performance.now()-a,a=performance.now()};switch(i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),l("\u2b07\ufe0f");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),l("\ud83c\udfed");case 3:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(3))break;await this.processLayout(),l("\u2316");case 4:if(this.checkUpdateShortcut(4))break;await this.updateSeries(r),l("\ud83e\udd14"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing();case 5:if(this.checkUpdateShortcut(5))break;s.updateService.dispatchPreSceneRender(this.getMinRects()),l("\u2196");case 6:if(this.checkUpdateShortcut(6))break;s.animationManager.endBatch(),n.updateShortcutCount=this.updateShortcutCount,s.scene.render({debugSplitTimes:o,extraDebugStats:n,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const e of Object.keys(o))delete o[e];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,s.animationManager.endBatch()}this.destroyed||(s.updateService.dispatchUpdateComplete(this.getMinRects()),this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=7),this._performUpdateNotify.notify();const d=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(d-o.start))/100,count:e,performUpdateType:NL[i]})}updateThemeClassName(){const e="ag-charts-theme-",t=["".concat(e,"default"),"".concat(e,"default-dark")];let i=t[0],n=!1,{theme:o}=this.chartOptions.processedOptions;for(;"string"!==typeof o&&null!=o;)o=o.baseTheme;"string"===typeof o&&(i=o.replace("ag-",e),n=o.includes("-dark")),t.includes(i)||(i=n?t[1]:t[0]),this.ctx.domManager.setThemeClass(i)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:t}=this.keyboard;this.ctx.domManager.setTabGuardIndex(e?null!==t&&void 0!==t?t:0:-1)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(e){return!!this.destroyed||(this.updateShortcutCount>3?(cM.warn("exceeded the maximum number of simultaneous updates (".concat(4,"), discarding changes and rendering"),this.updateRequestors),!1):this.performUpdateType<=e&&(this.updateShortcutCount++,!0))}async checkFirstAutoSize(){if(null!=this.width&&null!=this.height);else if(!this._lastAutoSize){await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}}onAxisChange(e,t){null==t&&0===e.length||this.ctx.axisManager.updateAxes(null!==t&&void 0!==t?t:[],e)}onSeriesChange(e,t){var i,n,o;const s=null!==(i=null===t||void 0===t?void 0:t.filter((t=>!e.includes(t))))&&void 0!==i?i:[];this.destroySeries(s),null===(n=this.seriesLayerManager)||void 0===n||n.setSeriesCount(e.length);for(const r of e){if(null!==t&&void 0!==t&&t.includes(r))continue;const e=this.seriesLayerManager.requestGroup(r);r.attachSeries(e,this.seriesRoot,this.annotationRoot);const i=this;r.chart={get mode(){return i.mode},get isMiniChart(){return!1},get seriesRect(){return i.seriesRect}},r.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(r),r.addChartEventListeners()}null===(o=this.seriesAreaManager)||void 0===o||o.seriesChanged(e)}destroySeries(e){null===e||void 0===e||e.forEach((e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),e.removeEventListener("groupingChanged",this.seriesGroupingChanged),e.destroy(),this.seriesLayerManager.releaseGroup(e),e.detachSeries(void 0,this.seriesRoot,this.annotationRoot),e.chart=void 0}))}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&e.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const e of this.axes)e.boundSeries=this.series.filter((t=>t.axes[e.direction]===e))}assignAxesToSeries(){const e=bM(this.axes,(e=>e.direction));for(const t of this.series)for(const i of t.directions){const n=e[i];if(!n)return void cM.warnOnce("no available axis for direction [".concat(i,"]; check series and axes configuration."));const o=t.getKeys(i),s=n.find((e=>!e.keys.length||o.some((t=>e.keys.includes(t)))));if(!s)return void cM.warnOnce("no matching axis for direction [".concat(i,"] and keys [").concat(o,"]; check series and axes configuration."));t.axes[i]=s}}parentResize(e){var t;if(null==e||null!=this.width&&null!=this.height)return;let{width:i,height:n}=e;if(i=Math.floor(i),n=Math.floor(n),0===i&&0===n)return;const[o=0,s=0]=null!==(t=this._lastAutoSize)&&void 0!==t?t:[];o===i&&s===n||(this._lastAutoSize=[i,n],this.resize("SizeMonitor",{}))}resize(e,t){var i,n,o,s;const{scene:r,animationManager:a}=this.ctx,{inWidth:l,inHeight:d,inMinWidth:c,inMinHeight:h}=t;this.ctx.domManager.setSizeOptions(null!==c&&void 0!==c?c:this.minWidth,null!==h&&void 0!==h?h:this.minHeight,null!==l&&void 0!==l?l:this.width,null!==d&&void 0!==d?d:this.height);const u=null!==(i=null!==l&&void 0!==l?l:this.width)&&void 0!==i?i:null===(n=this._lastAutoSize)||void 0===n?void 0:n[0],p=null!==(o=null!==d&&void 0!==d?d:this.height)&&void 0!==o?o:null===(s=this._lastAutoSize)||void 0===s?void 0:s[1];if(this.debug("Chart.resize() from ".concat(e),{width:u,height:p,stack:(new Error).stack}),null!=u&&null!=p&&xS(u)&&xS(p)&&r.resize(u,p)){a.reset();let e=!0;null!=this.width&&null!=this.height||!this._firstAutoSize||(e=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:e}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach((e=>e.setChartData(this.data)));const e=this.modulesManager.mapModules((e=>{var t;return null===(t=e.updateData)||void 0===t?void 0:t.call(e,this.data)}));await Promise.all(e)}async processData(){this.series.some((e=>e.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());for(const n of this.axes)n.processData();const e=new nP(this.mode,this.suppressFieldDotNotation),t=this.series.map((t=>(t.resetDatumCallbackCache(),t.processData(e)))),i=this.modulesManager.mapModules((t=>{var i;return null===(i=t.processData)||void 0===i?void 0:i.call(t,e)}));this._cachedData=e.execute(this._cachedData),await Promise.all([...t,...i]),this.updateLegends()}updateLegends(e){for(const{legend:t,legendType:i}of this.modulesManager.legends())"category"===i?this.setCategoryLegendData(e):this.setLegendData(i,t)}setCategoryLegendData(e){var t;const{ctx:{legendManager:i,stateManager:n}}=this;e&&this.series.forEach((t=>{const i=e.find((e=>e.seriesId===t.id));t.onLegendInitialState("category",i)}));const o=this.series.flatMap((e=>{const t=e.getLegendData("category");return i.updateData(e.id,t),t}));if(e)n.setStateAndRestore(i,e);else{if("integrated"!==this.mode){const e={},i=new Map(this.series.map((e=>[e.id,e.type])));for(const{seriesId:n,symbol:{marker:a},label:l}of o.filter((e=>!e.hideInLegend))){var s,r;if(null==a.fill)continue;const o=i.get(n),d=null!==(s=e[o])&&void 0!==s?s:e[o]={};null!==(r=d[t=l.text])&&void 0!==r||(d[t]=a.fill),d[l.text]!==a.fill&&cM.warnOnce("legend item '".concat(l.text,"' has multiple fill colors, this may cause unexpected behaviour."))}}i.update()}}setLegendData(e,t){t.data=this.series.filter((e=>e.properties.showInLegend)).flatMap((t=>t.getLegendData(e)))}async processLayout(){var e;const t=this.animationRect,{width:i,height:n}=this.ctx.scene,o=this.ctx.layoutManager.createContext(i,n);await this.performLayout(o),!t||null!==(e=this.animationRect)&&void 0!==e&&e.equals(t)||this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(e){const{seriesRect:t}=this;await Promise.all(e.map((e=>e.update({seriesRect:t})))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter((e=>e.visible&&e.usesPlacedLabels)),this.padding,this.seriesRect)}async waitForUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=performance.now();for(;this._pendingFactoryUpdatesCount>0||7!==this.performUpdateType||7!==this.runningUpdateType;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),7===this.performUpdateType&&7===this.runningUpdateType||await this._performUpdateNotify.await(),performance.now()-i>e){const i="Chart.waitForUpdate() timeout of ".concat(e," reached - first chart update taking too long.");if(t)throw new Error(i);cM.warnOnce(i)}AI()&&await new Promise((e=>{setTimeout(e,0)}))}}getMinRects(){const{width:e,height:t}=this.ctx.scene,i=this.series.map((i=>i.getMinRects(e,t))).filter(dS);if(0===i.length)return;let n=0,o=0,s=0,r=0;for(const{minRect:d,minVisibleRect:c}of i)n=Math.max(n,d.width),o=Math.max(o,d.height),s=Math.max(s,c.width),r=Math.max(r,c.height);const a=new Ww(0,0,n,o);let l=a.clone();return s>0&&r>0&&(l=new Ww(0,0,s,r)),{minRect:a,minVisibleRect:l}}filterMiniChartSeries(e){return null===e||void 0===e?void 0:e.filter((e=>!1!==e.showInMiniChart))}applyOptions(e){var t,i,n,o;const s=this.firstApply?e.processedOptions:e.diffOptions(this.chartOptions);if(null==s||0===Object.keys(s).length)return;const r=this.firstApply?{}:this.chartOptions.processedOptions,a=e.processedOptions;ZN("Chart.applyOptions() - applying delta",s);const l=this.applyModules(a);s.listeners&&this.registerListeners(this,s.listeners),RA(this,s,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"]});let d=!1,c="no-op";var h;(null!=s.series&&(c=this.applySeries(this,s.series,null===r||void 0===r?void 0:r.series),d=!0),"replaced"===c&&this.resetAnimations(),this.applyAxes(this,a,r,c,[])&&(d=!0),s.data&&(this.data=s.data),null!==(t=s.legend)&&void 0!==t&&t.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,s.legend.listeners),null!==(i=s.locale)&&void 0!==i&&i.localeText)&&(this.modulesManager.getModule("locale").localeText=null===(h=s.locale)||void 0===h?void 0:h.localeText);this.chartOptions=e;const u=this.modulesManager.getModule("navigator"),p=this.modulesManager.getModule("zoom");null!==u&&void 0!==u&&u.enabled||null!==p&&void 0!==p&&p.enabled||this.ctx.zoomManager.updateZoom("chart");const g=null===u||void 0===u?void 0:u.miniChart,m=null!==(n=null===(o=a.navigator)||void 0===o||null===(o=o.miniChart)||void 0===o?void 0:o.series)&&void 0!==n?n:a.series;!0===(null===g||void 0===g?void 0:g.enabled)&&null!=m?this.applyMiniChartOptions(g,m,a,r):!1===(null===g||void 0===g?void 0:g.enabled)&&(g.series=[],g.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),d||(d=this.shouldForceNodeDataRefresh(s,c));const v=d||l?0:3;this.maybeResetAnimations(c),ZN("Chart.applyOptions() - update type",NL[v],{seriesStatus:c,forceNodeDataRefresh:d}),this.update(v,{forceNodeDataRefresh:d,newAnimationBatch:!0}),this.ctx.legendManager.clearData(),this.applyInitialState(a),this.firstApply=!1}applyInitialState(e){var t,i,n;const{annotationManager:o,chartTypeOriginator:s,historyManager:r,stateManager:a,zoomManager:l}=this.ctx,{initialState:d}=e;if("annotations"in e&&null!==(t=e.annotations)&&void 0!==t&&t.enabled&&null!=(null===d||void 0===d?void 0:d.annotations)){const e=d.annotations.map((e=>ES(e,o.getAnnotationTypeStyles(e.type))));a.setState(o,e)}null!=(null===d||void 0===d?void 0:d.chartType)&&a.setState(s,d.chartType),(null!==(i=e.navigator)&&void 0!==i&&i.enabled||null!==(n=e.zoom)&&void 0!==n&&n.enabled)&&null!=(null===d||void 0===d?void 0:d.zoom)&&a.setState(l,d.zoom),null!=(null===d||void 0===d?void 0:d.legend)&&this.updateLegends(d.legend),null!=d&&r.clear()}maybeResetAnimations(e){if("standalone"===this.mode)switch(e){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(e,t){const i=!!e.data||"data-change"===t||"replaced"===t,n=lP.getKeys(),o=Object.values(n).some((t=>null!=e[t])),s=null!=e.title&&null!=e.subtitle;return i||o||s}applyMiniChartOptions(e,t,i,n){var o,s;const r=null!==(o=null===n||void 0===n||null===(s=n.navigator)||void 0===s||null===(s=s.miniChart)||void 0===s?void 0:s.series)&&void 0!==o?o:null===n||void 0===n?void 0:n.series,a=this.applySeries(e,this.filterMiniChartSeries(t),this.filterMiniChartSeries(r));this.applyAxes(e,i,n,a,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const l=e.series;for(const p of l)p.properties.id=void 0;const d=e.axes,c=d.find((e=>"x"===e.direction));for(const p of d)p.gridLine.enabled=!1,p.label.enabled=p===c,p.tick.enabled=!1,p.interactionEnabled=!1;if(null!=c){var h,u;const e=null===(h=i.navigator)||void 0===h?void 0:h.miniChart,t=null===e||void 0===e?void 0:e.label,n=null===e||void 0===e||null===(u=e.label)||void 0===u?void 0:u.interval;if(c.line.enabled=!1,c.label.set(PS(t,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),c.tick.set(PS(n,["enabled","width","size","color","interval","step"])),"grouped-category"===c.type){c.label.enabled=!1,c.label.rotation=0;const{depthOptions:e}=c;if(0===e.length)e.set([{label:{enabled:!0}}]);else for(let t=1;t<e.length;t++)e[t].label.enabled=!1}const o=null===n||void 0===n?void 0:n.step;null!=o&&(c.interval.step=o)}}applyModules(e){const{type:t}=this.constructor;let i=!1;for(const o of nE.byType("root","legend")){const s=null!=e[o.optionsKey]&&o.chartTypes.includes(t);if(s!==this.modulesManager.isEnabled(o)){if(s){var n;if(this.modulesManager.addModule(o,(e=>e.moduleFactory(this.getModuleContext()))),"legend"===o.type)null===(n=this.modulesManager.getModule(o))||void 0===n||n.attachLegend(this.ctx.scene);this[o.optionsKey]=this.modulesManager.getModule(o)}else this.modulesManager.removeModule(o),delete this[o.optionsKey];i=!0}}return i}initSeriesDeclarationOrder(e){for(let t=0;t<e.length;t++)e[t].setSeriesIndex(t)}applySeries(e,t,i){if(!t)return"no-change";const n=function(e,t,i){const n=(e,t,i)=>{const n=[e];for(const o of bP)o in t&&null!=t[o]&&n.push("".concat(o,"=").concat(t[o]));return null!==i&&void 0!==i&&i.seriesGrouping&&n.push("seriesGrouping.groupId=".concat(null===i||void 0===i?void 0:i.seriesGrouping.groupId)),n.join(";")},o=new Map;let s=0;for(const u of e){var r;const e=n(u.type,u.properties,null===i||void 0===i?void 0:i[s]);o.has(e)||o.set(e,[]),null===(r=o.get(e))||void 0===r||r.push([u,s++])}const a=new Map;s=0;for(const u of t){var l;const e=n(u.type,u,u);a.has(e)||a.set(e,[]),null===(l=a.get(e))||void 0===l||l.push([u,s++])}if(![...o.keys()].some((e=>a.has(e))))return{status:"no-overlap",oldKeys:o.keys(),newKeys:a.keys()};const d=[];for(const[u,p]of a.entries())for(const[e,t]of p){var c,h;const n=o.get(u);if(null==n||n.length<1){d.push({opts:e,targetIdx:t,idx:t,status:"add"}),o.delete(u);continue}const[s,r]=n.shift(),a=kA(null!==(c=null===i||void 0===i?void 0:i[r])&&void 0!==c?c:{},null!==e&&void 0!==e?e:{}),{groupIndex:l,stackIndex:p}=null!==(h=null===a||void 0===a?void 0:a.seriesGrouping)&&void 0!==h?h:{};null!=l||null!=p?d.push({opts:e,series:s,diff:a,targetIdx:t,idx:r,status:"series-grouping"}):a?d.push({opts:e,series:s,diff:a,targetIdx:t,idx:r,status:"update"}):d.push({opts:e,series:s,targetIdx:t,idx:r,status:"no-op"}),0===n.length&&o.delete(u)}for(const u of o.values())for(const[e,t]of u)d.push({series:e,idx:t,targetIdx:-1,status:"remove"});return{status:"overlap",changes:d}}(e.series,t,i);if("no-overlap"===n.status){ZN("Chart.applySeries() - creating new series instances, status: ".concat(n.status),n);const i=t.map((e=>this.createSeries(e)));return this.initSeriesDeclarationOrder(i),e.series=i,"replaced"}ZN("Chart.applySeries() - matchResult",n);const o=[];let s=!1,r=!1,a=!1;const l=n.changes.toSorted(((e,t)=>e.targetIdx-t.targetIdx));for(const c of l){var d;switch(r||(r="series-grouping"===c.status),s||(s=null!=(null===(d=c.diff)||void 0===d?void 0:d.data)),a||(a="no-op"!==c.status),c.status){case"add":{const e=this.createSeries(c.opts);o.push(e),ZN("Chart.applySeries() - created new series",e);break}case"remove":ZN("Chart.applySeries() - removing series at previous idx ".concat(c.idx),c.series);break;case"no-op":o.push(c.series),ZN("Chart.applySeries() - no change to series at previous idx ".concat(c.idx),c.series);break;default:{const{series:e,diff:t,idx:i}=c;ZN("Chart.applySeries() - applying series diff previous idx ".concat(i),t,e),this.applySeriesValues(e,t),e.markNodeDataDirty(),o.push(e)}}}return this.initSeriesDeclarationOrder(o),ZN("Chart.applySeries() - final series instances",o),e.series=o,r?"series-grouping-change":s?"data-change":a?"updated":"no-op"}applyAxes(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!("axes"in t)||!t.axes)return!1;o=["axes[].type",...o];const{axes:s}=t;return"replaced"!==n&&e.axes.length===s.length&&e.axes.every(((e,t)=>e.type===s[t].type))&&xP(i)?(e.axes.forEach(((e,t)=>{var n,r;const a=kA(null!==(n=null===(r=i.axes)||void 0===r?void 0:r[t])&&void 0!==n?n:{},s[t]);ZN("Chart.applyAxes() - applying axis diff idx ".concat(t),a);RA(e,a,{path:"axes[".concat(t,"]"),skip:o})})),!0):(ZN("Chart.applyAxes() - creating new axes instances; seriesStatus: ".concat(n)),e.axes=this.createAxis(s,o),!0)}createSeries(e){const t=gP.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(t,e),this.applySeriesValues(t,e),t}applySeriesOptionModules(e,t){const i=e.createModuleContext(),n=e.getModuleMap();for(const o of nE.byType("series-option"))o.optionsKey in t&&o.seriesTypes.includes(e.type)&&n.addModule(o,(e=>e.moduleFactory(i)))}applySeriesValues(e,t){const i=e.getModuleMap(),{type:o,data:s,listeners:r,seriesGrouping:a,showInMiniChart:d}=t,c=n(t,jx);for(const n of sP)if("series-option"===n.type&&n.optionsKey in c){const e=i.getModule(n.optionsKey);if(e){const t=c[n.optionsKey];delete c[n.optionsKey],e.properties.set(t)}}e.properties.set(c),"data"in t&&e.setOptionsData(s),r&&this.registerListeners(e,r),"seriesGrouping"in t&&(e.seriesGrouping=null==a?void 0:l(l({},e.seriesGrouping),a))}createAxis(e,t){const i=[],n=this.getModuleContext();for(let o=0;o<e.length;o++){const s=e[o],r=oP.create(s.type,n);this.applyAxisModules(r,s),RA(r,s,{path:"axes[".concat(o,"]"),skip:t}),i.push(r)}return function(e){const t=[],i=[],n=[...yP];for(const s of e)s instanceof JT&&("string"===typeof(o=s.position)&&yP.includes(o)?i.push(s.position):t.push(s));var o;for(const s of t){let e;do{e=n.pop()}while(e&&i.includes(e));if(null==e)break;s.position=e}}(i),i}applyAxisModules(e,t){const i=e.createModuleContext(),n=e.getModuleMap();for(const o of nE.byType("axis-option")){const s=null!=t[o.optionsKey];s!==n.isEnabled(o)&&(s?(n.addModule(o,(e=>e.moduleFactory(i))),e[o.optionsKey]=n.getModule(o)):(n.removeModule(o),delete e[o.optionsKey]))}}registerListeners(e,t){e.clearEventListeners();for(const[i,n]of Object.entries(t))mS(n)&&e.addEventListener(i,n)}};qN.chartsInstances=new WeakMap,mw([OA({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),qN.chartsInstances.set(e,this))},oldValue(e){qN.chartsInstances.delete(e)}})],qN.prototype,"container",2),mw([OA({newValue(e){this.resize("width option",{inWidth:e})}})],qN.prototype,"width",2),mw([OA({newValue(e){this.resize("height option",{inHeight:e})}})],qN.prototype,"height",2),mw([OA({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],qN.prototype,"minWidth",2),mw([OA({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],qN.prototype,"minHeight",2),mw([hD(mD)],qN.prototype,"padding",2),mw([hD(mD)],qN.prototype,"seriesArea",2),mw([hD(mD)],qN.prototype,"keyboard",2),mw([hD(ik(["standalone","integrated"],"a chart mode"))],qN.prototype,"mode",2),mw([PA("chartCaptions.title")],qN.prototype,"title",2),mw([PA("chartCaptions.subtitle")],qN.prototype,"subtitle",2),mw([PA("chartCaptions.footnote")],qN.prototype,"footnote",2),mw([hD(fD)],qN.prototype,"suppressFieldDotNotation",2),mw([OA({changeValue(e,t){this.onAxisChange(e,t)}})],qN.prototype,"axes",2),mw([OA({changeValue(e,t){this.onSeriesChange(e,t)}})],qN.prototype,"series",2);var QN=qN,JN=class{constructor(e,t,i){this.root=new tF(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(t,i)=>e.distanceSquared(t,i)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},$N=class{constructor(e,t,i,n){this.nw=e,this.ne=t,this.sw=i,this.se=n}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},eF=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=null!==i&&void 0!==i?i:Ww.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(void 0===this.subdivisions?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:n}=this.boundary,{capacity:o}=this,s=this.maxdepth-1,r=i/2,a=n/2,l=new Ww(e,t,r,a),d=new Ww(e+r,t,r,a),c=new Ww(e,t+a,r,a),h=new Ww(e+r,t+a,r,a);return new $N(this.child(o,s,l),this.child(o,s,d),this.child(o,s,c),this.child(o,s,h))}},tF=class e extends eF{addCondition(e){const{x:t,y:i}=e.hitTester.midPoint;return this.boundary.containsPoint(t,i)}findCondition(e,t,i){const{best:n}=i;return 0!==n.distanceSquared&&this.boundary.distanceSquared(e,t)<n.distanceSquared}findAction(e,t,i){const n=Tw(e,t,this.elems,i.best.distanceSquared);void 0!==n.nearest&&n.distanceSquared<i.best.distanceSquared&&(i.best=n)}child(t,i,n){return new e(t,i,n)}},iF=class extends GP{constructor(){super(...arguments),this.showFocusBox=!0,this.clipFocusBox=!0}getScaleInformation(e){let{xScale:t,yScale:i}=e;return{isContinuousX:pM.is(t),isContinuousY:pM.is(i),xScaleType:null===t||void 0===t?void 0:t.type,yScaleType:null===i||void 0===i?void 0:i.type}}getModulePropertyDefinitions(){var e,t;const i=null===(e=this.axes.x)||void 0===e?void 0:e.scale,n=null===(t=this.axes.y)||void 0===t?void 0:t.scale;return this.moduleMap.mapModules((e=>e.getPropertyDefinitions(this.getScaleInformation({xScale:i,yScale:n})))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:n,processedData:o}=await e.request(this.id,null!==t&&void 0!==t?t:[],i);return this.dataModel=n,this.processedData=o,this.dispatch("data-processed",{dataModel:n,processedData:o}),{dataModel:n,processedData:o}}isProcessedDataAnimatable(){var e;const t=null===(e=this.processedData)||void 0===e||null===(e=e.reduced)||void 0===e?void 0:e.animationValidation;if(!t)return!0;const{orderedKeys:i,uniqueKeys:n}=t;return i&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(void 0===t||0===t.length)return;const i=this.computeFocusDatumIndex(e,t);if(void 0===i)return;const{showFocusBox:n,clipFocusBox:o}=this,s=t[i],r=l(l({},e),{},{datumIndex:i}),a=this.computeFocusBounds(r);return void 0!==a?{bounds:a,showFocusBox:n,clipFocusBox:o,datum:s,datumIndex:i}:void 0}computeFocusDatumIndex(e,t){const i=e=>{const{missing:i=!1,enabled:n=!0,focusable:o=!0}=t[e];return!i&&n&&o},n=t=>{for(;t>=0&&!i(t);)t+=e.datumIndexDelta;return-1===t?void 0:t},o=n=>{for(;n<t.length&&!i(n);)n+=e.datumIndexDelta;return n===t.length?void 0:n};let s;const r=Rw(0,e.datumIndex,t.length-1);if(e.datumIndexDelta<0)s=n(r);else if(e.datumIndexDelta>0)s=o(r);else{var a;s=null!==(a=o(r))&&void 0!==a?a:n(r)}return void 0===s?0===e.datumIndexDelta?void 0:e.datumIndex-e.datumIndexDelta:s}},nF=class extends lD{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};mw([hD(ND,{optional:!0})],nF.prototype,"fill",2),mw([hD(MD,{optional:!0})],nF.prototype,"fillOpacity",2),mw([hD(ND,{optional:!0})],nF.prototype,"stroke",2),mw([hD(SD,{optional:!0})],nF.prototype,"strokeWidth",2),mw([hD(MD,{optional:!0})],nF.prototype,"strokeOpacity",2),mw([hD(jD,{optional:!0})],nF.prototype,"lineDash",2),mw([hD(SD,{optional:!0})],nF.prototype,"lineDashOffset",2);var oF=class extends lD{};mw([hD(SD,{optional:!0})],oF.prototype,"strokeWidth",2),mw([hD(MD,{optional:!0})],oF.prototype,"dimOpacity",2),mw([hD(fD,{optional:!0})],oF.prototype,"enabled",2);var sF=class extends lD{constructor(){super(...arguments),this.color="black"}};mw([hD(ND,{optional:!0})],sF.prototype,"color",2);var rF=class extends lD{constructor(){super(...arguments),this.enabled=!0}};mw([hD(fD,{optional:!0})],rF.prototype,"enabled",2);var aF=class extends lD{constructor(){super(...arguments),this.item=new nF,this.series=new oF,this.text=new sF}};mw([hD(mD)],aF.prototype,"item",2),mw([hD(mD)],aF.prototype,"series",2),mw([hD(mD)],aF.prototype,"text",2);var lF=class extends lD{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new rF,this.highlightStyle=new aF}};mw([hD(bD,{optional:!0})],lF.prototype,"id",2),mw([hD(fD)],lF.prototype,"visible",2),mw([hD(xD,{optional:!0})],lF.prototype,"focusPriority",2),mw([hD(fD)],lF.prototype,"showInLegend",2),mw([hD(bD)],lF.prototype,"cursor",2),mw([hD(ek)],lF.prototype,"nodeClickRange",2),mw([hD(mD)],lF.prototype,"highlight",2),mw([hD(mD)],lF.prototype,"highlightStyle",2);var dF={x:["xKey"],y:["yKey"]},cF={x:["xName"],y:["yName"]},hF=class extends OP{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yKey=n.properties.yKey}},uF=class extends lF{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};mw([hD(bD,{optional:!0})],uF.prototype,"legendItemName",2),mw([hD(fD,{optional:!0})],uF.prototype,"pickOutsideVisibleMinorAxis",2);var pF=100,gF=class extends iF{constructor(e){let{pathsPerSeries:t=["path"],hasMarkers:i=!1,hasHighlightedLabels:o=!1,pathsZIndexSubOrderOffset:s=[],datumSelectionGarbageCollection:r=!0,markerSelectionGarbageCollection:a=!0,animationAlwaysUpdateSelections:d=!1,animationResetFns:c,directionKeys:h,directionNames:u}=e;if(super(l({directionKeys:h,directionNames:u,canHaveAxes:!0},n(e,Ux))),this.NodeEvent=hF,this.dataNodeGroup=this.contentGroup.appendChild(new cI({name:"".concat(this.id,"-series-dataNodes"),zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new cI({name:"".concat(this.id,"-series-markers"),zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new pI({name:"".concat(this.id,"-series-labels")})),this.labelSelection=LI.select(this.labelGroup,uA),this.highlightSelection=LI.select(this.highlightNode,(()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory())),this.highlightLabelSelection=LI.select(this.highlightLabel,uA),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=RI.create(),!h||!u)throw new Error("Unable to initialise series type ".concat(this.type));this.opts={pathsPerSeries:t,hasMarkers:i,hasHighlightedLabels:o,pathsZIndexSubOrderOffset:s,directionKeys:h,directionNames:u,animationResetFns:c,animationAlwaysUpdateSelections:d,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:a},this.paths=t.map((e=>new QP({name:"".concat(this.id,"-").concat(e)}))),this.datumSelection=LI.select(this.dataNodeGroup,(()=>this.nodeFactory()),r),this.markerSelection=LI.select(this.markerGroup,(()=>this.markerFactory()),a),this.animationState=new jA("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:e=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(e):this.animateWaitingUpdateReady(e)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:e=>this.resetAllAnimation(e),reset:"empty"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}get contextNodeData(){return this._contextNodeData}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths,t,i)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths,t,i)}attachPaths(e,t,i){for(const n of e)this.contentGroup.appendChild(n)}detachPaths(e,t,i){for(const n of e)this.contentGroup.removeChild(n)}renderToOffscreenCanvas(){const e=this.getNodeData();return null!=e&&e.length>pF}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e?this.animationState.transition("skip"):"disabled"===e&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}destroy(){super.destroy(),this._contextNodeData=void 0}update(e){var t;let{seriesRect:i}=e;const{visible:n,_contextNodeData:o}=this,s=(null===(t=this.ctx.highlightManager)||void 0===t||null===(t=t.getActiveHighlight())||void 0===t?void 0:t.series)===this,r=this.checkResize(i),a=this.updateHighlightSelection(s);this.updateSelections(n),this.updateNodes(a,s,n);const l=this.getAnimationData(i,o);l&&(r&&this.animationState.transition("resize",l),this.animationState.transition("update",l))}updateSelections(e){var t;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((e||!i)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const e=this.isProcessedDataAnimatable();var n;if(this._contextNodeData)null!==(n=(t=this._contextNodeData).animationValid)&&void 0!==n||(t.animationValid=e);this.minRectsCache.dirtyNodeData=!0;const{dataModel:i,processedData:o}=this;void 0!==i&&void 0!==o&&this.dispatch("data-update",{dataModel:i,processedData:o})}this.updateSeriesSelections()}}updateSeriesSelections(e){var t;const{datumSelection:i,labelSelection:n,markerSelection:o,paths:s}=this,r=this._contextNodeData;if(!r)return;const{nodeData:a,labelData:l,itemId:d}=r;this.updatePaths({seriesHighlighted:e,itemId:d,contextData:r,paths:s}),this.datumSelection=this.updateDatumSelection({nodeData:a,datumSelection:i}),this.labelSelection=null!==(t=this.updateLabelSelection({labelData:l,labelSelection:n}))&&void 0!==t?t:n,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:a,markerSelection:o}))}markerFactory(){return new(DN())}updateNodes(e,t,i){var n;const{highlightSelection:o,highlightLabelSelection:s,opts:{hasMarkers:r,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),d=this.visible&&null!=this._contextNodeData&&i;this.contentGroup.visible=l||d,this.highlightGroup.visible=(l||d)&&t;const c=this.getOpacity();r?(this.updateMarkerNodes({markerSelection:o,isHighlight:!0}),this.animationState.transition("highlightMarkers",o)):(this.updateDatumNodes({datumSelection:o,isHighlight:!0}),this.animationState.transition("highlight",o)),a&&this.updateLabelNodes({labelSelection:s});const{dataNodeGroup:h,markerGroup:u,datumSelection:p,labelSelection:g,markerSelection:m,paths:v,labelGroup:f}=this,{itemId:y}=null!==(n=this.contextNodeData)&&void 0!==n?n:{};h.opacity=c,h.visible=l||d,f.visible=d,r&&(u.opacity=c,u.visible=d),f&&(f.opacity=c),this.updatePathNodes({seriesHighlighted:t,itemId:y,paths:v,opacity:c,visible:d,animationEnabled:l}),h.visible&&(this.updateDatumNodes({datumSelection:p,highlightedItems:e,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:g}),r&&this.updateMarkerNodes({markerSelection:m,isHighlight:!1}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum&&e.itemId===t.itemId));return 0===i.length?void 0:i}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(e){var t;const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:o}=this;if(!o)return;const s=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),r=e&&null!==s&&void 0!==s&&s.datum?s:void 0;let a,l;if(null!=r){const e=this.isLabelEnabled(),{labelData:t,nodeData:i}=o;l=this.getHighlightData(i,r),a=e?this.getHighlightLabelData(t,r):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:n}),l}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)!0!==e.datum.missing&&(yield e)}getQuadTree(){if(void 0===this.quadtree){const{width:e,height:t}=this.ctx.scene.canvas,i=new Ww(0,0,e,t);this.quadtree=new JN(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodeExactShape(e){const t=super.pickNodeExactShape(e);if(t)return t;const{x:i,y:n}=e,{opts:{hasMarkers:o}}=this;let s;const{dataNodeGroup:r,markerGroup:a}=this;if(s=r.pickNode(i,n),!s&&o&&(s=null===a||void 0===a?void 0:a.pickNode(i,n)),s&&!0!==s.datum.missing)return{datum:s.datum,distance:0};for(const d of this.moduleMap.modules()){var l;const{datum:t}=null!==(l=d.pickNodeExact(e))&&void 0!==l?l:{};if(null!=t&&!0!==(null===t||void 0===t?void 0:t.missing))return{datum:t,distance:0}}}pickNodeClosestDatum(e){const{x:t,y:i}=e,{axes:n,_contextNodeData:o}=this;if(!o)return;const s=n.x,r=n.y,a=t,l=i;let d,c=1/0;for(const p of o.nodeData){const{point:{x:e=NaN,y:t=NaN}={}}=p;if(isNaN(e)||isNaN(t))continue;if(!((null===s||void 0===s?void 0:s.inRange(e))&&(null===r||void 0===r?void 0:r.inRange(t))))continue;const i=Math.max((a-e)**2+(l-t)**2,0);i<c&&(c=i,d=p)}for(const p of this.moduleMap.modules()){const t=p.pickNodeNearest(e);if(void 0!==t&&t.distanceSquared<c){c=t.distanceSquared,d=t.datum;break}}if(d){var h,u;return{datum:d,distance:Math.max(Math.sqrt(c)-(null!==(h=null===(u=d.point)||void 0===u?void 0:u.size)&&void 0!==h?h:0),0)}}}pickNodeMainAxisFirst(e,t){const{x:i,y:n}=e,{axes:o,_contextNodeData:s}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!s)return;const a=o.x,l=o.y,d=[a,l].filter(eE.is).map((e=>e.direction));if(t&&0===d.length)return;const[c="x"]=d,h=[i,n];"x"!==c&&h.reverse();const u=[1/0,1/0];let p;for(const y of s.nodeData){var g,m;const{x:e=NaN,y:t=NaN}=null!==(g=null!==(m=y.point)&&void 0!==m?m:y.midPoint)&&void 0!==g?g:{};if(isNaN(e)||isNaN(t)||!0===y.missing)continue;const i=[null===a||void 0===a?void 0:a.inRange(e),null===l||void 0===l?void 0:l.inRange(t)];if("x"!==c&&i.reverse(),!i[0]||!r&&!i[1])continue;const n=[e,t];"x"!==c&&n.reverse();let o=!0;for(let s=0;s<n.length;s++){const e=Math.abs(n[s]-h[s]);if(e>u[s]){o=!1;break}e<u[s]&&(u[s]=e,u.fill(1/0,s+1,u.length))}o&&(p=y)}if(p){var v,f;let t=Math.max(u[0]**2+u[1]**2-(null!==(v=null===(f=p.point)||void 0===f?void 0:f.size)&&void 0!==v?v:0),0);for(const i of this.moduleMap.modules()){const n=i.pickNodeMainAxisFirst(e);if(void 0!==n&&n.distanceSquared<t){p=n.datum,t=n.distanceSquared;break}}return{datum:p,distance:Math.sqrt(t)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}getMinRects(e,t){const{dirtyNodeData:i,sizeCache:n,minRect:o,minVisibleRect:s}=this.minRectsCache,r=JSON.stringify({width:e,height:t});if(!(r!==n)&&!i&&o&&s)return{minRect:o,minVisibleRect:s};const a=this.computeMinRects(e,t);return this.minRectsCache={dirtyNodeData:!1,sizeCache:r,minRect:null===a||void 0===a?void 0:a.minRect,minVisibleRect:null===a||void 0===a?void 0:a.minVisibleRect},a}computeMinRects(e,t){var i,n;const o=this._contextNodeData;if(null===o||void 0===o||!o.nodeData.length)return;const{nodeData:s}=o,r=Array(s.length),a=Array(s.length);for(const[M,{midPoint:D}]of s.entries()){var l,d;r[M]=null!==(l=null===D||void 0===D?void 0:D.x)&&void 0!==l?l:0,a[M]=null!==(d=null===D||void 0===D?void 0:D.y)&&void 0!==d?d:0}let c,h,u,p;r.sort(((e,t)=>e-t)),a.sort(((e,t)=>e-t));let g=0,m=0;for(let M=1;M<s.length;M++){var v,f,y,b;r[M]>=0&&(null!==(v=c)&&void 0!==v||(c=M)),r[M]>e&&(null!==(f=h)&&void 0!==f||(h=M)),a[M]>=0&&(null!==(y=u)&&void 0!==y||(u=M)),a[M]>t&&(null!==(b=p)&&void 0!==b||(p=M)),g=Math.max(g,r[M]-r[M-1]),m=Math.max(m,a[M]-a[M-1])}null!==(i=h)&&void 0!==i||(h=s.length),null!==(n=p)&&void 0!==n||(p=s.length);const C=null!=c&&null!=h?r.slice(c,h):[],x=null!=u&&null!=p?a.slice(u,p):[];let w=0,S=0;for(let M=1;M<Math.max(C.length,x.length);M++){const e=C[M],t=C[M-1],i=x[M],n=x[M-1];null!=e&&null!=t&&(w=Math.max(w,e-t)),null!=i&&null!=n&&(S=Math.max(S,i-n))}return{minRect:new Ww(0,0,g,m),minVisibleRect:new Ww(0,0,w,S)}}updateHighlightSelectionItem(e){const{opts:{hasMarkers:t}}=this,{items:i,highlightSelection:n}=e,o=null!==i&&void 0!==i?i:[];if(t){const e=n;return this.updateMarkerSelection({nodeData:o,markerSelection:e})}return this.updateDatumSelection({nodeData:o,datumSelection:n})}updateHighlightSelectionLabel(e){var t;return this.updateLabelSelection({labelData:null!==(t=e.items)&&void 0!==t?t:[],labelSelection:e.highlightLabelSelection})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateMarkerSelection(e){return e.markerSelection}updateMarkerNodes(e){}updatePaths(e){e.paths.forEach((e=>e.visible=!1))}updatePathNodes(e){const{paths:t,opacity:i,visible:n}=e;for(const o of t)o.opacity=i,o.visible=n}resetPathAnimation(e){var t,i;const{path:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&e.paths.forEach((e=>{uk([e],n)}))}resetDatumAnimation(e){var t,i;const{datum:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&uk([e.datumSelection],n)}resetLabelAnimation(e){var t,i;const{label:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&uk([e.labelSelection],n)}resetMarkerAnimation(e){var t,i;const{marker:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&this.opts.hasMarkers&&uk([e.markerSelection],n)}resetAllAnimation(e){var t;this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),this.resetMarkerAnimation(e),!1===(null===(t=e.contextData)||void 0===t?void 0:t.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var t,i;const{datum:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&uk([e],n)}animateReadyHighlightMarkers(e){var t,i;const{marker:n}=null!==(t=null===(i=this.opts)||void 0===i?void 0:i.animationResetFns)&&void 0!==t?t:{};n&&uk([e],n)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){const{_contextNodeData:i}=this;if(!i)return;return{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof Gk){const{range:t,domain:i}=e;return{type:"log",convert:t=>e.convert(t),domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof pM){const{range:t}=e,i=e.getDomain();return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof aD){const{domain:t}=e;return{type:"category",domain:t,inset:e.inset,step:e.step}}}calculateScaling(){const e={};for(const t of Object.values(dk)){const i=this.axes[t];if(!i)continue;const n=this.getScaling(i.scale);null!=n&&(e[t]=n)}return e}},mF=["top","right","bottom","left"],vF=class e extends QN{constructor(e,t){super(e,t),this.paired=!0,this.firstSeriesTranslation=!0,this.lastUpdateClipRect=void 0}onAxisChange(e,t){super.onAxisChange(e,t),null!=this.ctx&&this.ctx.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.firstSeriesTranslation=!0}getChartType(){return"cartesian"}setRootClipRects(e){const{seriesRoot:t,annotationRoot:i}=this;t.setClipRect(e),i.setClipRect(e)}performLayout(e){const{firstSeriesTranslation:t,seriesRoot:i,annotationRoot:n}=this,{clipSeries:o,seriesRect:s,visible:r}=this.updateAxes(e.layoutBox);this.seriesRoot.visible=r,this.seriesRect=s,this.animationRect=e.layoutBox;const{x:a,y:l}=s;if(t){for(const e of[i,n])e.translationX=Math.floor(a),e.translationY=Math.floor(l);this.firstSeriesTranslation=!1}else{const{translationX:e,translationY:t}=i;nM(this.id,"seriesRect",this.ctx.animationManager,[i,n],{translationX:e,translationY:t},{translationX:Math.floor(a),translationY:Math.floor(l)},{phase:"update"})}const d=s.clone().grow(this.seriesArea.padding),c=this.seriesArea.clip||o?d:void 0,{lastUpdateClipRect:h}=this;this.lastUpdateClipRect=c,this.ctx.animationManager.isActive()&&null!=h?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:h,to:d,onUpdate:e=>this.setRootClipRects(e),onComplete:()=>this.setRootClipRects(c)}):this.setRootClipRects(c),this.ctx.layoutManager.emitLayoutComplete(e,{axes:this.axes.map((e=>e.getLayoutState())),series:{visible:r,rect:s,paddedRect:d,shouldFlipXY:this.shouldFlipXY()},clipSeries:o})}updateAxes(e){const{clipSeries:t,seriesRect:i,overflows:n}=this.resolveAxesLayout(e);for(const o of this.axes)o.update(),o.setCrossLinesVisible(!n),this.clipAxis(o,i,e);return{clipSeries:t,seriesRect:i,visible:!n}}resolveAxesLayout(e){let t,i,n=0;do{var o;if(i=null!==(o=t)&&void 0!==o?o:this.getDefaultState(),t=this.updateAxesPass(new Map(i.axisAreaWidths),e.clone()),n++>10){cM.warn("Max iterations reached. Unable to stabilize axes layout.");break}}while(!this.isLayoutStable(t,i));return this.lastAreaWidths=t.axisAreaWidths,t}updateAxesPass(t,i){var n,o,s,r;const a=new Map,l={};let d=!1,c=!1;for(const e of mF){const t=this.seriesArea.padding[e],n=this.axes.findLast((t=>t.position===e));n?n.seriesAreaPadding=t:i.shrink(t,e)}const h=(null!==(n=t.get("left"))&&void 0!==n?n:0)+(null!==(o=t.get("right"))&&void 0!==o?o:0),u=(null!==(s=t.get("top"))&&void 0!==s?s:0)+(null!==(r=t.get("bottom"))&&void 0!==r?r:0),p=this.buildCrossLinePadding(t);i.width<=h+p.hPadding||i.height<=u+p.vPadding?d=!0:i.shrink(p);const g=i.clone().shrink(Object.fromEntries(t));for(const e of this.axes){var m,v;const{position:t="left",direction:i}=e;this.sizeAxis(e,g,t);const n=this.getSyncedDomain(e),o="y"===i,s=e.calculateLayout(n,e.nice?l[i]:void 0);null!==(m=l[i])&&void 0!==m||(l[i]=s.primaryTickCount),c||(c=e.dataDomain.clipped||e.visibleRange[0]>0||e.visibleRange[1]<1),a.set(e.id,Math.ceil(null!==(v=e.thickness)&&void 0!==v?v:o?s.bbox.width:s.bbox.height))}const f=Object.entries(bM(this.axes,(e=>{var t;return null!==(t=e.position)&&void 0!==t?t:"left"}))),{width:y,height:b,canvas:C}=this.ctx.scene,x=new Map,w=new Map;for(const[M,D]of f){let t="left"===M||"right"===M?b%C.pixelRatio:y%C.pixelRatio,i=0;for(const n of D){var S;w.set(n.id,t);const o=null!==(S=a.get(n.id))&&void 0!==S?S:0;i=Math.max(i,t+o),n.layoutConstraints.stacked&&(t+=o+e.AxesPadding)}x.set(M,Math.ceil(i))}for(const[e,M]of f)this.positionAxes({axes:M,position:e,axisWidths:a,axisOffsets:w,axisAreaWidths:x,axisBound:i,seriesRect:g});return{clipSeries:c,seriesRect:g,axisAreaWidths:x,overflows:d}}buildCrossLinePadding(e){const t={top:0,right:0,bottom:0,left:0,hPadding:0,vPadding:0};this.axes.forEach((e=>{var i;null===(i=e.crossLines)||void 0===i||i.forEach((e=>{var i;null===(i=e.calculatePadding)||void 0===i||i.call(e,t)}))}));for(const[n,o=0]of Object.entries(t)){var i;t[n]=Math.max(o-(null!==(i=e.get(n))&&void 0!==i?i:0),0)}return t.hPadding=t.left+t.right,t.vPadding=t.top+t.bottom,t}clampToOutsideSeriesRect(e,t,i,n){const o="x"===i?e.x:e.y,s="x"===i?e.width:e.height;return 1===n?Math.min(t,o+s):Math.max(t,o)}getSyncedDomain(e){const t=this.modulesManager.getModule("sync");if(null===t||void 0===t||!t.enabled)return;const i=t.getSyncedDomain(e);if(i&&e.dataDomain.domain.length){let n;const{domain:o}=e.scale;if(pM.is(e.scale)){const[e,t]=Pw(i);n=e!==o[0]||t!==o[1]}else n=!vM(i,o);n&&!this.skipSync&&t.updateSiblings()}return i}sizeAxis(e,t,i){const n=e instanceof eE,o="left"===i||"right"===i,{width:s,height:r}=t,a=o?r:s;let l=0,d=a,{min:c,max:h}=this.ctx.zoomManager.getAxisZoom(e.id);const{width:u,unit:p,align:g}=e.layoutConstraints;d="px"===p?l+u:d*u/100,"end"===g&&(l=a-(d-l),d=a),o&&(n?[c,h]=[1-h,1-c]:[l,d]=[d,l]),e.range=[l,d],e.visibleRange=[c,h],e.gridLength=o?s:r}positionAxes(e){var t;const{axes:i,axisBound:n,axisWidths:o,axisOffsets:s,axisAreaWidths:r,seriesRect:a,position:l}=e,d=null!==(t=r.get(l))&&void 0!==t?t:0;let c="x",h="y",u=1;"top"!==l&&"bottom"!==l||(c="y",h="x");let p=n[c];"right"!==l&&"bottom"!==l||(u=-1,p+="x"===c?n.width:n.height);for(const f of i){var g,m,v;const e=null!==(g=r.get("x"===h?"left":"top"))&&void 0!==g?g:0,t=null!==(m=o.get(f.id))&&void 0!==m?m:0,i=null!==(v=s.get(f.id))&&void 0!==v?v:0;f.gridPadding=d-i-t,f.translation[h]=n[h]+e,f.translation[c]=this.clampToOutsideSeriesRect(a,p+u*(i+t),c,u)}}shouldFlipXY(){return this.series.every((e=>e instanceof gF&&e.shouldFlipXY()))}getDefaultState(){const e=new Map;if(this.lastAreaWidths)for(const{position:t="left"}of this.axes){const i=this.lastAreaWidths.get(t);null!=i&&e.set(t,i)}return{axisAreaWidths:e,clipSeries:!1,overflows:!1}}isLayoutStable(e,t){if(t.overflows!==e.overflows||t.clipSeries!==e.clipSeries)return!1;for(const i of e.axisAreaWidths.keys())if(!t.axisAreaWidths.has(i))return!1;for(const[i,n]of t.axisAreaWidths.entries()){const t=e.axisAreaWidths.get(i);if((null!=n||null!=t)&&n!==t)return!1}return!0}clipAxis(e,t,i){var n,o,s,r;const a=Math.ceil(null!==(n=null===(o=e.gridLine)||void 0===o?void 0:o.width)&&void 0!==n?n:0),l=Math.ceil(null!==(s=null===(r=e.line)||void 0===r?void 0:r.width)&&void 0!==s?s:0);let{width:d,height:c}=t;switch(d+="x"===e.direction?a:l,c+="y"===e.direction?a:l,e.clipGrid(t.x,t.y,d,c),e.position){case"left":case"right":e.clipTickLines(i.x,t.y-a,i.width+a,t.height+2*a);break;case"top":case"bottom":e.clipTickLines(t.x-a,i.y,t.width+2*a,i.height+a)}}};vF.className="CartesianChart",vF.type="cartesian",vF.AxesPadding=15;var fF=vF,yF=class e{constructor(e,t,i){this.factoryApi=t,this.licenseManager=i,this.chart=e}static isInstance(t){var i;return t instanceof e||("AgChartInstanceProxy"===(null===(i=t.constructor)||void 0===i?void 0:i.name)&&null!=t.chart||null!=t.chart&&this.validateImplementation(t))}static validateImplementation(e){var t;const i=Object.keys(null!==(t=Object.getPrototypeOf(e))&&void 0!==t?t:{});return["getOptions","destroy"].every((e=>i.includes(e)))}async update(e){this.factoryApi.update(e,this),await this.chart.waitForUpdate()}async updateDelta(e){this.factoryApi.updateUserDelta(this,e),await this.chart.waitForUpdate()}getOptions(){const e=AA(this.chart.getOptions());for(const t of Object.keys(e))t.startsWith("_")&&delete e[t];return e}waitForUpdate(){return this.chart.waitForUpdate()}async download(e){const t=await this.prepareResizedChart(this,e);try{t.chart.download(null===e||void 0===e?void 0:e.fileName,null===e||void 0===e?void 0:e.fileFormat)}finally{t.destroy()}}async __toSVG(e){const t=await this.prepareResizedChart(this,l({width:600,height:300},e));try{return t.chart.toSVG()}finally{t.destroy()}}async getImageDataURL(e){const t=await this.prepareResizedChart(this,e);try{return t.chart.getCanvasDataURL(null===e||void 0===e?void 0:e.fileFormat)}finally{t.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(e){const t=this.getEnabledOriginators();t.includes(this.chart.ctx.legendManager)?(await this.setStateOriginators(e,t.filter((e=>e!==this.chart.ctx.zoomManager))),await this.setStateOriginators(e,[this.chart.ctx.zoomManager])):await this.setStateOriginators(e,t)}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.chart=null):(this.chart.publicApi=void 0,this.chart.destroy())}async prepareResizedChart(e){var t,i,n,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chart:r}=e,a=null!==(t=null!==(i=s.width)&&void 0!==i?i:r.width)&&void 0!==t?t:r.ctx.scene.canvas.width,d=null!==(n=null!==(o=s.height)&&void 0!==o?o:r.height)&&void 0!==n?n:r.ctx.scene.canvas.height,c=e.getState(),h=nE.hasEnterpriseModules(),u=l(l({},r.chartOptions.processedOverrides),{},{container:document.createElement("div"),width:a,height:d}),p=r.getOptions();var g;h&&(u.animation={enabled:!1},null!==(g=this.licenseManager)&&void 0!==g&&g.isDisplayWatermark()&&(u.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const m=l({},r.chartOptions.specialOverrides),v=l({},r.chartOptions.optionMetadata);null!=s.width&&null!=s.height&&(m.overrideDevicePixelRatio=1);const f=this.factoryApi.create(p,u,m,v);await f.setState(c),f.chart.ctx.zoomManager.updateZoom("chartProxy",r.ctx.zoomManager.getZoom()),f.chart.ctx.legendManager.clearData(),f.chart.ctx.legendManager.update(r.ctx.legendManager.getData()),r.series.forEach(((e,t)=>{e.visible||(f.chart.series[t].visible=!1)}));const y=[];for(const l of r.modulesManager.legends()){var b,C;y.push(null!==(b=null===(C=l.legend.pagination)||void 0===C?void 0:C.currentPage)&&void 0!==b?b:0)}for(const l of f.chart.modulesManager.legends()){var x;const e=null!==(x=y.shift())&&void 0!==x?x:0;l.legend.pagination&&l.legend.pagination.setPage(e)}return f.chart.update(0,{forceNodeDataRefresh:!0}),await f.waitForUpdate(),f}getEnabledOriginators(){var e,t,i;const{chartOptions:{processedOptions:n,optionMetadata:o},ctx:{annotationManager:s,chartTypeOriginator:r,zoomManager:a,legendManager:l}}=this.chart,d=[];"annotations"in n&&null!==(e=n.annotations)&&void 0!==e&&e.enabled&&d.push(s);return"price-volume"===o.presetType&&d.push(r),(null!==(t=n.navigator)&&void 0!==t&&t.enabled||null!==(i=n.zoom)&&void 0!==i&&i.enabled)&&d.push(a),"legend"in this.chart&&d.push(l),d}async setStateOriginators(e,t){this.factoryApi.caretaker.restore(e,...t),this.chart.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart.waitForUpdate()}};yF.chartInstances=new WeakMap,mw([OA({oldValue(e){e.destroyed||(e.publicApi=void 0),yF.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,yF.chartInstances.set(e,this))}})],yF.prototype,"chart",2);var bF=yF,CF=class extends tE{constructor(e){super(),this.ctx=e,this.localeText=void 0}};mw([BA((e=>{e.ctx.localeManager.setLocaleText(e.localeText)})),hD(vD,{optional:!0})],CF.prototype,"localeText",2),mw([BA((e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)})),hD(yD,{optional:!0})],CF.prototype,"getLocaleText",2);var xF={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new CF(e)};var wF=new WeakMap;function SF(e,t){var i,n;const o=JSON.stringify(e,null,0);var s;(wF.has(t)||wF.set(t,new Map),null!==(i=wF.get(t))&&void 0!==i&&i.has(o))||(null===(s=wF.get(t))||void 0===s||s.set(o,t(e)));return null===(n=wF.get(t))||void 0===n?void 0:n.get(o)}function MF(e){const t=new Map,i={},n=new WeakMap;return function(){const o=0===arguments.length?[i]:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.map((e=>"object"===typeof e||"symbol"===typeof e?e:(t.has(e)||t.set(e,{v:e}),t.get(e))))}(...arguments);let s=n;for(const e of o.slice(0,-1))s.has(e)||s.set(e,new WeakMap),s=s.get(e);const r=o.at(-1);let a=s.get(r);return a||(a=e(...arguments),s.set(r,a)),a}}function DF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of e)"number"===typeof i&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function kF(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:e=>DF(e)}}function IF(e,t){return{id:e,type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:e=>DF(e),groupAggregateFunction:function(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return n[0]+=null!==(t=null===e||void 0===e?void 0:e[0])&&void 0!==t?t:0,n[1]+=null!==(i=null===e||void 0===e?void 0:e[1])&&void 0!==i?i:0,n}}}function AF(e){return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return n[0]+=null!==(t=null===e||void 0===e?void 0:e[0])&&void 0!==t?t:0,n[1]+=null!==(i=null===e||void 0===e?void 0:e[1])&&void 0!==i?i:0,n}}}function TF(e,t){const i={id:e,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:e=>DF(e),groupAggregateFunction:function(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];return n[0]+=null!==(t=null===e||void 0===e?void 0:e[0])&&void 0!==t?t:0,n[1]+=null!==(i=null===e||void 0===e?void 0:e[1])&&void 0!==i?i:0,n[2]++,n},finalFunction:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const t=e[0]+e[1];return t>=0?[0,t/e[2]]:[t/e[2],0]}};return i}function EF(e,t,i){const n={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=i[1]-i[0];return t.aggregateFunction(e).map((e=>e/n))}};return t.groupAggregateFunction&&(n.groupAggregateFunction=t.groupAggregateFunction),n}function RF(e){return()=>{let t=0;return i=>xS(i)?(t+=e?Math.max(0,i):i,t):i}}function LF(){return()=>{let e=0;return t=>{if(!xS(t))return t;const i=e;return e+=t,i}}}function PF(e){return null!=e&&tT(e)}function NF(e){return null!=e}function FF(e){switch(e){case"number":case"log":case"ordinal-time":case"time":case"color":return PF;default:return NF}}function OF(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function BF(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l({property:e,type:"key",valueType:OF(t),validation:FF(t)},i)}function GF(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l({property:e,type:"value",valueType:OF(t),validation:FF(t)},i)}function zF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{min:i=-1/0,max:o=1/0}=t;return l({type:"value",property:e,valueType:"range",validation:PF,processor:()=>e=>xS(e)?Rw(i,e,o):e},n(t,Kx))}function _F(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{onlyPositive:o}=i;return l(l({},GF(e,t,n(i,Yx))),{},{processor:RF(o)})}function VF(e,t){return l(l({},GF(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),{},{processor:LF()})}function HF(e,t,i,n,o){return[GF(e,o,n),tO(n.groupId,t,i,n.separateNegative),...null!=n.rangeId?[(s=n.rangeId,r=n.groupId,{id:s,matchGroupIds:[r],type:"aggregate",aggregateFunction:e=>WL.extendDomain(e)})]:[]];var s,r}function WF(e,t,i){return[GF(e,t,i),nO(i.groupId)]}var jF={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],n=Math.abs(i-e);return e=i,!isNaN(n)&&n>0&&n<t?n:t}}},UF={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=NaN;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],n=Math.abs(i-e);return e=i,!isNaN(n)&&n>0&&n>t?n:t}}},KF={type:"processor",property:"sortedGroupDomain",calculate:e=>{let{domain:{groups:t}}=e;return null===t||void 0===t?void 0:t.slice().sort(((e,t)=>{for(let i=0;i<e.length;i++){const n=e[i]-t[i];if(0!==n)return n}return 0}))}};function YF(e){let{normaliseTo:t,mode:i}=e;const n=(e,i)=>{if(0===i)return null;const n=(null!==e&&void 0!==e?e:0)*t/i;return n>=0?Math.min(t,n):Math.max(-t,n)};return()=>()=>(e,t,o)=>{const s=function(e,t,i,n){const o=[0,0];for(const s of i){const i=t[s][n];if(null==i)continue;const r="number"===typeof i?i:Math.max(...i.map((e=>null!==e&&void 0!==e?e:0))),a=r<0?0:1;"sum"===e?o[a]+=r:o[a]=0===a?Math.min(o[a],r):Math.max(o[a],r)}return Math.max(Math.abs(o[0]),o[1])}(i,e,t,o);for(const i of t){const t=e[i],r=t[o];null!=r?t[o]="number"===typeof r?n(r,s):r.map((e=>n(e,s))):t[o]=void 0}}}function ZF(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:SF({normaliseTo:t,mode:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sum"},YF)}}function XF(e){let{normaliseTo:t,zeroDomain:i,rangeMin:n,rangeMax:o}=e;const s=t[1]-t[0],r=(e,n,o)=>{const r=t[0]+(e-n)/o*s;return 0===o?i:r>=t[1]?t[1]:r<t[0]?t[0]:r};return()=>(e,i)=>{let[s,a]=e.domain.values[i];null!=n&&(s=n),null!=o&&(a=o);const l=a-s;e.domain.values[i]=[t[0],t[1]];const{rawData:d}=e,c=e.columns[i];for(let t=0;t<d.length;t+=1)c[t]=r(c[t],s,l)}}function qF(e,t,i,n,o){return{type:"property-value-processor",property:e,adjust:SF({normaliseTo:t,rangeMin:n,rangeMax:o,zeroDomain:i},XF)}}var QF=(e,t,i,n)=>{var o;let s=3;if("category"===t.valueType)return i.length!==e&&(s&=-2),s;let r=null===(o=n[0])||void 0===o?void 0:o.valueOf();for(let l=1;0!==s&&l<n.length;l++){var a;const e=null===(a=n[l])||void 0===a?void 0:a.valueOf();(!Number.isFinite(e)||r>e)&&(s&=-3),Number.isFinite(e)&&r===e&&(s&=-2),r=e}return s};function JF(e){return{type:"processor",property:"animationValidation",calculate(t){const{keys:i,values:n}=t.defs,{input:{count:o},domain:{keys:s,values:r},rawData:a,keys:l,columns:d}=t;let c=3;if(0!==a.length){for(let e=0;0!==c&&e<i.length;e++)c&=QF(o,i[e],s[e],l[e]);for(let t=0;0!==c&&t<n.length;t++){const i=n[t];!0!==!(null!==e&&void 0!==e&&e.includes(i.id))&&(c&=QF(o,i,r[t],d[t]))}}return{uniqueKeys:0!==(1&c),orderedKeys:0!==(2&c)}}}}function $F(e){let{mode:t,separateNegative:i}=e;return()=>()=>(e,n,o)=>{const s=[0,0];for(const r of n){const n=e[r],a=n[o],l=Bw(a)&&i?0:1;xS(a)&&("normal"===t&&(s[l]+=a),n[o]=s[l],"trailing"===t&&(s[l]+=a))}}}function eO(e){let{mode:t,sum:i}=e;return()=>{const e=[];let n=!0;return()=>(o,s,r)=>{let a=0;for(const l of s){const s=o[l],d=s[r],c=n&&"current"===i?0:e[l];e[l]=d;const h="current"===i?d:c;xS(d)&&xS(c)?("normal"===t&&(a+=h),s[r]=a,"trailing"===t&&(a+=h)):s[r]=a}n=!1}}}function tO(e,t,i){let n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.startsWith("window")){n=SF({mode:t.endsWith("-trailing")?"trailing":"normal",sum:i},eO)}else n=SF({mode:t,separateNegative:o},$F);return{type:"group-value-processor",matchGroupIds:[e],adjust:n}}function iO(){return()=>(e,t,i)=>{const n=new Float64Array(32);let o=0;for(const s of t){const t=e[s],r=t[i];n[o]=Number.isFinite(r)?r:NaN,o+=1,t[i]=n.subarray(0,o)}}}function nO(e){return{type:"group-value-processor",matchGroupIds:[e],adjust:iO}}function oO(e){var t;return null!==(t=e.id)&&void 0!==t?t:e.property}function sO(e,t,i,n,o){for(const{previousIndex:s,nextIndex:r}of i){const i=e[s],a=t[r];if(i[n]!==a[o])return!1}return!0}function rO(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{type:"processor",property:"diff",calculate(n,o){const s=new Map,r=new Map,a=new Map,d=new Map,c=t.keys,h=n.keys,u=t.columns,p=n.columns,g=function(e,t,i){const n=new Map,o=t.defs.values;for(let d=0;d<o.length;d+=1){var s;const t=o[d];if(!1===(null===(s=t.scopes)||void 0===s?void 0:s.includes(e)))continue;const i=oO(t);if(n.has(i))return;n.set(i,d)}const r=[],a=i.defs.values;for(let d=0;d<a.length;d+=1){var l;const t=a[d];if(!1===(null===(l=t.scopes)||void 0===l?void 0:l.includes(e)))continue;const i=oO(t),o=n.get(i);if(null==o)return;n.delete(i),r.push({previousIndex:o,nextIndex:d})}if(0===n.size)return r}(e,t,n);if(null==g)return o;const m=Math.max(t.rawData.length,n.rawData.length);for(let e=0;e<m;e++){const o=e<t.rawData.length,l=e<n.rawData.length,m=o?JL(c,e):void 0,v=null!=m?aO(m):"",f=l?JL(h,e):void 0,y=null!=f?aO(f):"";if(l&&o&&v===y){sO(u,p,g,e,e)||a.set(y,e);continue}const b=d.get(y);null!=b?(!i&&sO(u,p,g,b,e)||(a.set(y,e),s.set(y,e)),d.delete(y)):l&&r.set(y,e);const C=r.get(v);null!=C?(!i&&sO(u,p,g,C,e)||(a.set(v,e),s.set(v,e)),r.delete(v)):o&&(a.delete(v),d.set(v,e))}const v={changed:r.size>0||a.size>0||d.size>0,added:new Set(r.keys()),updated:new Set(a.keys()),removed:new Set(d.keys()),moved:new Set(s.keys())};return l(l({},o),{},{[e]:v})}}}function aO(e){let t;t=cS(e)?e.map((e=>nT(e))).join("___"):nT(e);const i="string"===typeof t||"number"===typeof t||"boolean"===typeof t||t instanceof Date;for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return i&&o.length>0&&(t+="___".concat(o.join("___"))),t}var lO=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},dO=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this.label=e,this.parent=t,this.refId=i,this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screenX=0,this.screenY=0,this.depth=t?t.depth+1:0}insertTick(t,i){let n=this;for(let o=0;o<t.length;o++){const s=t[o],r=o!==t.length-1,{children:a}=n,l=a.find((e=>e.label===s));if(l&&r)n=l;else{const t=new e(s,n,i);t.index=a.length,a.push(t),r&&(n=t)}}}getLeftSibling(){var e;return this.index>0?null===(e=this.parent)||void 0===e?void 0:e.children[this.index-1]:void 0}getLeftmostSibling(){var e;return this.index>0?null===(e=this.parent)||void 0===e?void 0:e.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.children.filter(((e,t)=>t!==this.index)))&&void 0!==e?e:[]}};function cO(e,t,i){const n=i/(t.index-e.index);t.change-=n,t.shift+=i,e.change+=n,t.prelim+=i,t.mod+=i}function hO(e,t,i){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:i}function uO(e,t){const i=e.getLeftSibling();if(i){let n=e,o=e,s=i,r=o.getLeftmostSibling(),a=o.mod,l=n.mod,d=s.mod,c=r.mod;for(;s.nextRight()&&o.nextLeft();){s=s.nextRight(),o=o.nextLeft(),r=r.nextLeft(),n=n.nextRight(),n.ancestor=e;const i=s.prelim+d-(o.prelim+a)+1;i>0&&(cO(hO(s,e,t),e,i),a+=i,l+=i),d+=s.mod,a+=o.mod,c+=r.mod,l+=n.mod}s.nextRight()&&!n.nextRight()?n.mod+=d-l:(o.nextLeft()&&!r.nextLeft()&&(r.mod+=a-c),t=e)}return t}function pO(e){const{children:t}=e;if(t.length){let[i]=t;for(const e of t)pO(e),i=uO(e,i);!function(e){let{children:t}=e,i=0,n=0;for(let o=t.length-1;o>=0;o--){const e=t[o];e.prelim+=i,e.mod+=i,n+=e.change,i+=e.shift+n}}(e);const n=(t[0].prelim+t.at(-1).prelim)/2,o=e.getLeftSibling();o?(e.prelim=o.prelim+1,e.mod=e.prelim-n):e.prelim=n}else{const t=e.getLeftSibling();e.prelim=t?t.prelim+1:0}}function gO(e,t,i){e.x=e.prelim+t,e.y=e.depth,i.insertNode(e);for(const n of e.children)gO(n,t+e.mod,i)}function mO(e){const{children:t}=e;let i=0;for(const n of t)mO(n),n.children.length?i+=n.leafCount:i++;e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t[t.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}function vO(e){const t=new fO,i=function(e){const t=e.reduce(((e,t)=>e<t.length?t.length:e),0),i=new dO;for(let n=0;n<e.length;n++){const o=e[n];for(;o.length<t;)o.push("");i.insertTick(o,n)}return i}(e);return pO(i),gO(i,-i.prelim,t),mO(i),t}var fO=class{constructor(){this.dimensions=new lO,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.x,e.y),this.nodes.push(e)}scalingX(e,t){let i=1;if(e>0){const{left:t,right:n}=this.dimensions;i=e/(n-t)}return t&&(i*=-1),i}scalingY(e,t){let i=1;if(e>0){const{top:t,bottom:n}=this.dimensions;i=e/(n-t)}return t&&(i*=-1),i}},yO=class extends lD{constructor(){super(...arguments),this.enabled=!0}};mw([hD(fD)],yO.prototype,"enabled",2),mw([hD(fD,{optional:!0})],yO.prototype,"avoidCollisions",2),mw([hD(ND,{optional:!0})],yO.prototype,"color",2),mw([hD(SD,{optional:!0})],yO.prototype,"spacing",2),mw([hD(KD,{optional:!0})],yO.prototype,"fontStyle",2),mw([hD(YD,{optional:!0})],yO.prototype,"fontWeight",2),mw([hD(CD.restrict({min:1}),{optional:!0})],yO.prototype,"fontSize",2),mw([hD(bD,{optional:!0})],yO.prototype,"fontFamily",2);var bO=class extends lD{constructor(){super(...arguments),this.enabled=!0}};mw([hD(fD)],bO.prototype,"enabled",2),mw([hD(SD,{optional:!0})],bO.prototype,"width",2),mw([hD(ND,{optional:!0})],bO.prototype,"stroke",2);var CO=class extends lD{constructor(){super(...arguments),this.label=new yO,this.tick=new bO}};mw([hD(mD)],CO.prototype,"label",2),mw([hD(mD)],CO.prototype,"tick",2);var xO=class extends eE{constructor(e){super(e),this.tickScale=new aD,this.depthOptions=new dD(CO),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:n,bandwidth:o}=this.scale,s=Math.abs(t[1]-t[0])-i,r=this.tickTreeLayout.scalingX(s,t[0]>t[1]),a=n+o/2;let l=0;for(const d of e){const e=d.x*r;l>e&&(l=e),d.screenX=e+a}for(const d of e)d.screenX-=l}getDepthOptionsMap(e){const t=[],{depthOptions:i,label:n}=this;for(let p=0;p<e;p++){var o,s,r,a,l,d,c,h,u;t.push((null!==(o=null===(s=i[p])||void 0===s?void 0:s.label.enabled)&&void 0!==o?o:n.enabled)?{enabled:!0,spacing:null!==(r=null===(a=i[p])||void 0===a?void 0:a.label.spacing)&&void 0!==r?r:n.spacing,lineHeight:dA.getLineHeight(null!==(l=null!==(d=null===(c=i[p])||void 0===c?void 0:c.label.fontSize)&&void 0!==d?d:n.fontSize)&&void 0!==l?l:10),avoidCollisions:null!==(h=null===(u=i[p])||void 0===u?void 0:u.label.avoidCollisions)&&void 0!==h?h:n.avoidCollisions}:{enabled:!1,spacing:0,lineHeight:0,avoidCollisions:!1})}return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each(((e,t)=>e.setProperties(t)))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){var e;if(this.updateDirection(),this.updateScale(),this.updateRange(),this.resizeTickTree(),null===(e=this.tickTreeLayout)||void 0===e||!e.depth)return{bbox:Ww.zero,separatorLayout:[],tickLabelLayout:[]};const{step:t}=this.scale,{title:i,label:n,range:o,depthOptions:s}=this,{depth:r,nodes:a}=this.tickTreeLayout,d=Math.ceil(n.fontSize/t),c=zI(this.rotation),h="top"===this.position||"bottom"===this.position,u=n.getSideFlag(),p=[],g=new Map,m=new gA,{defaultRotation:v,configuredRotation:f}=QA({rotation:n.rotation,parallel:n.parallel,regularFlipRotation:FI(c-Math.PI/2),parallelFlipRotation:FI(c)}),y=v+f,b=this.getDepthOptionsMap(r),C=(e,t)=>{var i,a;const c=r-e.depth;if(null===(i=b[c])||void 0===i||!i.enabled||t%d!==0||!Fw(e.screenX,o))return!1;const h=this.formatTick(e.label,t-1),u=this.getLabelStyles({value:h,depth:c},null===(a=s[c])||void 0===a?void 0:a.label);return m.setProperties(l(l({},u),{},{text:h,textAlign:"center",textBaseline:n.parallel?"hanging":"bottom",rotation:0,translationX:0,translationY:e.screenX})),!0};let x=0;const w={};a.forEach(((e,t)=>{var i;const n=r-e.depth,o=function(e){let t=1;for(let i=0;i<e.length;i++)10===e.charCodeAt(i)&&t++;return t}(e.label);null!==(i=w[n])&&void 0!==i||(w[n]=1),w[n]<o&&(w[n]=o);if(C(e,t)&&m.getBBox()&&(g.set(t,m.getBBox()),!e.leafCount)){m.rotation=y;const{width:e}=m.getBBox();x<e&&(x=e)}}));const S=KA(),M=u*b[0].spacing,D=new Map;a.forEach(((e,i)=>{if(0===i)return;const o=C(e,i),s=!e.children.length,a=r-e.depth;if(e.parent){const t=s?e.x:e.x-(e.leafCount-1)/2;if(!D.has(t)){var l;const e=null===(l=this.depthOptions[a])||void 0===l?void 0:l.tick;let i=x;for(let t=0;t<=a;t++)i+=b[t].spacing,0!==t&&(i+=w[t]*b[t].lineHeight);D.set(t,{tickSize:i,tickStroke:null===e||void 0===e?void 0:e.stroke,tickWidth:!1!==(null===e||void 0===e?void 0:e.enabled)?null===e||void 0===e?void 0:e.width:0})}}if(!o)return;if(m.x=M,m.y=0,s){const{width:e}=g.get(i),t=KI(y);m.rotation=y,m.textAlign="end",m.textBaseline="middle",m.rotationCenterX=M-e/2,m.translationX=(b[a].spacing-e)/2*t*u,n.mirrored&&(m.translationX+=e)}else m.rotation=h?v:-Math.PI/2,m.rotationCenterX=M,m.translationX=u*(e=>{let t=x;for(let i=1;i<=e;i++)t+=b[i].spacing,(n.mirrored||i!==e)&&(t+=w[i]*b[i].lineHeight);return t})(a);if(b[a].avoidCollisions){const n=s?t:e.leafCount*t;if(m.getBBox().height>n)return void g.delete(i)}const{text:d=""}=m;p.push({text:d,visible:!0,range:this.scale.range,tickId:S(d),fill:m.fill,fontFamily:m.fontFamily,fontSize:m.fontSize,fontStyle:m.fontStyle,fontWeight:m.fontWeight,rotation:m.rotation,rotationCenterX:m.rotationCenterX,textAlign:m.textAlign,textBaseline:m.textBaseline,translationX:m.translationX,translationY:m.translationY,x:m.x,y:m.y}),g.set(i,rI.toCanvas(m))}));const{enabled:k,stroke:I,width:A}=this.line;this.lineNode.datum={x:0,y1:o[0],y2:o[1]},this.lineNode.setProperties({stroke:I,strokeWidth:k?A:0});const T=[...D.values()];T.push(T[0]);const E=[this.lineNode.getBBox(),new Ww(0,0,T[0].tickSize*u,0)];i.enabled&&(this.updateTitle(!1,T[0].tickSize),E.push(i.caption.node.getBBox()));const R=Ww.merge(Mw(g.values(),E));return{bbox:this.getTransformBox(R),separatorLayout:T,tickLabelLayout:p}}update(){if(!this.computedLayout)return;const{tickScale:e,gridLine:t,gridLength:i}=this,{separatorLayout:n}=this.computedLayout,o=e.ticks().map(((t,i)=>l(l({},n[i]),{},{tick:t,tickId:aO(t,i),tickLabel:t.filter(Boolean).join(" - "),translationY:Math.round(e.convert(t))})));this.gridLineGroupSelection.update(t.enabled&&i?o:[]),this.tickLineGroupSelection.update(this.tick.enabled?o:[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(),this.resetSelectionNodes()}calculateLayout(){const{separatorLayout:e,tickLabelLayout:t,bbox:i}=this.computeLayout();return this.computedLayout={separatorLayout:e,tickLabelLayout:t},{bbox:i,primaryTickCount:void 0}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateRange(){super.updateRange(),this.tickScale.range=this.scale.range}calculateDomain(){var e;const{direction:t}=this,i=this.boundSeries.filter((e=>e.visible)).flatMap((e=>e.getDomain(t)));this.setDomain(null!==(e=gM(i))&&void 0!==e?e:yM(i));const n=this.dataDomain.domain.map(fM);this.tickTreeLayout=vO(n);const o=[];for(const s of this.tickTreeLayout.nodes)s.leafCount||null==s.refId||o.push(this.dataDomain.domain[s.refId]);this.scale.domain=xM(this.dataDomain.domain,o),this.tickScale.domain=n.concat([[""]])}updateGridLines(){if(!this.gridLength)return;const{width:e,style:t}=this.gridLine,i=this.gridLength*-this.label.getSideFlag();this.gridLineGroupSelection.each(((n,o,s)=>{const{stroke:r,lineDash:a}=t[s%t.length],l=o.translationY;n.visible=this.inRange(l),n.x1=0,n.x2=i,n.y=l,n.stroke=r,n.strokeWidth=e,n.lineDash=a}))}updateScale(e){super.updateScale(e),this.scale.paddingOuter=this.scale.paddingInner/2}};function wO(e,t,i){let[n,o]=Pw(e);n=function(e,t,i){const n=Math.abs(t-e)/(i-1),o=Math.floor(Math.log10(n)),s=Math.pow(10,o);return Math.floor(e/s)*s}(Math.floor(n),o,t);const s=function(e,t,i){const n=i-1,o=(t-e)/n;return function(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),n=e/i*10;if(n>0&&n<=1)return i/10;if(n>1&&n<=2)return 2*i/10;if(n>1&&n<=5)return 5*i/10;if(n>5&&n<=10)return 10*i/10;if(n>10&&n<=20)return 20*i/10;if(n>20&&n<=40)return 40*i/10;if(n>40&&n<=50)return 50*i/10;if(n>50&&n<=100)return 100*i/10;return n}(o)}(n,o,t);o=n+(t-1)*s;const r=i?[o,n]:[n,o],a=function(e,t,i){const n=Math.floor(Math.log10(t)),o=t>0&&t<1?Math.abs(n):0,s=Math.pow(10,o),r=[];for(let a=0;a<i;a++){const i=e+t*a;r[a]=Math.round(i*s)/s}return r}(n,s,t);return{domain:r,ticks:a}}xO.className="GroupedCategoryAxis",xO.type="grouped-category",mw([hD(_D)],xO.prototype,"depthOptions",2);var SO=class extends pM{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(e){return e}ticks(){var e;const t=null!==(e=this.tickCount)&&void 0!==e?e:pM.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||!this.domain.every(isFinite))return[];this.refresh();const[i,n]=this.getDomain();if(this.interval){const e=Math.abs(this.interval);if(!Fk((n-i)/e,this.getPixelRange()))return Nk(i,n,e)}return Ek(i,n,t,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(e,t){var i;return null!==(i=this.interval)&&void 0!==i?i:Lk(e,t,this.tickCount,this.minTickCount,this.maxTickCount)}updateNiceDomain(){const e=this.tickCount;let[t,i]=this.domain;if(1===e)[t,i]=function(e,t){const i=Math.abs(t-e),n=10**Math.floor(Math.log10(i));let o=1/0,s=[e,t];for(const r of Ak){const a=r*n,l=Math.floor(e/a)*a,d=Math.ceil(t/a)*a,c=1-i/Math.abs(d-l);o>c&&(o=c,s=[l,d])}return s}(t,i);else if(e>1){const e=t>i?Math.ceil:Math.floor,n=t>i?Math.floor:Math.ceil,o=4;for(let s=0;s<o;s++){const o=t,s=i,r=this.getTickStep(t,i),[a,l]=this.domain;if(t=e(a/r)*r,i=n(l/r)*r,t===o&&i===s)break}}this.niceDomain=[t,i]}tickFormat(e){let{ticks:t,specifier:i}=e;return function(e,t){const i=pk(null!==t&&void 0!==t?t:",f");(null==i.precision||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map((e=>{if(!Number.isFinite(e))return 0;const[t,n]=e.toExponential((i.type?6:12)-1).split(/[.e]/g);return("1"!==t&&"-1"!==t?1:0)+Pk(n)+1}))):"f%".includes(i.type)&&(i.precision=Math.max(...e.map((e=>{if(!Number.isFinite(e)||0===e)return 0;const t=Math.floor(Math.log10(Math.abs(e))),n=i.type?6:12,o=Pk(e.toExponential(n-1).split(/[.e]/g)[1]);return Math.max(0,o-t)})))));const n=gk(i);return e=>n(Number(e))}(null!==t&&void 0!==t?t:this.ticks(),i)}},MO=class extends JT{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SO),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:o}=mM(e,t,i);return{domain:n,clipped:o}}updateSecondaryAxisTicks(e){var t;if(null===(t=this.dataDomain)||void 0===t||!t.domain.length)return[];const{domain:i,ticks:n}=wO(this.dataDomain.domain,null!==e&&void 0!==e?e:0,this.reverse);return this.scale.nice=!1,this.scale.domain=i,this.scale.update(),n}};MO.className="NumberAxis",MO.type="number",mw([hD(pD(DD,TD("max"))),kT(NaN)],MO.prototype,"min",2),mw([hD(pD(DD,ED("min"))),kT(NaN)],MO.prototype,"max",2);var DO=sk((e=>CS(e)&&0!==e),"a non-zero number"),kO=class extends MO{constructor(e){super(e,new Gk),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:o}=mM(e,t,i);return n[0]<0&&n[1]>0?(cM.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:o}):0===n[0]||0===n[1]?(cM.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:o}):{domain:n,clipped:o}}set base(e){this.scale.base=e}get base(){return this.scale.base}updateSecondaryAxisTicks(e){var t;if(null===(t=this.dataDomain)||void 0===t||!t.domain.length)return[];const{domain:i,ticks:n}=wO(this.dataDomain.domain,null!==e&&void 0!==e?e:0,this.reverse);return this.scale.nice=!1,this.scale.domain=i,this.scale.update(),n}};kO.className="LogAxis",kO.type="log",mw([hD(pD(DD,DO,TD("max"))),kT(NaN)],kO.prototype,"min",2),mw([hD(pD(DD,DO,ED("min"))),kT(NaN)],kO.prototype,"max",2);var IO=class extends JT{constructor(e){super(e,new Kk),this.min=void 0,this.max=void 0}normaliseDataDomain(e){let{min:t,max:i}=this,n=!1;var o,s;("number"===typeof t&&(t=new Date(t)),"number"===typeof i&&(i=new Date(i)),e.length>2)&&(e=null!==(o=null===(s=gM(e))||void 0===s?void 0:s.map((e=>new Date(e))))&&void 0!==o?o:[]);return t instanceof Date&&(n||(n=t>e[0]),e=[t,e[1]]),i instanceof Date&&(n||(n=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{domain:e,clipped:n}}onFormatChange(e,t,i,n){n?super.onFormatChange(e,t,i,n):(this.labelFormatter=this.scale.tickFormat({ticks:e,domain:i}),this.datumFormatter=this.scale.tickFormat({ticks:e,domain:i,formatOffset:1}))}updateSecondaryAxisTicks(e){var t;if(null===(t=this.dataDomain)||void 0===t||!t.domain.length)return[];const{domain:i,ticks:n}=wO(this.dataDomain.domain.map(Number),null!==e&&void 0!==e?e:0,this.reverse);return this.scale.nice=!1,this.scale.domain=i.map((e=>new Date(e))),this.scale.update(),n}};IO.className="TimeAxis",IO.type="time",mw([hD(pD(LD,TD("max")),{optional:!0})],IO.prototype,"min",2),mw([hD(pD(LD,ED("min")),{optional:!0})],IO.prototype,"max",2);var AO=(e,t,i,n)=>{let{x0:o,y0:s,x1:r,y1:a,cx:l,cy:d}=t;if(n&&e.moveTo(o,s),o!==r||s!==a){const t=Math.atan2(s-d,o-l),n=Math.atan2(a-d,r-l);e.arc(l,d,i,t,n)}else e.lineTo(o,s)},TO=1e-6,EO=(e,t,i,n,o)=>{let s=!1,r=!1,a=n-Math.sqrt(Math.max(o**2-i**2,0)),l=0,d=0,c=i-Math.sqrt(Math.max(o**2-n**2,0));return a>e?(s=!0,a=e,l=i-Math.sqrt(Math.max(o**2-(n-e)**2))):a<TO&&(a=0),c>t?(r=!0,d=n-Math.sqrt(Math.max(o**2-(i-t)**2)),c=t):c<TO&&(c=0),{leading0:a,leading1:l,trailing0:d,trailing1:c,leadingClipped:s,trailingClipped:r}},RO=(e,t,i,n,o,s,r)=>{let{topLeft:a,topRight:l,bottomRight:d,bottomLeft:c}=s;const h=Math.max(a+c,l+d),u=Math.max(a+l,c+d);if(h<=0&&u<=0)return void(null==r?e.rect(t,i,n,o):e.rect(r.x,r.y,r.width,r.height));if(null==r&&a===l&&a===d&&a===c)return void e.roundRect(t,i,n,o,a);if(n<0&&(t+=n,n=Math.abs(n)),o<0&&(i+=o,o=Math.abs(o)),n<=0||o<=0)return;if(null==r)r=new Ww(t,i,n,o);else{const e=Math.max(t,r.x),s=Math.min(t+n,r.x+r.width),a=Math.max(i,r.y),l=Math.min(i+o,r.y+r.height);r=new Ww(e,a,s-e,l-a)}const p=Math.max(h/o,u/n,1);p>1&&(a/=p,l/=p,d/=p,c/=p);let g,m,v,f,y=!0,b=!0,C=!0,x=!0;if(y){const e=EO(r.height,r.width,Math.max(t+a-r.x,0),Math.max(i+a-r.y,0),a);e.leadingClipped&&(x=!1),e.trailingClipped&&(b=!1);g={x0:Math.max(r.x+e.leading1,r.x),y0:Math.max(r.y+e.leading0,r.y),x1:Math.max(r.x+e.trailing1,r.x),y1:Math.max(r.y+e.trailing0,r.y),cx:t+a,cy:i+a}}if(b){const e=EO(r.width,r.height,Math.max(i+l-r.y,0),Math.max(r.x+r.width-(t+n-l),0),l);e.leadingClipped&&(y=!1),e.trailingClipped&&(C=!1);m={x0:Math.min(r.x+r.width-e.leading0,r.x+r.width),y0:Math.max(r.y+e.leading1,r.y),x1:Math.min(r.x+r.width-e.trailing0,r.x+r.width),y1:Math.max(r.y+e.trailing1,r.y),cx:t+n-l,cy:i+l}}if(C){const e=EO(r.height,r.width,Math.max(r.x+r.width-(t+n-d),0),Math.max(r.y+r.height-(i+o-d),0),d);e.leadingClipped&&(b=!1),e.trailingClipped&&(x=!1);v={x0:Math.min(r.x+r.width-e.leading1,r.x+r.width),y0:Math.min(r.y+r.height-e.leading0,r.y+r.height),x1:Math.min(r.x+r.width-e.trailing1,r.x+r.width),y1:Math.min(r.y+r.height-e.trailing0,r.y+r.height),cx:t+n-d,cy:i+o-d}}if(x){const e=EO(r.width,r.height,Math.max(r.y+r.height-(i+o-c),0),Math.max(t+c-r.x,0),c);e.leadingClipped&&(C=!1),e.trailingClipped&&(y=!1);f={x0:Math.max(r.x+e.leading0,r.x),y0:Math.min(r.y+r.height-e.leading1,r.y+r.height),x1:Math.max(r.x+e.trailing0,r.x),y1:Math.min(r.y+r.height-e.trailing1,r.y+r.height),cx:t+c,cy:i+o-c}}let w=!1;y&&null!=g&&(AO(e,g,a,!w),w||(w=!0)),b&&null!=m&&(AO(e,m,l,!w),w||(w=!0)),C&&null!=v&&(AO(e,v,d,!w),w||(w=!0)),x&&null!=f&&AO(e,f,c,!w),e.closePath()},LO=class extends QP{constructor(){super(...arguments),this.borderPath=new XP,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=oA.defaultStyles.strokeWidth,this.effectiveStrokeWidth=oA.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||Boolean(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var e,t;const{path:i,borderPath:n,crisp:o,topLeftCornerRadius:s,topRightCornerRadius:r,bottomRightCornerRadius:a,bottomLeftCornerRadius:l}=this;let{x:d,y:c,width:h,height:u,strokeWidth:p,clipBBox:g}=this;const m=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let v=1;if(i.clear(!0),n.clear(!0),o&&(h<=m&&(v*=h/m),u<=m&&(v*=u/m),h=this.align(d,h),u=this.align(c,u),d=this.align(d),c=this.align(c),g=null!=g?new Ww(this.align(g.x),this.align(g.y),this.align(g.x,g.width),this.align(g.y,g.height)):void 0),p)if(h<m){const e=d+m/2;n.moveTo(e,c),n.lineTo(e,c+u),p=m,this.borderClipPath=void 0}else if(u<m){const e=c+m/2;n.moveTo(d,e),n.lineTo(d+h,e),p=m,this.borderClipPath=void 0}else if(p<h&&p<u){var f;const e=p/2;d+=e,c+=e,h-=p,u-=p;const t=null===(f=g)||void 0===f?void 0:f.clone().shrink(e),o={topLeft:s>0?s-p:0,topRight:r>0?r-p:0,bottomRight:a>0?a-p:0,bottomLeft:l>0?l-p:0};this.borderClipPath=void 0,h>0&&u>0&&(null==t||(null===t||void 0===t?void 0:t.width)>0&&(null===t||void 0===t?void 0:t.height)>0)&&(RO(i,d,c,h,u,o,t),RO(n,d,c,h,u,o,t))}else{var y;this.borderClipPath=null!==(y=this.borderClipPath)&&void 0!==y?y:new XP,this.borderClipPath.clear(!0),this.borderClipPath.rect(d,c,h,u),n.rect(d,c,h,u)}else{const e={topLeft:s,topRight:r,bottomRight:a,bottomLeft:l};this.borderClipPath=void 0,RO(i,d,c,h,u,e,g)}if([s,r,a,l].every((e=>0===e))){const e=this.getBBox();this.hittester=e.containsPoint.bind(e),this.distanceSquared=(e,t)=>this.getBBox().distanceSquared(e,t)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=v}computeBBox(){var e;const{x:t,y:i,width:n,height:o,clipBBox:s}=this;return null!==(e=null===s||void 0===s?void 0:s.clone())&&void 0!==e?e:new Ww(t,i,n,o)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAlpha(e){const{fillOpacity:t,microPixelEffectOpacity:i,opacity:n}=this;e.globalAlpha*=n*t*i}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){const{globalAlpha:t}=e,{strokeOpacity:n,lineDash:o,lineDashOffset:s,lineCap:r,lineJoin:a,borderPath:l,borderClipPath:d,opacity:c,microPixelEffectOpacity:h}=this;d&&e.clip(d.getPath2D()),this.applyStroke(e),e.globalAlpha*=c*n*h,e.lineWidth=i,o&&e.setLineDash(o),s&&(e.lineDashOffset=s),r&&(e.lineCap=r),a&&(e.lineJoin=a),e.stroke(l.getPath2D()),e.globalAlpha=t}}};LO.className="Rect",mw([qP()],LO.prototype,"x",2),mw([qP()],LO.prototype,"y",2),mw([qP()],LO.prototype,"width",2),mw([qP()],LO.prototype,"height",2),mw([qP()],LO.prototype,"topLeftCornerRadius",2),mw([qP()],LO.prototype,"topRightCornerRadius",2),mw([qP()],LO.prototype,"bottomRightCornerRadius",2),mw([qP()],LO.prototype,"bottomLeftCornerRadius",2),mw([qP()],LO.prototype,"clipBBox",2),mw([qP()],LO.prototype,"crisp",2);var PO=class extends tE{constructor(e){super(),this.ctx=e,this.rectNode=new LO,this.textNode=new uA,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(e.scene.attachNode(this.node),e.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))))}createNode(){return new cI({name:"background",zIndex:0})}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};mw([hD(fD),FA("node","visible")],PO.prototype,"visible",2),mw([hD(ND,{optional:!0}),FA("rectNode","fill")],PO.prototype,"fill",2),mw([hD(mD,{optional:!0})],PO.prototype,"image",2),mw([hD(bD,{optional:!0}),FA("textNode")],PO.prototype,"text",2);var NO={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new PO(e)};function FO(e){let{orientation:t,bboxes:i,maxHeight:n,maxWidth:o,itemPaddingY:s=0,itemPaddingX:r=0,forceResult:a=!1}=e;const l="horizontal"===t,d={max:l?o:n,fn:l?e=>e.width:e=>e.height,padding:l?r:s},c={max:l?n:o,fn:l?e=>e.height:e=>e.width,padding:l?s:r};let h=0;const u=[];for(;h<i.length;){const e=OO(i.slice(h),h,d,c,a);if(!e)return;h+=e.processedBBoxCount,u.push(e.pageIndices)}return function(e,t,i,n,o){let s=0,r=0;const a=e.map((e=>{"horizontal"===t&&(e=function(e){const t=[];for(const i of e[0])t.push([]);return e.forEach(((e,i)=>{e.forEach(((e,n)=>{t[n][i]=e}))})),t}(e));let a=0;const l=e.map((e=>{const t=e.map((e=>(a=Math.max(e,a),i[e])));let s=0,r=0;return t.forEach((e=>{s+=e.height+n,r=Math.max(r,e.width+o)})),{indices:e,bboxes:t,columnHeight:Math.ceil(s),columnWidth:Math.ceil(r)}}));let d=0,c=0;return l.forEach((e=>{d+=e.columnWidth,c=Math.max(c,e.columnHeight)})),s=Math.max(d,s),r=Math.max(c,r),{columns:l,startIndex:e[0][0],endIndex:a,pageWidth:d,pageHeight:c}}));return{pages:a,maxPageWidth:s,maxPageHeight:r}}(u,t,i,s,r)}function OO(e,t,i,n,o){let s=function(e,t){const i=e.length;let n=0;for(let o=0;o<i;o++)if(n+=t.fn(e[o])+t.padding,n>t.max){return i/o<2?Math.ceil(i/2):o}return i}(e,i);if(s<1){if(!o)return;s=1}let r=s;for(;r>=1;){const s=BO(e,t,r,i,n,o);if(null==s&&r<=1)return;if(null==s){r--;continue}if("number"===typeof s){if(s<=1)return;r=s<r&&s>1?s:r,r--;continue}return{processedBBoxCount:s.length*s[0].length,pageIndices:s}}}function BO(e,t,i,n,o,s){const r=[];let a=0,l=0,d=[];const c=[];for(let u=0;u<e.length;u++){var h;const p=(u+i)%i;0===p&&(a+=l,l=0,d.length>0&&r.push(d),d=[]);const g=n.fn(e[u])+n.padding;c[p]=Math.max(null!==(h=c[p])&&void 0!==h?h:0,g),l=Math.max(l,o.fn(e[u])+o.padding);const m=a+l,v=!s||r.length>0;if(m>o.max&&v){d=[];break}if(c.reduce(((e,t)=>e+t),0)>n.max&&!s)return c.length<i?c.length:void 0;d.push(u+t)}return d.length>0&&r.push(d),r.length>0?r:void 0}var GO=class extends lD{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};mw([hD(ND)],GO.prototype,"color",2),mw([hD(KD,{optional:!0})],GO.prototype,"fontStyle",2),mw([hD(YD,{optional:!0})],GO.prototype,"fontWeight",2),mw([hD(SD)],GO.prototype,"fontSize",2),mw([hD(bD)],GO.prototype,"fontFamily",2);var zO=class extends lD{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};mw([hD(SD)],zO.prototype,"size",2),mw([hD(ND,{optional:!0})],zO.prototype,"fill",2),mw([hD(MD,{optional:!0})],zO.prototype,"fillOpacity",2),mw([hD(ND,{optional:!0})],zO.prototype,"stroke",2),mw([hD(SD)],zO.prototype,"strokeWidth",2),mw([hD(MD)],zO.prototype,"strokeOpacity",2);var _O=class extends lD{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};mw([OA({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],_O.prototype,"shape",2),mw([hD(SD)],_O.prototype,"size",2),mw([hD(SD)],_O.prototype,"padding",2);var VO=class extends lD{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=ww(this),this.marker=new _O(this),this.activeStyle=new zO,this.inactiveStyle=new zO,this.highlightStyle=new zO,this.label=new GO,this.group=new pI({name:"pagination"}),this.labelNode=new uA,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new xN,this._previousButton=new xN,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach((e=>e()))}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){if(this._orientation=e,"horizontal"===e)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+2*(this.marker.size/2+this.marker.padding)}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:n,fontStyle:o,fontWeight:s,fontSize:r,fontFamily:a}}=this;i.text="".concat(e+1," / ").concat(t),i.fill=n,i.fontStyle=o,i.fontWeight=s,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:o,inactiveStyle:s,highlightStyle:r,highlightActive:a}=this,l=(e,t)=>t?s:e===a?r:o;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",n))}updateMarker(e,t){var i;const{size:n}=this.marker;e.size=n,e.fill=t.fill,e.fillOpacity=null!==(i=t.fillOpacity)&&void 0!==i?i:1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=0===t,n=e===t-1,o=0===e;this.nextButtonDisabled=n||i,this.previousButtonDisabled=o||i}setPage(e){e=Rw(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),"next"!==t||this.nextButtonDisabled?"previous"!==t||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=nI(DN(this.marker.shape||xN));this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:rI.toCanvas(this.previousButton),next:rI.toCanvas(this.nextButton)}}};VO.className="Pagination",mw([hD(mD)],VO.prototype,"marker",2),mw([hD(mD)],VO.prototype,"activeStyle",2),mw([hD(mD)],VO.prototype,"inactiveStyle",2),mw([hD(mD)],VO.prototype,"highlightStyle",2),mw([hD(mD)],VO.prototype,"label",2);var HO=class{constructor(e,t){this.idPrefix=t,this.dirty=!0,this.destroyFns=new CE,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:"".concat(t,"-toolbar"),classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:"".concat(t,"-pagination"),classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=yI("p"),this.itemDescription.style.display="none",this.itemDescription.id="".concat(t,"-ariaDescription"),this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(e){if(!this.dirty)return;const{ctx:t,itemSelection:i,datumReader:n,itemListener:o}=e,s=t.localeManager,r=i.length;i.each(((e,i,a)=>{var l;null===(l=e.proxyButton)||void 0===l||l.destroy(),e.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(s,n.getItemLabel(i),a,r),ariaChecked:!!e.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const d=e.proxyButton;d.addListener("click",(t=>o.onClick(t.sourceEvent,e.datum,d))),d.addListener("dblclick",(t=>o.onDoubleClick(t.sourceEvent,e.datum))),d.addListener("mouseenter",(t=>o.onHover(t.sourceEvent,e))),d.addListener("mouseleave",(()=>o.onLeave())),d.addListener("contextmenu",(t=>o.onContextClick(t.sourceEvent,e))),d.addListener("blur",(()=>o.onLeave())),d.addListener("focus",(t=>o.onHover(t.sourceEvent,e)))})),this.dirty=!1}update(e){this.updateVisibility(e.visible),e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e))}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons(e){let{itemSelection:t,group:i,pagination:n,interactive:o}=e;const s=rI.toCanvas(i);this.itemList.setBounds(s);const r=Math.max(...t.nodes().map((e=>e.getBBox().height)));t.each(((e,t)=>{if(e.proxyButton){const t=e.pageIndex===n.currentPage,{x:i,y:a,height:l,width:d}=rI.toCanvas(e),c=(r-l)/2,h={x:i-s.x,y:a-c-s.y,height:r,width:d};e.proxyButton.setCursor("pointer"),e.proxyButton.setEnabled(o&&t),e.proxyButton.setBounds(h)}}))}updatePaginationProxyButtons(e){var t,i,n;const{ctx:o,pagination:s,oldPages:r,newPages:a}=e;this.paginationGroup.setHidden(!s.visible);const l=(null!==(t=null===r||void 0===r?void 0:r.length)&&void 0!==t?t:a.length)>1,d=a.length>1;var c,h,u;l!==d&&(d?(this.prevButton=o.proxyInteractionService.createProxyElement({type:"button",id:"".concat(this.idPrefix,"-prev-page"),textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",(e=>s.onClick(e.sourceEvent,"previous"))),this.prevButton.addListener("mouseenter",(()=>s.onMouseHover("previous"))),this.prevButton.addListener("mouseleave",(()=>s.onMouseHover(void 0))),null!==(c=this.nextButton)&&void 0!==c||(this.nextButton=o.proxyInteractionService.createProxyElement({type:"button",id:"".concat(this.idPrefix,"-next-page"),textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",(e=>s.onClick(e.sourceEvent,"next"))),this.nextButton.addListener("mouseenter",(()=>s.onMouseHover("next"))),this.nextButton.addListener("mouseleave",(()=>s.onMouseHover(void 0)))):(null===(h=this.nextButton)||void 0===h||h.destroy(),null===(u=this.prevButton)||void 0===u||u.destroy(),this.nextButton=void 0,this.prevButton=void 0));const{prev:p,next:g}=s.computeCSSBounds();null===(i=this.prevButton)||void 0===i||i.setBounds(p),null===(n=this.nextButton)||void 0===n||n.setBounds(g),this.updatePaginationCursors(e)}updatePaginationCursors(e){var t,i;let{pagination:n}=e;null===(t=this.nextButton)||void 0===t||t.setCursor(n.getCursor("next")),null===(i=this.prevButton)||void 0===i||i.setCursor(n.getCursor("previous"))}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some(((i,n,o)=>{const[s,r]=[t[n],e[n]];return s.id!==r.id}))}onLocaleChanged(e,t,i){const n=t.length;t.each(((t,o,s)=>{let{proxyButton:r}=t;const a=null===r||void 0===r?void 0:r.getElement();if(null!=a){const t=i.getItemLabel(o);a.textContent=this.getItemAriaText(e,t,s,n)}})),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationCursors(e)}getItemAriaText(e,t,i,n){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:n})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function WO(e,t,i,n){const o={defaultPrevented:!1,apiEvent:{type:e,itemId:t,seriesId:i,event:n,preventDefault:()=>o.defaultPrevented=!0}};return o}var jO=class extends Zw{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}updateBitmap(e,t,i,n){this.sourceImage=e,this.width=e.width/t,this.height=e.height/t,this.x=i/t,this.y=n/t,this.markDirty()}render(e){const{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};mw([jw()],jO.prototype,"x",2),mw([jw()],jO.prototype,"y",2),mw([jw()],jO.prototype,"width",2),mw([jw()],jO.prototype,"height",2),mw([jw()],jO.prototype,"opacity",2);var UO=class extends(sI(cI)){constructor(){super({name:"markerLabelGroup"}),this.label=new uA,this.symbolsGroup=new cI({name:"legend-markerLabel-symbols"}),this.bitmap=new jO,this.bitmapDirty=!0,this.enabled=!0,this.pageIndex=NaN,this._marker=void 0,this._line=void 0;const{marker:e,label:t,line:i}=this;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=1,this.updateSymbols(e,i),this.append([this.symbolsGroup,t])}destroy(){var e;super.destroy(),null===(e=this.proxyButton)||void 0===e||e.destroy()}get marker(){return this._marker}get line(){return this._line}updateSymbols(e,t){this._marker===e&&this._line===t||(this.bitmapDirty=!0,this._marker=e,this._line=t,this.symbolsGroup.clear(),this.symbolsGroup.append([this.bitmap,t,e].filter(dS)))}setEnabled(e){this.enabled=e,this.refreshVisibilities()}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e,this.bitmap.opacity=e,this.setBitmapVisibility(!this.enabled)}setBitmapVisibility(e){const{line:t,marker:i}=this;null!=i&&(i.visible=!e),null!=t&&(t.visible=!e),this.bitmap.visible=e}update(e,t,i){var n,o,s;let{spriteAAPadding:r,spritePixelRatio:a}=t;const{marker:l,line:d}=this,{length:c,spacing:h,isCustomMarker:u}=i;let p=1/0,g=1/0,m=1/0,v=1/0,f=1/0,y=0,b=0;if(l){const{size:e}=l,t=l.constructor.center,i=(e+l.strokeWidth)/2;y=(t.x-.5)*e,b=(t.y-.5)*e,u?(l.x=0,l.y=0,l.translationX=y*e+c/2,l.translationY=b*e,v=l.translationY-i,f=l.translationX-i):(l.x=y+c/2,l.y=b,v=l.y-i,f=l.x-i)}d&&(d.x1=0,d.x2=c,d.y1=0,d.y2=0,d.markDirty(),p=-d.strokeWidth/2,g=d.x1,m=d.x2);const C=Math.min(g,m,f),x=Math.min(p,v),w=null!==(n=null===d||void 0===d?void 0:d.x2)&&void 0!==n?n:-1/0,S=(null!==(o=null===l||void 0===l?void 0:l.x)&&void 0!==o?o:0)+(null!==(s=null===l||void 0===l?void 0:l.size)&&void 0!==s?s:0)/2;if(this.label.x=Math.max(w,S)+h,this.bitmapDirty){this.setBitmapVisibility(!1);const t=y+(r+C)*a,i=b+(r-x)*a,n=e.renderSprite(this.symbolsGroup,{scale:a,translateX:Math.floor(t),translateY:Math.floor(i)});this.bitmap.updateBitmap(n,a,Math.ceil(-t),Math.ceil(-i)),this.bitmapDirty=!1,this.refreshVisibilities()}}computeBBox(){const{label:e,line:t,marker:i}=this;return this.toParent(cI.computeChildrenBBox([e,t,i].filter(dS),!1))}};UO.className="MarkerLabel",mw([FA("label")],UO.prototype,"text",2),mw([FA("label")],UO.prototype,"fontStyle",2),mw([FA("label")],UO.prototype,"fontWeight",2),mw([FA("label")],UO.prototype,"fontSize",2),mw([FA("label")],UO.prototype,"fontFamily",2),mw([FA("label","fill")],UO.prototype,"color",2);var KO=class extends lD{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};mw([hD(SD,{optional:!0})],KO.prototype,"maxLength",2),mw([hD(ND)],KO.prototype,"color",2),mw([hD(KD,{optional:!0})],KO.prototype,"fontStyle",2),mw([hD(YD,{optional:!0})],KO.prototype,"fontWeight",2),mw([hD(SD)],KO.prototype,"fontSize",2),mw([hD(bD)],KO.prototype,"fontFamily",2),mw([hD(yD,{optional:!0})],KO.prototype,"formatter",2);var YO=class extends lD{constructor(){super(...arguments),this.size=15,this.padding=8}};mw([BA((e=>{var t;return null===(t=e.parent)||void 0===t?void 0:t.onMarkerShapeChange()}))],YO.prototype,"shape",2),mw([hD(SD)],YO.prototype,"size",2),mw([hD(SD)],YO.prototype,"padding",2),mw([hD(SD,{optional:!0})],YO.prototype,"strokeWidth",2),mw([hD(fD)],YO.prototype,"enabled",2);var ZO=class extends lD{};mw([hD(SD,{optional:!0})],ZO.prototype,"strokeWidth",2),mw([hD(SD,{optional:!0})],ZO.prototype,"length",2);var XO=class extends lD{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new YO,this.label=new KO,this.line=new ZO}};mw([hD(SD,{optional:!0})],XO.prototype,"maxWidth",2),mw([hD(SD)],XO.prototype,"paddingX",2),mw([hD(SD)],XO.prototype,"paddingY",2),mw([hD(fD)],XO.prototype,"showSeriesStroke",2),mw([hD(mD)],XO.prototype,"marker",2),mw([hD(mD)],XO.prototype,"label",2),mw([hD(mD)],XO.prototype,"line",2);var qO=class extends lD{};mw([hD(yD,{optional:!0})],qO.prototype,"legendItemClick",2),mw([hD(yD,{optional:!0})],qO.prototype,"legendItemDoubleClick",2);var QO="legend-visibility",JO="legend-other-series",$O=class extends lD{constructor(e){super(),this.ctx=e,this.id=ww(this),this.group=new pI({name:"legend",zIndex:13}),this.itemSelection=LI.select(this.group,UO),this.spriteRenderer=void 0,this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this._symbolsDirty=!0,this.toggleSeries=!0,this.item=new XO,this.listeners=new qO,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new VO((t=>e.updateService.update(t)),(e=>this.updatePageNumber(e))),this.pagination.attachPagination(this.group),this.destroyFns.push(e.contextMenuRegistry.registerDefaultAction({id:QO,type:"legend",label:"contextMenuToggleSeriesVisibility",action:e=>this.contextToggleVisibility(e)}),e.contextMenuRegistry.registerDefaultAction({id:JO,type:"legend",label:"contextMenuToggleOtherSeries",action:e=>this.contextToggleOtherSeries(e)}),e.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(e.layoutManager.registerElement(1,(e=>this.positionLegend(e))),e.localeManager.addListener("locale-changed",(()=>this.onLocaleChanged())),(()=>this.group.remove())),this.domProxy=new HO(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){this.domProxy.onDataUpdate(this._data,e),this._data=e,this._symbolsDirty=!0,this.updateGroupVisibility()}get data(){return this._data}onLegendDataChange(e){let{legendData:t=[]}=e;if(!this.enabled)return;const i=t.filter((e=>!e.hideInLegend)),{data:n}=this;IS(t,n)||(this.data=i)}destroy(){this.ctx.domManager.removeChild("canvas-overlay","".concat(this.id,"-toolbar")),this.ctx.domManager.removeChild("canvas-overlay","".concat(this.id,"-pagination")),this.destroyFns.forEach((e=>e())),this.pagination.destroy(),this.itemSelection.clear(),this.domProxy.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty()}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{ctx:{callbackCache:t}}=this,{formatter:i}=this.item.label;if(i){const n=e.datum;return t.call(i,l({itemId:e.itemId,value:e.label.text,seriesId:e.seriesId},n&&{datum:n}))}return e.label.text}calcLayout(e,t){var i;const{paddingX:n,paddingY:o,label:s,maxWidth:r,label:{maxLength:a=1/0,fontStyle:l,fontWeight:d,fontSize:c,fontFamily:h}}=this.item,u=[...this.data];this.reverseOrder&&u.reverse(),this.itemSelection.update(u);const p=[],g=dA.toFontString(s),m=null!==r&&void 0!==r?r:.8*e,v=this.calculateSpriteDimensions();if(null!==(i=this.spriteRenderer)&&void 0!==i||(this.spriteRenderer=new PR),this.spriteRenderer.resize(v),this.itemSelection.each(((e,t)=>{var i;e.fontStyle=l,e.fontWeight=d,e.fontSize=c,e.fontFamily=h;const n=this.updateMarkerLabel(this.spriteRenderer,e,t,v),o=null!==(i=t.itemId)&&void 0!==i?i:t.id,s=this.getItemLabel(t),r=(null!==s&&void 0!==s?s:"<unknown>").replace(/\r?\n/g," ");e.text=this.truncate(r,a,m,n,g,o),p.push(e.getBBox())})),this._symbolsDirty=!1,e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return{};const f=this.size,y=this.oldSize;f[0]=e,f[1]=t,f[0]===y[0]&&f[1]===y[1]||(y[0]=f[0],y[1]=f[1]);const{pages:b,maxPageHeight:C,maxPageWidth:x}=this.updatePagination(p,e,t),w=this.pages;this.pages=b,this.maxPageSize=[x-n,C-o];const S=this.pagination.currentPage,M=this.pages[S];return this.pages.length<1||!M?(this.visible=!1,{oldPages:w}):(this.visible=!0,this.updatePositions(S),this.update(),{oldPages:w})}isCustomMarker(e,t){return e&&void 0!==t&&"string"!==typeof t}calcSymbolsEnabled(e){var t;const{showSeriesStroke:i,marker:n}=this.item,o=!!n.enabled||!i||null===(t=e.marker.enabled)||void 0===t||t;return{markerEnabled:o,lineEnabled:!(!e.line||!i),isCustomMarker:this.isCustomMarker(o,e.marker.shape)}}calcSymbolsLengths(e){var t;const{marker:i,line:n}=this.item,{markerEnabled:o,lineEnabled:s}=this.calcSymbolsEnabled(e),{strokeWidth:r}=this.getMarkerStyles(e),{strokeWidth:a}=s?this.getLineStyles(e):{strokeWidth:0};let l;const{shape:d}=e.marker;if(this.isCustomMarker(o,d)){const e=new(DN(d));e.updatePath();const t=e.getBBox();l=Math.max(t.width,t.height)}return{markerLength:o?i.size:0,markerStrokeWidth:r,lineLength:s?null!==(t=n.length)&&void 0!==t?t:25:0,lineStrokeWidth:a,customMarkerSize:l}}calculateSpriteDimensions(){let e=0,t=0,i=0,n=0;this.itemSelection.each(((o,s)=>{const{symbol:r}=s,{markerLength:a,markerStrokeWidth:l,lineLength:d,lineStrokeWidth:c,customMarkerSize:h=-1/0}=this.calcSymbolsLengths(r),u=a+l;n=Math.max(n,d,h,a),t=Math.max(t,d,h,u),i=Math.max(i,c,u),e=Math.max(e,l+.5)})),t+=2*e,i+=2*e;return{spritePixelRatio:fI().devicePixelRatio,spriteAAPadding:e,spriteWidth:t,spriteHeight:i,markerWidth:n}}updateMarkerLabel(e,t,i,n){const{marker:o,paddingX:s}=this.item,{markerWidth:r}=n,{symbol:a}=i;let l=s;const{markerEnabled:d,lineEnabled:c,isCustomMarker:h}=this.calcSymbolsEnabled(a);if(this._symbolsDirty){const{shape:e=a.marker.shape}=o,i=DN(e);t.updateSymbols(new i({zIndex:1}),new sA({zIndex:0}))}const u=o.padding,{marker:p,line:g}=t;null!=p&&(p.size=d||!c?o.size:0);const m={length:r,spacing:u,isCustomMarker:h};if((d||c)&&(l+=u+r),p){const{strokeWidth:e,fill:t,stroke:i,fillOpacity:n,strokeOpacity:o}=this.getMarkerStyles(a);p.fill=t,p.stroke=i,p.strokeWidth=e,p.fillOpacity=n,p.strokeOpacity=o}if(c||null==g){if(g){const e=this.getLineStyles(a);g.stroke=e.stroke,g.strokeOpacity=e.strokeOpacity,g.strokeWidth=e.strokeWidth,g.lineDash=e.lineDash}}else g.strokeWidth=0;return t.update(e,n,m),l}truncate(e,t,i,n,o,s){let r=!1;e.length>t&&(e=e.substring(0,t),r=!0);const a=aA.getMeasurer({font:o}),l=YA.truncateLine(e,a,i-n,r);return l.endsWith(dA.EllipsisChar)?this.truncatedItems.add(s):this.truncatedItems.delete(s),l}updatePagination(e,t,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:s,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:d}=this.calculatePagination(e,t,i),c=s.findIndex((e=>e.endIndex>=o));this.pagination.currentPage=Rw(0,c,s.length-1);const{paddingX:h,paddingY:u}=this.item,p=a-h,g=r-u;let m=0,v=-l.y-this.item.marker.size/2;d?v+=g+8:(m+=-l.x+p+8,v+=(g-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers();let f=0;return this.itemSelection.each(((e,t,i)=>{var n,o;i>(null!==(n=null===(o=s[f])||void 0===o?void 0:o.endIndex)&&void 0!==n?n:1/0)&&f++,e.pageIndex=f})),{maxPageHeight:r,maxPageWidth:a,pages:s}}calculatePagination(e,t,i){const{paddingX:n,paddingY:o}=this.item,s=this.getOrientation(),r=["left","right"].includes(this.position);let a=this.pagination.getBBox(),l=new Ww(0,0,0,0),d=[],c=0,h=0,u=0;const p=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{var g,m,v;if(u++>10){cM.warn("unable to find stable legend layout.");break}a=l;const f=t-(r?0:a.width),y=FO({orientation:s,bboxes:e,maxHeight:i-(r?a.height:0),maxWidth:f,itemPaddingY:o,itemPaddingX:n,forceResult:p});d=null!==(g=null===y||void 0===y?void 0:y.pages)&&void 0!==g?g:[],c=null!==(m=null===y||void 0===y?void 0:y.maxPageWidth)&&void 0!==m?m:0,h=null!==(v=null===y||void 0===y?void 0:y.maxPageHeight)&&void 0!==v?v:0;const b=d.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),this.pagination.updateMarkers(),l=this.pagination.getBBox(),!this.pagination.visible)break}while((f=l).width!==a.width||f.height!==a.height);var f;return{maxPageWidth:c,maxPageHeight:h,pages:d,paginationBBox:l,paginationVertical:r}}updatePositions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:t},itemSelection:i,pages:n}=this;if(n.length<1||!n[e])return;const{columns:o,startIndex:s,endIndex:r}=n[e];let a=0,l=0;const d=o.length,c=o[0].indices.length,h="horizontal"===this.getOrientation(),u=o[0].bboxes[0].height+t,p=[];i.each(((e,t,i)=>{var n,g;if(i<s||i>r)return void(e.visible=!1);const m=i-s;let v,f;h?(v=m%d,f=Math.floor(m/d)):(v=Math.floor(m/c),f=m%c),e.visible=!0;const y=o[v];y&&(l=Math.floor(u*f),a=Math.floor(null!==(n=p[f])&&void 0!==n?n:0),p[f]=(null!==(g=p[f])&&void 0!==g?g:0)+y.columnWidth,e.translationX=a,e.translationY=l)}))}updatePageNumber(e){const{itemSelection:t,group:i,pagination:n,pages:o,toggleSeries:s}=this,{startIndex:r,endIndex:a}=o[e];0===r?this.paginationTrackingIndex=0:e===o.length-1?this.paginationTrackingIndex=a:this.paginationTrackingIndex=Math.floor((r+a)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:n,interactive:s}),this.ctx.updateService.update(6)}update(){const{label:{color:e}}=this.item;this.itemSelection.each(((t,i)=>{t.setEnabled(i.enabled),t.color=e})),this.updateContextMenu()}updateContextMenu(){const{toggleSeries:e,ctx:{contextMenuRegistry:t}}=this;e?(t.hideAction(QO),t.hideAction(JO)):(t.showAction(QO),t.showAction(JO))}getLineStyles(e){var t,i;const{stroke:n,strokeOpacity:o=1,strokeWidth:s,lineDash:r}=null!==(t=e.line)&&void 0!==t?t:{},a=Math.min(2,null!==s&&void 0!==s?s:1);return{stroke:n,strokeOpacity:o,strokeWidth:null!==(i=this.item.line.strokeWidth)&&void 0!==i?i:a,lineDash:r}}getMarkerStyles(e){var t;const{fill:i,stroke:n,strokeOpacity:o=1,fillOpacity:s=1,strokeWidth:r}=e.marker,a=Math.min(2,null!==r&&void 0!==r?r:1);return{fill:i,stroke:n,strokeOpacity:o,fillOpacity:s,strokeWidth:null!==(t=this.item.marker.strokeWidth)&&void 0!==t?t:a}}computePagedBBox(){const e=cI.computeChildrenBBox(this.group.children());if(this.pages.length>1){const[t,i]=this.maxPageSize;e.height=Math.max(i,e.height),e.width=Math.max(t,e.width)}return e}findNode(e){var t;const{datum:i,proxyButton:n}=null!==(t=this.itemSelection.select((t=>{var i;return(null===(i=t.datum)||void 0===i?void 0:i.itemId)===e.itemId}))[0])&&void 0!==t?t:{};if(void 0===i||void 0===n)throw new Error("AG Charts - Missing required properties { datum: ".concat(i,", proxyButton: ").concat(JSON.stringify(n)," }"));return{datum:i,proxyButton:n}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){var i;const n=t.datum;this.preventHidingAll&&null!==(i=this.contextMenuDatum)&&void 0!==i&&i.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(QO):this.ctx.contextMenuRegistry.enableAction(QO);const{offsetX:o,offsetY:s}=e,{x:r,y:a}=rI.toCanvasPoint(t,o,s);this.ctx.contextMenuRegistry.dispatchContext("legend",{sourceEvent:e,canvasX:r,canvasY:a},{legendItem:n})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap((e=>e.getLegendData("category"))).filter((e=>e.enabled)).length}doClick(e,t,i){var n;const{listeners:{legendItemClick:o},ctx:{chartService:s,highlightManager:r},preventHidingAll:a,toggleSeries:l}=this;if(!t)return!1;const{legendType:d,seriesId:c,itemId:h,enabled:u}=t,p=s.series.find((e=>e.id===c));if(!p)return!1;let g=u;const m=WO("click",h,p.id,e);if(null===o||void 0===o||o(m.apiEvent),m.defaultPrevented)return!0;if(l){if(g=!u,a&&!g){this.getVisibleItemCount()<2&&(g=!0)}i.setChecked(g),this.ctx.chartEventManager.legendItemClick(d,p,h,g,t.legendItemName)}return g?r.updateHighlight(this.id,{series:p,itemId:h,datum:void 0}):r.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:null!==(n=t.skipAnimations)&&void 0!==n&&n}),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:n},toggleSeries:o}=this;if("integrated"===n.mode)return!1;if(!t)return!1;const{legendType:s,id:r,itemId:a,seriesId:l}=t,d=n.series.find((e=>e.id===r));if(!d)return!1;const c=WO("dblclick",a,d.id,e);if(null===i||void 0===i||i(c.apiEvent),c.defaultPrevented)return!0;if(o){var h;const e=n.series.flatMap((e=>e.getLegendData("category"))),t=e.filter((e=>e.enabled)).length,i=e.find((e=>e.itemId===a&&e.seriesId===l));this.ctx.chartEventManager.legendItemDoubleClick(s,d,a,null!==(h=null===i||void 0===i?void 0:i.enabled)&&void 0!==h&&h,t,null===i||void 0===i?void 0:i.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;if(e instanceof FocusEvent){const{x:e,y:n}=rI.toCanvas(t).computeCenter();i={type:"keyboard",canvasX:e,canvasY:n}}else{e.preventDefault();const{x:n,y:o}=rI.toCanvasPoint(t,e.offsetX,e.offsetY);i={type:"hover",canvasX:n,canvasY:o}}const{canvasX:n,canvasY:o}=i;return{canvasX:n,canvasY:o,lastPointerEvent:i,showArrow:!1}}onHover(e,t){var i;if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const n=t.datum,o=n?this.ctx.chartService.series.find((e=>e.id===(null===n||void 0===n?void 0:n.id))):void 0;if(n&&this.truncatedItems.has(null!==(i=n.itemId)&&void 0!==i?i:n.id)){const i=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,i,{title:this.getItemLabel(n)})}else this.ctx.tooltipManager.removeTooltip(this.id);null!==n&&void 0!==n&&n.enabled&&o?this.updateHighlight({series:o,itemId:null===n||void 0===n?void 0:n.itemId,datum:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){const t=this.ctx.interactionManager.getState();32===t?this.ctx.highlightManager.updateHighlight(this.id,e):2===t&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop((()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)})))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){const t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;const{layoutBox:t}=e,{x:i,y:n,width:o,height:s}=t,[r,a]=this.calculateLegendDimensions(t),{oldPages:l}=this.calcLayout(r,a),d=this.computePagedBBox(),c=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return s-d.height;default:return o-d.width}};if(this.visible){const e=this.spacing;let r,a;switch(this.position){case"top":case"bottom":r=(o-d.width)/2,a=c(),t.shrink(d.height+e,this.position);break;default:r=c(),a=(s-d.height)/2,t.shrink(d.width+e,this.position)}this.group.translationX=Math.floor(i+r-d.x),this.group.translationY=Math.floor(n+a-d.y)}return l}positionLegendDOM(e){const{ctx:t,itemSelection:i,pagination:n,pages:o,toggleSeries:s,group:r}=this,a=this.visible&&this.enabled;this.domProxy.update({visible:a,interactive:s,ctx:t,itemSelection:i,group:r,pagination:n,oldPages:e,newPages:o,datumReader:this,itemListener:this})}calculateLegendDimensions(e){const{width:t,height:i}=e,n=t/i;let o,s;switch(this.position){case"top":case"bottom":{const e=n<1?Math.min(.5,1/n*.2):.2;o=this.maxWidth?Math.min(this.maxWidth,t):t,s=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*e);break}default:{const e=n>1?Math.min(.5,.25*n):.25;o=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*e),s=this.maxHeight?Math.min(this.maxHeight,i):i}}return[o,s]}};$O.className="Legend",mw([hD(fD)],$O.prototype,"toggleSeries",2),mw([hD(mD)],$O.prototype,"pagination",2),mw([hD(mD)],$O.prototype,"item",2),mw([hD(mD)],$O.prototype,"listeners",2),mw([BA(((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;const{ctx:{legendManager:n,stateManager:o}}=e;!1===i&&!0===t&&o.restoreState(n)})),hD(fD)],$O.prototype,"enabled",2),mw([hD(UD)],$O.prototype,"position",2),mw([hD(SD,{optional:!0})],$O.prototype,"maxWidth",2),mw([hD(SD,{optional:!0})],$O.prototype,"maxHeight",2),mw([hD(fD,{optional:!0})],$O.prototype,"reverseOrder",2),mw([hD(ik(["horizontal","vertical"],"an orientation"),{optional:!0})],$O.prototype,"orientation",2),mw([hD(fD,{optional:!0})],$O.prototype,"preventHidingAll",2),mw([hD(SD)],$O.prototype,"spacing",2);var eB={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new $O(e),packageType:"community",removable:"standalone-only"},tB={};gw(tB,{CARTESIAN_AXIS_TYPE:()=>oB,CARTESIAN_POSITION:()=>nB,FONT_SIZE:()=>iB,POLAR_AXIS_SHAPE:()=>rB,POLAR_AXIS_TYPE:()=>sB});var iB=(e=>(e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=17]="LARGE",e))(iB||{}),nB=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(nB||{}),oB=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.NUMBER="number",e.TIME="time",e.LOG="log",e))(oB||{}),sB=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(sB||{}),rB=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(rB||{}),aB={};gw(aB,{DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>qB,DEFAULT_ANNOTATION_COLOR:()=>YB,DEFAULT_ANNOTATION_HANDLE_FILL:()=>QB,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>eG,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>tG,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>iG,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>nG,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>JB,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>$B,DEFAULT_AXIS_GRID_COLOUR:()=>vB,DEFAULT_AXIS_LINE_COLOUR:()=>fB,DEFAULT_BACKGROUND_COLOUR:()=>CB,DEFAULT_CAPTION_ALIGNMENT:()=>kB,DEFAULT_CAPTION_LAYOUT_STYLE:()=>DB,DEFAULT_COLOURS:()=>SB,DEFAULT_CROSS_LINES_COLOUR:()=>yB,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>VB,DEFAULT_FIBONACCI_STROKES:()=>ZB,DEFAULT_FONT_FAMILY:()=>hB,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>jB,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>WB,DEFAULT_GRIDLINE_ENABLED:()=>lG,DEFAULT_HIERARCHY_FILLS:()=>UB,DEFAULT_HIERARCHY_STROKES:()=>KB,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>gB,DEFAULT_INVERTED_BACKGROUND_COLOUR:()=>xB,DEFAULT_INVERTED_LABEL_COLOUR:()=>pB,DEFAULT_LABEL_COLOUR:()=>uB,DEFAULT_MUTED_LABEL_COLOUR:()=>mB,DEFAULT_NAVIGATOR_STROKE:()=>IB,DEFAULT_PADDING:()=>MB,DEFAULT_POLAR_SERIES_STROKE:()=>_B,DEFAULT_SEPARATION_LINES_COLOUR:()=>bB,DEFAULT_SHADOW_COLOUR:()=>wB,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>HB,DEFAULT_TEXTBOX_COLOR:()=>rG,DEFAULT_TEXTBOX_FILL:()=>oG,DEFAULT_TEXTBOX_STROKE:()=>sG,DEFAULT_TEXT_ANNOTATION_COLOR:()=>XB,DEFAULT_TOOLBAR_POSITION:()=>aG,IS_COMMUNITY:()=>dB,IS_DARK_THEME:()=>lB,IS_ENTERPRISE:()=>cB,PALETTE_ALT_DOWN_FILL:()=>BB,PALETTE_ALT_DOWN_STROKE:()=>FB,PALETTE_ALT_NEUTRAL_FILL:()=>GB,PALETTE_ALT_NEUTRAL_STROKE:()=>zB,PALETTE_ALT_UP_FILL:()=>OB,PALETTE_ALT_UP_STROKE:()=>NB,PALETTE_DOWN_FILL:()=>RB,PALETTE_DOWN_STROKE:()=>TB,PALETTE_NEUTRAL_FILL:()=>PB,PALETTE_NEUTRAL_STROKE:()=>LB,PALETTE_UP_FILL:()=>EB,PALETTE_UP_STROKE:()=>AB});var lB=Symbol("is-dark-theme"),dB=Symbol("is-community"),cB=Symbol("is-enterprise"),hB=Symbol("default-font"),uB=Symbol("default-label-colour"),pB=Symbol("default-inverted-label-colour"),gB=Symbol("default-inside-series-label-colour"),mB=Symbol("default-muted-label-colour"),vB=Symbol("default-axis-grid-colour"),fB=Symbol("default-axis-line-colour"),yB=Symbol("default-cross-lines-colour"),bB=Symbol("default-separation-lines-colour"),CB=Symbol("default-background-colour"),xB=Symbol("default-inverted-background-colour"),wB=Symbol("default-shadow-colour"),SB=Symbol("default-colours"),MB=Symbol("default-padding"),DB=Symbol("default-caption-layout-style"),kB=Symbol("default-caption-alignment"),IB=Symbol("default-navigator-stroke"),AB=Symbol("palette-up-stroke"),TB=Symbol("palette-down-stroke"),EB=Symbol("palette-up-fill"),RB=Symbol("palette-down-fill"),LB=Symbol("palette-neutral-stroke"),PB=Symbol("palette-neutral-fill"),NB=Symbol("palette-alt-up-stroke"),FB=Symbol("palette-alt-down-stroke"),OB=Symbol("palette-alt-up-fill"),BB=Symbol("palette-alt-down-fill"),GB=Symbol("palette-gray-fill"),zB=Symbol("palette-gray-stroke"),_B=Symbol("default-polar-series-stroke"),VB=Symbol("default-diverging-series-colour-range"),HB=Symbol("default-sparkline-crosshair-stroke"),WB=Symbol("default-gauge-series-colour-range"),jB=Symbol("default-funnel-series-colour-range"),UB=Symbol("default-hierarchy-fills"),KB=Symbol("default-hierarchy-strokes"),YB=Symbol("default-annotation-stroke"),ZB=Symbol("default-hierarchy-strokes"),XB=Symbol("default-text-annotation-color"),qB=Symbol("default-annotation-background-fill"),QB=Symbol("default-annotation-handle-fill"),JB=Symbol("default-annotation-statistics-fill"),$B=Symbol("default-annotation-statistics-stroke"),eG=Symbol("default-annotation-statistics-color"),tG=Symbol("default-annotation-statistics-divider-stroke"),iG=Symbol("default-annotation-statistics-fill"),nG=Symbol("default-annotation-statistics-stroke"),oG=Symbol("default-textbox-fill"),sG=Symbol("default-textbox-stroke"),rG=Symbol("default-textbox-color"),aG=Symbol("default-toolbar-position"),lG=Symbol("default-gridline-enabled");function dG(e,t){return i=>t(i)?[l(l({},e[0]),{},{position:e[1].position}),l(l({},e[1]),{},{position:e[0].position})]:e}function cG(e){let{takeColors:t}=e;const{fills:[i],strokes:[n]}=t(1);return{fill:i,stroke:n}}function hG(e){return{marker:cG(e)}}function uG(e,t,i,n,o){const{addPhaseFn:s,updatePhaseFn:r,removePhaseFn:a}=o,l=(n,o,s)=>{i.animate({id:"".concat(e,"_").concat(t,"_").concat(o.id,"_").concat(n),groupId:e,from:0,to:1,ease:HS,collapsable:!1,onUpdate(e,t){t&&"removed"!==n||(o.path.clear(!0),s(e,o),o.checkPathDirty())},onStop(){"added"===n&&(o.path.clear(!0),s(1,o),o.checkPathDirty())},phase:tM[n]})};for(const d of n)i.isSkipped()||(l("removed",d,a),l("updated",d,r)),l("added",d,s)}function pG(e,t,i){let{id:n}=e;for(var o=arguments.length,s=new Array(o>3?o-3:0),r=3;r<o;r++)s[r-3]=arguments[r];nM(n,t,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function gG(e,t,i){let{id:n}=e;for(var o=arguments.length,s=new Array(o>3?o-3:0),r=3;r<o;r++)s[r-3]=arguments[r];nM(n,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function mG(e){return{opacity:1}}var vG=class extends lD{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}},fG=class extends vG{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};mw([hD(fD),jw()],fG.prototype,"enabled",2),mw([hD(ND),jw()],fG.prototype,"color",2),mw([hD(CD),jw()],fG.prototype,"xOffset",2),mw([hD(CD),jw()],fG.prototype,"yOffset",2),mw([hD(SD),jw()],fG.prototype,"blur",2);var yG=sk((e=>MN(e)||"function"===typeof e),"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),bG=class extends vG{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:n,stroke:o,strokeWidth:s,strokeOpacity:r}=this;return{size:e,shape:t,fill:i,fillOpacity:n,stroke:o,strokeWidth:s,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}};mw([hD(fD),jw()],bG.prototype,"enabled",2),mw([hD(yG),jw()],bG.prototype,"shape",2),mw([hD(SD),jw()],bG.prototype,"size",2),mw([hD(ND,{optional:!0}),jw()],bG.prototype,"fill",2),mw([hD(MD),jw()],bG.prototype,"fillOpacity",2),mw([hD(ND,{optional:!0}),jw()],bG.prototype,"stroke",2),mw([hD(SD),jw()],bG.prototype,"strokeWidth",2),mw([hD(MD),jw()],bG.prototype,"strokeOpacity",2),mw([hD(yD,{optional:!0}),jw()],bG.prototype,"itemStyler",2);var CG=class extends lD{constructor(){super(...arguments),this.enabled=!1}};mw([hD(fD)],CG.prototype,"enabled",2);var xG=class extends lD{constructor(){super(...arguments),this.enabled=!0,this.interaction=new CG,this.position=new LN,this.range=void 0,this.class=void 0}formatTooltip(e,t){var i;const n=null===(i=this.renderer)||void 0===i?void 0:i.call(this,t);return"string"===typeof n?n:null!=n?l(l({},e),n):e}};mw([hD(fD)],xG.prototype,"enabled",2),mw([hD(fD,{optional:!0})],xG.prototype,"showArrow",2),mw([hD(yD,{optional:!0})],xG.prototype,"renderer",2),mw([hD(mD)],xG.prototype,"interaction",2),mw([hD(mD)],xG.prototype,"position",2),mw([hD(ek,{optional:!0})],xG.prototype,"range",2),mw([hD(bD,{optional:!0})],xG.prototype,"class",2);var wG=ik(["linear","smooth","step"],"a line style"),SG=ik(["start","middle","end"]),MG=class extends lD{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};mw([hD(wG)],MG.prototype,"type",2),mw([hD(MD)],MG.prototype,"tension",2),mw([hD(SG)],MG.prototype,"position",2);var DG=class extends uF{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new MG,this.shadow=new fG,this.marker=new bG,this.label=new qA,this.tooltip=new xG,this.connectMissingData=!1}};function kG(e){switch(e.type){case"linear":case"step":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function IG(e,t,i){const[n,o]=kG(e),s=o.x!==n.x?(i.x-t.x)/(o.x-n.x):0,r=o.y!==n.y?(i.y-t.y)/(o.y-n.y):0;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-n.x)*s,cp1y:i.y-(e.cp2y-n.y)*r,cp2x:i.x-(e.cp1x-n.x)*s,cp2y:i.y-(e.cp1y-n.y)*r,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-n.x)*s}}}function AG(e,t,i){const{moveTo:n}=e,[o,s]=function(e){const t=kG(e);return t[0].x>t[1].x&&t.reverse(),t}(e),{x:r,y:a}=o,{x:l,y:d}=s;if(i<r)return IG(e,o,o);if(t>l)return IG(e,s,s);switch(e.type){case"linear":{const e=a===d?void 0:(d-a)/(l-r);return{type:"linear",moveTo:n,x0:t,y0:null==e?a:e*(t-r)+a,x1:i,y1:null==e?a:e*(i-r)+a}}case"step":if(i<=e.stepX){const o=e.y0;return{type:"step",moveTo:n,x0:t,y0:o,x1:i,y1:o,stepX:i}}if(t>=e.stepX){const o=e.y1;return{type:"step",moveTo:n,x0:t,y0:o,x1:i,y1:o,stepX:t}}{const{y0:o,y1:s,stepX:r}=e;return{type:"step",moveTo:n,x0:t,y0:o,x1:i,y1:s,stepX:r}}case"cubic":{const o=UP(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[s,r]=KP(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,o);const a=UP(r[0].x,r[1].x,r[2].x,r[3].x,i);return[r,s]=KP(r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y,a),{type:"cubic",moveTo:n,cp0x:r[0].x,cp0y:r[0].y,cp1x:r[1].x,cp1y:r[1].y,cp2x:r[2].x,cp2y:r[2].y,cp3x:r[3].x,cp3y:r[3].y}}}}mw([hD(bD)],DG.prototype,"xKey",2),mw([hD(bD,{optional:!0})],DG.prototype,"xName",2),mw([hD(bD)],DG.prototype,"yKey",2),mw([hD(bD,{optional:!0})],DG.prototype,"yName",2),mw([hD(bD,{optional:!0})],DG.prototype,"yFilterKey",2),mw([hD(SD,{optional:!0})],DG.prototype,"normalizedTo",2),mw([hD(ND)],DG.prototype,"fill",2),mw([hD(MD)],DG.prototype,"fillOpacity",2),mw([hD(ND)],DG.prototype,"stroke",2),mw([hD(SD)],DG.prototype,"strokeWidth",2),mw([hD(MD)],DG.prototype,"strokeOpacity",2),mw([hD(jD)],DG.prototype,"lineDash",2),mw([hD(SD)],DG.prototype,"lineDashOffset",2),mw([hD(mD)],DG.prototype,"interpolation",2),mw([hD(mD)],DG.prototype,"shadow",2),mw([hD(mD)],DG.prototype,"marker",2),mw([hD(mD)],DG.prototype,"label",2),mw([hD(mD)],DG.prototype,"tooltip",2),mw([hD(fD)],DG.prototype,"connectMissingData",2);var TG={start:0,middle:.5,end:1};var EG=.05;function RG(e,t,i){return(t-e)*i+e}function LG(e,t){return"linear"===e.type?function(e,t){const{x0:i,y0:n,x1:o,y1:s}=e,r=(s-n)/(o-i)*(t-i)+n;return{leftCp1x:i,leftCp1y:n,leftCp2x:t,leftCp2y:r,stepX:t,stepY0:r,stepY1:r,rightCp1x:t,rightCp1y:r,rightCp2x:o,rightCp2y:s}}(e,t):"cubic"===e.type?function(e,t){const{cp0x:i,cp0y:n,cp1x:o,cp1y:s,cp2x:r,cp2y:a,cp3x:l,cp3y:d}=e,c=UP(i,o,r,l,t),[h,u]=KP(i,n,o,s,r,a,l,d,c),p=h[3].y;return{leftCp1x:h[1].x,leftCp1y:h[1].y,leftCp2x:h[2].x,leftCp2y:h[2].y,stepX:t,stepY0:p,stepY1:p,rightCp1x:u[1].x,rightCp1y:u[1].y,rightCp2x:u[2].x,rightCp2y:u[2].y}}(e,t):function(e){const{x0:t,y0:i,x1:n,y1:o,stepX:s}=e;return{leftCp1x:(t+s)/2,leftCp1y:i,leftCp2x:(t+s)/2,leftCp2y:i,stepX:s,stepY0:i,stepY1:o,rightCp1x:(s+n)/2,rightCp1y:o,rightCp2x:(s+n)/2,rightCp2y:o}}(e)}function PG(e,t,i,n,o,s,r){switch(t){case 0:r?e.moveTo(o,s):e.moveTo(i,n);break;case 1:r?e.lineTo(o,s):e.lineTo(i,n)}}function NG(e,t,i,n,o,s){s?e.lineTo(t,i):e.lineTo(n,o)}function FG(e,t,i,n,o,s,r,a,l,d){d?e.cubicCurveTo(s,r,n,o,t,i):e.cubicCurveTo(n,o,s,r,a,l)}function OG(e,t,i,n,o,s,r){r?(e.lineTo(s,o),e.lineTo(s,i),e.lineTo(t,i)):(e.lineTo(s,i),e.lineTo(s,o),e.lineTo(n,o))}function BG(e,t,i,n){const[o,s]=kG(t);switch(PG(e,i,o.x,o.y,s.x,s.y,n),t.type){case"linear":NG(e,t.x0,t.y0,t.x1,t.y1,n);break;case"cubic":FG(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,n);break;case"step":OG(e,t.x0,t.y0,t.x1,t.y1,t.stepX,n)}}function GG(e,t,i){const[n,o]=kG(e),[s,r]=kG(t);return[{x:RG(n.x,s.x,i),y:RG(n.y,s.y,i)},{x:RG(o.x,r.x,i),y:RG(o.y,r.y,i)}]}function zG(e,t,i,n,o,s){const[{x:r,y:a},{x:l,y:d}]=GG(t,i,n);if(PG(e,o,r,a,l,d,s),"cubic"===t.type&&"cubic"===i.type){FG(e,r,a,RG(t.cp1x,i.cp1x,n),RG(t.cp1y,i.cp1y,n),RG(t.cp2x,i.cp2x,n),RG(t.cp2y,i.cp2y,n),l,d,s)}else if("step"===t.type&&"step"===i.type){OG(e,r,a,l,d,RG(t.stepX,i.stepX,n),s)}else if("linear"===t.type&&"linear"===i.type)NG(e,r,a,l,d,s);else{let o;o="step"===t.type?t.stepX:"step"===i.type?i.stepX:(r+l)/2;const c=LG(t,o),h=LG(i,o),u=RG(c.leftCp1x,h.leftCp1x,n),p=RG(c.leftCp1y,h.leftCp1y,n),g=RG(c.leftCp2x,h.leftCp2x,n),m=RG(c.leftCp2y,h.leftCp2y,n),v=RG(c.stepX,h.stepX,n),f=RG(c.stepY0,h.stepY0,n),y=RG(c.stepY1,h.stepY1,n),b=RG(c.rightCp1x,h.rightCp1x,n),C=RG(c.rightCp1y,h.rightCp1y,n),x=RG(c.rightCp2x,h.rightCp2x,n),w=RG(c.rightCp2y,h.rightCp2y,n);s?(e.cubicCurveTo(x,w,b,C,v,y),e.lineTo(v,f),e.cubicCurveTo(g,m,u,p,r,a)):(e.cubicCurveTo(u,p,g,m,v,f),e.lineTo(v,y),e.cubicCurveTo(b,C,x,w,l,d))}}var _G=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(_G||{});function VG(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),"continuous"===t.type&&"number"===typeof e){return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0]}if("log"===t.type&&"number"===typeof e)return t.convert(e);if("category"!==t.type)return NaN;const i=t.domain.findIndex((t=>t===e));if(i>=0)return t.inset+t.step*i;return t.domain.findIndex((t=>{return n=t,null!=(i=e)&&null!=n&&"object"===typeof i&&"object"===typeof n&&("id"in i&&"id"in n?i.id===n.id:i.toString()===n.toString());var i,n}))>=0?t.inset+t.step*i:NaN}function HG(e){return nT(e).valueOf()}function WG(e,t){let{data:i}=e;return i.map(((e,i)=>({xValue0Index:t.indexOf(HG(e.xValue0)),xValue1Index:t.indexOf(HG(e.xValue1)),datumIndex:i})))}function jG(e,t){const i=new Map;for(const{xValue0:l,xValue1:d}of e.data){const e=HG(l),t=HG(d);i.set(e,l).set(t,d)}const n=Array.from(i,(e=>{let[t,i]=e;return{axisValue:t,value:i}}));n.sort(((t,i)=>VG(t.value,e.scales.x)-VG(i.value,e.scales.x)));const o=[];for(const{xValue0:l,xValue1:d}of t.data){const e=HG(l),t=HG(d);i.has(e)||(i.set(e,l),o.push({axisValue:e,value:l})),i.has(t)||(i.set(t,d),o.push({axisValue:t,value:d}))}o.sort(((e,i)=>VG(e.value,t.scales.x)-VG(i.value,t.scales.x)));const s=n;let r=0;for(const l of o){for(let e=s.length-1;e>r;e-=1){if(VG(l.value,t.scales.x)>VG(s[e].value,t.scales.x)){r=e+1;break}}s.splice(r,0,l),r+=1}if(!function(e,t){let i=-1/0;for(const n of e){const e=VG(n.value,t.scales.x);if(Number.isFinite(e)){if(e<i)return!1;i=e}}return!0}(s,t))return;const a=s.map((e=>e.axisValue));return{axisValues:a,oldDataAxisIndices:WG(t,a),newDataAxisIndices:WG(e,a)}}function UG(e,t,i){if(i.xValue1Index===i.xValue0Index+1)return e;const n=kG(e),o=(n[1].x-n[0].x)/(i.xValue1Index-i.xValue0Index),s=n[0].x+(t-i.xValue0Index)*o;return AG(e,s,s+o)}function KG(e,t){const[i,n]=kG(e),o=VG(0,t.scales.y);return IG(e,{x:i.x,y:o},{x:n.x,y:o})}function YG(e){const[t,i]=kG(e);return function(e,t){const{x:i,y:n}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n};case"step":return{type:"step",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n,stepX:i};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:i,cp0y:n,cp1x:i,cp1y:n,cp2x:i,cp2y:n,cp3x:i,cp3y:n}}}(e,{x:(t.x+i.x)/2,y:(t.y+i.y)/2})}function ZG(e,t,i,n,o,s){let r,a;if(o.xValue0Index>=s.xValue1Index){var l;const e=null===(l=n.findLast((e=>e.xValue1Index<=s.xValue1Index)))||void 0===l?void 0:l.datumIndex,t=null!=e?i.data[e]:void 0;r=null===t||void 0===t?void 0:t.xValue1,a=null===t||void 0===t?void 0:t.yValue1}else if(o.xValue0Index<=s.xValue0Index){var d;const e=null===(d=n.find((e=>e.xValue0Index>=s.xValue0Index)))||void 0===d?void 0:d.datumIndex,t=null!=e?i.data[e]:void 0;r=null===t||void 0===t?void 0:t.xValue0,a=null===t||void 0===t?void 0:t.yValue0}if(null==r||null==a)switch(t){case 0:return KG(e,i);case 1:return YG(e)}const c={x:VG(r,i.scales.x),y:VG(a,i.scales.y)};return IG(e,c,c)}function XG(e,t){var i;if(null==t)return;const n=HG(e.xValue0),o=HG(e.xValue1);return null===(i=t.find((e=>HG(e.xValue0)===n&&HG(e.xValue1)===o)))||void 0===i?void 0:i.span}function qG(e,t,i,n,o,s,r){const a=e.data[n.datumIndex],l=a.span,d=XG(a,o);if(null!=d)r.removed.push({from:d,to:d}),r.moved.push({from:d,to:l}),r.added.push({from:l,to:l});else{const o=ZG(l,t,e,i,n,s);r.added.push({from:o,to:l})}}function QG(e,t,i,n,o,s,r){const a=e.data[n.datumIndex],l=a.span,d=XG(a,o);if(null!=d)r.removed.push({from:l,to:l}),r.moved.push({from:l,to:d}),r.added.push({from:d,to:d});else{const o=ZG(l,t,e,i,n,s);r.removed.push({from:l,to:o})}}function JG(e,t,i,n,o){const s=t[o.xValue0Index],r=i.data.find((e=>HG(e.xValue0)===s)),a=t[o.xValue1Index],l=i.data.find((e=>HG(e.xValue1)===a));if(null==r||null==l)return;const[{x:d},{x:c}]=kG(e),h=VG(r.xValue0,i.scales.x),u=VG(r.yValue0,i.scales.y),p=VG(l.xValue1,i.scales.x),g=VG(l.yValue1,i.scales.y);let m=n.data[o.datumIndex].span;return m=IG(m,{x:h,y:u},{x:p,y:g}),m=AG(m,d,c),m}function $G(e,t,i,n,o,s,r,a,l){const d=o+1,c=r.find((e=>e.xValue0Index<=o&&e.xValue1Index>=d)),h=s.find((e=>e.xValue0Index<=o&&e.xValue1Index>=d)),u=t.zeroData,p=e.zeroData;if(null==c&&null!=h)return void qG(e,i,s,h,u,a,l);if(null!=c&&null==h)return void QG(t,i,r,c,p,a,l);if(null==c||null==h)return;let g;g=c.xValue0Index===h.xValue0Index&&c.xValue1Index===h.xValue1Index?0:c.xValue0Index<=h.xValue0Index&&c.xValue1Index>=h.xValue1Index?-1:c.xValue0Index>=h.xValue0Index&&c.xValue1Index<=h.xValue1Index?1:0;const m=UG(t.data[c.datumIndex].span,o,c),v=UG(e.data[h.datumIndex].span,o,h);if(1===g){const o=JG(m,n,t,e,h);null!=o?(l.removed.push({from:m,to:o}),l.moved.push({from:o,to:v}),l.added.push({from:v,to:v})):QG(t,i,r,c,p,a,l)}else if(-1===g){const o=JG(v,n,e,t,c);null!=o?(l.removed.push({from:m,to:m}),l.moved.push({from:m,to:o}),l.added.push({from:o,to:v})):qG(e,i,s,h,u,a,l)}else l.removed.push({from:m,to:m}),l.moved.push({from:m,to:v}),l.added.push({from:v,to:v})}function ez(e,t,i){var n;const{span:o}=t;switch(i){case 0:return null!==(n=XG(t,e.zeroData))&&void 0!==n?n:KG(o,e);case 1:return YG(o)}}function tz(e,t,i){if(!function(e,t){const i=t.scales.x,n=e.scales.x;if("category"!==(null===i||void 0===i?void 0:i.type)||"category"!==(null===n||void 0===n?void 0:n.type))return!0;let o=-1/0;for(const s of i.domain){const e=VG(s,n);if(Number.isFinite(e)){if(e<o)return!1;o=e}}return!0}(e,t))return;const n=jG(e,t);return null==n?function(e,t,i){const n=[],o=[];for(const s of t.data){const e=s.span,n=ez(t,s,i);o.push({from:e,to:n})}for(const s of e.data){const t=s.span,o=ez(e,s,i);n.push({from:o,to:t})}return{removed:o,moved:[],added:n}}(e,t,i):function(e,t,i,n){var o,s,r,a,l,d,c,h;const u={removed:[],moved:[],added:[]},{axisValues:p,oldDataAxisIndices:g,newDataAxisIndices:m}=e,v={xValue0Index:Math.max(null!==(o=null===(s=g.at(0))||void 0===s?void 0:s.xValue0Index)&&void 0!==o?o:-1/0,null!==(r=null===(a=m.at(0))||void 0===a?void 0:a.xValue0Index)&&void 0!==r?r:-1/0),xValue1Index:Math.min(null!==(l=null===(d=g.at(-1))||void 0===d?void 0:d.xValue1Index)&&void 0!==l?l:1/0,null!==(c=null===(h=m.at(-1))||void 0===h?void 0:h.xValue1Index)&&void 0!==c?c:1/0)};for(let f=0;f<p.length-1;f+=1)$G(t,i,n,p,f,m,g,v,u);return u}(n,e,t,i)}function iz(e){return"continuous"===e.type||"log"===e.type}function nz(e){return"category"===e.type}function oz(e,t){return void 0===e||void 0===t?void 0!==e||void 0!==t:iz(e)&&iz(t)?e.type===t.type&&vM(e.domain,t.domain)&&vM(e.range,t.range):!(!nz(e)||!nz(t))&&(e.inset===t.inset&&e.step===t.step&&vM(e.domain,t.domain))}function sz(e){return null!=e&&("category"===e.type?e.domain.every((e=>null!=e)):e.domain.every((e=>Number.isFinite(e)||e instanceof Date))&&e.range.every((e=>Number.isFinite(e))))}function rz(e,t){let i;const n=e.map((e=>e.point));switch(t.type){case"linear":i=function(e){const t=[];let i=0,n=NaN,o=NaN;for(const{x:s,y:r}of e){if(i>0){const e=1===i;t.push({type:"linear",moveTo:e,x0:n,y0:o,x1:s,y1:r})}i+=1,n=s,o=r}return t}(n);break;case"smooth":i=function(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const n=i.map(((e,t)=>{const n=0===t?e:i[t-1],o=t===i.length-1?e:i[t+1],s=0===t||t===i.length-1;if(Math.sign(n.y-e.y)===Math.sign(o.y-e.y))return 0;if(!s){const t=Math.abs(n.y-o.y),i=Math.abs(e.y-n.y)/t,s=Math.abs(e.y-o.y)/t;if(i<=EG||1-i<=EG||s<=EG||1-s<=EG)return 0}return(o.y-n.y)/(o.x-n.x)}));0===n[1]&&(n[0]*=2),0===n[n.length-2]&&(n[n.length-1]*=2);const o=[];for(let s=1;s<i.length;s+=1){const e=i[s-1],r=n[s-1],a=i[s],l=n[s],d=a.x-e.x,c=a.y-e.y;let h=d*t/3,u=d*r*t/3,p=d*t/3,g=d*l*t/3;0===l&&Math.abs(u)>Math.abs(c)&&(h*=Math.abs(c/u),u=Math.sign(u)*Math.abs(c)),0===r&&Math.abs(g)>Math.abs(c)&&(p*=Math.abs(c/g),g=Math.sign(g)*Math.abs(c)),o.push({type:"cubic",moveTo:1===s,cp0x:e.x,cp0y:e.y,cp1x:e.x+h,cp1y:e.y+u,cp2x:a.x-p,cp2y:a.y-g,cp3x:a.x,cp3y:a.y})}return o}(n,t.tension);break;case"step":i=function(e,t){const i=[];let n=0,o=NaN,s=NaN;const r="number"===typeof t?t:TG[t];for(const{x:a,y:l}of e){if(n>0){const e=1===n,t=o+(a-o)*r;i.push({type:"step",moveTo:e,x0:o,y0:s,x1:a,y1:l,stepX:t})}n+=1,o=a,s=l}return i}(n,t.position)}return i.map(((t,i)=>({span:t,xValue0:e[i].xDatum,yValue0:e[i].yDatum,xValue1:e[i+1].xDatum,yValue1:e[i+1].yDatum})))}function az(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function lz(e,t){let i,{path:n}=e;for(const{span:o}of t){const[e,t]=kG(o);BG(n,o,null!=i&&az(i,e)?1:0,!1),i=t}}function dz(e,t,i){let n;for(const o of i){const[i,s]=GG(o.from,o.to,e),r=null!=n&&az(n,i)?1:0;zG(t.path,o.from,o.to,e,r,!1),n=s}}function cz(e,t,i){return{status:e,path:{addPhaseFn:(e,i)=>dz(e,i,t.added),updatePhaseFn:(e,i)=>dz(e,i,t.moved),removePhaseFn:(e,i)=>dz(e,i,t.removed)},pathProperties:hz(e,i)}}function hz(e,t){const i="none"===t?"updated":e,n={fromFn:t=>{let n;return n="removed"===e?{finish:{visible:!1}}:"added"===e?{start:{visible:!0}}:{},l({phase:tM[i]},n)},toFn:e=>({phase:tM[i]})};return"fade"===t?{fromFn:t=>l({opacity:"added"===e?0:t.opacity},n.fromFn(t)),toFn:t=>l({opacity:"removed"===e?0:1},n.toFn(t))}:n}function uz(e,t,i){var n,o,s;if("category"===(null===(n=e.scales.x)||void 0===n?void 0:n.type)!==("category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type))||!sz(e.scales.x)||!sz(t.scales.x))return;if(null==e.strokeData||null==t.strokeData)return;let r="updated";t.visible&&!e.visible?r="removed":!t.visible&&e.visible&&(r="added");const a=tz({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(null==a)return;return{status:r,stroke:cz(r,a,"fade"),hasMotion:null===(s=null===i||void 0===i?void 0:i.changed)||void 0===s||s||!oz(e.scales.x,t.scales.x)||!oz(e.scales.y,t.scales.y)||"updated"!==r}}function pz(e,t){let{path:i}=e,{spans:n,phantomSpans:o}=t;for(let s=0;s<n.length;s+=1){const{span:e}=n[s],t=o[s].span;BG(i,e,0,!1),BG(i,t,1,!0),i.closePath()}}function gz(e,t,i,n){let{path:o}=t;for(let s=0;s<i.length;s+=1){const t=i[s],r=n[s];zG(o,t.from,t.to,e,0,!1),zG(o,r.from,r.to,e,1,!0),o.closePath()}}function mz(e,t,i,n){return{status:e,path:{addPhaseFn:(e,n)=>gz(e,n,t.added,i.added),updatePhaseFn:(e,n)=>gz(e,n,t.moved,i.moved),removePhaseFn:(e,n)=>gz(e,n,t.removed,i.removed)},pathProperties:hz(e,n)}}function vz(e,t){var i,n;if("category"===(null===(i=e.scales.x)||void 0===i?void 0:i.type)!==("category"===(null===(n=t.scales.x)||void 0===n?void 0:n.type))||!sz(e.scales.x)||!sz(t.scales.x))return;let o="updated";t.visible&&!e.visible?o="removed":!t.visible&&e.visible&&(o="added");const s=tz({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(null==s)return;const r=tz({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(null==r)return;const a=tz({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(null==a)return;const l="none";return{status:o,fill:mz(o,s,r,l),stroke:cz(o,a,l)}}function fz(e,t,i){let{id:n}=e;const o={phase:i?tM[i]:"trailing"};for(var s=arguments.length,r=new Array(s>3?s-3:0),a=3;a<s;a++)r[a-3]=arguments[a];nM(n,"markers",t,r,{opacity:0},{opacity:1},o),r.forEach((e=>e.cleanup()))}function yz(e,t){let{id:i}=e;for(var n=arguments.length,o=new Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];nM(i,"markers",t,o,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),o.forEach((e=>e.cleanup()))}function bz(e,t){let{id:i,nodeDataDependencies:n}=e;const o=n.seriesRectWidth;for(var s=arguments.length,r=new Array(s>2?s-2:0),a=2;a<s;a++)r[a-2]=arguments[a];iM(i,"markers",t,r,{fromFn:(e,t)=>{var i,n;const s=null!==(i=null===(n=t.midPoint)||void 0===n?void 0:n.x)&&void 0!==i?i:o;let r=Rw(0,YS(s/o),1);return isNaN(r)&&(r=0),{scalingX:0,scalingY:0,delay:r,duration:ZS,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Cz(e){return{opacity:1,scalingX:1,scalingY:1}}function xz(e,t){var i,n,o,s;return{translationX:null!==(i=null===(n=t.point)||void 0===n?void 0:n.x)&&void 0!==i?i:NaN,translationY:null!==(o=null===(s=t.point)||void 0===s?void 0:s.y)&&void 0!==o?o:NaN}}function wz(e,t){const i=(t,i)=>{const n=e[i][t];return Array.isArray(n)?n[0]:n},n=t=>{const{xValue:n}=t;return e.moved[n]?{point:i(n,"moved"),status:"updated"}:e.removed[n]?{point:i(n,"removed"),status:"removed"}:e.added[n]?{point:i(n,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(e,i)=>{var o,s,r,a;const{status:d,point:c}=n(i);if("unknown"===d)return{opacity:0};const h={translationX:null!==(o=null===c||void 0===c||null===(s=c.from)||void 0===s?void 0:s.x)&&void 0!==o?o:e.translationX,translationY:null!==(r=null===c||void 0===c||null===(a=c.from)||void 0===a?void 0:a.y)&&void 0!==r?r:e.translationY,opacity:e.opacity,phase:tM[d]};var u,p;return"added"===t?l(l({},h),{},{opacity:0,translationX:null===c||void 0===c||null===(u=c.to)||void 0===u?void 0:u.x,translationY:null===c||void 0===c||null===(p=c.to)||void 0===p?void 0:p.y,phase:tM.added}):("added"===d&&(h.opacity=0),h)},toFn:(e,i)=>{const{status:o,point:s}=n(i);if("unknown"===o)return{opacity:0};const r={translationX:i.point.x,translationY:i.point.y,opacity:1,phase:tM[o]};var a,d;return"removed"===o||"removed"===t?l(l({},r),{},{translationX:null===s||void 0===s||null===(a=s.to)||void 0===a?void 0:a.x,translationY:null===s||void 0===s||null===(d=s.to)||void 0===d?void 0:d.y,opacity:0,phase:tM.removed}):r}}}function Sz(e,t){var i;let{datumIndex:n}=t;const o=e.getNodeData();if(void 0===o)return;const s=o[n],{point:r}=s;if(null==s||null==r)return;const a=null!==(i=r.focusSize)&&void 0!==i?i:e.getFormattedMarkerStyle(s).size,l=a/2,d=s.point.x-l,c=s.point.y-l;return new Ww(d,c,a,a)}var Mz=.05;function Dz(e){return e.reduce(((e,t)=>{let{min:i,max:n}=e;return(null==i||i.point.x>t.point.x)&&(i=t),(null==n||n.point.x<t.point.x)&&(n=t),{min:i,max:n}}),{})}function kz(e,t,i){const n=(t.y-e.y)/(t.x-e.x);return{x:i,y:(i-e.x)*n+e.y}}function Iz(e,t,i,n){let o=-1,s=0;const r=[];for(;s<e.length;)e[s].change!==t?e[s].change!==i?(r.length>0&&(n(r,o,s),r.length=0),o=s,s++):s++:(r.push(e[s]),s++);r.length>0&&n(r,o,s)}function Az(e,t){Iz(e,"out","in",((i,n,o)=>{var s,r;-1===n&&e[o]?i.forEach((t=>t.to=e[o].from)):o===e.length&&e[n]?i.forEach((t=>t.to=e[n].from)):"intersect"===t&&null!==(s=e[n])&&void 0!==s&&s.from&&null!==(r=e[o])&&void 0!==r&&r.from?i.forEach((t=>t.to=kz(e[n].from,e[o].from,t.from.x))):i.forEach((e=>e.to=e.from))})),Iz(e,"in","out",((i,n,o)=>{var s,r;-1===n&&e[o]?i.forEach((t=>t.from=e[o].to)):o===e.length&&e[n]?i.forEach((t=>t.from=e[n].to)):"intersect"===t&&null!==(s=e[n])&&void 0!==s&&s.to&&null!==(r=e[o])&&void 0!==r&&r.to?i.forEach((t=>t.from=kz(e[n].to,e[o].to,t.to.x))):i.forEach((e=>e.from=e.to))}))}function Tz(e,t,i){const n=isNaN(e.x)?t.x:e.x,o=isNaN(e.y)?t.y:e.y,s=t.x-e.x,r=t.y-e.y;return{x:n+(isNaN(s)?0:s*i),y:o+(isNaN(r)?0:r*i)}}var Ez={start:0,middle:.5,end:1};function Rz(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{path:o}=t;var s;if("smooth"===(null===i||void 0===i?void 0:i.type))!function(e,t,i,n){const o=Array.isArray(t)?t:Array.from(t);if(0===o.length)return;if(n?e.lineTo(o[0].x,o[0].y):e.moveTo(o[0].x,o[0].y),o.length<=1)return;const s=o.map(((e,t)=>{const i=0===t?e:o[t-1],n=t===o.length-1?e:o[t+1],s=0===t||t===o.length-1;if(Math.sign(i.y-e.y)===Math.sign(n.y-e.y))return 0;if(!s){const t=Math.abs(i.y-n.y),o=Math.abs(e.y-i.y)/t,s=Math.abs(e.y-n.y)/t;if(o<=Mz||1-o<=Mz||s<=Mz||1-s<=Mz)return 0}return(n.y-i.y)/(n.x-i.x)}));0===s[1]&&(s[0]*=2),0===s[s.length-2]&&(s[s.length-1]*=2);for(let r=1;r<o.length;r+=1){const t=o[r-1],n=s[r-1],a=o[r],l=s[r],d=a.x-t.x,c=a.y-t.y;let h=d*i/3,u=d*n*i/3,p=d*i/3,g=d*l*i/3;0===l&&Math.abs(u)>Math.abs(c)&&(h*=Math.abs(c/u),u=Math.sign(u)*Math.abs(c)),0===n&&Math.abs(g)>Math.abs(c)&&(p*=Math.abs(c/g),g=Math.sign(g)*Math.abs(c)),e.cubicCurveTo(t.x+h,t.y+u,a.x-p,a.y-g,a.x,a.y)}}(o,e,null!==(s=i.tension)&&void 0!==s?s:1,n);else if("step"===(null===i||void 0===i?void 0:i.type)){var r;!function(e,t,i,n){let o;for(const a of t){if(null!=o){var s,r;const t=o.x<a.x?i:1-i,n=(a.x-o.x)*t+o.x;e.lineTo(n,null!==(s=null===(r=o)||void 0===r?void 0:r.y)&&void 0!==s?s:a.y),e.lineTo(n,a.y),e.lineTo(a.x,a.y)}else n?e.lineTo(a.x,a.y):e.moveTo(a.x,a.y);o=a}}(o,e,Ez[null!==(r=i.position)&&void 0!==r?r:"end"],n)}else!function(e,t,i){let n=i;for(const{x:o,y:s}of t)n?e.lineTo(o,s):(e.moveTo(o,s),n=!0)}(o,e,n)}function Lz(e,t){let i,n;const o=[],s=()=>{null!=n&&(o.push(n),n=void 0)};for(const l of e){const{from:e,to:o}=l,d=t[l.change];if(null==d||null==e||null==o)continue;const c=Tz(e,o,d);var r;if(!1===l.moveTo)null!==(r=n)&&void 0!==r||(n=[]),n.push(c);else if(!0!==l.moveTo&&i){if(i){var a;const e="in"===l.moveTo?d:1-d,{x:t,y:o}=Tz(i,c,e);null!==(a=n)&&void 0!==a||(n=[]),n.push({x:t,y:o}),s(),n=[c]}}else s(),n=[c];i=c}return s(),o}function Pz(e,t,i,n){Lz(e,t).forEach((e=>{Rz(e,i,n)}))}function Nz(e,t){let{id:i,visible:n,nodeDataDependencies:o}=e;const{seriesRectWidth:s,seriesRectHeight:r}=o;for(var a=arguments.length,l=new Array(a>2?a-2:0),d=2;d<a;d++)l[d-2]=arguments[d];nM(i,"path_properties",t,l,{clipX:0},{clipX:s},{phase:"initial",start:{clip:!0,clipY:r,visible:n},finish:{clip:!1,visible:n}})}function Fz(e,t,i){let{id:n}=e,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"add";for(var s=arguments.length,r=new Array(s>4?s-4:0),a=4;a<s;a++)r[a-4]=arguments[a];nM(n,t,i,r,{opacity:0},{opacity:1},{phase:o})}function Oz(e,t,i){let{id:n}=e;for(var o=arguments.length,s=new Array(o>3?o-3:0),r=3;r<o;r++)s[r-3]=arguments[r];nM(n,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function Bz(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function Gz(e,t){let{nodeDataDependencies:i}=e;const n=e=>isFinite(e)?e:0;t.clipX=n(i.seriesRectWidth),t.clipY=n(i.seriesRectHeight)}var zz=class extends gF{constructor(e){super({moduleCtx:e,directionKeys:dF,directionNames:cF,pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:Bz({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:mG,marker:(e,t)=>l(l({},{opacity:1,scalingX:1,scalingY:1}),xz(0,t))}}),this.properties=new DG,this.connectsToYAxis=!0,this.backgroundGroup=new cI({name:"".concat(this.id,"-background"),zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||null!=this.contextNodeData&&(this.contextNodeData.fillData.spans.length>pF||this.contextNodeData.strokeData.spans.length>pF)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),null===e||void 0===e||e.removeChild(this.backgroundGroup)}attachPaths(e){let[t,i]=e;this.backgroundGroup.appendChild(t),this.contentGroup.appendChild(i),i.zIndex=-1}isStacked(){var e,t;return(null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.stackCount)&&void 0!==e?e:1)>1}setSeriesIndex(e){const t=this.isStacked();return!(!super.setSeriesIndex(e)&&this._isStacked===t)&&(this._isStacked=t,t?(this.backgroundGroup.zIndex=[0,e],this.contentGroup.zIndex=[1,e,0]):(this.backgroundGroup.zIndex=[1,e,0,0],this.contentGroup.zIndex=[1,e,0,1]),!0)}async processData(e){var t,i;if(null==this.data||!this.properties.isValid())return;const{data:n,visible:o,seriesGrouping:{groupIndex:s=this.id,stackCount:r=1}={}}=this,{xKey:a,yKey:d,yFilterKey:c,connectMissingData:h,normalizedTo:u}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=null===(t=this.axes.x)||void 0===t?void 0:t.scale,m=null===(i=this.axes.y)||void 0===i?void 0:i.scale,{xScaleType:v,yScaleType:f}=this.getScaleInformation({xScale:g,yScale:m}),y={value:"area-stack-".concat(s,"-yValue"),values:"area-stack-".concat(s,"-yValues"),stack:"area-stack-".concat(s,"-yValue-stack"),marker:"area-stack-".concat(s,"-yValues-marker")},b=[];dS(u)&&b.push(ZF(Object.values(y),u,"range")),p&&b.push(JF());const C={invalidValue:null};(dS(u)||h)&&r>1&&(C.invalidValue=0),o||(C.forceValue=0),await this.requestDataModel(e,n,{props:[BF(a,v,{id:"xValue"}),GF(d,f,l({id:"yValueRaw"},C)),...null!=c?[GF(c,f,{id:"yFilterRaw"})]:[],...WF(d,f,l(l({id:"yValueStack"},C),{},{groupId:y.stack})),GF(d,f,l(l({id:"yValue"},C),{},{groupId:y.value})),...HF(d,"window","current",l(l({id:"yValueEnd"},C),{},{groupId:y.values}),f),...HF(d,"normal","current",l(l({id:"yValueCumulative"},C),{},{groupId:y.marker}),f),...b],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}getSeriesDomain(e){var t;const{processedData:i,dataModel:n,axes:o}=this;if(!i||!n||null===(t=i.rawData)||void 0===t||!t.length)return[];const s=o.y,r=n.resolveProcessedDataDefById(this,"xValue"),a=n.getDomain(this,"xValue","key",i),l=n.getDomain(this,"yValueEnd","value",i);if("x"===e)return"key"===(null===r||void 0===r?void 0:r.def.type)&&"category"===r.def.valueType?a:ZL(gM(a));if(s instanceof kO||s instanceof IO)return ZL(l);return ZL([l[0]>0?0:l[0],l[1]<0?0:l[1]])}getSeriesRange(e,t){const{dataModel:i,processedData:n}=this;if(!i||!n)return[NaN,NaN];const o=this.axes.x.scale,s=i.resolveKeysById(this,"xValue",n),[r,a]=BN(s.length,t,(e=>{const t=o.convert(s[e]);return[t,t]})),[l,d]=i.getDomainBetweenRange(this,["yValueEnd"],[r,a],n);return[Math.min(l,0),Math.max(d,0)]}createNodeData(){var e,t,i;const{axes:n,data:o,processedData:s,dataModel:r}=this,a=n.x,l=n.y;if(!a||!l||!o||!r||null===s||void 0===s||!s.rawData.length||"grouped"!==s.type||!this.properties.isValid())return;const{yKey:d,xKey:c,yFilterKey:h,marker:u,label:p,fill:g,stroke:m,connectMissingData:v,interpolation:f}=this.properties,{scale:y}=a,{scale:b}=l,{isContinuousY:C}=this.getScaleInformation({xScale:y,yScale:b}),x=(null!==(e=y.bandwidth)&&void 0!==e?e:0)/2,w=r.resolveKeysById(this,"xValue",s),S=r.resolveColumnById(this,"yValueEnd",s),M=r.resolveColumnById(this,"yValueRaw",s),D=r.resolveColumnById(this,"yValueCumulative",s),k=null!=h?r.resolveColumnById(this,"yFilterRaw",s):void 0,I=r.resolveColumnById(this,"yValueStack",s),A=(e,t,i)=>{let n;return(dS(this.properties.normalizedTo)?C&&tT(i):!isNaN(i))&&(n=t),{x:y.convert(e)+x,y:b.convert(n),size:u.size}},T=[],E=[],{visibleSameStackCount:R}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let L=!1;const{rawData:P}=s;s.groups.forEach((e=>{let{datumIndices:t}=e;t.forEach((e=>{const t=w[e];if(null==t)return;const i=P[e],n=M[e],o=D[e],s=S[e],r=Number.isFinite(n),a=A(t,+o,n),l=null!=k?k[e]===n:void 0;var h,v,f;(!1===l&&(L=!0),r&&u)&&E.push({index:e,series:this,itemId:d,datum:i,datumIndex:e,midPoint:{x:a.x,y:a.y},cumulativeValue:s,yValue:n,xValue:t,yKey:d,xKey:c,point:a,fill:null!==(h=u.fill)&&void 0!==h?h:g,stroke:null!==(v=u.stroke)&&void 0!==v?v:m,strokeWidth:null!==(f=u.strokeWidth)&&void 0!==f?f:this.getStrokeWidth(this.properties.strokeWidth),selected:l});if(r&&p){const t=this.getLabelText(p,{value:n,datum:i,xKey:c,yKey:d,xName:this.properties.xName,yName:this.properties.yName});T.push({index:e,series:this,itemId:d,datum:i,x:a.x,y:a.y,labelText:t})}}))}));const N=s.groups.flatMap((e=>e.datumIndices)),F=(e,t)=>({point:{x:y.convert(e)+x,y:b.convert(t)},xDatum:e,yDatum:t}),O=e=>{const t=[];for(let i=0;i<N.length;i+=1){const n=N[i],o=w[n],s=I[n],r=s[e],a=Number.isFinite(r);if(v&&!a)continue;const l=i>0?I[N[i-1]]:void 0,d=i<N.length-1?I[N[i+1]]:void 0;let c=0,h=0;for(let t=0;t<=e;t+=1){const e=s[t];if(Number.isFinite(e)){(null==l||Number.isFinite(l[t]))&&(c+=e),(null==d||Number.isFinite(d[t]))&&(h+=e)}}const u=t[t.length-1];if(v||c===h&&a){const e=Math.max(c,h),i=F(o,e);Array.isArray(u)?u.push(i):null!=u?(u.skip+=1,t.push([i])):t.push([i])}else if(!a&&Array.isArray(u)&&1===u.length)t[t.length-1]={skip:1};else{const e=F(o,c),i=F(o,h);Array.isArray(u)?u.push(e):null!=u&&(u.skip+=1),t.push(a?[i]:{skip:0})}}return(e=>e.flatMap((e=>Array.isArray(e)?rz(e,f):new Array(e.skip).fill(null))))(t)},B=null!==(t=null===(i=this.seriesGrouping)||void 0===i?void 0:i.stackIndex)&&void 0!==t?t:0,G=O(B),z=G.map((()=>null));for(let W=B-1;W>=-1;W-=1){let e;for(let t=0;t<z.length;t+=1){var _;null==z[t]&&(null!==(_=e)&&void 0!==_||(e=-1!==W?O(W):rz(N.map((e=>{const t=w[e],i=I[e][B];if(!v||Number.isFinite(i))return F(t,0)})).filter((e=>null!=e)),f)),z[t]=e[t])}}const V=G.map(((e,t)=>null!==e&&void 0!==e?e:z[t])),H=G.filter((e=>null!=e));return{itemId:d,fillData:{itemId:d,spans:V,phantomSpans:z},strokeData:{itemId:d,spans:H},labelData:T,nodeData:E,scales:this.calculateScaling(),visible:this.visible,stackVisible:R>0,crossFiltering:L}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(DN(e))}updatePathNodes(e){var t;const{opacity:i,visible:n,animationEnabled:o}=e,[s,r]=e.paths,a=!0===(null===(t=this.contextNodeData)||void 0===t?void 0:t.crossFiltering),l=this.getStrokeWidth(this.properties.strokeWidth);r.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:l,strokeOpacity:this.properties.strokeOpacity*(a?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:i,visible:n||o}),s.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity*(a?.125:1),fillShadow:this.properties.shadow,opacity:i,visible:n||o}),Gz(this,r),Gz(this,s)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty()}updateFillPath(e,t){const[i]=e;i.path.clear(),pz(i,t.fillData),i.markDirty()}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,n]=e;n.path.clear(),lz(n,i),n.markDirty()}updateMarkerSelection(e){var t;const{nodeData:i,markerSelection:n}=e,o=this.properties.marker.enabled||!0===(null===(t=this.contextNodeData)||void 0===t?void 0:t.crossFiltering);return this.properties.marker.isDirty()&&(n.clear(),n.cleanup()),n.update(o?i:[])}getMarkerItemBaseStyle(e){var t,i,n,o,s;const{marker:r}=this.properties,a=e?this.properties.highlightStyle.item:void 0;return{fill:null!==(t=null===a||void 0===a?void 0:a.fill)&&void 0!==t?t:r.fill,fillOpacity:null!==(i=null===a||void 0===a?void 0:a.fillOpacity)&&void 0!==i?i:r.fillOpacity,stroke:null!==(n=null===a||void 0===a?void 0:a.stroke)&&void 0!==n?n:r.stroke,strokeWidth:null!==(o=null===a||void 0===a?void 0:a.strokeWidth)&&void 0!==o?o:r.strokeWidth,strokeOpacity:null!==(s=null===a||void 0===a?void 0:a.strokeOpacity)&&void 0!==s?s:r.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,n,o,s){const{marker:r}=this.properties,{itemStyler:a}=r;if(null==a)return;const{id:d,properties:c}=this,{xKey:h,yKey:u}=c,{xDomain:p,yDomain:g}=this.cachedDatumCallback("domain",(()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})));return this.cachedDatumCallback(aO(e,s?"highlight":"node"),(()=>a(l(l({seriesId:d},ON(t,h,u,p,g)),{},{xValue:i,yValue:n,highlighted:s},o))))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:o,marker:s,fill:r,stroke:a,strokeWidth:d,fillOpacity:c,strokeOpacity:h,highlightStyle:u}=this.properties,p=this.getSeriesDomain("x"),g=this.getSeriesDomain("y"),m=ES(i&&u.item,s.getStyle(),{fill:r,stroke:a,strokeWidth:d,fillOpacity:c,strokeOpacity:h});t.each(((e,t)=>{this.updateMarkerStyle(e,s,l(l({},ON(t,n,o,p,g)),{},{highlighted:i}),m,{selected:t.selected})})),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{enabled:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:r,color:a}=this.properties.label;t.each(((e,t)=>{const{x:l,y:d,labelText:c}=t;c&&i&&this.visible?(e.fontStyle=n,e.fontWeight=o,e.fontSize=s,e.fontFamily=r,e.textAlign="center",e.textBaseline="bottom",e.text=c,e.x=l,e.y=d-10,e.fill=a,e.visible=!0):e.visible=!1}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{xKey:r,xName:a,yKey:d,yName:c,tooltip:h}=s,u=o.x,p=o.y;if(!i||!n||0===n.rawData.length||!u||!p)return;const{datumIndex:g}=e,m=n.rawData[g],v=i.resolveKeysById(this,"xValue",n)[g],f=i.resolveColumnById(this,"yValueRaw",n)[g];if(null==v)return;const y=this.getMarkerItemBaseStyle(!1);return Object.assign(y,this.getMarkerItemStyleOverrides(String(g),m,v,f,y,!1)),h.formatTooltip({heading:u.formatDatum(v),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:d,value:p.formatDatum(f)}]},l(l({seriesId:t,datum:m,title:c,xKey:r,xName:a,yKey:d,yName:c},y),this.getModuleTooltipParams()))}legendItemSymbol(){var e,t,i;const{fill:n,stroke:o,fillOpacity:s,strokeOpacity:r,strokeWidth:a,lineDash:l,marker:d}=this.properties,c=!d.enabled||void 0===d.fill;return{marker:{shape:d.shape,fill:c?n:d.fill,fillOpacity:c?s:d.fillOpacity,stroke:null!==(e=d.stroke)&&void 0!==e?e:o,strokeOpacity:null!==(t=d.strokeOpacity)&&void 0!==t?t:r,strokeWidth:null!==(i=d.strokeWidth)&&void 0!==i?i:0,enabled:d.enabled||a<=0},line:{stroke:o,strokeOpacity:r,strokeWidth:a,lineDash:l}}}getLegendData(e){var t;if(!this.properties.isValid()||"category"!==e)return[];const{id:i,ctx:{legendManager:n},visible:o}=this,{yKey:s,yName:r,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:e,id:i,itemId:s,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:s}),label:{text:null!==(t=null!==a&&void 0!==a?a:r)&&void 0!==t?t:s},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!l}]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:n,paths:o}=e,{animationManager:s}=this.ctx;this.updateAreaPaths(o,n),Nz(this,s,...o),uk([t],xz),bz(this,s,t),pG(this,"labels",s,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:n,contextData:o,paths:s,previousContextData:r}=e,[a,l]=s;if(null==a&&null==l)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const d=()=>{this.resetPathAnimation(e),this.updateAreaPaths(s,o)},c=()=>{t.skipCurrentBatch(),d()};if(null==o||null==r)return d(),fz(this,t,"added",i),Fz(this,"fill_path_properties",t,"add",a),Fz(this,"stroke_path_properties",t,"add",l),void pG(this,"labels",t,n);if(o.crossFiltering!==r.crossFiltering)return void c();const h=vz(o,r);void 0!==h?"no-op"!==h.status&&(fz(this,t,void 0,i),iM(this.id,"fill_path_properties",t,[a],h.fill.pathProperties),uG(this.id,"fill_path_update",t,[a],h.fill.path),iM(this.id,"stroke_path_properties",t,[l],h.stroke.pathProperties),uG(this.id,"stroke_path_update",t,[l],h.stroke.path),pG(this,"labels",t,n),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(s,o)})):c()}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new cI}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=e,n=this.getSeriesDomain("x"),o=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,l(l({},ON(e,t,i,n,o)),{},{highlighted:!0}))}computeFocusBounds(e){return Sz(this,e)}};zz.className="AreaSeries",zz.type="area";var _z={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new zz(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:wB,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:hB,color:uB}}},paletteFactory:e=>{const{marker:t}=hG(e);return{fill:t.fill,stroke:t.stroke,marker:t}}};function Vz(e,t){for(const i of t){const t=i.datum;void 0===t?cM.error("undefined datum"):e.addValue(i,t)}}function Hz(e,t){const{x:i,y:n}=t,{nearest:o,distanceSquared:s}=e.getQuadTree().find(i,n);if(void 0!==o)return{datum:o.value,distance:Math.sqrt(s)}}var Wz=class extends uF{constructor(){super(...arguments),this.direction="vertical"}};mw([hD(JD)],Wz.prototype,"direction",2);var jz=class extends gF{constructor(){super(...arguments),this.groupScale=new aD,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){var i;const n="boolean"===typeof t?1:.5,o=xS(this.smallestDataInterval)?this.smallestDataInterval*n:0,s=null!==(i=gM(e))&&void 0!==i?i:[NaN,NaN];return"boolean"===typeof t?s[t?0:1]-=(t?1:-1)*o:(s[0]-=o,s[1]+=o),ZL(s)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e){return pM.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval):e.scale.bandwidth}updateGroupScale(e){const t=[],{groupScale:i}=this,n=this.getBandwidth(e),{index:o,visibleGroupCount:s}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let r=0;r<s;r++)t.push(String(r));i.domain=t,i.range=[0,null!==n&&void 0!==n?n:0],e instanceof xO?i.paddingInner=e.groupPaddingInner:e instanceof eE?(i.paddingInner=e.groupPaddingInner,i.round=0!==i.padding):i.padding=0;return{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:o}}resolveKeyDirection(e){return"x"===this.getBarDirection()?"x"===e?"y":"x":e}initQuadTree(e){Vz(e,this.datumNodesIter())}pickNodeClosestDatum(e){return Hz(this,e)}},Uz=class extends qA{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};mw([hD(ik(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],Uz.prototype,"placement",2),mw([hD(CD)],Uz.prototype,"padding",2);var Kz=class extends Wz{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new fG,this.label=new Uz,this.tooltip=new xG,this.sparklineMode=!1,this.fastDataProcessing=!1}};function Yz(e,t){var i,n,o,s,r,a;e.crisp=null===(i=t.crisp)||void 0===i||i,e.fill=t.fill,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.fillOpacity=t.fillOpacity,e.strokeOpacity=t.strokeOpacity,e.lineDash=t.lineDash,e.lineDashOffset=t.lineDashOffset,e.fillShadow=t.fillShadow,e.topLeftCornerRadius=!1!==t.topLeftCornerRadius&&null!==(n=t.cornerRadius)&&void 0!==n?n:0,e.topRightCornerRadius=!1!==t.topRightCornerRadius&&null!==(o=t.cornerRadius)&&void 0!==o?o:0,e.bottomRightCornerRadius=!1!==t.bottomRightCornerRadius&&null!==(s=t.cornerRadius)&&void 0!==s?s:0,e.bottomLeftCornerRadius=!1!==t.bottomLeftCornerRadius&&null!==(r=t.cornerRadius)&&void 0!==r?r:0,e.visible=null===(a=t.visible)||void 0===a||a}function Zz(e,t,i){var o,s,r,a,d,c,h,u,p,g,m,v,f,y,b,C;let{datum:x,isHighlighted:w,style:S,highlightStyle:M,itemStyler:D,seriesId:k}=i,I=n(i,Zx);const{fill:A,fillOpacity:T,stroke:E,strokeWidth:R,strokeOpacity:L,lineDash:P,lineDashOffset:N,cornerRadius:F=0}=ES(w&&M,S);let O;return D&&(O=e.cachedDatumCallback(aO(t,w?"highlight":"node"),(()=>D(l({datum:x.datum,xKey:x.xKey,fill:A,fillOpacity:T,stroke:E,strokeWidth:R,strokeOpacity:L,lineDash:P,lineDashOffset:N,cornerRadius:F,highlighted:w,seriesId:k},I))))),{fill:null!==(o=null===(s=O)||void 0===s?void 0:s.fill)&&void 0!==o?o:A,fillOpacity:null!==(r=null===(a=O)||void 0===a?void 0:a.fillOpacity)&&void 0!==r?r:T,stroke:null!==(d=null===(c=O)||void 0===c?void 0:c.stroke)&&void 0!==d?d:E,strokeWidth:null!==(h=null===(u=O)||void 0===u?void 0:u.strokeWidth)&&void 0!==h?h:R,strokeOpacity:null!==(p=null===(g=O)||void 0===g?void 0:g.strokeOpacity)&&void 0!==p?p:L,lineDash:null!==(m=null===(v=O)||void 0===v?void 0:v.lineDash)&&void 0!==m?m:P,lineDashOffset:null!==(f=null===(y=O)||void 0===y?void 0:y.lineDashOffset)&&void 0!==f?f:N,cornerRadius:null!==(b=null===(C=O)||void 0===C?void 0:C.cornerRadius)&&void 0!==b?b:F,topLeftCornerRadius:S.topLeftCornerRadius,topRightCornerRadius:S.topRightCornerRadius,bottomRightCornerRadius:S.bottomRightCornerRadius,bottomLeftCornerRadius:S.bottomLeftCornerRadius,fillShadow:S.fillShadow}}function Xz(e,t,i,n){if(null!=t){const[e,i]=t;if(0!==e||1!==i)return!1}if(pM.is(e)){const t=e.calcBandwidth(n)-e.calcBandwidth(i);if(t>0&&t<1)return!1}return!0}mw([hD(bD)],Kz.prototype,"xKey",2),mw([hD(bD,{optional:!0})],Kz.prototype,"xName",2),mw([hD(bD)],Kz.prototype,"yKey",2),mw([hD(bD,{optional:!0})],Kz.prototype,"yName",2),mw([hD(bD,{optional:!0})],Kz.prototype,"yFilterKey",2),mw([hD(bD,{optional:!0})],Kz.prototype,"stackGroup",2),mw([hD(CD,{optional:!0})],Kz.prototype,"normalizedTo",2),mw([hD(ND)],Kz.prototype,"fill",2),mw([hD(MD)],Kz.prototype,"fillOpacity",2),mw([hD(ND)],Kz.prototype,"stroke",2),mw([hD(SD)],Kz.prototype,"strokeWidth",2),mw([hD(MD)],Kz.prototype,"strokeOpacity",2),mw([hD(jD)],Kz.prototype,"lineDash",2),mw([hD(SD)],Kz.prototype,"lineDashOffset",2),mw([hD(SD)],Kz.prototype,"cornerRadius",2),mw([hD(fD,{optional:!0})],Kz.prototype,"crisp",2),mw([hD(yD,{optional:!0})],Kz.prototype,"itemStyler",2),mw([hD(mD,{optional:!0})],Kz.prototype,"shadow",2),mw([hD(mD)],Kz.prototype,"label",2),mw([hD(mD)],Kz.prototype,"tooltip",2),mw([hD(fD)],Kz.prototype,"sparklineMode",2),mw([hD(fD)],Kz.prototype,"fastDataProcessing",2);var qz=e=>{var t;return Bw(null!==(t=e.yValue)&&void 0!==t?t:0)};function Qz(e,t,i){const{startingX:n,startingY:o}=function(e,t){const i=t[e?"y":"x"];let n=1/0,o=0;if(!i)return{startingX:n,startingY:o};e?o=i.scale.convert(pM.is(i.scale)?0:Math.max(...i.range)):n=i.scale.convert(pM.is(i.scale)?0:Math.min(...i.range));return{startingX:n,startingY:o}}(e,t);return{isVertical:e,calculate:(t,i)=>{let s=e?t.x:n,r=e?o:t.y,a=e?t.width:0,l=e?0:t.height;const{opacity:d}=t;let c;return i&&(isNaN(s)||isNaN(r))&&(({x:s,y:r}=i),a=e?i.width:0,l=e?0:i.height,e&&!qz(i)?r+=i.height:!e&&qz(i)&&(s+=i.width)),c=null==t.clipBBox?void 0:qz(t)?e?new Ww(s,r-l,a,l):new Ww(s-a,r,a,l):new Ww(s,r,a,l),{x:s,y:r,width:a,height:l,clipBBox:c,opacity:d}},mode:i}}function Jz(e,t){return{isVertical:e,calculate:t=>({x:e?t.x:t.x+t.width/2,y:e?t.y+t.height/2:t.y,width:e?t.width:0,height:e?0:t.height,clipBBox:t.clipBBox,opacity:t.opacity}),mode:t}}function $z(e){const t=e=>null==e||isNaN(e.x)||isNaN(e.y);return{toFn:(i,n,o)=>"removed"===o&&null==i.datum&&"fade"===e.mode?l(l({},e_(i,n)),{},{opacity:0}):"removed"===o||t(n)?e.calculate(n,i.previousDatum):{x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:n.opacity},fromFn:(i,n,o)=>{let s;"updated"===o&&t(n)?o="removed":"updated"===o&&t(i.previousDatum)&&(o="added"),s="added"===o&&null==i.previousDatum&&"fade"===e.mode?l(l({},e_(i,n)),{},{opacity:0}):"unknown"===o||"added"===o?e.calculate(n,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,clipBBox:i.clipBBox,opacity:i.opacity};const r=tM[o];return l(l({},s),{},{phase:r})}}}function e_(e,t){let{x:i,y:n,width:o,height:s,clipBBox:r,opacity:a}=t;return{x:i,y:n,width:o,height:s,clipBBox:r,opacity:a}}function t_(e){if(void 0===e)return;const{x:t,y:i,width:n,height:o}=e;return new Ww(t,i,n,o)}function i_(e,t,i){if(t.enabled&&i){const{x:n,y:o,text:s,textAlign:r,textBaseline:a}=i,{color:l,fontStyle:d,fontWeight:c,fontSize:h,fontFamily:u}=t;e.setProperties({visible:!0,x:n,y:o,text:s,fill:l,fontStyle:d,fontWeight:c,fontSize:h,fontFamily:u,textAlign:r,textBaseline:a})}else e.visible=!1}var n_={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function o_(e){let{isUpward:t,isVertical:i,placement:n,padding:o=0,rect:s}=e,r=s.x+s.width/2,a=s.y+s.height/2,l="center",d="middle";if("inside-center"!==n){const e=(t?1:-1)*(i?-1:1),{direction:c,textAlignment:h}=n_[n],u=.5*(c+1);if(i){a=(t?s.y+s.height:s.y)+s.height*e*u+o*h*e,d=h===e?"top":"bottom"}else{r=(t?s.x:s.x+s.width)+s.width*e*u+o*h*e,l=h===e?"left":"right"}}return{x:r,y:a,textAlign:l,textBaseline:d}}var s_=class extends jz{constructor(e){super({moduleCtx:e,directionKeys:dF,directionNames:cF,pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:e_,label:mG}}),this.properties=new Kz,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(e){var t,i,n,o,s,r,a,d;if(!this.properties.isValid()||!this.data)return;const{xKey:c,yKey:h,yFilterKey:u,normalizedTo:p,fastDataProcessing:g}=this.properties,{seriesGrouping:{groupIndex:m=this.id}={},data:v}=this,f=null!==(t=null===(i=this.seriesGrouping)||void 0===i?void 0:i.groupCount)&&void 0!==t?t:0,y=null!==(n=null===(o=this.seriesGrouping)||void 0===o?void 0:o.stackCount)&&void 0!==n?n:0,b=!g||null!=p||f>1||y>1,C=!this.ctx.animationManager.isSkipped(),x=null===(s=this.getCategoryAxis())||void 0===s?void 0:s.scale,w=null===(r=this.getValueAxis())||void 0===r?void 0:r.scale,{isContinuousX:S,xScaleType:M,yScaleType:D}=this.getScaleInformation({xScale:x,yScale:w}),k="bar-stack-".concat(m,"-yValues"),I="".concat(k,"-trailing"),A=this.visible?{}:{forceValue:0},T=[BF(c,M,{id:"xValue"}),GF(h,D,l({id:"yValue-raw",invalidValue:null},A))];this.crossFilteringEnabled()&&T.push(GF(u,D,l({id:"yFilterValue",invalidValue:null},A))),b&&T.push(...HF(h,"normal","current",l({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:k,separateNegative:!0},A),D),...HF(h,"trailing","current",l({id:"yValue-start",invalidValue:null,missingValue:0,groupId:I,separateNegative:!0},A),D)),S&&T.push(jF,UF),xS(p)&&T.push(ZF([k,I],Math.abs(p),"range")),C&&this.processedData&&T.push(rO(this.id,this.processedData)),!C&&b||T.push(JF());const{dataModel:E,processedData:R}=await this.requestDataModel(e,v,{props:T,groupByKeys:b,groupByData:!b});this.dataAggregationFilters=this.aggregateData(E,R),this.smallestDataInterval=null===(a=R.reduced)||void 0===a?void 0:a.smallestKeyInterval,this.largestDataInterval=null===(d=R.reduced)||void 0===d?void 0:d.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){var t,i;const{processedData:n,dataModel:o}=this;if(null==o||null==n)return[];const s=null!==(t=null===(i=n.rawDataSources)||void 0===i?void 0:i.get(this.id))&&void 0!==t?t:n.rawData;if(null==s||0===s.length)return[];const r=o.resolveProcessedDataDefById(this,"xValue"),a=o.getDomain(this,"xValue","key",n);let l="grouped"===n.type?o.getDomain(this,"yValue-end","value",n):o.getDomain(this,"yValue-raw","value",n);const d=this.crossFilteringEnabled()?o.getDomain(this,"yFilterValue","value",n):void 0;if(null!=d&&(l=[Math.min(l[0],d[0]),Math.max(l[1],d[1])]),e===this.getCategoryDirection())return"key"===(null===r||void 0===r?void 0:r.def.type)&&"category"===r.def.valueType?a:this.padBandExtent(a);if(this.getValueAxis()instanceof kO)return ZL(l);return ZL([Math.min(0,l[0]),Math.max(0,l[1])])}getSeriesRange(e,t){var i;const{dataModel:n,processedData:o}=this;if(!n||!o||"x"===this.getBarDirection())return[NaN,NaN];const s=this.axes.x.scale,r=n.resolveKeysById(this,"xValue",o),a=null!==(i=s.bandwidth)&&void 0!==i?i:0,[l,d]=BN(r.length,t,(e=>{const t=s.convert(r[e]);return[t,t+a]})),[c,h]=n.getDomainBetweenRange(this,"ungrouped"===o.type?["yValue-raw"]:["yValue-end"],[l,d],o);return[Math.min(c,0),Math.max(h,0)]}aggregateData(e,t){}visibleRange(e,t,i,n){return[0,e]}createNodeData(){var e,t;const{dataModel:i,processedData:n,groupScale:o,dataAggregationFilters:s}=this,r=this.getCategoryAxis(),a=this.getValueAxis();if(!i||!n||!r||!a||!this.properties.isValid())return;const d=null!==(e=null===(t=n.rawDataSources)||void 0===t?void 0:t.get(this.id))&&void 0!==e?e:n.rawData;if(null==d||0===d.length)return;const c=r.scale,h=a.scale,{xKey:u,yKey:p,xName:g,yName:m,fill:v,stroke:f,strokeWidth:y,cornerRadius:b,legendItemName:C,label:x}=this.properties,w=a.isReversed(),{barWidth:S,groupIndex:M}=this.updateGroupScale(r),D=o.convert(String(M)),k=pM.is(c)?-.5*S:0,I=i.resolveKeysById(this,"xValue",n),A=i.resolveColumnById(this,"yValue-raw",n),T=this.crossFilteringEnabled()?i.resolveColumnById(this,"yFilterValue",n):void 0,E=!this.ctx.animationManager.isSkipped(),R=e=>c.convert(I[e])+D+k,L=h.convert(0),P=e=>{let{datum:t,datumIndex:i,valueIndex:n,xValue:o,yValue:s,cumulativeValue:r,phantom:a,currY:d,prevY:c,x:g,width:m,isPositive:C,yRange:S,labelText:M,opacity:D,crossScale:k=1}=e;const I=C!==w,A=h.convert(d),T=h.convert(c),E=h.convert(S),R="x"===this.getBarDirection(),P=.5*m*(1-k),N={x:R?Math.min(A,T):g+P,y:R?g+P:Math.min(A,T),width:R?Math.abs(T-A):m*k,height:R?m*k:Math.abs(T-A)},F=new Ww(N.x,N.y,N.width,N.height),O={x:R?Math.min(L,E):g+P,y:R?g+P:Math.min(L,E),width:R?Math.abs(L-E):m*k,height:R?m*k:Math.abs(L-E)},B=this.shouldFlipXY()?N.height:N.width;return{series:this,itemId:a?aO(p,a):p,datum:t,datumIndex:i,valueIndex:n,cumulativeValue:r,phantom:a,xValue:o,yValue:s,yKey:p,xKey:u,capDefaults:{lengthRatioMultiplier:B,lengthMax:B},x:O.x,y:O.y,width:O.width,height:O.height,midPoint:{x:N.x+N.width/2,y:N.y+N.height/2},fill:v,stroke:f,opacity:D,strokeWidth:y,cornerRadius:b,topLeftCornerRadius:R!==I,topRightCornerRadius:I,bottomRightCornerRadius:R===I,bottomLeftCornerRadius:!I,clipBBox:F,label:null!=M?l({text:M},o_({isUpward:I,isVertical:!R,placement:x.placement,padding:x.padding,rect:N})):void 0,missing:null==s,focusable:!a}},N=[],F=[],O=[],B=(e,t,i,n,o,s,r,a)=>{const l=I[e];if(null==l)return;const c=A[e],h=null!=T?Number(T[e]):void 0,v=c>=0&&!Object.is(c,-0);if(!Number.isFinite(s))return;if(null!=h&&!Number.isFinite(h))return;const f=null!=c?this.getLabelText(this.properties.label,{datum:d[e],value:null!==h&&void 0!==h?h:c,xKey:u,yKey:p,xName:g,yName:m,legendItemName:C}):void 0,y=null!=h&&h>c,b=P({datum:d[e],datumIndex:e,valueIndex:t,xValue:l,yValue:null!==h&&void 0!==h?h:c,cumulativeValue:null!==h&&void 0!==h?h:s,phantom:!1,currY:null!=h?o+h:s,prevY:o,x:i,width:n,isPositive:v,yRange:Math.max(o+(null!==h&&void 0!==h?h:-1/0),r),labelText:f,opacity:a,crossScale:y?.6:void 0});if(F.push(b),O.push(b),null!=h){const c=P({datum:d[e],datumIndex:e,valueIndex:t,xValue:l,yValue:h,cumulativeValue:h,phantom:!0,currY:s,prevY:o,x:i,width:n,isPositive:v,yRange:r,labelText:void 0,opacity:a,crossScale:void 0});N.push(c)}},[G,z]=Pw(r.range),[_,V]=c.range,H=V-_,W=null===s||void 0===s?void 0:s.find((e=>e.maxRange>H));if("grouped"===n.type){const e=S,t=i.resolveColumnById(this,"yValue-start",n),o=i.resolveColumnById(this,"yValue-end",n),s=i.resolveProcessedDataIndexById(this,"yValue-range");n.groups.forEach((i=>{let{datumIndices:n,aggregation:r}=i;const a=r[s];n.forEach(((i,n)=>{const s=R(i),r=A[i],l=r>=0&&!Object.is(r,-0),d=Number(t[i]),c=Number(o[i]),h=a[l?1:0];B(i,n,s,e,d,c,h,1)}))}))}else if(null==W){const e=S;let[t,i]=this.visibleRange(d.length,G,z,R);n.rawData.length<1e3&&(t=0,i=n.rawData.length);for(let n=t;n<i;n+=1){const t=R(n),i=Number(A[n]);B(n,0,t,e,0,i,i,1)}}else{const{maxRange:e,indexData:t}=W,[i,n]=this.visibleRange(e,G,z,(e=>{const i=4*e,n=t[i+0],o=t[i+1];return-1!==n?R((n+o)/2|0):NaN}));for(let o=i;o<n;o+=1){const e=4*o,i=t[e+0],n=t[e+1],s=t[e+2],r=t[e+3];if(-1===i)continue;const a=R((i+n)/2|0),l=Math.abs(R(n)-R(i))+S,d=null!=I[r]?Number(A[r]):NaN,c=null!=I[s]?Number(A[s]):NaN;if(d>0){B(r,0,a,l,0,d,d,c>=0?c/d:1)}if(c<0){B(s,1,a,l,0,c,c,d<=0?d/c:1)}}}return{itemId:p,nodeData:N.length>0?[...N,...F]:F,labelData:O,scales:this.calculateScaling(),visible:this.visible||E,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new LO}getHighlightData(e,t){const i=e.find((e=>e.datum===t.datum&&!e.phantom));return null!=i?[i]:void 0}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>this.getDatumId(e)))}getItemBaseStyle(e){var t,i,n,o,s,r,a,l;const{properties:d}=this,{cornerRadius:c}=d,h=e?d.highlightStyle.item:void 0;return{fill:null!==(t=null===h||void 0===h?void 0:h.fill)&&void 0!==t?t:d.fill,fillOpacity:null!==(i=null===h||void 0===h?void 0:h.fillOpacity)&&void 0!==i?i:d.fillOpacity,stroke:null!==(n=null===h||void 0===h?void 0:h.stroke)&&void 0!==n?n:d.stroke,strokeWidth:null!==(o=null===h||void 0===h?void 0:h.strokeWidth)&&void 0!==o?o:d.strokeWidth,strokeOpacity:null!==(s=null===h||void 0===h?void 0:h.strokeOpacity)&&void 0!==s?s:d.strokeOpacity,lineDash:null!==(r=null!==(a=null===h||void 0===h?void 0:h.lineDash)&&void 0!==a?a:d.lineDash)&&void 0!==r?r:[],lineDashOffset:null!==(l=null===h||void 0===h?void 0:h.lineDashOffset)&&void 0!==l?l:d.lineDashOffset,cornerRadius:c}}getItemStyleOverrides(e,t,i,n,o,s){const{id:r,properties:a}=this,{xKey:d,yKey:c,itemStyler:h}=a;if(null==h)return;const{xDomain:u,yDomain:p}=this.cachedDatumCallback("domain",(()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})));return this.cachedDatumCallback(aO(e,s?"highlight":"node"),(()=>h(l(l({seriesId:r},ON(t,d,c,u,p)),{},{xValue:i,yValue:n,highlighted:s},o))))}updateDatumNodes(e){var t;if(!this.properties.isValid())return;const{xKey:i,yKey:n,stackGroup:o,fill:s,fillOpacity:r,stroke:a,strokeWidth:d,strokeOpacity:c,lineDash:h,lineDashOffset:u,itemStyler:p,shadow:g,highlightStyle:{item:m}}=this.properties,v=this.axes.x,f=null!==(t=this.properties.crisp)&&void 0!==t?t:Xz(null===v||void 0===v?void 0:v.scale,null===v||void 0===v?void 0:v.visibleRange,this.smallestDataInterval,this.largestDataInterval),y="x"===this.getCategoryDirection(),b={fill:s,stroke:a,lineDash:h,lineDashOffset:u,fillShadow:g,strokeWidth:this.getStrokeWidth(d),fillOpacity:0,strokeOpacity:0},C=this.getSeriesDomain("x"),x=this.getSeriesDomain("y");e.datumSelection.each(((t,s)=>{var a,d,h,u;const g=l({seriesId:this.id,isHighlighted:e.isHighlight,highlightStyle:m,style:b,itemStyler:p,stackGroup:o},ON(s,i,n,C,x));b.fillOpacity=r*(s.phantom?.2:1),b.strokeOpacity=c*(s.phantom?.2:1),b.cornerRadius=s.cornerRadius,b.topLeftCornerRadius=s.topLeftCornerRadius,b.topRightCornerRadius=s.topRightCornerRadius,b.bottomRightCornerRadius=s.bottomRightCornerRadius,b.bottomLeftCornerRadius=s.bottomLeftCornerRadius;const v=y?(null!==(a=null===(d=s.clipBBox)||void 0===d?void 0:d.width)&&void 0!==a?a:s.width)>0:(null!==(h=null===(u=s.clipBBox)||void 0===u?void 0:u.height)&&void 0!==h?h:s.height)>0,w=Zz(this,this.getDatumId(s),g);w.crisp=f,w.visible=v,Yz(t,w)}))}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,(e=>{e.pointerEvents=1}))}updateLabelNodes(e){e.labelSelection.each(((e,t)=>{i_(e,this.properties.label,t.label)}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{xKey:s,xName:r,yKey:a,yName:d,legendItemName:c,stackGroup:h,tooltip:u}=o,p=this.getCategoryAxis(),g=this.getValueAxis();if(!i||!n||0===n.rawData.length||!p||!g)return;const{datumIndex:m}=e,v=n.rawData[m],f=i.resolveKeysById(this,"xValue",n)[m],y=i.resolveColumnById(this,"yValue-raw",n)[m];if(null==f)return;const b=this.getItemBaseStyle(!1);return Object.assign(b,this.getItemStyleOverrides(String(m),v,f,y,b,!1)),u.formatTooltip({heading:p.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:d,fallbackLabel:a,value:g.formatDatum(y)}]},l(l({seriesId:t,datum:v,title:d,xKey:s,xName:r,yKey:a,yName:d,legendItemName:c,stackGroup:h},b),this.getModuleTooltipParams()))}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:o}=this.properties;return{marker:{fill:e,fillOpacity:n,stroke:t,strokeWidth:i,strokeOpacity:o}}}getLegendData(e){var t;const{showInLegend:i}=this.properties;if("category"!==e||!this.properties.isValid())return[];const{id:n,ctx:{legendManager:o},visible:s}=this,{yKey:r,yName:a,legendItemName:l}=this.properties;return[{legendType:"category",id:n,itemId:r,seriesId:n,enabled:s&&o.getItemEnabled({seriesId:n,itemId:r}),label:{text:null!==(t=null!==l&&void 0!==l?l:a)&&void 0!==t?t:r},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!i}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i,annotationSelections:n}=e;const o=$z(Qz(this.isVertical(),this.axes,"normal"));iM(this.id,"nodes",this.ctx.animationManager,[t],o),pG(this,"labels",this.ctx.animationManager,i),pG(this,"annotations",this.ctx.animationManager,...n)}animateWaitingUpdateReady(e){var t,i,n,o;const{datumSelection:s,labelSelection:r,annotationSelections:a,previousContextData:l}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let d=null===(t=this.processedData)||void 0===t||null===(t=t.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id];null==d&&null!=(null===(i=this.processedData)||void 0===i||null===(i=i.reduced)||void 0===i?void 0:i.diff)&&(d={changed:!0,added:new Set(Array.from(s,(e=>{let{datum:t}=e;return this.getDatumId(t)}))),updated:new Set,removed:new Set,moved:new Set});const c=null==l?"fade":"normal",h=$z(Qz(this.isVertical(),this.axes,c));iM(this.id,"nodes",this.ctx.animationManager,[s],h,((e,t)=>this.getDatumId(t)),d);const u=null!=l&&(!oz(e.contextData.scales.x,l.scales.x)||!oz(e.contextData.scales.y,l.scales.y)||!oz(e.contextData.groupScale,e.previousContextData.groupScale));(null!==(n=null===(o=d)||void 0===o?void 0:o.changed)&&void 0!==n&&n||u)&&(pG(this,"labels",this.ctx.animationManager,r),pG(this,"annotations",this.ctx.animationManager,...a))}getDatumId(e){return aO(e.xValue,e.valueIndex,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return t_(null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i].clipBBox)}};s_.className="BarSeries",s_.type="bar";var r_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new s_(e),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:dG([{type:"number",position:"left"},{type:"category",position:"bottom"}],(e=>"horizontal"===(null===e||void 0===e?void 0:e.direction))),themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:hB,color:gB,placement:"inside-center"},shadow:{enabled:!1,color:wB,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:cG},a_=class extends bG{constructor(){super(...arguments),this.maxSize=30}};mw([hD(SD),jw()],a_.prototype,"maxSize",2),mw([hD(BD,{optional:!0}),jw()],a_.prototype,"domain",2);var l_=class extends qA{constructor(){super(...arguments),this.placement="top"}};mw([hD(tk)],l_.prototype,"placement",2);var d_=class extends uF{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new l_,this.tooltip=new xG,this.marker=new a_}};mw([hD(bD)],d_.prototype,"xKey",2),mw([hD(bD)],d_.prototype,"yKey",2),mw([hD(bD)],d_.prototype,"sizeKey",2),mw([hD(bD,{optional:!0})],d_.prototype,"labelKey",2),mw([hD(bD,{optional:!0})],d_.prototype,"colorKey",2),mw([hD(bD,{optional:!0})],d_.prototype,"xFilterKey",2),mw([hD(bD,{optional:!0})],d_.prototype,"yFilterKey",2),mw([hD(bD,{optional:!0})],d_.prototype,"sizeFilterKey",2),mw([hD(bD,{optional:!0})],d_.prototype,"xName",2),mw([hD(bD,{optional:!0})],d_.prototype,"yName",2),mw([hD(bD,{optional:!0})],d_.prototype,"sizeName",2),mw([hD(bD,{optional:!0})],d_.prototype,"labelName",2),mw([hD(bD,{optional:!0})],d_.prototype,"colorName",2),mw([hD(BD,{optional:!0})],d_.prototype,"colorDomain",2),mw([hD(FD)],d_.prototype,"colorRange",2),mw([hD(bD,{optional:!0})],d_.prototype,"title",2),mw([PA("marker.shape")],d_.prototype,"shape",2),mw([PA("marker.size")],d_.prototype,"size",2),mw([PA("marker.maxSize")],d_.prototype,"maxSize",2),mw([PA("marker.domain",{optional:!0})],d_.prototype,"domain",2),mw([PA("marker.fill",{optional:!0})],d_.prototype,"fill",2),mw([PA("marker.fillOpacity")],d_.prototype,"fillOpacity",2),mw([PA("marker.stroke",{optional:!0})],d_.prototype,"stroke",2),mw([PA("marker.strokeWidth")],d_.prototype,"strokeWidth",2),mw([PA("marker.strokeOpacity")],d_.prototype,"strokeOpacity",2),mw([PA("marker.itemStyler",{optional:!0})],d_.prototype,"itemStyler",2),mw([hD(mD)],d_.prototype,"label",2),mw([hD(mD)],d_.prototype,"tooltip",2);var c_=class extends hF{constructor(e,t,i,n){super(e,t,i,n),this.sizeKey=n.properties.sizeKey}},h_=class extends gF{constructor(e){super({moduleCtx:e,directionKeys:dF,directionNames:cF,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:mG,marker:Cz},usesPlacedLabels:!0}),this.NodeEvent=c_,this.clipFocusBox=!1,this.properties=new d_,this.sizeScale=new SO,this.colorScale=new $I}get pickModeAxis(){return"main-category"}async processData(e){var t,i,n;if(!this.properties.isValid()||null==this.data||!this.visible)return;const o=null===(t=this.axes.x)||void 0===t?void 0:t.scale,s=null===(i=this.axes.y)||void 0===i?void 0:i.scale,{xScaleType:r,yScaleType:a}=this.getScaleInformation({xScale:o,yScale:s}),l=this.colorScale.type,d=this.sizeScale.type,{xKey:c,yKey:h,sizeKey:u,xFilterKey:p,yFilterKey:g,sizeFilterKey:m,labelKey:v,colorDomain:f,colorRange:y,colorKey:b,marker:C}=this.properties,{dataModel:x,processedData:w}=await this.requestDataModel(e,this.data,{props:[GF(c,r,{id:"xValue"}),GF(h,a,{id:"yValue"}),...null!=p?[GF(p,r,{id:"xFilterValue"})]:[],...null!=g?[GF(g,a,{id:"yFilterValue"})]:[],...null!=m?[GF(m,d,{id:"sizeFilterValue"})]:[],GF(u,d,{id:"sizeValue"}),...b?[GF(b,l,{id:"colorValue"})]:[],...v?[GF(v,"band",{id:"labelValue"})]:[]]}),S=x.resolveProcessedDataIndexById(this,"sizeValue"),M=null!==(n=w.domain.values[S])&&void 0!==n?n:[];if(this.sizeScale.domain=C.domain?C.domain:M,b){var D;const e=x.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=null!==(D=null!==f&&void 0!==f?f:w.domain.values[e])&&void 0!==D?D:[],this.colorScale.range=y,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const n="x"===e?"xValue":"yValue",o=t.resolveProcessedDataDefById(this,n),s=t.getDomain(this,n,"value",i);return"value"===(null===o||void 0===o?void 0:o.def.type)&&"category"===(null===o||void 0===o?void 0:o.def.valueType)?s:ZL(gM(s))}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){var e,t;const{axes:i,dataModel:n,processedData:o,colorScale:s,sizeScale:r,visible:a}=this,{xKey:d,yKey:c,sizeKey:h,xFilterKey:u,yFilterKey:p,sizeFilterKey:g,labelKey:m,xName:v,yName:f,sizeName:y,labelName:b,label:C,colorKey:x,marker:w}=this.properties,S=DN(w.shape),{placement:M}=C,D=i.x,k=i.y;if(!(n&&null!==o&&void 0!==o&&o.rawData.length&&a&&D&&k))return;const I=n.resolveColumnById(this,"xValue",o),A=n.resolveColumnById(this,"yValue",o),T=null!=h?n.resolveColumnById(this,"sizeValue",o):void 0,E=null!=x?n.resolveColumnById(this,"colorValue",o):void 0,R=null!=m?n.resolveColumnById(this,"labelValue",o):void 0,L=null!=u?n.resolveColumnById(this,"xFilterValue",o):void 0,P=null!=p?n.resolveColumnById(this,"yFilterValue",o):void 0,N=null!=g?n.resolveColumnById(this,"sizeFilterValue",o):void 0,F=D.scale,O=k.scale,B=(null!==(e=F.bandwidth)&&void 0!==e?e:0)/2,G=(null!==(t=O.bandwidth)&&void 0!==t?t:0)/2,z=[];r.range=[w.size,w.maxSize];const _=C.getFont(),V=aA.getMeasurer({font:_});return o.rawData.forEach(((e,t)=>{const i=I[t],n=A[t],o=null===T||void 0===T?void 0:T[t],a=F.convert(i)+B,u=O.convert(n)+G;let p;null!=L&&null!=P&&(p=L[t]===i&&P[t]===n,null!=N&&p&&(p=N[t]===o));const g=this.getLabelText(C,{value:null!=R?R[t]:n,datum:e,xKey:d,yKey:c,sizeKey:h,labelKey:m,xName:v,yName:f,sizeName:y,labelName:b}),x=V.measureText(String(g)),D=null!=o?r.convert(o):w.size,k=null!=E?s.convert(E[t]):void 0;z.push({series:this,itemId:c,yKey:c,xKey:d,datum:e,datumIndex:t,xValue:i,yValue:n,sizeValue:o,point:{x:a,y:u,size:D},midPoint:{x:a,y:u},fill:k,label:l({text:g},x),marker:S,placement:M,selected:p})})),{itemId:c,nodeData:z,labelData:z,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e,t;return this.isLabelEnabled()&&null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.labelData)&&void 0!==e?e:[]}markerFactory(){const{shape:e}=this.properties.marker;return new(DN(e))}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const n=this.properties.marker.enabled?t:[];return i.update(n,void 0,(e=>aO([e.xValue,e.yValue,e.label.text])))}getMarkerItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,{marker:a}=r,l=e?r.highlightStyle.item:void 0;return{fill:null!==(t=null===l||void 0===l?void 0:l.fill)&&void 0!==t?t:a.fill,fillOpacity:null!==(i=null===l||void 0===l?void 0:l.fillOpacity)&&void 0!==i?i:a.fillOpacity,stroke:null!==(n=null===l||void 0===l?void 0:l.stroke)&&void 0!==n?n:a.stroke,strokeWidth:null!==(o=null===l||void 0===l?void 0:l.strokeWidth)&&void 0!==o?o:a.strokeWidth,strokeOpacity:null!==(s=null===l||void 0===l?void 0:l.strokeOpacity)&&void 0!==s?s:a.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{xKey:r,yKey:a,sizeKey:d,labelKey:c,marker:h}=s,{itemStyler:u}=h;if(null!=u)return this.cachedDatumCallback(aO(e,n?"highlight":"node"),(()=>u(l({seriesId:o,datum:t,xKey:r,yKey:a,sizeKey:d,labelKey:c,highlighted:n},i))))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:o,sizeKey:s,labelKey:r,marker:a}=this.properties,{size:l,shape:d,fill:c,fillOpacity:h,stroke:u,strokeWidth:p,strokeOpacity:g}=ES(i&&this.properties.highlightStyle.item,a.getStyle()),m={size:l,shape:d,fill:c,fillOpacity:h,stroke:u,strokeWidth:p,strokeOpacity:g};this.sizeScale.range=[a.size,a.maxSize],t.each(((e,t)=>{this.updateMarkerStyle(e,a,{datum:t,highlighted:i,xKey:n,yKey:o,sizeKey:s,labelKey:r},m,{selected:t.selected})})),i||this.properties.marker.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map((e=>l(l({},e.datum),{},{point:{x:e.x,y:e.y,size:e.datum.point.size}}))),(e=>{e.pointerEvents=1})),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each(((e,i)=>{var n,o,s,r;e.text=i.label.text,e.fill=t.color,e.x=null!==(n=null===(o=i.point)||void 0===o?void 0:o.x)&&void 0!==n?n:0,e.y=null!==(s=null===(r=i.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.textAlign="left",e.textBaseline="top"}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{xKey:r,xName:a,yKey:d,yName:c,sizeKey:h,sizeName:u,labelKey:p,labelName:g,title:m,tooltip:v}=s,f=o.x,y=o.y;if(!i||!n||0===n.rawData.length||!f||!y)return;const{datumIndex:b}=e,C=n.rawData[b],x=i.resolveColumnById(this,"xValue",n)[b],w=i.resolveColumnById(this,"yValue",n)[b];if(null==x)return;const S=[{label:a,fallbackLabel:r,value:f.formatDatum(x)},{label:c,fallbackLabel:d,value:y.formatDatum(w)}];if(null!=h){const e=i.resolveColumnById(this,"sizeValue",n)[b];S.push({label:u,fallbackLabel:h,value:String(e)})}const M=this.getMarkerItemBaseStyle(!1);return Object.assign(M,this.getMarkerItemStyleOverrides(String(b),C,M,!1)),v.formatTooltip({title:m,symbol:this.legendItemSymbol(),data:S},l(l({seriesId:t,datum:C,title:d,xKey:r,xName:a,yKey:d,yName:c,sizeKey:h,sizeName:u,labelKey:p,labelName:g},M),this.getModuleTooltipParams()))}legendItemSymbol(){const{marker:e}=this.properties,{shape:t,fill:i,stroke:n,fillOpacity:o,strokeOpacity:s,strokeWidth:r}=e;return{marker:{shape:t,fill:null!==i&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==n&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==o&&void 0!==o?o:1,strokeOpacity:null!==s&&void 0!==s?s:1,strokeWidth:null!==r&&void 0!==r?r:0}}}getLegendData(){var e;if(!this.properties.isValid())return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{yKey:o,yName:s,title:r}=this.properties;return[{legendType:"category",id:t,itemId:o,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:o}),label:{text:null!==(e=null!==r&&void 0!==r?r:s)&&void 0!==e?e:o},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:i}=e;yz(this,this.ctx.animationManager,t),pG(this,"labels",this.ctx.animationManager,i)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new cI}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:n,labelKey:o}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,sizeKey:n,labelKey:o,highlighted:!1})}computeFocusBounds(e){return Sz(this,e)}};h_.className="BubbleSeries",h_.type="bubble";var u_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new h_(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:hB,color:uB}}},paletteFactory:cG},p_=class extends uF{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new fG,this.label=new qA,this.tooltip=new xG}};mw([hD(bD)],p_.prototype,"xKey",2),mw([hD(bD,{optional:!0})],p_.prototype,"yKey",2),mw([hD(bD,{optional:!0})],p_.prototype,"xName",2),mw([hD(bD,{optional:!0})],p_.prototype,"yName",2),mw([hD(ND,{optional:!0})],p_.prototype,"fill",2),mw([hD(MD)],p_.prototype,"fillOpacity",2),mw([hD(ND,{optional:!0})],p_.prototype,"stroke",2),mw([hD(SD)],p_.prototype,"strokeWidth",2),mw([hD(MD)],p_.prototype,"strokeOpacity",2),mw([hD(jD)],p_.prototype,"lineDash",2),mw([hD(SD)],p_.prototype,"lineDashOffset",2),mw([hD(SD)],p_.prototype,"cornerRadius",2),mw([hD(fD)],p_.prototype,"areaPlot",2),mw([hD(kD,{optional:!0})],p_.prototype,"bins",2),mw([hD(ik(["count","sum","mean"],"a histogram aggregation"))],p_.prototype,"aggregation",2),mw([hD(SD,{optional:!0})],p_.prototype,"binCount",2),mw([hD(mD)],p_.prototype,"shadow",2),mw([hD(mD)],p_.prototype,"label",2),mw([hD(mD)],p_.prototype,"tooltip",2);var g_=class extends gF{constructor(e){super({moduleCtx:e,directionKeys:dF,directionNames:cF,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:e_,label:mG}}),this.properties=new p_,this.calculatedBins=[]}deriveBins(e){const t=Ek(e[0],e[1],10),i=Lk(e[0],e[1],10),[n]=t;return[[n-i,n],...t.map((e=>[e,e+i]))]}calculateNiceBins(e,t){const i=Math.floor(e[0]),n=e[1],o=t||1,{start:s,binSize:r}=this.calculateNiceStart(i,n,o);return this.getBins(s,n,r,o)}getBins(e,t,i,n){const o=[],s=this.calculatePrecision(i);for(let r=0;r<n;r++){const a=Math.round((e+r*i)*s)/s;let l=Math.round((e+(r+1)*i)*s)/s;r===n-1&&(l=Math.max(l,t)),o[r]=[a,l]}return o}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const n=Math.abs(t-e)/i,o=Math.floor(Math.log10(n)),s=Math.pow(10,o);return{start:Math.floor(e/s)*s,binSize:n}}async processData(e){var t,i;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:n,yKey:o,areaPlot:s,aggregation:r}=this.properties,a=null===(t=this.axes.x)||void 0===t?void 0:t.scale,l=null===(i=this.axes.y)||void 0===i?void 0:i.scale,{xScaleType:d,yScaleType:c}=this.getScaleInformation({yScale:l,xScale:a}),h=[BF(n,d),KF];if(o){let e=AF("groupAgg");"count"===r||("sum"===r?e=IF("groupAgg"):"mean"===r&&(e=TF("groupAgg"))),s&&(e=EF("groupAgg",e)),h.push(GF(o,c,{invalidValue:void 0}),e)}else{let e=AF("groupAgg");s&&(e=EF("groupAgg",e)),h.push(e)}!this.ctx.animationManager.isSkipped()&&this.processedData&&h.push(rO(this.id,this.processedData,!1)),await this.requestDataModel(e,this.data,{props:h,groupByFn:e=>{var t;const i=ZL(e.domain.keys[0]);if(0===i.length)return e.domain.groups=[],()=>[];const n=CS(this.properties.binCount)?this.calculateNiceBins(i,this.properties.binCount):null!==(t=this.properties.bins)&&void 0!==t?t:this.deriveBins(i),o=n.length;return this.calculatedBins=[...n],e=>{const t=e.keys[0];for(let i=0;i<o;i++){const e=n[i];if(t>=e[0]&&t<e[1])return e;if(i===o-1&&t<=e[1])return e}return[]}}}),this.animationState.transition("updateData")}getSeriesDomain(e){var t,i,n,o;const{processedData:s,dataModel:r}=this;if(!s||!r||!this.calculatedBins.length)return[];const a=r.getDomain(this,"groupAgg","aggregate",s),l=null===(t=this.calculatedBins)||void 0===t?void 0:t[0][0],d=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(n=null===(o=this.calculatedBins)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-1][1];return ZL("x"===e?[l,d]:a)}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){var e,t;const{id:i,axes:n,processedData:o}=this,s=n.x,r=n.y;if(!s||!r)return;const{scale:a}=s,{scale:l}=r,{xKey:d,yKey:c,xName:h,yName:u,fill:p,stroke:g,strokeWidth:m,cornerRadius:v}=this.properties,f=null!==(e=this.properties.label.formatter)&&void 0!==e?e:e=>String(e.value),y=[],b={itemId:null!==(t=this.properties.yKey)&&void 0!==t?t:this.id,nodeData:y,labelData:y,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};if(!this.visible||null==o||0===o.rawData.length||"grouped"!==o.type)return b;const{rawData:C}=o;return o.groups.forEach(((e,t)=>{let{keys:n,datumIndices:o,aggregation:s}=e;const[[b,x]=[0,0]]=s,w=o.length,S=n,[M,D]=S,k=o.map((e=>C[e])),I=a.convert(M),A=a.convert(D),T=b+x,E=l.convert(0),R=l.convert(T),L=Math.abs(A-I),P=Math.abs(R-E),N=Math.min(I,A),F=Math.min(E,R);let O;var B;0!==T&&(O={x:N+L/2,y:F+P/2,text:null!==(B=this.cachedDatumCallback(aO(t,"label"),(()=>f({value:T,datum:k,seriesId:i,xKey:d,yKey:c,xName:h,yName:u}))))&&void 0!==B?B:String(T)});const G={x:N+L/2,y:F+P/2},z=r.isReversed();y.push({series:this,datumIndex:t,datum:k,aggregatedValue:T,frequency:w,domain:S,yKey:c,xKey:d,x:N,y:F,xValue:I,yValue:R,width:L,height:P,midPoint:G,fill:p,stroke:g,cornerRadius:v,topLeftCornerRadius:!z,topRightCornerRadius:!z,bottomRightCornerRadius:z,bottomLeftCornerRadius:z,opacity:1,strokeWidth:m,label:O})})),y.sort(((e,t)=>e.x-t.x)),b}nodeFactory(){return new LO}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,(e=>{e.crisp=!0}),(e=>e.domain.join("_")))}getItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,a=e?r.highlightStyle.item:void 0;return{fill:null!==(t=null===a||void 0===a?void 0:a.fill)&&void 0!==t?t:r.fill,fillOpacity:null!==(i=null===a||void 0===a?void 0:a.fillOpacity)&&void 0!==i?i:r.fillOpacity,stroke:null!==(n=null===a||void 0===a?void 0:a.stroke)&&void 0!==n?n:r.stroke,strokeWidth:null!==(o=null===a||void 0===a?void 0:a.strokeWidth)&&void 0!==o?o:r.strokeWidth,strokeOpacity:null!==(s=null===a||void 0===a?void 0:a.strokeOpacity)&&void 0!==s?s:r.strokeOpacity}}updateDatumNodes(e){const{isHighlight:t}=e,{fillOpacity:i,strokeOpacity:n,lineDash:o,lineDashOffset:s,shadow:r,highlightStyle:{item:{fill:a,fillOpacity:l=i,stroke:d,strokeWidth:c}}}=this.properties;e.datumSelection.each(((e,h,u)=>{var p,g;const{cornerRadius:m,topLeftCornerRadius:v,topRightCornerRadius:f,bottomRightCornerRadius:y,bottomLeftCornerRadius:b}=h,C=t&&void 0!==c?c:h.strokeWidth,x=t?l:i;e.fill=null!==(p=t?a:void 0)&&void 0!==p?p:h.fill,e.stroke=null!==(g=t?d:void 0)&&void 0!==g?g:h.stroke,e.fillOpacity=x,e.strokeOpacity=n,e.strokeWidth=C,e.lineDash=o,e.lineDashOffset=s,e.topLeftCornerRadius=v?m:0,e.topRightCornerRadius=f?m:0,e.bottomRightCornerRadius=y?m:0,e.bottomLeftCornerRadius=b?m:0,e.fillShadow=r,e.zIndex=t?GP.highlightedZIndex:u,e.visible=h.height>0}))}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,(e=>{e.pointerEvents=1,e.textAlign="center",e.textBaseline="middle"}))}updateLabelNodes(e){const{fontStyle:t,fontWeight:i,fontFamily:n,fontSize:o,color:s}=this.properties.label,r=this.isLabelEnabled();e.labelSelection.each(((e,a)=>{r&&null!==a&&void 0!==a&&a.label?(e.text=a.label.text,e.x=a.label.x,e.y=a.label.y,e.fontStyle=t,e.fontWeight=i,e.fontFamily=n,e.fontSize=o,e.fill=s,e.visible=!0):e.visible=!1}))}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t&&Vz(e,t.children())}pickNodeClosestDatum(e){return Hz(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s,ctx:{localeManager:r}}=this,{xKey:a,xName:d,yKey:c,yName:h,tooltip:u}=s,p=o.x,g=o.y;if(!i||"grouped"!==(null===n||void 0===n?void 0:n.type)||0===n.rawData.length||!p||!g)return;const m=e.datumIndex,{aggregation:v,datumIndices:f,keys:y}=n.groups[m],[[b,C]=[0,0]]=v,x=f.length,w=y,[S,M]=w,D=b+C,k={data:f.map((e=>n.rawData[e])),aggregatedValue:D,frequency:x,domain:w},I=[{label:d,fallbackLabel:a,value:"".concat(p.formatDatum(S)," - ").concat(p.formatDatum(M))},{label:r.t("seriesHistogramTooltipFrequency"),value:g.formatDatum(x)}];if(null!=c){let e;switch(s.aggregation){case"sum":e=r.t("seriesHistogramTooltipSum",{yName:h});break;case"mean":e=r.t("seriesHistogramTooltipMean",{yName:h});break;case"count":e=r.t("seriesHistogramTooltipCount",{yName:h})}I.push({label:e,value:g.formatDatum(D)})}return u.formatTooltip({symbol:this.legendItemSymbol(),data:I},l({seriesId:t,datum:k,title:h,xKey:a,xName:d,yKey:c,yName:h,xRange:[S,M],frequency:x},this.getItemBaseStyle(!1)))}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o}=this.properties;return{marker:{fill:null!==e&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==i&&void 0!==i?i:"rgba(0, 0, 0, 0)",fillOpacity:t,strokeOpacity:o,strokeWidth:n}}}getLegendData(e){var t;if("category"!==e)return[];const{id:i,ctx:{legendManager:n},visible:o}=this,{xKey:s,yName:r,showInLegend:a}=this.properties;return[{legendType:"category",id:i,itemId:s,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:s}),label:{text:null!==(t=null!==r&&void 0!==r?r:s)&&void 0!==t?t:"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!a}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;const n=$z(Qz(!0,this.axes,"normal"));iM(this.id,"datums",this.ctx.animationManager,[t],n),pG(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t;const i=null===(t=this.processedData)||void 0===t||null===(t=t.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id],n=$z(Qz(!0,this.axes,"normal"));iM(this.id,"datums",this.ctx.animationManager,[e.datumSelection],n,((e,t)=>aO(t.domain)),i),pG(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return t_(null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}};g_.className="HistogramSeries",g_.type="histogram";var m_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new g_(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:hB,color:gB},shadow:{enabled:!1,color:wB,xOffset:3,yOffset:3,blur:5}}},paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[n]}=t(1);return{fill:i,stroke:n}}},v_=class extends uF{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new MG,this.marker=new bG,this.label=new qA,this.tooltip=new xG,this.connectMissingData=!1,this.sparklineMode=!1}};mw([hD(bD)],v_.prototype,"xKey",2),mw([hD(bD)],v_.prototype,"yKey",2),mw([hD(bD,{optional:!0})],v_.prototype,"xName",2),mw([hD(bD,{optional:!0})],v_.prototype,"yName",2),mw([hD(bD,{optional:!0})],v_.prototype,"yFilterKey",2),mw([hD(bD,{optional:!0})],v_.prototype,"stackGroup",2),mw([hD(SD,{optional:!0})],v_.prototype,"normalizedTo",2),mw([hD(bD,{optional:!0})],v_.prototype,"title",2),mw([hD(ND)],v_.prototype,"stroke",2),mw([hD(SD)],v_.prototype,"strokeWidth",2),mw([hD(MD)],v_.prototype,"strokeOpacity",2),mw([hD(jD)],v_.prototype,"lineDash",2),mw([hD(SD)],v_.prototype,"lineDashOffset",2),mw([hD(mD)],v_.prototype,"interpolation",2),mw([hD(mD)],v_.prototype,"marker",2),mw([hD(mD)],v_.prototype,"label",2),mw([hD(mD)],v_.prototype,"tooltip",2),mw([hD(fD)],v_.prototype,"connectMissingData",2),mw([hD(fD)],v_.prototype,"sparklineMode",2);var f_=class extends gF{constructor(e){super({moduleCtx:e,directionKeys:dF,directionNames:cF,hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:Bz({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:mG,marker:(e,t)=>l(l({},{opacity:1,scalingX:1,scalingY:1}),xz(0,t))}}),this.clipFocusBox=!1,this.properties=new v_,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(e){var t,i;if(null==this.data||!this.properties.isValid())return;const{data:n,visible:o,seriesGrouping:{groupIndex:s=this.id,stackCount:r=1}={}}=this,{xKey:a,yKey:d,yFilterKey:c,connectMissingData:h,normalizedTo:u}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=null===(t=this.axes.x)||void 0===t?void 0:t.scale,m=null===(i=this.axes.y)||void 0===i?void 0:i.scale,{isContinuousX:v,xScaleType:f,yScaleType:y}=this.getScaleInformation({xScale:g,yScale:m}),b={invalidValue:null};h&&r>1&&(b.invalidValue=0,o||(b.forceValue=0));const C=[];if(v||C.push(BF(a,f,{id:"xKey"})),C.push(GF(a,f,{id:"xValue"}),GF(d,y,l(l({id:"yValueRaw"},b),{},{invalidValue:void 0}))),null!=c&&C.push(GF(c,y,{id:"yFilterRaw"})),r>1){const e=["line-stack-".concat(s,"-yValues"),"line-stack-".concat(s,"-yValues-trailing"),"line-stack-".concat(s,"-yValues-marker")];C.push(...HF(d,"window","current",l(l({id:"yValueEnd"},b),{},{groupId:e[0]}),y),...HF(d,"window-trailing","current",l(l({id:"yValueStart"},b),{},{groupId:e[1]}),y),...HF(d,"normal","current",l(l({id:"yValueCumulative"},b),{},{groupId:e[2]}),y)),dS(u)&&C.push(ZF([e[0],e[1],e[2]],u,"range"))}p&&(C.push(JF(v?["xValue"]:void 0)),this.processedData&&C.push(rO(this.id,this.processedData)));const{dataModel:x,processedData:w}=await this.requestDataModel(e,n,{props:C});this.dataAggregationFilters=this.aggregateData(x,w),this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!t||null===i||void 0===i||!i.rawData.length)return[];const n=t.resolveProcessedDataDefById(this,"xValue");if("x"===e){const e=t.getDomain(this,"xValue","value",i);return"value"===(null===n||void 0===n?void 0:n.def.type)&&"category"===n.def.valueType?e:ZL(gM(e))}var o,s;return ZL((null!==(o=null===(s=this.seriesGrouping)||void 0===s?void 0:s.stackCount)&&void 0!==o?o:1)>1?t.getDomain(this,"yValueEnd","value",i):t.getDomain(this,"yValueRaw","value",i))}visibleRangeIndices(e,t){var i;const{dataModel:n,processedData:o}=this;if(!n||!o)return[0,0];const s=this.axes.x.scale,r=n.resolveColumnById(this,"xValue",o);return BN(null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:r.length,e,(e=>{var i;const n=s.convert(r[null!==(i=null===t||void 0===t?void 0:t[e])&&void 0!==i?i:e]);return[n,n]}))}getSeriesRange(e,t){const{dataModel:i,processedData:n}=this;if(!i||!n)return[NaN,NaN];const[o,s]=this.visibleRangeIndices(t);return i.getDomainBetweenRange(this,["yValueRaw"],[o,s],n)}aggregateData(e,t){}createNodeData(){var e,t,i,n,o,s,r;const{dataModel:a,processedData:l,axes:d,dataAggregationFilters:c}=this,h=d.x,u=d.y;if(!a||!l||0===l.rawData.length||!h||!u)return;const{xKey:p,yKey:g,yFilterKey:m,xName:v,yName:f,marker:y,label:b,connectMissingData:C,interpolation:x,legendItemName:w}=this.properties,S=(null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.stackCount)&&void 0!==e?e:1)>1,M=h.scale,D=u.scale,k=(null!==(i=M.bandwidth)&&void 0!==i?i:0)/2,I=(null!==(n=D.bandwidth)&&void 0!==n?n:0)/2,A=y.enabled?y.size:0,{rawData:T}=l,E=a.resolveColumnById(this,"xValue",l),R=a.resolveColumnById(this,"yValueRaw",l),L=S?a.resolveColumnById(this,"yValueEnd",l):void 0,P=S?a.resolveColumnById(this,"yValueCumulative",l):R,N=null!=m?a.resolveColumnById(this,"yFilterRaw",l):void 0,F={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},O=[];let B;const G=e=>{const t=T[e],i=E[e],n=R[e],o=null===L||void 0===L?void 0:L[e],s=null===N||void 0===N?void 0:N[e],r=(a=e,M.convert(E[a])+k);var a;const l=(e=>D.convert(P[e])+I)(e);if(!Number.isFinite(r))return;if(null!=n){const a=b.enabled?this.getLabelText(b,{value:n,datum:t,xKey:p,yKey:g,xName:v,yName:f,legendItemName:w}):void 0;O.push({series:this,datum:t,datumIndex:e,yKey:g,xKey:p,point:{x:r,y:l,size:A},midPoint:{x:r,y:l},cumulativeValue:o,yValue:n,xValue:i,capDefaults:F,labelText:a,selected:s})}if(null==B)return;const d=B[B.length-1];if(null!=n){const e={point:{x:r,y:l},xDatum:i,yDatum:n};Array.isArray(d)?d.push(e):null!=d?(d.skip+=1,B.push([e])):B.push([e])}else C||(Array.isArray(d)||null==d?B.push({skip:0}):d.skip+=1)},[z,_]=M.range,V=_-z,H=null===c||void 0===c?void 0:c.find((e=>e.maxRange>V)),W=null===H||void 0===H?void 0:H.indices;let[j,U]=this.visibleRangeIndices(h.range,W);j=Math.max(j-1,0),U=Math.min(U+1,null!==(o=null===W||void 0===W?void 0:W.length)&&void 0!==o?o:E.length),l.rawData.length<1e3&&(j=0,U=l.rawData.length),null==W&&(B=[]);for(let q=j;q<U;q+=1){var K;G(null!==(K=null===W||void 0===W?void 0:W[q])&&void 0!==K?K:q)}const Y=null===(s=B)||void 0===s?void 0:s.flatMap((e=>Array.isArray(e)?rz(e,x):[])),Z=null!=Y?{itemId:g,spans:Y}:void 0,X=null!==(r=null===N||void 0===N?void 0:N.some(((e,t)=>e===R[t])))&&void 0!==r&&r;return{itemId:g,nodeData:O,labelData:O,strokeData:Z,scales:this.calculateScaling(),visible:this.visible,crossFiltering:X}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(DN(e))}updatePathNodes(e){var t;const{paths:[i],opacity:n,visible:o,animationEnabled:s}=e,r=!0===(null===(t=this.contextNodeData)||void 0===t?void 0:t.crossFiltering);i.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:n,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(r?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(i.visible=o),Gz(this,i)}updateMarkerSelection(e){var t;let{nodeData:i}=e;const{markerSelection:n}=e;return i=this.properties.marker.enabled||!0===(null===(t=this.contextNodeData)||void 0===t?void 0:t.crossFiltering)?i:[],this.properties.marker.isDirty()&&(n.clear(),n.cleanup()),n.update(i,void 0,(e=>aO(e.xValue)))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:o,stroke:s,strokeWidth:r,strokeOpacity:a,marker:d,highlightStyle:c}=this.properties,h=this.getSeriesDomain("x"),u=this.getSeriesDomain("y"),p=ES(i&&c.item,d.getStyle(),{stroke:s,strokeWidth:r,strokeOpacity:a}),g=this.ctx.animationManager.isSkipped();t.each(((e,t)=>{this.updateMarkerStyle(e,d,l(l({},ON(t,n,o,h,u)),{},{highlighted:i}),p,{applyTranslation:g,selected:t.selected})})),i||d.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{enabled:t,fontStyle:i,fontWeight:n,fontSize:o,fontFamily:s,color:r}=this.properties.label;e.labelSelection.each(((e,a)=>{t&&null!==a&&void 0!==a&&a.labelText?(e.fontStyle=i,e.fontWeight=n,e.fontSize=o,e.fontFamily=s,e.textAlign="center",e.textBaseline="bottom",e.text=a.labelText,e.x=a.point.x,e.y=a.point.y-10,e.fill=r,e.visible=!0):e.visible=!1}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{xKey:r,xName:a,yKey:d,yName:c,tooltip:h}=s,u=o.x,p=o.y;if(!i||!n||0===n.rawData.length||!u||!p)return;const{datumIndex:g}=e,m=n.rawData[g],v=i.resolveColumnById(this,"xValue",n)[g],f=i.resolveColumnById(this,"yValueRaw",n)[g];return null!=v?h.formatTooltip({heading:u.formatDatum(v),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:d,value:p.formatDatum(f)}]},l({seriesId:t,datum:m,title:c,xKey:r,xName:a,yKey:d,yName:c},this.getModuleTooltipParams())):void 0}legendItemSymbol(){var e,t,i,n,o,s,r;const a="rgba(0, 0, 0, 0)",{stroke:l,strokeOpacity:d,strokeWidth:c,lineDash:h,marker:u}=this.properties;return{marker:{shape:u.shape,fill:null!==(e=u.fill)&&void 0!==e?e:a,stroke:null!==(t=null!==(i=u.stroke)&&void 0!==i?i:l)&&void 0!==t?t:a,fillOpacity:null!==(n=u.fillOpacity)&&void 0!==n?n:1,strokeOpacity:null!==(o=null!==(s=u.strokeOpacity)&&void 0!==s?s:d)&&void 0!==o?o:1,strokeWidth:null!==(r=u.strokeWidth)&&void 0!==r?r:0,enabled:u.enabled},line:{stroke:null!==l&&void 0!==l?l:a,strokeOpacity:d,strokeWidth:c,lineDash:h}}}getLegendData(e){var t,i;if(!this.properties.isValid()||"category"!==e)return[];const{id:n,ctx:{legendManager:o},visible:s}=this,{yKey:r,yName:a,title:l,legendItemName:d,showInLegend:c}=this.properties;return[{legendType:"category",id:n,itemId:r,legendItemName:d,seriesId:n,enabled:s&&o.getItemEnabled({seriesId:n,itemId:r}),label:{text:null!==(t=null!==(i=null!==d&&void 0!==d?d:l)&&void 0!==i?i:a)&&void 0!==t?t:r},symbol:this.legendItemSymbol(),hideInLegend:!c}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}plotNodeDataPoints(e,t){if(0===t.length)return;const i=t[0].point;e.moveTo(i.x,i.y);for(let n=1;n<t.length;n+=1){const{x:i,y:o}=t[n].point;e.lineTo(i,o)}}updateLinePaths(e,t){var i;const n=null===(i=t.strokeData)||void 0===i?void 0:i.spans,[o]=e;o.path.clear(),null!=n?lz(o,n):this.plotNodeDataPoints(o.path,t.nodeData),o.markDirty()}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:n,contextData:o,paths:s}=e,{animationManager:r}=this.ctx;this.updateLinePaths(s,o),Nz(this,r,...s),uk([t],xz),bz(this,r,t),pG(this,"labels",r,i),pG(this,"annotations",r,...n)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t;const{animationManager:i}=this.ctx,{markerSelection:n,labelSelection:o,annotationSelections:s,contextData:r,paths:a,previousContextData:l}=e,[d]=a;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateLinePaths(a,r)},h=()=>{i.skipCurrentBatch(),c()};if(null==r||null==l)return c(),fz(this,i,"added",n),Fz(this,"path_properties",i,"add",d),pG(this,"labels",i,o),void pG(this,"annotations",i,...s);if(r.crossFiltering!==l.crossFiltering)return void h();const u=uz(r,l,null===(t=this.processedData)||void 0===t||null===(t=t.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id]);void 0!==u?"no-op"!==u.status&&(iM(this.id,"path_properties",i,[d],u.stroke.pathProperties),"added"===u.status?this.updateLinePaths(a,r):"removed"===u.status?this.updateLinePaths(a,l):uG(this.id,"path_update",i,[d],u.stroke.path),u.hasMotion&&(fz(this,i,void 0,n),pG(this,"labels",i,o),pG(this,"annotations",i,...s))):h()}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new cI}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=this.properties,n=this.getSeriesDomain("x"),o=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,l(l({},ON(e,t,i,n,o)),{},{highlighted:!0}))}computeFocusBounds(e){return Sz(this,e)}};f_.className="LineSeries",f_.type="line";var y_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new f_(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:hB,color:uB},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:e=>{const{marker:t}=hG(e);return{stroke:t.fill,marker:t}}},b_=class extends qA{constructor(){super(...arguments),this.placement="top"}};mw([hD(tk)],b_.prototype,"placement",2);var C_=class extends uF{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new b_,this.tooltip=new xG,this.marker=new bG}};mw([hD(bD)],C_.prototype,"xKey",2),mw([hD(bD)],C_.prototype,"yKey",2),mw([hD(bD,{optional:!0})],C_.prototype,"labelKey",2),mw([hD(bD,{optional:!0})],C_.prototype,"colorKey",2),mw([hD(bD,{optional:!0})],C_.prototype,"xFilterKey",2),mw([hD(bD,{optional:!0})],C_.prototype,"yFilterKey",2),mw([hD(bD,{optional:!0})],C_.prototype,"xName",2),mw([hD(bD,{optional:!0})],C_.prototype,"yName",2),mw([hD(bD,{optional:!0})],C_.prototype,"labelName",2),mw([hD(bD,{optional:!0})],C_.prototype,"colorName",2),mw([hD(BD,{optional:!0})],C_.prototype,"colorDomain",2),mw([hD(FD)],C_.prototype,"colorRange",2),mw([hD(bD,{optional:!0})],C_.prototype,"title",2),mw([PA("marker.shape")],C_.prototype,"shape",2),mw([PA("marker.size")],C_.prototype,"size",2),mw([PA("marker.fill")],C_.prototype,"fill",2),mw([PA("marker.fillOpacity")],C_.prototype,"fillOpacity",2),mw([PA("marker.stroke")],C_.prototype,"stroke",2),mw([PA("marker.strokeWidth")],C_.prototype,"strokeWidth",2),mw([PA("marker.strokeOpacity")],C_.prototype,"strokeOpacity",2),mw([PA("marker.itemStyler",{optional:!0})],C_.prototype,"itemStyler",2),mw([hD(mD)],C_.prototype,"label",2),mw([hD(mD)],C_.prototype,"tooltip",2);var x_=class extends gF{constructor(e){super({moduleCtx:e,directionKeys:dF,directionNames:cF,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Cz,label:mG},usesPlacedLabels:!0}),this.clipFocusBox=!1,this.properties=new C_,this.colorScale=new $I}get pickModeAxis(){return"main-category"}async processData(e){var t,i;if(!this.properties.isValid()||null==this.data||!this.visible)return;const n=null===(t=this.axes.x)||void 0===t?void 0:t.scale,o=null===(i=this.axes.y)||void 0===i?void 0:i.scale,{xScaleType:s,yScaleType:r}=this.getScaleInformation({xScale:n,yScale:o}),a=this.colorScale.type,{xKey:l,yKey:d,xFilterKey:c,yFilterKey:h,labelKey:u,colorKey:p,colorDomain:g,colorRange:m}=this.properties,{dataModel:v,processedData:f}=await this.requestDataModel(e,this.data,{props:[GF(l,s,{id:"xValue"}),GF(d,r,{id:"yValue"}),...null!=c?[GF(c,s,{id:"xFilterValue"})]:[],...null!=h?[GF(h,r,{id:"yFilterValue"})]:[],...p?[GF(p,a,{id:"colorValue"})]:[],...u?[GF(u,"band",{id:"labelValue"})]:[]]});if(p){var y;const e=v.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=null!==(y=null!==g&&void 0!==g?g:f.domain.values[e])&&void 0!==y?y:[],this.colorScale.range=m,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const n="x"===e?"xValue":"yValue",o=t.resolveProcessedDataDefById(this,n),s=t.getDomain(this,n,"value",i);return"value"===(null===o||void 0===o?void 0:o.def.type)&&"category"===(null===o||void 0===o?void 0:o.def.valueType)?s:ZL(gM(s))}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){var e,t;const{axes:i,dataModel:n,processedData:o,colorScale:s,visible:r}=this,{xKey:a,yKey:d,xFilterKey:c,yFilterKey:h,labelKey:u,colorKey:p,xName:g,yName:m,labelName:v,marker:f,label:y}=this.properties,{placement:b}=y,C=DN(f.shape),x=i.x,w=i.y;if(!(n&&null!==o&&void 0!==o&&o.rawData.length&&r&&x&&w))return;const S=n.resolveColumnById(this,"xValue",o),M=n.resolveColumnById(this,"yValue",o),D=null!=p?n.resolveColumnById(this,"colorValue",o):void 0,k=null!=u?n.resolveColumnById(this,"labelValue",o):void 0,I=null!=c?n.resolveColumnById(this,"xFilterValue",o):void 0,A=null!=h?n.resolveColumnById(this,"yFilterValue",o):void 0,T=x.scale,E=w.scale,R=(null!==(e=T.bandwidth)&&void 0!==e?e:0)/2,L=(null!==(t=E.bandwidth)&&void 0!==t?t:0)/2,P=[],N=y.getFont(),F=aA.getMeasurer({font:N});return o.rawData.forEach(((e,t)=>{const i=S[t],n=M[t],o=T.convert(i)+R,r=E.convert(n)+L,c=null!=I&&null!=A?I[t]===i&&A[t]===n:void 0,h=this.getLabelText(y,{value:null!=k?null===k||void 0===k?void 0:k[t]:n,datum:e,xKey:a,yKey:d,labelKey:u,xName:g,yName:m,labelName:v}),p=F.measureText(h),x=null!=D?s.convert(D[t]):void 0;P.push({series:this,itemId:d,yKey:d,xKey:a,datum:e,datumIndex:t,xValue:i,yValue:n,capDefaults:{lengthRatioMultiplier:f.getDiameter(),lengthMax:1/0},point:{x:o,y:r,size:f.size},midPoint:{x:o,y:r},fill:x,label:l({text:h},p),marker:C,placement:b,selected:c})})),{itemId:d,nodeData:P,labelData:P,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e,t;return this.isLabelEnabled()&&null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.labelData)&&void 0!==e?e:[]}markerFactory(){const{shape:e}=this.properties.marker;return new(DN(e))}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}getMarkerItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,{marker:a}=r,l=e?r.highlightStyle.item:void 0;return{fill:null!==(t=null===l||void 0===l?void 0:l.fill)&&void 0!==t?t:a.fill,fillOpacity:null!==(i=null===l||void 0===l?void 0:l.fillOpacity)&&void 0!==i?i:a.fillOpacity,stroke:null!==(n=null===l||void 0===l?void 0:l.stroke)&&void 0!==n?n:a.stroke,strokeWidth:null!==(o=null===l||void 0===l?void 0:l.strokeWidth)&&void 0!==o?o:a.strokeWidth,strokeOpacity:null!==(s=null===l||void 0===l?void 0:l.strokeOpacity)&&void 0!==s?s:a.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{xKey:r,yKey:a,labelKey:d,marker:c}=s,{itemStyler:h}=c;if(null!=h)return this.cachedDatumCallback(aO(e,n?"highlight":"node"),(()=>h(l({seriesId:o,datum:t,xKey:r,yKey:a,labelKey:d,highlighted:n},i))))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:o,labelKey:s,marker:r,highlightStyle:a}=this.properties,l=ES(i&&a.item,r.getStyle());t.each(((e,t)=>{this.updateMarkerStyle(e,r,{datum:t,highlighted:i,xKey:n,yKey:o,labelKey:s},l,{selected:t.selected})})),i||r.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map((e=>l(l({},e.datum),{},{point:{x:e.x,y:e.y,size:e.datum.point.size}}))),(e=>{e.pointerEvents=1})),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each(((e,i)=>{var n,o,s,r;e.text=i.label.text,e.fill=t.color,e.x=null!==(n=null===(o=i.point)||void 0===o?void 0:o.x)&&void 0!==n?n:0,e.y=null!==(s=null===(r=i.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.textAlign="left",e.textBaseline="top"}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{xKey:r,xName:a,yKey:d,yName:c,labelKey:h,labelName:u,title:p,tooltip:g}=s,m=o.x,v=o.y;if(!i||!n||0===n.rawData.length||!m||!v)return;const{datumIndex:f}=e,y=n.rawData[f],b=i.resolveColumnById(this,"xValue",n)[f],C=i.resolveColumnById(this,"yValue",n)[f];if(null==b)return;const x=this.getMarkerItemBaseStyle(!1);return Object.assign(x,this.getMarkerItemStyleOverrides(String(f),y,x,!1)),g.formatTooltip({symbol:this.legendItemSymbol(),title:p,data:[{label:a,fallbackLabel:r,value:m.formatDatum(b)},{label:c,fallbackLabel:d,value:v.formatDatum(C)}]},l(l({seriesId:t,datum:y,title:c,xKey:r,xName:a,yKey:d,yName:c,labelKey:h,labelName:u},x),this.getModuleTooltipParams()))}legendItemSymbol(){const{shape:e,fill:t,stroke:i,fillOpacity:n,strokeOpacity:o,strokeWidth:s}=this.properties.marker;return{marker:{shape:e,fill:null!==t&&void 0!==t?t:"rgba(0, 0, 0, 0)",stroke:null!==i&&void 0!==i?i:"rgba(0, 0, 0, 0)",fillOpacity:null!==n&&void 0!==n?n:1,strokeOpacity:null!==o&&void 0!==o?o:1,strokeWidth:null!==s&&void 0!==s?s:0}}}getLegendData(e){var t;if(!this.properties.isValid()||"category"!==e)return[];const{yKey:i,yName:n,title:o,showInLegend:s}=this.properties,{id:r,ctx:{legendManager:a},visible:l}=this;return[{legendType:"category",id:r,itemId:i,seriesId:r,enabled:l&&a.getItemEnabled({seriesId:r,itemId:i}),label:{text:null!==(t=null!==o&&void 0!==o?o:n)&&void 0!==t?t:i},symbol:this.legendItemSymbol(),hideInLegend:!s}]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:n}=e;yz(this,this.ctx.animationManager,t),pG(this,"labels",this.ctx.animationManager,i),pG(this,"annotations",this.ctx.animationManager,...n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new cI}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,labelKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,labelKey:n,highlighted:!0})}computeFocusBounds(e){return Sz(this,e)}};x_.className="ScatterSeries",x_.type="scatter";var w_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new x_(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:hB,color:uB},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:cG},S_=class e{constructor(e,t,i,n){this.startAngle=e,this.endAngle=t,this.innerRadius=i,this.outerRadius=n}clone(){const{startAngle:t,endAngle:i,innerRadius:n,outerRadius:o}=this;return new e(t,i,n,o)}equals(e){return this.startAngle===e.startAngle&&this.endAngle===e.endAngle&&this.innerRadius===e.innerRadius&&this.outerRadius===e.outerRadius}[Iw](t,i){return new e(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function M_(e){let{startAngle:t,endAngle:i,innerRadius:n,outerRadius:o}=e,s=1/0,r=1/0,a=-1/0,l=-1/0;const d=(e,t)=>{s=Math.min(e,s),r=Math.min(t,r),a=Math.max(e,a),l=Math.max(t,l)};return d(n*Math.cos(t),n*Math.sin(t)),d(n*Math.cos(i),n*Math.sin(i)),d(o*Math.cos(t),o*Math.sin(t)),d(o*Math.cos(i),o*Math.sin(i)),GI(0,t,i)&&d(o,0),GI(.5*Math.PI,t,i)&&d(0,o),GI(Math.PI,t,i)&&d(-o,0),GI(1.5*Math.PI,t,i)&&d(0,-o),new Ww(s,r,a-s,l-r)}function D_(e,t,i){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:o,outerRadius:s}=i;if(i.startAngle===i.endAngle||n<Math.min(o,s)||n>Math.max(o,s))return!1;const r=BI(i.startAngle),a=BI(i.endAngle),l=Math.atan2(t,e);return r<a?l<=a&&l>=r:l<=a&&l>=-Math.PI||l>=r&&l<=Math.PI}function k_(e,t){const{startAngle:i,endAngle:n,innerRadius:o,outerRadius:s}=t,r={x:s*Math.cos(i),y:s*Math.sin(i)},a={x:s*Math.cos(n),y:s*Math.sin(n)},l=0===o?{x:0,y:0}:{x:o*Math.cos(i),y:o*Math.sin(i)},d=0===o?{x:0,y:0}:{x:o*Math.cos(n),y:o*Math.sin(n)};return _P(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,l.x,l.y)||_P(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,d.x,d.y)||WP(0,0,s,i,n,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function I_(e,t){const i={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},o={x:e.x,y:e.y+e.height},s={x:e.x+e.width,y:e.y+e.height};return k_({start:i,end:n},t)||k_({start:o,end:s},t)}function A_(e,t,i,n){if(0===i&&0===n)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*n)/(e+1*n))-t<0)return 1;let o=0,s=1;for(let r=0;r<8;r+=1){const r=(o+s)/2;Math.asin(Math.abs(r*i)/(e+r*i))+Math.asin(Math.abs(r*n)/(e+r*n))-t<0?o=r:s=r}return o}function T_(e,t){return HI(e,t)<1e-6?t:FI(e-t)+t}function E_(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.abs(t-e)>=2*Math.PI?2*Math.PI:FI(t-e);return{startAngle:e=T_(e,i),endAngle:t=e+n}}function R_(e,t,i,n,o,s){const r=Math.sin(s),a=Math.cos(s),l=e**2+t**2-i**2;let d,c,h,u;if(a>.5){const i=r/a,n=1+i**2,o=-2*(e+t*i),s=o**2-4*n*l;if(s<0)return;const p=(-o+Math.sqrt(s))/(2*n),g=(-o-Math.sqrt(s))/(2*n);d=p,c=p*i,h=g,u=g*i}else{const i=a/r,n=1+i**2,o=-2*(t+e*i),s=o**2-4*n*l;if(s<0)return;const p=(-o+Math.sqrt(s))/(2*n),g=(-o-Math.sqrt(s))/(2*n);d=p*i,c=p,h=g*i,u=g}const p=h*a+u*r,g=d*a+c*r>0?T_(Math.atan2(c-t,d-e),n):NaN,m=p>0?T_(Math.atan2(u-t,h-e),n):NaN;return g>=n&&g<=o?g:m>=n&&m<=o?m:void 0}function L_(e,t,i,n,o,s){const r=Math.hypot(e,t),a=r-(r**2-i**2+s**2)/(2*r),l=Math.atan2(t,e),d=Math.acos(-a/i),c=T_(l+d,n),h=T_(l-d,n);return c>=n&&c<=o?c:h>=n&&h<=o?h:void 0}var P_=class{constructor(e,t,i,n,o){this.cx=e,this.cy=t,this.r=i,this.a0=n,this.a1=o,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){null==e||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(e){null==e||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},N_=class extends QP{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return M_(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:e}=this;let{innerRadius:t,outerRadius:i}=this;return t=t>0?t+e:0,i=Math.max(i-e,0),{innerRadius:t,outerRadius:i}}normalizedClipSector(){const{clipSector:e}=this;if(null==e)return;const{startAngle:t,endAngle:i}=E_(this.startAngle,this.endAngle),{innerRadius:n,outerRadius:o}=this.normalizedRadii(),s=E_(e.startAngle,e.endAngle,t);return new S_(Math.max(t,s.startAngle),Math.min(i,s.endAngle),Math.max(n,e.innerRadius),Math.min(o,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,n,o,s,r,a){if(e<=0)return;const{startAngle:l,endAngle:d}=E_(this.startAngle,this.endAngle),{innerRadius:c,outerRadius:h}=this.normalizedRadii(),u=this.normalizedClipSector();if(a&&c<=0)return;const p=a?this.getAngleOffset(c+e):this.getAngleOffset(h-e),g=r?l+p+t:d-p-t,m=a?c+e:h-e,v=m*Math.cos(g),f=m*Math.sin(g);if(null!=u){const e=1e-6;if(!r&&!(g>=l-e&&g<=u.endAngle-e))return;if(r&&!(g>=u.startAngle+e&&g<=d-e))return;if(a&&m<u.innerRadius-e)return;if(!a&&m>u.outerRadius+e)return}const y=new P_(v,f,e,i,n);if(null!=u){let t,d;if(a?(y.clipStart(R_(v,f,e,i,n,u.endAngle)),y.clipEnd(R_(v,f,e,i,n,u.startAngle))):(y.clipStart(R_(v,f,e,i,n,u.startAngle)),y.clipEnd(R_(v,f,e,i,n,u.endAngle))),r?(t=L_(v,f,e,i,n,u.innerRadius),d=L_(v,f,e,i,n,u.outerRadius)):(t=L_(v,f,e,i,n,u.outerRadius),d=L_(v,f,e,i,n,u.innerRadius)),y.clipStart(t),y.clipEnd(d),null!=t){const{x:e,y:i}=y.pointAt(t),n=T_(Math.atan2(i,e),l);r?null===s||void 0===s||s.clipStart(n):o.clipEnd(n)}if(null!=d){const{x:e,y:t}=y.pointAt(d),i=T_(Math.atan2(t,e),l);r?o.clipStart(i):null===s||void 0===s||s.clipEnd(i)}}if(null!=u){const{x:e,y:t}=y.pointAt((y.a0+y.a1)/2);if(!D_(e,t,u))return}const{x:b,y:C}=y.pointAt(r===a?y.a0:y.a1),x=T_(Math.atan2(C,b),l),w=a?s:o;return r?null===w||void 0===w||w.clipStart(x):null===w||void 0===w||w.clipEnd(x),y}updatePath(){var e,t,i,n,o;const s=1e-6,{path:r,centerX:a,centerY:l,concentricEdgeInset:d,radialEdgeInset:c}=this;let{startOuterCornerRadius:h,endOuterCornerRadius:u,startInnerCornerRadius:p,endInnerCornerRadius:g}=this;const{startAngle:m,endAngle:v}=E_(this.startAngle,this.endAngle),{innerRadius:f,outerRadius:y}=this.normalizedRadii(),b=this.normalizedClipSector(),C=v-m,x=C>=2*Math.PI-s;if(r.clear(),0===f&&0===y||f>y)return;if((null!==(e=null===b||void 0===b?void 0:b.startAngle)&&void 0!==e?e:m)===(null!==(t=null===b||void 0===b?void 0:b.endAngle)&&void 0!==t?t:v))return;if(x&&null==this.clipSector&&0===h&&0===u&&0===p&&0===g)return r.moveTo(a+y*Math.cos(m),l+y*Math.sin(m)),r.arc(a,l,y,m,v),f>d&&(r.moveTo(a+f*Math.cos(v),l+f*Math.sin(v)),r.arc(a,l,f,v,m,!0)),void r.closePath();if(null==this.clipSector&&Math.abs(f-y)<1e-6)return r.arc(a,l,y,m,v,!1),r.arc(a,l,y,v,m,!0),void r.closePath();const w=this.getAngleOffset(f),S=this.getAngleOffset(y);if(C<2*S)return;const M=(null!==(i=null===b||void 0===b?void 0:b.innerRadius)&&void 0!==i?i:f)>d,D=f<d||C<2*w,k=y-f,I=Math.max(h,p,u,g),A=I>0?Math.min(k/I,1):1;h*=A,u*=A,p*=A,g*=A;const T=A_(y,C-2*S,-h,-u);if(h*=T,u*=T,!D&&M){const e=A_(f,C-2*w,p,g);p*=e,g*=e}else p=0,g=0;const E=Math.max(h+p,u+g),R=E>0?Math.min(k/E,1):1;h*=R,u*=R,p*=R,g*=R;let L=0,P=0;const N=h/(y-h),F=u/(y-u);if(N>=0&&N<.999999)L=Math.asin(N);else{L=C/2;const e=y/(1/Math.sin(L)+1);h=Math.min(e,h)}if(F>=0&&F<.999999)P=Math.asin(F);else{P=C/2;const e=y/(1/Math.sin(P)+1);u=Math.min(e,u)}const O=Math.asin(p/(f+p)),B=Math.asin(g/(f+g)),G=null!==(n=null===b||void 0===b?void 0:b.outerRadius)&&void 0!==n?n:y,z=this.getAngleOffset(G),_=new P_(0,0,G,m+z,v-z),V=null!==(o=null===b||void 0===b?void 0:b.innerRadius)&&void 0!==o?o:f,H=this.getAngleOffset(V),W=M?new P_(0,0,V,m+H,v-H):void 0;null!=b&&(_.clipStart(b.startAngle),_.clipEnd(b.endAngle),null===W||void 0===W||W.clipStart(b.startAngle),null===W||void 0===W||W.clipEnd(b.endAngle));const j=this.arc(h,L,m-.5*Math.PI,m+L,_,W,!0,!1),U=this.arc(u,P,v-P,v+.5*Math.PI,_,W,!1,!1),K=this.arc(g,B,v+.5*Math.PI,v+Math.PI-B,_,W,!1,!0),Y=this.arc(p,O,m+Math.PI+O,m+1.5*Math.PI,_,W,!0,!0);if(D){const e=C<.5*Math.PI?c*(1+Math.cos(C))/Math.sin(C):NaN;let t;t=e>0&&e<y?Math.max(Math.hypot(c,e),f):c,t=Math.max(t,f);const i=m+.5*C;r.moveTo(a+t*Math.cos(i),l+t*Math.sin(i))}else if(!0===(null===Y||void 0===Y?void 0:Y.isValid())||!0===(null===W||void 0===W?void 0:W.isValid()));else{const e=m+C/2,t=f*Math.cos(e),i=f*Math.sin(e);r.moveTo(a+t,l+i)}if(!0===(null===j||void 0===j?void 0:j.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=j;r.arc(a+e,l+t,i,n,o)}if(_.isValid()){const{r:e,a0:t,a1:i}=_;r.arc(a,l,e,t,i)}if(!0===(null===U||void 0===U?void 0:U.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=U;r.arc(a+e,l+t,i,n,o)}if(!D){if(!0===(null===K||void 0===K?void 0:K.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=K;r.arc(a+e,l+t,i,n,o)}if(!0===(null===W||void 0===W?void 0:W.isValid())){const{r:e,a0:t,a1:i}=W;r.arc(a,l,e,i,t,!0)}if(!0===(null===Y||void 0===Y?void 0:Y.isValid())){const{cx:e,cy:t,r:i,a0:n,a1:o}=Y;r.arc(a+e,l+t,i,n,o)}}r.closePath()}isPointInPath(e,t){var i;const{startAngle:n,endAngle:o,innerRadius:s,outerRadius:r}=null!==(i=this.clipSector)&&void 0!==i?i:this;return D_(e-this.centerX,t-this.centerY,{startAngle:n,endAngle:o,innerRadius:Math.min(s,r),outerRadius:Math.max(s,r)})}};N_.className="Sector",mw([qP()],N_.prototype,"centerX",2),mw([qP()],N_.prototype,"centerY",2),mw([qP()],N_.prototype,"innerRadius",2),mw([qP()],N_.prototype,"outerRadius",2),mw([qP()],N_.prototype,"startAngle",2),mw([qP()],N_.prototype,"endAngle",2),mw([qP()],N_.prototype,"clipSector",2),mw([qP()],N_.prototype,"concentricEdgeInset",2),mw([qP()],N_.prototype,"radialEdgeInset",2),mw([qP()],N_.prototype,"startOuterCornerRadius",2),mw([qP()],N_.prototype,"endOuterCornerRadius",2),mw([qP()],N_.prototype,"startInnerCornerRadius",2),mw([qP()],N_.prototype,"endInnerCornerRadius",2);var F_={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},O_={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},B_=class extends ZA{constructor(){super(...arguments),this.showInLegend=!1}};mw([hD(fD)],B_.prototype,"showInLegend",2);var G_=class extends qA{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};mw([hD(bD)],G_.prototype,"text",2),mw([hD(CD)],G_.prototype,"spacing",2);var z_=class extends lD{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};mw([hD(ND)],z_.prototype,"fill",2),mw([hD(MD)],z_.prototype,"fillOpacity",2);var __=class extends qA{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};mw([hD(SD)],__.prototype,"offset",2),mw([hD(CD.restrict({min:0,max:360}))],__.prototype,"minAngle",2),mw([hD(SD)],__.prototype,"minSpacing",2),mw([hD(SD)],__.prototype,"maxCollisionOffset",2),mw([hD(fD)],__.prototype,"avoidCollisions",2);var V_=class extends qA{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};mw([hD(CD)],V_.prototype,"positionOffset",2),mw([hD(MD)],V_.prototype,"positionRatio",2);var H_=class extends lD{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};mw([hD(FD,{optional:!0})],H_.prototype,"colors",2),mw([hD(SD)],H_.prototype,"length",2),mw([hD(SD)],H_.prototype,"strokeWidth",2);var W_=class extends lF{constructor(){super(...arguments),this.fills=Object.values(F_),this.strokes=Object.values(O_),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new dD(G_),this.title=new B_,this.innerCircle=new z_,this.shadow=new fG,this.calloutLabel=new __,this.sectorLabel=new V_,this.calloutLine=new H_,this.tooltip=new xG}isValid(){const e=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(cM.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):e}};function j_(e,t,i,n){const o=[i.convert(0),i.convert(1)],s=[n.convert(0),n.convert(1)],r=Math.PI/-2+zI(t),a=e?"initial":"update";return{nodes:{toFn:(e,t,i,n)=>{let{prevLive:s}=n,{startAngle:a,endAngle:l,innerRadius:d,outerRadius:c}=t;const{stroke:h,fill:u}=t.sectorFormat;var p,g;"removed"===i&&s?(a=null===(p=s.datum)||void 0===p?void 0:p.endAngle,l=null===(g=s.datum)||void 0===g?void 0:g.endAngle):"removed"!==i||s||(a=r,l=r);if("removed"===i){const e=(e=>{let{radius:t}=e;return{innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*t}})(t);d=e.innerRadius,c=e.outerRadius}return{startAngle:a,endAngle:l,outerRadius:c,innerRadius:d,stroke:h,fill:u}},fromFn:(t,i,n,o)=>{let{prevFromProps:l}=o,{startAngle:d,endAngle:c,innerRadius:h,outerRadius:u}=t,{fill:p,stroke:g}=i.sectorFormat;if("unknown"===n||"added"===n&&!l)d=r,c=r,h=i.innerRadius,u=i.outerRadius;else if("added"===n&&l){var m,v,f,y;d=null!==(m=l.endAngle)&&void 0!==m?m:r,c=null!==(v=l.endAngle)&&void 0!==v?v:r,h=null!==(f=l.innerRadius)&&void 0!==f?f:i.innerRadius,u=null!==(y=l.outerRadius)&&void 0!==y?y:i.outerRadius}if("added"===n&&!e){const e=(e=>{let{radius:t}=e;return{innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*t}})(i);h=e.innerRadius,u=e.outerRadius}var b,C;"updated"===n&&(p=null!==(b=t.fill)&&void 0!==b?b:p,g=null!==(C="string"===typeof t.stroke?t.stroke:void 0)&&void 0!==C?C:g);return{startAngle:d,endAngle:c,innerRadius:h,outerRadius:u,fill:p,stroke:g,phase:a}}},innerCircle:{fromFn:(e,t)=>{var i,n,o;return{size:null!==(i=null!==(n=null===(o=e.previousDatum)||void 0===o?void 0:o.radius)&&void 0!==n?n:e.size)&&void 0!==i?i:0,phase:a}},toFn:(e,t)=>{var i;return{size:null!==(i=t.radius)&&void 0!==i?i:0}}}}}function U_(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}function K_(e,t){const i=t.y-e.centerY,n=t.x-e.centerX,o=Math.atan2(i,n),s=e.getItemNodes();for(const r of s)if(!0!==r.datum.missing&&GI(o,r.startAngle,r.endAngle)){const e=Math.sqrt(n*n+i*i);let t=0;return e<r.innerRadius?t=r.innerRadius-e:e>r.outerRadius&&(t=e-r.outerRadius),{datum:r.datum,distance:t}}}mw([hD(bD)],W_.prototype,"angleKey",2),mw([hD(bD,{optional:!0})],W_.prototype,"angleName",2),mw([hD(bD,{optional:!0})],W_.prototype,"angleFilterKey",2),mw([hD(bD,{optional:!0})],W_.prototype,"radiusKey",2),mw([hD(bD,{optional:!0})],W_.prototype,"radiusName",2),mw([hD(SD,{optional:!0})],W_.prototype,"radiusMin",2),mw([hD(SD,{optional:!0})],W_.prototype,"radiusMax",2),mw([hD(bD,{optional:!0})],W_.prototype,"calloutLabelKey",2),mw([hD(bD,{optional:!0})],W_.prototype,"calloutLabelName",2),mw([hD(bD,{optional:!0})],W_.prototype,"sectorLabelKey",2),mw([hD(bD,{optional:!0})],W_.prototype,"sectorLabelName",2),mw([hD(bD,{optional:!0})],W_.prototype,"legendItemKey",2),mw([hD(FD)],W_.prototype,"fills",2),mw([hD(FD)],W_.prototype,"strokes",2),mw([hD(MD)],W_.prototype,"fillOpacity",2),mw([hD(MD)],W_.prototype,"strokeOpacity",2),mw([hD(jD)],W_.prototype,"lineDash",2),mw([hD(SD)],W_.prototype,"lineDashOffset",2),mw([hD(SD)],W_.prototype,"cornerRadius",2),mw([hD(yD,{optional:!0})],W_.prototype,"itemStyler",2),mw([hD(CD)],W_.prototype,"rotation",2),mw([hD(CD)],W_.prototype,"outerRadiusOffset",2),mw([hD(MD)],W_.prototype,"outerRadiusRatio",2),mw([hD(CD,{optional:!0})],W_.prototype,"innerRadiusOffset",2),mw([hD(MD,{optional:!0})],W_.prototype,"innerRadiusRatio",2),mw([hD(SD)],W_.prototype,"strokeWidth",2),mw([hD(CD)],W_.prototype,"sectorSpacing",2),mw([hD(fD)],W_.prototype,"hideZeroValueSectorsInLegend",2),mw([hD(_D)],W_.prototype,"innerLabels",2),mw([hD(mD)],W_.prototype,"title",2),mw([hD(mD)],W_.prototype,"innerCircle",2),mw([hD(mD)],W_.prototype,"shadow",2),mw([hD(mD)],W_.prototype,"calloutLabel",2),mw([hD(mD)],W_.prototype,"sectorLabel",2),mw([hD(mD)],W_.prototype,"calloutLine",2),mw([hD(mD)],W_.prototype,"tooltip",2);var Y_=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(Y_||{}),Z_=class extends iF{constructor(e){let{useLabelLayer:t=!1,pickModes:i=[1,0],canHaveAxes:o=!1,animationResetFns:s}=e;super(l(l({},n(e,Xx)),{},{useLabelLayer:t,pickModes:i,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:o})),this.itemGroup=this.contentGroup.appendChild(new cI),this.nodeData=[],this.itemSelection=LI.select(this.itemGroup,(()=>this.nodeFactory()),!1),this.labelSelection=LI.select(this.labelGroup,(()=>this.labelFactory()),!1),this.highlightSelection=LI.select(this.highlightGroup,(()=>this.nodeFactory())),this.highlightLabelSelection=LI.select(this.highlightLabel,(()=>this.labelFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=s,this.animationState=new jA("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3],!0)}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}labelFactory(){const e=new uA;return e.pointerEvents=1,e}addChartEventListeners(){var e;this.destroyFns.push(null===(e=this.ctx.chartEventManager)||void 0===e?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}resetAllAnimation(){var e;const{item:t,label:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&uk([this.itemSelection,this.highlightSelection],t),i&&uk([this.labelSelection,this.highlightLabelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){var t;const{item:i,label:n}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};i&&uk([this.highlightSelection],i),n&&uk([this.highlightLabelSelection],n)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){var t;const i=null===(t=this.getNodeData())||void 0===t?void 0:t[e.datumIndex];if(void 0!==i)return this.itemSelection.select((e=>e instanceof QP&&e.datum===i))[0]}getSeriesRange(e,t){return[NaN,NaN]}},X_=class extends OP{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},q_=class extends Z_{constructor(e){super({moduleCtx:e,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:U_,label:mG}}),this.properties=new W_,this.phantomNodeData=void 0,this.backgroundGroup=new pI({name:"".concat(this.id,"-background"),zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new SO,this.radiusScale=new SO,this.phantomGroup=this.backgroundGroup.appendChild(new cI({name:"phantom"})),this.phantomSelection=LI.select(this.phantomGroup,(()=>this.nodeFactory()),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new cI({name:"pieCalloutLabels"})),this.calloutLabelSelection=new LI(this.calloutLabelGroup,cI),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new cI({name:"".concat(this.id,"-zerosumRings")})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new lN),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new lN),this.innerLabelsGroup=this.contentGroup.appendChild(new cI({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new cI({name:"".concat(this.id,"-innerCircle")})),this.innerLabelsSelection=LI.select(this.innerLabelsGroup,uA),this.innerCircleSelection=LI.select(this.innerCircleGroup,lN),this.surroundingRadius=void 0,this.NodeEvent=X_,this.angleScale=new SO,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((e=>e+Math.PI/2)),this.phantomGroup.opacity=.2}get calloutNodeData(){var e;return null!==(e=this.phantomNodeData)&&void 0!==e?e:this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),null===e||void 0===e||e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),null===e||void 0===e||e.removeChild(this.backgroundGroup)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.backgroundGroup.zIndex=[0,e],!0)}nodeFactory(){return new N_}getSeriesDomain(e){return"x"===e?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(null==this.data||!this.properties.isValid())return;const{visible:t,id:i}=this,{angleKey:n,angleFilterKey:o,radiusKey:s,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l}=this.properties,d=(e,n,o)=>t&&this.ctx.legendManager.getItemEnabled({seriesId:i,itemId:o}),c=!this.ctx.animationManager.isSkipped(),h=[],u=[];l?h.push(BF(l,"band",{id:"legendItemKey"})):r?h.push(BF(r,"band",{id:"calloutLabelKey"})):a&&h.push(BF(a,"band",{id:"sectorLabelKey"}));const p=this.radiusScale.type,g=this.angleScale.type;var m,v;s&&u.push(zF(s,{id:"radiusValue",min:null!==(m=this.properties.radiusMin)&&void 0!==m?m:0,max:this.properties.radiusMax}),GF(s,p,{id:"radiusRaw"}),qF("radiusValue",[0,1],1,null!==(v=this.properties.radiusMin)&&void 0!==v?v:0,this.properties.radiusMax));r&&u.push(GF(r,"band",{id:"calloutLabelValue"})),a&&u.push(GF(a,"band",{id:"sectorLabelValue"})),l&&u.push(GF(l,"band",{id:"legendItemValue"})),o&&u.push(_F(o,g,{id:"angleFilterValue",onlyPositive:!0,validation:d,invalidValue:0}),GF(o,g,{id:"angleFilterRaw"}),qF("angleFilterValue",[0,1],0,0)),c&&this.processedData&&h.length>0&&u.push(rO(this.id,this.processedData)),u.push(JF()),await this.requestDataModel(e,this.data,{props:[...h,_F(n,g,{id:"angleValue",onlyPositive:!0,validation:d,invalidValue:0}),GF(n,g,{id:"angleRaw"}),qF("angleValue",[0,1],0,0),...u]});for(const b of null!==(f=null===(y=this.processedData)||void 0===y||null===(y=y.defs)||void 0===y?void 0:y.values)&&void 0!==f?f:[]){var f,y;const{id:e,missing:t,property:i}=b,n=XL(this,t);"angleRaw"!==e&&n>0&&cM.warnOnce("no value was found for the key '".concat(String(i),"' on ").concat(n," data element").concat(n>1?"s":""))}this.animationState.transition("updateData")}maybeRefreshNodeData(){var e;if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:i}=null!==(e=this.createNodeData())&&void 0!==e?e:{};this.nodeData=t,this.phantomNodeData=i,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){return{angleValues:e.resolveColumnById(this,"angleValue",t),angleRawValues:e.resolveColumnById(this,"angleRaw",t),angleFilterValues:null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterValue",t):void 0,angleFilterRawValues:null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterRaw",t):void 0,radiusValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,radiusRawValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,calloutLabelValues:this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,sectorLabelValues:this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,legendItemValues:this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0}}createNodeData(){var e;const{id:t,processedData:i,dataModel:n,angleScale:o,ctx:{legendManager:s},visible:r}=this,{rotation:a,innerRadiusRatio:d}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:t,nodeData:[],labelData:[]};if(null===i||void 0===i||!i.rawData.length||!n||"ungrouped"!==i.type)return;const{angleValues:c,angleRawValues:h,angleFilterValues:u,angleFilterRawValues:p,radiusValues:g,radiusRawValues:m,calloutLabelValues:v,sectorLabelValues:f,legendItemValues:y}=this.getProcessedDataValues(n,i),b=null!==(e=null===p||void 0===p?void 0:p.some(((e,t)=>e>h[t])))&&void 0!==e&&e;let C=0,x=0;const w=[],S=null!=p?[]:void 0;return i.rawData.forEach(((e,i)=>{var n;const d=b?u[i]:c[i],M=null==p||b?1:Math.sqrt(p[i]/h[i]),D=o.convert(C)+zI(a);C=d,x+=d;const k=o.convert(C)+zI(a),I=Math.abs(k-D),A=D+I/2,T=h[i],E=(null!==(n=null===g||void 0===g?void 0:g[i])&&void 0!==n?n:1)*M,R=null===m||void 0===m?void 0:m[i],L=null===y||void 0===y?void 0:y[i],P=this.getLabels(e,A,I,!0,null===v||void 0===v?void 0:v[i],null===f||void 0===f?void 0:f[i],L),N=this.getSectorFormat(e,i,!1),F=l({itemId:i,series:this,datum:e,datumIndex:i,angleValue:T,midAngle:A,midCos:Math.cos(A),midSin:Math.sin(A),startAngle:D,endAngle:k,radius:E,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(E),0),sectorFormat:N,radiusValue:R,legendItemValue:L,enabled:r&&s.getItemEnabled({seriesId:t,itemId:i}),focusable:!0},P);w.push(F),null!=S&&S.push(l(l({},F),{},{radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1}))})),this.zerosumOuterRing.visible=0===x,this.zerosumInnerRing.visible=0===x&&null!=d&&1!==d&&d>0,{itemId:t,nodeData:w,labelData:w,phantomNodeData:S}}getLabels(e,t,i,n,o,s,r){const{calloutLabel:a,sectorLabel:d,legendItemKey:c}=this.properties,h=!n||a.enabled?this.properties.calloutLabelKey:void 0,u=!n||d.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const p={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},g={};return h&&i>zI(a.minAngle)&&(g.calloutLabel=l(l({},this.getTextAlignment(t)),{},{text:this.getLabelText(a,l(l({},p),{},{value:o})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(g.sectorLabel={text:this.getLabelText(d,l(l({},p),{},{value:s}))}),null!=c&&null!=r&&(g.legendItem={key:c,text:r}),g}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=BI(e)- -.75*Math.PI;return t[_w(Math.floor(i/(Math.PI/2)),t.length)]}getSectorFormat(e,t,i){var n,o,s,r,a,l,d,c,h,u,p,g,m,v,f,y;const{angleKey:b,radiusKey:C,calloutLabelKey:x,sectorLabelKey:w,legendItemKey:S,fills:M,strokes:D,itemStyler:k}=this.properties,I=D[t%D.length],{fill:A,fillOpacity:T,stroke:E,strokeWidth:R,strokeOpacity:L,lineDash:P,lineDashOffset:N,cornerRadius:F}=ES(i&&this.properties.highlightStyle.item,{fill:M.length>0?M[t%M.length]:void 0,stroke:I,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let O;return k&&(O=this.cachedDatumCallback(aO(this.getDatumIdFromData(e),i?"highlight":"hide"),(()=>k({datum:e,angleKey:b,radiusKey:C,calloutLabelKey:x,sectorLabelKey:w,legendItemKey:S,fill:A,fillOpacity:T,stroke:E,strokeWidth:R,strokeOpacity:L,lineDash:P,lineDashOffset:N,cornerRadius:F,highlighted:i,seriesId:this.id})))),{fill:null!==(n=null===(o=O)||void 0===o?void 0:o.fill)&&void 0!==n?n:A,fillOpacity:null!==(s=null===(r=O)||void 0===r?void 0:r.fillOpacity)&&void 0!==s?s:T,stroke:null!==(a=null===(l=O)||void 0===l?void 0:l.stroke)&&void 0!==a?a:E,strokeWidth:null!==(d=null===(c=O)||void 0===c?void 0:c.strokeWidth)&&void 0!==d?d:R,strokeOpacity:null!==(h=null===(u=O)||void 0===u?void 0:u.strokeOpacity)&&void 0!==h?h:L,lineDash:null!==(p=null===(g=O)||void 0===g?void 0:g.lineDash)&&void 0!==p?p:P,lineDashOffset:null!==(m=null===(v=O)||void 0===v?void 0:v.lineDashOffset)&&void 0!==m?m:N,cornerRadius:null!==(f=null===(y=O)||void 0===y?void 0:y.cornerRadius)&&void 0!==f?f:F}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,n=e*t+i;return n===e||n<0?0:n}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){var t;const i=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=i,e&&(this.previousRadiusScale.range=i);const n=e=>l(l({},e),{},{innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(n),this.phantomNodeData=null===(t=this.phantomNodeData)||void 0===t?void 0:t.map(n)}getTitleTranslationY(){var e,t;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.properties.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update(e){let{seriesRect:t}=e;const{title:i}=this.properties,n={seriesRectWidth:null===t||void 0===t?void 0:t.width,seriesRectHeight:null===t||void 0===t?void 0:t.height},o=null!=kA(this.nodeDataDependencies,n);if(o&&(this._nodeDataDependencies=n),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(o),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const e=this.getTitleTranslationY();i.node.y=isFinite(e)?e:0;const t=i.node.getBBox();i.node.visible=i.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(t)}for(const s of[this.zerosumInnerRing,this.zerosumOuterRing])s.fillOpacity=0,s.stroke=this.properties.calloutLabel.color,s.strokeWidth=1,s.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;if(e!==t){var i,n;if(e)null===(i=this.labelGroup)||void 0===i||i.removeChild(e.node);if(t)t.node.textBaseline="bottom",null===(n=this.labelGroup)||void 0===n||n.appendChild(t.node);this.oldTitle=t}}updateNodeMidPoint(){var e;const t=e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};this.nodeData.forEach(t),null===(e=this.phantomNodeData)||void 0===e||e.forEach(t)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){var e;const{itemSelection:t,highlightSelection:i,phantomSelection:n,highlightLabelSelection:o,calloutLabelSelection:s,labelSelection:r,innerLabelsSelection:a}=this,d=this.nodeData.map((e=>l(l({},e),{},{sectorFormat:l({},e.sectorFormat)}))),c=(e,t)=>{e.update(t,void 0,(e=>this.getDatumId(e))),this.ctx.animationManager.isSkipped()&&e.cleanup()};c(t,this.nodeData),c(i,d),c(n,null!==(e=this.phantomNodeData)&&void 0!==e?e:[]),s.update(this.calloutNodeData,(e=>{const t=new sA;t.tag=0,t.pointerEvents=1,e.appendChild(t);const i=new uA;i.tag=1,i.pointerEvents=1,e.appendChild(i)})),r.update(this.nodeData),o.update(d),a.update(this.properties.innerLabels,(e=>{e.pointerEvents=1}))}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const e=Math.min(i,this.getOuterRadius()),n=1;t=Math.ceil(2*e+n)}const n=e?[{radius:t}]:[];this.innerCircleSelection.update(n)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null===t||void 0===t?void 0:t.series)===this,this.highlightLabel.visible=i&&(null===t||void 0===t?void 0:t.series)===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((e,t)=>{var i,n;let{radius:o}=t;e.setProperties({fill:null===(i=this.properties.innerCircle)||void 0===i?void 0:i.fill,opacity:null===(n=this.properties.innerCircle)||void 0===n?void 0:n.fillOpacity,size:o})}));const n=this.ctx.animationManager.isSkipped(),o=(e,t,i,o)=>{const s=this.getSectorFormat(t.datum,t.itemId,o);t.sectorFormat.fill=s.fill,t.sectorFormat.stroke=s.stroke,n&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(o||n)&&(e.fill=s.fill,e.stroke=s.stroke),e.strokeWidth=s.strokeWidth,e.fillOpacity=s.fillOpacity,e.strokeOpacity=s.strokeOpacity,e.lineDash=s.lineDash,e.lineDashOffset=s.lineDashOffset,e.cornerRadius=s.cornerRadius,e.fillShadow=this.properties.shadow;const r=Math.max((this.properties.sectorSpacing+(null!=s.stroke?s.strokeWidth:0))/2,0);e.inset=r,e.lineJoin=this.properties.sectorSpacing>=0||r>0?"miter":"round"};this.itemSelection.each(((e,t,i)=>o(e,t,0,!1))),this.highlightSelection.each(((e,i,n)=>{o(e,i,0,!0),e.visible=i.itemId===(null===t||void 0===t?void 0:t.itemId)})),this.phantomSelection.each(((e,t,i)=>o(e,t,0,!1))),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){var e;const{calloutLine:t}=this.properties,i=t.length,n=t.strokeWidth,o=null!==(e=t.colors)&&void 0!==e?e:this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((e,t)=>{const r=e.datum,{calloutLabel:a,outerRadius:l}=r;if(null!==a&&void 0!==a&&a.text&&!a.hidden&&0!==l){var d;e.visible=!0,e.strokeWidth=n,e.stroke=o[t%o.length],e.fill=void 0;const c=r.midCos*l,h=r.midSin*l;let u=r.midCos*(l+i),p=r.midSin*(l+i);if((null!==(d=a.collisionTextAlign)&&void 0!==d?d:0!==a.collisionOffsetY)&&null!=a.box){const e=a.box;let t=u,i=p;u<e.x?t=e.x:u>e.x+e.width&&(t=e.x+e.width),p<e.y?i=e.y:p>e.y+e.height&&(i=e.y+e.height);const n=t-u,o=i-p,r=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),l=r-s;l>0&&(u+=n*l/r,p+=o*l/r)}e.x1=c,e.y1=h,e.x2=u,e.y2=p}else e.visible=!1}))}getLabelOverflow(e,t,i){const n=-this.centerX,o=n+i.width,s=-this.centerY,r=s+i.height;let a=1;t.x+1<n?a=(t.x+t.width-n)/t.width:t.x+t.width-1>o&&(a=(o-t.x)/t.width);const l=t.y+1<s||t.y+t.height-1>r;return{textLength:1===a?e.length:Math.floor(e.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(null==t)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=t**2;return i.some((e=>e.x**2+e.y**2>n))}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:n,minSpacing:o}=t,s=e.convert(0),r=this.calloutNodeData,a=r.filter((e=>{return!(!(t=e).calloutLabel||0===t.outerRadius);var t}));if(a.forEach((e=>{const t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)})),a.length<=1)return;const l=a.filter((e=>e.midCos<0)).sort(((e,t)=>e.midSin-t.midSin)),d=a.filter((e=>e.midCos>=0)).sort(((e,t)=>e.midSin-t.midSin)),c=a.filter((e=>{var t;return e.midSin<0&&"center"===(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)})).sort(((e,t)=>e.midCos-t.midCos)),h=a.filter((e=>{var t;return e.midSin>=0&&"center"===(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)})).sort(((e,t)=>e.midCos-t.midCos)),u=e=>{var t;const o=e.calloutLabel;if(null==o)return Ww.zero.clone();const s=e.outerRadius+i.length+n,r=e.midCos*s,a=e.midSin*s+o.collisionOffsetY,l=null!==(t=o.collisionTextAlign)&&void 0!==t?t:o.textAlign,d=o.textBaseline;return uA.computeBBox(o.text,r,a,{font:this.properties.calloutLabel,textAlign:l,textBaseline:d})},p=(e,t,i)=>{const n=u(e).grow(o/2),s=u(t).grow(o/2);if(n.x<s.x+s.width&&n.x+n.width>s.x&&("to-top"===i?n.y<s.y+s.height:n.y+n.height>s.y)){const e="to-top"===i?n.y-s.y-s.height:n.y+n.height-s.y;t.calloutLabel.collisionOffsetY=e}},g=e=>{const t=e.slice().sort(((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin)))[0],i=e.indexOf(t);for(let n=i-1;n>=0;n--){const t=e[n+1],i=e[n];p(t,i,"to-top")}for(let n=i+1;n<e.length;n++){const t=e[n-1],i=e[n];p(t,i,"to-bottom")}},m=e=>{const t=a.some((e=>0!==e.calloutLabel.collisionOffsetY)),i=e.map((e=>u(e))),n=i.map((e=>e.clone().grow(o/2)));let l=!1;for(let o=0;o<n.length&&!l;o++){const t=n[o];for(let i=o+1;i<e.length;i++){const e=n[i];if(t.collidesBBox(e)){l=!0;break}}}const d=r.map((e=>{const{startAngle:t,endAngle:i,outerRadius:n}=e;return{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}})),c=i.some((e=>d.some((t=>I_(e,t)))));(l||t||c)&&e.filter((e=>"center"===e.calloutLabel.textAlign)).forEach((e=>{const t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"}))};g(l),g(d),m(c),m(h)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:n}=this.properties,o=n.length,{offset:s,color:r}=i,a=new uA;this.calloutLabelSelection.selectByTag(1).forEach((n=>{var l;const{datum:d}=n,c=d.calloutLabel,h=t.convert(d.radius),u=Math.max(0,h);if(null===c||void 0===c||!c.text||0===u||c.hidden)return void(n.visible=!1);const p=u+o+s,g=d.midCos*p,m=d.midSin*p+c.collisionOffsetY,v={textAlign:null!==(l=c.collisionTextAlign)&&void 0!==l?l:c.textAlign,textBaseline:c.textBaseline};a.text=c.text,a.x=g,a.y=m,a.setFont(this.properties.calloutLabel),a.setAlign(v);const f=a.getBBox();let y=c.text,b=!0;if(i.avoidCollisions){const{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,f,e);y=c.text.length===t?c.text:"".concat(c.text.substring(0,t),"\u2026"),b=!i}n.text=y,n.x=g,n.y=m,n.setFont(this.properties.calloutLabel),n.setAlign(v),n.fill=r,n.visible=b}))}computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:n}=this.properties,o=n.length,{offset:s,maxCollisionOffset:r,minSpacing:a}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],d=new uA;let c;const{title:h}=this.properties;if(null!==h&&void 0!==h&&h.text&&h.enabled){const e=this.getTitleTranslationY();isFinite(e)&&(d.text=h.text,d.x=0,d.y=e,d.setFont(h),d.setAlign({textBaseline:"bottom",textAlign:"center"}),c=d.getBBox(),l.push(c))}return this.calloutNodeData.forEach((i=>{var n;const h=i.calloutLabel;if(!h||0===i.outerRadius)return null;const u=i.outerRadius+o+s,p=i.midCos*u,g=i.midSin*u+h.collisionOffsetY;d.text=h.text,d.x=p,d.y=g,d.setFont(this.properties.calloutLabel),d.setAlign({textAlign:null!==(n=h.collisionTextAlign)&&void 0!==n?n:h.textAlign,textBaseline:h.textBaseline});const m=d.getBBox();if(h.box=m,Math.abs(h.collisionOffsetY)>r)h.hidden=!0;else{if(c){const e=-this.centerY,t=new Ww(c.x-a,e,c.width+2*a,c.y+c.height+a-e);if(m.collidesBBox(t))return void(h.hidden=!0)}if(e.hideWhenNecessary){const{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(h.text,m,t),o=h.text.length>2&&e<2;if(i||o||n)return void(h.hidden=!0)}h.hidden=!1,l.push(m)}})),0===l.length?null:Ww.merge(l)}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:n,fontWeight:o,fontFamily:s,positionOffset:r,positionRatio:a,color:l}=this.properties.sectorLabel,d=(e,d)=>{const{sectorLabel:c,outerRadius:h}=d;let u=!1;if(c&&0!==h){const p=t*(1-a)+h*a+r;e.fill=l,e.fontStyle=n,e.fontWeight=o,e.fontSize=i,e.fontFamily=s,e.text=c.text,e.x=d.midCos*p,e.y=d.midSin*p,e.textAlign="center",e.textBaseline="middle";const g=e.getBBox(),m=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:v,endAngle:f}=d,y={startAngle:v,endAngle:f,innerRadius:t,outerRadius:h};m.every((e=>{let[t,i]=e;return D_(t,i,y)}))&&(u=!0)}e.visible=u};this.labelSelection.each(d),this.highlightLabelSelection.each(d)}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each(((i,n)=>{const{fontStyle:o,fontWeight:s,fontSize:r,fontFamily:a,color:l}=n;i.fontStyle=o,i.fontWeight=s,i.fontSize=r,i.fontFamily=a,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",e.push(i.getBBox()),t.push(n.spacing)}));const i=e=>0===e?0:t[e],n=e=>e===t.length-1?0:t[e],o=e.reduce(((e,t,o)=>e+t.height+i(o)+n(o)),0),s=Math.max(...e.map((e=>e.width))),r=this.getInnerRadius(),a=Math.sqrt(Math.pow(s/2,2)+Math.pow(o/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let d=0,c=-o/2;d<e.length;d++){const t=e[d].height+c+i(d);l.push(t),c=t+n(d)}this.innerLabelsSelection.each(((e,t,i)=>{e.y=l[i],e.visible=a}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}pickNodeClosestDatum(e){return K_(this,e)}getTooltipContent(e){var t,i,n;const{id:o,dataModel:s,processedData:r,properties:a}=this,{legendItemKey:d,calloutLabelKey:c,calloutLabelName:h,sectorLabelKey:u,sectorLabelName:p,angleKey:g,angleName:m,radiusKey:v,radiusName:f,tooltip:y}=a,b=this.properties.title.text;if(!s||!r||0===r.rawData.length)return;const{datumIndex:C}=e,x=r.rawData[C],{angleRawValues:w,legendItemValues:S,calloutLabelValues:M,sectorLabelValues:D}=this.getProcessedDataValues(s,r),k=w[C],I=null!==(t=null!==(i=null!==(n=null===S||void 0===S?void 0:S[C])&&void 0!==n?n:c===g||null===M||void 0===M?void 0:M[C])&&void 0!==i?i:u===g||null===D||void 0===D?void 0:D[C])&&void 0!==t?t:m;return y.formatTooltip({title:b,symbol:this.legendItemSymbol(C),data:[{label:I,fallbackLabel:g,value:String(k)}]},l({seriesId:o,datum:x,title:m,legendItemKey:d,calloutLabelKey:c,calloutLabelName:h,sectorLabelKey:u,sectorLabelName:p,angleKey:g,angleName:m,radiusKey:v,radiusName:f},this.getSectorFormat(x,C,!1)))}legendItemSymbol(e){var t;const i=null===(t=this.processedData)||void 0===t?void 0:t.rawData[e],n=this.getSectorFormat(i,e,!1);return{marker:{fill:n.fill,stroke:n.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}}getLegendData(e){var t;const{visible:i,processedData:n,dataModel:o,id:s,ctx:{legendManager:r}}=this;if(!o||!n||!this.properties.isValid()||"category"!==e)return[];const{angleKey:a,calloutLabelKey:l,sectorLabelKey:d,legendItemKey:c,showInLegend:h}=this.properties;if(!c&&(!l||l===a)&&(!d||d===a))return[];const{angleRawValues:u,calloutLabelValues:p,sectorLabelValues:g,legendItemValues:m}=this.getProcessedDataValues(o,n),v=(null===(t=this.properties.title)||void 0===t?void 0:t.showInLegend)&&this.properties.title.text,f=[],y=this.properties.hideZeroValueSectorsInLegend;for(let S=0;S<n.rawData.length;S++){var b,C;const e=n.rawData[S],t=u[S];if(y&&0===t)continue;const o=[];v&&o.push(v);const M=this.getLabels(e,2*Math.PI,2*Math.PI,!1,null===p||void 0===p?void 0:p[S],null===g||void 0===g?void 0:g[S],null===m||void 0===m?void 0:m[S]);if(c&&void 0!==M.legendItem)o.push(M.legendItem.text);else if(l&&l!==a&&void 0!==(null===(b=M.calloutLabel)||void 0===b?void 0:b.text)){var x;o.push(null===(x=M.calloutLabel)||void 0===x?void 0:x.text)}else if(d&&d!==a&&void 0!==(null===(C=M.sectorLabel)||void 0===C?void 0:C.text)){var w;o.push(null===(w=M.sectorLabel)||void 0===w?void 0:w.text)}0!==o.length&&f.push({legendType:"category",id:s,datum:e,itemId:S,seriesId:s,enabled:i&&r.getItemEnabled({seriesId:s,itemId:S}),label:{text:o.join(" - ")},symbol:this.legendItemSymbol(S),legendItemName:null!=c?e[c]:void 0,hideInLegend:!h})}return f}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:n}}=this;e.forEach(((e,n)=>i.toggleItem({enabled:e,seriesId:t,itemId:n}))),i.update(),n.update(4)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=j_(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);iM(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,((e,t)=>this.getDatumId(t))),iM(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),pG(this,"callout",t,this.calloutLabelSelection),pG(this,"sector",t,this.labelSelection),pG(this,"highlight",t,this.highlightLabelSelection),pG(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,i,n,o;const{itemSelection:s,highlightSelection:r,phantomSelection:a,processedData:l,radiusScale:d,previousRadiusScale:c}=this,{animationManager:h}=this.ctx,u=null===l||void 0===l||null===(e=l.reduced)||void 0===e||null===(e=e.diff)||void 0===e?void 0:e[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!==(t=null===u||void 0===u?void 0:u.moved.size)&&void 0!==t?t:0),g=(null!==(i=null===l||void 0===l?void 0:l.defs.keys.length)&&void 0!==i?i:0)>0,m=null===(n=null===l||void 0===l||null===(o=l.reduced)||void 0===o||null===(o=o.animationValidation)||void 0===o?void 0:o.uniqueKeys)||void 0===n||n;p&&g&&m||this.ctx.animationManager.skipCurrentBatch();const v=!this.nodeData.some((e=>e.enabled)),f=j_(!1,this.properties.rotation,d,c);iM(this.id,"nodes",h,[s,r,a],f.nodes,((e,t)=>this.getDatumId(t)),u),iM(this.id,"innerCircle",h,[this.innerCircleSelection],f.innerCircle),pG(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),pG(this,"sector",this.ctx.animationManager,this.labelSelection),pG(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==v&&(this.noVisibleData=v,pG(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:n,previousRadiusScale:o}=this,{animationManager:s}=this.ctx,r=j_(!1,this.properties.rotation,n,o);iM(this.id,"nodes",s,[e,t,i],r.nodes,((e,t)=>this.getDatumId(t))),iM(this.id,"innerCircle",s,[this.innerCircleSelection],r.innerCircle),gG(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),gG(this,"sector",this.ctx.animationManager,this.labelSelection),gG(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),gG(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var t;const{calloutLabelKey:i,sectorLabelKey:n,legendItemKey:o}=this.properties;if(null!==(t=this.processedData)&&void 0!==t&&null!==(t=t.reduced)&&void 0!==t&&null!==(t=t.animationValidation)&&void 0!==t&&t.uniqueKeys)return o?e[o]:i?e[i]:n?e[n]:void 0}getDatumId(e){const{datumIndex:t}=e,i=this.getDatumIdFromData(e.datum);return String(null!==i&&void 0!==i?i:t)}};q_.className="DonutSeries",q_.type="donut";var Q_={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:hB,color:mB,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:hB,color:uB,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:hB,color:gB,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:wB,xOffset:3,yOffset:3,blur:5}}},J_=e=>{let{takeColors:t,colorsCount:i}=e;const{fills:n,strokes:o}=t(i);return{fills:n,strokes:o,calloutLine:{colors:o}}},$_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new q_(e),tooltipDefaults:{range:"exact"},themeTemplate:{series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:hB,color:mB,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:hB,color:uB,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:hB,color:gB,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:wB,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:12,fontFamily:hB,color:uB,spacing:2}}},paletteFactory:J_},eV=class extends ZA{constructor(){super(...arguments),this.showInLegend=!1}};mw([hD(fD)],eV.prototype,"showInLegend",2);var tV=class extends qA{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};mw([hD(SD)],tV.prototype,"offset",2),mw([hD(CD.restrict({min:0,max:360}))],tV.prototype,"minAngle",2),mw([hD(SD)],tV.prototype,"minSpacing",2),mw([hD(SD)],tV.prototype,"maxCollisionOffset",2),mw([hD(fD)],tV.prototype,"avoidCollisions",2);var iV=class extends qA{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};mw([hD(CD)],iV.prototype,"positionOffset",2),mw([hD(MD)],iV.prototype,"positionRatio",2);var nV=class extends lD{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};mw([hD(FD,{optional:!0})],nV.prototype,"colors",2),mw([hD(SD)],nV.prototype,"length",2),mw([hD(SD)],nV.prototype,"strokeWidth",2);var oV=class extends lF{constructor(){super(...arguments),this.fills=Object.values(F_),this.strokes=Object.values(O_),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new eV,this.shadow=new fG,this.calloutLabel=new tV,this.sectorLabel=new iV,this.calloutLine=new nV,this.tooltip=new xG}};mw([hD(bD)],oV.prototype,"angleKey",2),mw([hD(bD,{optional:!0})],oV.prototype,"angleName",2),mw([hD(bD,{optional:!0})],oV.prototype,"angleFilterKey",2),mw([hD(bD,{optional:!0})],oV.prototype,"radiusKey",2),mw([hD(bD,{optional:!0})],oV.prototype,"radiusName",2),mw([hD(SD,{optional:!0})],oV.prototype,"radiusMin",2),mw([hD(SD,{optional:!0})],oV.prototype,"radiusMax",2),mw([hD(bD,{optional:!0})],oV.prototype,"calloutLabelKey",2),mw([hD(bD,{optional:!0})],oV.prototype,"calloutLabelName",2),mw([hD(bD,{optional:!0})],oV.prototype,"sectorLabelKey",2),mw([hD(bD,{optional:!0})],oV.prototype,"sectorLabelName",2),mw([hD(bD,{optional:!0})],oV.prototype,"legendItemKey",2),mw([hD(FD)],oV.prototype,"fills",2),mw([hD(FD)],oV.prototype,"strokes",2),mw([hD(MD)],oV.prototype,"fillOpacity",2),mw([hD(MD)],oV.prototype,"strokeOpacity",2),mw([hD(jD)],oV.prototype,"lineDash",2),mw([hD(SD)],oV.prototype,"lineDashOffset",2),mw([hD(SD)],oV.prototype,"cornerRadius",2),mw([hD(yD,{optional:!0})],oV.prototype,"itemStyler",2),mw([hD(CD)],oV.prototype,"rotation",2),mw([hD(CD)],oV.prototype,"outerRadiusOffset",2),mw([hD(MD)],oV.prototype,"outerRadiusRatio",2),mw([hD(SD)],oV.prototype,"strokeWidth",2),mw([hD(CD)],oV.prototype,"sectorSpacing",2),mw([hD(fD)],oV.prototype,"hideZeroValueSectorsInLegend",2),mw([hD(mD)],oV.prototype,"title",2),mw([hD(mD)],oV.prototype,"shadow",2),mw([hD(mD)],oV.prototype,"calloutLabel",2),mw([hD(mD)],oV.prototype,"sectorLabel",2),mw([hD(mD)],oV.prototype,"calloutLine",2),mw([hD(mD)],oV.prototype,"tooltip",2);var sV=class extends OP{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},rV=class extends Z_{constructor(e){super({moduleCtx:e,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:U_,label:mG}}),this.properties=new oV,this.phantomNodeData=void 0,this.backgroundGroup=new pI({name:"".concat(this.id,"-background"),zIndex:0}),this.previousRadiusScale=new SO,this.radiusScale=new SO,this.phantomGroup=this.backgroundGroup.appendChild(new cI({name:"phantom"})),this.phantomSelection=LI.select(this.phantomGroup,(()=>this.nodeFactory()),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new cI({name:"pieCalloutLabels"})),this.calloutLabelSelection=new LI(this.calloutLabelGroup,cI),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new cI({name:"".concat(this.id,"-zerosumRings")})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new lN),this.surroundingRadius=void 0,this.NodeEvent=sV,this.angleScale=new SO,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((e=>e+Math.PI/2)),this.phantomGroup.opacity=.2}get calloutNodeData(){var e;return null!==(e=this.phantomNodeData)&&void 0!==e?e:this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),null===e||void 0===e||e.removeChild(this.backgroundGroup)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.backgroundGroup.zIndex=[0,e],!0)}nodeFactory(){const e=new N_;return e.miterLimit=1e9,e}getSeriesDomain(e){return"x"===e?this.angleScale.domain:this.radiusScale.domain}async processData(e){var t;if(null==this.data||!this.properties.isValid())return;const{visible:i,id:n,ctx:{legendManager:o}}=this,{angleKey:s,angleFilterKey:r,radiusKey:a,calloutLabelKey:l,sectorLabelKey:d,legendItemKey:c}=this.properties,h=(e,t,s)=>i&&o.getItemEnabled({seriesId:n,itemId:s}),u=!this.ctx.animationManager.isSkipped(),p=[],g=[];c?p.push(BF(c,"band",{id:"legendItemKey"})):l?p.push(BF(l,"band",{id:"calloutLabelKey"})):d&&p.push(BF(d,"band",{id:"sectorLabelKey"}));const m=this.radiusScale.type,v=this.angleScale.type;var f,y;a&&g.push(zF(a,{id:"radiusValue",min:null!==(f=this.properties.radiusMin)&&void 0!==f?f:0,max:this.properties.radiusMax}),GF(a,m,{id:"radiusRaw"}),qF("radiusValue",[0,1],1,null!==(y=this.properties.radiusMin)&&void 0!==y?y:0,this.properties.radiusMax));l&&g.push(GF(l,"band",{id:"calloutLabelValue"})),d&&g.push(GF(d,"band",{id:"sectorLabelValue"})),c&&g.push(GF(c,"band",{id:"legendItemValue"})),r&&g.push(_F(r,v,{id:"angleFilterValue",onlyPositive:!0,validation:h,invalidValue:0}),GF(r,v,{id:"angleFilterRaw"}),qF("angleFilterValue",[0,1],0,0)),u&&null!==(t=this.processedData)&&void 0!==t&&null!==(t=t.reduced)&&void 0!==t&&null!==(t=t.animationValidation)&&void 0!==t&&t.uniqueKeys&&p.length>0&&g.push(rO(this.id,this.processedData)),g.push(JF()),await this.requestDataModel(e,this.data,{props:[...p,_F(s,v,{id:"angleValue",onlyPositive:!0,validation:h,invalidValue:0}),GF(s,v,{id:"angleRaw"}),qF("angleValue",[0,1],0,0),...g]});for(const x of null!==(b=null===(C=this.processedData)||void 0===C||null===(C=C.defs)||void 0===C?void 0:C.values)&&void 0!==b?b:[]){var b,C;const{id:e,missing:t,property:i}=x,n=XL(this,t);"angleRaw"!==e&&n>0&&cM.warnOnce("no value was found for the key '".concat(String(i),"' on ").concat(n," data element").concat(n>1?"s":""))}this.animationState.transition("updateData")}maybeRefreshNodeData(){var e;if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:i}=null!==(e=this.createNodeData())&&void 0!==e?e:{};this.nodeData=t,this.phantomNodeData=i,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){return{angleValues:e.resolveColumnById(this,"angleValue",t),angleRawValues:e.resolveColumnById(this,"angleRaw",t),angleFilterValues:null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterValue",t):void 0,angleFilterRawValues:null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterRaw",t):void 0,radiusValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,radiusRawValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,calloutLabelValues:this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,sectorLabelValues:this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,legendItemValues:this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0}}createNodeData(){var e;const{id:t,processedData:i,dataModel:n,angleScale:o,ctx:{legendManager:s},visible:r}=this,{rotation:a}=this.properties;if(null===i||void 0===i||!i.rawData.length||!n||"ungrouped"!==i.type)return;const{angleValues:d,angleRawValues:c,angleFilterValues:h,angleFilterRawValues:u,radiusValues:p,radiusRawValues:g,calloutLabelValues:m,sectorLabelValues:v,legendItemValues:f}=this.getProcessedDataValues(n,i),y=null!==(e=null===u||void 0===u?void 0:u.some(((e,t)=>e>c[t])))&&void 0!==e&&e;let b=0,C=0;const x=[],w=null!=u?[]:void 0;return i.rawData.forEach(((e,i)=>{var n;const S=y?h[i]:d[i],M=null==u||y?1:Math.sqrt(u[i]/c[i]),D=o.convert(b)+zI(a);b=S,C+=S;const k=o.convert(b)+zI(a),I=Math.abs(k-D),A=D+I/2,T=c[i],E=(null!==(n=null===p||void 0===p?void 0:p[i])&&void 0!==n?n:1)*M,R=null===g||void 0===g?void 0:g[i],L=null===f||void 0===f?void 0:f[i],P=this.getLabels(e,A,I,!0,null===m||void 0===m?void 0:m[i],null===v||void 0===v?void 0:v[i],L),N=this.getSectorFormat(e,i,!1),F=l({itemId:i,series:this,datum:e,datumIndex:i,angleValue:T,midAngle:A,midCos:Math.cos(A),midSin:Math.sin(A),startAngle:D,endAngle:k,radius:E,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(E),0),sectorFormat:N,radiusValue:R,legendItemValue:L,enabled:r&&s.getItemEnabled({seriesId:t,itemId:i})},P);x.push(F),null!=w&&w.push(l(l({},F),{},{radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)}))})),this.zerosumOuterRing.visible=0===C,{itemId:t,nodeData:x,labelData:x,phantomNodeData:w}}getLabels(e,t,i,n,o,s,r){const{calloutLabel:a,sectorLabel:d,legendItemKey:c}=this.properties,h=!n||a.enabled?this.properties.calloutLabelKey:void 0,u=!n||d.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const p={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},g={};return h&&i>zI(a.minAngle)&&(g.calloutLabel=l(l({},this.getTextAlignment(t)),{},{text:this.getLabelText(a,l(l({},p),{},{value:o})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(g.sectorLabel={text:this.getLabelText(d,l(l({},p),{},{value:s}))}),null!=c&&null!=r&&(g.legendItem={key:c,text:r}),g}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=BI(e)- -.75*Math.PI;return t[_w(Math.floor(i/(Math.PI/2)),t.length)]}getSectorFormat(e,t,i){var n,o,s,r,a,l,d,c,h,u,p,g,m,v,f,y;const{angleKey:b,radiusKey:C,calloutLabelKey:x,sectorLabelKey:w,legendItemKey:S,fills:M,strokes:D,itemStyler:k}=this.properties,I=D[t%D.length],{fill:A,fillOpacity:T,stroke:E,strokeWidth:R,strokeOpacity:L,lineDash:P,lineDashOffset:N,cornerRadius:F}=ES(i&&this.properties.highlightStyle.item,{fill:M.length>0?M[t%M.length]:void 0,stroke:I,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let O;return k&&(O=this.cachedDatumCallback(aO(this.getDatumIdFromData(e),i?"highlight":"hide"),(()=>k({datum:e,angleKey:b,radiusKey:C,calloutLabelKey:x,sectorLabelKey:w,legendItemKey:S,fill:A,strokeOpacity:L,stroke:E,strokeWidth:R,fillOpacity:T,lineDash:P,lineDashOffset:N,cornerRadius:F,highlighted:i,seriesId:this.id})))),{fill:null!==(n=null===(o=O)||void 0===o?void 0:o.fill)&&void 0!==n?n:A,fillOpacity:null!==(s=null===(r=O)||void 0===r?void 0:r.fillOpacity)&&void 0!==s?s:T,stroke:null!==(a=null===(l=O)||void 0===l?void 0:l.stroke)&&void 0!==a?a:E,strokeWidth:null!==(d=null===(c=O)||void 0===c?void 0:c.strokeWidth)&&void 0!==d?d:R,strokeOpacity:null!==(h=null===(u=O)||void 0===u?void 0:u.strokeOpacity)&&void 0!==h?h:L,lineDash:null!==(p=null===(g=O)||void 0===g?void 0:g.lineDash)&&void 0!==p?p:P,lineDashOffset:null!==(m=null===(v=O)||void 0===v?void 0:v.lineDashOffset)&&void 0!==m?m:N,cornerRadius:null!==(f=null===(y=O)||void 0===y?void 0:y.cornerRadius)&&void 0!==f?f:F}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){var t;const i=[0,this.getOuterRadius()];this.radiusScale.range=i,e&&(this.previousRadiusScale.range=i);const n=e=>l(l({},e),{},{innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(n),this.phantomNodeData=null===(t=this.phantomNodeData)||void 0===t?void 0:t.map(n)}getTitleTranslationY(){var e,t;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.properties.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update(e){let{seriesRect:t}=e;const{title:i}=this.properties,n={seriesRectWidth:null===t||void 0===t?void 0:t.width,seriesRectHeight:null===t||void 0===t?void 0:t.height},o=null!=kA(this.nodeDataDependencies,n);if(o&&(this._nodeDataDependencies=n),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(o),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const e=this.getTitleTranslationY();i.node.y=isFinite(e)?e:0;const t=i.node.getBBox();i.node.visible=i.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(t)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;if(e!==t){var i,n;if(e)null===(i=this.labelGroup)||void 0===i||i.removeChild(e.node);if(t)t.node.textBaseline="bottom",null===(n=this.labelGroup)||void 0===n||n.appendChild(t.node);this.oldTitle=t}}updateNodeMidPoint(){var e;const t=e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};this.nodeData.forEach(t),null===(e=this.phantomNodeData)||void 0===e||e.forEach(t)}updateSelections(){this.updateGroupSelection()}updateGroupSelection(){var e;const{itemSelection:t,highlightSelection:i,phantomSelection:n,highlightLabelSelection:o,calloutLabelSelection:s,labelSelection:r}=this,a=this.nodeData.map((e=>l(l({},e),{},{sectorFormat:l({},e.sectorFormat)}))),d=(e,t)=>{e.update(t,void 0,(e=>this.getDatumId(e))),this.ctx.animationManager.isSkipped()&&e.cleanup()};d(t,this.nodeData),d(i,a),d(n,null!==(e=this.phantomNodeData)&&void 0!==e?e:[]),s.update(this.calloutNodeData,(e=>{const t=new sA;t.tag=0,t.pointerEvents=1,e.appendChild(t);const i=new uA;i.tag=1,i.pointerEvents=1,e.appendChild(i)})),r.update(this.nodeData),o.update(a)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null===t||void 0===t?void 0:t.series)===this,this.highlightLabel.visible=i&&(null===t||void 0===t?void 0:t.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const n=this.ctx.animationManager.isSkipped(),o=(e,t,i,o)=>{const s=this.getSectorFormat(t.datum,t.itemId,o);t.sectorFormat.fill=s.fill,t.sectorFormat.stroke=s.stroke,n&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(o||n)&&(e.fill=s.fill,e.stroke=s.stroke),e.strokeWidth=s.strokeWidth,e.fillOpacity=s.fillOpacity,e.strokeOpacity=s.strokeOpacity,e.lineDash=s.lineDash,e.lineDashOffset=s.lineDashOffset,e.cornerRadius=s.cornerRadius,e.fillShadow=this.properties.shadow;const r=Math.max((this.properties.sectorSpacing+(null!=s.stroke?s.strokeWidth:0))/2,0);e.inset=r,e.lineJoin=this.properties.sectorSpacing>=0||r>0?"miter":"round"};this.itemSelection.each(((e,t,i)=>o(e,t,0,!1))),this.highlightSelection.each(((e,i,n)=>{o(e,i,0,!0),e.visible=i.itemId===(null===t||void 0===t?void 0:t.itemId)})),this.phantomSelection.each(((e,t,i)=>o(e,t,0,!1))),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){var e;const{calloutLine:t}=this.properties,i=t.length,n=t.strokeWidth,o=null!==(e=t.colors)&&void 0!==e?e:this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((e,t)=>{const r=e.datum,{calloutLabel:a,outerRadius:l}=r;if(null!==a&&void 0!==a&&a.text&&!a.hidden&&0!==l){var d;e.visible=!0,e.strokeWidth=n,e.stroke=o[t%o.length],e.fill=void 0;const c=r.midCos*l,h=r.midSin*l;let u=r.midCos*(l+i),p=r.midSin*(l+i);if((null!==(d=a.collisionTextAlign)&&void 0!==d?d:0!==a.collisionOffsetY)&&null!=a.box){const e=a.box;let t=u,i=p;u<e.x?t=e.x:u>e.x+e.width&&(t=e.x+e.width),p<e.y?i=e.y:p>e.y+e.height&&(i=e.y+e.height);const n=t-u,o=i-p,r=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),l=r-s;l>0&&(u+=n*l/r,p+=o*l/r)}e.x1=c,e.y1=h,e.x2=u,e.y2=p}else e.visible=!1}))}getLabelOverflow(e,t,i){const n=-this.centerX,o=n+i.width,s=-this.centerY,r=s+i.height;let a=1;t.x+1<n?a=(t.x+t.width-n)/t.width:t.x+t.width-1>o&&(a=(o-t.x)/t.width);const l=t.y+1<s||t.y+t.height-1>r;return{textLength:1===a?e.length:Math.floor(e.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(null==t)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=t**2;return i.some((e=>e.x**2+e.y**2>n))}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:n,minSpacing:o}=t,s=e.convert(0),r=this.calloutNodeData,a=r.filter((e=>{return!(!(t=e).calloutLabel||0===t.outerRadius);var t}));if(a.forEach((e=>{const t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)})),a.length<=1)return;const l=a.filter((e=>e.midCos<0)).sort(((e,t)=>e.midSin-t.midSin)),d=a.filter((e=>e.midCos>=0)).sort(((e,t)=>e.midSin-t.midSin)),c=a.filter((e=>{var t;return e.midSin<0&&"center"===(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)})).sort(((e,t)=>e.midCos-t.midCos)),h=a.filter((e=>{var t;return e.midSin>=0&&"center"===(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)})).sort(((e,t)=>e.midCos-t.midCos)),u=e=>{var t;const o=e.calloutLabel;if(null==o)return Ww.zero.clone();const s=e.outerRadius+i.length+n,r=e.midCos*s,a=e.midSin*s+o.collisionOffsetY,l=null!==(t=o.collisionTextAlign)&&void 0!==t?t:o.textAlign,d=o.textBaseline;return uA.computeBBox(o.text,r,a,{font:this.properties.calloutLabel,textAlign:l,textBaseline:d})},p=(e,t,i)=>{const n=u(e).grow(o/2),s=u(t).grow(o/2);if(n.x<s.x+s.width&&n.x+n.width>s.x&&("to-top"===i?n.y<s.y+s.height:n.y+n.height>s.y)){const e="to-top"===i?n.y-s.y-s.height:n.y+n.height-s.y;t.calloutLabel.collisionOffsetY=e}},g=e=>{const t=e.slice().sort(((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin)))[0],i=e.indexOf(t);for(let n=i-1;n>=0;n--){const t=e[n+1],i=e[n];p(t,i,"to-top")}for(let n=i+1;n<e.length;n++){const t=e[n-1],i=e[n];p(t,i,"to-bottom")}},m=e=>{const t=a.some((e=>0!==e.calloutLabel.collisionOffsetY)),i=e.map((e=>u(e))),n=i.map((e=>e.clone().grow(o/2)));let l=!1;for(let o=0;o<n.length&&!l;o++){const t=n[o];for(let i=o+1;i<e.length;i++){const e=n[i];if(t.collidesBBox(e)){l=!0;break}}}const d=r.map((e=>{const{startAngle:t,endAngle:i,outerRadius:n}=e;return{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}})),c=i.some((e=>d.some((t=>I_(e,t)))));(l||t||c)&&e.filter((e=>"center"===e.calloutLabel.textAlign)).forEach((e=>{const t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"}))};g(l),g(d),m(c),m(h)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:n}=this.properties,o=n.length,{offset:s,color:r}=i,a=new uA;this.calloutLabelSelection.selectByTag(1).forEach((n=>{var l;const{datum:d}=n,c=d.calloutLabel,h=t.convert(d.radius),u=Math.max(0,h);if(null===c||void 0===c||!c.text||0===u||c.hidden)return void(n.visible=!1);const p=u+o+s,g=d.midCos*p,m=d.midSin*p+c.collisionOffsetY,v={textAlign:null!==(l=c.collisionTextAlign)&&void 0!==l?l:c.textAlign,textBaseline:c.textBaseline};a.text=c.text,a.x=g,a.y=m,a.setFont(this.properties.calloutLabel),a.setAlign(v);const f=a.getBBox();let y=c.text,b=!0;if(i.avoidCollisions){const{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,f,e);y=c.text.length===t?c.text:"".concat(c.text.substring(0,t),"\u2026"),b=!i}n.text=y,n.x=g,n.y=m,n.setFont(this.properties.calloutLabel),n.setAlign(v),n.fill=r,n.visible=b}))}computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:n}=this.properties,o=n.length,{offset:s,maxCollisionOffset:r,minSpacing:a}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],d=new uA;let c;const{title:h}=this.properties;if(null!==h&&void 0!==h&&h.text&&h.enabled){const e=this.getTitleTranslationY();isFinite(e)&&(d.text=h.text,d.x=0,d.y=e,d.setFont(h),d.setAlign({textBaseline:"bottom",textAlign:"center"}),c=d.getBBox(),l.push(c))}return this.calloutNodeData.forEach((i=>{var n;const h=i.calloutLabel;if(!h||0===i.outerRadius)return null;const u=i.outerRadius+o+s,p=i.midCos*u,g=i.midSin*u+h.collisionOffsetY;d.text=h.text,d.x=p,d.y=g,d.setFont(this.properties.calloutLabel),d.setAlign({textAlign:null!==(n=h.collisionTextAlign)&&void 0!==n?n:h.textAlign,textBaseline:h.textBaseline});const m=d.getBBox();if(h.box=m,Math.abs(h.collisionOffsetY)>r)h.hidden=!0;else{if(c){const e=-this.centerY,t=new Ww(c.x-a,e,c.width+2*a,c.y+c.height+a-e);if(m.collidesBBox(t))return void(h.hidden=!0)}if(e.hideWhenNecessary){const{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(h.text,m,t),o=h.text.length>2&&e<2;if(i||o||n)return void(h.hidden=!0)}h.hidden=!1,l.push(m)}})),0===l.length?null:Ww.merge(l)}updateSectorLabelNodes(){var e;const{radiusScale:t}=this,i=t.convert(0),{fontSize:n,fontStyle:o,fontWeight:s,fontFamily:r,positionOffset:a,positionRatio:l,color:d}=this.properties.sectorLabel,c=i>0,h=1===(null===(e=this.ctx.legendManager.getData(this.id))||void 0===e?void 0:e.filter((e=>e.enabled)).length),u=(e,t)=>{const{sectorLabel:u,outerRadius:p,startAngle:g,endAngle:m}=t;let v=!1;if(u&&0!==p){const f=i*(1-l)+p*l+a;e.fill=d,e.fontStyle=o,e.fontWeight=s,e.fontSize=n,e.fontFamily=r,e.text=u.text;!c&&h?(e.x=0,e.y=0):(e.x=t.midCos*f,e.y=t.midSin*f),e.textAlign="center",e.textBaseline="middle";const y=e.getBBox(),b=[[y.x,y.y],[y.x+y.width,y.y],[y.x+y.width,y.y+y.height],[y.x,y.y+y.height]],C={startAngle:g,endAngle:m,innerRadius:i,outerRadius:p};b.every((e=>{let[t,i]=e;return D_(t,i,C)}))&&(v=!0)}e.visible=v};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius()}pickNodeClosestDatum(e){return K_(this,e)}getTooltipContent(e){var t,i,n;const{id:o,dataModel:s,processedData:r,properties:a}=this,{legendItemKey:d,calloutLabelKey:c,calloutLabelName:h,sectorLabelKey:u,sectorLabelName:p,angleKey:g,angleName:m,radiusKey:v,radiusName:f,tooltip:y}=a,b=this.properties.title.text;if(!s||!r||0===r.rawData.length)return;const{datumIndex:C}=e,x=r.rawData[C],{angleRawValues:w,legendItemValues:S,calloutLabelValues:M,sectorLabelValues:D}=this.getProcessedDataValues(s,r),k=w[C],I=null!==(t=null!==(i=null!==(n=null===S||void 0===S?void 0:S[C])&&void 0!==n?n:c===g||null===M||void 0===M?void 0:M[C])&&void 0!==i?i:u===g||null===D||void 0===D?void 0:D[C])&&void 0!==t?t:m;return y.formatTooltip({title:b,symbol:this.legendItemSymbol(C),data:[{label:I,fallbackLabel:g,value:String(k)}]},l({seriesId:o,datum:x,title:m,legendItemKey:d,calloutLabelKey:c,calloutLabelName:h,sectorLabelKey:u,sectorLabelName:p,angleKey:g,angleName:m,radiusKey:v,radiusName:f},this.getSectorFormat(x,C,!1)))}legendItemSymbol(e){var t;const i=null===(t=this.processedData)||void 0===t?void 0:t.rawData[e],n=this.getSectorFormat(i,e,!1);return{marker:{fill:n.fill,stroke:n.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}}getLegendData(e){var t;const{id:i,visible:n,processedData:o,dataModel:s,ctx:{legendManager:r}}=this;if(!s||!o||"category"!==e)return[];const{angleKey:a,calloutLabelKey:l,sectorLabelKey:d,legendItemKey:c,showInLegend:h}=this.properties;if(!c&&(!l||l===a)&&(!d||d===a))return[];const{calloutLabelValues:u,sectorLabelValues:p,legendItemValues:g,angleRawValues:m}=this.getProcessedDataValues(s,o),v=(null===(t=this.properties.title)||void 0===t?void 0:t.showInLegend)&&this.properties.title.text,f=[],y=this.properties.hideZeroValueSectorsInLegend;for(let S=0;S<o.rawData.length;S++){var b,C;const e=o.rawData[S],t=m[S];if(y&&0===t)continue;const s=[];v&&s.push(v);const M=this.getLabels(e,2*Math.PI,2*Math.PI,!1,null===u||void 0===u?void 0:u[S],null===p||void 0===p?void 0:p[S],null===g||void 0===g?void 0:g[S]);if(c&&void 0!==M.legendItem)s.push(M.legendItem.text);else if(l&&l!==a&&void 0!==(null===(b=M.calloutLabel)||void 0===b?void 0:b.text)){var x;s.push(null===(x=M.calloutLabel)||void 0===x?void 0:x.text)}else if(d&&d!==a&&void 0!==(null===(C=M.sectorLabel)||void 0===C?void 0:C.text)){var w;s.push(null===(w=M.sectorLabel)||void 0===w?void 0:w.text)}0!==s.length&&f.push({legendType:"category",id:i,datum:e,itemId:S,seriesId:i,enabled:n&&r.getItemEnabled({seriesId:i,itemId:S}),label:{text:s.join(" - ")},symbol:this.legendItemSymbol(S),legendItemName:null!=c?e[c]:void 0,hideInLegend:!h})}return f}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:n}}=this;e.forEach(((e,n)=>i.toggleItem({enabled:e,seriesId:t,itemId:n}))),i.update(),n.update(4)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=j_(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);iM(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,((e,t)=>this.getDatumId(t))),pG(this,"callout",t,this.calloutLabelSelection),pG(this,"sector",t,this.labelSelection),pG(this,"highlight",t,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,i,n,o;const{itemSelection:s,highlightSelection:r,phantomSelection:a,processedData:l,radiusScale:d,previousRadiusScale:c}=this,{animationManager:h}=this.ctx,u=null===l||void 0===l||null===(e=l.reduced)||void 0===e||null===(e=e.diff)||void 0===e?void 0:e[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!==(t=null===u||void 0===u?void 0:u.moved.size)&&void 0!==t?t:0),g=(null!==(i=null===l||void 0===l?void 0:l.defs.keys.length)&&void 0!==i?i:0)>0,m=null===(n=null===l||void 0===l||null===(o=l.reduced)||void 0===o||null===(o=o.animationValidation)||void 0===o?void 0:o.uniqueKeys)||void 0===n||n;p&&g&&m||this.ctx.animationManager.skipCurrentBatch();const v=j_(!1,this.properties.rotation,d,c);iM(this.id,"nodes",h,[s,r,a],v.nodes,((e,t)=>this.getDatumId(t)),u),pG(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),pG(this,"sector",this.ctx.animationManager,this.labelSelection),pG(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:n,previousRadiusScale:o}=this,{animationManager:s}=this.ctx,r=j_(!1,this.properties.rotation,n,o);iM(this.id,"nodes",s,[e,t,i],r.nodes,((e,t)=>this.getDatumId(t))),gG(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),gG(this,"sector",this.ctx.animationManager,this.labelSelection),gG(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var t;const{calloutLabelKey:i,sectorLabelKey:n,legendItemKey:o}=this.properties;if(null!==(t=this.processedData)&&void 0!==t&&null!==(t=t.reduced)&&void 0!==t&&null!==(t=t.animationValidation)&&void 0!==t&&t.uniqueKeys)return o?e[o]:i?e[i]:n?e[n]:void 0}getDatumId(e){const{datumIndex:t}=e,i=this.getDatumIdFromData(e.datum);return null!=i?String(i):"".concat(t)}};rV.className="PieSeries",rV.type="pie";var aV={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new rV(e),tooltipDefaults:{range:"exact"},themeTemplate:Q_,paletteFactory:J_};function lV(){nE.register(NO,eB,xF,_z,r_,u_,y_,w_,$_,aV,m_);for(const e of[MO,eE,IO,xO,kO])oP.register(e.type,{moduleFactory:t=>new e(t),hidden:e===xO})}function dV(){for(const e of nE.modules){if("enterprise"!==e.packageType||aP(e)||cM.errorOnce("Unexpected enterprise module registered: "+e.identifier),"root"===e.type&&e.themeTemplate)for(const t of e.chartTypes)pP.set(t,e.themeTemplate);if("series"===e.type){if(e.chartTypes.length>1)throw new Error("AG Charts - Module definition error: ".concat(e.identifier));gP.register(e.identifier,e)}if("series-option"===e.type&&e.themeTemplate)for(const t of e.seriesTypes)gP.setThemeTemplate(t,e.themeTemplate);if("axis-option"===e.type&&e.themeTemplate)for(const t of e.axisTypes){const i=oP.getThemeTemplate(t),n=ES(e.themeTemplate,i);oP.setThemeTemplate(t,n)}"axis"===e.type&&oP.register(e.identifier,e),"legend"===e.type&&lP.register(e.identifier,e)}if(nE.hasEnterpriseModules()){const e=sP.filter((e=>{let{useCount:t}=e;return null==t||0===t}));e.length>0&&cM.errorOnce("Enterprise modules expected but not registered: ",e)}}var cV=class extends QN{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const{nodes:e}=this.getOptions();this.series.forEach((t=>{(function(e){return"sankey"===e.type||"chord"===e.type})(t)&&t.setChartNodes(e)}))}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:n}=e;n.shrink(this.seriesArea.padding.toJson());const o=n.clone();this.seriesRect=o,this.animationRect=o,t.visible=this.series.some((e=>e.visible));for(const s of[t,i])s.translationX=Math.floor(o.x),s.translationY=Math.floor(o.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:o,paddedRect:o}})}};cV.className="FlowProportionChart",cV.type="flow-proportion";var hV=class extends XT{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};mw([hD(ik(["polygon","circle"],"a polar axis shape"))],hV.prototype,"shape",2),mw([hD(MD)],hV.prototype,"innerRadiusRatio",2);var uV=class extends QN{getChartType(){return"gauge"}updateRadialGauge(e,t){const i=this.axes.find((e=>"x"===e.direction));if(!(i instanceof hV))return;i.computeRange();const n=e.x,o=n+e.width,s=e.y,r=s+e.height,[a,l]=i.range,d=OI(l-a)>Math.PI,c=d||GI(1.5*Math.PI,a,l),h=d||GI(0*Math.PI,a,l),u=d||GI(.5*Math.PI,a,l),p=d||GI(1*Math.PI,a,l);let g,m;g=p&&!h?"right":!p&&h?"left":"center",m=c&&!u?"bottom":!c&&u?"top":"middle";const v=M_({startAngle:a,endAngle:l,innerRadius:0,outerRadius:.5}),f=2*-(v.x+v.width/2),y=2*-(v.y+v.height/2),{minimumRadius:b=0,maximumRadius:C}=t,x=Math.max(.5*Math.min(e.width/v.width,e.height/v.height),0);let w=Math.min(null!==C&&void 0!==C?C:1/0,Math.max(x,null!==b&&void 0!==b?b:0));for(let S=0;S<8;S+=1){const t=w<=b||7===S,a=e.x+e.width/2+f*w,l=e.y+e.height/2+y*w;i.translation.x=a,i.translation.y=l,i.gridLength=w,i.calculateLayout();const d=i.computeLabelsBBox({hideWhenNecessary:t},e);if(t)break;let c=0;if(null!=d){const e=d.x+a,t=e+d.width,i=d.y+l,h=i+d.height;c=Math.max(s-i,n-e,h-r,t-o,0)}if(!(c>0))break;w=Math.max(w-c,b)}i.translation.x=e.x+e.width/2+f*w,i.translation.y=e.y+e.height/2+y*w,t.centerX=e.width/2+f*w,t.centerY=e.height/2+y*w,t.radius=w,t.textAlign=g,t.verticalAlign=m,(0===w||w>x)&&cM.warnOnce("There was insufficient space to display the Radial Gauge.")}updateLinearGauge(e,t){const i=this.axes.find((e=>"x"===e.direction)),n=this.axes.find((e=>"y"===e.direction));if(!(i instanceof JT))return e;if(!(n instanceof JT))return e;const{horizontal:o,thickness:s}=t;let r=0,a=0;const l=new SO;l.domain=[0,100],l.range=o?i.range:n.range;const d=l.ticks();o?r=t.computeInset("x",d):a=t.computeInset("y",d);const c=e.width-Math.abs(r),h=e.height-Math.abs(a),u=Math.max(o?c:s,0),p=Math.max(o?s:h,0),g=e.x+(c-u)/2+Math.max(r,0),m=e.y+(h-p)/2-Math.min(a,0);i.range=[0,u],i.gridLength=u,i.calculateLayout(),i.translation.x=g,i.translation.y=m+("bottom"===i.position?s:0),n.range=[0,p],n.gridLength=p,n.calculateLayout(),n.translation.x=g+("right"===n.position?s:0),n.translation.y=m,t.originX=g-e.x,t.originY=m-e.y,0!==u&&0!==p||cM.warnOnce("There was insufficient space to display the Linear Gauge.")}performLayout(e){const{seriesRoot:t,annotationRoot:i,series:n,seriesArea:o}=this,{layoutBox:s}=e,r=s.clone();s.shrink(o.padding.toJson());const a=this.series[0];!function(e){return"radial-gauge"===e.type}(a)?function(e){return"linear-gauge"===e.type}(a)&&this.updateLinearGauge(s,a):this.updateRadialGauge(s,a),this.axes.forEach((e=>e.update())),this.seriesRect=r.clone().translate(r.x-s.x,r.y-s.y),this.animationRect=s,t.visible=n.some((e=>e.visible));for(const l of[t,i])l.translationX=Math.floor(s.x),l.translationY=Math.floor(s.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:r,paddedRect:s}})}getAriaLabel(){const e=[],t=this.getCaptionText();0!==t.length&&e.push(t);for(const n of this.series)e.push(n.getCaptionText());const i=e.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};uV.className="GaugeChart",uV.type="gauge";var pV=class extends QN{constructor(e,t){super(e,t)}getChartType(){return"hierarchy"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:n}=e;n.shrink(this.seriesArea.padding.toJson());const o=n.clone();this.seriesRect=o,this.animationRect=o;for(const s of[t,i])s.translationX=Math.floor(o.x),s.translationY=Math.floor(o.y);t.visible=this.series[0].visible,t.setClipRect(o.clone()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:o}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};pV.className="HierarchyChart",pV.type="hierarchy";var gV=class extends QN{constructor(e,t){super(e,t),this.padding=new aE(40),this.ctx.axisManager.axisGroup.zIndex=5}getChartType(){return"polar"}async performLayout(e){const{layoutBox:t}=e;t.shrink(this.seriesArea.padding.toJson());const i=t.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach((e=>e.update())),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(e,t,i,n){var o;const s=this.axes.find((e=>"x"===e.direction)),r=this.axes.find((e=>"y"===e.direction));if(!(s instanceof hV)||!(r instanceof hV))return;const a=s.scale,l=r.innerRadiusRatio;s.innerRadiusRatio=l,s.computeRange(),s.gridLength=n,r.gridAngles=null===(o=a.ticks)||void 0===o?void 0:o.call(a).map((e=>a.convert(e))),r.gridRange=s.range,r.range=[n,n*l],[s,r].forEach((n=>{n.translation.x=e.x+t,n.translation.y=e.y+i,n.calculateLayout()}))}async computeCircle(e){var t=this;const i=this.series.filter(mV),n=this.axes.filter(vV),o=(t,n,o)=>{this.updateAxes(e,t,n,o),i.forEach((e=>{e.centerX=t,e.centerY=n,e.radius=o}));const s=i.filter((e=>"donut"===e.type||"pie"===e.type));if(s.length>1){const e=s.map((e=>{const t=e.getInnerRadius();return{series:e,innerRadius:t}})).sort(((e,t)=>e.innerRadius-t.innerRadius));e.at(-1).series.surroundingRadius=void 0;for(let t=0;t<e.length-1;t++)e[t].series.surroundingRadius=e[t+1].innerRadius}},s=e.width/2,r=e.height/2,a=Math.max(0,Math.min(e.width,e.height)/2);let l=a;o(s,r,l);const d=async function(){let{hideWhenNecessary:d=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=[];for(const t of Mw(n,i)){const i=await t.computeLabelsBBox({hideWhenNecessary:d},e);i&&c.push(i)}if(0===c.length)return void o(s,r,a);const h=Ww.merge(c),u=t.refineCircle(h,l,e);o(u.centerX,u.centerY,u.radius),l=u.radius};await d(),await d(),await d(),await d({hideWhenNecessary:!0}),await d({hideWhenNecessary:!0});for(const c of Mw(n,i))await c.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:l,centerX:s,centerY:r}}refineCircle(e,t,i){const n=-t,o=-t,s=t,r=t;let a=Math.max(0,n-e.x),l=Math.max(0,o-e.y),d=Math.max(0,e.x+e.width-s),c=Math.max(0,e.y+e.height-r);a=d=Math.max(a,d),l=c=Math.max(l,c);const h=i.width-a-d,u=i.height-l-c;let p=Math.min(h,u)/2;const g=.5*i.width/2,m=.5*i.height/2,v=Math.min(g,m);if(p<v){p=v;const e=a+d;if(2*p+(l+c)>i.height){const e=i.height-2*p;2*Math.min(l,c)>e?(l=e/2,c=e/2):l>c?l=e-c:c=e-l}if(2*p+e>i.width){const e=i.width-2*p;2*Math.min(a,d)>e?(a=e/2,d=e/2):a>d?a=e-d:d=e-a}}const f=a+2*p+d,y=l+2*p+c;return{centerX:(i.width-f)/2+a+p,centerY:(i.height-y)/2+l+p,radius:p}}};function mV(e){return e instanceof Z_}function vV(e){return e instanceof hV}gV.className="PolarChart",gV.type="polar";var fV=class extends QN{constructor(e,t){super(e,t)}getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:n}=e,o=n.clone();n.shrink(this.seriesArea.padding.toJson()),this.seriesRect=n,this.animationRect=n;for(const s of[t,i])s.translationX=Math.floor(n.x),s.translationY=Math.floor(n.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:n}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};fV.className="StandaloneChart",fV.type="standalone";var yV=Math.PI/180,bV=e=>e*yV,CV=e=>-Math.log(Math.tan(.25*Math.PI+e*yV*.5)),xV=e=>e/yV,wV=e=>(Math.atan(Math.exp(-e))-.25*Math.PI)/(.5*yV),SV=class e{constructor(t,i){this.domain=t,this.range=i,this.type="mercator",this.bounds=e.bounds(t)}static bounds(e){const[[t,i],[n,o]]=e,s=bV(t),r=CV(i),a=bV(n),l=CV(o);return new Ww(Math.min(s,a),Math.min(r,l),Math.abs(a-s),Math.abs(l-r))}static fixedScale(){return new e([[xV(0),wV(0)],[xV(1),wV(1)]],[[0,0],[1,1]])}convert(e){let[t,i]=e;const[[n,o],[s,r]]=this.range,a=(s-n)/this.bounds.width,l=(r-o)/this.bounds.height;return[(bV(t)-this.bounds.x)*a+n,(CV(i)-this.bounds.y)*l+o]}invert(e){let[t,i]=e;const[[n,o],[s,r]]=this.range,a=(s-n)/this.bounds.width,l=(r-o)/this.bounds.height;return[xV((t-n)/a+this.bounds.x),wV((i-o)/l+this.bounds.y)]}};function MV(e){return"map-shape"===e.type||"map-line"===e.type||"map-marker"===e.type||"map-shape-background"===e.type||"map-line-background"===e.type}var DV=class extends QN{constructor(e,t){super(e,t),this.xAxis=new MO(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new MO(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const{topology:e}=this.getOptions();this.series.forEach((t=>{MV(t)&&t.setChartTopology(e)}))}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:n}=e;n.shrink(this.seriesArea.padding.toJson());const o=n.clone();this.seriesRect=o,this.animationRect=o;const s=this.series.filter(MV),r=s.reduce(((e,t)=>{if(!t.visible)return e;const i=t.topologyBounds;return null==i?e:null==e?i:(e.merge(i),e)}),void 0);let a;if(null!=r){const{lon0:e,lat0:t,lon1:i,lat1:n}=r,s=[[e,t],[i,n]],l=SV.bounds(s),{width:d,height:c}=o,h=Math.min(d/l.width,c/l.height),u=l.width*h,p=l.height*h,g=(d-u)/2,m=(c-p)/2,v=g,f=m,y=g+u,b=m+p,C=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),x=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),w=(y-v)/(C.max-C.min),S=v-w*C.min,M=(b-f)/(1-x.min-(1-x.max)),D=f-M*(1-x.max);a=new SV(s,[[S,D],[S+w,D+M]])}s.forEach((e=>{e.scale=a}));const l=this.series.some((e=>e.visible));t.visible=l;for(const d of[t,i])d.translationX=Math.floor(o.x),d.translationY=Math.floor(o.y),d.setClipRect(o.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:l,rect:o,paddedRect:o}})}};DV.className="TopologyChart",DV.type="topology";var kV={isEnterprise:!1},IV=Symbol("IGNORED_PROP");function AV(e,t){const i={};for(const[n,o]of Object.entries(t))o!==IV&&Object.hasOwn(e,n)&&(i[n]=o);return i}function TV(e,t){if(null==t)return e;const{targets:i}=t;return null!=(e=ES(e,n(t,$x))).targets&&null!=i&&(e.targets=RS(e.targets,i)),e}function EV(e,t){if(vS(e))return t(e)}var RV=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"];var LV="range-area";function PV(e,t){return[l(l({type:"candlestick",focusPriority:0},e),t)]}function NV(e,t){return{fill:EV(t,(t=>{var i;return null===(i=t.overrides)||void 0===i||null===(i=i[e])||void 0===i||null===(i=i.series)||void 0===i?void 0:i.fill})),stroke:EV(t,(t=>{var i;return null===(i=t.overrides)||void 0===i||null===(i=i[e])||void 0===i||null===(i=i.series)||void 0===i?void 0:i.stroke}))}}var FV={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:HB,lineDash:[0],label:{enabled:!1}}},OV=l(l({},FV),{},{nice:!1}),BV={position:{type:"sparkline"}},GV={style:[{stroke:vB}],width:2},zV={number:{gridLine:GV},time:{gridLine:GV},category:{gridLine:GV}},_V={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:l(l({},OV),{},{interval:{values:[0]}}),log:l({},OV),time:l({},OV),category:l({},FV)}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:l(l({},BV),{},{range:"nearest"}),axes:zV},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3},tooltip:BV}},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4,tooltip:BV}}}},VV=MF((function(e,t){if("string"===typeof e)return l(l({},t),{},{baseTheme:e});if(null!=e)return l(l({},e),{},{baseTheme:VV(e.baseTheme,t)});return t}));function HV(e){if(Array.isArray(e)&&0!==e.length){const t=e[0];if("number"===typeof t){return{data:e.map(((e,t)=>({x:t,y:e}))),series:[{xKey:"x",yKey:"y"}],datumKey:"y"}}if(Array.isArray(t)){return{data:e.map((e=>({x:e[0],y:e[1],datum:e}))),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}}return{data:e}}function WV(e,t,i){var n;const o={};var s,r,a;null!=(null===e||void 0===e?void 0:e.stroke)&&(o.style=[{stroke:null===e||void 0===e?void 0:e.stroke}],null!==(s=o.enabled)&&void 0!==s||(o.enabled=!0));null!=(null===e||void 0===e?void 0:e.strokeWidth)&&(o.width=null===e||void 0===e?void 0:e.strokeWidth,null!==(r=o.enabled)&&void 0!==r||(o.enabled=!0));"bar"===i.type&&"horizontal"!==i.direction&&(null!==(a=o.enabled)&&void 0!==a||(o.enabled=!0));return null!=(null===e||void 0===e?void 0:e.visible)&&(o.enabled=e.visible),null!==(n=o.enabled)&&void 0!==n||(o.enabled=t),o}var jV=MF(((e,t,i)=>n=>{var o,s;const r=n.datum[n.xKey],a=n.datum[n.yKey],l=null!=i?n.datum[i]:n.datum,d=null===t||void 0===t||null===(o=t.renderer)||void 0===o?void 0:o.call(t,{context:e,datum:l,xValue:r,yValue:a});if("string"===typeof d)return d;const c=null===d||void 0===d?void 0:d.title,h=null===d||void 0===d?void 0:d.content;return null!=c&&null!=h?{heading:c,title:void 0,data:[{label:void 0,value:h}]}:{heading:null!==(s=null!==c&&void 0!==c?c:h)&&void 0!==s?s:a.toFixed(2),title:void 0,data:[]}}));var UV={"price-volume":function(e,t,i){var o,s;const{dateKey:r="date",highKey:a="high",openKey:d="open",lowKey:c="low",closeKey:h="close",volumeKey:u="volume",chartType:p="candlestick",navigator:g=!1,volume:m=!0,rangeButtons:v=!0,statusBar:f=!0,toolbar:y=!0,zoom:b=!0,theme:C,data:x}=e,w=n(e,ew),S=function(e,t,i,n,o,s,r){const a={xKey:i,openKey:s,closeKey:r,highKey:n,lowKey:o},d={xKey:i,yKey:r},c={pickOutsideVisibleMinorAxis:!0};switch(null!==t&&void 0!==t?t:"candlestick"){case"ohlc":return function(e,t){return[l(l({type:"ohlc",focusPriority:0},e),t)]}(c,a);case"line":return function(e,t,i){var n,o;return[l(l(l({type:"line",focusPriority:0},e),i),{},{stroke:null!==(n=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.stroke})))&&void 0!==n?n:LB,marker:null!==(o=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.marker})))&&void 0!==o?o:{enabled:!1}})]}(c,e,d);case"step-line":return function(e,t,i){var n,o,s;return[l(l(l({type:"line",focusPriority:0},e),i),{},{stroke:null!==(n=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.stroke})))&&void 0!==n?n:LB,interpolation:null!==(o=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.interpolation})))&&void 0!==o?o:{type:"step"},marker:null!==(s=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.marker})))&&void 0!==s?s:{enabled:!1}})]}(c,e,d);case"hlc":return function(e,t,i,n){var o,s,r,a,d,c,h,u,p,g,m;let{xKey:v,highKey:f,closeKey:y,lowKey:b}=n;const C=NV(LV,t);return[l(l({type:LV,focusPriority:0},e),{},{xKey:v,yHighKey:f,yLowKey:y,fill:null!==(o=C.fill)&&void 0!==o?o:EB,stroke:null!==(s=C.stroke)&&void 0!==s?s:AB,fillOpacity:null!==(r=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t["range-area"])||void 0===t||null===(t=t.series)||void 0===t?void 0:t.fillOpacity})))&&void 0!==r?r:.3,strokeWidth:null!==(a=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t["range-area"])||void 0===t||null===(t=t.series)||void 0===t?void 0:t.strokeWidth})))&&void 0!==a?a:2}),l(l({type:LV,focusPriority:0},e),{},{xKey:v,yHighKey:y,yLowKey:b,fill:null!==(d=C.fill)&&void 0!==d?d:RB,stroke:null!==(c=C.stroke)&&void 0!==c?c:TB,fillOpacity:null!==(h=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t["range-area"])||void 0===t||null===(t=t.series)||void 0===t?void 0:t.fillOpacity})))&&void 0!==h?h:.3,strokeWidth:null!==(u=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t["range-area"])||void 0===t||null===(t=t.series)||void 0===t?void 0:t.strokeWidth})))&&void 0!==u?u:2}),l(l(l({type:"line"},e),i),{},{stroke:null!==(p=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.stroke})))&&void 0!==p?p:zB,strokeWidth:null!==(g=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.strokeWidth})))&&void 0!==g?g:2,marker:null!==(m=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.line)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.marker})))&&void 0!==m?m:{enabled:!1}})]}(c,e,d,a);case"high-low":return function(e,t,i){var n,o;let{xKey:s,highKey:r,lowKey:a}=i;const d=NV("range-bar",t);return[l(l({type:"range-bar"},e),{},{xKey:s,yHighKey:r,yLowKey:a,fill:null!==(n=d.fill)&&void 0!==n?n:PB,stroke:null!==(o=d.stroke)&&void 0!==o?o:LB,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0})]}(c,e,a);case"candlestick":return PV(c,a);case"hollow-candlestick":return function(e,t,i){var n,o;const s=EV(t,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.candlestick)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.item}));return[l(l(l({type:"candlestick",focusPriority:0},e),i),{},{item:{up:{fill:null!==(n=null===s||void 0===s||null===(o=s.up)||void 0===o?void 0:o.fill)&&void 0!==n?n:"transparent"}}})]}(c,e,a);default:return cM.warnOnce("unknown chart type: ".concat(t,"; expected one of: ").concat(RV.join(", "))),PV(c,a)}}(C,p,r,a,c,d,h),M=function(e,t,i,n,o,s){var r;if(!o)return[];const a=EV(e,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.bar)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.fill})),d=a?{fill:a}:{itemStyler(e){let{datum:o}=e;const{up:s,down:r}=t().palette;return{fill:o[i]<o[n]?null===s||void 0===s?void 0:s.fill:null===r||void 0===r?void 0:r.fill}}};return[l(l({type:"bar",xKey:"date",yKey:s,tooltip:{enabled:!1},highlight:{enabled:!1},fillOpacity:null!==(r=EV(e,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.bar)||void 0===t||null===(t=t.series)||void 0===t?void 0:t.fillOpacity})))&&void 0!==r?r:.5},d),{},{focusPriority:1,fastDataProcessing:!0})]}(C,i,d,h,m,u),D={navigator:l({enabled:g},m?{miniChart:{enabled:g,series:[{type:"line",xKey:r,yKey:u,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null)},k={annotations:{enabled:y,toolbar:{enabled:y},optionsToolbar:{enabled:y},data:x,xKey:r,volumeKey:m?u:void 0}},I=f?{statusBar:{enabled:!0,data:x,highKey:a,openKey:d,lowKey:c,closeKey:h,volumeKey:m?u:void 0}}:null,A={zoom:{enabled:b,enableIndependentAxes:!0}},T={ranges:{enabled:v}},E=m?[{type:"number",position:"left",keys:[u],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"}}]:[];return l(l(l(l(l(l({theme:l({baseTheme:"string"===typeof C?C:"ag-financial"},ES("object"===typeof C?C:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:y}}}})),animation:{enabled:!1},legend:{enabled:!1},series:[...M,...S],seriesArea:{clip:!0},axes:[{type:"number",position:"right",keys:[d,h,a,c],interval:{maxSpacing:null!==(o=EV(C,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.common)||void 0===t||null===(t=t.axes)||void 0===t||null===(t=t.number)||void 0===t||null===(t=t.interval)||void 0===t?void 0:t.maxSpacing})))&&void 0!==o?o:45},label:{format:null!==(s=EV(C,(e=>{var t;return null===(t=e.overrides)||void 0===t||null===(t=t.common)||void 0===t||null===(t=t.axes)||void 0===t||null===(t=t.number)||void 0===t||null===(t=t.label)||void 0===t?void 0:t.format})))&&void 0!==s?s:".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...E,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:x},k),D),I),A),T),w)},gauge:function(e,t){if(function(e){return"radial-gauge"===e.type}(e)){return function(e){const{animation:t,background:i,container:o,contextMenu:s,footnote:r,height:a,listeners:d,locale:c,minHeight:h,minWidth:u,padding:p,subtitle:g,theme:m,title:v,width:f,type:y,cursor:b,nodeClickRange:C,tooltip:x,value:w,scale:S={},startAngle:M,endAngle:D,highlightStyle:k,segmentation:I,bar:A,needle:T,targets:E,outerRadius:R,innerRadius:L,outerRadiusRatio:P,innerRadiusRatio:N,cornerRadius:F,cornerMode:O,label:B,secondaryLabel:G,spacing:z}=e,_=n(e,qx),{fills:V,fillMode:H,fill:W,fillOpacity:j,stroke:U,strokeWidth:K,strokeOpacity:Y,lineDash:Z,lineDashOffset:X,min:q=0,max:Q=1,interval:J={},label:$={}}=S,ee=AV(e,{animation:t,background:i,container:o,contextMenu:s,footnote:r,height:a,listeners:d,locale:c,minHeight:h,minWidth:u,padding:p,subtitle:g,theme:m,title:v,width:f}),te=AV(S,{fills:V,fillMode:H,fill:W,fillOpacity:j,stroke:U,strokeWidth:K,strokeOpacity:Y,lineDash:Z,lineDashOffset:X}),ie=AV(e,l({startAngle:IV,endAngle:IV,needle:null!=T?l({enabled:!0},T):IV,scale:te,type:y,cursor:b,nodeClickRange:C,listeners:d,tooltip:x,value:w,highlightStyle:k,segmentation:I,bar:A,targets:E,outerRadius:R,innerRadius:L,outerRadiusRatio:P,innerRadiusRatio:N,cornerRadius:F,cornerMode:O,label:B,secondaryLabel:G,spacing:z},_)),ne=[{type:"angle-number",min:q,max:Q,startAngle:M,endAngle:D,interval:null!==J&&void 0!==J?J:{},label:null!==$&&void 0!==$?$:{}},{type:"radius-number"}];return l(l({},ee),{},{series:[ie],axes:ne})}(TV(e,t))}if(function(e){return"linear-gauge"===e.type}(e)){return function(e){const{animation:t,background:i,container:o,contextMenu:s,footnote:r,height:a,listeners:d,locale:c,minHeight:h,minWidth:u,padding:p,subtitle:g,theme:m,title:v,width:f,type:y,cursor:b,nodeClickRange:C,tooltip:x,value:w,scale:S={},direction:M="vertical",thickness:D,highlightStyle:k,segmentation:I,bar:A,targets:T,cornerRadius:E,cornerMode:R,label:L}=e,P=n(e,Qx),{fills:N,fillMode:F,fill:O,fillOpacity:B,stroke:G,strokeWidth:z,strokeOpacity:_,lineDash:V,lineDashOffset:H,min:W=0,max:j=1,interval:U={},label:K={}}=S,Y=AV(e,{animation:t,background:i,container:o,contextMenu:s,footnote:r,height:a,listeners:d,locale:c,minHeight:h,minWidth:u,padding:p,subtitle:g,theme:m,title:v,width:f}),Z=AV(S,{fills:N,fillMode:F,fill:O,fillOpacity:B,stroke:G,strokeWidth:z,strokeOpacity:_,lineDash:V,lineDashOffset:H}),X=AV(e,l({scale:Z,type:y,cursor:b,nodeClickRange:C,listeners:d,tooltip:x,value:w,direction:M,thickness:D,highlightStyle:k,segmentation:I,bar:A,targets:T,cornerRadius:E,cornerMode:R,label:L},P)),{placement:q}=K;let Q,J;const $="horizontal"===M;$?(Q="before"===q?"top":"bottom",J="left"):(Q="after"===q?"right":"left",J="bottom");const ee={type:"number",position:Q,min:W,max:j,reverse:!$,interval:U,label:n(K,Jx),nice:!1},te={type:"number",position:J,min:0,max:1,label:{enabled:!1}},ie=$?[ee,te]:[te,ee];return l(l({},Y),{},{series:[X],axes:ie})}(TV(e,t))}const{animation:i,background:o,container:s,contextMenu:r,footnote:a,height:d,listeners:c,locale:h,minHeight:u,minWidth:p,padding:g,subtitle:m,theme:v,title:f,width:y}=e;return AV(e,{animation:i,background:o,container:s,contextMenu:r,footnote:a,height:d,listeners:c,locale:h,minHeight:u,minWidth:p,padding:g,subtitle:m,theme:v,title:f,width:y})},sparkline:function(e){const{background:t,container:i,height:o,listeners:s,locale:r,minHeight:a,minWidth:d,padding:c,width:h,theme:u,data:p,crosshair:g,axis:m,min:v,max:f,tooltip:y,context:b}=e,C=n(e,tw),x=AV(e,{background:t,container:i,height:o,listeners:s,locale:r,minHeight:a,minWidth:d,padding:c,width:h,tooltip:IV,context:IV,data:IV,crosshair:IV,axis:IV,min:IV,max:IV,theme:IV}),{data:w,series:[S]=[],datumKey:M}=HV(p),D=C;null!=S&&Object.assign(D,S),D.tooltip=l(l({},y),{},{renderer:jV(b,y,M)}),x.theme=VV(u,_V),x.data=w,x.series=[D];const k="bar"!==D.type||"horizontal"!==D.direction,[I,A]=k?["bottom","left"]:["left","bottom"],T=l(l({},function(e,t){switch(null===e||void 0===e?void 0:e.type){case"number":{const{type:t,visible:i,stroke:n,strokeWidth:o,min:s,max:r,reverse:a}=e;return AV(e,{type:t,reverse:a,min:s,max:r})}case"time":{const{type:t,visible:i,stroke:n,strokeWidth:o,min:s,max:r,reverse:a}=e;return AV(e,{type:t,reverse:a,min:s,max:r})}case"category":{const{type:t,visible:i,stroke:n,strokeWidth:o,paddingInner:s,paddingOuter:r,reverse:a}=e;return AV(e,{type:t,reverse:a,paddingInner:s,paddingOuter:r})}}return{type:t}}(m,"category")),{},{position:I},AV(e,{crosshair:g})),E=l({type:"number",gridLine:WV(m,!1,e),position:A},AV(e,{min:v,max:f}));return x.axes=k?[E,T]:[T,E],x}},KV={sparkline:HV};function YV(e,t){let i=[];const n=IP(e),o=CP(e),s=o?hP.get(o):"unknown";for(const c of sP)if("unknown"===s||c.chartTypes.includes(s))if("root"===c.type||"legend"===c.type){const t=e[c.optionsKey];if(null==t)continue;c.optionsInnerKey?t[c.optionsInnerKey]&&(i.push("".concat(c.optionsKey,".").concat(c.optionsInnerKey)),delete t[c.optionsInnerKey]):(i.push(c.optionsKey),delete e[c.optionsKey])}else if("axis"===c.type){var r;if(!("axes"in e)||null===(r=e.axes)||void 0===r||!r.some((e=>e.type===c.identifier)))continue;i.push("axis[type=".concat(c.identifier,"]")),e.axes=e.axes.filter((e=>e.type!==c.identifier))}else if("axis-option"===c.type){var a;if(!("axes"in e)||null===(a=e.axes)||void 0===a||!a.some((e=>e[c.optionsKey])))continue;i.push("axis.".concat(c.optionsKey)),e.axes.forEach((e=>{e[c.optionsKey]&&delete e[c.optionsKey]}))}else if("series"===c.type){var l;if(c.community)continue;if(null===(l=e.series)||void 0===l||!l.some((e=>e.type===c.identifier)))continue;i.push("series[type=".concat(c.identifier,"]")),e.series=e.series.filter((e=>e.type!==c.identifier))}else if("series-option"===c.type){var d;if(null===(d=e.series)||void 0===d||!d.some((e=>e[c.optionsKey])))continue;i.push("series.".concat(c.optionsKey)),e.series.forEach((e=>{e[c.optionsKey]&&delete e[c.optionsKey]}))}if(i.length&&!t){n&&(i=["AgCharts.createGauge"]);let t="ag-charts-enterprise",o="https://ag-grid.com/charts/javascript/installation/";"integrated"===e.mode&&(t="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",o="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),cM.warnOnce(["unable to use these enterprise features as '".concat(t,"' has not been loaded:"),"",...i,"","See: ".concat(o)].join("\n"))}}var ZV=Symbol("description"),XV=Symbol("required");function qV(e,t,i){const{errors:n}=JV(e,t,i);for(const{message:o}of n)cM.warn(o);return 0===n.length}function QV(e,t,i){const n=bS(i)?i:i[ZV],o=n?"; expecting ".concat(n):"",s=e?"Option `".concat(e,"`"):"Value";return"".concat(s," cannot be set to `").concat(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;switch(typeof e){case"undefined":return"undefined";case"number":if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";default:return(e=JSON.stringify(e)).length>t?"".concat(e.slice(0,t),"... (+").concat(e.length-t," characters)"):e}}(t),"`").concat(o,", ignoring.")}function JV(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!vS(e))return{valid:null,errors:[{path:i,value:e,message:QV(i,e,"an object")}]};const n=new Set(Object.keys(e)),o=[],s={};function r(e){return cS(t)?"".concat(i,"[").concat(e,"]"):i?"".concat(i,".").concat(e):e}for(const[a,l]of Object.entries(t)){n.delete(a);const t=e[a];if(l[XV]||"undefined"!==typeof t)if(mS(l))l(t)?s[a]=t:o.push({key:a,path:i,value:t,message:QV(r(a),t,l)});else{const e=JV(t,l,r(a));s[a]=e.valid,o.push(...e.errors)}}for(const a of n)o.push({key:a,path:i,unknown:!0,message:"Unknown option `".concat(r(a),"`, ignoring.")});return{valid:s,errors:o}}function $V(e,t){return Object.assign((t=>e(t)),{[ZV]:t})}$V(cS,"an array"),$V(hS,"a boolean"),$V(mS,"a function"),$V(xS,"a number");var eH,tH,iH=$V(vS,"an object"),nH=$V(bS,"a string"),oH=(function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];$V((i=>xS(i)&&(i>e||t&&i===e)),"a number greater than ".concat(t?"or equal to ":"").concat(e))}(0),tH=1,$V((e=>xS(e)&&e>=eH&&e<=tH),"a number between ".concat(eH=0," and ").concat(tH," inclusive")),(e,t)=>$V((t=>cS(t)&&t.every(e)),null!==t&&void 0!==t?t:"".concat(e[ZV]," array")));function sH(e){return null!==e&&void 0!==e&&e.up||null!==e&&void 0!==e&&e.down||null!==e&&void 0!==e&&e.neutral?"user-full":null!==e&&void 0!==e&&e.fills||null!==e&&void 0!==e&&e.strokes?"user-indexed":"inbuilt"}var rH="white",aH={get cartesian(){return{seriesTypes:hP.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:hP.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:hP.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:hP.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:hP.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:hP.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:hP.gaugeTypes,commonOptions:[]}}},lH={"radial-gauge":!0,"linear-gauge":!0};function dH(e){return!0===lH[e]}var cH=Object.values(aH).reduce(((e,t)=>{let{commonOptions:i}=t;return e.concat(i)}),[]),hH=class e{static getAxisDefaults(e){return ES(e,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:hB,color:uB},label:{fontSize:12,fontFamily:hB,spacing:11,color:uB,avoidCollisions:!0},line:{enabled:!0,width:1,stroke:fB},tick:{enabled:!1,width:1,stroke:fB},gridLine:{enabled:!0,style:[{stroke:vB,lineDash:[]}]},crossLines:{enabled:!1,fill:yB,stroke:yB,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:hB,padding:5,color:uB}},crosshair:{enabled:!0}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:CB},padding:{top:MB,right:MB,bottom:MB,left:MB},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:hB,color:uB,wrapping:"hyphenate",layoutStyle:DB,textAlign:kB},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:hB,color:mB,wrapping:"hyphenate",layoutStyle:DB,textAlign:kB},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:hB,color:"rgb(140, 140, 140)",wrapping:"hyphenate",layoutStyle:DB,textAlign:kB},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:uB,fontSize:12,fontFamily:hB}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:uB},inactiveStyle:{fill:mB},highlightStyle:{fill:uB},label:{color:uB}}},tooltip:{enabled:!0,darkTheme:lB,delay:0},overlays:{darkTheme:lB},listeners:{}}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{overrides:t,palette:i}=AA(e),o=this.createChartConfigPerChartType(this.getDefaults()),s={};t&&this.mergeOverrides(o,s,t);const r=this.getDefaultColors(),{fills:a,strokes:d}=r,c=n(r,iw);this.palette=GS(ES(i,l({fills:Object.values(a),strokes:Object.values(d)},c))),this.paletteType=sH(i),this.config=GS(this.templateTheme(o)),this.presets=GS(s)}mergeOverrides(e,t,i){for(const{seriesTypes:n,commonOptions:o}of Object.values(aH)){const t=l({},i.common);for(const e of cH)o.includes(e)||delete t[e];if(t)for(const i of n){const n=i;dH(n)||(e[n]=ES(t,e[n]))}}hP.seriesTypes.forEach((n=>{const o=n,s=i[o];dH(o)?t[o]=s:e[o]=ES(s,e[o])}))}createChartConfigPerChartType(e){for(const[i,{seriesTypes:n}]of Object.entries(aH)){const o=pP.get(i);for(const i of n){var t;null!==(t=e[i])&&void 0!==t||(e[i]=AA(o))}}return e}getDefaults(){const t=(t,i)=>{const n={},o=l(l(l({axes:{}},lP.getThemeTemplates()),this.getChartDefaults()),pP.get(t));for(const r of i){var s;n[r]=ES(gP.getThemeTemplate(r),null!==(s=n[r])&&void 0!==s?s:AA(o));const{axes:t}=n[r];for(const i of oP.keys())t[i]=ES(t[i],oP.getThemeTemplate(i),e.cartesianAxisDefault[i])}return n};return ES(t("cartesian",hP.cartesianTypes),t("polar",hP.polarTypes),t("hierarchy",hP.hierarchyTypes),t("topology",hP.topologyTypes),t("flow-proportion",hP.flowProportionTypes),t("standalone",hP.standaloneTypes),t("gauge",hP.gaugeTypes))}static applyTemplateTheme(e,t,i){if(cS(e))for(let n=0;n<e.length;n++){const t=e[n];"symbol"===typeof t&&null!==i&&void 0!==i&&i.has(t)&&(e[n]=i.get(t))}else for(const[n,o]of Object.entries(e))"symbol"===typeof o&&null!==i&&void 0!==i&&i.has(o)&&(e[n]=i.get(o))}templateTheme(t){const i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?AA(t):t,n=this.getTemplateParameters();return EA(i,e.applyTemplateTheme,void 0,void 0,n),i}getDefaultColors(){return{fills:F_,strokes:O_,up:{fill:F_.GREEN,stroke:O_.GREEN},down:{fill:F_.RED,stroke:O_.RED},neutral:{fill:F_.GRAY,stroke:O_.GRAY},altUp:{fill:F_.BLUE,stroke:O_.BLUE},altDown:{fill:F_.ORANGE,stroke:O_.ORANGE},altNeutral:{fill:F_.GRAY,stroke:O_.GRAY}}}getTemplateParameters(){var e,t,i,n,o,s,r,a,l,d,c,h,u,p,g,m,v,f,y,b,C,x,w,S;const{isEnterprise:M}=kV,D=new Map;D.set(lB,!1),D.set(cB,M),D.set(dB,!M),D.set(hB,"Verdana, sans-serif"),D.set(uB,"#464646"),D.set(pB,"#fff"),D.set(mB,"#8c8c8c"),D.set(vB,"#e0eaf1"),D.set(fB,"#c3c3c3"),D.set(yB,"#464646"),D.set(bB,"#d9d9d9"),D.set(IB,"#ddd"),D.set(gB,rH),D.set(CB,rH),D.set(xB,"black"),D.set(wB,"#00000080"),D.set(VB,[F_.ORANGE,F_.YELLOW,F_.GREEN]),D.set(HB,"#aaa"),D.set(WB,[F_.GREEN,F_.YELLOW,F_.RED]),D.set(jB,["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"]),D.set(MB,20),D.set(DB,"block"),D.set(kB,"center"),D.set(UB,["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),D.set(KB,["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),D.set(ZB,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),D.set(_B,rH),D.set(YB,F_.BLUE),D.set(XB,F_.BLUE),D.set(qB,F_.BLUE),D.set(QB,rH),D.set(JB,"#fafafa"),D.set($B,"#ddd"),D.set(eG,"#000"),D.set(tG,"#181d1f"),D.set(iG,"#e35c5c"),D.set(nG,"#e35c5c"),D.set(oG,"#fafafa"),D.set(sG,"#ddd"),D.set(rG,"#000"),D.set(aG,"top"),D.set(lG,!1);const k=this.getDefaultColors();return D.set(AB,null!==(e=null===(t=this.palette.up)||void 0===t?void 0:t.stroke)&&void 0!==e?e:k.up.stroke),D.set(EB,null!==(i=null===(n=this.palette.up)||void 0===n?void 0:n.fill)&&void 0!==i?i:k.up.fill),D.set(TB,null!==(o=null===(s=this.palette.down)||void 0===s?void 0:s.stroke)&&void 0!==o?o:k.down.stroke),D.set(RB,null!==(r=null===(a=this.palette.down)||void 0===a?void 0:a.fill)&&void 0!==r?r:k.down.fill),D.set(LB,null!==(l=null===(d=this.palette.neutral)||void 0===d?void 0:d.stroke)&&void 0!==l?l:k.neutral.stroke),D.set(PB,null!==(c=null===(h=this.palette.neutral)||void 0===h?void 0:h.fill)&&void 0!==c?c:k.neutral.fill),D.set(NB,null!==(u=null===(p=this.palette.altUp)||void 0===p?void 0:p.stroke)&&void 0!==u?u:k.up.stroke),D.set(OB,null!==(g=null===(m=this.palette.altUp)||void 0===m?void 0:m.fill)&&void 0!==g?g:k.up.fill),D.set(FB,null!==(v=null===(f=this.palette.altDown)||void 0===f?void 0:f.stroke)&&void 0!==v?v:k.down.stroke),D.set(BB,null!==(y=null===(b=this.palette.altDown)||void 0===b?void 0:b.fill)&&void 0!==y?y:k.down.fill),D.set(GB,null!==(C=null===(x=this.palette.altNeutral)||void 0===x?void 0:x.fill)&&void 0!==C?C:k.altNeutral.fill),D.set(zB,null!==(w=null===(S=this.palette.altNeutral)||void 0===S?void 0:S.stroke)&&void 0!==w?w:k.altNeutral.stroke),D}};hH.cartesianAxisDefault={number:hH.getAxisDefaults({line:{enabled:!1}}),log:hH.getAxisDefaults({base:10,line:{enabled:!1},interval:{minSpacing:NaN}}),category:hH.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:lG},crosshair:{enabled:!1}}),"grouped-category":hH.getAxisDefaults({tick:{enabled:!0,stroke:bB},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}}),time:hH.getAxisDefaults({gridLine:{enabled:lG}}),"ordinal-time":hH.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:lG}}),"angle-category":hH.getAxisDefaults({label:{spacing:5},gridLine:{enabled:lG}}),"angle-number":hH.getAxisDefaults({label:{spacing:5},gridLine:{enabled:lG}}),"radius-category":hH.getAxisDefaults({line:{enabled:!1}}),"radius-number":hH.getAxisDefaults({line:{enabled:!1}})};var uH=hH,pH="#192232",gH={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},mH={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},vH=class extends uH{getDefaultColors(){return{fills:gH,strokes:mH,up:{fill:gH.GREEN,stroke:mH.GREEN},down:{fill:gH.RED,stroke:mH.RED},neutral:{fill:gH.GRAY,stroke:mH.GRAY},altUp:{fill:gH.BLUE,stroke:mH.BLUE},altDown:{fill:gH.ORANGE,stroke:mH.ORANGE},altNeutral:{fill:gH.GRAY,stroke:mH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(lB,!0),e.set(_B,pH),e.set(IB,"#4b525d"),e.set(uB,"#fff"),e.set(mB,"#7d91a0"),e.set(vB,"#545a6e"),e.set(yB,"#fff"),e.set(bB,"#7f8389"),e.set(VB,[gH.ORANGE,gH.YELLOW,gH.GREEN]),e.set(WB,[gH.GREEN,gH.YELLOW,gH.RED]),e.set(jB,["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"]),e.set(UB,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.set(KB,["#192834","#3b5164","#496275","#577287","#668399"]),e.set(CB,pH),e.set(xB,"white"),e.set(gB,pH),e.set(YB,gH.BLUE),e.set(XB,"#fff"),e.set(qB,gH.BLUE),e.set(QB,pH),e.set(JB,"#28313e"),e.set($B,"#4b525d"),e.set(eG,"#fff"),e.set(tG,"#fff"),e.set(oG,"#28313e"),e.set(sG,"#4b525d"),e.set(rG,"#fff"),e}constructor(e){super(e)}},fH={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},yH={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},bH=class extends vH{getDefaultColors(){return{fills:l({},fH),strokes:l({},yH),up:{fill:fH.GREEN,stroke:yH.GREEN},down:{fill:fH.RED,stroke:yH.RED},neutral:{fill:fH.BLUE,stroke:yH.BLUE},altUp:{fill:fH.GREEN,stroke:yH.GREEN},altDown:{fill:fH.RED,stroke:yH.RED},altNeutral:{fill:fH.GRAY,stroke:yH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[fH.GREEN,fH.BLUE,fH.RED]),e.set(YB,fH.BLUE),e.set(qB,fH.BLUE),e.set(vB,"#343A4E"),e.set(MB,0),e.set(DB,"overlay"),e.set(kB,"left"),e.set(aG,"bottom"),e.set(lG,!0),e}},CH={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},xH={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},wH=class extends uH{getDefaultColors(){return{fills:l({},CH),strokes:l({},xH),up:{fill:CH.GREEN,stroke:xH.GREEN},down:{fill:CH.RED,stroke:xH.RED},neutral:{fill:CH.BLUE,stroke:xH.BLUE},altUp:{fill:CH.GREEN,stroke:xH.GREEN},altDown:{fill:CH.RED,stroke:xH.RED},altNeutral:{fill:CH.GRAY,stroke:xH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[CH.GREEN,CH.BLUE,CH.RED]),e.set(YB,CH.BLUE),e.set(qB,CH.BLUE),e.set(vB,"#F2F3F3"),e.set(MB,0),e.set(DB,"overlay"),e.set(kB,"left"),e.set(aG,"bottom"),e.set(lG,!0),e}},SH={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},MH={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},DH=class extends vH{getDefaultColors(){return{fills:SH,strokes:MH,up:{fill:SH.GREEN,stroke:MH.GREEN},down:{fill:SH.RED,stroke:MH.RED},neutral:{fill:SH.GRAY,stroke:MH.GRAY},altUp:{fill:SH.BLUE,stroke:MH.BLUE},altDown:{fill:SH.RED,stroke:MH.RED},altNeutral:{fill:SH.GRAY,stroke:MH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[SH.ORANGE,SH.YELLOW,SH.GREEN]),e.set(jB,["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"]),e.set(WB,[SH.GREEN,SH.YELLOW,SH.RED]),e.set(YB,SH.BLUE),e.set(qB,SH.BLUE),e}},kH={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},IH={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},AH=class extends uH{getDefaultColors(){return{fills:kH,strokes:IH,up:{fill:kH.GREEN,stroke:IH.GREEN},down:{fill:kH.RED,stroke:IH.RED},neutral:{fill:kH.GRAY,stroke:IH.GRAY},altUp:{fill:kH.BLUE,stroke:IH.BLUE},altDown:{fill:kH.RED,stroke:IH.RED},altNeutral:{fill:kH.GRAY,stroke:IH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[kH.ORANGE,kH.YELLOW,kH.GREEN]),e.set(jB,["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"]),e.set(WB,[kH.GREEN,kH.YELLOW,kH.RED]),e.set(YB,kH.BLUE),e.set(qB,kH.BLUE),e}},TH={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},EH={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},RH=class extends vH{getDefaultColors(){return{fills:TH,strokes:EH,up:{fill:TH.GREEN,stroke:EH.GREEN},down:{fill:TH.RED,stroke:EH.RED},neutral:{fill:TH.GRAY,stroke:EH.GRAY},altUp:{fill:TH.BLUE,stroke:EH.BLUE},altDown:{fill:TH.RED,stroke:EH.RED},altNeutral:{fill:TH.GRAY,stroke:EH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[TH.BLUE,TH.RED]),e.set(jB,[TH.BLUE,TH.PURPLE,TH.MAGENTA,TH.PINK,TH.RED,TH.ORANGE,TH.YELLOW,TH.GREEN]),e.set(WB,[TH.BLUE,TH.RED]),e.set(YB,TH.BLUE),e.set(qB,TH.BLUE),e}},LH={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},PH={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},NH=class extends uH{getDefaultColors(){return{fills:LH,strokes:PH,up:{fill:LH.GREEN,stroke:PH.GREEN},down:{fill:LH.RED,stroke:PH.RED},neutral:{fill:LH.GRAY,stroke:PH.GRAY},altUp:{fill:LH.BLUE,stroke:PH.BLUE},altDown:{fill:LH.RED,stroke:PH.RED},altNeutral:{fill:LH.GRAY,stroke:PH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[LH.BLUE,LH.RED]),e.set(jB,[LH.BLUE,LH.PURPLE,LH.MAGENTA,LH.PINK,LH.RED,LH.ORANGE,LH.YELLOW,LH.GREEN]),e.set(WB,[LH.BLUE,LH.RED]),e.set(YB,LH.BLUE),e.set(qB,LH.BLUE),e}},FH={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},OH={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},BH=class extends vH{getDefaultColors(){return{fills:l(l({},FH),{},{RED:FH.ORANGE}),strokes:l(l({},OH),{},{RED:OH.ORANGE}),up:{fill:FH.GREEN,stroke:OH.GREEN},down:{fill:FH.ORANGE,stroke:OH.ORANGE},neutral:{fill:FH.GRAY,stroke:OH.GRAY},altUp:{fill:FH.BLUE,stroke:OH.BLUE},altDown:{fill:FH.ORANGE,stroke:OH.ORANGE},altNeutral:{fill:FH.GRAY,stroke:OH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[FH.ORANGE,FH.YELLOW,FH.GREEN]),e.set(WB,[FH.GREEN,FH.YELLOW,FH.ORANGE]),e.set(YB,FH.BLUE),e.set(qB,FH.BLUE),e}},GH={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},zH={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},_H=class extends uH{getDefaultColors(){return{fills:l(l({},GH),{},{RED:GH.ORANGE}),strokes:l(l({},zH),{},{RED:zH.ORANGE}),up:{fill:GH.GREEN,stroke:zH.GREEN},down:{fill:GH.ORANGE,stroke:zH.ORANGE},neutral:{fill:zH.GRAY,stroke:zH.GRAY},altUp:{fill:GH.BLUE,stroke:zH.BLUE},altDown:{fill:GH.ORANGE,stroke:zH.ORANGE},altNeutral:{fill:GH.GRAY,stroke:zH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[GH.ORANGE,GH.YELLOW,GH.GREEN]),e.set(WB,[GH.GREEN,GH.YELLOW,GH.ORANGE]),e.set(YB,GH.BLUE),e.set(qB,GH.BLUE),e}},VH={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},HH={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},WH=class extends vH{getDefaultColors(){return{fills:VH,strokes:HH,up:{fill:VH.GREEN,stroke:HH.GREEN},down:{fill:VH.RED,stroke:HH.RED},neutral:{fill:VH.GRAY,stroke:HH.GRAY},altUp:{fill:VH.BLUE,stroke:HH.BLUE},altDown:{fill:VH.ORANGE,stroke:HH.ORANGE},altNeutral:{fill:VH.GRAY,stroke:HH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[VH.ORANGE,VH.YELLOW,VH.GREEN]),e.set(jB,["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"]),e.set(WB,[VH.GREEN,VH.YELLOW,VH.RED]),e.set(YB,VH.BLUE),e.set(qB,VH.BLUE),e}},jH={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},UH={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},KH=class extends uH{getDefaultColors(){return{fills:jH,strokes:UH,up:{fill:jH.GREEN,stroke:UH.GREEN},down:{fill:jH.RED,stroke:UH.RED},neutral:{fill:jH.GRAY,stroke:UH.GRAY},altUp:{fill:jH.BLUE,stroke:UH.BLUE},altDown:{fill:jH.ORANGE,stroke:UH.ORANGE},altNeutral:{fill:jH.GRAY,stroke:UH.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(VB,[jH.ORANGE,jH.YELLOW,jH.GREEN]),e.set(jB,["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"]),e.set(WB,[jH.GREEN,jH.YELLOW,jH.RED]),e.set(YB,jH.BLUE),e.set(qB,jH.BLUE),e}},YH=MF((()=>new uH)),ZH={"ag-default-dark":MF((()=>new vH)),"ag-sheets-dark":MF((()=>new BH)),"ag-polychroma-dark":MF((()=>new RH)),"ag-vivid-dark":MF((()=>new WH)),"ag-material-dark":MF((()=>new DH)),"ag-financial-dark":MF((()=>new bH)),null:YH,undefined:YH,"ag-default":YH,"ag-sheets":MF((()=>new _H)),"ag-polychroma":MF((()=>new NH)),"ag-vivid":MF((()=>new KH)),"ag-material":MF((()=>new AH)),"ag-financial":MF((()=>new wH))},XH=MF((function(e){if(e instanceof uH)return e;if(null==e||"string"===typeof e){const t=ZH[e];return t?t():(cM.warnOnce("the theme [".concat(e,"] is invalid, using [ag-default] instead.")),YH())}if(qV(e,qH,"theme")){const t=function(e){let t,i=e;const n=[];for(;"object"===typeof i;){var o;null!==(o=t)&&void 0!==o||(t=i.palette),i.overrides&&n.push(i.overrides),i=i.baseTheme}return{baseTheme:i,overrides:ES(...n),palette:t}}(e);return new((t.baseTheme?XH(t.baseTheme):YH()).constructor)(t)}return YH()}));var qH={baseTheme:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return $V((e=>t.some((t=>t(e)))),t.map((e=>e[ZV])).filter(Boolean).join(" or "))}(nH,iH),overrides:iH,palette:{fills:oH(nH),strokes:oH(nH),up:{fill:nH,stroke:nH},down:{fill:nH,stroke:nH},neutral:{fill:nH,stroke:nH}}},QH=new Set(["map-shape-background","map-line-background"]),JH=class e{constructor(t,i,n,o,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.debug=RI.create(!0,"opts"),this.optionMetadata=null!==o&&void 0!==o?o:{},this.processedOverrides=null!==i&&void 0!==i?i:{};let a,d,c,h,u=null;if(t instanceof e){if(u=t,this.specialOverrides=u.specialOverrides,!s)throw new Error("AG Charts - internal error: deltaOptions must be supplied.");this.userOptions=ES(s,AA(u.userOptions,e.OPTIONS_CLONE_OPTS))}else this.userOptions=t,this.specialOverrides=this.specialOverridesDefaults(l({},n));r&&this.removeLeftoverSymbols(this.userOptions),!r&&null!=s&&e.isFastPathDelta(s)&&null!=u?({activeTheme:a,processedOptions:d,defaultAxes:c,fastDelta:h}=this.fastSetup(s,u)):({activeTheme:a,processedOptions:d,defaultAxes:c}=this.slowSetup(i,s,r)),this.activeTheme=a,this.processedOptions=d,this.defaultAxes=c,this.fastDelta=h}static isFastPathDelta(e){for(const t of Object.keys(e))if(!this.FAST_PATH_OPTIONS.has(t))return!1;return!0}fastSetup(e,t){const{activeTheme:i,defaultAxes:n,processedOptions:o}=t,{presetType:s}=this.optionMetadata,r=s?KV[s]:void 0;null!=s&&null!=e.data&&null!=r&&(e=ES(r(e.data),e)),this.fastSeriesSetup(e,o);return{activeTheme:i,defaultAxes:n,processedOptions:ES(e,o),fastDelta:e}}fastSeriesSetup(e,t){var i;e.series&&(null!==(i=e.series)&&void 0!==i&&i.every(((e,i)=>{var n,o;return IA(e,null!==(n=null===(o=t.series)||void 0===o?void 0:o[i])&&void 0!==n?n:{})}))?delete e.series:e.series=e.series.map(((e,i)=>{var n,o;return ES(e,null!==(n=null===(o=t.series)||void 0===o?void 0:o[i])&&void 0!==n?n:{})})))}slowSetup(t,i){var o;let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=AA(this.userOptions,e.OPTIONS_CLONE_OPTS);i&&(r=ES(i,r),s&&this.removeLeftoverSymbols(r));const{presetType:a}=this.optionMetadata;if(null!=a){var l;const e=UV[a],t=this.userOptions,i=this.userOptions.type,n=null!=i?XH(this.userOptions.theme).presets[i]:void 0;this.debug(">>> AgCharts.createOrUpdate() - applying preset",t),r=null!==(l=null===e||void 0===e?void 0:e(t,n,(()=>this.activeTheme)))&&void 0!==l?l:r}kV.isEnterprise||YV(r);const d=XH(r.theme);this.sanityCheck(r),this.removeDisabledOptions(r);const c=this.getDefaultAxes(r),h=this.optionsType(r),u=this.getSeriesThemeConfig(h,d),{axes:p={},annotations:g={},series:m}=u,v=n(u,nw),[f,y]=this.splitAnnotationsOptions(g);let b=ES(t,r,f,v,c);var C;(this.processAxesOptions(b,p),this.processSeriesOptions(b,d),this.processMiniChartSeriesOptions(b,d),this.annotationThemes=y,b=AA(b,e.OPTIONS_CLONE_OPTS),(xP(b)||kP(b)||function(e){const t=CP(e);return wP(e)&&"pie"!==t&&"donut"!==t}(b))&&null==(null===(o=b.legend)||void 0===o?void 0:o.enabled))&&(null!==(C=b.legend)&&void 0!==C||(b.legend={}),b.legend.enabled=b.series.length>1);return this.enableConfiguredOptions(b,this.userOptions),d.templateTheme(b,!1),this.removeDisabledOptions(r),function(e){const t="mode"in e&&"integrated"===e.mode;for(const i of nE.byType("root","legend")){const n=e[i.optionsKey],o=null!=n&&!1===n.enabled,s=!("removable"in i)||!0===i.removable||"standalone-only"===i.removable&&!t;o&&s&&delete e[i.optionsKey]}}(b),kV.isEnterprise||YV(b,!0),this.debug("AgCharts.createOrUpdate() - processed options",b),{activeTheme:d,processedOptions:b,defaultAxes:c}}diffOptions(e){var t;return this===e?{}:null==e?this.processedOptions:null!==(t=this.fastDelta)&&void 0!==t?t:kA(e.processedOptions,this.processedOptions)}getSeriesThemeConfig(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.config[e])&&void 0!==i?i:{}}getDefaultAxes(e){var t,i;const n=this.optionsType(e),o=null!==(t=null===(i=e.series)||void 0===i?void 0:i.find((e=>{var t;return(null!==(t=e.type)&&void 0!==t?t:"line")===n})))&&void 0!==t?t:{};return gP.cloneDefaultAxes(n,o)}optionsType(e){var t,i;return null!==(t=null===(i=e.series)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.type)&&void 0!==t?t:"line"}sanityCheck(e){this.axesTypeIntegrity(e),this.seriesTypeIntegrity(e),this.soloSeriesIntegrity(e)}splitAnnotationsOptions(e){const{axesButtons:t=null,enabled:i=null,optionsToolbar:o=null,toolbar:s=null}=e,r=n(e,ow);return null==t&&null==i&&null==o&&null==s?[{},r]:[{annotations:{axesButtons:t,enabled:i,optionsToolbar:o,toolbar:s}},r]}processAxesOptions(e,t){var i;"axes"in e&&(e.axes=null===(i=e.axes)||void 0===i?void 0:i.map((e=>{var i,o,s;const r=ES(null===(i=t[e.type])||void 0===i?void 0:i[e.position],t[e.type]),{crossLines:a}=r,l=n(r,sw);e.crossLines&&(e.crossLines=RS(e.crossLines,a));const d=null===(o=l.gridLine)||void 0===o?void 0:o.style;null!==(s=e.gridLine)&&void 0!==s&&s.style&&null!==d&&void 0!==d&&d.length&&(e.gridLine.style=e.gridLine.style.map(((e,t)=>null!=e.stroke||null!=e.lineDash?ES(e,d.at(t%d.length)):e)));const c=ES(e,l),{top:h,right:u,bottom:p,left:g}=c;return n(c,rw)})))}processSeriesOptions(e,t){var i,o;const s=this.getTooltipPositionDefaults(e),r=vS(e.theme)?sH(null===(i=e.theme)||void 0===i?void 0:i.palette):"inbuilt",a={colourIndex:0,userPalette:r},l=null===(o=e.series)||void 0===o?void 0:o.map((i=>{var o,l;null!==(o=i.type)&&void 0!==o||(i.type=this.getDefaultSeriesType(e));const d=null!==(l=this.getSeriesThemeConfig(i.type,t).series)&&void 0!==l?l:{},{innerLabels:c}=d,h=n(d,aw),u=QH.has(i.type)?{colourIndex:0,userPalette:r}:a,p=this.getSeriesPalette(i.type,u,t),g=this.getTooltipRangeDefaults(e,i.type),m=ES(this.getSeriesGroupingOptions(i),i,s,g,h,p,{visible:!0});return m.innerLabels&&(m.innerLabels=RS(m.innerLabels,c)),m}));e.series=this.setSeriesGroupingOptions(null!==l&&void 0!==l?l:[])}processMiniChartSeriesOptions(e,t){var i;let o=null===(i=e.navigator)||void 0===i||null===(i=i.miniChart)||void 0===i?void 0:i.series;if(null==o)return;const s={colourIndex:0,userPalette:vS(e.theme)?sH(e.theme.palette):"inbuilt"};o=o.map((e=>{var i,o;null!==(i=e.type)&&void 0!==i||(e.type="line");const r=null!==(o=this.getSeriesThemeConfig(e.type,t).series)&&void 0!==o?o:{},{innerLabels:a}=r,l=n(r,lw);return ES(this.getSeriesGroupingOptions(e),e,l,this.getSeriesPalette(e.type,s,t))})),e.navigator.miniChart.series=this.setSeriesGroupingOptions(o)}getSeriesPalette(e,t,i){const n=gP.getPaletteFactory(e),{colourIndex:o,userPalette:s}=t,{fills:r=[],strokes:a=[]}=i.palette;return null===n||void 0===n?void 0:n({userPalette:s,colorsCount:Math.max(r.length,a.length),themeTemplateParameters:i.getTemplateParameters(),palette:i.palette,takeColors:e=>(t.colourIndex+=e,{fills:CM(r,e,o),strokes:CM(a,e,o)})})}getSeriesGroupingOptions(e){var t,i;const n=gP.isGroupable(e.type),o=gP.isStackable(e.type),s=gP.isStackedByDefault(e.type);e.grouped&&!n&&cM.warnOnce('unsupported grouping of series type "'.concat(e.type,'".')),!e.stacked&&!e.stackGroup||o||cM.warnOnce('unsupported stacking of series type "'.concat(e.type,'".'));let{grouped:r,stacked:a}=e;return null!==(t=a)&&void 0!==t||(a=(s||null!=e.stackGroup)&&!(n&&r)),null!==(i=r)&&void 0!==i||(r=!0),{stacked:o&&a,grouped:n&&r&&!(o&&a)}}setSeriesGroupingOptions(e){const t=this.getSeriesGrouping(e);this.debug("setSeriesGroupingOptions() - series grouping: ",t);const i={},o=t.reduce(((e,t)=>{var i,n;return"default"===t.groupType||(null!==(i=e[n=t.seriesType])&&void 0!==i||(e[n]=0),e[t.seriesType]+="stack"===t.groupType?1:t.series.length),e}),{});return t.flatMap((e=>{var t,n;switch(null!==(t=i[n=e.seriesType])&&void 0!==t||(i[n]=0),e.groupType){case"stack":{const t=i[e.seriesType]++;return e.series.map(((i,n)=>Object.assign(i,{seriesGrouping:{groupId:e.groupId,groupIndex:t,groupCount:o[e.seriesType],stackIndex:n,stackCount:e.series.length}})))}case"group":return e.series.map((t=>Object.assign(t,{seriesGrouping:{groupId:e.groupId,groupIndex:i[e.seriesType]++,groupCount:o[e.seriesType],stackIndex:0,stackCount:0}})))}return e.series})).map((e=>{let{stacked:t,grouped:i}=e;return n(e,dw)}))}getSeriesGroupId(e){var t;return[e.type,e.xKey,e.stacked?null!==(t=e.stackGroup)&&void 0!==t?t:"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){const t=new Map;return e.reduce(((e,i)=>{const n=i.type;if(i.stacked||i.grouped){const o=this.getSeriesGroupId(i);if(!t.has(o)){const s={groupType:i.stacked?"stack":"group",seriesType:n,series:[],groupId:o};t.set(o,s),e.push(s)}t.get(o).series.push(i)}else e.push({groupType:"default",seriesType:n,series:[i],groupId:"__default__"});return e}),[])}getDefaultSeriesType(e){if(xP(e))return"line";if(wP(e))return"pie";if(SP(e))return"treemap";if(MP(e))return"map-shape";if(DP(e))return"sankey";if(kP(e))return"pyramid";if(IP(e))return"radial-gauge";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(e){var t;const i=null===(t=e.tooltip)||void 0===t?void 0:t.position;if(!yS(i))return;const{type:n,xOffset:o,yOffset:s}=i,r={};return bS(n)&&MS(yw,n)&&(r.type=n),xS(o)&&(r.xOffset=o),xS(s)&&(r.yOffset=s),{tooltip:{position:r}}}getTooltipRangeDefaults(e,t){var i,n,o;return{tooltip:{range:null!==(i=null===(n=e.tooltip)||void 0===n?void 0:n.range)&&void 0!==i?i:null===(o=gP.getTooltipDefauls(t))||void 0===o?void 0:o.range}}}axesTypeIntegrity(e){if("axes"in e&&e.axes){const i=e.axes;for(const{type:n}of i)if(null==(t=n)||!oP.has(t)){delete e.axes;const t=oP.publicKeys().join(", ");cM.warnOnce("unknown axis type: ".concat(n,"; expected one of: ").concat(t))}}var t}seriesTypeIntegrity(e){var t;e.series=null===(t=e.series)||void 0===t?void 0:t.filter((e=>{let{type:t}=e;if(null==t||null!=(i=t)&&hP.has(i)||function(e){return sP.some((t=>"series"===t.type&&t.identifier===e))}(t))return!0;var i;cM.warnOnce("unknown series type: ".concat(JSON.stringify(t),"; expected one of: ").concat(uP.seriesTypes.join(", ")))}))}soloSeriesIntegrity(e){const t=e.series;if(t&&t.length>1&&t.some((e=>gP.isSolo(e.type)))){const i=this.optionsType(e);if(gP.isSolo(i))cM.warn("series[0] of type '".concat(i,"' is incompatible with other series types. Only processing series[0]")),e.series=t.slice(0,1);else{const{solo:i,nonSolo:n}=bM(t,(e=>gP.isSolo(e.type)?"solo":"nonSolo")),o=yM(i.map((e=>e.type))).join(", ");cM.warn("Unable to mix these series types with the lead series type: ".concat(o)),e.series=n}}}static enableConfiguredJsonOptions(e,t){t&&"enabled"in t&&!t._enabledFromTheme&&null==e.enabled&&(t.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(e){null!=e._enabledFromTheme&&delete e._enabledFromTheme}enableConfiguredOptions(t,i){EA(i,e.enableConfiguredJsonOptions,new Set(["data","theme"]),t),EA(t,e.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static removeDisabledOptionJson(e){"enabled"in e&&!1===e.enabled&&Object.keys(e).forEach((t=>{"enabled"!==t&&delete e[t]}))}removeDisabledOptions(t){EA(t,e.removeDisabledOptionJson,new Set(["data","theme"]))}static removeLeftoverSymbolsJson(e){if(e&&vS(e))for(const[t,i]of Object.entries(e))DS(i)&&delete e[t]}removeLeftoverSymbols(t){EA(t,e.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(e){if(null!=e.window?wI(e.window):"undefined"!==typeof window?e.window=window:"undefined"!==typeof global&&(e.window=global.window),null!=e.document?xI(e.document):"undefined"!==typeof document?e.document=document:"undefined"!==typeof global&&(e.document=global.document),null==e.window)throw new Error("AG Charts - unable to resolve global window");if(null==e.document)throw new Error("AG Charts - unable to resolve global document");return e}};JH.OPTIONS_CLONE_OPTS=new Set(["data","container"]),JH.FAST_PATH_OPTIONS=new Set(["data","width","height"]);var $H=JH,eW=class e{constructor(e,t,i,n,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;this.name=e,this.buildItem=t,this.releaseItem=i,this.destroyItem=n,this.maxPoolSize=o,this.cleanupTimeMs=s,this.freePool=[],this.busyPool=new Set}static getPool(t,i,n,o,s){return this.pools.has(t)||this.pools.set(t,new e(t,i,n,o,s)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}obtain(t){if(0===this.freePool.length&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return null==i?(i=this.buildItem(t),e.debug("Pool[name=".concat(this.name,"]: Created instance (").concat(this.freePool.length," / ").concat(this.busyPool.size+1," / ").concat(this.maxPoolSize,")"),i)):e.debug("Pool[name=".concat(this.name,"]: Re-used instance (").concat(this.freePool.length," / ").concat(this.busyPool.size+1," / ").concat(this.maxPoolSize,")"),i),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}release(t){if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");e.debug("Pool[name=".concat(this.name,"]: Releasing instance (").concat(this.freePool.length," / ").concat(this.busyPool.size," / ").concat(this.maxPoolSize,")"),t),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),e.debug("Pool[name=".concat(this.name,"]: Returned instance to free pool (").concat(this.freePool.length," / ").concat(this.busyPool.size," / ").concat(this.maxPoolSize,")"),t),this.cleanPoolTimer&&clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=setTimeout((()=>{this.cleanPool()}),this.cleanupTimeMs)}cleanPool(){const t=this.freePool.splice(0);for(const e of t)this.destroyItem(e);e.debug("Pool[name=".concat(this.name,"]: Cleaned pool of ").concat(t.length," items (").concat(this.freePool.length," / ").concat(this.busyPool.size," / ").concat(this.maxPoolSize,")"))}destroy(){this.cleanPool();for(const e of this.busyPool.values())this.destroyItem(e);this.busyPool.clear()}};eW.pools=new Map,eW.debug=RI.create(!0,"pool");var tW=eW,iW=RI.create(!0,"opts");function nW(e){if(xP(e))return"cartesian";if(wP(e))return"polar";if(SP(e))return"hierarchy";if(MP(e))return"topology";if(DP(e))return"flow-proportion";if(kP(e))return"standalone";if(IP(e))return"gauge";throw new Error("AG Chart - unknown type of chart for options with type: ".concat(e.type))}var oW=class{static licenseCheck(e){var t,i;this.licenseChecked||(this.licenseManager=null===(t=kV.licenseManager)||void 0===t?void 0:t.call(kV,e),null===(i=this.licenseManager)||void 0===i||i.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(e){var t;return null===(t=kV.licenseManager)||void 0===t?void 0:t.call(kV,{}).getLicenseDetails(e)}static getInstance(e){return rW.getInstance(e)}static create(e,t){var i;this.licenseCheck(e);const n=rW.createOrUpdate({userOptions:e,licenseManager:this.licenseManager,optionsMetadata:t});var o;null!==(i=this.licenseManager)&&void 0!==i&&i.isDisplayWatermark()&&this.licenseManager&&(null===(o=kV.injectWatermark)||void 0===o||o.call(kV,n.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()));return n}static createFinancialChart(e){return this.create(e,{presetType:"price-volume"})}static createGauge(e){return this.create(e,{presetType:"gauge"})}static __createSparkline(e){const{pool:t}=e,i=n(e,cw);return this.create(i,{presetType:"sparkline",pool:null===t||void 0===t||t})}};oW.licenseChecked=!1;var sW=class e{static getInstance(e){const t=QN.getInstance(e);return t?bF.chartInstances.get(t):void 0}static initialiseModules(){e.initialised||(lV(),dV(),e.initialised=!0)}static createOrUpdate(t){var i,o,s,r,a,d,c,h,u,p,g;let{proxy:m}=t;const{userOptions:v,licenseManager:f,processedOverrides:y=(null!==(i=null===(o=m)||void 0===o?void 0:o.chart.chartOptions.processedOverrides)&&void 0!==i?i:{}),specialOverrides:b=(null!==(s=null===(r=m)||void 0===r?void 0:r.chart.chartOptions.specialOverrides)&&void 0!==s?s:{}),optionsMetadata:C=(null!==(a=null===(d=m)||void 0===d?void 0:d.chart.chartOptions.optionMetadata)&&void 0!==a?a:{}),deltaOptions:x,stripSymbols:w=!1}=t,S=null!=kV.styles?[["ag-charts-enterprise",kV.styles]]:[],{presetType:M}=C;e.initialiseModules(),iW(">>> AgCharts.createOrUpdate() user options",v);let D=v;oW.optionsMutationFn&&D&&(D=oW.optionsMutationFn(AA(D),M),iW(">>> AgCharts.createOrUpdate() MUTATED user options",D));const k=null!==(c=D)&&void 0!==c?c:{},{overrideDevicePixelRatio:I,document:A,window:T,styleContainer:E}=k,R=n(k,hw),L=null!==(h=x?null===(u=m)||void 0===u?void 0:u.chart.getChartOptions():R)&&void 0!==h?h:R,P=new $H(L,y,l(l({},b),{},{document:A,window:T,overrideDevicePixelRatio:I,styleContainer:E}),C,x,w);let N,F=!1,O=null===(p=m)||void 0===p?void 0:p.chart;var B,G,z;null!=O&&nW(P.processedOptions)===nW(null===(g=O)||void 0===g?void 0:g.chartOptions.processedOptions)||(N=null===(B=this.getPool(P))||void 0===B?void 0:B.obtain(P),N?O=N.item:(F=!0,O=e.createChartInstance(P,O)),null===S||void 0===S||S.forEach((e=>{var t;let[i,n]=e;null===(t=O)||void 0===t||t.ctx.domManager.addStyles(i,n)})));if(null==m)m=new bF(O,e.callbackApi,f),m.releaseChart=null===(G=N)||void 0===G?void 0:G.release;else if(N||F){var _,V,H;null===(_=(V=m).releaseChart)||void 0===_||_.call(V),m.chart=O,m.releaseChart=null===(H=N)||void 0===H?void 0:H.release}iW.check()&&"undefined"!==typeof window&&(null!==(z=window.agChartInstances)&&void 0!==z||(window.agChartInstances={}),window.agChartInstances[O.id]=O);return O.queuedUserOptions.push(P.userOptions),O.queuedChartOptions.push(P),O.requestFactoryUpdate((e=>{e.applyOptions(P);const t=e.queuedUserOptions.indexOf(P.userOptions)+1;e.queuedUserOptions.splice(0,t),e.queuedChartOptions.splice(0,t)})),m}static markRemovedProperties(t){if("object"===typeof t)for(const[i,n]of Object.entries(t))"undefined"===typeof n&&(e.markedRemovedProperties=!0,Object.assign(t,{[i]:Symbol("UNSET")}))}static updateUserDelta(t,i){i=AA(i,new Set(["data"])),e.markedRemovedProperties=!1,EA(i,e.markRemovedProperties,new Set(["data"])),iW(">>> AgCharts.updateUserDelta() user delta",i),e.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:e.markedRemovedProperties})}static createChartInstance(t,i){const n=null===i||void 0===i?void 0:i.destroy({keepTransferableResources:!0});return new(e.getChartByOptions(t.processedOptions))(t,n)}static getChartByOptions(e){if(xP(e))return fF;if(SP(e))return pV;if(wP(e))return gV;if(MP(e))return DV;if(DP(e))return cV;if(kP(e))return fV;if(IP(e))return uV;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static getPool(e){var t;if(!0===e.optionMetadata.pool)return tW.getPool(null!==(t=e.optionMetadata.presetType)&&void 0!==t?t:"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};sW.caretaker=new ME(xE),sW.initialised=!1,sW.callbackApi={caretaker:sW.caretaker,create:(e,t,i,n)=>sW.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:n}),update:(e,t)=>sW.createOrUpdate({userOptions:e,proxy:t}),updateUserDelta:(e,t)=>sW.updateUserDelta(e,t)},sW.markedRemovedProperties=!1,sW.detachAndClear=e=>e.detachAndClear(),sW.destroy=e=>e.destroy();var rW=sW,aW={};gw(aW,{Arc:()=>lW,BBox:()=>Ww,BandScale:()=>aD,Caption:()=>ZA,Circle:()=>lN,Group:()=>cI,Line:()=>sA,LinearScale:()=>SO,Path:()=>QP,RadialColumnShape:()=>cW,Rect:()=>LO,Scene:()=>WR,Sector:()=>N_,Shape:()=>oA,TranslatableGroup:()=>pI,getRadialColumnWidth:()=>hW,toRadians:()=>zI});var lW=class extends QP{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return Ow(FI(this.startAngle),FI(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?e.closePath():2!==this.type||this.fullPie||(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new Ww(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(e,t){const i=this.getBBox();return 0!==this.type&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};function dW(e,t,i){const n=Math.sqrt(e**2+t**2),o=Math.atan2(t,e)+i;return{x:Math.cos(o)*n,y:Math.sin(o)*n}}lW.className="Arc",lW.defaultStyles=l(l({},oA.defaultStyles),{},{lineWidth:1,fillStyle:null}),mw([qP()],lW.prototype,"centerX",2),mw([qP()],lW.prototype,"centerY",2),mw([qP()],lW.prototype,"radius",2),mw([qP()],lW.prototype,"startAngle",2),mw([qP()],lW.prototype,"endAngle",2),mw([qP()],lW.prototype,"counterClockwise",2),mw([qP()],lW.prototype,"type",2);var cW=class extends QP{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){const{innerRadius:e,outerRadius:t,columnWidth:i}=this,n=this.getRotation(),o=-i/2,s=i/2,r=-t,a=-e;let l=1/0,d=1/0,c=-1/0,h=-1/0;for(let u=0;u<4;u+=1){const{x:e,y:t}=dW(u%2===0?o:s,u<2?r:a,n);l=Math.min(e,l),d=Math.min(t,d),c=Math.max(e,c),h=Math.max(t,h)}return new Ww(l,d,c-l,h-d)}getRotation(){const{startAngle:e,endAngle:t}=this;return FI(e+HI(e,t)/2+Math.PI/2)}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,innerRadius:t,outerRadius:i,path:n}=this,o=-e/2,s=e/2,r=-i,a=-t,l=this.getRotation(),d=[[o,a],[o,r],[s,r],[s,a]].map((e=>{let[t,i]=e;return dW(t,i,l)}));n.clear(!0),n.moveTo(d[0].x,d[0].y),n.lineTo(d[1].x,d[1].y),n.lineTo(d[2].x,d[2].y),n.lineTo(d[3].x,d[3].y),n.closePath()}updateBeveledPath(){const{columnWidth:e,path:t,outerRadius:i,innerRadius:n,axisInnerRadius:o,axisOuterRadius:s,isRadiusAxisReversed:r}=this,a=Ow(n,o),l=Math.asin(e/2/n),d=this.getRotation(),c=(e,t)=>dW(e,t,d),h=(e,t)=>Math.sqrt(e**2+t**2),u=(e,t)=>t>e?0:Math.sqrt(e**2-t**2),p=(e,t,i)=>i?e<t:e>t,g=a&&!isNaN(l)&&l<Math.PI/6;let m=-e/2,v=e/2;const f=-i,y=-n*(g?Math.cos(l):1),b=p(s,h(n,e/2),!r);if(b){const e=u(s,n);m=-e,v=e}t.clear(!0);const C=c(m,y);t.moveTo(C.x,C.y);const x=Ow(n,i),w=p(s,h(i,e/2),!r);if(x&&g)t.arc(0,0,n,FI(-l-Math.PI/2)+d,FI(l-Math.PI/2)+d,!1);else if(w){const n=-u(s,e/2),o=u(s,i);if(!b){const e=c(m,n);t.lineTo(e.x,e.y)}if(t.arc(0,0,s,Math.atan2(n,m)+d,Math.atan2(f,-o)+d,!1),!Ow(o,0)){const e=c(o,f);t.lineTo(e.x,e.y)}t.arc(0,0,s,Math.atan2(f,o)+d,Math.atan2(n,v)+d,!1)}else{const e=c(m,f),i=c(v,f);t.lineTo(e.x,e.y),t.lineTo(i.x,i.y)}const S=c(v,y);if(t.lineTo(S.x,S.y),g)t.arc(0,0,n,FI(l-Math.PI/2)+d,FI(-l-Math.PI/2)+d,!0);else{const e=c(m,y);t.lineTo(e.x,e.y)}t.closePath()}};function hW(e,t,i,n,o){const s=HI(e,t),r=s*(1-n)/2;if(e+=r,t-=r,s<.001)return 2*i*o;if(s>=2*Math.PI){const i=e+s/2;e=i-Math.PI,t=i+Math.PI}const a=i*Math.cos(e),l=i*Math.sin(e),d=i*Math.cos(t),c=i*Math.sin(t),h=Math.floor(Math.sqrt((a-d)**2+(l-c)**2)),u=2*i*o;return Math.max(1,Math.min(u,h))}cW.className="RadialColumnShape",mw([qP()],cW.prototype,"isBeveled",2),mw([qP()],cW.prototype,"columnWidth",2),mw([qP()],cW.prototype,"startAngle",2),mw([qP()],cW.prototype,"endAngle",2),mw([qP()],cW.prototype,"outerRadius",2),mw([qP()],cW.prototype,"innerRadius",2),mw([qP()],cW.prototype,"axisInnerRadius",2),mw([qP()],cW.prototype,"axisOuterRadius",2),mw([qP()],cW.prototype,"isRadiusAxisReversed",2);var uW={};gw(uW,{ChartTheme:()=>uH,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>qB,DEFAULT_ANNOTATION_COLOR:()=>YB,DEFAULT_ANNOTATION_HANDLE_FILL:()=>QB,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>eG,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>tG,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>iG,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>nG,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>JB,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>$B,DEFAULT_AXIS_GRID_COLOUR:()=>vB,DEFAULT_AXIS_LINE_COLOUR:()=>fB,DEFAULT_BACKGROUND_COLOUR:()=>CB,DEFAULT_CAPTION_ALIGNMENT:()=>kB,DEFAULT_CAPTION_LAYOUT_STYLE:()=>DB,DEFAULT_COLOURS:()=>SB,DEFAULT_CROSS_LINES_COLOUR:()=>yB,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>VB,DEFAULT_FIBONACCI_STROKES:()=>ZB,DEFAULT_FONT_FAMILY:()=>hB,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>jB,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>WB,DEFAULT_GRIDLINE_ENABLED:()=>lG,DEFAULT_HIERARCHY_FILLS:()=>UB,DEFAULT_HIERARCHY_STROKES:()=>KB,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>gB,DEFAULT_INVERTED_BACKGROUND_COLOUR:()=>xB,DEFAULT_INVERTED_LABEL_COLOUR:()=>pB,DEFAULT_LABEL_COLOUR:()=>uB,DEFAULT_MUTED_LABEL_COLOUR:()=>mB,DEFAULT_NAVIGATOR_STROKE:()=>IB,DEFAULT_PADDING:()=>MB,DEFAULT_POLAR_SERIES_STROKE:()=>_B,DEFAULT_SEPARATION_LINES_COLOUR:()=>bB,DEFAULT_SHADOW_COLOUR:()=>wB,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>HB,DEFAULT_TEXTBOX_COLOR:()=>rG,DEFAULT_TEXTBOX_FILL:()=>oG,DEFAULT_TEXTBOX_STROKE:()=>sG,DEFAULT_TEXT_ANNOTATION_COLOR:()=>XB,DEFAULT_TOOLBAR_POSITION:()=>aG,IS_COMMUNITY:()=>dB,IS_DARK_THEME:()=>lB,IS_ENTERPRISE:()=>cB,PALETTE_ALT_DOWN_FILL:()=>BB,PALETTE_ALT_DOWN_STROKE:()=>FB,PALETTE_ALT_NEUTRAL_FILL:()=>GB,PALETTE_ALT_NEUTRAL_STROKE:()=>zB,PALETTE_ALT_UP_FILL:()=>OB,PALETTE_ALT_UP_STROKE:()=>NB,PALETTE_DOWN_FILL:()=>RB,PALETTE_DOWN_STROKE:()=>TB,PALETTE_NEUTRAL_FILL:()=>PB,PALETTE_NEUTRAL_STROKE:()=>LB,PALETTE_UP_FILL:()=>EB,PALETTE_UP_STROKE:()=>AB,getChartTheme:()=>XH,themeNames:()=>pW,themeSymbols:()=>aB,themes:()=>ZH});var pW=Object.keys(ZH),gW={};gw(gW,{Color:()=>$w,interpolateColor:()=>eS});oW.create.bind(oW),oW.__createSparkline.bind(oW);var mW={};function vW(){return(e,t)=>{const i=["Property [".concat(e,"] is deprecated."),t].filter(Boolean).join(" ");cM.warnOnce(i)}}function fW(e,t){const i=vW(),n=null===t||void 0===t?void 0:t.default;return oS(((t,o,s)=>(s!==n&&i(o.toString(),e),s)))}function yW(e,t){const i=vW();return oS(((n,o,s)=>(s!==n[e]&&(i(o.toString(),"Use [".concat(e,"] instead.")),OS(n,e,t?t(s):s)),tS)),((t,n)=>(i(n.toString(),"Use [".concat(e,"] instead.")),NS(t,e))))}gw(mW,{AND:()=>pD,ARRAY:()=>kD,ARRAY_OF:()=>ID,AbstractBarSeries:()=>jz,AbstractBarSeriesProperties:()=>Wz,ActionOnSet:()=>OA,AnchoredPopover:()=>UW,Animation:()=>eM,AnimationManager:()=>sL,Arc:()=>lW,ArrowDown:()=>VW,ArrowUp:()=>_W,Axis:()=>XT,AxisInterval:()=>PT,AxisLabel:()=>NT,AxisTick:()=>OT,AxisTicks:()=>TW,BBox:()=>Ww,BBoxValues:()=>kw,BOOLEAN:()=>fD,BOOLEAN_ARRAY:()=>OD,Background:()=>PO,BackgroundModule:()=>NO,BandScale:()=>aD,BarSeries:()=>s_,BarSeriesModule:()=>r_,BaseModuleInstance:()=>tE,BaseProperties:()=>lD,BaseToolbar:()=>QW,ButtonWidget:()=>uR,COLOR_STRING:()=>ND,COLOR_STRING_ARRAY:()=>FD,CachedTextMeasurer:()=>lA,CachedTextMeasurerPool:()=>aA,Caption:()=>ZA,CartesianAxis:()=>JT,CartesianSeries:()=>gF,CartesianSeriesNodeEvent:()=>hF,CartesianSeriesProperties:()=>uF,CategoryAxis:()=>eE,ChangeDetectableProperties:()=>vG,ChartAxisDirection:()=>dk,ChartEventManager:()=>rL,ChartOptions:()=>$H,ChartUpdateType:()=>NL,Circle:()=>lN,CollapseMode:()=>_G,Color:()=>$w,ColorScale:()=>$I,ConicGradient:()=>BW,ContextMenuRegistry:()=>aL,ContinuousScale:()=>pM,Cursor:()=>dL,CursorManager:()=>cL,DATE:()=>RD,DATE_ARRAY:()=>zD,DATE_OR_DATETIME_MS:()=>LD,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>dF,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>cF,DEFAULT_TOOLTIP_CLASS:()=>AN,DEFAULT_TOOLTIP_DARK_CLASS:()=>TN,DIRECTION:()=>JD,DOMManager:()=>tR,DataController:()=>nP,DataModel:()=>tP,DataModelSeries:()=>iF,DataService:()=>YR,Debug:()=>RI,Default:()=>kT,Deprecated:()=>fW,DeprecatedAndRenamedTo:()=>yW,Diamond:()=>uN,DraggablePopover:()=>YW,DropShadow:()=>fG,ExtendedPath2D:()=>XP,FONT_STYLE:()=>KD,FONT_WEIGHT:()=>YD,FUNCTION:()=>yD,FloatingToolbar:()=>ej,GREATER_THAN:()=>ED,GestureDetector:()=>uL,Gradient:()=>eA,Group:()=>cI,GroupedCategoryAxis:()=>xO,HdpiCanvas:()=>TR,HierarchyNode:()=>MW,HierarchySeries:()=>DW,HierarchySeriesProperties:()=>kW,HighlightManager:()=>pL,HighlightProperties:()=>rF,HighlightStyle:()=>aF,INTERACTION_RANGE:()=>ek,INTERPOLATION_STEP_POSITION:()=>SG,INTERPOLATION_TYPE:()=>wG,Image:()=>jO,InteractionManager:()=>nL,InteractionState:()=>yE,InterpolationProperties:()=>MG,Invalidating:()=>hM,KeyNavManager:()=>gL,LABEL_PLACEMENT:()=>tk,LARGEST_KEY_INTERVAL:()=>UF,LESS_THAN:()=>TD,LINE_CAP:()=>VD,LINE_DASH:()=>jD,LINE_JOIN:()=>HD,LINE_STYLE:()=>WD,Label:()=>qA,LayoutElement:()=>cE,LayoutManager:()=>hE,LegendMarkerLabel:()=>UO,Line:()=>sA,LineSeries:()=>f_,LineSeriesModule:()=>y_,LinearGradient:()=>tA,LinearScale:()=>SO,Listeners:()=>vE,Logger:()=>cM,LonLatBBox:()=>IW,MARKER_SHAPE:()=>yG,MATCHING_CROSSLINE_TYPE:()=>oT,MAX_SPACING:()=>ok,MIN_SPACING:()=>nk,Marker:()=>aN,Menu:()=>KW,MercatorScale:()=>SV,ModuleRegistry:()=>iE,Motion:()=>zS,NAN:()=>wD,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>tM,NUMBER:()=>CD,NUMBER_ARRAY:()=>BD,NUMBER_OR_NAN:()=>DD,NativeWidget:()=>vR,Node:()=>Zw,OBJECT:()=>mD,OBJECT_ARRAY:()=>_D,OR:()=>gD,OVERFLOW_STRATEGY:()=>QD,ObserveChanges:()=>BA,OrdinalTimeScale:()=>Zk,PHASE_METADATA:()=>qS,PHASE_ORDER:()=>XS,PLACEMENT:()=>$D,PLAIN_OBJECT:()=>vD,POINTER_INTERACTION_TYPES:()=>QR,POSITION:()=>UD,POSITION_TOP_COORDINATES:()=>cT,POSITIVE_NUMBER:()=>SD,PREV_NEXT_KEYS:()=>VE,Padding:()=>aE,ParallelStateMachine:()=>UA,Path:()=>QP,PointerEvents:()=>Kw,PolarAxis:()=>hV,PolarSeries:()=>Z_,PolarZIndexMap:()=>Y_,Popover:()=>jW,PropertiesArray:()=>dD,ProxyInteractionService:()=>SR,ProxyOnWrite:()=>NA,ProxyProperty:()=>PA,ProxyPropertyOnWrite:()=>FA,QUICK_TRANSITION:()=>ZS,RATIO:()=>MD,REAL_NUMBER:()=>xD,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>pF,RadialColumnShape:()=>cW,Range:()=>XA,Rect:()=>LO,RegionManager:()=>yL,RepeatType:()=>QS,Rotatable:()=>nI,RotatableGroup:()=>uI,RotatableText:()=>pA,SKIP_JS_BUILTINS:()=>FS,SMALLEST_KEY_INTERVAL:()=>jF,SORT_DOMAIN_GROUPS:()=>KF,STRING:()=>bD,STRING_ARRAY:()=>GD,Scalable:()=>oI,ScalableGroup:()=>hI,Scene:()=>WR,SceneChangeDetection:()=>jw,ScenePathChangeDetection:()=>qP,Sector:()=>N_,SectorBox:()=>S_,Selection:()=>LI,Series:()=>GP,SeriesContentZIndexMap:()=>NP,SeriesGroupingChangedEvent:()=>BP,SeriesItemHighlightStyle:()=>nF,SeriesMarker:()=>bG,SeriesNodeEvent:()=>OP,SeriesNodePickMode:()=>FP,SeriesProperties:()=>lF,SeriesTooltip:()=>xG,SeriesZIndexMap:()=>PP,Shape:()=>oA,SimpleTextMeasurer:()=>cA,SliderWidget:()=>yR,Square:()=>yN,StateMachine:()=>jA,StateMachineProperty:()=>_A,SvgPath:()=>GW,TEXT_ALIGN:()=>XD,TEXT_WRAP:()=>ZD,TICK_INTERVAL:()=>LT,Text:()=>uA,TextUtils:()=>dA,TextWrapper:()=>YA,ThemeConstants:()=>tB,ThemeSymbols:()=>aB,TimeScale:()=>Kk,Toolbar:()=>JW,ToolbarButtonProperties:()=>ZW,ToolbarButtonWidget:()=>XW,ToolbarWidget:()=>CR,Tooltip:()=>PN,TooltipManager:()=>CL,TooltipPosition:()=>LN,Transformable:()=>rI,TransformableText:()=>gA,Translatable:()=>sI,TranslatableGroup:()=>pI,Triangle:()=>xN,UNION:()=>ik,UpdateService:()=>FL,VERTICAL_ALIGN:()=>qD,Validate:()=>hD,Vec2:()=>bW,Vec4:()=>xL,WIDGET_HTML_EVENTS:()=>iR,Widget:()=>cR,WidgetEventUtil:()=>sR,ZIndexMap:()=>wT,ZoomManager:()=>TL,__FORCE_MODULE_DETECTION:()=>EW,accumulateGroup:()=>tO,accumulateStack:()=>nO,accumulatedValue:()=>RF,accumulativeValueProperty:()=>_F,addHitTestersToQuadtree:()=>Vz,adjustLabelPlacement:()=>o_,angleBetween:()=>HI,angleDiff:()=>VI,animationValidation:()=>JF,areScalingEqual:()=>oz,area:()=>EF,arraysEqual:()=>vM,backfillPathPointData:()=>Az,buildFormatter:()=>iD,buildResetPathFn:()=>Bz,calculateDefaultTimeTickFormat:()=>sD,calculateDerivativeExtrema:()=>YP,calculateDerivativeExtremaXY:()=>ZP,calculateLabelChartPadding:()=>dT,calculateLabelTranslation:()=>lT,calculatePlacement:()=>tN,checkCrisp:()=>Xz,circularSliceArray:()=>CM,clamp:()=>Rw,clampArray:()=>Lw,clippedRoundRect:()=>RO,clockwiseAngle:()=>jI,clockwiseAngles:()=>UI,collapsedStartingBarPosition:()=>Qz,compareDates:()=>Wk,computeBarFocusBounds:()=>t_,computeMarkerFocusBounds:()=>Sz,countFractionDigits:()=>Vw,createButton:()=>RW,createCheckbox:()=>LW,createDatumId:()=>aO,createDeprecationWarning:()=>vW,createElement:()=>yI,createElementId:()=>II,createElementNS:()=>bI,createIcon:()=>FW,createId:()=>ww,createSelect:()=>PW,createTextArea:()=>NW,dateToNumber:()=>nD,datesSortOrder:()=>Uk,datumKeys:()=>JL,datumStylerProperties:()=>ON,debounce:()=>lM,deconstructSelectionsOrNodes:()=>JS,deepClone:()=>AA,deepFreeze:()=>GS,deepMerge:()=>TS,defaultTimeTickFormat:()=>oD,diff:()=>rO,displacePointFromVector:()=>WI,doOnce:()=>rM,downloadUrl:()=>CI,drawCorner:()=>AO,easing:()=>zS,enterpriseModule:()=>kV,evaluateBezier:()=>jP,excludesType:()=>kS,extent:()=>gM,extractDecoratedProperties:()=>lS,findMaxIndex:()=>zk,findMaxValue:()=>Vk,findMinIndex:()=>_k,findMinMax:()=>Pw,findMinValue:()=>Hk,findQuadtreeMatch:()=>Hz,findRangeExtent:()=>Nw,fixNumericExtent:()=>ZL,focusCursorAtEnd:()=>DI,formatNumber:()=>MA,formatPercent:()=>SA,formatValue:()=>wA,fromToMotion:()=>iM,generateUUID:()=>Sw,getAngleRatioRadians:()=>KI,getDatumRefPoint:()=>bL,getDocument:()=>vI,getElementBBox:()=>MI,getIconClassNames:()=>TI,getLastFocus:()=>ZE,getMarker:()=>DN,getMissCount:()=>XL,getPath:()=>NS,getPathComponents:()=>$L,getRadialColumnWidth:()=>hW,getRectConfig:()=>Zz,getWindow:()=>fI,groupAccumulativeValueProperty:()=>HF,groupAverage:()=>TF,groupBy:()=>bM,groupCount:()=>AF,groupStackValueProperty:()=>WF,groupSum:()=>IF,hasNoModifiers:()=>BE,identity:()=>aM,inRange:()=>Fw,includes:()=>wM,initMenuKeyNav:()=>UE,initRovingTabIndex:()=>WE,initToolbarKeyNav:()=>HE,interpolatePoints:()=>rz,isArray:()=>cS,isBetweenAngles:()=>GI,isBoolean:()=>hS,isButtonClickEvent:()=>YE,isContinuous:()=>tT,isDate:()=>uS,isDecoratedObject:()=>rS,isDefined:()=>dS,isDenseInterval:()=>Fk,isEnumKey:()=>SS,isEnumValue:()=>MS,isFiniteNumber:()=>xS,isFunction:()=>mS,isHtmlElement:()=>wS,isInputPending:()=>AI,isInteger:()=>Gw,isNegative:()=>Bw,isNumber:()=>CS,isNumberEqual:()=>Ow,isObject:()=>vS,isObjectLike:()=>fS,isPlainObject:()=>yS,isProperties:()=>cD,isRegExp:()=>gS,isScaleValid:()=>sz,isString:()=>bS,isSymbol:()=>DS,isValidDate:()=>pS,jsonApply:()=>RA,jsonDiff:()=>kA,jsonPropertyCompare:()=>IA,jsonWalk:()=>EA,keyProperty:()=>BF,labelDirectionHandling:()=>yT,legendSymbolSvg:()=>kN,lineDistanceSquared:()=>ZI,listDecoratedProperties:()=>aS,makeAccessibleClickListener:()=>KE,mapValues:()=>LS,markerFadeInAnimation:()=>fz,markerPaletteFactory:()=>hG,markerScaleInAnimation:()=>yz,markerSwipeScaleInAnimation:()=>bz,mergeArrayDefaults:()=>RS,mergeDefaults:()=>ES,midpointStartingBarPosition:()=>Jz,minMax:()=>Dz,mod:()=>_w,moduleRegistry:()=>nE,motion:()=>ij,nearestSquared:()=>Tw,nearestSquaredInContainer:()=>Ew,normaliseGroupTo:()=>ZF,normalisePropertyTo:()=>qF,normalisedExtentWithMetadata:()=>mM,normalizeAngle180:()=>BI,normalizeAngle360:()=>FI,normalizeAngle360Inclusive:()=>OI,objectsEqual:()=>IS,objectsEqualWith:()=>AS,pairUpSpans:()=>tz,partialAssign:()=>BS,pathFadeInAnimation:()=>Fz,pathFadeOutAnimation:()=>Oz,pathMotion:()=>uG,pathSwipeInAnimation:()=>Nz,pickByMatchingAngle:()=>K_,pickNode:()=>NN,plotAreaPathFill:()=>pz,plotInterpolatedAreaSeriesFillSpans:()=>gz,plotInterpolatedLinePathStroke:()=>dz,plotLinePathStroke:()=>lz,plotPath:()=>Rz,predicateWithMessage:()=>sk,prepareAreaFillAnimationFns:()=>mz,prepareAreaPathAnimation:()=>vz,prepareAxisAnimationContext:()=>GT,prepareAxisAnimationFunctions:()=>VT,prepareBarAnimationFunctions:()=>$z,prepareLinePathAnimation:()=>uz,prepareLinePathPropertyAnimation:()=>hz,prepareLinePathStrokeAnimationFns:()=>cz,prepareMarkerAnimation:()=>wz,preparePieSeriesAnimationFunctions:()=>j_,range:()=>Nk,rangedValueProperty:()=>zF,renderPartialPath:()=>Pz,resetAxisGroupFn:()=>HT,resetAxisLabelSelectionFn:()=>jT,resetAxisLineSelectionFn:()=>UT,resetAxisSelectionFn:()=>WT,resetBarSelectionsFn:()=>e_,resetIds:()=>xw,resetLabelFn:()=>mG,resetMarkerFn:()=>Cz,resetMarkerPositionFn:()=>xz,resetMotion:()=>uk,resetPieSelectionsFn:()=>U_,round:()=>zw,sanitizeHtml:()=>nN,scale:()=>VG,sectorBox:()=>M_,seriesLabelFadeInAnimation:()=>pG,seriesLabelFadeOutAnimation:()=>gG,setAttribute:()=>TE,setAttributes:()=>EE,setDocument:()=>xI,setElementBBox:()=>SI,setElementStyle:()=>LE,setPath:()=>OS,setWindow:()=>wI,shallowClone:()=>TA,singleSeriesPaletteFactory:()=>cG,solveBezier:()=>UP,sortAndUniqueDates:()=>jk,sortBasedOnArray:()=>xM,splitBezier:()=>KP,splitPairData:()=>Lz,staticFromToMotion:()=>nM,stopPageScrolling:()=>XE,stringify:()=>lk,sum:()=>kF,sumValues:()=>DF,swapAxisCondition:()=>dG,throttle:()=>dM,toArray:()=>fM,toDegrees:()=>_I,toRadians:()=>zI,tooltipContentAriaLabel:()=>EN,trailingAccumulatedValue:()=>LF,trailingAccumulatedValueProperty:()=>VF,unique:()=>yM,updateClipPath:()=>Gz,updateLabelNode:()=>i_,updateRect:()=>Yz,validateCrossLineValues:()=>sT,valueProperty:()=>GF,visibleRangeIndices:()=>BN,without:()=>PS});var bW={add:function(e,t){if("number"===typeof t)return{x:e.x+t,y:e.y+t};return{x:e.x+t.x,y:e.y+t.y}},angle:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)},apply:function(e,t){return e.x=t.x,e.y=t.y,e},equal:function(e,t){return e.x===t.x&&e.y===t.y},distance:function(e,t){const i=CW(e,t);return Math.sqrt(i.x*i.x+i.y*i.y)},distanceSquared:function(e,t){const i=CW(e,t);return i.x*i.x+i.y*i.y},from:function(e,t){if("number"===typeof e)return{x:e,y:t};if("regionX"in e)return{x:e.regionX,y:e.regionY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error("Values can not be converted into a vector: [".concat(JSON.stringify(e),"] [").concat(t,"]"))},gradient:function(e,t,i){const n=t.x-e.x,o=null==i?t.y-e.y:i-t.y-(i-e.y);return o/n},intercept:function(e,t,i){return(null==i?e.y:i-e.y)-t*e.x},intersectAtX:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const o=e===1/0?1/0:e*i+t;return{x:i,y:null==n?o:n-o}},intersectAtY:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return{x:e===1/0?1/0:(i-t)/e,y:null==n?i:n-i}},length:xW,lengthSquared:function(e){return e.x*e.x+e.y*e.y},multiply:function(e,t){if("number"===typeof t)return{x:e.x*t,y:e.y*t};return{x:e.x*t.x,y:e.y*t.y}},normalized:function(e){const t=xW(e);return{x:e.x/t,y:e.y/t}},origin:wW,required:function(e){var t,i;return{x:null!==(t=null===e||void 0===e?void 0:e.x)&&void 0!==t?t:0,y:null!==(i=null===e||void 0===e?void 0:e.y)&&void 0!==i?i:0}},rotate:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};const n=xW(e);return{x:i.x+n*Math.cos(t),y:i.y+n*Math.sin(t)}},round:function(e){return{x:Math.round(e.x),y:Math.round(e.y)}},sub:CW};function CW(e,t){return"number"===typeof t?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function xW(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function wW(){return{x:0,y:0}}var SW=class e{constructor(e,t,i,n,o,s,r,a,l,d){this.series=e,this.index=t,this.rootIndex=i,this.datum=n,this.sizeValue=o,this.colorValue=s,this.sumSize=r,this.depth=a,this.parent=l,this.children=d,this.midPoint={x:0,y:0}}contains(e){let t=e;for(;null!=t&&t.index>=this.index;){if(t===this)return!0;t=t.parent}return!1}walk(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Walk.PreOrder;i===e.Walk.PreOrder&&t(this),this.children.forEach((e=>{e.walk(t,i)})),i===e.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}};SW.Walk={PreOrder:0,PostOrder:1};var MW=SW,DW=class extends GP{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.rootNode=new MW(this,0,0,void 0,0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new $I,this.focusPath=[],this.animationState=new jA("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}processData(){const{childrenKey:e,sizeKey:t,colorKey:i,colorRange:n}=this.properties;let o=0;let s=0,r=1/0,a=-1/0;const l=(n,l,c)=>{const h=(o+=1,o),u=null!=c.depth?c.depth+1:0,p=null!=e?n[e]:void 0,g=null==p||0===p.length;let m=null!=t?n[t]:void 0;m=Number.isFinite(m)?Math.max(m,0):g?1:0;const v=m;s=Math.max(s,u);const f=null!=i?n[i]:void 0;return"number"===typeof f&&(r=Math.min(r,f),a=Math.max(a,f)),d(new MW(this,h,null!==l&&void 0!==l?l:0,n,m,f,v,u,c,[]),l,p)},d=(e,t,i)=>(null===i||void 0===i||i.forEach(((i,n)=>{const o=l(i,null!==t&&void 0!==t?t:n,e);e.children.push(o),e.sumSize+=o.sumSize})),e),c=d(new MW(this,0,0,void 0,0,void 0,0,void 0,void 0,[]),void 0,this.data),h=[r,a];this.colorScale.domain=r<a?[r,a]:[0,1],this.colorScale.range=null!==n&&void 0!==n?n:["black"],this.colorScale.update(),this.rootNode=c,this.maxDepth=s,this.colorDomain=h,this.focusPath=[{nodeDatum:this.rootNode,childIndex:0}]}update(e){let{seriesRect:t}=e;this.updateSelections(),this.updateNodes();const i=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",i),this.animationState.transition("update",i)}resetAllAnimation(e){var t;const i=null===(t=this.animationResetFns)||void 0===t?void 0:t.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&uk(e.datumSelections,i)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var t;const i=null===(t=this.animationResetFns)||void 0===t?void 0:t.datum;null!=i&&uk([e],i)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(e){const{colorKey:t,colorName:i,colorRange:n}=this.properties,{id:o,ctx:{legendManager:s},visible:r}=this;return"gradient"===e&&null!=t&&null!=n?[{legendType:"gradient",enabled:r&&s.getItemEnabled({seriesId:o}),seriesId:o,colorName:i,colorRange:n,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return"".concat(e.index)}getDatumId(e){return this.getDatumIdFromData(e)}pickFocus(e){if(0===this.rootNode.children.length)return;0===this.focusPath.length&&cM.error("this.focusPath should not be empty");const{datumIndexDelta:t,otherIndexDelta:i}=e,{focusPath:n}=this,o=n.length-2;if(0!==i||1===n.length){const e=Math.max(0,o+i);if(null==n[e+1]){let t=n[n.length-1];for(;t.nodeDatum.children.length>0&&(null!==(s=t.nodeDatum.depth)&&void 0!==s?s:-1)<e;){var s;const e={nodeDatum:t.nodeDatum.children[0],childIndex:0};n.push(e),t=e}return this.computeFocusOutputs(t)}return n.length=e+2,this.computeFocusOutputs(n[e+1])}if(0===t)return this.computeFocusOutputs(n[n.length-1]);{var r;const e=n[o+1].childIndex+t,i=n[o].nodeDatum,s=null===i||void 0===i||null===(r=i.children)||void 0===r?void 0:r.length;if(null!=s){const t=Rw(0,e,s-1),r={nodeDatum:i.children[t],childIndex:t};return n[o+1]=r,n.length=o+2,this.computeFocusOutputs(r)}}}getDatumAriaText(e,t){var i;if(e instanceof MW)return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(null!==(i=e.depth)&&void 0!==i?i:-1)+1,count:e.children.length,description:t});cM.error("datum is not HierarchyNode: ".concat(JSON.stringify(e)))}computeFocusOutputs(e){let{nodeDatum:t,childIndex:i}=e;const n=this.computeFocusBounds(t);if(n)return{datum:t,datumIndex:i,otherIndex:t.depth,bounds:n,showFocusBox:!0,clipFocusBox:!0}}},kW=class extends lF{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(F_),this.strokes=Object.values(O_)}};mw([hD(bD)],kW.prototype,"childrenKey",2),mw([hD(bD,{optional:!0})],kW.prototype,"sizeKey",2),mw([hD(bD,{optional:!0})],kW.prototype,"colorKey",2),mw([hD(bD,{optional:!0})],kW.prototype,"colorName",2),mw([hD(FD)],kW.prototype,"fills",2),mw([hD(FD)],kW.prototype,"strokes",2),mw([hD(FD,{optional:!0})],kW.prototype,"colorRange",2);var IW=class{constructor(e,t,i,n){this.lon0=e,this.lat0=t,this.lon1=i,this.lat1=n}merge(e){this.lon0=Math.min(this.lon0,e.lon0),this.lat0=Math.min(this.lat0,e.lat0),this.lon1=Math.max(this.lon1,e.lon1),this.lat1=Math.max(this.lat1,e.lat1)}},AW=class e{constructor(){this.id=ww(this),this.axisGroup=new pI({name:"".concat(this.id,"-AxisTicks"),zIndex:2}),this.labelSelection=LI.select(this.axisGroup,uA),this.interval=new PT,this.label=new NT,this.scale=new SO,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(e){e.appendChild(this.axisGroup)}calculateLayout(){this.scale.interval=this.interval.step;const e=[],t=this.generateTicks(),{translationX:i,translationY:n}=this;return this.labelSelection.update(t.ticks.map((e=>this.createLabelDatum(e))),void 0,(e=>e.tickId)),this.labelSelection.each(((t,i)=>{t.setProperties(i),i.visible&&e.push(t.getBBox())})),this.axisGroup.setProperties({translationX:i,translationY:n}),Ww.merge(e)}getLabelParams(e){const{padding:t}=this,{translate:i}=e;switch(this.position){case"top":case"bottom":return{x:i,y:t,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:t,y:i,textAlign:"start",textBaseline:"middle"}}}inRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001;const[i,n]=Pw(this.scale.range);return e>=i-t&&e<=n+t}createLabelDatum(e){const{x:t,y:i,textBaseline:n,textAlign:o}=this.getLabelParams(e);return{visible:Boolean(e.tickLabel),tickId:e.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:e.tickLabel,textAlign:o,textBaseline:n,x:t,y:i}}generateTicks(){const{minSpacing:t,maxSpacing:i}=this.interval,n=zw(Nw(this.scale.range),2),{maxTickCount:o,minTickCount:s,tickCount:r}=Ok(n,t,i,e.DefaultTickCount,e.DefaultMinSpacing);r&&(this.scale.tickCount=r,this.scale.minTickCount=s,this.scale.maxTickCount=o);const a=this.getTicksData();if("bottom"===this.position||"top"===this.position){const e=aA.getMeasurer({font:this.label}),t=this.scale.getDomain(),i=t[0]>t[1]?-1:1;let n=-1/0*i;a.ticks=a.ticks.filter((t=>Math.sign(t.translate-n)===i&&(n=t.translate+e.textWidth(t.tickLabel,!0)*i,!0)))}return a}getTicksData(){const e=[],t=this.scale.ticks(),i=t.reduce(((e,t)=>Math.max(e,Vw(t))),0),n=KA(),o=this.label.format?this.scale.tickFormat({ticks:t,specifier:this.label.format}):e=>wA(e,i);for(let l=0;l<t.length;l++){var s,r,a;const d=t[l],c=this.scale.convert(d);if(!this.inRange(c))continue;const h=null!==(s=null===(r=(a=this.label).formatter)||void 0===r?void 0:r.call(a,{value:d,index:l,fractionDigits:i}))&&void 0!==s?s:o(d),u=n(h);e.push({tick:d,tickId:u,tickLabel:h,translate:c})}return{rawTicks:t,fractionDigits:i,ticks:e}}};AW.DefaultTickCount=5,AW.DefaultMinSpacing=50;var TW=AW,EW=0;function RW(e,t){const i=yI("button",OW("ag-charts-input ag-charts-button",t));return void 0!==e.label?i.append(e.label):(i.append(FW(e.icon)),i.ariaLabel=e.altText),i.addEventListener("click",e.onPress),EE(i,t),i}function LW(e,t){const i=yI("input",OW("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",(t=>e.onChange(i.checked,t))),i.addEventListener("keydown",(e=>{YE(e)&&(e.preventDefault(),i.click())})),EE(i,t),i}function PW(e,t){const i=yI("select",OW("ag-charts-input ag-charts-select",t));return i.append(...e.options.map((e=>{const t=yI("option");return t.value=e.value,t.textContent=e.label,t}))),TE(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",(t=>e.onChange(i.value,t))),EE(i,t),i}function NW(e,t){const i=yI("textarea",OW("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",(t=>e.onChange(i.value,t))),EE(i,t),TE(i,"data-preventdefault",!1),i}function FW(e){const t=yI("span","ag-charts-icon ag-charts-icon-".concat(e));return TE(t,"aria-hidden",!0),t}function OW(e,t){return null==t?e:"".concat(e," ").concat(t.class)}var BW=class extends eA{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}createCanvasGradient(e,t){const{angle:i}=this,n=FI(zI(i+90)),o=t.x+.5*t.width,s=t.y+.5*t.height;return e.createConicGradient(n,o,s)}},GW=class extends QP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=e}get d(){return this._d}set d(e){if(e!==this._d){this._d=e,this.commands.length=0;for(const[t,i,n]of e.matchAll(/([A-Z])([0-9. ]*)/g)){const e=n.split(/\s+/g).map(Number);this.commands.push([i,e])}this.checkPathDirty()}}updatePath(){const{path:e,x:t,y:i}=this;e.clear();let n=t,o=i;for(const[s,r]of this.commands)switch(s){case"M":e.moveTo(t+r[0],i+r[1]),n=t+r[0];break;case"C":e.cubicCurveTo(t+r[0],i+r[1],t+r[2],i+r[3],t+r[4],i+r[5]),n=t+r[4],o=i+r[5];break;case"H":e.lineTo(t+r[0],o),n=i+r[0];break;case"L":e.lineTo(t+r[0],i+r[1]),n=t+r[0],o=i+r[1];break;case"V":e.lineTo(n,i+r[0]),o=i+r[0];break;case"Z":e.closePath();break;default:throw new Error("Could not translate command '".concat(s,"' with '").concat(r.join(" "),"'"))}e.closePath()}};mw([qP()],GW.prototype,"x",2),mw([qP()],GW.prototype,"y",2);var zW=class e extends aN{updatePath(){const t=this.size/2;super.applyPath(t,e.moves)}};zW.className="ArrowUp",zW.moves=[{x:0,y:0,t:"move"},{x:1,y:1.2},{x:-.5,y:0},{x:0,y:.8},{x:-1,y:0},{x:0,y:-.8},{x:-.5,y:0}];var _W=zW,VW=class extends aN{updatePath(){const e=this.size/2;super.applyPath(e,_W.moves.map((e=>({x:-1*e.x,y:-1*e.y}))))}};VW.className="ArrowDown";var HW={};gw(HW,{ButtonWidget:()=>uR,NativeWidget:()=>vR,SliderWidget:()=>yR,ToolbarWidget:()=>CR,WIDGET_HTML_EVENTS:()=>iR,Widget:()=>cR,WidgetEventUtil:()=>sR});var WW="canvas-overlay",jW=class extends tE{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.moduleId="popover-".concat(t),null!==i&&void 0!==i&&i.detached?this.element=yI("div"):this.element=e.domManager.addChild(WW,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push((()=>e.domManager.removeChild(WW,this.moduleId)))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){const{lastFocus:t=this.lastFocus}=null!==e&&void 0!==e?e:{};0!==this.element.children.length&&(this.hideFns.forEach((e=>e())),null===t||void 0===t||t.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");const i=yI("div","ag-charts-popover");if(null!=t.ariaLabel&&i.setAttribute("aria-label",t.ariaLabel),null!=t.class&&i.classList.add(t.class),i.replaceChildren(...e),this.element.replaceChildren(i),this.hideFns.push((()=>this.removeChildren())),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){const e=ZE(t.sourceEvent);void 0!==e&&(this.lastFocus=e,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){var t;const i=this.getPopoverElement();i&&(i.style.setProperty("right","unset"),i.style.setProperty("bottom","unset"),null!=e.x&&i.style.setProperty("left","".concat(Math.floor(e.x),"px")),null!=e.y&&i.style.setProperty("top","".concat(Math.floor(e.y),"px")),null===(t=this.initialFocus)||void 0===t||t.focus(),this.initialFocus=void 0)}},UW=class extends jW{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}showWithChildren(e,t){var i,n;const o=null!==(i=t.anchor)&&void 0!==i?i:this.anchor,s=null!==(n=t.fallbackAnchor)&&void 0!==n?n:this.fallbackAnchor,r=super.showWithChildren(e,t);return o&&this.setAnchor(o,s),fI().requestAnimationFrame((()=>{this.repositionWithinBounds()})),r}repositionWithinBounds(){const{anchor:e,ctx:t,fallbackAnchor:i}=this,n=this.getPopoverElement();if(!e||!n)return;const o=t.domManager.getBoundingClientRect(),{offsetWidth:s,offsetHeight:r}=n;let a=Rw(0,e.x,o.width-s),l=Rw(0,e.y,o.height-r);a!==e.x&&null!=(null===i||void 0===i?void 0:i.x)&&(a=Rw(0,i.x-s,o.width-s)),l!==e.y&&null!=(null===i||void 0===i?void 0:i.y)&&(l=Rw(0,i.y-r,o.height-r)),this.updatePosition({x:a,y:l})}},KW=class extends UW{show(e){const t=e.items.map((t=>this.createRow(e,t))),i=this.showWithChildren(t,e);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=UE({orientation:"vertical",menu:i,buttons:t,sourceEvent:e.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push((()=>{var e;null===(e=this.menuCloser)||void 0===e||e.finishClosing(),this.menuCloser=void 0}))}createRow(e,t){const{menuItemRole:i="menuitem"}=e,n=t.value===e.value,o=yI("div","ag-charts-menu__row");if(o.setAttribute("role",i),"menuitemradio"===i&&o.setAttribute("aria-checked",(e.value===t.value).toString()),"string"===typeof t.value&&(o.dataset.popoverId=t.value),o.classList.toggle("ag-charts-menu__row--active",n),null!=t.icon){const e=yI("span","ag-charts-menu__icon ".concat(TI(t.icon)));o.appendChild(e)}const s=null!=t.strokeWidth;if(s&&(o.classList.toggle("ag-charts-menu__row--stroke-width-visible",s),o.style.setProperty("--strokeWidth",s?"".concat(t.strokeWidth,"px"):null)),null!=t.label){const e=yI("span","ag-charts-menu__label");e.textContent=this.ctx.localeManager.t(t.label),o.appendChild(e)}"altText"in t&&(o.ariaLabel=this.ctx.localeManager.t(t.altText));const r=i=>{YE(i)&&((()=>{var i;null===(i=e.onPress)||void 0===i||i.call(e,t)})(),i.preventDefault(),i.stopPropagation())};return o.addEventListener("keydown",r),o.addEventListener("click",r),o.addEventListener("mousemove",(()=>{o.focus({preventScroll:!0})})),o}},YW=class extends jW{constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",(t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)})),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",(()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)}))}onDragStart(e){const t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:bW.from(e.clientX,e.clientY),position:bW.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){const{dragStartState:t}=this,i=this.getPopoverElement();if(!t||!i)return;const n=bW.sub(bW.from(e.clientX,e.clientY),t.client),o=bW.add(t.position,n),s=this.ctx.domManager.getBoundingClientRect(),r={};o.x>=s.x&&o.x+i.offsetWidth<=s.width&&(r.x=o.x),o.y>=s.y&&o.y+i.offsetHeight<=s.height&&(r.y=o.y),this.updatePosition(r)}onDragEnd(){this.dragStartState=void 0}},ZW=class extends lD{};mw([hD(bD,{optional:!0})],ZW.prototype,"icon",2),mw([hD(bD,{optional:!0})],ZW.prototype,"label",2),mw([hD(bD,{optional:!0})],ZW.prototype,"ariaLabel",2),mw([hD(bD,{optional:!0})],ZW.prototype,"tooltip",2);var XW=class extends uR{constructor(e){super(),this.localeManager=e}update(e){const{localeManager:t}=this;e.tooltip&&(this.elem.title=t.t(e.tooltip));let i="";if(null!=e.icon&&(i='<span class="'.concat(TI(e.icon),' ag-charts-toolbar__icon"></span>')),null!=e.label){const n=t.t(e.label);i="".concat(i,'<span class="ag-charts-toolbar__label">').concat(n,"</span>")}this.elem.innerHTML=i}setChecked(e){TE(this.elem,"aria-checked",e)}},qW="ag-charts-toolbar__button--active",QW=class extends CR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";super(t),this.localeManager=e,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new vE,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal","horizontal"===t),this.toggleClass("ag-charts-toolbar--vertical","vertical"===t)}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){for(const e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){const{buttonWidgets:t}=this;for(const[n,o]of e.entries()){var i;(null!==(i=this.buttonWidgets.at(n))&&void 0!==i?i:this.createButton(n,o)).update(o)}for(let n=e.length;n<t.length;n++){const e=this.buttonWidgets.at(n);null===e||void 0===e||e.destroy()}this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){var i;null===(i=this.buttonWidgets.at(e))||void 0===i||i.update(t)}clearActiveButton(){for(const e of this.buttonWidgets)e.toggleClass(qW,!1)}toggleActiveButtonByIndex(e){if(-1!==e)for(const[t,i]of this.buttonWidgets.entries())i.toggleClass(qW,null!=e&&e===t)}toggleButtonEnabledByIndex(e,t){var i;-1!==e&&(null===(i=this.buttonWidgets.at(e))||void 0===i||i.setEnabled(t))}toggleSwitchCheckedByIndex(e,t){var i;-1!==e&&(null===(i=this.buttonWidgets.at(e))||void 0===i||i.setChecked(t))}getButtonBounds(){return this.buttonWidgets.map((e=>this.getButtonWidgetBounds(e)))}setButtonHiddenByIndex(e,t){var i;null===(i=this.buttonWidgets.at(e))||void 0===i||i.setHidden(t)}getButtonWidgetBounds(e){const t=this.getBounds(),i=e.getBounds();return new Ww(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){const{buttonWidgets:e,hasPrefix:t}=this;let i,n,o;for(const[r,a]of e.entries()){var s;i=!t&&0===r||o!=a.section,n=r===e.length-1||a.section!=(null===(s=e.at(r+1))||void 0===s?void 0:s.section),a.toggleClass("ag-charts-toolbar__button--first",i),a.toggleClass("ag-charts-toolbar__button--last",n),a.toggleClass("ag-charts-toolbar__button--gap",r>0&&i),o=a.section}}createButton(e,t){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",(n=>{const o=l({index:e},t instanceof lD?t.toJson():t),s=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:n,button:o,buttonBounds:s})})),i.addListener("focus",(()=>{this.events.dispatch("button-focused",{button:{index:e}})})),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},JW=class extends QW{createButtonWidget(){return new XW(this.localeManager)}},$W=class extends YW{constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e,t){this.showWithChildren(e,l(l({},t),{},{class:"ag-charts-floating-toolbar"}))}hide(){this.dragged=!1,super.hide()}getBounds(){var e,t,i,n;const o=this.getPopoverElement();return new Ww(null!==(e=null===o||void 0===o?void 0:o.offsetLeft)&&void 0!==e?e:0,null!==(t=null===o||void 0===o?void 0:o.offsetTop)&&void 0!==t?t:0,null!==(i=null===o||void 0===o?void 0:o.offsetWidth)&&void 0!==i?i:0,null!==(n=null===o||void 0===o?void 0:o.offsetHeight)&&void 0!==n?n:0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){var n;const o=this.getPopoverElement();if(!o)return;const s=null!==(n=e.position)&&void 0!==n?n:"above",{offsetWidth:r,offsetHeight:a}=o;let l=e.y-a-i,d=e.x-r/2;"below"===s?l=e.y+i:"right"===s?(l=e.y-a/2,d=e.x+t):"above-left"===s&&(d=e.x),this.updatePosition({x:d,y:l})}ignorePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){const t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(Rw(0,e.x,i.width-t.width)),e.y=Math.floor(Rw(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},ej=class extends QW{constructor(e,t){super(e.localeManager),this.hasPrefix=!0,this.popover=new $W(e,t,this.onPopoverMoved.bind(this)),this.dragHandle=new tj(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(e){this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){var e;const t=this.popover.getBounds();if(null!==(e=this.popoverBounds)&&void 0!==e&&e.equals(t))return;this.popoverBounds=t.clone();const i=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:t,buttonBounds:i})}getButtonWidgetBounds(e){const t=this.popover.getBounds(),i=super.getButtonWidgetBounds(e),n=this.dragHandle.getBounds();return new Ww(i.x+t.x-n.width,i.y+t.y,i.width,i.height)}},tj=class extends vR{constructor(e){super(yI("div","ag-charts-floating-toolbar__drag-handle"));const t=new vR(yI("span","".concat(TI("drag-handle")," ag-charts-toolbar__icon")));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},ij=l(l({},bw),hk);const nj=["text"],oj=["x","y","angle"],sj=["cap"],rj=["placement"];var aj=Object.defineProperty,lj=Object.getOwnPropertyDescriptor,dj=(e,t,i,n)=>{for(var o,s=n>1?void 0:n?lj(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(s=(n?o(t,i,s):o(s))||s);return n&&s&&aj(t,i,s),s};function cj(e,t,i){const n=(t,i,n,o)=>{let s=e[0];for(let r=t;n>0?r<=i:r>i;r+=n){const t=e[r];if(o(s,t))return!0;s=t}return!1},o=Math.floor(e.length/2);return!!n(t,o,t,i)||n(e.length-t,o,-t,i)}var{OR:hj,POSITIVE_NUMBER:uj,NAN:pj,AxisInterval:gj,Validate:mj}=mW,vj=class extends gj{constructor(){super(...arguments),this.minSpacing=NaN}};dj([mj(hj(uj,pj))],vj.prototype,"minSpacing",2);var{BaseProperties:fj,ChartAxisDirection:yj,ARRAY:bj,BOOLEAN:Cj,COLOR_STRING:xj,FONT_STYLE:wj,FONT_WEIGHT:Sj,LINE_DASH:Mj,NUMBER:Dj,OBJECT:kj,POSITIVE_NUMBER:Ij,RATIO:Aj,STRING:Tj,UNION:Ej,AND:Rj,Validate:Lj,MATCHING_CROSSLINE_TYPE:Pj,createId:Nj,Group:Fj}=mW,Oj=class extends fj{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};dj([Lj(Cj,{optional:!0})],Oj.prototype,"enabled",2),dj([Lj(Tj,{optional:!0})],Oj.prototype,"text",2),dj([Lj(wj,{optional:!0})],Oj.prototype,"fontStyle",2),dj([Lj(Sj,{optional:!0})],Oj.prototype,"fontWeight",2),dj([Lj(Ij)],Oj.prototype,"fontSize",2),dj([Lj(Tj)],Oj.prototype,"fontFamily",2),dj([Lj(Dj)],Oj.prototype,"padding",2),dj([Lj(xj,{optional:!0})],Oj.prototype,"color",2),dj([Lj(Cj,{optional:!0})],Oj.prototype,"parallel",2);var Bj=class extends fj{constructor(){super(...arguments),this.id=Nj(this),this.shape="polygon",this.label=new Oj,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=yj.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new Fj({name:this.id}),this.rangeGroup=new Fj({name:this.id}),this.labelGroup=new Fj({name:this.id}),this._isRange=void 0}assignCrossLineGroup(e,t){e!==this._isRange&&(e?this.rangeGroup.appendChild(t):this.lineGroup.appendChild(t)),this._isRange=e}setSectorNodeProps(e){var t,i,n;e.fill=this.fill,e.fillOpacity=null!==(t=this.fillOpacity)&&void 0!==t?t:1,e.stroke=this.stroke,e.strokeOpacity=null!==(i=this.strokeOpacity)&&void 0!==i?i:1,e.strokeWidth=null!==(n=this.strokeWidth)&&void 0!==n?n:1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,n,o){const{label:s}=this;e.x=t,e.y=i,e.text=s.text,e.textAlign="center",e.textBaseline=n,e.rotation=o,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=s.color,e.fontFamily=s.fontFamily,e.fontSize=s.fontSize,e.fontStyle=s.fontStyle,e.visible=!0}};dj([Lj(Cj,{optional:!0})],Bj.prototype,"enabled",2),dj([Lj(Ej(["range","line"],"a crossLine type"),{optional:!0})],Bj.prototype,"type",2),dj([Lj(Rj(Pj("range"),bj.restrict({length:2})),{optional:!0})],Bj.prototype,"range",2),dj([Lj(Pj("value"),{optional:!0})],Bj.prototype,"value",2),dj([Lj(xj,{optional:!0})],Bj.prototype,"fill",2),dj([Lj(Aj,{optional:!0})],Bj.prototype,"fillOpacity",2),dj([Lj(xj,{optional:!0})],Bj.prototype,"stroke",2),dj([Lj(Dj,{optional:!0})],Bj.prototype,"strokeWidth",2),dj([Lj(Aj,{optional:!0})],Bj.prototype,"strokeOpacity",2),dj([Lj(Mj,{optional:!0})],Bj.prototype,"lineDash",2),dj([Lj(Ej(["polygon","circle"],"a shape"))],Bj.prototype,"shape",2),dj([Lj(kj)],Bj.prototype,"label",2);var{ChartAxisDirection:Gj,validateCrossLineValues:zj,normalizeAngle360:_j,isNumberEqual:Vj,Group:Hj,Path:Wj,Sector:jj,RotatableText:Uj,ContinuousScale:Kj}=mW,Yj=class extends Bj{constructor(){super(),this.direction=Gj.X,this.polygonNode=new Wj,this.sectorNode=new jj,this.lineNode=new Wj,this.crossLineRange=new Hj,this.labelNode=new Uj,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t,shape:i,type:n,value:o,range:s}=this;if(!t||!n||!zj(n,o,s,t,(()=>{var e,i;if(!Kj.is(t))return!0;const[r,a]=null!==s&&void 0!==s?s:[o,void 0],l=null!==(e=null===(i=t.getDomain)||void 0===i?void 0:i.call(t))&&void 0!==e?e:t.domain;return r>=l[0]&&r<=l[1]&&("line"===n||a>=r&&a<=l[1])})))return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,"line"===n&&"circle"===i&&t instanceof mW.BandScale&&(this.type="range",this.range=[o,o]),this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){var t,i;const{scale:n,type:o,value:s,lineNode:r}=this;if(!e||"line"!==o||!n)return void(r.visible=!1);const a=n.convert(s);if(isNaN(a))return void(r.visible=!1);const{axisInnerRadius:l,axisOuterRadius:d}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,r.strokeWidth=null!==(i=this.strokeWidth)&&void 0!==i?i:1,r.fill=void 0,r.lineDash=this.lineDash;const c=d*Math.cos(a),h=d*Math.sin(a),u=l*Math.cos(a),p=l*Math.sin(a);r.path.clear(!0),r.path.moveTo(u,p),r.path.lineTo(c,h),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(e){var t;const{polygonNode:i,range:n,scale:o,shape:s,type:r}=this;if(!e||"range"!==r||"polygon"!==s||!o||!n)return void(i.visible=!1);const a=null===(t=o.ticks)||void 0===t?void 0:t.call(o);if(!a)return void(i.visible=!1);const{axisInnerRadius:l,axisOuterRadius:d}=this,c=a.indexOf(n[0]),h=a.indexOf(n[1]),u=(c<=h?a.slice(c,h+1):a.slice(c).concat(a.slice(0,h+1))).map((e=>o.convert(e)));i.visible=!0,this.setSectorNodeProps(i);const{path:p}=i;p.clear(!0),u.forEach(((e,t)=>{const i=d*Math.cos(e),n=d*Math.sin(e);0===t?p.moveTo(i,n):p.lineTo(i,n)})),0===l?p.lineTo(0,0):u.slice().reverse().forEach((e=>{const t=l*Math.cos(e),i=l*Math.sin(e);p.lineTo(t,i)})),i.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(e){var t;const{sectorNode:i,range:n,scale:o,shape:s,type:r}=this;if(!e||"range"!==r||"circle"!==s||!o||!n)return void(i.visible=!1);const{axisInnerRadius:a,axisOuterRadius:l}=this,d=n.map((e=>o.convert(e))),c=null!==(t=o.step)&&void 0!==t?t:0,h=o instanceof mW.BandScale?c/2:0;i.visible=!0,this.setSectorNodeProps(i),i.centerX=0,i.centerY=0,i.innerRadius=a,i.outerRadius=l,i.startAngle=d[0]-h,i.endAngle=d[1]+h,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(e){const{label:t,labelNode:i,range:n,scale:o,type:s}=this;if(!e||!1===t.enabled||!t.text||!o||"range"===s&&!n)return void(i.visible=!0);const{axisInnerRadius:r,axisOuterRadius:a}=this;let l,d,c,h;if("line"===s){const e=_j(o.convert(this.value)),i=1.5*Math.PI,n=Vj(e,i)||e>i||e<Math.PI/2,s=(r+a)/2*Math.cos(e),u=(r+a)/2*Math.sin(e);l=s+t.padding*Math.cos(e+Math.PI/2),d=u+t.padding*Math.sin(e+Math.PI/2),h=n?"top":"bottom",c=n?e:e-Math.PI}else{var u,p;const[e,i]=n.map((e=>_j(o.convert(e))));let s=(e+i)/2;e>i&&(s-=Math.PI),s=_j(s);const r=(Vj(s,0)||s>0)&&s<Math.PI;let g;const m=null!==(u=null===(p=o.ticks)||void 0===p?void 0:p.call(o))&&void 0!==u?u:[];g="circle"===this.shape||m.length<3?a-t.padding:a*Math.cos(Math.PI/m.length)-t.padding,l=g*Math.cos(s),d=g*Math.sin(s),h=r?"bottom":"top",c=r?s-Math.PI/2:s+Math.PI/2}this.setLabelNodeProps(i,l,d,h,c)}};Yj.className="AngleCrossLine";var{ChartAxisDirection:Zj,NUMBER:Xj,UNION:qj,ProxyOnWrite:Qj,TextWrapper:Jj,TextUtils:$j,Validate:eU,angleBetween:tU,isNumberEqual:iU,toRadians:nU,normalizeAngle360:oU,normalizeAngle360Inclusive:sU,Path:rU,RotatableText:aU,Transformable:lU,BBox:dU}=mW,cU=class extends mW.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};dj([eU(qj(["fixed","parallel","perpendicular"],"a label orientation"))],cU.prototype,"orientation",2);var hU=class extends mW.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new rU),this.includeInvisibleDomains=!0}get direction(){return Zj.X}createLabel(){return new cU}update(){this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines()}normalizedAngles(){const e=oU(-Math.PI/2+nU(this.startAngle));return[e,e+(null!=this.endAngle?sU(nU(this.endAngle)-nU(this.startAngle)):2*Math.PI)]}computeRange(){this.range=this.normalizedAngles()}calculateAvailableRange(){const{range:e,gridLength:t}=this;return tU(e[0],e[1])*t}updatePosition(){const{translation:e,axisGroup:t,gridGroup:i,crossLineRangeGroup:n,crossLineLineGroup:o,crossLineLabelGroup:s}=this,r=Math.floor(e.x),a=Math.floor(e.y);t.translationX=r,t.translationY=a,i.translationX=r,i.translationY=a,n.translationX=r,n.translationY=a,o.translationX=r,o.translationY=a,s.translationX=r,s.translationY=a}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:n}=this.getAxisLinePoints();i.forEach((e=>{let{x:i,y:n,moveTo:o,arc:s,radius:r=0,startAngle:a=0,endAngle:l=0}=e;s?t.arc(i,n,r,a,l):o?t.moveTo(i,n):t.lineTo(i,n)})),n&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.stroke,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){const{scale:e,shape:t,gridLength:i}=this,[n,o]=this.range,s=iU(o-n,2*Math.PI),r=[];if("circle"===t)s?r.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):r.push({x:i*Math.cos(n),y:i*Math.sin(n),moveTo:!0},{x:0,y:0,radius:i,startAngle:oU(n),endAngle:oU(o),arc:!0,moveTo:!1});else if("polygon"===t){var a;const t=null===(a=e.ticks)||void 0===a?void 0:a.call(e).map((t=>e.convert(t)));t&&t.length>2&&t.forEach(((e,t)=>{const n=i*Math.cos(e),o=i*Math.sin(e),s=0===t;r.push({x:n,y:o,moveTo:s})}))}return{points:r,closePath:s}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{enabled:i,style:n,width:o},innerRadiusRatio:s}=this;if(!(n&&t>0))return;const r=this.tickData,a=t*s,l=n.length;this.gridLineGroupSelection.update(i?r:[],void 0,(e=>e.value)).each(((i,s,r)=>{const{value:d}=s,{stroke:c,lineDash:h}=n[r%l],u=e.convert(d);i.x1=a*Math.cos(u),i.y1=a*Math.sin(u),i.x2=t*Math.cos(u),i.y2=t*Math.sin(u),i.stroke=c,i.strokeWidth=o,i.lineDash=h,i.fill=void 0})),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this,i=this.tickData;t.update(e.enabled?i:[]).each(((t,i,n)=>{const o=this.labelData[n];o&&!o.hidden?(t.text=o.text,t.setFont(e),t.fill=e.color,t.x=o.x,t.y=o.y,t.textAlign=o.textAlign,t.textBaseline=o.textBaseline,t.visible=!0,o.rotation?(t.rotation=o.rotation,t.rotationCenterX=o.x,t.rotationCenterY=o.y):t.rotation=0):t.visible=!1}))}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:n}=this,o=this.tickData;n.update(i.enabled?o:[]).each(((n,o)=>{const{value:s}=o,r=e.convert(s),a=Math.cos(r),l=Math.sin(r);n.x1=t*a,n.y1=t*l,n.x2=(t+i.size)*a,n.y2=(t+i.size)*l,n.stroke=i.stroke,n.strokeWidth=i.width}))}createLabelNodeData(e,t,i){const{label:n,gridLength:o,scale:s,tick:r}=this;if(!n.enabled)return[];const a=new aU,l=i.x-this.translation.x,d=i.x+i.width-this.translation.x,c=e.map(((i,c)=>{const{value:h}=i,u=o+n.spacing+r.size,p=s.convert(h),g=u*Math.cos(p),m=u*Math.sin(p),{textAlign:v,textBaseline:f}=this.getLabelAlign(p),y=c===e.length-1&&h!==e[0]&&iU(oU(p),oU(s.convert(e[0]))),b=this.getLabelRotation(p);let C=String(h);if(n.formatter){var x;const{callbackCache:e}=this.moduleCtx;C=null!==(x=e.call(n.formatter,{value:h,index:c}))&&void 0!==x?x:""}a.text=C,a.x=g,a.y=m,a.setFont(n),a.textAlign=v,a.textBaseline=f,a.rotation=b,b&&(a.rotationCenterX=g,a.rotationCenterY=m);let w=b?lU.toCanvas(a):a.getBBox();if(w&&t.hideWhenNecessary&&!b){const e=l-w.x,t=w.x+w.width-d,i=1;if(e>i||t>i){const i=w.width-Math.max(e,t);C=Jj.wrapText(C,{maxWidth:i,font:n,textWrap:"never"}),C===$j.EllipsisChar&&(C=""),a.text=C,w=a.getBBox()}}return{text:C,x:g,y:m,textAlign:v,textBaseline:f,hidden:""===C||i.hidden||y,rotation:b,box:w}}));return n.avoidCollisions&&this.avoidLabelCollisions(c),c}computeLabelsBBox(e,t){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map((e=>{let{box:t}=e;return t})).filter((e=>null!=e));return this.label.enabled&&0!==i.length?dU.merge(i):null}getLabelOrientation(){const{label:e}=this;return e instanceof cU?e.orientation:"fixed"}getLabelRotation(e){var t;let i=nU(null!==(t=this.label.rotation)&&void 0!==t?t:0);e=oU(e);const n=this.getLabelOrientation();return"parallel"===n?(i+=e,e>=0&&e<Math.PI?i-=Math.PI/2:i+=Math.PI/2):"perpendicular"===n&&(i+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(i+=Math.PI)),i}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let n,o;const s=this.getLabelOrientation(),r=iU(t,0),a=iU(i,0),l=iU(t,1),d=iU(i,-1),c=t>0&&!r,h=i>0&&!a;return"parallel"===s?(n="center",o=l&&a||h?"top":"bottom"):"perpendicular"===s?(n=d||c?"left":"right",o="middle"):(n="right",r?n="center":c&&(n="left"),o="bottom",a?o="middle":h&&(o="top")),{textAlign:n,textBaseline:o}}updateCrossLines(){this.crossLines.forEach((e=>{if(e instanceof Yj){const{shape:t,gridLength:i,innerRadiusRatio:n}=this;e.shape=t,e.axisOuterRadius=i,e.axisInnerRadius=i*n}})),super.updateCrossLines()}};hU.CrossLineConstructor=Yj,dj([Qj("rotation"),eU(Xj)],hU.prototype,"startAngle",2),dj([eU(Xj,{optional:!0})],hU.prototype,"endAngle",2);var{RATIO:uU,OBJECT:pU,Validate:gU,isNumberEqual:mU,BandScale:vU}=mW,fU=class extends hU{constructor(e){super(e,new vU),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new vj}generateAngleTicks(){var e;const{scale:t,gridLength:i}=this,{values:n,minSpacing:o}=this.interval,s=null!==(e=null!==n&&void 0!==n?n:t.ticks())&&void 0!==e?e:[];if(s.length<2||isNaN(o))return s.map((e=>({value:e,visible:!0})));const r=s[0],a=t.convert(r),l=i*Math.cos(a),d=i*Math.sin(a);for(let c=1;c<s.length-1;c++){const e=s[c],n=t.convert(e);if(n-a>Math.PI)break;const h=i*Math.cos(n),u=i*Math.sin(n);if(Math.sqrt((h-l)**2+(u-d)**2)>o){const e=new Set([r]);return cj(s,c,((t,i)=>{e.add(i)})),s.map((t=>({value:t,visible:e.has(t)})))}}return[{value:r,visible:!0}]}avoidLabelCollisions(e){let{minSpacing:t}=this.label;if(Number.isFinite(t)||(t=0),e.length<3)return;const i=(e,i)=>{if(e.hidden||i.hidden)return!1;const n=e.box.clone().grow(t/2),o=i.box.clone().grow(t/2);return n.collidesBBox(o)},n=e[0],o=e.at(-1),s=new Set([n]),r=mU(n.x,o.x)&&mU(n.y,o.y),a=Math.floor(e.length/2);for(let l=1;l<=a;l++){const t=r?e.slice(0,-1):e;if(!cj(t,l,i)){cj(t,l,((e,t)=>{s.add(t)}));break}}e.forEach((e=>{s.has(e)||(e.hidden=!0,e.box=void 0)}))}};fU.className="AngleCategoryAxis",fU.type="angle-category",dj([gU(uU)],fU.prototype,"groupPaddingInner",2),dj([gU(uU)],fU.prototype,"paddingInner",2),dj([gU(pU)],fU.prototype,"interval",2);var yU={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",moduleFactory:e=>new fU(e)},{range:bU,isDenseInterval:CU,isNumberEqual:xU,LinearScale:wU,Invalidating:SU}=mW,MU=class extends wU{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some((e=>!isFinite(e)))||this.arcLength<=0)return[];this.refresh();const{interval:e}=this,[t,i]=this.getDomain();if(e){const n=Math.abs(e),o=this.getPixelRange();if(!CU((i-t)/n,o))return bU(t,i,n)}const n=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(t,i);return bU(t,i,n)}hasNiceRange(){const e=this.range.slice().sort(((e,t)=>e-t));return[Math.PI,2*Math.PI].some((t=>xU(t,e[1]-e[0])))}getNiceStepAndTickCount(){const[e,t]=this.niceDomain;let i=this.getTickStep(e,t);const n=isNaN(this.maxTickCount)?1/0:this.maxTickCount,o=Math.abs(t-e)/i;let s=Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)));return s>n&&(s/=2,i*=2),{count:s,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const e=this.niceDomain[0]>this.niceDomain[1],t=e?this.niceDomain[1]:this.niceDomain[0],{step:i,count:n}=this.getNiceStepAndTickCount(),o=1/i,s=i>=1?Math.ceil(t/i+n)*i:Math.ceil((t+n*i)*o)/o;this.niceDomain=e?[s,t]:[t,s],this.niceTickStep=i}getPixelRange(){return this.arcLength}};dj([SU],MU.prototype,"arcLength",2);var{AND:DU,Default:kU,GREATER_THAN:IU,LESS_THAN:AU,NUMBER_OR_NAN:TU,OBJECT:EU,Validate:RU,angleBetween:LU,isNumberEqual:PU,normalisedExtentWithMetadata:NU,findMinMax:FU}=mW,OU=class extends hU{constructor(e){super(e,new MU),this.shape="circle",this.min=NaN,this.max=NaN,this.interval=new vj}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:o}=NU(e,t,i);return{domain:n,clipped:o}}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e);return(LU(t,i)||2*Math.PI)*this.gridLength}generateAngleTicks(){const e=this.getRangeArcLength(),{scale:t,range:i}=this,{values:n,minSpacing:o,maxSpacing:s}=this.interval,r=s?Math.floor(e/s):1,a=o?Math.floor(e/o):1/0,l=Math.floor(4/Math.PI*Math.abs(i[0]-i[1]));let d;if(t.tickCount=Math.max(r,Math.min(a,l)),t.minTickCount=r,t.maxTickCount=a,t.arcLength=e,null!=n){const[e,i]=FU(t.getDomain().map(Number));d=n.filter((t=>t>=e&&t<=i)).sort(((e,t)=>e-t))}else d=t.ticks();return d.map((e=>({value:e,visible:!0})))}avoidLabelCollisions(e){let{minSpacing:t}=this.label;Number.isFinite(t)||(t=0);const i=(e,i)=>{if(e.hidden||i.hidden)return!1;const n=e.box.clone().grow(t/2),o=i.box.clone().grow(t/2);return n.collidesBBox(o)},n=e[0],o=e.at(-1);n!==o&&PU(n.x,o.x)&&PU(n.y,o.y)&&(o.hidden=!0);for(let s=1;s<e.length;s*=2){let t=!1;for(let n=s;n<e.length;n+=s){const o=e[n];if(i(e[n-s],o)){t=!0;break}}if(!t)return void e.forEach(((e,t)=>{t%s>0&&(e.hidden=!0,e.box=void 0)}))}e.forEach(((e,t)=>{t>0&&(e.hidden=!0,e.box=void 0)}))}};OU.className="AngleNumberAxis",OU.type="angle-number",dj([RU(DU(TU,AU("max"))),kU(NaN)],OU.prototype,"min",2),dj([RU(DU(TU,IU("min"))),kU(NaN)],OU.prototype,"max",2),dj([RU(EU)],OU.prototype,"interval",2);var BU={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",moduleFactory:e=>new OU(e)},{OrdinalTimeScale:GU,sortAndUniqueDates:zU}=mW,_U=class extends mW.CategoryAxis{constructor(e){super(e,new GU),this._lastSetDomain=void 0}normaliseDataDomain(e){return{domain:e,clipped:!1}}setDomain(e){if(this._lastSetDomain===e)return;this._lastSetDomain=e;const t=zU(e);super.setDomain(t)}onFormatChange(e,t,i,n){n?super.onFormatChange(e,t,i,n):this.labelFormatter=this.scale.tickFormat({ticks:e,domain:i})}};_U.className="OrdinalTimeAxis",_U.type="ordinal-time";var VU={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",moduleFactory:e=>new _U(e)},{ChartAxisDirection:HU,Validate:WU,NUMBER:jU,validateCrossLineValues:UU,clamp:KU,normalizeAngle360:YU,toRadians:ZU,isNumberEqual:XU,Group:qU,Path:QU,Sector:JU,RotatableText:$U}=mW,eK=class extends Oj{constructor(){super(...arguments),this.positionAngle=void 0}};dj([WU(jU,{optional:!0})],eK.prototype,"positionAngle",2);var tK=class extends Bj{constructor(){super(),this.direction=HU.Y,this.label=new eK,this.polygonNode=new QU,this.sectorNode=new JU,this.crossLineRange=new qU,this.labelNode=new $U,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t,type:i,value:n,range:o}=this;if(!t||!i||!UU(i,n,o,t))return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);"line"===i&&t instanceof mW.BandScale&&(this.type="range",this.range=[n,n]),this.updateRadii();const{innerRadius:s,outerRadius:r}=this;e&&(e=s>=this.axisInnerRadius&&r<=this.axisOuterRadius),this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.assignCrossLineGroup("range"===this.type,this.crossLineRange)}updateRadii(){const{range:e,scale:t,type:i,axisInnerRadius:n,axisOuterRadius:o}=this;if(!t)return{innerRadius:0,outerRadius:0};const s=e=>o+n-e;let r=0,a=0;if("line"===i)r=s(t.convert(this.value)),a=r;else{var l;const i=Math.abs(null!==(l=null===t||void 0===t?void 0:t.bandwidth)&&void 0!==l?l:0),n=e.map((e=>t.convert(e)));r=s(Math.max(...n)),a=s(Math.min(...n))+i}this.outerRadius=r,this.innerRadius=a}drawPolygon(e,t,i){t.forEach(((t,n)=>{const o=e*Math.cos(t),s=e*Math.sin(t);0===n?i.path.moveTo(o,s):i.path.lineTo(o,s)})),i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:n,shape:o,type:s,innerRadius:r,outerRadius:a}=this;if(!e||"polygon"!==o||!n||!t)return void(i.visible=!1);i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(a-l,t,i);const d=t.slice().reverse(),c="line"===s?a-l:r+l;this.drawPolygon(c,d,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:n,sectorNode:o,shape:s,innerRadius:r,outerRadius:a}=this;if(!e||"circle"!==s||!n)return void(o.visible=!1);o.visible=!0,o.startAngle=0,o.endAngle=2*Math.PI;const l=this.getPadding(),d=KU(t,r+l,i),c=KU(t,a-l,i);o.innerRadius=Math.min(d,c),o.outerRadius=Math.max(d,c),this.setSectorNodeProps(o)}updateLabelNode(e){var t,i;const{innerRadius:n,label:o,labelNode:s,scale:r,shape:a,type:l}=this;if(!e||!1===o.enabled||!o.text||!r)return void(s.visible=!1);const d=YU(ZU((null!==(t=o.positionAngle)&&void 0!==t?t:0)-90)),c=(XU(d,0)||d>0)&&d<Math.PI,h=c?d-Math.PI/2:d+Math.PI/2;let u=0;const p=null!==(i=this.gridAngles)&&void 0!==i?i:[];u="line"===l?n+o.padding:"circle"===a||p.length<3?n-o.padding:n*Math.cos(Math.PI/p.length)-o.padding;const g=u*Math.cos(d),m=u*Math.sin(d);let v;v="line"===l?c?"top":"bottom":c?"bottom":"top",this.setLabelNodeProps(s,g,m,v,h)}getPadding(){var e,t;const{scale:i}=this;if(!i)return 0;const n=Math.abs(null!==(e=i.bandwidth)&&void 0!==e?e:0),o=Math.abs(null!==(t=i.step)&&void 0!==t?t:0);return i instanceof mW.BandScale?(o-n)/2:0}};tK.className="RadiusCrossLine";var{ChartAxisDirection:iK,Default:nK,ZIndexMap:oK,NUMBER:sK,BOOLEAN:rK,Validate:aK,isNumberEqual:lK,normalizeAngle360:dK,toRadians:cK,Caption:hK,Group:uK,Path:pK,Selection:gK}=mW,mK=class extends mW.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};dj([aK(rK,{optional:!0})],mK.prototype,"autoRotate",2),dj([aK(sK)],mK.prototype,"autoRotateAngle",2);var vK=class extends mW.PolarAxis{constructor(){super(...arguments),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new uK({name:"".concat(this.id,"-gridPaths"),zIndex:oK.AXIS_GRID})),this.gridPathSelection=gK.select(this.gridPathGroup,pK)}get direction(){return iK.Y}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:n}=this,o=e*n,s=cK(i);return{translationX:t.x,translationY:t.y-e-o,rotation:s,rotationCenterX:0,rotationCenterY:e+o}}updateSelections(e,t,i){var n;super.updateSelections(e,t,i);const{gridLine:{enabled:o,style:s,width:r},shape:a}=this;if(!s)return;const l=this.prepareTickData(t),d=s.length,[c,h]=null!==(n=this.gridRange)&&void 0!==n?n:[0,2*Math.PI],u=lK(h-c,2*Math.PI),p=(e,t)=>{const{path:i}=e;i.clear(!0);const n=this.getTickRadius(t);u?(i.moveTo(n,0),i.arc(0,0,n,0,2*Math.PI)):(i.moveTo(n*Math.cos(c),n*Math.sin(c)),i.arc(0,0,n,dK(c),dK(h))),u&&i.closePath()},g=(e,t)=>{const{path:i}=e,n=this.gridAngles;if(i.clear(!0),!n||n.length<3)return;const o=this.getTickRadius(t);n.forEach(((e,t)=>{const s=o*Math.cos(e),r=o*Math.sin(e);0===t?i.moveTo(s,r):i.lineTo(s,r),n.forEach(((e,t)=>{const n=o*Math.cos(e),s=o*Math.sin(e);0===t?i.moveTo(n,s):i.lineTo(n,s)})),i.closePath()})),i.closePath()};this.gridPathSelection.update(o?l:[]).each(((e,t,i)=>{((e,t)=>{const{stroke:i,lineDash:n}=s[t%d];e.stroke=i,e.strokeWidth=r,e.lineDash=n,e.fill=void 0})(e,i),"circle"===a?p(e,t):g(e,t)}))}updateTitle(){const e=e=>e.defaultValue,{title:t,range:i,moduleCtx:{callbackCache:n}}=this,{formatter:o=e}=this.title;t.caption.enabled=t.enabled,t.caption.fontFamily=t.fontFamily,t.caption.fontSize=t.fontSize,t.caption.fontStyle=t.fontStyle,t.caption.fontWeight=t.fontWeight,t.caption.color=t.color,t.caption.wrapping=t.wrapping;let s=!1;const r=t.caption.node;t.enabled&&(s=!0,r.rotation=Math.PI/2,r.x=Math.floor((i[0]+i[1])/2),r.y=-hK.SMALL_PADDING,r.textAlign="center",r.textBaseline="bottom",r.text=n.call(o,this.getTitleFormatterParams())),r.visible=s}updateCrossLines(){this.crossLines.forEach((e=>{if(e instanceof tK){const{shape:t,gridAngles:i,range:n,innerRadiusRatio:o}=this,s=n[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=s,e.axisInnerRadius=s*o}})),super.updateCrossLines()}createLabel(){return new mK}};vK.CrossLineConstructor=tK,dj([aK(sK),nK(0)],vK.prototype,"positionAngle",2);var{RATIO:fK,ProxyPropertyOnWrite:yK,Validate:bK,BandScale:CK}=mW,xK=class extends vK{constructor(e){super(e,new CK),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t,innerRadiusRatio:i}=this,n=t.range[0],o=n*i;if(t instanceof CK){const i=t.ticks(),n=i.length-1-i.indexOf(e.tickId);return 0===n?o:t.inset+t.step*(n-.5)+t.bandwidth/2}{const i=(n-o)/t.domain.length;return n-e.translationY+o-i/2}}};xK.className="RadiusCategoryAxis",xK.type="radius-category",dj([bK(fK)],xK.prototype,"groupPaddingInner",2),dj([yK("scale","paddingInner"),bK(fK)],xK.prototype,"paddingInner",2),dj([yK("scale","paddingOuter"),bK(fK)],xK.prototype,"paddingOuter",2);var wK={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",moduleFactory:e=>new xK(e)},{AND:SK,Default:MK,GREATER_THAN:DK,LESS_THAN:kK,NUMBER_OR_NAN:IK,Validate:AK,normalisedExtentWithMetadata:TK,LinearScale:EK}=mW,RK=class extends vK{constructor(e){super(e,new EK),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(e){var t;const{scale:i}=this,n=null===(t=i.getDomain)||void 0===t?void 0:t.call(i)[1];return e.filter((e=>{let{tick:t}=e;return t!==n})).sort(((e,t)=>t.tick-e.tick))}getTickRadius(e){const{scale:t}=this,i=t.range[0],n=i*this.innerRadiusRatio;return i-e.translationY+n}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:o}=TK(e,t,i);return{domain:n,clipped:o}}};RK.className="RadiusNumberAxis",RK.type="radius-number",dj([AK(SK(IK,kK("max"))),MK(NaN)],RK.prototype,"min",2),dj([AK(SK(IK,DK("min"))),MK(NaN)],RK.prototype,"max",2);var LK={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",moduleFactory:e=>new RK(e)},{BOOLEAN:PK,POSITIVE_NUMBER:NK,ObserveChanges:FK,Validate:OK}=mW,BK=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,e.animationManager.skip(!1)}};dj([FK(((e,t)=>{e.ctx.animationManager.skip(!t)})),OK(PK)],BK.prototype,"enabled",2),dj([FK(((e,t)=>{e.ctx.animationManager.defaultDuration=t})),OK(NK,{optional:!0})],BK.prototype,"duration",2);var GK={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new BK(e),themeTemplate:{animation:{enabled:!0}}},{focusCursorAtEnd:zK}=mW,_K="text-input",VK="canvas-overlay",HK=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1,this.element=e.domManager.addChild(VK,_K),this.element.classList.add("ag-charts-text-input"),this.destroyFns.push((()=>e.domManager.removeChild(VK,_K)))}setKeyDownHandler(e){this.element.addEventListener("keydown",e),this.destroyFns.push((()=>this.element.removeEventListener("keydown",e)))}show(e){var t,i,n,o,s,r,a,l,d,c,h,u,p,g;this.element.innerHTML='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>';const m=this.element.firstElementChild;var v;(mW.setAttribute(m,"data-preventdefault",!1),m.isContentEditable||(m.contentEditable="true"),m.setAttribute("placeholder",this.ctx.localeManager.t(null!==(t=e.placeholderText)&&void 0!==t?t:"inputTextareaPlaceholder")),null!==(i=e.styles)&&void 0!==i&&i.placeholderColor)&&m.style.setProperty("--ag-charts-input-placeholder-color",null===(v=e.styles)||void 0===v?void 0:v.placeholderColor);m.innerText=null!==(n=e.text)&&void 0!==n?n:"",m.style.color=null!==(o=null===(s=e.styles)||void 0===s?void 0:s.color)&&void 0!==o?o:"inherit",m.style.fontFamily=null!==(r=null===(a=e.styles)||void 0===a?void 0:a.fontFamily)&&void 0!==r?r:"inherit",m.style.fontSize=null!==(l=e.styles)&&void 0!==l&&l.fontSize?"".concat(e.styles.fontSize,"px"):"inherit",m.style.fontStyle=null!==(d=null===(c=e.styles)||void 0===c?void 0:c.fontStyle)&&void 0!==d?d:"inherit",m.style.fontWeight="number"===typeof(null===(h=e.styles)||void 0===h?void 0:h.fontWeight)?"".concat(e.styles.fontWeight):null!==(u=null===(p=e.styles)||void 0===p?void 0:p.fontWeight)&&void 0!==u?u:"inherit",zK(m),m.addEventListener("input",(()=>{var t;this.updatePosition(),null===(t=e.onChange)||void 0===t||t.call(e,this.getValue(),this.getBBox())})),m.addEventListener("click",(e=>{e.stopPropagation()})),e.layout&&(this.layout=e.layout,this.updatePosition()),null===(g=e.onChange)||void 0===g||g.call(e,this.getValue(),this.getBBox()),this.visible=!0}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1}isVisible(){return this.visible}updateColor(e){this.element.firstElementChild&&(this.element.firstElementChild.style.color=e)}updateFontSize(e){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize="".concat(e,"px"),this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:e}=this,t=e.firstElementChild;if(!t)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:n,getTextInputCoords:o,getTextPosition:s,alignment:r,textAlign:a}=this.layout;e.style.setProperty("width",n?"".concat(n,"px"):"unset");const l=t.getBoundingClientRect(),d=o(l.height);let c=d.x;"center"===r?c-=(null!==n&&void 0!==n?n:l.width)/2:"right"===r&&(c-=null!==n&&void 0!==n?n:l.width);const h=s();let u=d.y;"center"===h?u-=l.height/2:"bottom"===h&&(u-=l.height),e.style.setProperty("top","".concat(u,"px")),e.style.setProperty("left","".concat(c,"px")),e.style.setProperty("max-width","".concat(i.width-c,"px")),e.style.setProperty("text-align",r),t.style.setProperty("text-align",a)}getBBox(){const{left:e,top:t,width:i,height:n}=this.element.getBoundingClientRect();return new mW.BBox(e,t,i,n)}},{BOOLEAN:WK,BaseProperties:jK,Validate:UK,UNION:KK}=mW,YK=KK(["x","y","xy"],"an axis type"),ZK=class extends jK{constructor(){super(...arguments),this.enabled=!0,this.axes="y"}};dj([UK(WK)],ZK.prototype,"enabled",2),dj([UK(YK,{optional:!0})],ZK.prototype,"axes",2);var XK=(e=>(e.Line="line",e.HorizontalLine="horizontal-line",e.VerticalLine="vertical-line",e.DisjointChannel="disjoint-channel",e.ParallelChannel="parallel-channel",e.FibonacciRetracement="fibonacci-retracement",e.Callout="callout",e.Comment="comment",e.Note="note",e.Text="text",e.Arrow="arrow",e.ArrowUp="arrow-up",e.ArrowDown="arrow-down",e.DateRange="date-range",e.PriceRange="price-range",e.DatePriceRange="date-price-range",e.QuickDatePriceRange="quick-date-price-range",e))(XK||{}),qK=Object.values(XK);var{BOOLEAN:QK,COLOR_STRING:JK,DATE:$K,FONT_STYLE:eY,FONT_WEIGHT:tY,FUNCTION:iY,LINE_DASH:nY,LINE_STYLE:oY,NUMBER:sY,OBJECT:rY,OR:aY,POSITIVE_NUMBER:lY,RATIO:dY,STRING:cY,TEXT_ALIGN:hY,UNION:uY,BaseProperties:pY,Validate:gY,generateUUID:mY}=mW,vY=class extends pY{};dj([gY(aY(cY,sY,$K))],vY.prototype,"x",2),dj([gY(sY)],vY.prototype,"y",2);var fY=class extends(OY(BY(NY(pY)))){},yY=class extends(OY(BY(FY(RY(GY(pY)))))){constructor(){super(...arguments),this.cornerRadius=2}};dj([gY(QK)],yY.prototype,"enabled",2),dj([gY(lY)],yY.prototype,"cornerRadius",2);var bY=class extends(FY(pY)){},CY=class extends(OY(BY(FY(pY)))){},xY=class extends(GY(pY)){constructor(){super(...arguments),this.label="",this.position="top",this.alignment="left"}};dj([gY(cY)],xY.prototype,"label",2),dj([gY(uY(["top","center","bottom"]),{optional:!0})],xY.prototype,"position",2),dj([gY(uY(["left","center","right"]),{optional:!0})],xY.prototype,"alignment",2);var wY=class extends(GY(pY)){},SY=class extends(GY(pY)){constructor(){super(...arguments),this.label=""}};function MY(e){class t extends(function(e){class t extends e{}return dj([gY(QK,{optional:!0})],t.prototype,"locked",2),t}(NY(e))){constructor(){super(...arguments),this.id=mY()}isValidWithContext(e,t){return super.isValid(t)}}return t}function DY(e){class t extends e{constructor(){super(...arguments),this.start=new vY,this.end=new vY}}return dj([gY(rY)],t.prototype,"start",2),dj([gY(rY)],t.prototype,"end",2),t}function kY(e){class t extends e{}return dj([gY(aY(cY,sY,$K))],t.prototype,"x",2),dj([gY(sY)],t.prototype,"y",2),t}function IY(e){class t extends e{}return dj([gY(aY(cY,sY,$K))],t.prototype,"value",2),t}function AY(e){class t extends e{constructor(){super(...arguments),this.background=new bY}}return dj([gY(rY,{optional:!0})],t.prototype,"background",2),t}function TY(e){class t extends e{constructor(){super(...arguments),this.handle=new CY}}return dj([gY(rY,{optional:!0})],t.prototype,"handle",2),t}function EY(e){class t extends e{constructor(){super(...arguments),this.axisLabel=new yY}}return dj([gY(rY,{optional:!0})],t.prototype,"axisLabel",2),t}function RY(e){class t extends e{constructor(){super(...arguments),this.textAlign="center"}}return dj([gY(lY,{optional:!0})],t.prototype,"padding",2),dj([gY(hY,{optional:!0})],t.prototype,"textAlign",2),dj([gY(iY,{optional:!0})],t.prototype,"formatter",2),t}function LY(e){class t extends e{}return dj([gY(QK,{optional:!0})],t.prototype,"extendStart",2),dj([gY(QK,{optional:!0})],t.prototype,"extendEnd",2),t}function PY(e){return class extends e{setLocaleManager(e){var t;null!==(t=this.localeManager)&&void 0!==t||(this.localeManager=e)}}}function NY(e){class t extends e{}return dj([gY(QK,{optional:!0})],t.prototype,"visible",2),t}function FY(e){class t extends e{}return dj([gY(JK,{optional:!0})],t.prototype,"fill",2),dj([gY(dY,{optional:!0})],t.prototype,"fillOpacity",2),t}function OY(e){class t extends e{}return dj([gY(JK,{optional:!0})],t.prototype,"stroke",2),dj([gY(dY,{optional:!0})],t.prototype,"strokeOpacity",2),dj([gY(sY,{optional:!0})],t.prototype,"strokeWidth",2),t}function BY(e){class t extends e{constructor(){super(...arguments),this.lineCap=void 0,this.computedLineDash=void 0}}return dj([gY(nY,{optional:!0})],t.prototype,"lineDash",2),dj([gY(sY,{optional:!0})],t.prototype,"lineDashOffset",2),dj([gY(oY,{optional:!0})],t.prototype,"lineStyle",2),t}function GY(e){class t extends e{constructor(){super(...arguments),this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}return dj([gY(eY,{optional:!0})],t.prototype,"fontStyle",2),dj([gY(tY,{optional:!0})],t.prototype,"fontWeight",2),dj([gY(lY)],t.prototype,"fontSize",2),dj([gY(cY)],t.prototype,"fontFamily",2),dj([gY(JK,{optional:!0})],t.prototype,"color",2),t}function zY(e,t){if(null==e.start||null==e.end)return;const i=_Y(e.start,t),n=_Y(e.end,t);return null!=i&&null!=n?{x1:i.x,y1:i.y,x2:n.x,y2:n.y}:void 0}function _Y(e,t){return{x:VY(e.x,t.xAxis),y:VY(e.y,t.yAxis)}}function VY(e,t){var i;if(null==e)return 0;const n=(null!==(i=t.scale.bandwidth)&&void 0!==i?i:0)/2;return t.scale.convert(e)+n}function HY(e,t){return{x:WY(e.x,t.xAxis),y:WY(e.y,t.yAxis)}}function WY(e,t){var i;const n=(null!==(i=t.scale.bandwidth)&&void 0!==i?i:0)/2;return t.continuous?t.scaleInvert(e-n):t.scaleInvertNearest(e-n)}dj([gY(cY)],SY.prototype,"label",2),dj([gY(uY(["top","inside","bottom"]),{optional:!0})],SY.prototype,"position",2),dj([gY(uY(["left","center","right"]),{optional:!0})],SY.prototype,"alignment",2);var{BaseProperties:jY}=mW,UY=class extends(MY(DY(TY(jY)))){constructor(){super(...arguments),this.snapToAngle=45}isValidWithContext(e,t){return super.isValid(t)}getDefaultColor(e){}getDefaultOpacity(e){}},{STRING:KY,Validate:YY}=mW,ZY=class extends(PY(RY(GY(UY)))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(e,t){return super.isValid(t)}getDefaultColor(e){return this.color}getDefaultOpacity(e){}getPlaceholderColor(){}getPadding(){const{padding:e=0}=this;return{top:e,right:e,bottom:e,left:e}}getText(){const e=0==this.text.length;let t=this.text;var i;e&&(t=null!==(i=this.placeholderText)&&void 0!==i?i:"",this.localeManager&&(t=this.localeManager.t(t)));return{text:t,isPlaceholder:e}}getTextInputCoords(e,t){return _Y(this.end,e)}getTextPosition(){return this.position}};dj([YY(KY)],ZY.prototype,"text",2);var{STRING:XY,Validate:qY,isObject:QY,Color:JY}=mW,$Y={top:6,right:12,bottom:9,left:12},eZ=class extends(FY(OY(ZY))){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(e){return QY(e)&&"callout"===e.type}getDefaultColor(e){switch(e){case"fill-color":return this.fill;case"line-color":return this.stroke;default:return this.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;default:return}}getPlaceholderColor(){var e;const{r:t,g:i,b:n}=JY.fromString(null!==(e=this.color)&&void 0!==e?e:"#888888");return new JY(t,i,n,.66).toString()}getPadding(){const{padding:e}=this;return null==e?l({},$Y):{top:e,right:e,bottom:e,left:e}}getTextInputCoords(e,t){var i,n;const o=super.getTextInputCoords(e,t),s=this.getPadding(),r="number"===typeof s?s:null!==(i=null===s||void 0===s?void 0:s.left)&&void 0!==i?i:0,a="number"===typeof s?s:null!==(n=null===s||void 0===s?void 0:s.bottom)&&void 0!==n?n:0;return{x:o.x+r,y:o.y-a}}};dj([qY(XY)],eZ.prototype,"type",2);var{STRING:tZ,BaseProperties:iZ,Validate:nZ}=mW,oZ=class extends(MY(kY(TY(RY(GY(iZ)))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(e,t){return super.isValid(t)}getDefaultColor(e){return this.color}getDefaultOpacity(e){}getPlaceholderColor(){}getPadding(){const{padding:e=0}=this;return{top:e,right:e,bottom:e,left:e}}getText(){var e;const t=0==this.text.length;return{text:t?null!==(e=this.placeholderText)&&void 0!==e?e:"":this.text,isPlaceholder:t}}getTextInputCoords(e,t){return _Y(this,e)}getTextPosition(){return this.position}};dj([nZ(tZ)],oZ.prototype,"text",2);var{STRING:sZ,Validate:rZ,isObject:aZ,Color:lZ}=mW,dZ=8,cZ=14,hZ=8,uZ=14,pZ=class extends(FY(OY(oZ))){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(e){return aZ(e)&&"comment"===e.type}getDefaultColor(e){switch(e){case"fill-color":return this.fill;case"line-color":return this.stroke;default:return this.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;default:return}}getPlaceholderColor(){var e;const{r:t,g:i,b:n}=lZ.fromString(null!==(e=this.color)&&void 0!==e?e:"#888888");return new lZ(t,i,n,.66).toString()}getPadding(){const{padding:e,fontSize:t}=this;return null==e?{top:Math.max(.4*t,dZ),bottom:Math.max(.4*t,hZ),left:Math.max(.8*t,uZ),right:Math.max(.8*t,cZ)}:{top:e,right:e,bottom:e,left:e}}getTextInputCoords(e,t){const i=super.getTextInputCoords(e,t),n=this.getPadding();return{x:i.x+n.left,y:i.y-n.bottom}}};dj([rZ(sZ)],pZ.prototype,"type",2);var{Vec2:gZ}=mW;function mZ(e,t){return e?"dashed":null!==t&&void 0!==t?t:"solid"}function vZ(e,t){switch(t){case"solid":return[];case"dashed":return[4*e,2*e];case"dotted":return[0,2*e]}}function fZ(e,t,i,n){var o;const s=mZ(e,i);return null!==(o=null!==t&&void 0!==t?t:e)&&void 0!==o?o:vZ(null!==n&&void 0!==n?n:1,s)}function yZ(e,t,i){const n=mZ(t,i);return(null!==e&&void 0!==e?e:"dotted"===n)?"round":void 0}var{BOOLEAN:bZ,OBJECT:CZ,STRING:xZ,BaseProperties:wZ,Validate:SZ,isObject:MZ}=mW,DZ=class extends(OY(wZ)){},kZ=class extends(GY(FY(OY(wZ)))){constructor(){super(...arguments),this.divider=new DZ}};dj([SZ(CZ,{optional:!0})],kZ.prototype,"divider",2);var IZ=class extends(FY(OY(TY(wZ)))){constructor(){super(...arguments),this.statistics=new kZ}};dj([SZ(CZ,{optional:!0})],IZ.prototype,"statistics",2);var AZ=class extends(PY(AY(OY(BY(UY))))){constructor(){super(...arguments),this.direction="both",this.hasDateRange=!1,this.hasPriceRange=!1,this.statistics=new kZ,this.getVolume=()=>{},this.text=new xY}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return fZ(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return yZ(this.lineCap,this.lineDash,this.lineStyle)}};function TZ(e){return class extends e{constructor(){super(...arguments),this.hasDateRange=!0}}}function EZ(e){return class extends e{constructor(){super(...arguments),this.hasPriceRange=!0}}}dj([SZ(CZ,{optional:!0})],AZ.prototype,"statistics",2),dj([SZ(CZ,{optional:!0})],AZ.prototype,"text",2);var RZ=class extends(TZ(AZ)){constructor(){super(...arguments),this.type="date-range",this.direction="horizontal"}static is(e){return MZ(e)&&"date-range"===e.type}};dj([SZ(xZ)],RZ.prototype,"type",2),dj([SZ(bZ,{optional:!0})],RZ.prototype,"extendAbove",2),dj([SZ(bZ,{optional:!0})],RZ.prototype,"extendBelow",2);var LZ=class extends(EZ(AZ)){constructor(){super(...arguments),this.type="price-range",this.direction="vertical"}static is(e){return MZ(e)&&"price-range"===e.type}};dj([SZ(xZ)],LZ.prototype,"type",2),dj([SZ(bZ,{optional:!0})],LZ.prototype,"extendLeft",2),dj([SZ(bZ,{optional:!0})],LZ.prototype,"extendRight",2);var PZ=class extends(TZ(EZ(AZ))){constructor(){super(...arguments),this.type="date-price-range",this.direction="both"}static is(e){return MZ(e)&&"date-price-range"===e.type}};dj([SZ(xZ)],PZ.prototype,"type",2);var NZ=class extends(TZ(EZ(AZ))){constructor(){super(...arguments),this.type="quick-date-price-range",this.up=new IZ,this.down=new IZ,this.direction="both"}static is(e){return MZ(e)&&"quick-date-price-range"===e.type}};dj([SZ(xZ)],NZ.prototype,"type",2),dj([SZ(CZ,{optional:!0})],NZ.prototype,"up",2),dj([SZ(CZ,{optional:!0})],NZ.prototype,"down",2);var{TextWrapper:FZ,CachedTextMeasurerPool:OZ,BBox:BZ}=mW,GZ=1.38;function zZ(e){return{font:{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},textAlign:e.textAlign,textBaseline:"center"==e.position?"middle":e.position,lineHeight:GZ,avoidOrphans:!1,textWrap:"always"}}function _Z(e,t,i){return i?FZ.wrapText(t,l(l({},zZ(e)),{},{maxWidth:i})):t}function VZ(e,t,i,n){var o,s;let r=null!==(o=null===n||void 0===n?void 0:n.width)&&void 0!==o?o:0,a=null!==(s=null===n||void 0===n?void 0:n.height)&&void 0!==s?s:0;if(!n){const i=null!=e.width?_Z(e,t,e.width):t;({width:r,height:a}=function(e,t){var i;const n=zZ(e),{lineMetrics:o,width:s}=OZ.measureLines(t,n);return{width:s,height:o.length*(null!==(i=e.fontSize)&&void 0!==i?i:14)*GZ}}(e,i))}return new BZ(i.x,i.y,r,a)}function HZ(e,t,i,n,o){let{x:s,y:r}=o;const{visible:a=!0,fontFamily:l,fontSize:d=14,fontStyle:c,fontWeight:h,textAlign:u}=n,p=d*GZ,g="center"==n.position?"middle":n.position,m=i?n.getPlaceholderColor():n.color;e.setProperties({x:s,y:r,visible:a,text:t,fill:m,fontFamily:l,fontSize:d,fontStyle:c,fontWeight:h,textAlign:u,lineHeight:p,textBaseline:g})}var{OBJECT:WZ,STRING:jZ,BaseProperties:UZ,Validate:KZ,isObject:YZ,clamp:ZZ}=mW,XZ=class extends(FY(OY(UZ))){},qZ=class extends(FY(OY(oZ))){constructor(){super(...arguments),this.type="note",this.background=new XZ,this.position="bottom",this.alignment="center",this.width=200}static is(e){return YZ(e)&&"note"===e.type}getDefaultColor(e){switch(e){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(e){switch(e){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){var e;const t=null!==(e=this.padding)&&void 0!==e?e:10;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(e,t){const{width:i,text:n}=this,o=super.getTextInputCoords(e,t),s=this.getPadding().top,r=VZ(this,n,o);r.x=ZZ(i/2,r.x,e.seriesRect.width-i/2);const a=r.y-30-2*s,l=r.y+11+2*s;return a-Math.max(r.height,t)-34<0?(r.y=l,this.position="top"):(r.y=a+s,this.position="bottom"),{x:r.x,y:r.y}}};dj([KZ(jZ)],qZ.prototype,"type",2),dj([KZ(WZ,{optional:!0})],qZ.prototype,"background",2);var{BaseProperties:QZ}=mW,JZ=class extends(MY(kY(TY(QZ)))){isValidWithContext(e,t){return super.isValid(t)}getDefaultColor(e){}getDefaultOpacity(e){}},$Z=class e extends(FY(JZ)){constructor(){super(...arguments),this.size=32}static is(t){return t instanceof e}getDefaultColor(e){return"fill-color"===e?this.fill:void 0}getDefaultOpacity(e){return"fill-color"===e?this.fillOpacity:void 0}},{Logger:eX}=mW;function tX(e,t,i,n){let o=!0;return o&&(o=nX(e,t.start,i,n&&"".concat(n,"[start] "))),o&&(o=nX(e,t.end,i,n&&"".concat(n,"[end] "))),o}function iX(e,t,i){const n="horizontal"===t.direction?e.yAxis:e.xAxis,o=oX(t.value,n);return!o&&i&&eX.warnOnce("".concat(i,"is outside the axis domain, ignoring. - value: [").concat(t.value,"]]")),o}function nX(e,t,i,n){if(null==t.x||null==t.y)return n&&eX.warnOnce("".concat(n,"requires both an [x] and [y] property, ignoring.")),!1;const o=!1===(null===i||void 0===i?void 0:i.x)||oX(t.x,e.xAxis),s=!1===(null===i||void 0===i?void 0:i.y)||oX(t.y,e.yAxis);if(!o||!s){let e="x & y domains";return o&&(e="y domain"),s&&(e="x domain"),n&&eX.warnOnce("".concat(n,"is outside the ").concat(e,", ignoring. - x: [").concat(t.x,"], y: ").concat(t.y,"]")),!1}return!0}function oX(e,t){var i,n;const o=null===(i=(n=t.scale).getDomain)||void 0===i?void 0:i.call(n);return!o||!t.continuous||e>=o[0]&&e<=o.at(-1)}function sX(e){return null!=(null===e||void 0===e?void 0:e.x)&&null!=(null===e||void 0===e?void 0:e.y)}var{OBJECT:rX,STRING:aX,BaseProperties:lX,Validate:dX,isObject:cX}=mW,hX=class extends(MY(IY(TY(EY(OY(BY(lX))))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line",this.text=new xY}static is(e){return cX(e)&&"horizontal-line"===e.type}isValidWithContext(e,t){return super.isValid(t)&&iX(e,this,t)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return fZ(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return yZ(this.lineCap,this.lineDash,this.lineStyle)}};dj([dX(aX)],hX.prototype,"type",2),dj([dX(rX,{optional:!0})],hX.prototype,"text",2);var uX=class extends(MY(IY(TY(EY(OY(BY(lX))))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line",this.text=new xY}static is(e){return cX(e)&&"vertical-line"===e.type}isValidWithContext(e,t){return super.isValid(t)&&iX(e,this,t)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return fZ(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return yZ(this.lineCap,this.lineDash,this.lineStyle)}};dj([dX(aX)],uX.prototype,"type",2),dj([dX(rX,{optional:!0})],uX.prototype,"text",2);var{NUMBER:pX,OBJECT:gX,STRING:mX,BaseProperties:vX,Validate:fX,isObject:yX,Logger:bX}=mW,CX=class extends(MY(AY(DY(TY(LY(OY(BY(vX)))))))){constructor(){super(...arguments),this.type="disjoint-channel",this.text=new SY,this.snapToAngle=45}static is(e){return yX(e)&&"disjoint-channel"===e.type}get bottom(){const e={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return"number"===typeof e.start.y&&"number"===typeof e.end.y?(e.start.y-=this.startHeight,e.end.y-=this.endHeight):bX.warnOnce("Annotation [".concat(this.type,"] can only be used with a numeric y-axis.")),e}isValidWithContext(e,t){return super.isValid(t)&&tX(e,this,{y:!1},t)&&tX(e,this.bottom,{y:!1},t)}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return fZ(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return yZ(this.lineCap,this.lineDash,this.lineStyle)}};dj([fX(mX)],CX.prototype,"type",2),dj([fX(pX)],CX.prototype,"startHeight",2),dj([fX(pX)],CX.prototype,"endHeight",2),dj([fX(gX,{optional:!0})],CX.prototype,"text",2);var{OBJECT:xX,STRING:wX,Validate:SX,isObject:MX}=mW,DX=class extends(PY(function(e){return class extends e{}}(LY(OY(BY(UY)))))){constructor(){super(...arguments),this.text=new xY}isValidWithContext(e,t){return super.isValid(t)&&tX(e,this,void 0,t)}getDefaultColor(e){switch(e){case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return fZ(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return yZ(this.lineCap,this.lineDash,this.lineStyle)}};dj([SX(xX,{optional:!0})],DX.prototype,"text",2);var kX=class extends DX{constructor(){super(...arguments),this.type="arrow",this.endCap="arrow"}static is(e){return MX(e)&&"arrow"===e.type}};dj([SX(wX)],kX.prototype,"type",2);var IX=class extends DX{constructor(){super(...arguments),this.type="line"}static is(e){return MX(e)&&"line"===e.type}};dj([SX(wX)],IX.prototype,"type",2);var{OBJECT:AX,BOOLEAN:TX,COLOR_STRING:EX,COLOR_STRING_ARRAY:RX,Validate:LX,predicateWithMessage:PX,isFiniteNumber:NX}=mW,FX=[10,6,4],OX=PX((e=>NX(e)&&FX.includes(e)),"Number of fibonacci ranges, 10, 6 or 4"),BX=class extends DX{constructor(){super(...arguments),this.label=new wY,this.reverse=!1,this.showFill=!0,this.isMultiColor=!0,this.strokes=[],this.bands=10}getDefaultColor(e){var t;switch(e){case"line-color":return null!==(t=this.rangeStroke)&&void 0!==t?t:this.stroke;case"text-color":return this.text.color}}};dj([LX(AX,{optional:!0})],BX.prototype,"label",2),dj([LX(TX,{optional:!0})],BX.prototype,"reverse",2),dj([LX(TX,{optional:!0})],BX.prototype,"showFill",2),dj([LX(TX,{optional:!0})],BX.prototype,"isMultiColor",2),dj([LX(RX,{optional:!0})],BX.prototype,"strokes",2),dj([LX(EX,{optional:!0})],BX.prototype,"rangeStroke",2),dj([LX(OX,{optional:!0})],BX.prototype,"bands",2);var{STRING:GX,Validate:zX,isObject:_X}=mW,VX=class extends BX{constructor(){super(...arguments),this.type="fibonacci-retracement"}static is(e){return _X(e)&&"fibonacci-retracement"===e.type}};dj([zX(GX)],VX.prototype,"type",2);var{NUMBER:HX,STRING:WX,OBJECT:jX,BaseProperties:UX,Validate:KX,isObject:YX,Logger:ZX}=mW,XX=class extends(MY(AY(DY(TY(LY(OY(BY(UX)))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new fY,this.text=new SY,this.snapToAngle=45}static is(e){return YX(e)&&"parallel-channel"===e.type}get bottom(){const e={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return"number"===typeof e.start.y&&"number"===typeof e.end.y?(e.start.y-=this.height,e.end.y-=this.height):ZX.warnOnce("Annotation [".concat(this.type,"] can only be used with a numeric y-axis.")),e}isValidWithContext(e,t){return super.isValid(t)&&tX(e,this,{y:!1},t)&&tX(e,this.bottom,{y:!1},t)}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return fZ(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return yZ(this.lineCap,this.lineDash,this.lineStyle)}};dj([KX(WX)],XX.prototype,"type",2),dj([KX(HX)],XX.prototype,"height",2),dj([KX(jX,{optional:!0})],XX.prototype,"middle",2),dj([KX(jX,{optional:!0})],XX.prototype,"text",2);var{STRING:qX,Validate:QX,isObject:JX}=mW,$X=class extends oZ{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(e){return JX(e)&&"text"===e.type}};function eq(e){return NZ.is(e)}function tq(e){return IX.is(e)||hX.is(e)||uX.is(e)||kX.is(e)||nq(e)}function iq(e){return CX.is(e)||XX.is(e)}function nq(e){return VX.is(e)}function oq(e){return eZ.is(e)||pZ.is(e)||qZ.is(e)||$X.is(e)}function sq(e){return RZ.is(e)||LZ.is(e)||PZ.is(e)||NZ.is(e)}dj([QX(qX)],$X.prototype,"type",2);var{isObject:rq}=mW;function aq(e){return oq(e)&&!qZ.is(e)}function lq(e){return tq(e)||iq(e)||sq(e)&&!NZ.is(e)}function dq(e){return tq(e)||iq(e)||sq(e)||eZ.is(e)||qZ.is(e)}function cq(e){return iq(e)||sq(e)||eZ.is(e)||pZ.is(e)||$Z.is(e)}function hq(e){return oq(e)&&!qZ.is(e)}function uq(e){return(tq(e)||iq(e)||sq(e))&&!eq(e)&&rq(e.text)}function pq(e,t){"fontSize"in e&&(e.fontSize=t),uq(e)&&(e.text.fontSize=t)}function gq(e,t){var i,n,o;const s=null!==(i=null!==(n=null===t||void 0===t?void 0:t.strokeWidth)&&void 0!==n?n:e.strokeWidth)&&void 0!==i?i:1,r=null!==(o=null===t||void 0===t?void 0:t.type)&&void 0!==o?o:e.lineStyle,a=null!==r&&void 0!==r?r:mZ(e.lineDash,r),l=vZ(s,a);e.strokeWidth=s,e.computedLineDash=l,e.lineStyle=a,e.lineCap="dotted"===a?"round":void 0}function mq(e,t,i,n,o,s){switch(t){case"fill-color":"fill"in e&&(e.fill=n),"fillOpacity"in e&&(e.fillOpacity=o),"background"in e&&(e.background.fill=n,e.background.fillOpacity=o);break;case"line-color":"axisLabel"in e&&(e.axisLabel.fill=n,e.axisLabel.fillOpacity=o,e.axisLabel.stroke=n,e.axisLabel.strokeOpacity=o),"fill"in e&&"fillOpacity"in e&&function(e){return qZ.is(e)}(e)?(e.fill=n,e.fillOpacity=o):("strokeOpacity"in e&&(e.strokeOpacity=o),"isMultiColor"in e&&"rangeStroke"in e?(e.isMultiColor=s,e.rangeStroke=n):"stroke"in e&&(e.stroke=n));break;case"text-color":"color"in e&&(e.color=i),uq(e)&&(e.text.color=n)}}var{deepClone:vq}=mW,fq=class{constructor(){this.mementoOriginatorKey="annotation-defaults",this.colors=new Map(Object.values(XK).map((e=>[e,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])]))),this.fontSizes=new Map([["callout",void 0],["comment",void 0],["text",void 0],["arrow",void 0],["line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineStyles=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextAlignments=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextPositions=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.fibonacciBands=new Map([["fibonacci-retracement",void 0]])}createMemento(){return{colors:vq(this.colors),fontSizes:vq(this.fontSizes),lineStyles:vq(this.lineStyles),lineTextAlignments:vq(this.lineTextAlignments),lineTextPositions:vq(this.lineTextPositions),fibonacciBands:vq(this.fibonacciBands)}}guardMemento(e){return!0}restoreMemento(e,t,i){this.colors=vq(i.colors),this.fontSizes=vq(i.fontSizes),this.lineStyles=vq(i.lineStyles),this.lineTextAlignments=vq(i.lineTextAlignments),this.lineTextPositions=vq(i.lineTextPositions),this.fibonacciBands=vq(i.fibonacciBands)}setDefaultColor(e,t,i,n,o,s){var r;null===(r=this.colors.get(e))||void 0===r||r.set(t,[i,n,o,s])}setDefaultFontSize(e,t){this.fontSizes.set(e,t)}setDefaultLineStyleType(e,t){const i=this.lineStyles.get(e);i?i.type=t:this.lineStyles.set(e,{type:t})}setDefaultLineStyleWidth(e,t){const i=this.lineStyles.get(e);i?i.strokeWidth=t:this.lineStyles.set(e,{strokeWidth:t})}setDefaultLineTextAlignment(e,t){this.lineTextAlignments.set(e,t)}setDefaultLineTextPosition(e,t){this.lineTextPositions.set(e,t)}setDefaultFibonacciBands(e,t){"fibonacci-retracement"==e&&this.fibonacciBands.set(e,t)}applyDefaults(e){for(const[t,i]of this.colors)if(e.type===t)for(const[n,[o,s,r,a]=[]]of i)o&&s&&null!=r&&null!=a&&mq(e,n,o,s,r,a);for(const[t,i]of this.fontSizes)e.type===t&&null!=i&&pq(e,i);for(const[t,i]of this.lineStyles)e.type===t&&null!=i&&gq(e,i);for(const[t,i]of this.lineTextPositions)e.type===t&&null!=i&&(e.text.position=i);for(const[t,i]of this.lineTextAlignments)e.type===t&&null!=i&&(e.text.alignment=i);for(const[t,i]of this.fibonacciBands)e.type===t&&null!=i&&(e.bands=i)}},{createElement:yq,Color:bq,clamp:Cq}=mW,xq=e=>{try{const t=bq.fromString(e),[i,n,o]=t.toHSB();return[i,n,o,t.a]}catch(t){return}},wq=class extends mW.AnchoredPopover{constructor(e,t){super(e,"color-picker",t),this.hasChanged=!1,this.hideFns.push((()=>{var e;this.hasChanged&&(null===(e=this.onChangeHide)||void 0===e||e.call(this))}))}show(e){this.hasChanged=!1,this.onChangeHide=e.onChangeHide;const{element:t,initialFocus:i}=this.createColorPicker(e),n=this.showWithChildren([t],l({initialFocus:i},e));n.classList.add("ag-charts-color-picker"),n.setAttribute("role","dialog")}createColorPicker(e){var t,i,n,o,s=this;let r=null!==(t=e.isMultiColor)&&void 0!==t&&t,[a,l,d,c]=null!==(i=xq(null!==(n=e.color)&&void 0!==n?n:"#f00"))&&void 0!==i?i:[0,1,.5,1];c=null!==(o=e.opacity)&&void 0!==o?o:c;const h=yq("div","ag-charts-color-picker__content");h.innerHTML='<div class="ag-charts-color-picker__palette" tabindex="0"></div><div class="ag-charts-color-picker__color-row"><button class="ag-charts-color-picker__multi-color-button" tabindex="0" type="button"></button> <input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"></div><input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field"><span class="ag-charts-color-picker__color-label">Color</span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label>',h.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const u=h.querySelector(".ag-charts-color-picker__palette"),p=h.querySelector(".ag-charts-color-picker__hue-input"),g=h.querySelector(".ag-charts-color-picker__multi-color-button"),m=h.querySelector(".ag-charts-color-picker__alpha-input"),v=h.querySelector(".ag-charts-color-picker__color-input"),f=h.querySelector(".ag-charts-color-picker__color-label");g.classList.toggle("ag-charts-color-picker__multi-color-button--hidden",!e.hasMultiColorOption);const y=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const i=bq.fromHSB(a,l,d,c).toHexString();if(h.style.setProperty("--h","".concat(a)),h.style.setProperty("--s","".concat(l)),h.style.setProperty("--v","".concat(d)),h.style.setProperty("--a","".concat(c)),h.style.setProperty("--color",i.slice(0,7)),h.style.setProperty("--color-a",i),p.value="".concat(a),m.value="".concat(c),m.classList.toggle("ag-charts-color-picker__alpha-input--opaque",1===c),g.classList.toggle("ag-charts-color-picker__multi-color-button--active",r),f.classList.toggle("ag-charts-color-picker__color-label--multi-color",r),document.activeElement!==v&&(v.value=r?"Multi Colour":i.toUpperCase()),t||null==e.color){var n;const t=bq.fromHSB(a,l,d,1).toHexString();null===(n=e.onChange)||void 0===n||n.call(e,i,t,c,r)}t&&(s.hasChanged=!0)};y(!1);return h.addEventListener("mousedown",(e=>{e.stopPropagation()})),h.addEventListener("keydown",(e=>{switch(e.stopPropagation(),e.key){case"Enter":case"Escape":this.hide();break;default:return}e.preventDefault()})),u.addEventListener("mousedown",(e=>{e.preventDefault();const t=e.currentTarget;t.focus();const i=t.getBoundingClientRect(),n=e=>{let{pageX:t,pageY:n}=e;r=!1,l=Math.min(Math.max((t-i.left)/i.width,0),1),d=1-Math.min(Math.max((n-i.top)/i.height,0),1),y()};n(e),window.addEventListener("mousemove",n),window.addEventListener("mouseup",(()=>window.removeEventListener("mousemove",n)),{once:!0})})),u.addEventListener("keydown",(e=>{if("ArrowLeft"===e.key)l=Cq(0,l-.01,1);else if("ArrowRight"===e.key)l=Cq(0,l+.01,1);else if("ArrowUp"===e.key)d=Cq(0,d+.01,1);else{if("ArrowDown"!==e.key)return;d=Cq(0,d-.01,1)}e.preventDefault(),y()})),g.addEventListener("click",(()=>{r=!r,y()})),p.addEventListener("input",(e=>{var t;r=!1,a=null!==(t=e.currentTarget.valueAsNumber)&&void 0!==t?t:0,y()})),m.addEventListener("input",(e=>{var t;r=!1,c=null!==(t=e.currentTarget.valueAsNumber)&&void 0!==t?t:0,y()})),v.addEventListener("input",(e=>{r=!1;const t=xq(e.currentTarget.value);null!=t&&([a,l,d,c]=t,y())})),v.addEventListener("blur",(()=>y())),v.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.currentTarget.blur(),y())})),{element:h,initialFocus:u}}},Sq=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel"},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel"}],Mq=[{label:"toolbarAnnotationsFibonacciRetracement",icon:"fibonacci-retracement-drawing",value:"fibonacci-retracement"}],Dq=[{label:"Fibonacci - Extended",value:10},{label:"Fibonacci - 6 Band",value:6},{label:"Fibonacci - 4 Band",value:4}],kq=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],Iq=[{label:"toolbarAnnotationsArrow",icon:"arrow-drawing",value:"arrow"},{label:"toolbarAnnotationsArrowUp",icon:"arrow-up-drawing",value:"arrow-up"},{label:"toolbarAnnotationsArrowDown",icon:"arrow-down-drawing",value:"arrow-down"}],Aq=[{label:"toolbarAnnotationsQuickDatePriceRange",icon:"measurer-drawing",value:"quick-date-price-range"},{label:"toolbarAnnotationsDateRange",icon:"date-range-drawing",value:"date-range"},{label:"toolbarAnnotationsPriceRange",icon:"price-range-drawing",value:"price-range"},{label:"toolbarAnnotationsDatePriceRange",icon:"date-price-range-drawing",value:"date-price-range"}],Tq=[{strokeWidth:1,label:"1",value:1},{strokeWidth:2,label:"2",value:2},{strokeWidth:3,label:"3",value:3},{strokeWidth:4,label:"4",value:4},{strokeWidth:8,label:"8",value:8}],Eq=[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],Rq=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],{ARRAY:Lq,BOOLEAN:Pq,NUMBER:Nq,OBJECT:Fq,STRING:Oq,UNION:Bq,Color:Gq,FloatingToolbar:zq,InteractionState:_q,Listeners:Vq,Menu:Hq,PropertiesArray:Wq,ToolbarButtonProperties:jq,ToolbarButtonWidget:Uq,Validate:Kq}=mW,Yq=class extends jq{constructor(){super(...arguments),this.checkedOverrides=new jq}};dj([Kq(Bq(["line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings","lock"]))],Yq.prototype,"value",2),dj([Kq(Fq,{optional:!0})],Yq.prototype,"checkedOverrides",2),dj([Kq(Oq,{optional:!0})],Yq.prototype,"color",2),dj([Kq(Nq,{optional:!0})],Yq.prototype,"strokeWidth",2),dj([Kq(Boolean,{optional:!0})],Yq.prototype,"isMultiColor",2);var Zq=class extends Uq{update(e){super.update(e),"line-stroke-width"===e.value&&this.updateLineStrokeWidth(e),"fill-color"!==e.value&&"line-color"!==e.value&&"text-color"!==e.value||this.updateFillColor(e)}updateFillColor(e){var t;const i=this.getElement();i.classList.add("ag-charts-annotations__color-picker-button"),i.classList.toggle("ag-charts-annotations__color-picker-button--multi-color",e.isMultiColor),i.style.setProperty("--color",null!==(t=e.color)&&void 0!==t?t:null)}updateLineStrokeWidth(e){const t=this.getElement();t.classList.add("ag-charts-annotations__stroke-width-button"),t.style.setProperty("--stroke-width","".concat(e.strokeWidth,"px"))}},Xq=class extends zq{createButtonWidget(){return new Zq(this.localeManager)}},qq=class extends mW.BaseProperties{constructor(e,t){super(),this.ctx=e,this.getActiveDatum=t,this.enabled=!0,this.buttons=new Wq(Yq),this.destroyFns=[],this.events=new Vq,this.visibleButtons=[],this.toolbar=new Xq(this.ctx,"annotation-options"),this.colorPicker=new wq(this.ctx),this.textSizeMenu=new Hq(this.ctx,"text-size"),this.lineStyleTypeMenu=new Hq(this.ctx,"annotations-line-style-type"),this.lineStrokeWidthMenu=new Hq(this.ctx,"annotations-line-stroke-width");const i=e.regionManager.getRegion("series");this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("toolbar-moved",this.onToolbarMoved.bind(this)),i.addListener("drag-start",this.onDragStart.bind(this),_q.All),i.addListener("drag-end",this.onDragEnd.bind(this),_q.All),(()=>this.colorPicker.destroy()))}onDragStart(){this.toolbar.ignorePointerEvents()}onDragEnd(){this.toolbar.capturePointerEvents()}destroy(){for(const e of this.destroyFns)e()}addListener(e,t){return this.events.addListener(e,t)}show(){this.toolbar.show({})}hide(){this.toolbar.hide()}updateButtons(e){const t={"line-style-type":lq(e),"line-stroke-width":lq(e),"line-color":dq(e),"text-color":hq(e),"fill-color":cq(e),"text-size":aq(e),settings:uq(e),lock:!0,delete:!0};this.visibleButtons=this.buttons.filter((e=>t[e.value])),this.toolbar.clearButtons(),this.toolbar.updateButtons(this.visibleButtons),this.refreshButtons(e)}setAnchorScene(e){this.toolbar.hasBeenDragged()||this.toolbar.setAnchor(e.getAnchor())}hideOverlays(){this.toolbar.clearActiveButton(),this.colorPicker.hide({lastFocus:null}),this.textSizeMenu.hide(),this.lineStyleTypeMenu.hide(),this.lineStrokeWidthMenu.hide(),this.dispatch("hid-overlays")}clearActiveButton(){this.toolbar.clearActiveButton()}updateColors(e){this.updateColorPickerColor("line-color",e.getDefaultColor("line-color"),e.getDefaultOpacity("line-color"),"isMultiColor"in e&&(null===e||void 0===e?void 0:e.isMultiColor)),this.updateColorPickerColor("fill-color",e.getDefaultColor("fill-color"),e.getDefaultOpacity("fill-color"),"isMultiColor"in e&&(null===e||void 0===e?void 0:e.isMultiColor)),this.updateColorPickerColor("text-color",e.getDefaultColor("text-color"),e.getDefaultOpacity("text-color"),"isMultiColor"in e&&(null===e||void 0===e?void 0:e.isMultiColor))}updateColorPickerColor(e,t,i,n){if(null!=t&&null!=i){const{r:e,g:n,b:o}=Gq.fromString(t);t=Gq.fromArray([e,n,o,i]).toHexString()}this.updateButtonByValue(e,{color:t,isMultiColor:n})}updateFontSize(e){this.updateButtonByValue("text-size",{label:null!=e?String(e):void 0})}updateLineStyleType(e){this.updateButtonByValue("line-style-type",{icon:e.icon})}updateStrokeWidth(e){this.updateButtonByValue("line-stroke-width",{label:e.label,strokeWidth:e.value})}dispatch(e,t){this.events.dispatch(e,t)}onButtonPress(e){let{event:t,button:i}=e;const n=this.getActiveDatum();if(n)switch(this.hideOverlays(),i.value){case"line-style-type":{const e=lq(n)?mZ(n.lineDash,n.lineStyle):void 0;this.lineStyleTypeMenu.show({items:Eq,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStyle"),value:e,sourceEvent:t.sourceEvent,onPress:e=>this.onLineStyleTypeMenuPress(e,n),class:"ag-charts-annotations__line-style-type-menu"});break}case"line-stroke-width":{const e=lq(n)?n.strokeWidth:void 0;this.lineStrokeWidthMenu.show({items:Tq,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStrokeWidth"),value:e,sourceEvent:t.sourceEvent,onPress:e=>this.onLineStrokeWidthMenuPress(e,n),class:"ag-charts-annotations__line-stroke-width-menu"});break}case"line-color":case"fill-color":case"text-color":this.toolbar.toggleActiveButtonByIndex(i.index),this.colorPicker.show({color:null===n||void 0===n?void 0:n.getDefaultColor(i.value),opacity:null===n||void 0===n?void 0:n.getDefaultOpacity(i.value),sourceEvent:t.sourceEvent,hasMultiColorOption:"isMultiColor"in n,isMultiColor:"isMultiColor"in n&&(null===n||void 0===n?void 0:n.isMultiColor),onChange:null!=n?this.onColorPickerChange.bind(this,i.value,n):void 0,onChangeHide:(e=>{this.dispatch("saved-color",{type:n.type,colorPickerType:i.value,color:n.getDefaultColor(e)})}).bind(this,i.value)});break;case"text-size":{const e=oq(n)?n.fontSize:void 0;this.textSizeMenu.show({items:Rq,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsTextSize"),value:e,sourceEvent:t.sourceEvent,onPress:e=>this.onTextSizeMenuPress(e,n),class:"ag-charts-annotations__text-size-menu"});break}case"delete":this.dispatch("pressed-delete");break;case"lock":n.locked=!n.locked,this.refreshButtons(n),this.dispatch("pressed-lock");break;case"settings":this.toolbar.toggleActiveButtonByIndex(i.index),this.dispatch("pressed-settings",t)}}onToolbarMoved(e){const{buttonBounds:t,popoverBounds:i}=e,n={x:i.x,y:i.y+i.height+4},o={y:i.y-4};this.colorPicker.setAnchor(n,o);for(const[s,r]of t.entries()){const e=this.visibleButtons.at(s);if(!e)continue;const t={x:r.x,y:r.y+r.height-1},i={y:r.y};switch(e.value){case"line-stroke-width":this.lineStrokeWidthMenu.setAnchor(t,i);break;case"line-style-type":this.lineStyleTypeMenu.setAnchor(t,i);break;case"text-size":this.textSizeMenu.setAnchor(t,i)}}}onColorPickerChange(e,t,i,n,o,s){this.dispatch("updated-color",{type:t.type,colorPickerType:e,colorOpacity:i,color:n,opacity:o,isMultiColor:s}),this.updateColorPickerColor(e,i,o,s)}onTextSizeMenuPress(e,t){if(!aq(t))return;const i=e.value;this.dispatch("updated-font-size",{type:t.type,fontSize:i}),this.textSizeMenu.hide(),this.updateFontSize(i)}onLineStyleTypeMenuPress(e,t){if(!lq(t))return;const i=e.value;this.dispatch("updated-line-style",{type:t.type,lineStyleType:i}),this.lineStyleTypeMenu.hide(),this.updateLineStyleType(e)}onLineStrokeWidthMenuPress(e,t){if(!lq(t))return;const i=e.value;this.dispatch("updated-line-width",{type:t.type,strokeWidth:i}),this.lineStrokeWidthMenu.hide(),this.updateStrokeWidth(e)}refreshButtons(e){var t;const i=null!==(t=e.locked)&&void 0!==t&&t;for(const[n,o]of this.visibleButtons.entries())o&&("lock"===o.value?(this.toolbar.toggleSwitchCheckedByIndex(n,i),this.updateButtonByIndex(n,i?o.checkedOverrides.toJson():o.toJson())):this.toolbar.toggleButtonEnabledByIndex(n,!i));aq(e)&&this.updateFontSize(e.fontSize),this.updateColors(e),this.updateLineStyles(e)}updateLineStyles(e){var t,i;if(!lq(e))return;const n=null!==(t=e.strokeWidth)&&void 0!==t?t:1,o=mZ(e.lineDash,e.lineStyle);this.updateStrokeWidth({strokeWidth:n,value:n,label:String(n)}),this.updateLineStyleType(null!==(i=Eq.find((e=>e.value===o)))&&void 0!==i?i:Eq[0])}updateButtonByValue(e,t){const i=this.visibleButtons.findIndex((t=>t.value===e));-1!==i&&this.updateButtonByIndex(i,t)}updateButtonByIndex(e,t){var i;const n=this.visibleButtons.at(e);n&&this.toolbar.updateButtonByIndex(e,l(l(l({},n.toJson()),t),{},{value:null!==(i=t.value)&&void 0!==i?i:n.value}))}};dj([Kq(Pq)],qq.prototype,"enabled",2),dj([Kq(Lq)],qq.prototype,"buttons",2);var{StateMachine:Qq,StateMachineProperty:Jq,Vec2:$q,Debug:eQ}=mW,tQ=class extends Qq{constructor(e){const t=t=>{var i;let{context:n}=t;null===(i=this.node)||void 0===i||i.drag(this.datum,this.offset,n,this.snapping),e.update()};super("idle",{idle:{dragStart:{target:"dragging",action:e=>{var t;let{offset:i,context:n}=e;this.hasMoved=!1,this.dragStart=i,this.offset=i,null===(t=this.node)||void 0===t||t.dragStart(this.datum,i,n)}}},dragging:{keyDown:t,keyUp:t,drag:t=>{var i;let{offset:n,context:o}=t;this.hasMoved=$q.lengthSquared($q.sub(n,this.dragStart))>0,this.offset=n,null===(i=this.node)||void 0===i||i.drag(this.datum,n,o,this.snapping),e.update()},dragEnd:{target:Qq.parent,action:()=>{var t;null===(t=this.node)||void 0===t||t.stopDragging(),e.stopInteracting(),this.hasMoved&&e.recordAction("Move annotation"),e.update()}}}}),this.debug=eQ.create(!0,"annotations"),this.hasMoved=!1,this.snapping=!1}};dj([Jq()],tQ.prototype,"snapping",2),dj([Jq()],tQ.prototype,"datum",2),dj([Jq()],tQ.prototype,"node",2);var{STRING:iQ,Validate:nQ,isObject:oQ}=mW,sQ=class extends $Z{constructor(){super(...arguments),this.type="arrow-down"}static is(e){return oQ(e)&&"arrow-down"===e.type}};dj([nQ(iQ)],sQ.prototype,"type",2);var rQ=class e extends mW.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(e){const{handle:t,locked:i}=this;return i?{point:{x:t.x,y:t.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-t.x,y:e.y-t.y}}}toggleActive(t){this.active=t,t||(this.handle.strokeWidth=e.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){}containsPoint(e,t){return this.handle.containsPoint(e,t)}};rQ.INACTIVE_STROKE_WIDTH=2;var aQ=rQ,lQ=class e extends aQ{constructor(){super(),this.handle=new mW.Circle,this.glow=new mW.Circle,this.append([this.handle]),this.handle.size=e.HANDLE_SIZE,this.handle.strokeWidth=aQ.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties(l(l({},e),{},{strokeWidth:aQ.INACTIVE_STROKE_WIDTH}))}drag(e){return{point:e,offset:{x:0,y:0}}}};lQ.HANDLE_SIZE=7,lQ.GLOW_SIZE=9;var dQ=lQ,cQ=class e extends aQ{constructor(){super(),this.handle=new mW.Rect,this.glow=new mW.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=e.CORNER_RADIUS,this.handle.width=e.HANDLE_SIZE,this.handle.height=e.HANDLE_SIZE,this.handle.strokeWidth=aQ.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=e.CORNER_RADIUS,this.glow.width=e.GLOW_SIZE,this.glow.height=e.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(t){if(super.toggleLocked(t),t){const t=(e.HANDLE_SIZE-dQ.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=t,this.handle.y+=t,this.handle.width=dQ.HANDLE_SIZE,this.handle.height=dQ.HANDLE_SIZE,this.glow.width=dQ.GLOW_SIZE,this.glow.height=dQ.GLOW_SIZE}else this.handle.cornerRadius=e.CORNER_RADIUS,this.handle.width=e.HANDLE_SIZE,this.handle.height=e.HANDLE_SIZE,this.glow.width=e.GLOW_SIZE,this.glow.height=e.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(t){var i,n;if(this.cachedStyles=l({},t),this.active||delete t.strokeWidth,this.locked){delete t.fill,delete t.strokeWidth;const i=(e.HANDLE_SIZE-dQ.HANDLE_SIZE)/2;t.x-=i,t.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(t),this.glow.setProperties(l(l({},t),{},{x:(null!==(i=t.x)&&void 0!==i?i:this.glow.x)-2,y:(null!==(n=t.y)&&void 0!==n?n:this.glow.y)-2,strokeWidth:0,fill:t.stroke}))}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:"vertical"===this.gradient?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){if(!this.locked)return"vertical"===this.gradient?"col-resize":"row-resize"}};cQ.HANDLE_SIZE=12,cQ.GLOW_SIZE=16,cQ.CORNER_RADIUS=4;var hQ=cQ,uQ=class e extends aQ{constructor(){super(),this.handle=new mW.Circle,this.glow=new mW.Circle,this.append([this.glow,this.handle]),this.handle.size=e.HANDLE_SIZE,this.handle.strokeWidth=aQ.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=e.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(t){super.toggleLocked(t),t?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=dQ.HANDLE_SIZE,this.glow.size=dQ.GLOW_SIZE):(this.handle.size=e.HANDLE_SIZE,this.glow.size=e.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles=l({},e),this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties(l(l({},e),{},{strokeWidth:0,fill:e.stroke}))}getCursor(){return"pointer"}};uQ.HANDLE_SIZE=11,uQ.GLOW_SIZE=17;var pQ=uQ,{ZIndexMap:gQ,isObject:mQ}=mW,vQ=class extends mW.Group{constructor(){super(...arguments),this.name="AnnotationScene",this.zIndex=gQ.CHART_ANNOTATION}static isCheck(e,t){return mQ(e)&&Object.hasOwn(e,"type")&&e.type===t}toggleHovered(e){this.toggleHandles(e)}*nonHandleChildren(){for(const e of this.children())e instanceof aQ||(yield e)}computeBBoxWithoutHandles(){return mW.Transformable.toCanvas(this,mW.Group.computeChildrenBBox(this.nonHandleChildren()))}updateNode(e,t,i){if(i||!t)return i&&null==t&&(t=new e,this.appendChild(t)),t;this.removeChild(t)}},{Vec2:fQ,toRadians:yQ}=mW;function bQ(e,t){let i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return HY(e,t);return HY(CQ(e,i?_Y(i,t):fQ.origin(),n),t)}function CQ(e,t,i){let{x:n,y:o}=e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const{x:r,y:a}=t,l=Math.sqrt(Math.pow(n-r,2)+Math.pow(o-a,2)),d=Math.atan2(o-a,n-r),c=yQ(i),h=Math.round(d/c)*c;return{x:r+l*Math.cos(h),y:a+l*Math.sin(h)*s}}function xQ(e,t){const i={};return Object.entries(e).forEach((e=>{let[n,o]=e;i[n]=_Y(o,t)})),i}function wQ(e,t,i){const n=[],o={};Object.entries(e).forEach((e=>{let[s,r]=e;const a=fQ.add(r,t);n.push(a);const l=HY(a,i);o[s]=l}));const{xAxis:s,yAxis:r}=i,a=(e,t,i)=>t>=e&&t<=i,l=n.every((e=>a(s.bounds.x,e.x,s.bounds.x+s.bounds.width))),d=n.every((e=>a(r.bounds.y,e.y,r.bounds.y+r.bounds.height)));return{vectors:o,translateX:l,translateY:d}}var{Vec2:SQ}=mW,MQ=class extends vQ{constructor(){super(...arguments),this.handle=new pQ,this.anchor={x:0,y:0,position:"above"}}update(e,t){const i=_Y(e,t);this.updateHandle(e,i),this.anchor=this.updateAnchor(e,i,t)}dragStart(e,t,i){this.dragState=l({offset:t},xQ({handle:e},i))}drag(e,t,i){const{dragState:n}=this;if(e.locked||!n)return;const o=HY(SQ.add(n.handle,SQ.sub(t,n.offset)),i);nX(i,o)&&(e.x=o.x,e.y=o.y)}translate(e,t,i){const n=HY(SQ.add(_Y(e,i),t),i);nX(i,n)&&(e.x=n.x,e.y=n.y)}toggleHandles(e){this.handle.visible=Boolean(e),this.handle.toggleHovered("handle"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.handle.toggleActive(e)}stopDragging(){this.handle.toggleDragging(!1)}copy(e,t,i){const n=_Y(e,i),o=HY({x:n.x-30,y:n.y-30},i);return t.x=o.x,t.y=o.y,t}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(e,t){const{handle:i}=this;return this.activeHandle=void 0,!!i.containsPoint(e,t)&&(this.activeHandle="handle",!0)}getNodeAtCoords(e,t){if(this.handle.containsPoint(e,t))return"handle"}updateHandle(e,t,i){var n;const{x:o,y:s}=this.getHandleCoords(e,t,i),r=this.getHandleStyles(e);this.handle.update(l(l({},r),{},{x:o,y:s})),this.handle.toggleLocked(null!==(n=e.locked)&&void 0!==n&&n)}updateAnchor(e,t,i){const n=this.getHandleCoords(e,t);return{x:n.x+i.seriesRect.x,y:n.y+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(e,t,i){return{x:t.x,y:t.y}}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}},DQ=class extends MQ{constructor(){super(),this.append([this.handle])}update(e,t){super.update(e,t);const i=_Y(e,t);this.updateShape(e,i)}updateShape(e,t){this.updateShapeStyles(e),this.updateShapePath(e,t)}updateShapeStyles(e){var t;const{shape:i}=this;i.fill=e.fill,i.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1}updateShapePath(e,t){const{shape:i}=this;i.x=t.x,i.y=t.y,i.size=e.size}containsPoint(e,t){return super.containsPoint(e,t)||this.shape.containsPoint(e,t)}getNodeAtCoords(e,t){return this.shape.containsPoint(e,t)?"shape":super.getNodeAtCoords(e,t)}},kQ=class extends DQ{constructor(){super(),this.type="arrow-down",this.shape=new mW.ArrowDown,this.append([this.shape])}static is(e){return vQ.isCheck(e,"arrow-down")}updateAnchor(e,t,i){const n=super.updateAnchor(e,t,i);return n.y-=e.size,n}getHandleCoords(e,t){const i=pQ.HANDLE_SIZE/2,n=super.getHandleCoords(e,t);return n.y+=i,n}},{StateMachine:IQ,StateMachineProperty:AQ,Debug:TQ}=mW,EQ=class extends IQ{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({x:i.x,y:i.y}),e.create(n)};super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},cancel:IQ.parent,reset:IQ.parent},"waiting-first-render":{render:{target:IQ.parent,action:()=>{var t;null===(t=this.node)||void 0===t||t.toggleActive(!0),e.showAnnotationOptions(),e.update()}}}}),this.debug=TQ.create(!0,"annotations")}};dj([AQ()],EQ.prototype,"node",2);var RQ=class extends EQ{createDatum(){return new sQ}},LQ={type:"arrow-down",datum:sQ,scene:kQ,isDatum:sQ.is,translate:(e,t,i,n)=>{sQ.is(t)&&kQ.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(sQ.is(t)&&sQ.is(i)&&kQ.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{sQ.is(t)&&kQ.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new RQ(l(l({},e),{},{create:i("arrow-down")}))},dragState:e=>new tQ(e)},{STRING:PQ,Validate:NQ,isObject:FQ}=mW,OQ=class extends $Z{constructor(){super(...arguments),this.type="arrow-up"}static is(e){return FQ(e)&&"arrow-up"===e.type}};dj([NQ(PQ)],OQ.prototype,"type",2);var BQ=class extends DQ{constructor(){super(),this.type="arrow-up",this.shape=new mW.ArrowUp,this.append([this.shape])}static is(e){return vQ.isCheck(e,"arrow-up")}getHandleCoords(e,t){const i=pQ.HANDLE_SIZE/2,n=super.getHandleCoords(e,t);return n.y-=i,n}},GQ=class extends EQ{createDatum(){return new OQ}},zQ={type:"arrow-up",datum:OQ,scene:BQ,isDatum:OQ.is,translate:(e,t,i,n)=>{OQ.is(t)&&BQ.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(OQ.is(t)&&OQ.is(i)&&BQ.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{OQ.is(t)&&BQ.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new GQ(l(l({},e),{},{create:i("arrow-up")}))},dragState:e=>new tQ(e)},{Vec2:_Q,Vec4:VQ}=mW,HQ=class extends vQ{extendLine(e,t,i){let{x1:n,y1:o,x2:s,y2:r}=e;const a={x1:n,y1:o,x2:s,y2:r};if(!t.extendStart&&!t.extendEnd)return a;const[l,d]=function(e,t){const[i,n]=gZ.from(e),o=t.height,s=gZ.gradient(n,i,o),r=gZ.intercept(n,s,o),a=[{x:i.x,y:null!==o&&void 0!==o?o:0},{x:i.x,y:null==o?t.height:o-t.height}];if(s===1/0)return a;let l=[gZ.intersectAtY(s,r,0,o),gZ.intersectAtY(s,r,t.height,o),gZ.intersectAtX(s,r,0,o),gZ.intersectAtX(s,r,t.width,o)];return l=l.filter((e=>e.x>=t.x&&e.x<=t.width&&e.y>=t.y&&e.y<=t.height)).sort(((e,t)=>e.x===t.x?0:e.x<t.x?-1:1)),2!==l.length?a:l}(a,i.yAxis.bounds),c=a.x2<a.x1,h=a.y1>=a.y2,u=a.x2===a.x1;return t.extendEnd&&(u?a.y2=h?d.y:l.y:(a.x2=c?l.x:d.x,a.y2=c?l.y:d.y)),t.extendStart&&(u?a.y1=h?l.y:d.y:(a.x1=c?d.x:l.x,a.y1=c?d.y:l.y)),a}dragStart(e,t,i){this.dragState=l({offset:t},xQ({start:e.start,end:e.end},i))}drag(e,t,i,n){e.locked||(this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints(e,n.start,n.end,_Q.sub(t,n.offset),i)}translatePoints(e,t,i,n,o){const{vectors:s,translateX:r,translateY:a}=wQ({start:t,end:i},n,o);var l,d,c,h;r&&(e.start.x=null===(l=s.start)||void 0===l?void 0:l.x,e.end.x=null===(d=s.end)||void 0===d?void 0:d.x);(this.ignoreYBounds||a)&&(e.start.y=null===(c=s.start)||void 0===c?void 0:c.y,e.end.y=null===(h=s.end)||void 0===h?void 0:h.y)}translate(e,t,i){this.translatePoints(e,_Y(e.start,i),_Y(e.end,i),t,i)}copy(e,t,i){const n=zY(e,i);if(!n)return;const o=this.computeBBoxWithoutHandles(),s={x:-o.width/2,y:-o.height/2};return this.translatePoints(t,VQ.start(n),VQ.end(n),s,i),t}},{Vec4:WQ}=mW,jQ=class extends HQ{constructor(){super(...arguments),this.start=new pQ,this.end=new pQ,this.anchor={x:0,y:0,position:"above"}}update(e,t){const i=zY(e,t);null!=i&&(this.updateHandles(e,i),this.updateAnchor(e,i,t))}toggleHandles(e){if("boolean"===typeof e)this.start.visible=e,this.end.visible=e;else for(const[t,i]of Object.entries(e))this[t].visible=i;this.start.toggleHovered("start"===this.activeHandle),this.end.toggleHovered("end"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}dragHandle(e,t,i,n){const{activeHandle:o,dragState:s}=this;if(!o||!s)return;this[o].toggleDragging(!0);const r=n?this.snapToAngle(e,t,i):HY(this[o].drag(t).point,i);r&&nX(i,r)&&(e[o].x=r.x,e[o].y=r.y)}snapToAngle(e,t,i){const{activeHandle:n}=this,o=["start","end"].find((e=>e!==n));if(!n||!o)return;this[n].toggleDragging(!0);return HY(CQ(t,_Y(e[o],i),e.snapToAngle),i)}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(e,t){const{start:i,end:n}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):!!n.containsPoint(e,t)&&(this.activeHandle="end",!0)}getNodeAtCoords(e,t){if(this.start.containsPoint(e,t)||this.end.containsPoint(e,t))return"handle"}updateHandles(e,t,i){var n,o;this.start.update(l(l({},this.getHandleStyles(e,"start")),this.getHandleCoords(e,t,"start"))),this.end.update(l(l({},this.getHandleStyles(e,"end")),this.getHandleCoords(e,t,"end",i))),this.start.toggleLocked(null!==(n=e.locked)&&void 0!==n&&n),this.end.toggleLocked(null!==(o=e.locked)&&void 0!==o&&o)}updateAnchor(e,t,i,n){this.anchor={x:t.x1+i.seriesRect.x,y:t.y1+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(e,t,i,n){return"start"===i?WQ.start(t):WQ.end(t)}getHandleStyles(e,t){return{fill:e.handle.fill,stroke:e.handle.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}},{Vec2:UQ,Vec4:KQ}=mW,YQ=class extends jQ{constructor(){super(...arguments),this.label=new mW.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty()}update(e,t){const i=zY(e,t);if(null==i)return;const n=this.getTextBBox(e,i);this.updateLabel(e,n,i),this.updateHandles(e,i,n),this.updateShape(e,n,i),this.updateAnchor(e,i,t,n)}dragHandle(e,t,i,n){const{activeHandle:o,dragState:s}=this;if(!o||!s)return;this[o].toggleDragging(!0);const r=UQ.add(s.end,UQ.sub(t,s.offset)),a=n?this.snapToAngle(e,r,i):HY(r,i);a&&nX(i,a)&&(e[o].x=a.x,e[o].y=a.y)}containsPoint(e,t){const{label:i}=this;return super.containsPoint(e,t)||i.containsPoint(e,t)}getNodeAtCoords(e,t){return this.label.containsPoint(e,t)?"text":super.getNodeAtCoords(e,t)}getTextBBox(e,t){const{text:i}=e.getText();return VZ(e,i,KQ.end(t),this.textInputBBox)}updateLabel(e,t,i){const{text:n,isPlaceholder:o}=e.getText();HZ(this.label,n,o,e,this.getLabelCoords(e,t,i))}updateShape(e,t,i){}getLabelCoords(e,t,i){return KQ.end(i)}getHandleStyles(e,t){var i;return l(l({},super.getHandleStyles(e,t)),{},{stroke:null!==(i=e.handle.stroke)&&void 0!==i?i:e.color})}},{drawCorner:ZQ,Path:XQ}=mW,qQ=class extends YQ{constructor(){super(),this.type="callout",this.shape=new XQ,this.append([this.shape,this.label,this.start,this.end])}static is(e){return vQ.isCheck(e,"callout")}drag(e,t,i,n){e.locked||("end"===this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}getLabelCoords(e,t,i){var n;const o=e.getPadding(),{bodyBounds:s={x:0,y:0,width:0,height:0}}=null!==(n=this.getDimensions(e,t,i))&&void 0!==n?n:{};return{x:s.x+o.left,y:s.y-o.bottom}}getHandleStyles(e,t){var i;return"start"===t?{fill:e.handle.fill,stroke:null!==(i=e.handle.stroke)&&void 0!==i?i:e.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(e,t,i,n){var o;const{bodyBounds:s}=null!==(o=this.getDimensions(e,n,t))&&void 0!==o?o:{},r=null!==s&&void 0!==s?s:n;this.anchor={x:r.x+i.seriesRect.x,y:r.y+i.seriesRect.y-r.height,position:this.anchor.position}}updateShape(e,t,i){var n,o,s,r;const{shape:a}=this;a.fill=e.fill,a.fillOpacity=null!==(n=e.fillOpacity)&&void 0!==n?n:1,a.stroke=e.stroke,a.strokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:1,a.strokeOpacity=null!==(s=e.strokeOpacity)&&void 0!==s?s:1;const{tailPoint:l,bodyBounds:d}=null!==(r=this.getDimensions(e,t,i))&&void 0!==r?r:{};l&&d&&this.updatePath(l,d)}updatePath(e,t){const{x:i,y:n}=e,{x:o,y:s,width:r,height:a}=t,l=s-a,d=o+r,c=this.calculateCalloutPlacement({x:i,y:n},t),h=[{coordinates:{x0:o,x1:o+8,y0:l+8,y1:l,cx:"topLeft"===c?i:o+8,cy:"topLeft"===c?n:l+8},type:"topLeft"===c?"calloutCorner":"corner"},{coordinates:{x0:o+8,x1:d-8,y0:l,y1:l,cx:i,cy:n},type:"top"===c?"calloutSide":"side"},{coordinates:{x0:d-8,x1:d,y0:l,y1:l+8,cx:"topRight"===c?i:d-8,cy:"topRight"===c?n:l+8},type:"topRight"===c?"calloutCorner":"corner"},{coordinates:{x0:d,x1:d,y0:l+8,y1:s-8,cx:i,cy:n},type:"right"===c?"calloutSide":"side"},{coordinates:{x0:d,x1:d-8,y0:s-8,y1:s,cx:"bottomRight"===c?i:d-8,cy:"bottomRight"===c?n:s-8},type:"bottomRight"===c?"calloutCorner":"corner"},{coordinates:{x0:d-8,x1:o+8,y0:s,y1:s,cx:i,cy:n},type:"bottom"===c?"calloutSide":"side"},{coordinates:{x0:o+8,x1:o,y0:s,y1:s-8,cx:"bottomLeft"===c?i:o+8,cy:"bottomLeft"===c?n:s-8},type:"bottomLeft"===c?"calloutCorner":"corner"},{coordinates:{x0:o,x1:o,y0:s-8,y1:l+8,cx:i,cy:n},type:"left"===c?"calloutSide":"side"}],{path:u}=this.shape;u.clear(),u.moveTo(o,l+8),h.forEach((e=>{let{coordinates:t,type:i}=e;this.drawPath(u,t,8,i)})),u.closePath()}drawPath(e,t,i,n){let{x0:o,y0:s,x1:r,y1:a,cx:l,cy:d}=t;switch(n){case"calloutCorner":e.lineTo(l,d),e.lineTo(r,a);break;case"corner":ZQ(e,{x0:o,x1:r,y0:s,y1:a,cx:l,cy:d},i,!1);break;case"calloutSide":if(o!==r){const t=o>r?-1:1,i=Math.min(o,r)+Math.abs(r-o)/2;e.lineTo(i-6*t,s),e.lineTo(l,d),e.lineTo(i+6*t,s),e.lineTo(r,a)}else{const t=s>a?-1:1,i=Math.min(s,a)+Math.abs(s-a)/2;e.lineTo(o,i-6*t),e.lineTo(l,d),e.lineTo(o,i+6*t),e.lineTo(r,a)}break;default:e.lineTo(r,a)}}calculateCalloutPlacement(e,t){const i=t.x+t.width,n=t.y-t.height;let o,s;return e.x>i?o="right":e.x<t.x&&(o="left"),e.y>t.y?s="bottom":e.y<n&&(s="top"),o&&s?"".concat(s).concat(o[0].toUpperCase()).concat(o.substring(1)):null!==(r=s)&&void 0!==r?r:o;var r}getDimensions(e,t,i){const{fontSize:n}=e,o=e.getPadding(),s=o.left+o.right,r=o.top+o.bottom,a=t.width+s,l=Math.max(t.height+r,n+r);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:t.x,y:t.y,width:a,height:l}}}containsPoint(e,t){const{start:i,end:n,shape:o}=this;if(this.activeHandle=void 0,i.containsPoint(e,t))return this.activeHandle="start",!0;const s=n.containsPoint(e,t)||o.containsPoint(e,t);return s&&(this.activeHandle="end"),s}};function QQ(e){let{key:t}=e;return"Escape"===t}function JQ(e){let{key:t,shiftKey:i}=e;return!i&&"Enter"===t}var{StateMachine:$Q,StateMachineProperty:eJ,Debug:tJ}=mW,iJ=class extends $Q{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({start:i,end:i,visible:!0}),e.create(n)},i=t=>{let{point:i}=t;const{datum:n,node:o}=this;null===n||void 0===n||n.set({end:i}),null===o||void 0===o||o.toggleActive(!0),null===o||void 0===o||o.toggleHandles({end:!1}),e.update()},n=()=>{var t;e.showAnnotationOptions(),null===(t=this.node)||void 0===t||t.toggleHandles({end:!0})},o=()=>{e.delete()},s=t=>{let{textInputValue:i,bbox:n}=t;const{datum:o}=this;if(null!=n&&null!=i&&i.length>0){if(!oq(o))return;const t=_Z(o,i,n.width);null===o||void 0===o||o.set({text:t}),e.update(),e.recordAction("Create ".concat(null===o||void 0===o?void 0:o.type," annotation"))}else e.delete()};super("start",{start:{click:{target:"waiting-first-render",action:t},dragStart:{target:"waiting-first-render",action:t},cancel:$Q.parent,reset:$Q.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({start:!0})}}},end:{hover:i,drag:i,click:{target:"edit",action:n},dragEnd:{target:"edit",action:n},reset:{target:$Q.parent,action:o},cancel:{target:$Q.parent,action:o}},edit:{onEnter:()=>{e.showTextInput(),this.datum&&(this.datum.visible=!1)},updateTextInputBBox:t=>{var i;null===(i=this.node)||void 0===i||i.setTextInputBBox(t),e.update()},color:t=>{let{colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=t;const{datum:a}=this;a&&("text-color"===i&&e.updateTextInputColor(o),mq(a,i,n,o,s,r),e.update())},fontSize:t=>{const{datum:i,node:n}=this;i&&n&&oq(i)&&(i.fontSize=t,e.updateTextInputFontSize(t),e.update())},textInput:[{guard:QQ,target:$Q.parent,action:o},{guard:JQ,target:$Q.parent,action:s}],click:{target:$Q.parent,action:s},dragStart:{target:$Q.parent,action:s},resize:{target:$Q.parent,action:s},onExit:()=>{e.hideTextInput(),this.datum&&(this.datum.visible=!0),e.deselect()},cancel:{target:$Q.parent,action:o}}}),this.debug=tJ.create(!0,"annotations")}};dj([eJ()],iJ.prototype,"datum",2),dj([eJ()],iJ.prototype,"node",2);var nJ=class extends iJ{createDatum(){return new eZ}},oJ={type:"callout",datum:eZ,scene:qQ,isDatum:eZ.is,translate:(e,t,i,n)=>{if(eZ.is(t)&&qQ.is(e))return e.translate(t,i,n)},copy:(e,t,i,n)=>{if(eZ.is(t)&&eZ.is(i)&&qQ.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{eZ.is(t)&&qQ.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new nJ(l(l({},e),{},{create:i("callout")}))},dragState:e=>new tQ(e)},sJ=class extends MQ{constructor(){super(...arguments),this.label=new mW.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty()}update(e,t){const i=_Y(e,t),n=this.getTextBBox(e,i,t);this.updateLabel(e,n),this.updateHandle(e,i,n),this.updateShape(e,n),this.anchor=this.updateAnchor(e,n,t)}copy(e,t,i){const n=_Y(e,i),o=this.getTextBBox(e,n,i),s=e.getPadding(),r=s.left+s.right,a=s.top+s.bottom,l=(o.width+r)/2,d=o.height+a,c=HY({x:n.x-l,y:n.y-d},i);return t.x=c.x,t.y=c.y,t}containsPoint(e,t){const{label:i}=this;return super.containsPoint(e,t)||i.visible&&i.containsPoint(e,t)}getNodeAtCoords(e,t){return this.label.visible&&this.label.containsPoint(e,t)?"text":super.getNodeAtCoords(e,t)}getTextBBox(e,t,i){const{text:n}=e.getText();return VZ(e,n,{x:t.x,y:t.y},this.textInputBBox)}updateLabel(e,t){const{text:i,isPlaceholder:n}=e.getText();HZ(this.label,i,n,e,this.getLabelCoords(e,t))}updateShape(e,t){}updateAnchor(e,t,i){return{x:t.x+i.seriesRect.x,y:t.y+i.seriesRect.y-t.height,position:this.anchor.position}}getLabelCoords(e,t){return t}getHandleCoords(e,t,i){return i}getHandleStyles(e){var t;const i=super.getHandleStyles(e);return i.stroke=null!==(t=e.handle.stroke)&&void 0!==t?t:e.color,i}},{drawCorner:rJ}=mW,aJ=class extends sJ{constructor(){super(),this.type="comment",this.shape=new mW.Path,this.append([this.shape,this.label,this.handle])}static is(e){return vQ.isCheck(e,"comment")}updateShape(e,t){var i,n,o,s;const{shape:r}=this;r.fill=e.fill,r.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,r.stroke=null!==(n=e.stroke)&&void 0!==n?n:"transparent",r.strokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:1,r.strokeOpacity=null!==(s=e.strokeOpacity)&&void 0!==s?s:1,this.updatePath(e,t)}getLabelCoords(e,t){const i=e.getPadding();return{x:t.x+i.left,y:t.y-i.bottom}}getHandleStyles(e){var t,i;return{fill:e.handle.fill,stroke:null!==(t=null!==(i=e.handle.stroke)&&void 0!==i?i:e.stroke)&&void 0!==t?t:e.fill,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}updateAnchor(e,t,i){const n=super.updateAnchor(e,t,i),o=e.getPadding();return n.y-=o.bottom+o.top,n}updatePath(e,t){const i=e.getPadding(),{x:n,y:o}=t;let{width:s,height:r}=t;const{fontSize:a}=e,l=i.left+i.right,d=i.top+i.bottom;s+=l,r=Math.max(r+d,a+d);const c=o-r,h=n+s,u=(a*GZ+d)/2,{path:p}=this.shape;p.clear(),p.moveTo(n,o),p.lineTo(n,c+u),rJ(p,{x0:n,x1:n+u,y0:c+u,y1:c,cx:n+u,cy:c+u},u,!1),p.lineTo(h-u,c),rJ(p,{x0:h-u,x1:h,y0:c,y1:c+u,cx:h-u,cy:c+u},u,!1),p.lineTo(h,o-u),rJ(p,{x0:h,x1:h-u,y0:o-u,y1:o,cx:h-u,cy:o-u},u,!1),p.closePath()}containsPoint(e,t){return super.containsPoint(e,t)||this.shape.containsPoint(e,t)}},{StateMachine:lJ,StateMachineProperty:dJ,Debug:cJ}=mW,hJ=class extends lJ{constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({x:i.x,y:i.y}),e.create(n)},i=()=>{e.delete()},n=t=>{let{textInputValue:i,bbox:n}=t;if(null!=n&&null!=i&&i.length>0){const{datum:t}=this;if(!oq(t))return;const o=_Z(t,i,n.width);null===t||void 0===t||t.set({text:o}),e.update(),e.recordAction("Create ".concat(null===t||void 0===t?void 0:t.type," annotation"))}else e.delete()};super("start",{start:{click:{target:"waiting-first-render",action:t},dragStart:{target:"waiting-first-render",action:t},cancel:lJ.parent,reset:lJ.parent},"waiting-first-render":{render:{target:"edit",action:()=>{var t;null===(t=this.node)||void 0===t||t.toggleActive(!0),e.showAnnotationOptions(),e.update()}}},edit:{onEnter:()=>{e.showTextInput(),this.datum&&(this.datum.visible=!1)},updateTextInputBBox:t=>{var i;null===(i=this.node)||void 0===i||i.setTextInputBBox(t),e.update()},color:t=>{let{colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=t;this.datum&&("text-color"===i&&e.updateTextInputColor(o),mq(this.datum,i,n,o,s,r),e.update())},fontSize:t=>{const{datum:i,node:n}=this;i&&n&&oq(i)&&(i.fontSize=t,e.updateTextInputFontSize(t),e.update())},textInput:[{guard:QQ,target:lJ.parent,action:i},{guard:JQ,target:lJ.parent,action:n}],click:{target:lJ.parent,action:n},dragStart:{target:lJ.parent,action:n},resize:{target:lJ.parent,action:n},onExit:()=>{e.hideTextInput(),this.datum&&(this.datum.visible=!0),e.deselect()},cancel:{target:lJ.parent,action:i}}}),this.debug=cJ.create(!0,"annotations")}};dj([dJ()],hJ.prototype,"datum",2),dj([dJ()],hJ.prototype,"node",2);var uJ=class extends hJ{createDatum(){return new pZ}},pJ={type:"comment",datum:pZ,scene:aJ,isDatum:pZ.is,translate:(e,t,i,n)=>{pZ.is(t)&&aJ.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(pZ.is(t)&&pZ.is(i)&&aJ.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{pZ.is(t)&&aJ.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new uJ(l(l({},e),{},{create:i("comment")}))},dragState:e=>new tQ(e)},{calculateLabelTranslation:gJ,ChartAxisDirection:mJ}=mW,vJ=class extends mW.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new mW.Text({zIndex:1}),this.rect=new mW.Rect;const{label:e}=this;e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.textBaseline="middle",e.textAlign="center",this.append([this.rect,this.label])}update(e){this.updateLabel(e),this.updateRect(e),this.updatePosition(e)}updateLabel(e){let{value:t,styles:i,context:n}=e;const{fontWeight:o,fontSize:s,fontStyle:r,fontFamily:a,textAlign:l,color:d="white",formatter:c=n.scaleValueFormatter()}=i;this.label.setProperties({fontWeight:o,fontSize:s,fontStyle:r,fontFamily:a,textAlign:l,fill:d,text:c(t)})}updateRect(e){let{styles:t}=e;const{rect:i}=this,{cornerRadius:n,fill:o,fillOpacity:s,stroke:r,strokeOpacity:a}=t;i.setProperties({cornerRadius:n,fill:o,fillOpacity:s,stroke:r,strokeOpacity:a})}updatePosition(e){var t,i;let{x:n,y:o,context:s,styles:{padding:r}}=e;const{label:a,rect:l}=this,d=null===(t=a.getBBox())||void 0===t?void 0:t.clone(),c=null!==r&&void 0!==r?r:8,h=null!==r&&void 0!==r?r:5;d.grow(c,"horizontal"),d.grow(h,"vertical");const u=s.direction===mJ.X?h/2:c,{xTranslation:p,yTranslation:g}=gJ({yDirection:!0,padding:s.labelPadding-u,position:null!==(i=s.position)&&void 0!==i?i:"left",bbox:d}),m=n+p,v=o+g;a.x=m,a.y=v,l.x=m-d.width/2,l.y=v-d.height/2,l.height=d.height,l.width=d.width}};vJ.className="AxisLabel";var{Vec2:fJ}=mW,yJ=class extends mW.Line{constructor(){super(...arguments),this.growCollisionBox=9,this.clipMask=new Map}setProperties(e,t){return super.setProperties(e,t),this.updateCollisionBBox(),this}updateCollisionBBox(){const{growCollisionBox:e,strokeWidth:t,x1:i,y1:n,x2:o,y2:s}=this;let r=t+e;r%2===0&&(r+=1);const a=fJ.from(i,n-Math.floor(r/2)),l=fJ.from(o,s),d=fJ.distance(a,l);this.collisionBBox=new mW.BBox(a.x,a.y,d,r)}isPointInPath(e,t){var i;const{collisionBBox:n,x1:o,y1:s,x2:r,y2:a}=this;if(!n)return!1;const l=fJ.from(o,s),d=fJ.from(r,a),c=fJ.sub(fJ.from(e,t),l),h=fJ.sub(d,l),u=fJ.rotate(c,fJ.angle(c,h),l);return null!==(i=n.containsPoint(u.x,u.y))&&void 0!==i&&i}render(e){this.applyClipMask(e.ctx),super.render(e),this.closeClipMask(e.ctx)}setClipMask(e,t){const i=this.clipMask.get(e);null!=mW.jsonDiff(i,t)&&this.markDirty(),t?this.clipMask.set(e,t):this.clipMask.delete(e)}applyClipMask(e){const{clipMask:t}=this;0!==t.size&&this.clipMask.forEach((t=>{const{x:i,y:n,radius:o}=t;e.save(),e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.ellipse(i,n,o,o,0,2*Math.PI,0,!0),e.clip()}))}closeClipMask(e){0!==this.clipMask.size&&e.restore()}},bJ=class extends mW.TransformableText{constructor(){super(...arguments),this.growCollisionBox={top:4,right:4,bottom:4,left:4}}isPointInPath(e,t){const i=this.fromParentPoint(e,t),n=this.computeBBoxWithoutTransforms();return!!n&&n.grow(this.growCollisionBox).containsPoint(i.x,i.y)}},{Vec2:CJ}=mW;function xJ(e,t,i,n,o,s,r){const{alignment:a,position:l}=i;if(!s||!o)return void t.setClipMask(e);const d=SJ(n,i.fontSize,r),{point:c,textBaseline:h}=MJ(d,l,a);DJ(o,s,i,c,d.angle,h);const{x:u,y:p,width:g,height:m}=o.getBBox(),v={x:u+g/2,y:p+m/2,radius:CJ.length(CJ.from(g,m))/2+CJ.length(d.offset)};return"center"===l?t.setClipMask(e,v):t.setClipMask(e),{clipMask:v,numbers:d}}function wJ(e,t,i,n,o,s,r){if(!r||!s)return;const{alignment:a,position:l}=n,[d,c]=t.y1<=i.y1?[t,i]:[i,t];let h=d;"bottom"===l?h=c:"inside"===l&&(h={x1:(d.x1+c.x1)/2,y1:(d.y1+c.y1)/2,x2:(d.x2+c.x2)/2,y2:(d.y2+c.y2)/2});const u=SJ(h,n.fontSize,o),{point:p,textBaseline:g}=MJ(u,"inside"===l?"center":l,a,e);DJ(s,r,n,p,u.angle,g)}function SJ(e,t,i){let[n,o]=CJ.from(e);n.x>o.x&&([n,o]=[o,n]);const s=CJ.normalized(CJ.sub(o,n));return{left:n,right:o,normal:s,angle:CJ.angle(s),inset:CJ.multiply(s,pQ.HANDLE_SIZE/2+(null!==t&&void 0!==t?t:14)/2),offset:CJ.multiply(s,(null!==i&&void 0!==i?i:2)/2+(null!==t&&void 0!==t?t:14)/3)}}function MJ(e,t,i,n){let o,{left:s,right:r,normal:a,angle:l,inset:d,offset:c}=e;o="right"===i?CJ.sub(r,d):"center"===i?CJ.add(s,CJ.multiply(a,CJ.distance(s,r)/2)):CJ.add(s,d);let h="bottom";return"bottom"===t?(o=CJ.rotate(c,l+Math.PI/2,o),h="top"):"center"!==t||n?o=CJ.rotate(c,l-Math.PI/2,o):h="middle",{point:o,textBaseline:h}}function DJ(e,t,i,n,o,s){e.setProperties({text:t,x:n.x,y:n.y,rotation:o,rotationCenterX:n.x,rotationCenterY:n.y,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textAlign:i.alignment,textBaseline:s})}var{ChartAxisDirection:kJ,Vec2:IJ,Vec4:AJ}=mW,TJ=class extends vQ{constructor(){super(),this.type="cross-line",this.line=new yJ,this.middle=new hQ,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(e){return vQ.isCheck(e,"cross-line")}update(e,t){var i;const{seriesRect:n}=t;this.seriesRect=n,this.isHorizontal=hX.is(e);const o=this.isHorizontal?t.yAxis:t.xAxis,s=this.convertCrossLine(e,o);null!=s?(this.visible=null===(i=e.visible)||void 0===i||i,this.visible&&(this.updateLine(e,s),this.updateHandle(e,s),this.updateText(e,s),this.updateAxisLabel(e,o,s))):this.visible=!1}updateLine(e,t){const{line:i}=this,{lineDashOffset:n,stroke:o,strokeWidth:s,strokeOpacity:r}=e,{x1:a,y1:l,x2:d,y2:c}=t;i.setProperties({x1:a,y1:l,x2:d,y2:c,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:n,stroke:o,strokeWidth:s,strokeOpacity:r,fillOpacity:0})}updateHandle(e,t){var i,n,o;const{middle:s}=this,{locked:r,stroke:a,strokeWidth:d,strokeOpacity:c}=e,h={fill:e.handle.fill,stroke:null!==(i=e.handle.stroke)&&void 0!==i?i:a,strokeOpacity:null!==(n=e.handle.strokeOpacity)&&void 0!==n?n:c,strokeWidth:null!==(o=e.handle.strokeWidth)&&void 0!==o?o:d},u=IJ.sub(AJ.center(t),IJ.from(s.handle.width/2,s.handle.height/2));s.gradient=this.isHorizontal?"horizontal":"vertical",s.update(l(l({},h),u)),s.toggleLocked(null!==r&&void 0!==r&&r)}updateText(e,t){this.text=this.updateNode(bJ,this.text,!!e.text.label),xJ(this.line.id,this.line,e.text,t,this.text,e.text.label,e.strokeWidth)}createAxisLabel(e){const t=new vJ;return e.attachLabel(t),t}updateAxisLabel(e,t,i){this.axisLabel||(this.axisLabel=this.createAxisLabel(t));const{axisLabel:n,seriesRect:o}=this,{direction:s,position:r}=t;if(e.axisLabel.enabled){n.visible=this.visible;const a="left"===r||"top"===r?AJ.start(i):AJ.end(i),d=s===kJ.X?a.x:a.y;if(!t.inRange(d))return void(n.visible=!1);n.update(l(l({},IJ.add(a,IJ.required(o))),{},{value:e.value,styles:e.axisLabel,context:t}))}else n.visible=!1}toggleHandles(e){this.middle.visible=e,this.middle.toggleHovered("middle"===this.activeHandle)}destroy(){var e;super.destroy(),null===(e=this.axisLabel)||void 0===e||e.destroy()}toggleActive(e){this.toggleHandles(e),this.middle.toggleActive(e)}dragStart(e,t,i){const n=hX.is(e)?{x:t.x,y:VY(e.value,i.yAxis)}:{x:VY(e.value,i.xAxis),y:t.y};this.dragState={offset:t,middle:n}}drag(e,t,i){const{activeHandle:n,dragState:o}=this;if(e.locked)return;let s;if(n)this[n].toggleDragging(!0),s=this[n].drag(t).point;else{if(!o)return;s=IJ.add(o.middle,IJ.sub(t,o.offset))}const r=HY(s,i),a=hX.is(e);e.set({value:a?r.y:r.x})}translate(e,t,i){let{x:n,y:o}=t;if(e.locked)return;const{axisContext:s,translation:r}=hX.is(e)?{axisContext:i.yAxis,translation:o}:{axisContext:i.xAxis,translation:n},a=WY(VY(e.value,s)+r,s);isNaN(a)||e.set({value:a})}stopDragging(){this.middle.toggleDragging(!1)}copy(e,t,i){const n=hX.is(e),o=this.isHorizontal?i.yAxis:i.xAxis,s=this.convertCrossLine(e,o);if(!s)return;const r=n?-30:0,a=n?0:-30,l=HY({x:s.x1+a,y:s.y1+r},i);return t.set({value:n?l.y:l.x}),t}getCursor(){return null==this.activeHandle?"pointer":this[this.activeHandle].getCursor()}containsPoint(e,t){const{middle:i,line:n,text:o}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="middle",!0):n.isPointInPath(e,t)||Boolean(null===o||void 0===o?void 0:o.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.line.isPointInPath(e,t)?"line":this.middle.containsPoint(e,t)?"handle":void 0}getAnchor(){const e=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:e.x+e.width/2,y:e.y}:{x:e.x+e.width,y:e.y+e.height/2,position:"right"}}convertCrossLine(e,t){var i;if(null==e.value)return;let n=0,o=0,s=0,r=0;const{bounds:a,scale:l}=t,d=(null!==(i=l.bandwidth)&&void 0!==i?i:0)/2,c=l.convert(e.value)+d;return hX.is(e)?(o=a.width,s=c,r=c):(n=c,o=c,r=a.height),{x1:n,y1:s,x2:o,y2:r}}},{StateMachine:EJ,StateMachineProperty:RJ,Debug:LJ}=mW,PJ=class extends EJ{constructor(e,t){const i=i=>{let{point:n}=i;const o="horizontal"===e,s=o?new hX:new uX;s.set({value:o?n.y:n.x}),t.create(s),t.recordAction("Create ".concat(o?"horizontal-line":"vertical-line"," annotation"))};super("start",{start:{click:{target:"waiting-first-render",action:i},drag:{target:"waiting-first-render",action:i},reset:EJ.parent,cancel:EJ.parent},"waiting-first-render":{render:{target:EJ.parent,action:()=>{var e;null===(e=this.node)||void 0===e||e.toggleActive(!0),t.showAnnotationOptions(),t.update()}}}}),this.debug=LJ.create(!0,"annotations")}};dj([RJ()],PJ.prototype,"node",2);var NJ={type:"horizontal-line",datum:hX,scene:TJ,isDatum:hX.is,translate:(e,t,i,n)=>{hX.is(t)&&TJ.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(hX.is(t)&&hX.is(i)&&TJ.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{hX.is(t)&&TJ.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new PJ("horizontal",l(l({},e),{},{create:i("horizontal-line")}))},dragState:e=>new tQ(e)},FJ={type:"vertical-line",datum:uX,scene:TJ,isDatum:uX.is,translate:(e,t,i,n)=>{uX.is(t)&&TJ.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(uX.is(t)&&uX.is(i)&&TJ.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{uX.is(t)&&TJ.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new PJ("vertical",l(l({},e),{},{create:i("vertical-line")}))},dragState:e=>new tQ(e)},{Vec4:OJ}=mW,BJ=class{static updateBackground(e,t,i,n){var o,s;const{background:r}=this,{seriesRect:a}=n;r.path.clear(!0);const l=OJ.from(0,0,a.width,a.height),d=this.getBackgroundPoints(e,t,i,l);for(let h=0;h<d.length;h++){const e=d[h];0===h?r.path.moveTo(e.x,e.y):r.path.lineTo(e.x,e.y)}r.path.closePath(),r.checkPathDirty();const c=null!==(o=null===(s=this.getBackgroundStyles)||void 0===s?void 0:s.call(this,e))&&void 0!==o?o:e.background;r.setProperties({fill:c.fill,fillOpacity:c.fillOpacity})}},GJ=class extends HQ{constructor(){super(...arguments),this.handles={},this.topLine=new yJ,this.bottomLine=new yJ,this.background=new mW.Path({zIndex:-1}),this.anchor={x:0,y:0},this.updateBackground=BJ.updateBackground.bind(this)}update(e,t){const{locked:i,visible:n}=e,o=zY(e,t),s=zY(e.bottom,t);if(null==o||null==s)return void(this.visible=!1);this.visible=null===n||void 0===n||n;const r=this.extendLine(o,e,t),a=this.extendLine(s,e,t);this.updateLines(e,r,a,t,o,s),this.updateHandles(e,o,s),this.updateText(e,o,s),this.updateBackground(e,r,a,t),this.updateAnchor(o,s);for(const l of Object.values(this.handles))l.toggleLocked(null!==i&&void 0!==i&&i)}snapToAngle(e,t,i,n,o,s){const{handles:r}=this,a=r[n].handle;return HY(CQ(r[i].drag(e).point,a,o,s),t)}toggleHandles(e){const{handles:t}=this;if("boolean"!==typeof e)for(const[i,n]of Object.entries(e)){const e=t[i];e.visible=null===n||void 0===n||n,e.toggleHovered(this.activeHandle===i)}else for(const[i,n]of Object.entries(t))n.visible=e,n.toggleHovered(this.activeHandle===i)}toggleActive(e){this.toggleHandles(e);for(const t of Object.values(this.handles))t.toggleActive(e)}stopDragging(){const{activeHandle:e,handles:t}=this;null!=e&&t[e].toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return null==this.activeHandle?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(e,t){const{handles:i,topLine:n,bottomLine:o,text:s}=this;this.activeHandle=void 0;for(const[r,a]of Object.entries(i))if(a.containsPoint(e,t))return this.activeHandle=r,!0;return n.containsPoint(e,t)||o.containsPoint(e,t)||Boolean(null===s||void 0===s?void 0:s.containsPoint(e,t))}getNodeAtCoords(e,t){var i;if(null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t))return"text";if(this.topLine.containsPoint(e,t)||this.bottomLine.containsPoint(e,t))return"line";for(const[n,o]of Object.entries(this.handles))if(o.containsPoint(e,t))return"handle"}updateAnchor(e,t){const{x:i,y:n}=mW.Transformable.toCanvasPoint(this.topLine,(e.x1+e.x2)/2,Math.min(e.y1,e.y2,t.y1,t.y2));this.anchor.x=i,this.anchor.y=n}},{Vec2:zJ,Vec4:_J}=mW,VJ=class extends GJ{constructor(){super(),this.type="disjoint-channel",this.ignoreYBounds=!0,this.handles={topLeft:new pQ,topRight:new pQ,bottomLeft:new pQ,bottomRight:new hQ},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(e){return vQ.isCheck(e,"disjoint-channel")}dragHandle(e,t,i,n){const{activeHandle:o,handles:s}=this;if(null==o)return;const{offset:r}=s[o].drag(t);s[o].toggleDragging(!0);const a=e=>HY(e,i),l=e.toJson(),d=e.snapToAngle;switch(o){case"topLeft":case"bottomLeft":{const l="topLeft"===o?1:-1,c=n?this.snapToAngle(t,i,"topLeft","topRight",d,l):a({x:s.topLeft.handle.x+r.x,y:s.topLeft.handle.y+r.y*l}),h=n?this.snapToAngle(t,i,"bottomLeft","bottomRight",d,-l):a({x:s.bottomLeft.handle.x+r.x,y:s.bottomLeft.handle.y+r.y*-l});if(null==(null===c||void 0===c?void 0:c.y)||null==(null===h||void 0===h?void 0:h.y)||null==e.start.y)return;const u=e.startHeight+2*(c.y-e.start.y);e.start.x=c.x,e.start.y=c.y,e.startHeight=u;break}case"topRight":{const o=n?this.snapToAngle(t,i,"topRight","topLeft",d):a({x:s.topRight.handle.x+r.x,y:s.topRight.handle.y+r.y});if(null==(null===o||void 0===o?void 0:o.y)||null==e.end.y)return;const l=e.endHeight+2*(o.y-e.end.y);e.end.x=o.x,e.end.y=o.y,e.endHeight=l;break}case"bottomRight":{const t=a({x:s.bottomLeft.handle.x+r.x,y:s.bottomLeft.handle.y+r.y}),i=a({x:s.bottomRight.handle.x+r.x,y:s.bottomRight.handle.y+r.y});if(!t||!i||null==e.start.y||null==e.end.y)return;const n=e.end.y-i.y,o=e.startHeight-(e.endHeight-n);e.startHeight=o,e.endHeight=n}}e.isValidWithContext(i)||e.set(l)}updateLines(e,t,i){const{topLine:n,bottomLine:o}=this,{lineDashOffset:s,stroke:r,strokeOpacity:a,strokeWidth:d}=e,c={lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:s,stroke:r,strokeOpacity:a,strokeWidth:d};n.setProperties(l(l({},t),c)),o.setProperties(l(l({},i),c))}updateHandles(e,t,i){var n,o,s;const{handles:{topLeft:r,topRight:a,bottomLeft:d,bottomRight:c}}=this,h={fill:e.handle.fill,stroke:null!==(n=e.handle.stroke)&&void 0!==n?n:e.stroke,strokeOpacity:null!==(o=e.handle.strokeOpacity)&&void 0!==o?o:e.strokeOpacity,strokeWidth:null!==(s=e.handle.strokeWidth)&&void 0!==s?s:e.strokeWidth};r.update(l(l({},h),_J.start(t))),a.update(l(l({},h),_J.end(t))),d.update(l(l({},h),_J.start(i))),c.update(l(l({},h),zJ.sub(_J.end(i),zJ.from(c.handle.width/2,c.handle.height/2))))}updateText(e,t,i){this.text=this.updateNode(bJ,this.text,!!e.text.label),wJ(!1,t,i,e.text,e.strokeWidth,this.text,e.text.label)}getBackgroundPoints(e,t,i,n){const o=t.x1>t.x2,s=t.y1>t.y2,r=s?n.y2:n.y1,a=s?n.y1:n.y2,l=zJ.from(t);return e.extendEnd&&t.y2===a&&l.push(zJ.from(o?n.x1:n.x2,s?n.y1:n.y2)),e.extendEnd&&i.y2===r&&l.push(zJ.from(o?n.x1:n.x2,s?n.y2:n.y1)),l.push(...zJ.from(i).reverse()),e.extendStart&&i.y1===a&&l.push(zJ.from(o?n.x2:n.x1,s?n.y1:n.y2)),e.extendStart&&t.y1===r&&l.push(zJ.from(o?n.x2:n.x1,s?n.y2:n.y1)),l}},{StateMachine:HJ,StateMachineProperty:WJ,Debug:jJ}=mW,UJ=class extends HJ{constructor(e){const t=t=>{let{point:i}=t;const n=new CX;n.set({start:i,end:i,startHeight:0,endHeight:0}),e.create(n)},i=t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({end:bQ(i,n,s,o.start,o.snapToAngle)}),e.update())},n=()=>{var t;null===(t=this.node)||void 0===t||t.toggleHandles({topRight:!0}),e.update()},o=t=>{var i;let{point:n}=t;const{datum:o,node:s}=this;if(null==(null===o||void 0===o?void 0:o.start.y)||null==(null===o||void 0===o?void 0:o.end.y))return;const r=o.end.y-(null!==(i=n.y)&&void 0!==i?i:0),a=2*(o.start.y-o.end.y)+r,l={x:o.start.x,y:o.start.y-r},d={x:o.end.x,y:n.y};null===s||void 0===s||s.toggleHandles(!0),e.validatePoint(l)&&e.validatePoint(d)&&(o.set({startHeight:a,endHeight:r}),e.recordAction("Create ".concat("disjoint-channel"," annotation")),e.showAnnotationOptions(),e.update())},s=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:HJ.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({topLeft:!0,topRight:!1,bottomLeft:!1,bottomRight:!1})}}},end:{hover:i,drag:i,click:{target:"height",action:n},dragEnd:{target:"height",action:n},reset:{target:HJ.parent,action:s},cancel:{target:HJ.parent,action:s}},height:{hover:t=>{var i;let{point:n}=t;const{datum:o,node:s}=this;if(null==(null===o||void 0===o?void 0:o.start.y)||null==(null===o||void 0===o?void 0:o.end.y))return;const r=o.end.y-(null!==(i=n.y)&&void 0!==i?i:0),a=2*(o.start.y-o.end.y)+r,l={x:o.start.x,y:o.start.y-a},d={x:o.end.x,y:n.y};null===s||void 0===s||s.toggleHandles({bottomLeft:!0,bottomRight:!0}),e.validatePoint(l)&&e.validatePoint(d)&&(o.set({startHeight:a,endHeight:r}),e.update())},click:{target:HJ.parent,action:o},drag:{target:HJ.parent,action:o},reset:{target:HJ.parent,action:s},cancel:{target:HJ.parent,action:s}}}),this.debug=jJ.create(!0,"annotations"),this.snapping=!1}};dj([WJ()],UJ.prototype,"datum",2),dj([WJ()],UJ.prototype,"node",2),dj([WJ()],UJ.prototype,"snapping",2);var KJ={type:"disjoint-channel",datum:CX,scene:VJ,isDatum:CX.is,translate:(e,t,i,n)=>{CX.is(t)&&VJ.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(CX.is(t)&&CX.is(i)&&VJ.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{CX.is(t)&&VJ.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new UJ(l(l({},e),{},{create:i("disjoint-channel")}))},dragState:e=>new tQ(e)},YJ=[0,23.6,38.2,50,61.8,78.6,100],ZJ={10:[...YJ,161.8,261.8,361.8,423.6],6:YJ,4:YJ.filter((e=>78.6!==e&&23.6!==e))};var{Vec2:XJ,Vec4:qJ}=mW,QJ=class extends vQ{constructor(){super(),this.trendLine=new yJ,this.rangeFillsGroup=new mW.Group({name:"".concat(this.id,"-range-fills")}),this.rangeFillsGroupSelection=mW.Selection.select(this.rangeFillsGroup,mW.Range),this.rangeStrokesGroup=new mW.Group({name:"".concat(this.id,"-range-strokes")}),this.rangeStrokesGroupSelection=mW.Selection.select(this.rangeStrokesGroup,yJ),this.labelsGroup=new mW.Group({name:"".concat(this.id,"-ranges-labels")}),this.labelsGroupSelection=mW.Selection.select(this.labelsGroup,bJ),this.anchor={x:0,y:0,position:"above"},this.append([this.trendLine,this.rangeFillsGroup,this.rangeStrokesGroup,this.labelsGroup])}update(e,t){var i;let n=zY(e,t);if(null==n)return void(this.visible=!1);if(n=qJ.round(n),this.visible=null===(i=e.visible)||void 0===i||i,!this.visible)return;this.updateTrendLine(e,n),this.updateHandles(e,n),this.updateAnchor(e,n,t);const{reverse:o}=e,s=this.extendLine(n,e,t);this.updateRanges(e,s,t);const r=o?n.y2:n.y1,a=l(l({},s),{},{y1:r,y2:r});this.updateText(e,a)}extendLine(e,t,i){let{x1:n,y1:o,x2:s,y2:r}=e;const a={x1:n,y1:o,x2:s,y2:r};if(!t.extendStart&&!t.extendEnd)return a;const{x:l,width:d}=i.xAxis.bounds;return t.extendEnd&&(a[n>s?"x1":"x2"]=l+d),t.extendStart&&(a[n>s?"x2":"x1"]=l),a}updateTrendLine(e,t){const{trendLine:i}=this,{lineDashOffset:n,strokeWidth:o,strokeOpacity:s,stroke:r}=e;i.setProperties(l(l({},t),{},{lineCap:e.getLineCap(),lineDash:[3,4],lineDashOffset:n,strokeWidth:o,strokeOpacity:s,fillOpacity:0,stroke:r}))}updateRangeStrokes(e){const{lineDashOffset:t,strokeWidth:i,strokeOpacity:n,strokes:o,rangeStroke:s,isMultiColor:r}=e;this.rangeStrokesGroupSelection.each(((a,l,d)=>{let{x1:c,x2:h,y2:u,tag:p}=l;const g=u,m=r?o[d%o.length]:s;a.setProperties({x1:c,x2:h,y1:g,y2:g,stroke:m,strokeOpacity:n,strokeWidth:i,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,tag:p})}))}updateRanges(e,t,i){const n=function(e,t,i){let{x1:n,y1:o,x2:s,y2:r}=e;const a=r-o,l=i?1:-1,d=i?o:r;let c=d;const h=[];return ZJ[arguments.length>3&&void 0!==arguments[3]?arguments[3]:10].forEach(((e,i)=>{const o=d+a*(e/100)*l,r=t.yAxis.scaleInvert(o);h.push({id:i,x1:n,x2:s,y1:c,y2:o,tag:100==e?0:1,label:{x1:Math.min(n,s)-10,x2:s,y1:o,y2:o,text:"".concat((e/100).toFixed(3)," (").concat(r.toFixed(2),")")}}),c=o})),h}(t,i,e.reverse,e.bands),o=e=>e.id;this.rangeFillsGroupSelection.update(n,void 0,o),this.rangeStrokesGroupSelection.update(n,void 0,o),this.labelsGroupSelection.update(n,void 0,o),this.updateRangeFills(e),this.updateRangeStrokes(e),this.updateRangeLabels(e,i)}updateRangeFills(e){const{lineDashOffset:t,strokeWidth:i,strokeOpacity:n,strokes:o,rangeStroke:s,showFill:r,isMultiColor:a}=e;this.rangeFillsGroupSelection.each(((l,d,c)=>{let{x1:h,x2:u,y1:p,y2:g}=d;const m=a?o[c%o.length]:s;r?l.setProperties({x1:h,x2:u,y1:p,y2:g,startLine:!1,endLine:!1,isRange:!0,stroke:m,strokeOpacity:n,fill:m,fillOpacity:.15*(null!==n&&void 0!==n?n:1),strokeWidth:i,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,visible:!0}):l.visible=!1}))}updateRangeLabels(e,t){let{xAxis:i}=t;const{rangeStrokesGroupSelection:o}=this,{strokes:s,strokeWidth:r,rangeStroke:a,isMultiColor:l,label:{color:d,fontFamily:c,fontSize:h,fontStyle:u,fontWeight:p}}=e;this.labelsGroupSelection.each(((e,t,g)=>{const m=null!==d&&void 0!==d?d:l?s[g%s.length]:a,v=o.at(g);if(!v)return;const f=t.label,{text:y}=f,b=n(f,nj),C={label:y,position:"center",alignment:"left",color:m,fontFamily:c,fontSize:h,fontStyle:u,fontWeight:p};xJ(e.id,v,C,b,e),e.setProperties({text:y,x:b.x1,y:b.y1,textBaseline:"middle",textAlign:"end",fill:m,fontFamily:c,fontSize:h,fontStyle:u,fontWeight:p});const{x:x}=e.getBBox();x>=i.bounds.x&&x<=i.bounds.x+i.bounds.width||xJ(e.id,v,C,b,e,y,r)}))}updateText(e,t){const i=this.rangeStrokesGroupSelection.selectByTag(0)[0],{text:n,strokeWidth:o}=e;this.text=this.updateNode(bJ,this.text,!!n.label),xJ(i.id,i,n,t,this.text,n.label,o)}updateAnchor(e,t,i,n){const o=qJ.topCenter(t);XJ.apply(this.anchor,mW.Transformable.toCanvasPoint(this.trendLine,o.x,o.y))}containsPoint(e,t){const{trendLine:i,rangeStrokesGroupSelection:n,text:o}=this;let s=!1;return n.each((i=>s||(s=i.isPointInPath(e,t)))),s||i.isPointInPath(e,t)||Boolean(null===o||void 0===o?void 0:o.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.trendLine.isPointInPath(e,t)?"line":void 0}getHandleStyles(e){var t,i,n;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.stroke,strokeOpacity:null!==(i=e.handle.strokeOpacity)&&void 0!==i?i:e.strokeOpacity,strokeWidth:null!==(n=e.handle.strokeWidth)&&void 0!==n?n:e.strokeWidth}}drag(e,t,i,n){e.locked||(this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}getAnchor(){return this.anchor}getCursor(){return"pointer"}},{Vec2:JJ,Vec4:$J}=mW,e$=class extends QJ{constructor(){super(),this.type="fibonacci-retracement",this.start=new pQ,this.end=new pQ,this.append([this.start,this.end])}static is(e){return vQ.isCheck(e,"fibonacci-retracement")}containsPoint(e,t){const{start:i,end:n}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):n.containsPoint(e,t)?(this.activeHandle="end",!0):super.containsPoint(e,t)}getNodeAtCoords(e,t){return this.start.containsPoint(e,t)||this.end.containsPoint(e,t)?"handle":super.getNodeAtCoords(e,t)}dragStart(e,t,i){this.dragState=l({offset:t},xQ({start:e.start,end:e.end},i))}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints({datum:e,start:n.start,end:n.end,translation:JJ.sub(t,n.offset),context:i})}dragHandle(e,t,i,n){const{activeHandle:o,dragState:s}=this;if(!o||!s)return;this[o].toggleDragging(!0);const r=n?this.snapToAngle(e,t,i):HY(this[o].drag(t).point,i);r&&nX(i,r)&&(e[o].x=r.x,e[o].y=r.y)}snapToAngle(e,t,i){const{activeHandle:n}=this,o=["start","end"].find((e=>e!==n));if(!n||!o)return;this[n].toggleDragging(!0);return HY(CQ(t,_Y(e[o],i),e.snapToAngle),i)}translatePoints(e){let{datum:t,start:i,end:n,translation:o,context:s}=e;const{vectors:r,translateX:a,translateY:l}=wQ({start:i,end:n},o,s);var d,c,h,u;a&&(t.start.x=null===(d=r.start)||void 0===d?void 0:d.x,t.end.x=null===(c=r.end)||void 0===c?void 0:c.x);(this.ignoreYBounds||l)&&(t.start.y=null===(h=r.start)||void 0===h?void 0:h.y,t.end.y=null===(u=r.end)||void 0===u?void 0:u.y)}translate(e,t,i){this.translatePoints({datum:e,start:_Y(e.start,i),end:_Y(e.end,i),translation:t,context:i})}copy(e,t,i){const n=zY(e,i);if(!n)return;const o=this.computeBBoxWithoutHandles();return this.translatePoints({datum:t,start:{x:n.x1,y:n.y1},end:{x:n.x2,y:n.y2},translation:{x:-o.width/2,y:-o.height/2},context:i}),t}toggleHandles(e){if("boolean"===typeof e)this.start.visible=e,this.end.visible=e;else for(const[t,i]of Object.entries(e))this[t].visible=i;this.start.toggleHovered("start"===this.activeHandle),this.end.toggleHovered("end"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}updateHandles(e,t,i){var n,o;this.start.update(l(l({},this.getHandleStyles(e)),this.getHandleCoords(e,t,"start"))),this.end.update(l(l({},this.getHandleStyles(e)),this.getHandleCoords(e,t,"end",i))),this.start.toggleLocked(null!==(n=e.locked)&&void 0!==n&&n),this.end.toggleLocked(null!==(o=e.locked)&&void 0!==o&&o)}getHandleCoords(e,t,i,n){return"start"===i?$J.start(t):$J.end(t)}},{StateMachine:t$,StateMachineProperty:i$,Debug:n$}=mW,o$=class extends t${constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({start:i,end:i}),e.create(n)},i=t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({end:bQ(i,n,s,o.start,o.snapToAngle)}),e.update())},n=()=>{var t;null===(t=this.node)||void 0===t||t.toggleHandles({end:!0}),e.update()},o=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:t$.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({start:!0,end:!1})}}},end:{hover:i,click:{target:t$.parent,action:n},drag:i,dragEnd:{target:t$.parent,action:n},reset:{target:t$.parent,action:o},cancel:{target:t$.parent,action:o},onExit:()=>{var t;e.showAnnotationOptions(),e.recordAction("Create ".concat(null===(t=this.datum)||void 0===t?void 0:t.type," annotation"))}}}),this.debug=n$.create(!0,"annotations"),this.snapping=!1}};dj([i$()],o$.prototype,"datum",2),dj([i$()],o$.prototype,"node",2),dj([i$()],o$.prototype,"snapping",2);var s$=class extends o${createDatum(){return new kX}},r$=class extends o${createDatum(){return new IX}},a$=class extends o${createDatum(){return new VX}},l$={type:"fibonacci-retracement",datum:VX,scene:e$,isDatum:VX.is,translate:(e,t,i,n)=>{VX.is(t)&&e$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(VX.is(t)&&VX.is(i)&&e$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{VX.is(t)&&e$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new a$(l(l({},e),{},{create:i("fibonacci-retracement")}))},dragState:e=>new tQ(e)},{Vec2:d$}=mW,c$=class extends mW.Group{},h$=class extends c${constructor(){super(),this.type="arrow",this.path=new mW.Path,this.armLength=6,this.append([this.path])}update(e){var t;const{path:i}=this,{x:o,y:s,angle:r}=e,a=n(e,oj),l=d$.from(o,s),d=3*Math.PI/4,c=this.armLength+2*(null!==(t=e.strokeWidth)&&void 0!==t?t:0),h=d$.rotate(d$.from(0,c),r+d,l),u=d$.rotate(d$.from(c,0),r-d,l);i.setProperties(a),i.fillOpacity=0,i.path.clear(),i.path.moveTo(h.x,h.y),i.path.lineTo(l.x,l.y),i.path.lineTo(u.x,u.y)}},{Vec2:u$,Vec4:p$}=mW,g$=class extends jQ{constructor(){super(),this.type="line",this.line=new yJ,this.append([this.line,this.start,this.end])}static is(e){return vQ.isCheck(e,"line")}update(e,t){var i;let n=zY(e,t);null!=n?(n=p$.round(n),this.visible=null===(i=e.visible)||void 0===i||i,this.visible&&(this.updateLine(e,n,t),this.updateHandles(e,n),this.updateText(e,n),this.updateCaps(e,n),this.updateAnchor(e,n,t))):this.visible=!1}updateLine(e,t,i){const{line:n}=this,{lineDashOffset:o,stroke:s,strokeWidth:r,strokeOpacity:a}=e,d=this.extendLine(t,e,i);n.setProperties(l(l({},d),{},{lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:o,stroke:s,strokeWidth:r,strokeOpacity:a,fillOpacity:0}))}updateText(e,t){this.text=this.updateNode(bJ,this.text,!!e.text.label),xJ(this.line.id,this.line,e.text,t,this.text,e.text.label,e.strokeWidth)}updateCaps(e,t){if(!e.startCap&&this.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),!e.endCap&&this.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),!e.startCap&&!e.endCap)return;const{stroke:i,strokeWidth:n,strokeOpacity:o}=e,[s,r]=u$.from(t),a=u$.angle(u$.sub(r,s));e.startCap&&(this.startCap&&this.startCap.type!==e.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),null==this.startCap&&(this.startCap=new h$,this.append([this.startCap])),this.startCap.update({x:s.x,y:s.y,angle:a-Math.PI,stroke:i,strokeWidth:n,strokeOpacity:o})),e.endCap&&(this.endCap&&this.endCap.type!==e.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),null==this.endCap&&(this.endCap=new h$,this.append([this.endCap])),this.endCap.update({x:r.x,y:r.y,angle:a,stroke:i,strokeWidth:n,strokeOpacity:o}))}updateAnchor(e,t,i,n){const o=p$.topCenter(t);u$.apply(this.anchor,mW.Transformable.toCanvasPoint(this.line,o.x,o.y))}containsPoint(e,t){const{line:i,text:n}=this;return super.containsPoint(e,t)||i.isPointInPath(e,t)||Boolean(null===n||void 0===n?void 0:n.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.line.isPointInPath(e,t)?"line":super.getNodeAtCoords(e,t)}getHandleCoords(e,t,i,n){const{startCap:o,endCap:s}=this;let[r,a]=u$.from(t);const l=u$.angle(u$.sub(a,r));return o&&(r=u$.rotate(u$.from(0,-pQ.HANDLE_SIZE/2),l,r)),s&&(a=u$.rotate(u$.from(0,pQ.HANDLE_SIZE/2),l,a)),"start"===i?r:a}getHandleStyles(e){var t,i,n;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.stroke,strokeOpacity:null!==(i=e.handle.strokeOpacity)&&void 0!==i?i:e.strokeOpacity,strokeWidth:null!==(n=e.handle.strokeWidth)&&void 0!==n?n:e.strokeWidth}}},m$={type:"line",datum:IX,scene:g$,isDatum:IX.is,translate:(e,t,i,n)=>{IX.is(t)&&g$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(IX.is(t)&&IX.is(i)&&g$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{IX.is(t)&&g$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new r$(l(l({},e),{},{create:i("line")}))},dragState:e=>new tQ(e)},v$={type:"arrow",datum:kX,scene:g$,isDatum:kX.is,translate:(e,t,i,n)=>{kX.is(t)&&g$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(kX.is(t)&&kX.is(i)&&g$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{kX.is(t)&&g$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new s$(l(l({},e),{},{create:i("arrow")}))},dragState:e=>new tQ(e)};function f$(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(const n of e)if(Array.isArray(n)){for(const e of n)y$(e,i);i+=mW.Group.computeChildrenBBox(n).width+t}else y$(n,i),i+=n.getBBox().width+t}function y$(e,t){"x1"in e?(e.x2=t+(e.x2-e.x1),e.x1=t):e.x=t}function b$(e,t){"y1"in e?(e.y2=t+(e.y2-e.y1),e.y1=t):e.y=t}function C$(e,t){"x1"in e?(e.x1+=t,e.x2+=t):e.x+=t}function x$(e,t){"y1"in e?(e.y1+=t,e.y2+=t):e.y+=t}var{Vec4:w$}=mW,S$=class extends mW.Group{constructor(){super(),this.name="MeasurerStatisticsScene",this.background=new mW.Rect,this.dateRangeBarsText=new mW.Text,this.dateRangeDivider=new mW.Line,this.dateRangeValueText=new mW.Text,this.priceRangeValueText=new mW.Text,this.priceRangeDivider=new mW.Line,this.priceRangePercentageText=new mW.Text,this.volumeText=new mW.Text,this.volumeFormatter=new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}),this.append([this.background,this.dateRangeBarsText,this.dateRangeDivider,this.dateRangeValueText,this.priceRangeValueText,this.priceRangeDivider,this.priceRangePercentageText,this.volumeText])}update(e,t,i,n,o,s){this.verticalDirection=o;const r=this.updateStatistics(e,t,i,s),a=mW.Group.computeChildrenBBox(r.flat());a.grow(10),this.updateBackground(e,a,10),this.reposition(r,10,n)}updateStatistics(e,t,i,n){const{dateRangeBarsText:o,dateRangeDivider:s,dateRangeValueText:r,priceRangeValueText:a,priceRangeDivider:d,priceRangePercentageText:c,volumeText:h}=this,u=e.statistics.fontSize+3,p=this.getTextStyles(e),g=l(l({},this.getDividerStyles(e)),{},{x1:0,y1:0,x2:0,y2:u}),m=[o,s,r],v=[a,d,c],f=[];return t.priceRange&&(a.setProperties(l(l({},p),{},{text:this.formatPriceRangeValue(t.priceRange.value,n)})),d.setProperties(g),c.setProperties(l(l({},p),{},{text:this.formatPriceRangePercentage(t.priceRange.percentage,n)})),f$(v,i.x,8),f.push(v)),t.dateRange&&(o.setProperties(l(l({},p),{},{text:this.formatDateRangeBars(t.dateRange.bars,n)})),s.setProperties(g),r.setProperties(l(l({},p),{},{text:this.formatDateRangeValue(t.dateRange.value)})),f$(m,i.x,8),f.push(m)),null!=t.volume?(h.setProperties(l(l({},p),{},{x:i.x,text:this.formatVolume(t.volume,n),visible:!0})),f.push(h)):h.visible=!1,function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(const n of e)if(Array.isArray(n)){for(const e of n)b$(e,i);i+=mW.Group.computeChildrenBBox(n).height+t}else b$(n,i),i+=n.getBBox().height+t}(f,i.y,6),d.y1+=-2,d.y2+=-2,s.y1+=-2,s.y2+=-2,f}updateBackground(e,t,i){const n=this.getBackgroundStyles(e);this.background.setProperties(l(l(l({},n),t),{},{x:t.x-t.width/2+i,y:t.y}))}reposition(e,t,i){const{width:n,height:o}=i.seriesRect,s=w$.from(this.background.getBBox());let r=0;s.x1<0&&(r=-s.x1),s.x2>n&&(r=n-s.x2);const a=Math.min(t,o-s.y2);for(const l of e)if(Array.isArray(l)){const e=mW.Group.computeChildrenBBox(l).width;for(const t of l)C$(t,r-e/2),x$(t,a)}else C$(l,r-l.getBBox().width/2),x$(l,a);this.background.x+=r,this.background.y+=a}getTextStyles(e){return{fill:e.statistics.color,fontFamily:e.statistics.fontFamily,fontSize:e.statistics.fontSize,fontStyle:e.statistics.fontStyle,fontWeight:e.statistics.fontWeight,textBaseline:"top"}}getDividerStyles(e){return{stroke:e.statistics.divider.stroke,strokeOpacity:e.statistics.divider.strokeOpacity,strokeWidth:e.statistics.divider.strokeWidth}}getBackgroundStyles(e){return{fill:e.statistics.fill,stroke:e.statistics.stroke,strokeOpacity:e.statistics.strokeOpacity,strokeWidth:e.statistics.strokeWidth,cornerRadius:4}}formatDateRangeBars(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.t("measurerDateRangeBars",{value:e}))&&void 0!==i?i:"".concat(e)}formatDateRangeValue(e){const t=[],i=e>=0?"":"-";e=Math.abs(e);const n=6e4,o=36e5,s=24*o,r=Math.floor(e/n),a=Math.floor(e/o),l=Math.floor(e/s),d=a%24,c=r%60;return l>=1&&t.push("".concat(l,"d")),a>=1&&(e<s||0!==d)&&t.push("".concat(d,"h")),(e<o||0!==c)&&t.push("".concat(c,"m")),t[0]="".concat(i).concat(t[0]),t.join(" ")}formatPriceRangeValue(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.t("measurerPriceRangeValue",{value:Number(e.toFixed(2))}))&&void 0!==i?i:"".concat(e)}formatPriceRangePercentage(e,t){var i;return null!==(i=null===t||void 0===t?void 0:t.t("measurerPriceRangePercent",{value:e}))&&void 0!==i?i:"".concat(e)}formatVolume(e,t){var i;const n=isNaN(e)?"":this.volumeFormatter.format(e);return null!==(i=null===t||void 0===t?void 0:t.t("measurerVolume",{value:n}))&&void 0!==i?i:n}},M$=class extends S${getDirectionStyles(e){return"down"===this.verticalDirection?e.down.statistics:e.up.statistics}getTextStyles(e){const t=this.getDirectionStyles(e);return l(l({},super.getTextStyles(e)),{},{fill:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight})}getDividerStyles(e){const t=this.getDirectionStyles(e);return{stroke:t.divider.stroke,strokeOpacity:t.divider.strokeOpacity,strokeWidth:t.divider.strokeWidth}}getBackgroundStyles(e){const t=this.getDirectionStyles(e);return l(l({},super.getBackgroundStyles(e)),{},{fill:t.fill,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth})}},{Vec2:D$,Vec4:k$}=mW,I$=class extends jQ{constructor(){super(),this.type="measurer",this.horizontalLine=new yJ,this.verticalLine=new yJ,this.horizontalStartLine=new yJ,this.horizontalEndLine=new yJ,this.verticalStartLine=new yJ,this.verticalEndLine=new yJ,this.horizontalEndCap=new h$,this.verticalEndCap=new h$,this.background=new mW.Path({zIndex:-1}),this.updateBackground=BJ.updateBackground.bind(this),this.statistics=this.createStatisticsScene(),this.statistics.zIndex=1,this.append([this.background,this.verticalStartLine,this.verticalEndLine,this.horizontalStartLine,this.horizontalEndLine,this.horizontalLine,this.verticalLine,this.horizontalEndCap,this.verticalEndCap,this.start,this.end,this.statistics])}static is(e){return vQ.isCheck(e,"measurer")}createStatisticsScene(){return new S$}update(e,t){var i;const n=zY(e,t);if(null==n)return void(this.visible=!1);if(this.visible=null===(i=e.visible)||void 0===i||i,!this.visible)return;const o=this.extendPerpendicular(n,e,t),s=l(l({},o),{},{y2:o.y1}),r=l(l({},o),{},{y1:o.y2});this.verticalDirection=n.y1<n.y2?"down":"up",this.updateVisibilities(e),this.updateLines(e,n),this.updateHandles(e,n),this.updateText(e,n),this.updateCaps(e,n),this.updateBoundingLines(e,o),this.updateBackground(e,s,r,t),this.updateStatistics(e,n,t),this.updateAnchor(e,n,t)}extendPerpendicular(e,t,i){const n={x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)},[o,s]=D$.from(i.yAxis.bounds);return RZ.is(t)?(t.extendAbove&&(n.y1=o.y),t.extendBelow&&(n.y2=s.y)):LZ.is(t)&&(t.extendLeft&&(n.x1=o.x),t.extendRight&&(n.x2=s.x)),n}updateVisibilities(e){const{horizontalStartLine:t,horizontalEndLine:i,horizontalEndCap:n,verticalStartLine:o,verticalEndLine:s,verticalEndCap:r}=this,{direction:a}=e;o.visible="vertical"!==a,s.visible="vertical"!==a,n.visible="vertical"!==a,t.visible="horizontal"!==a,i.visible="horizontal"!==a,r.visible="horizontal"!==a}updateLines(e,t){const{horizontalLine:i,verticalLine:n}=this,{direction:o}=e,{x1:s,y1:r,x2:a,y2:d}=t,c=D$.round(k$.center(t)),h=this.getLineStyles(e);"vertical"!==o&&i.setProperties(l(l({},h),{},{x1:s,x2:a,y1:c.y,y2:c.y})),"horizontal"!==o&&n.setProperties(l(l({},h),{},{x1:c.x,x2:c.x,y1:r,y2:d}))}updateText(e,t){const{direction:i}=e,n=D$.round(k$.center(t));let o;const s=l({},t);"vertical"===i?(o=this.verticalLine,s.x1=n.x,s.x2=n.x):(o=this.horizontalLine,s.y1=n.y,s.y2=n.y),this.text=this.updateNode(bJ,this.text,!!e.text.label);const{id:r}=o,a=xJ(r,o,e.text,s,this.text,e.text.label,e.strokeWidth);let d;if("both"===i&&a&&this.text){const e=k$.from(this.text.getBBox()),{offset:t}=a.numbers;e.x1<=n.x+t.x&&e.x2>=n.x-t.x&&(d={x:n.x,y:a.clipMask.y,radius:this.text.getBBox().height/2+D$.length(t)})}this.verticalLine.setClipMask(r,d)}updateCaps(e,t){const{horizontalEndCap:i,verticalEndCap:n}=this,{direction:o}=e,{x1:s,y1:r,x2:a,y2:d}=t,c=D$.round(k$.center(t)),{stroke:h,strokeWidth:u,strokeOpacity:p}=this.getLineStyles(e),g={stroke:h,strokeWidth:u,strokeOpacity:p};if("vertical"!==o){const e=s<=a?0:Math.PI;let t=a;"horizontal"===o&&(t+=s<=a?-2:2),i.update(l(l({},g),{},{x:t,y:c.y,angle:e}))}if("horizontal"!==o){const e=r<=d?Math.PI/2:Math.PI/-2;let t=d;"vertical"===o&&(t+=r<=d?-2:2),n.update(l(l({},g),{},{x:c.x,y:t,angle:e}))}}updateBoundingLines(e,t){const{verticalStartLine:i,verticalEndLine:n,horizontalStartLine:o,horizontalEndLine:s}=this,{direction:r}=e,{x1:a,y1:d,x2:c,y2:h}=t,u=this.getLineStyles(e);"horizontal"===r&&(i.setProperties(l(l({},u),{},{x1:a,y1:d,x2:a,y2:h})),n.setProperties(l(l({},u),{},{x1:c,y1:d,x2:c,y2:h}))),"vertical"===r&&(o.setProperties(l(l({},u),{},{x1:a,y1:d,x2:c,y2:d})),s.setProperties(l(l({},u),{},{x1:a,y1:h,x2:c,y2:h})))}updateStatistics(e,t,i){const n=D$.add(k$.bottomCenter(t),D$.from(0,10)),o={volume:this.getVolume(e)};e.hasPriceRange&&(o.priceRange={percentage:this.getPriceRangePercentage(e),value:this.getPriceRangeValue(e)}),e.hasDateRange&&(o.dateRange={bars:this.getDateRangeBars(t,i),value:this.getDateRangeValue(e)}),this.statistics.update(e,o,n,i,this.verticalDirection,e.localeManager)}updateAnchor(e,t,i,n){const o=k$.topCenter(t);D$.apply(this.anchor,mW.Transformable.toCanvasPoint(this.horizontalLine,o.x,o.y))}getBackgroundPoints(e,t,i,n){const[o,s]=D$.from(t),[r,a]=D$.from(i);return[o,s,a,r]}getLineStyles(e){const{lineDashOffset:t,stroke:i,strokeWidth:n,strokeOpacity:o}=e;return{lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,stroke:i,strokeWidth:n,strokeOpacity:o,fillOpacity:0}}getBackgroundStyles(e){const{background:t}=e;return{fill:t.fill,fillOpacity:t.fillOpacity}}getHandleStyles(e){var t,i,n;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.stroke,strokeOpacity:null!==(i=e.handle.strokeOpacity)&&void 0!==i?i:e.strokeOpacity,strokeWidth:null!==(n=e.handle.strokeWidth)&&void 0!==n?n:e.strokeWidth}}containsPoint(e,t){const{horizontalLine:i,text:n,verticalLine:o,horizontalStartLine:s,horizontalEndLine:r,verticalStartLine:a,verticalEndLine:l}=this;return super.containsPoint(e,t)||i.isPointInPath(e,t)||o.isPointInPath(e,t)||s.visible&&s.isPointInPath(e,t)||r.visible&&r.isPointInPath(e,t)||a.visible&&a.isPointInPath(e,t)||l.visible&&l.isPointInPath(e,t)||Boolean(null===n||void 0===n?void 0:n.containsPoint(e,t))}getNodeAtCoords(e,t){var i;return null!==(i=this.text)&&void 0!==i&&i.containsPoint(e,t)?"text":this.start.containsPoint(e,t)||this.end.containsPoint(e,t)?"handle":"line"}getDateRangeBars(e,t){const{step:i}=t.xAxis.scale,n=e.x1<=e.x2?1:-1;return i?Math.round(k$.width(e)/i)*n:0}getDateRangeValue(e){if(null==e.start.x||null==e.end.x||!(e.start.x instanceof Date)||!(e.end.x instanceof Date))throw new Error("Can not create a date range measurement of non-date x-axis.");return e.end.x.getTime()-e.start.x.getTime()}getPriceRangePercentage(e){if(null==e.start.y||null==e.end.y)throw new Error("Can not create a price range measurement of a non-numeric y-axis");return(e.end.y-e.start.y)/e.start.y}getPriceRangeValue(e){if(null==e.start.y||null==e.end.y)throw new Error("Can not create a price range measurement of a non-numeric y-axis");return e.end.y-e.start.y}getVolume(e){return e.getVolume(e.start.x,e.end.x)}},A$=class extends I${constructor(){super(...arguments),this.type="quick-measurer"}static is(e){return vQ.isCheck(e,"quick-measurer")}createStatisticsScene(){return new M$}getDirectionStyles(e){return"down"===this.verticalDirection?e.down:e.up}getLineStyles(e){const t=this.getDirectionStyles(e);return l(l({},super.getLineStyles(e)),{},{stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity})}getBackgroundStyles(e){const t=this.getDirectionStyles(e);return{fill:t.fill,fillOpacity:t.fillOpacity}}getHandleStyles(e){var t,i,n;const o=this.getDirectionStyles(e);return{fill:o.handle.fill,stroke:null!==(t=o.handle.stroke)&&void 0!==t?t:o.stroke,strokeOpacity:null!==(i=o.handle.strokeOpacity)&&void 0!==i?i:o.strokeOpacity,strokeWidth:null!==(n=o.handle.strokeWidth)&&void 0!==n?n:o.strokeWidth}}},{StateMachine:T$,StateMachineProperty:E$,Debug:R$}=mW,L$=class extends T${constructor(e){const t=t=>{let{point:i}=t;const n=this.createDatum();n.set({start:i,end:i}),e.create(n)},i=t=>{let{point:i}=t;const{datum:n,node:o}=this;null===n||void 0===n||n.set({end:i}),null===o||void 0===o||o.toggleActive(!0),null===o||void 0===o||o.toggleHandles({end:!1}),e.update()},n=()=>{var e;null===(e=this.node)||void 0===e||e.toggleHandles({end:!0})},o=()=>e.delete();super("start",{start:{reset:T$.parent,click:{target:"end",action:t},drag:{target:"end",action:t}},end:{hover:i,drag:i,click:{target:T$.parent,action:n},dragEnd:{target:T$.parent,action:n},reset:{target:T$.parent,action:o},cancel:{target:T$.parent,action:o},onExit:()=>{var t;e.showAnnotationOptions(),eq(this.datum)||e.recordAction("Create ".concat(null===(t=this.node)||void 0===t?void 0:t.type," annotation"))}}}),this.debug=R$.create(!0,"annotations")}};dj([E$()],L$.prototype,"datum",2),dj([E$()],L$.prototype,"node",2);var P$=class extends L${createDatum(){return new RZ}},N$=class extends L${createDatum(){return new LZ}},F$=class extends L${createDatum(){return new PZ}},O$=class extends L${createDatum(){return new NZ}},B$={type:"date-range",datum:RZ,scene:I$,isDatum:RZ.is,translate:(e,t,i,n)=>{RZ.is(t)&&I$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(RZ.is(t)&&RZ.is(i)&&I$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{RZ.is(t)&&I$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new P$(l(l({},e),{},{create:i("date-range")}))},dragState:e=>new tQ(e)},G$={type:"price-range",datum:LZ,scene:I$,isDatum:LZ.is,translate:(e,t,i,n)=>{LZ.is(t)&&I$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(LZ.is(t)&&LZ.is(i)&&I$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{LZ.is(t)&&I$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new N$(l(l({},e),{},{create:i("date-range")}))},dragState:e=>new tQ(e)},z$={type:"date-price-range",datum:PZ,scene:I$,isDatum:PZ.is,translate:(e,t,i,n)=>{PZ.is(t)&&I$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(PZ.is(t)&&PZ.is(i)&&I$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{PZ.is(t)&&I$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new F$(l(l({},e),{},{create:i("date-range")}))},dragState:e=>new tQ(e)},_$={type:"quick-date-price-range",datum:NZ,scene:A$,isDatum:NZ.is,translate:(e,t,i,n)=>{NZ.is(t)&&A$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(NZ.is(t)&&NZ.is(i)&&A$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{NZ.is(t)&&A$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new O$(l(l({},e),{},{create:i("quick-date-price-range")}))},dragState:e=>new tQ(e)},{ZIndexMap:V$,TextWrapper:H$,clamp:W$}=mW,j$=class extends sJ{constructor(){super(),this.type="note",this.shape=new mW.Rect,this.iconBackground=new mW.SvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new mW.SvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new mW.DropShadow,this.append([this.shape,this.label,this.iconBackground,this.iconLines,this.handle])}static is(e){return vQ.isCheck(e,"note")}update(e,t){this.updateIcon(e,t),super.update(e,t)}getTextBBox(e,t,i){const n=super.getTextBBox(e,t,i);n.x-=e.width/2,n.x=W$(0,n.x,i.seriesRect.width-e.width);const o=e.getPadding().top,s=n.y-30-2*o,r=n.y+pQ.HANDLE_SIZE+2*o;return s-n.height-34<0?(n.y=r,e.position="top"):(n.y=s+o,e.position="bottom"),n}updateLabel(e,t){const i=!1!==e.visible&&this.label.visible;super.updateLabel(e,t),this.label.visible=i,this.label.text=H$.wrapText(e.text,{font:{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},avoidOrphans:!1,textAlign:e.textAlign,textBaseline:"hanging",textWrap:"always",maxWidth:200})}updateShape(e,t){var i,n,o;const{shape:s}=this;s.fill=e.background.fill,s.fillOpacity=null!==(i=e.background.fillOpacity)&&void 0!==i?i:1,s.stroke=e.background.stroke,s.strokeOpacity=null!==(n=e.background.strokeOpacity)&&void 0!==n?n:1,s.strokeWidth=null!==(o=e.background.strokeWidth)&&void 0!==o?o:1,s.cornerRadius=4;const r=e.getPadding().top,a="top"===e.position;s.x=t.x-r,s.width=e.width+2*r,s.height=t.height+2*r,s.y=t.y+(a?0:-t.height)-r}updateIcon(e,t){var i,n,o;const{active:s,iconBackground:r,iconLines:a}=this,{x:l,y:d}=_Y(e,t);var c;(r.x=l-11,r.y=d-20,a.x=r.x,a.y=r.y,r.fill=e.fill,r.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,r.stroke=e.stroke,r.strokeOpacity=null!==(n=e.strokeOpacity)&&void 0!==n?n:1,r.strokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:1,a.fill=e.stroke,s)?r.fillShadow.color=null!==(c=e.fill)&&void 0!==c?c:"rgba(0, 0, 0, 0.22)":r.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(e,t,i){const n=e.getPadding().top,o="top"===e.position,s=o?1:-1;return{x:t.x+i.seriesRect.x+e.width/2,y:t.y+i.seriesRect.y+s*(t.height+n),position:o?"below":"above"}}getLabelCoords(e,t){const i="top"===e.position,n=e.getPadding().top;return{x:t.x,y:t.y+(i?n/2:0)}}getHandleCoords(e,t,i){return{x:t.x,y:t.y+pQ.HANDLE_SIZE/2+4}}getHandleStyles(e){var t;return{fill:e.handle.fill,stroke:null!==(t=e.handle.stroke)&&void 0!==t?t:e.fill,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}toggleHovered(e){super.toggleHovered(e),this.label.visible=e,this.shape.visible=e,this.zIndex=e?V$.CHART_ANNOTATION_FOCUSED:V$.CHART_ANNOTATION}toggleActive(e){super.toggleActive(e),this.label.visible=e,this.shape.visible=e,this.active=e}containsPoint(e,t){return!(!this.shape.visible||!this.shape.containsPoint(e,t))||(!!this.iconBackground.containsPoint(e,t)||super.containsPoint(e,t))}},U$=class extends hJ{createDatum(){return new qZ}},K$={type:"note",datum:qZ,scene:j$,isDatum:qZ.is,translate:(e,t,i,n)=>{qZ.is(t)&&j$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(qZ.is(t)&&qZ.is(i)&&j$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{qZ.is(t)&&j$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new U$(l(l({},e),{},{create:i("note")}))},dragState:e=>new tQ(e)},{Vec2:Y$,Vec4:Z$}=mW,X$=class extends GJ{constructor(){super(),this.type="parallel-channel",this.ignoreYBounds=!0,this.handles={topLeft:new pQ,topMiddle:new hQ,topRight:new pQ,bottomLeft:new pQ,bottomMiddle:new hQ,bottomRight:new pQ},this.middleLine=new yJ,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(e){return vQ.isCheck(e,"parallel-channel")}dragHandle(e,t,i,n){const{activeHandle:o,handles:s}=this;if(null==o)return;const{offset:r}=s[o].drag(t);s[o].toggleDragging(!0);const a=e.toJson();let l=[],d=[];switch(o){case"topLeft":case"bottomLeft":l=["topLeft","bottomLeft"],d=["topRight","bottomRight"];break;case"topMiddle":l=["topLeft","topRight"],r.y-=hQ.HANDLE_SIZE/2;break;case"topRight":case"bottomRight":l=["topRight","bottomRight"],d=["topLeft","bottomLeft"];break;case"bottomMiddle":l=["bottomLeft","bottomRight"],r.y-=hQ.HANDLE_SIZE/2}const c=e.snapToAngle,h=l.map(((e,o)=>n&&d[o]?this.snapToAngle(t,i,e,d[o],c):HY(Y$.add(s[e].handle,r),i))).filter(sX);if(!h.some((e=>!nX(i,e,{y:!1})))){if(("topMiddle"===o||"bottomMiddle"===o)&&null!=e.start.y){const t=HY(Y$.add(s.topLeft.handle,r),i);nX(i,t)&&("topMiddle"===o?e.height+=t.y-e.start.y:e.height-=t.y-e.start.y)}for(const[t,i]of h.entries())switch(l[t]){case"topLeft":e.start.x=i.x,e.start.y=i.y;break;case"topRight":e.end.x=i.x,e.end.y=i.y}e.isValidWithContext(i)||e.set(a)}}containsPoint(e,t){return super.containsPoint(e,t)||this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(e,t)}getNodeAtCoords(e,t){return this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(e,t)?"line":super.getNodeAtCoords(e,t)}updateLines(e,t,i,n,o,s){var r,a,d,c,h,u;const{topLine:p,middleLine:g,bottomLine:m}=this,{lineDashOffset:v,stroke:f,strokeOpacity:y,strokeWidth:b}=e,C=e.getLineDash(),x={lineCap:e.getLineCap(),lineDash:C,lineDashOffset:v,stroke:f,strokeOpacity:y,strokeWidth:b};p.setProperties(l(l({},t),x)),m.setProperties(l(l({},i),x));const w=this.extendLine({x1:o.x1,y1:s.y1+(o.y1-s.y1)/2,x2:o.x2,y2:s.y2+(o.y2-s.y2)/2},e,n);g.setProperties(l(l({},w),{},{lineDash:null!==(r=e.middle.lineDash)&&void 0!==r?r:C,lineDashOffset:null!==(a=e.middle.lineDashOffset)&&void 0!==a?a:v,stroke:null!==(d=e.middle.stroke)&&void 0!==d?d:f,strokeOpacity:null!==(c=e.middle.strokeOpacity)&&void 0!==c?c:y,strokeWidth:null!==(h=e.middle.strokeWidth)&&void 0!==h?h:b,visible:null===(u=e.middle.visible)||void 0===u||u}))}updateHandles(e,t,i){var n,o,s;const{handles:{topLeft:r,topMiddle:a,topRight:d,bottomLeft:c,bottomMiddle:h,bottomRight:u}}=this,p={fill:e.handle.fill,stroke:null!==(n=e.handle.stroke)&&void 0!==n?n:e.stroke,strokeOpacity:null!==(o=e.handle.strokeOpacity)&&void 0!==o?o:e.strokeOpacity,strokeWidth:null!==(s=e.handle.strokeWidth)&&void 0!==s?s:e.strokeWidth};r.update(l(l({},p),Z$.start(t))),d.update(l(l({},p),Z$.end(t))),c.update(l(l({},p),Z$.start(i))),u.update(l(l({},p),Z$.end(i))),a.update(l(l({},p),Y$.sub(Z$.center(t),Y$.from(a.handle.width/2,a.handle.height/2)))),h.update(l(l({},p),Y$.sub(Z$.center(i),Y$.from(h.handle.width/2,h.handle.height/2))))}updateText(e,t,i){this.text=this.updateNode(bJ,this.text,!!e.text.label),wJ(!0,t,i,e.text,e.strokeWidth,this.text,e.text.label)}getBackgroundPoints(e,t,i,n){const o=t.x1>t.x2,s=t.y1>t.y2,r=t.x1!==i.x1&&t.y1!==i.y1,a=t.x2!==i.x2&&t.y2!==i.y2,l=Y$.from(t);return e.extendEnd&&a&&l.push(Y$.from(o?n.x1:n.x2,s?n.y1:n.y2)),l.push(...Y$.from(i).reverse()),e.extendStart&&r&&l.push(Y$.from(o?n.x2:n.x1,s?n.y2:n.y1)),l}},{StateMachine:q$,StateMachineProperty:Q$,Debug:J$}=mW,$$=class extends q${constructor(e){const t=t=>{let{point:i}=t;const n=new XX;n.set({start:i,end:i,height:0}),e.create(n)},i=t=>{let{offset:i,context:n}=t;const{datum:o,snapping:s}=this;o&&(o.set({end:bQ(i,n,s,o.start,o.snapToAngle)}),e.update())},n=()=>{var t;null===(t=this.node)||void 0===t||t.toggleHandles({topRight:!0}),e.update()},o=t=>{var i;let{point:n}=t;const{datum:o,node:s}=this;if(null==(null===o||void 0===o?void 0:o.start.y)||null==(null===o||void 0===o?void 0:o.end.y))return;const r=o.end.y-(null!==(i=n.y)&&void 0!==i?i:0),a=o.start.y-r;null===s||void 0===s||s.toggleHandles(!0),e.validatePoint({x:o.start.x,y:a})&&e.validatePoint({x:o.end.x,y:n.y})&&(o.set({height:r}),e.recordAction("Create ".concat("parallel-channel"," annotation")),e.showAnnotationOptions(),e.update())},s=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:q$.parent},"waiting-first-render":{render:{target:"end",action:()=>{const{node:e}=this;null===e||void 0===e||e.toggleActive(!0),null===e||void 0===e||e.toggleHandles({topLeft:!0,topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})}}},end:{hover:i,drag:i,click:{target:"height",action:n},dragEnd:{target:"height",action:n},reset:{target:q$.parent,action:s},cancel:{target:q$.parent,action:s}},height:{hover:t=>{var i;let{point:n}=t;const{datum:o,node:s}=this;if(null==(null===o||void 0===o?void 0:o.start.y)||null==(null===o||void 0===o?void 0:o.end.y))return;const r=o.end.y-(null!==(i=n.y)&&void 0!==i?i:0),a=o.start.y-r;null===s||void 0===s||s.toggleHandles({bottomLeft:!0,bottomRight:!0}),e.validatePoint({x:o.start.x,y:a})&&e.validatePoint({x:o.end.x,y:n.y})&&(o.set({height:r}),e.update())},click:{target:q$.parent,action:o},drag:{target:q$.parent,action:o},reset:{target:q$.parent,action:s},cancel:{target:q$.parent,action:s}}}),this.debug=J$.create(!0,"annotations"),this.snapping=!1}};dj([Q$()],$$.prototype,"datum",2),dj([Q$()],$$.prototype,"node",2),dj([Q$()],$$.prototype,"snapping",2);var e0={type:"parallel-channel",datum:XX,scene:X$,isDatum:XX.is,translate:(e,t,i,n)=>{XX.is(t)&&X$.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(XX.is(t)&&XX.is(i)&&X$.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{XX.is(t)&&X$.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new $$(l(l({},e),{},{create:i("parallel-channel")}))},dragState:e=>new tQ(e)},t0=class extends sJ{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(e){return vQ.isCheck(e,"text")}getHandleCoords(e,t){const i=pQ.HANDLE_SIZE/2;return{x:t.x+i,y:t.y+2+i}}},i0=class extends hJ{createDatum(){return new $X}},n0={type:"text",datum:$X,scene:t0,isDatum:$X.is,translate:(e,t,i,n)=>{$X.is(t)&&t0.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if($X.is(t)&&$X.is(i)&&t0.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{$X.is(t)&&t0.is(e)&&e.update(t,i)},createState:(e,t)=>{let{createDatum:i}=t;return new i0(l(l({},e),{},{create:i("text")}))},dragState:e=>new tQ(e)},o0={[m$.type]:m$,[NJ.type]:NJ,[FJ.type]:FJ,[e0.type]:e0,[KJ.type]:KJ,[l$.type]:l$,[oJ.type]:oJ,[pJ.type]:pJ,[K$.type]:K$,[n0.type]:n0,[v$.type]:v$,[zQ.type]:zQ,[LQ.type]:LQ,[B$.type]:B$,[G$.type]:G$,[z$.type]:z$,[_$.type]:_$};function s0(e){for(const{isDatum:t}of Object.values(o0))if(t(e))return e}var{ActionOnSet:r0,ParallelStateMachine:a0,StateMachine:l0,StateMachineProperty:d0,Debug:c0}=mW,h0=class extends a0{constructor(e){super(new u0((e=>{this.snapping=e})),new p0((()=>{this.node=null==this.active?void 0:e.node(this.active)})),new g0(e,(t=>{this.active=t,this.datum=null==this.active?void 0:e.datum(this.active),this.node=null==this.active?void 0:e.node(this.active)}))),this.snapping=!1}getActive(){return this.active}isActive(e){return e===this.active}};dj([d0()],h0.prototype,"snapping",2),dj([d0()],h0.prototype,"datum",2),dj([d0()],h0.prototype,"node",2);var u0=class extends l0{constructor(e){super("idle",{idle:{hover:t=>{let{shiftKey:i}=t;return e(i)},keyDown:t=>{let{shiftKey:i}=t;return e(i)},keyUp:t=>{let{shiftKey:i}=t;return e(i)},click:t=>{let{shiftKey:i}=t;return e(i)},drag:t=>{let{shiftKey:i}=t;return e(i)}},dragging:{},"text-input":{}})}},p0=class extends l0{constructor(e){super("idle",{idle:{onEnter:e,render:e},dragging:{onEnter:e,render:e},"text-input":{render:e}})}},g0=class extends l0{constructor(e,t){const i=()=>{null!=this.active&&e.delete(this.active),this.active=void 0,e.select()},n={createDatum:t=>i=>{e.create(t,i),this.active=e.selectLast()}},o=l(l({},e),{},{delete:i,showTextInput:()=>{null!=this.active&&e.showTextInput(this.active)},deselect:()=>{const t=this.active;this.active=void 0,this.hovered=void 0,e.select(this.active,t)},showAnnotationOptions:()=>{null!=this.active&&e.showAnnotationOptions(this.active)}}),s=Object.fromEntries(Object.entries(o0).map((e=>{let[t,i]=e;return[t,i.createState(o,n)]}))),r=Object.fromEntries(Object.entries(o0).map((t=>{let[i,o]=t;return[i,o.dragState(e,n)]}))),a=t=>{let{colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=t;this.datum&&("text-color"===i&&e.updateTextInputColor(o),mq(this.datum,i,n,o,s,r),e.update())},d=t=>{const{datum:i,node:n}=this;i&&n&&(oq(i)?(i.fontSize=t,e.updateTextInputFontSize(t)):uq(i)&&(i.text.fontSize=t),e.update())},c=t=>{const{node:i}=this;i&&"setTextInputBBox"in i&&(i.setTextInputBBox(t),e.update())},h=t=>{let{textInputValue:i,bbox:n}=t;const{datum:o}=this;if(null!=n&&null!=i&&i.length>0){if(!oq(o))return;const t=_Z(o,i,n.width);o.set({text:t}),e.update(),e.recordAction("Change ".concat(o.type," annotation text"))}else e.delete(this.active),e.recordAction("Delete ".concat(null===o||void 0===o?void 0:o.type," annotation"))},u=()=>{e.updateTextInputBBox(void 0)},p=()=>null!=this.active,g=()=>{const{active:e,datum:t}=this;return null!=e&&(!!t&&(uq(t)&&!t.locked))},m=()=>null!=this.active&&!eq(this.datum);super("idle",{idle:l({onEnter:()=>{e.select(this.active,this.active),this.hoverCoords&&(this.hovered=e.hoverAtCoords(this.hoverCoords,this.active))},hover:t=>{let{offset:i}=t;this.hovered=e.hoverAtCoords(i,this.active),this.hoverCoords=i},translate:{guard:p,action:t=>{let{translation:i}=t;e.startInteracting(),e.translate(this.active,i),e.update()}},translateEnd:{guard:p,action:()=>{e.stopInteracting()}},copy:{guard:m,action:()=>{this.copied=e.copy(this.active)}},cut:{guard:m,action:()=>{this.copied=e.copy(this.active),i()}},paste:{guard:()=>null!=this.copied,action:()=>{e.paste(this.copied)}},selectLast:()=>{const t=this.active;this.active=e.selectLast(),e.select(this.active,t)},click:[{guard:()=>{const{active:e,hovered:t,datum:i}=this;return null!=e&&t===e&&(!!i&&(oq(i)&&!i.locked))},target:"text-input"},{action:()=>{const t=this.active;this.active=this.hovered,e.select(this.active,t)}}],dblclick:{guard:g,action:t=>{let{offset:i}=t;const n="text"===e.getNodeAtCoords(i,this.active)?"text":"line";e.showAnnotationSettings(this.active,void 0,n)}},dragStart:[{guard:()=>null!=this.hovered,target:"dragging",action:()=>{const t=this.active;this.active=this.hovered,e.select(this.active,t),e.startInteracting()}},{action:()=>{const t=this.active;this.active=this.hovered,e.select(this.active,t)}}],color:{guard:p,action:a},fontSize:{guard:p,action:d},lineProps:{guard:p,action:t=>{const i=s0(this.datum);null===i||void 0===i||i.set(t),e.update(),e.recordAction("Change ".concat(null===i||void 0===i?void 0:i.type," ").concat(Object.entries(t).map((e=>{let[t,i]=e;return"".concat(t," to ").concat(i)})).join(", ")))}},lineStyle:{guard:p,action:t=>{const{datum:i,node:n}=this;i&&n&&lq(i)&&(gq(i,t),e.update())}},lineText:{guard:p,action:t=>{const i=s0(this.datum);uq(i)&&(iq(i)&&"center"===t.position&&(t.position="inside"),i.text.set(t),e.update())}},updateTextInputBBox:{guard:p,action:c},toolbarPressSettings:{guard:g,action:t=>{e.showAnnotationSettings(this.active,t)}},reset:()=>{var t;null!=this.active&&(null===(t=this.node)||void 0===t||t.toggleActive(!1));this.hovered=void 0,this.active=void 0,e.select(this.active,this.active),e.resetToIdle()},delete:()=>{var t;null!=this.active&&(e.delete(this.active),eq(this.datum)||e.recordAction("Delete ".concat(null===(t=this.datum)||void 0===t?void 0:t.type," annotation")))},deleteAll:()=>{e.deleteAll()}},s),dragging:l({onEnter:(t,i)=>{if(null==this.active)return;const n=e.getAnnotationType(this.active);n&&(this.transitionRoot(n),this.transitionRoot("dragStart",i))}},r),"text-input":{onEnter:()=>{if(null==this.active)return;const t=s0(this.datum);t&&"getTextInputCoords"in t&&(e.startInteracting(),e.showTextInput(this.active),t.visible=!1,e.update())},updateTextInputBBox:{guard:p,action:c},resize:{target:"idle",action:h},click:{target:"idle",action:h},drag:{target:"idle",action:h},textInput:[{guard:QQ,target:"idle",action:u},{guard:JQ,target:"idle",action:h}],color:{guard:p,action:a},fontSize:{guard:p,action:d},cancel:{target:"idle",action:u},onExit:()=>{e.stopInteracting(),e.hideTextInput();const t=this.active;if(this.active=this.hovered=void 0,e.select(this.active,t),null==t)return;const i=e.datum(t),n=e.node(t);i&&n&&(i.visible=!0)}}}),this.setActive=t,this.debug=c0.create(!0,"annotations"),this.snapping=!1}};dj([r0({changeValue(e){this.setActive(e)}}),d0()],g0.prototype,"active",2),dj([d0()],g0.prototype,"hovered",2),dj([d0()],g0.prototype,"hoverCoords",2),dj([d0()],g0.prototype,"copied",2),dj([d0()],g0.prototype,"snapping",2),dj([d0()],g0.prototype,"datum",2),dj([d0()],g0.prototype,"node",2);var{ARRAY:m0,BOOLEAN:v0,UNION:f0,ActionOnSet:y0,LayoutElement:b0,Menu:C0,PropertiesArray:x0,ToolbarButtonProperties:w0,Validate:S0}=mW,M0=class extends w0{};dj([S0(f0(["line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","clear"]))],M0.prototype,"value",2);var D0=class extends mW.BaseProperties{constructor(e){super(),this.ctx=e,this.enabled=!0,this.buttons=new x0(M0),this.events=new mW.Listeners,this.annotationMenu=new C0(this.ctx,"annotations"),this.destroyFns=[],this.toolbar=e.sharedToolbar.getSharedToolbar("annotations");const t=this.onKeyDown.bind(this);this.toolbar.addListener("keydown",t),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onToolbarButtonPress.bind(this)),e.layoutManager.registerElement(b0.ToolbarLeft,this.onLayoutStart.bind(this)),(()=>{this.toolbar.removeListener("keydown",t),this.toolbar.destroy()}))}destroy(){for(const e of this.destroyFns)e()}addListener(e,t){return this.events.addListener(e,t)}toggleVisibility(e){this.toolbar.setHidden(!e)}toggleClearButtonEnabled(e){const t=this.buttons.findIndex((e=>"clear"===e.value));this.toolbar.toggleButtonEnabledByIndex(t,e)}resetButtonIcons(){for(const[e,t]of this.buttons.entries())switch(t.value){case"line-menu":this.updateButtonByIndex(e,{icon:"trend-line-drawing",value:"line-menu"});break;case"fibonacci-menu":this.updateButtonByIndex(e,{icon:"fibonacci-retracement-drawing",value:"fibonacci-menu"});break;case"text-menu":this.updateButtonByIndex(e,{icon:"text-annotation",value:"text-menu"});break;case"shape-menu":this.updateButtonByIndex(e,{icon:"arrow-drawing",value:"shape-menu"})}}hideOverlays(){this.annotationMenu.hide()}clearActiveButton(){this.toolbar.clearActiveButton()}dispatch(e,t){this.events.dispatch(e,t)}onLayoutStart(e){this.enabled&&(this.toolbar.updateButtons(this.buttons),this.toolbar.layout(e.layoutBox))}onToolbarButtonPress(e){let{event:t,button:i,buttonBounds:n}=e;switch(i.value){case"clear":this.dispatch("pressed-clear");break;case"line-menu":this.onToolbarButtonPressShowMenu(t,n,i.value,"toolbarAnnotationsLineAnnotations",Sq);break;case"fibonacci-menu":this.onToolbarButtonPressShowMenu(t,n,i.value,"toolbarAnnotationsFibonacciAnnotations",Mq);break;case"text-menu":this.onToolbarButtonPressShowMenu(t,n,i.value,"toolbarAnnotationsTextAnnotations",kq);break;case"shape-menu":this.onToolbarButtonPressShowMenu(t,n,i.value,"toolbarAnnotationsShapeAnnotations",Iq);break;case"measurer-menu":this.onToolbarButtonPressShowMenu(t,n,i.value,"toolbarAnnotationsMeasurerAnnotations",Aq)}}onToolbarButtonPressShowMenu(e,t,i,n,o){this.dispatch("pressed-show-menu");const s=this.buttons.findIndex((e=>e.value===i));this.toolbar.toggleActiveButtonByIndex(s),this.annotationMenu.setAnchor({x:t.x+t.width+6,y:t.y}),this.annotationMenu.show({items:o,ariaLabel:this.ctx.localeManager.t(n),class:"ag-charts-annotations__toolbar-menu",sourceEvent:e.sourceEvent,onPress:this.onButtonPressMenuCreateAnnotation.bind(this,i)})}onButtonPressMenuCreateAnnotation(e,t){const i=this.buttons.findIndex((t=>t.value===e));this.updateButtonByIndex(i,{icon:t.icon}),this.dispatch("pressed-create-annotation",{annotation:t.value}),this.annotationMenu.hide()}onKeyDown(e){let{sourceEvent:t}=e;"Escape"===t.key&&this.dispatch("cancel-create-annotation")}updateButtonByIndex(e,t){var i;const n=this.buttons.at(e);n&&(n.set(l(l(l({},n.toJson()),t),{},{value:null!==(i=t.value)&&void 0!==i?i:n.value})),this.toolbar.updateButtonByIndex(e,l({},n.toJson())))}};dj([S0(v0),y0({changeValue(e){var t;null===(t=this.toolbar)||void 0===t||t.setHidden(!e)}})],D0.prototype,"enabled",2),dj([S0(m0)],D0.prototype,"buttons",2);var{BaseModuleInstance:k0,InteractionState:I0,Validate:A0,BOOLEAN:T0,ChartAxisDirection:E0,getIconClassNames:R0}=mW,L0="ag-charts-annotations__axis-button",P0=class extends k0{constructor(e,t,i,n){super(),this.ctx=e,this.axisCtx=t,this.onButtonClick=i,this.seriesRect=n,this.enabled=!0,this.snap=!1,this.padding=0;const{button:o,wrapper:s}=this.setup();this.wrapper=s,this.button=o,this.toggleVisibility(!1),this.updateButtonElement(),this.snap=Boolean(t.scale.bandwidth);const r=this.ctx.regionManager.getRegion("series"),a=I0.Default|I0.Annotations|I0.AnnotationsSelected;e.domManager.addEventListener("focusin",(t=>{let{target:i}=t;const n=i instanceof HTMLElement?i:void 0;n&&e.domManager.contains(n,"series-area")||n===this.button.getElement()||this.hide()})),this.destroyFns.push(r.addListener("hover",(e=>this.show(e)),a),r.addListener("drag",(e=>this.show(e)),I0.Annotations|I0.AnnotationsSelected),r.addListener("leave",(()=>this.hide()),a),e.highlightManager.addListener("highlight-change",(e=>this.onHighlightChange(e))),e.keyNavManager.addListener("nav-hori",(()=>this.onKeyPress())),e.keyNavManager.addListener("nav-vert",(()=>this.onKeyPress())),e.zoomManager.addListener("zoom-pan-start",(()=>this.hide())),e.zoomManager.addListener("zoom-change",(()=>this.hide())),(()=>this.destroyElements()),(()=>this.wrapper.remove()),(()=>this.button.destroy()))}update(e,t){this.seriesRect=e,this.padding=t}setup(){const e=this.ctx.domManager.addChild("canvas-overlay","".concat(L0,"-").concat(this.axisCtx.axisId));e.classList.add("".concat(L0,"-wrapper"));const t=new HW.ButtonWidget;return t.addClass(L0),t.setTabIndex(-1),t.setAriaLabel(this.ctx.localeManager.t("ariaLabelAddHorizontalLine")),e.appendChild(t.getElement()),{wrapper:e,button:t}}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",L0)}show(e){const{canvasX:t,canvasY:i}=e;if(!this.enabled||!this.seriesRect.containsPoint(t,i))return void this.hide();this.toggleVisibility(!0);const n=this.getButtonCoordinates({x:t,y:i});this.coords=this.getAxisCoordinates(n),this.updatePosition(n)}hide(){this.toggleVisibility(!1)}onHighlightChange(e){e.currentHighlight||this.hide()}onKeyPress(){this.snap||this.hide()}getButtonCoordinates(e){let{x:t,y:i}=e;const{axisCtx:{direction:n,position:o},seriesRect:s,snap:r,axisCtx:a,padding:l}=this,{clientWidth:d,clientHeight:c}=this.button,[h,u]=[s.y,s.y+s.height],[p,g]=[s.x,s.x+s.width];if(r&&(t=VY(WY(t-s.x,a),a)+s.x,i=VY(WY(i-s.y,a),a)+s.y),n===E0.X){const e=5,n=c-Math.max(0,l-e);t-=d/2,i="top"===o?h-c+n:u-n}else{const e=9,n=d-Math.max(0,l-e);t="left"===o?p-d+n:g-n,i-=c/2}return{x:t,y:i}}getAxisCoordinates(e){const{seriesRect:t}=this,{clientWidth:i,clientHeight:n}=this.button;return{x:e.x-t.x+i/2,y:e.y-t.y+n/2}}toggleVisibility(e){const{button:t}=this;if(null==t)return;const i=this.enabled&&e;this.toggleClass("-hidden",!i)}toggleClass(e,t){this.wrapper.classList.toggle("".concat(L0,"-wrapper-").concat(e),t)}updatePosition(e){let{x:t,y:i}=e;this.wrapper.style.transform="translate(".concat(Math.round(t),"px, ").concat(Math.round(i),"px)")}updateButtonElement(){const{button:e}=this;e.addListener("click",(()=>this.onButtonClick(this.coords))),e.addListener("drag-start",(()=>{})),e.setInnerHTML('<span class="'.concat(R0("zoom-in")," ").concat(L0,'-icon"></span>'))}};dj([A0(T0)],P0.prototype,"enabled",2);var{Color:N0,DraggablePopover:F0,NativeWidget:O0,Vec2:B0,createButton:G0,createCheckbox:z0,createElement:_0,createElementId:V0,createSelect:H0,createTextArea:W0,initRovingTabIndex:j0,getIconClassNames:U0,getWindow:K0,mapValues:Y0,setAttribute:Z0,setAttributes:X0}=mW,q0=class e extends F0{constructor(e,t){super(e,t),this.dragHandleDraggingClass="ag-charts-dialog__drag-handle--dragging",this.colorPicker=new wq(this.ctx,{detached:!0}),this.destroyFns.push(e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)))}showWithChildren(e,t){const i=super.showWithChildren(e,t);return i.classList.add("ag-charts-dialog"),i.setAttribute("role","dialog"),i.addEventListener("mousedown",(e=>{var t;null!==(t=e.target.classList)&&void 0!==t&&t.contains("ag-charts-dialog__color-picker-button")||this.colorPicker.hide()})),i.addEventListener("keydown",this.onKeyDown.bind(this)),K0().requestAnimationFrame((()=>this.reposition())),this.colorPicker.attachTo(this),i}updatePosition(e){var t;super.updatePosition(e);const{anchor:i,fallbackAnchor:n}=null!==(t=this.getColorPickerAnchors())&&void 0!==t?t:{};i&&this.colorPicker.setAnchor(i,n)}createTabs(e,t,i){const n=_0("div","ag-charts-dialog__tabs"),o=Y0(i,(()=>V0("ag-charts-dialog__tab"))),s=Y0(i,(()=>V0("ag-charts-dialog__tab-panel")));for(const[u,p]of Object.entries(i))X0(p.panel,{id:s[u],role:"tabpanel","aria-labelledby":o[u]});const r=e=>{for(const[n,o]of Object.entries(i)){var t;o.panel.classList.toggle("ag-charts-dialog__tab-panel--active",n===e),d[n].classList.toggle("ag-charts-dialog__tab-button--active",n===e),Z0(d[n],"aria-selected",n===e),n===e&&(null===(t=o.onShow)||void 0===t||t.call(o))}},a=new O0(_0("div","ag-charts-dialog__header"));a.addListener("drag-start",(e=>{const{sourceEvent:t}=e;t.target instanceof Element&&t.target.classList.contains("ag-charts-dialog__header")&&this.onDragStart(e)})),a.addListener("drag-move",(e=>this.onDragMove(e))),a.addListener("drag-end",(()=>this.onDragEnd()));const l=new J0;this.setDragHandle(l);const d=Y0(i,((e,t)=>G0({label:this.ctx.localeManager.t(e.label),onPress:()=>r(t)},{id:o[t],class:"ag-charts-dialog__tab-button",role:"tab","aria-controls":s[t]}))),c=_0("div","ag-charts-dialog__tab-list");X0(c,{role:"tablist","aria-label":this.ctx.localeManager.t(e)}),c.append(...Object.values(d));const h=this.createHeaderCloseButton();return a.getElement().append(l.getElement(),c,h),n.append(a.getElement(),...Object.values(i).map((e=>e.panel))),r(t),j0({orientation:"horizontal",buttons:Object.values(d)}),{tabs:n,initialFocus:d[t]}}createTabPanel(){return _0("div","ag-charts-dialog__tab-panel")}createInputGroupLine(){return _0("div","ag-charts-dialog__input-group-line")}createRadioGroup(e){let{label:t,options:i,value:n,onChange:o}=e;const s=this.createInputGroup(t);X0(s,{role:"radiogroup",tabindex:-1,"aria-label":this.ctx.localeManager.t(t)});const r="ag-charts-dialog__button--active",a=[];for(const l of i){const{icon:e,altText:t}=l,i=this.ctx.localeManager.t(t),d=G0({icon:e,altText:i,onPress:()=>{for(const e of Array.from(s.children))e.classList.remove(r),e.ariaChecked="false";d.classList.add(r),d.ariaChecked="true",o(l.value)}},{"aria-checked":l.value===n,class:"ag-charts-dialog__button",role:"radio",title:i});l.value===n&&d.classList.add(r),s.appendChild(d),a.push(d)}return j0({orientation:"horizontal",buttons:a}),s}createSelect(e){let{altText:t,label:i,options:n,value:o,onChange:s}=e;const r=this.createInputGroup(i),a=this.ctx.localeManager.t(t),l=H0({value:o,options:n,onChange:s},{class:"ag-charts-dialog__select","aria-label":a,title:a});return r.append(l),r}createTextArea(e){let{placeholder:t,value:i,onChange:n}=e;const o=t?this.ctx.localeManager.t(t):void 0;return W0({value:i,onChange:n},{placeholder:o})}createCheckbox(e){let{label:t,checked:i,onChange:n}=e;const o="ag-charts__".concat(t),s=this.createInputGroup(t,{for:o}),r=z0({checked:i,onChange:n},{class:"ag-charts-dialog__checkbox",role:"switch",id:o});return s.append(r),s}createColorPicker(e){let{color:t,opacity:i,label:n,altText:o,onChange:s,onChangeHide:r,isMultiColor:a,hasMultiColorOption:l}=e;const d=this.createInputGroup(n),c=this.ctx.localeManager.t(o),h=G0({label:c,onPress:e=>{var n;const{anchor:o,fallbackAnchor:d}=null!==(n=this.getColorPickerAnchors(h))&&void 0!==n?n:{};this.colorPicker.show({anchor:o,fallbackAnchor:d,color:t,opacity:i,isMultiColor:a,hasMultiColorOption:l,sourceEvent:e,onChange:(e,t,i,n)=>{h.style.setProperty("--color",e),h.classList.toggle("ag-charts-dialog__color-picker-button--multi-color",n),s(e,t,i,n)},onChangeHide:r})}},{"aria-label":c,tabindex:0,class:"ag-charts-dialog__color-picker-button",title:c});if(a)h.classList.toggle("ag-charts-dialog__color-picker-button--multi-color");else if(t){const e=N0.fromHexString(t),n=new N0(e.r,e.g,e.b,i);h.style.setProperty("--color",n.toHexString())}return d.append(h),this.hideFns.push((()=>{this.colorPicker.hide()})),d}createHeaderCloseButton(){return G0({icon:"close",altText:this.ctx.localeManager.t("iconAltTextClose"),onPress:()=>this.hide()},{class:"ag-charts-dialog__close-button"})}createInputGroup(e,t){const i=_0("div","ag-charts-dialog__input-group"),n=_0("label","ag-charts-dialog__input-group-label");return n.innerText=this.ctx.localeManager.t(e),null!==t&&void 0!==t&&t.for&&n.setAttribute("for",t.for),i.appendChild(n),i}onLayoutComplete(e){this.seriesRect=e.series.paddedRect,this.reposition()}onKeyDown(e){e.altKey||e.ctrlKey||e.metaKey||e.isComposing||"Escape"!==e.key||this.hide()}reposition(){const{seriesRect:t,ctx:i}=this,n=i.domManager.getBoundingClientRect(),o=this.getPopoverElement();if(!t||!o)return;const s=B0.from(0,t.y),r=B0.from(n.width,t.height),a=B0.from(o),l=B0.from(.5,1);let d;if(t.width>1e3){const t=B0.sub(B0.add(s,B0.multiply(r,l)),B0.multiply(a,l));d=B0.sub(t,B0.from(0,e.offset))}else{const t=B0.sub(B0.add(s,r),a);d=B0.sub(t,e.offset)}this.updatePosition(d)}getColorPickerAnchors(e){if(e&&(this.colorPickerAnchorElement=e),!this.colorPickerAnchorElement)return;const t=this.colorPickerAnchorElement.getBoundingClientRect(),i=this.ctx.domManager.getBoundingClientRect(),n=B0.sub(B0.from(t.x,t.y),B0.from(i.left,i.top));return{anchor:B0.add(n,B0.from(0,t.height+5)),fallbackAnchor:B0.sub(n,B0.from(0,5))}}};q0.offset=60;var Q0=q0,J0=class extends O0{constructor(){super(_0("div","ag-charts-dialog__drag-handle"));const e=new O0(_0("span",U0("drag-handle")));e.setAriaHidden(!0),this.addChild(e)}},{Listeners:$0,focusCursorAtEnd:e1}=mW,t1=class extends Q0{constructor(e){super(e,"settings"),this.events=new $0,this.hideFns.push((()=>this.events.dispatch("hidden")))}addListener(e,t){return this.events.addListener(e,t)}show(e,t){const i=this.createLinearLineTab(e,t),n=this.createLinearTextTab(e,t);let o="dialogHeaderLine";iq(e)?o="dialogHeaderChannel":nq(e)?o="dialogHeaderFibonacciRange":"date-range"===e.type?o="dialogHeaderDateRange":"price-range"===e.type?o="dialogHeaderPriceRange":"date-price-range"===e.type&&(o="dialogHeaderDatePriceRange");const{tabs:s,initialFocus:r}=this.createTabs("ariaLabelSettingsTabBar",t.initialSelectedTab,{line:{label:o,panel:i},text:{label:"dialogHeaderText",panel:n.panel,onShow:n.onShow}});t.initialFocus=r;this.showWithChildren([s],t).classList.add("ag-charts-dialog--annotation-settings")}createLinearLineTab(e,t){var i,n;const o=this.createTabPanel(),s=this.createInputGroupLine(),r=this.createInputGroupLine(),a="isMultiColor"in e,l=this.createColorPickerInput("line-color",e.getDefaultColor("line-color"),e.getDefaultOpacity("line-color"),!!a&&e.isMultiColor,a,t.onChangeLineColor,t.onChangeHideLineColor),d=this.createStrokeWidthSelect(null!==(i=e.strokeWidth)&&void 0!==i?i:2,t.onChangeLineStyleWidth),c=this.createLineStyleRadioGroup(null!==(n=e.lineStyle)&&void 0!==n?n:"solid",t.onChangeLineStyleType);if(s.append(l),"background"in e){const i=this.createColorPickerInput("fill-color",e.getDefaultColor("fill-color"),e.getDefaultOpacity("fill-color"),!1,!1,t.onChangeFillColor,t.onChangeHideFillColor);s.append(i),r.append(d)}else if("showFill"in e){var h;s.append(this.createCheckbox({label:"dialogInputShowFill",checked:null===(h=e.showFill)||void 0===h||h,onChange:e=>t.onChangeLine({showFill:e})})),r.append(d)}else s.append(d);var u,p,g,m,v,f,y,b;(r.append(c),o.append(s,r),"bands"in e)&&o.append(this.createFibonacciRatioSelect(null!==(u=e.bands)&&void 0!==u?u:10,(e=>t.onChangeLine({bands:e}))));"extendStart"in e&&"extendEnd"in e&&o.append(this.createCheckbox({label:iq(e)?"dialogInputExtendChannelStart":"dialogInputExtendLineStart",checked:null!==(p=e.extendStart)&&void 0!==p&&p,onChange:e=>t.onChangeLine({extendStart:e})}),this.createCheckbox({label:iq(e)?"dialogInputExtendChannelEnd":"dialogInputExtendLineEnd",checked:null!==(g=e.extendEnd)&&void 0!==g&&g,onChange:e=>t.onChangeLine({extendEnd:e})}));"extendAbove"in e&&"extendBelow"in e&&o.append(this.createCheckbox({label:"dialogInputExtendAbove",checked:null!==(m=e.extendAbove)&&void 0!==m&&m,onChange:e=>t.onChangeLine({extendAbove:e})}),this.createCheckbox({label:"dialogInputExtendBelow",checked:null!==(v=e.extendBelow)&&void 0!==v&&v,onChange:e=>t.onChangeLine({extendBelow:e})}));"extendLeft"in e&&"extendRight"in e&&o.append(this.createCheckbox({label:"dialogInputExtendLeft",checked:null!==(f=e.extendLeft)&&void 0!==f&&f,onChange:e=>t.onChangeLine({extendLeft:e})}),this.createCheckbox({label:"dialogInputExtendRight",checked:null!==(y=e.extendRight)&&void 0!==y&&y,onChange:e=>t.onChangeLine({extendRight:e})}));"reverse"in e&&"showFill"in e&&o.append(this.createCheckbox({label:"dialogInputReverse",checked:null!==(b=e.reverse)&&void 0!==b&&b,onChange:e=>t.onChangeLine({reverse:e})}));return o}createLinearTextTab(e,t){var i;const n=this.createTabPanel(),o=this.createTextArea({placeholder:"inputTextareaPlaceholder",value:e.text.label,onChange:e=>t.onChangeText({label:e})}),s=this.createInputGroupLine(),r=this.createFontSizeSelect(e.text.fontSize,t.onChangeTextFontSize),a=this.createColorPickerInput("text-color",e.text.color,1,!1,!1,t.onChangeTextColor,t.onChangeHideTextColor);s.append(r,a);const l=this.createInputGroupLine(),d="inside"===e.text.position?"center":e.text.position,c=this.createPositionRadioGroup(null!==d&&void 0!==d?d:"top",(e=>t.onChangeText({position:e}))),h=this.createAlignmentRadioGroup(null!==(i=e.text.alignment)&&void 0!==i?i:"center",(e=>t.onChangeText({alignment:e})));return l.append(c,h),n.append(o,s,l),{panel:n,onShow:()=>e1(o)}}createColorPickerInput(e,t,i,n,o,s,r){const a="fill-color"===e?"dialogInputFillColorPicker":"dialogInputColorPicker",l="fill-color"===e?"dialogInputFillColorPickerAltText":"dialogInputColorPickerAltText";return this.createColorPicker({label:a,altText:l,color:t,opacity:i,isMultiColor:n,hasMultiColorOption:o,onChange:s,onChangeHide:r})}createStrokeWidthSelect(e,t){return this.createSelect({label:"dialogInputStrokeWidth",altText:"dialogInputStrokeWidthAltText",options:Tq.map((e=>{let{label:t,value:i}=e;return{label:t,value:"".concat(i)}})),value:String(e),onChange:e=>t(Number(e))})}createFibonacciRatioSelect(e,t){return this.createSelect({label:"dialogInputFibonacciBands",altText:"dialogInputFibonacciBandsAltText",options:Dq.map((e=>{let{label:t,value:i}=e;return{label:t,value:"".concat(i)}})),value:String(e),onChange:e=>t(Number(e))})}createLineStyleRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputLineStyle",options:[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],value:e,onChange:t})}createFontSizeSelect(e,t){return this.createSelect({label:"dialogInputFontSize",altText:"dialogInputFontSizeAltText",options:Rq.map((e=>{let{label:t,value:i}=e;return{label:t,value:String(i)}})),value:String(e),onChange:e=>t(Number(e))})}createPositionRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputPosition",options:[{icon:"position-top",altText:"iconAltTextPositionTop",value:"top"},{icon:"position-center",altText:"iconAltTextPositionCenter",value:"center"},{icon:"position-bottom",altText:"iconAltTextPositionBottom",value:"bottom"}],value:e,onChange:t})}createAlignmentRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputAlign",options:[{icon:"align-left",altText:"iconAltTextAlignLeft",value:"left"},{icon:"align-center",altText:"iconAltTextAlignCenter",value:"center"},{icon:"align-right",altText:"iconAltTextAlignRight",value:"right"}],value:e,onChange:t})}};function i1(e){return e.gridPadding+e.seriesAreaPadding+e.tickSize+e.label.spacing}var{BOOLEAN:n1,OBJECT:o1,ChartUpdateType:s1,InteractionState:r1,ObserveChanges:a1,PropertiesArray:l1,Validate:d1,ChartAxisDirection:c1,Vec2:h1,isValidDate:u1,keyProperty:p1,valueProperty:g1,Selection:m1,BBox:v1}=mW,f1=class e extends mW.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.toolbar=new D0(this.ctx),this.optionsToolbar=new qq(this.ctx,(()=>{const e=this.state.getActive();if(null!=e)return s0(this.annotationData.at(e))})),this.axesButtons=new ZK,this.data=void 0,this.xKey=void 0,this.volumeKey=void 0,this.annotationData=new l1(e.createAnnotationDatum),this.defaults=new fq,this.container=new mW.Group({name:"static-annotations"}),this.annotations=new m1(this.container,this.createAnnotationScene.bind(this)),this.settingsDialog=new t1(this.ctx),this.textInput=new HK(this.ctx),this.postUpdateFns=[],this.state=this.setupStateMachine(),this.setupListeners(),this.setupDOM(),this.ctx.historyManager.addMementoOriginator(t.annotationManager),this.ctx.historyManager.addMementoOriginator(this.defaults),this.textInput.setKeyDownHandler(this.onTextInput.bind(this))}setupStateMachine(){var e=this;const{ctx:t}=this;return new h0({resetToIdle:()=>{t.cursorManager.updateCursor("annotations"),t.interactionManager.popState(r1.Annotations),t.tooltipManager.unsuppressTooltip("annotations"),this.hideOverlays(),this.optionsToolbar.hide(),this.deleteEphemeralAnnotations(),this.update()},hoverAtCoords:(e,t)=>{var i;let n;return this.annotations.each(((i,o,s)=>{var r;const a=i.containsPoint(e.x,e.y);a&&(null!==(r=n)&&void 0!==r||(n=s)),i.toggleHovered(a||t===s)})),this.ctx.cursorManager.updateCursor("annotations",null==n||null===(i=this.annotations.at(n))||void 0===i?void 0:i.getCursor()),n},getNodeAtCoords:(e,t)=>{const i=this.annotations.at(t);if(i)return i.getNodeAtCoords(e.x,e.y)},translate:(e,t)=>{const i=this.annotations.at(e),n=s0(this.annotationData.at(e));if(i&&n)return this.translateNode(i,n,t)},copy:e=>{const t=this.annotations.at(e),i=s0(this.annotationData.at(e));if(t&&i)return this.createAnnotationDatumCopy(t,i)},paste:e=>{this.createAnnotation(e.type,e,!1),this.postUpdateFns.push((()=>{this.state.transitionAsync("selectLast"),this.state.transitionAsync("copy")}))},select:(e,t)=>{const{annotations:i,optionsToolbar:n,toolbar:o,ctx:{interactionManager:s,tooltipManager:r}}=this;this.hideOverlays(),o.clearActiveButton(),o.resetButtonIcons();const a=null!=e?i.at(e):null,l=null!=t?i.at(t):null;l===a&&null!=a||(null===l||void 0===l||l.toggleActive(!1),n.hide(),a?(s.pushState(r1.AnnotationsSelected),a.toggleActive(!0),r.suppressTooltip("annotations"),n.updateButtons(this.annotationData.at(e)),this.postUpdateFns.push((()=>{n.show(),n.setAnchorScene(a)}))):(s.popState(r1.AnnotationsSelected),s.popState(r1.Annotations),r.unsuppressTooltip("annotations")),this.deleteEphemeralAnnotations(),this.update())},selectLast:()=>(this.ctx.interactionManager.pushState(r1.AnnotationsSelected),this.annotationData.length-1),startInteracting:()=>{this.ctx.interactionManager.pushState(r1.Annotations)},stopInteracting:()=>{this.ctx.interactionManager.popState(r1.Annotations)},create:(e,t)=>{this.createAnnotation(e,t)},delete:e=>{this.annotationData.splice(e,1)},deleteAll:()=>{this.annotationData.splice(0,this.annotationData.length)},validatePoint:e=>{const t=this.getAnnotationContext();return!t||nX(t,e)},getAnnotationType:e=>function(e){for(const t of qK)if(t===e)return t}(this.annotationData[e].type),datum:e=>this.annotationData.at(e),node:e=>this.annotations.at(e),recordAction:e=>{this.recordActionAfterNextUpdate(e)},update:()=>{this.postUpdateFns.push((()=>{const e=this.state.getActive(),t=null!=e?this.annotations.at(e):null;null!=t&&this.optionsToolbar.setAnchorScene(t)})),this.update()},showTextInput:e=>{const t=s0(this.annotationData.at(e));if(!this.annotations.at(e)||!t||!("getTextInputCoords"in t)||!("getTextPosition"in t))return;const i={color:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,placeholderColor:t.getPlaceholderColor()},n=this.getAnnotationContext();this.textInput.show({styles:i,layout:{getTextInputCoords:e=>h1.add(t.getTextInputCoords(n,e),h1.required(this.seriesRect)),getTextPosition:()=>t.getTextPosition(),alignment:t.alignment,textAlign:t.textAlign,width:t.width},text:t.text,placeholderText:t.placeholderText,onChange:(e,t)=>{this.state.transition("updateTextInputBBox",t)}}),this.ctx.cursorManager.updateCursor("annotations")},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:e=>{this.textInput.updateColor(e)},updateTextInputFontSize:e=>{const t=this.textInput.updateFontSize(e);this.state.transition("updateTextInputBBox",t)},updateTextInputBBox:e=>{this.state.transition("updateTextInputBBox",e)},showAnnotationOptions:e=>{const t=this.annotations.at(e);t&&!eq(this.annotationData.at(e))&&(this.optionsToolbar.updateButtons(this.annotationData.at(e)),this.optionsToolbar.show(),this.optionsToolbar.setAnchorScene(t))},showAnnotationSettings:function(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"line";const o=e.annotationData.at(t);if(!tq(o)&&!iq(o)&&!sq(o))return;if(eq(o))return;const s=t=>(i,n,s,r)=>{e.setColorAndDefault(o.type,t,i,n,s,r),e.optionsToolbar.updateColorPickerColor(t,n,s,r)},r=t=>()=>{e.recordActionAfterNextUpdate("Change ".concat(o.type," ").concat(t," to ").concat(o.getDefaultColor(t)),["annotations","defaults"]),e.update()},a={initialSelectedTab:n,ariaLabel:e.ctx.localeManager.t("ariaLabelAnnotationSettingsDialog"),sourceEvent:i,onChangeLine:t=>{e.state.transition("lineProps",t),t.bands&&e.defaults.setDefaultFibonacciBands(o.type,t.bands)},onChangeText:t=>{e.state.transition("lineText",t),t.alignment&&e.defaults.setDefaultLineTextAlignment(o.type,t.alignment),t.position&&e.defaults.setDefaultLineTextPosition(o.type,t.position),e.recordActionAfterNextUpdate("Change ".concat(o.type," text ").concat(Object.entries(t).map((e=>{let[t,i]=e;return"".concat(t," to ").concat(i)})).join(", ")))},onChangeFillColor:s("fill-color"),onChangeHideFillColor:r("fill-color"),onChangeLineColor:s("line-color"),onChangeHideLineColor:r("line-color"),onChangeLineStyleType:t=>{var i;e.setLineStyleTypeAndDefault(o.type,t),e.optionsToolbar.updateLineStyleType(null!==(i=Eq.find((e=>e.value===t)))&&void 0!==i?i:Eq[0])},onChangeLineStyleWidth:t=>{e.setLineStyleWidthAndDefault(o.type,t),e.optionsToolbar.updateStrokeWidth({strokeWidth:t,value:t,label:String(t)})},onChangeTextColor:s("text-color"),onChangeHideTextColor:r("text-color"),onChangeTextFontSize:t=>{e.setFontSizeAndDefault(o.type,t)}};e.settingsDialog.show(o,a)}})}setupListeners(){const{ctx:e,optionsToolbar:t,settingsDialog:i,toolbar:n}=this,{All:o,Default:s,Annotations:r,AnnotationsSelected:a,ZoomDrag:l}=r1,d=e.regionManager.getRegion("series"),c=e.regionManager.getRegion("root"),h=s|l|r|a;this.destroyFns.push(d.addListener("hover",this.onHover.bind(this),o),d.addListener("click",this.onClick.bind(this),o),d.addListener("dblclick",this.onDoubleClick.bind(this),o),d.addListener("drag-start",this.onDragStart.bind(this),h),d.addListener("drag",this.onDrag.bind(this),h),d.addListener("drag-end",this.onDragEnd.bind(this),o),e.interactionManager.addListener("keydown",this.onKeyDown.bind(this),o),e.interactionManager.addListener("keyup",this.onKeyUp.bind(this),o),c.addListener("click",this.onCancel.bind(this),o),e.annotationManager.addListener("restore-annotations",this.onRestoreAnnotations.bind(this)),e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),e.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),e.zoomManager.addListener("zoom-change",(()=>this.onResize())),e.domManager.addListener("resize",(()=>this.onResize())),n.addListener("cancel-create-annotation",(()=>{this.cancel(),this.reset(),this.update()})),n.addListener("pressed-create-annotation",(e=>{let{annotation:t}=e;this.cancel(),this.ctx.interactionManager.pushState(r1.Annotations),this.state.transition(t),this.update()})),n.addListener("pressed-clear",(()=>{this.clear()})),n.addListener("pressed-show-menu",(()=>{this.cancel(),this.reset()})),n.addListener("pressed-unrelated",(()=>{this.reset()})),t.addListener("pressed-delete",(()=>{this.cancel(),this.delete(),this.reset()})),t.addListener("pressed-settings",(e=>{let{sourceEvent:t}=e;this.state.transition("toolbarPressSettings",t)})),t.addListener("pressed-lock",(()=>{this.update()})),t.addListener("hid-overlays",(()=>{this.settingsDialog.hide()})),t.addListener("saved-color",(e=>{let{type:t,colorPickerType:i,color:n}=e;this.recordActionAfterNextUpdate("Change ".concat(t," ").concat(i," to ").concat(n),["annotations","defaults"])})),t.addListener("updated-color",(e=>{let{type:t,colorPickerType:i,colorOpacity:n,color:o,opacity:s,isMultiColor:r}=e;this.setColorAndDefault(t,i,n,o,s,r)})),t.addListener("updated-font-size",(e=>{let{type:t,fontSize:i}=e;this.setFontSizeAndDefault(t,i)})),t.addListener("updated-line-style",(e=>{let{type:t,lineStyleType:i}=e;this.setLineStyleTypeAndDefault(t,i)})),t.addListener("updated-line-width",(e=>{let{type:t,strokeWidth:i}=e;this.setLineStyleWidthAndDefault(t,i)})),i.addListener("hidden",(()=>{this.optionsToolbar.clearActiveButton()})))}setupDOM(){const{ctx:e,toolbar:t}=this;this.destroyFns.push(e.annotationManager.attachNode(this.container),(()=>e.domManager.removeStyles(L0)),(()=>t.destroy()))}async processData(e){if(!this.enabled||null==this.data||null==this.xKey||null==this.volumeKey)return;const t=[p1(this.xKey,void 0,{id:"date"}),g1(this.volumeKey,"number",{id:"volume"})],{dataModel:i,processedData:n}=await e.request("annotations",this.data,{props:t});this.dataModel=i,this.processedData=n}createAnnotationScene(e){if(e.type in o0)return new o0[e.type].scene;throw new Error("AG Charts - Cannot create annotation scene of type [".concat(e.type,"], expected one of [").concat(Object.keys(o0),"], ignoring."))}static createAnnotationDatum(e){if(e.type in o0)return(new o0[e.type].datum).set(e);throw new Error("AG Charts - Cannot create annotation datum of unknown type [".concat(e.type,"], expected one of [").concat(Object.keys(o0),"], ignoring."))}createAnnotation(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.annotationData.push(t),i){const i=this.ctx.annotationManager.getAnnotationTypeStyles(e);i&&t.set(i),this.defaults.applyDefaults(t)}this.injectDatumDependencies(t),this.update()}injectDatumDependencies(e){"setLocaleManager"in e&&e.setLocaleManager(this.ctx.localeManager),"getVolume"in e&&(e.getVolume=this.getDatumRangeVolume.bind(this))}getDatumRangeVolume(e,t){const{dataModel:i,processedData:n}=this;if(!u1(e)||!u1(t)||!i||!n||null==this.volumeKey)return;e>t&&([e,t]=[t,e]);const o=i.resolveKeysById({id:"annotations"},"date",n),s=i.resolveColumnById({id:"annotations"},"volume",n);return n.rawData.reduce(((i,n,r)=>{const a=o[r];return u1(a)&&a>=e&&a<=t?i+s[r]:i}),0)}translateNode(e,t,i){const n=this.getAnnotationConfig(t),o=this.getAnnotationContext();o&&n.translate(e,t,i,o)}createAnnotationDatumCopy(e,t){const i=this.getAnnotationConfig(t),n=new i.datum;n.set(t.toJson());const o=this.getAnnotationContext();if(o)return i.copy(e,t,n,o)}getAnnotationConfig(e){if(e.type in o0)return o0[e.type];throw new Error("AG Charts - Cannot get annotation config of unknown type [".concat(e.type,"], expected one of [").concat(Object.keys(o0),"], ignoring."))}onRestoreAnnotations(e){this.enabled&&(this.clear(),this.annotationData.set(e.annotations),this.update())}onLayoutComplete(e){const t=e.series.paddedRect;this.seriesRect=t;for(const s of null!==(i=e.axes)&&void 0!==i?i:[]){var i,n,o;if(s.direction===mW.ChartAxisDirection.X)this.xAxis=this.getAxis(s,t,null===(n=this.xAxis)||void 0===n?void 0:n.button);else this.yAxis=this.getAxis(s,t,null===(o=this.yAxis)||void 0===o?void 0:o.button)}}onPreRender(){this.updateAnnotations(),this.state.transition("render")}getAxis(e,t,i){const n=this.ctx.axisManager.getAxisContext(e.direction)[0],{position:o="bottom",direction:s}=n,r=e.gridPadding+e.seriesAreaPadding,a=new v1(0,0,t.width,t.height).grow(r,o),l=n.direction===c1.X?"vertical":"horizontal",{axesButtons:d}=this;if(this.enabled&&d.enabled&&("xy"===d.axes||d.axes===s)){var c;null!==(c=i)&&void 0!==c||(i=new P0(this.ctx,n,(e=>this.onAxisButtonClick(e,l)),t));const o=i1(e);i.update(t,o)}else{var h;null===(h=i)||void 0===h||h.destroy(),i=void 0}return{layout:e,context:n,bounds:a,button:i}}recordActionAfterNextUpdate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["annotations"];const{defaults:i,ctx:{annotationManager:n,historyManager:o}}=this,s=t.map((e=>"defaults"===e?i:n));this.postUpdateFns.push((()=>{o.record(e,...s)}))}setColorAndDefault(e,t,i,n,o,s){this.state.transition("color",{colorPickerType:t,colorOpacity:i,color:n,opacity:o,isMultiColor:s}),this.defaults.setDefaultColor(e,t,i,n,o,s)}setFontSizeAndDefault(e,t){this.state.transition("fontSize",t),this.defaults.setDefaultFontSize(e,t),this.recordActionAfterNextUpdate("Change ".concat(e," font size to ").concat(t),["annotations","defaults"])}setLineStyleTypeAndDefault(e,t){this.state.transition("lineStyle",{type:t}),this.defaults.setDefaultLineStyleType(e,t),this.recordActionAfterNextUpdate("Change ".concat(e," line style to ").concat(t),["annotations","defaults"])}setLineStyleWidthAndDefault(e,t){this.state.transition("lineStyle",{strokeWidth:t}),this.defaults.setDefaultLineStyleWidth(e,t),this.recordActionAfterNextUpdate("Change ".concat(e," stroke width to ").concat(t),["annotations","defaults"])}updateAnnotations(){const{annotationData:e,annotations:t,seriesRect:i,ctx:{annotationManager:n}}=this,o=this.getAnnotationContext();i&&o&&(n.updateData(e.toJson().filter((e=>!eq(e)))),this.toolbar.toggleClearButtonEnabled(e.length>0),t.update(null!==e&&void 0!==e?e:[],void 0,(e=>e.id)).each(((e,t)=>{this.validateDatum(t)?(this.injectDatumDependencies(t),function(e,t,i){for(const{update:n}of Object.values(o0))n(e,t,i)}(e,t,o)):e.visible=!1})),this.postUpdateFns.forEach((e=>e())),this.postUpdateFns=[])}validateDatum(e){const t=this.getAnnotationContext();return!t||e.isValidWithContext(t,"Annotation [".concat(e.type,"] "))}getAnnotationContext(){const{seriesRect:e,xAxis:t,yAxis:i}=this;if(e&&t&&i)return{seriesRect:e,xAxis:l(l({},t.context),{},{bounds:t.bounds,labelPadding:i1(t.layout)}),yAxis:l(l({},i.context),{},{bounds:i.bounds,labelPadding:i1(t.layout)})}}onHover(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const n=e.sourceEvent.shiftKey,o=h1.from(e),s=HY(o,i);t.transition("hover",{offset:o,point:s,shiftKey:n,context:i})}onClick(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const n=e.sourceEvent.shiftKey,o=HY(h1.from(e),i),s=this.textInput.getValue(),r=this.textInput.getBBox();t.transition("click",{point:o,shiftKey:n,textInputValue:s,bbox:r})}onDoubleClick(e){const{state:t}=this;if(!this.getAnnotationContext())return;const i=h1.from(e);t.transition("dblclick",{offset:i})}onAxisButtonClick(e,t){this.cancel(),this.reset();const i=this.getAnnotationContext();if(!this.annotationData||!i)return;const{state:n,ctx:{interactionManager:o}}=this;o.pushState(r1.Annotations);const s="horizontal"===t;if(n.transition(s?"horizontal-line":"vertical-line"),this.optionsToolbar.hide(),!e)return;const r=HY(e,i);nX(i,r)&&(n.transition("click",{point:r,shiftKey:!1}),this.update())}onResize(){const e=this.textInput.getValue(),t=this.textInput.getBBox();this.state.transition("resize",{textInputValue:e,bbox:t})}onDragStart(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const n=h1.from(e),o=HY(n,i),s=this.textInput.getValue(),r=this.textInput.getBBox();t.transition("dragStart",{context:i,offset:n,point:o,textInputValue:s,bbox:r})}onDrag(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const n=h1.from(e),o=HY(n,i),s=e.sourceEvent.shiftKey,r=this.textInput.getValue(),a=this.textInput.getBBox();t.transition("drag",{context:i,offset:n,point:o,shiftKey:s,textInputValue:r,bbox:a})}onDragEnd(){this.state.transition("dragEnd")}onCancel(){this.cancel(),this.reset()}onDelete(){this.textInput.isVisible()||(this.cancel(),this.delete(),this.reset(),this.update())}onTextInput(e){const{state:t}=this,i=this.getAnnotationContext();if(!i)return;const{key:n,shiftKey:o}=e,s=this.textInput.getValue(),r=this.textInput.getBBox();t.transition("textInput",{key:n,shiftKey:o,textInputValue:s,bbox:r,context:i})}onKeyDown(e){var t,i;const{state:n}=this,o=this.getAnnotationContext();if(!o)return;const{sourceEvent:s}=e,{shiftKey:r,ctrlKey:a,metaKey:l}=s,d=a||l,c=a||r;this.state.transition("keyDown",{shiftKey:r,context:o});const h={x:0,y:0},u=Math.max(null!==(t=null===o||void 0===o?void 0:o.xAxis.scale.bandwidth)&&void 0!==t?t:0,c?10:1),p=Math.max(null!==(i=null===o||void 0===o?void 0:o.yAxis.scale.bandwidth)&&void 0!==i?i:0,c?10:1);switch(s.key){case"ArrowDown":h.y=p;break;case"ArrowUp":h.y=-p;break;case"ArrowLeft":h.x=-u;break;case"ArrowRight":h.x=u;break;case"Escape":return void this.onCancel();case"Backspace":case"Delete":return void this.onDelete()}if((h.x||h.y)&&(n.transition("translate",{translation:h}),s.stopPropagation(),s.preventDefault()),d)switch(s.key){case"c":return void n.transition("copy");case"x":return n.transition("cut"),void this.recordActionAfterNextUpdate("Cut annotation");case"v":return n.transition("paste"),void this.recordActionAfterNextUpdate("Paste annotation")}}onKeyUp(e){const{shiftKey:t}=e.sourceEvent,i=this.getAnnotationContext();i&&(this.state.transition("keyUp",{shiftKey:t,context:i}),this.state.transition("translateEnd"))}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}deleteEphemeralAnnotations(){for(const[e,t]of this.annotationData.entries())eq(t)&&this.annotationData.splice(e,1)}hideOverlays(){this.settingsDialog.hide(),this.toolbar.hideOverlays(),this.optionsToolbar.hideOverlays()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s1.PRE_SCENE_RENDER;this.ctx.updateService.update(e,{skipAnimations:!0})}};dj([a1(((e,t,i)=>{var n;const{ctx:{annotationManager:o,stateManager:s}}=e;t!==i&&(null===(n=e.toolbar)||void 0===n||n.toggleVisibility(Boolean(t)),!1===i&&!0===t?s.restoreState(o):!1===t&&e.clear())})),d1(n1)],f1.prototype,"enabled",2),dj([d1(o1)],f1.prototype,"toolbar",2),dj([d1(o1)],f1.prototype,"optionsToolbar",2),dj([d1(o1)],f1.prototype,"axesButtons",2);var y1=f1,{ThemeSymbols:b1}=mW,C1={stroke:b1.DEFAULT_ANNOTATION_COLOR,strokeOpacity:1,strokeWidth:2},x1={fill:b1.DEFAULT_ANNOTATION_HANDLE_FILL,strokeOpacity:1,strokeWidth:2},w1={color:b1.DEFAULT_TEXT_ANNOTATION_COLOR,fontSize:14,fontFamily:b1.DEFAULT_FONT_FAMILY},S1=l(l({},w1),{},{enabled:!0,color:"white",fill:b1.DEFAULT_ANNOTATION_COLOR,fontSize:12}),M1=l(l({},w1),{},{color:b1.DEFAULT_TEXT_ANNOTATION_COLOR,textAlign:"left"}),D1=l(l({},w1),{},{position:"top",alignment:"center",color:b1.DEFAULT_ANNOTATION_COLOR}),k1=l(l({},w1),{},{fontSize:12,color:b1.DEFAULT_ANNOTATION_STATISTICS_COLOR,fill:b1.DEFAULT_ANNOTATION_STATISTICS_FILL,stroke:b1.DEFAULT_ANNOTATION_STATISTICS_STROKE,strokeWidth:1,divider:{stroke:b1.DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE,strokeWidth:1,strokeOpacity:.5}}),I1=l(l({},C1),{},{background:{fill:b1.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:l({},x1),text:l({},D1),statistics:l({},k1)}),A1={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new y1(e),themeTemplate:{annotations:{enabled:!1,line:l(l({},C1),{},{handle:l({},x1),text:l({},D1)}),"horizontal-line":l(l({},C1),{},{handle:l({},x1),axisLabel:l({},S1),text:l({},D1)}),"vertical-line":l(l({},C1),{},{handle:l({},x1),axisLabel:l({},S1),text:l({},D1)}),"disjoint-channel":l(l({},C1),{},{background:{fill:b1.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:l({},x1),text:l({},D1)}),"parallel-channel":l(l({},C1),{},{middle:{lineDash:[6,5],strokeWidth:1},background:{fill:b1.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:l({},x1),text:l({},D1)}),"fibonacci-retracement":l(l({},C1),{},{strokes:b1.DEFAULT_FIBONACCI_STROKES,rangeStroke:b1.DEFAULT_ANNOTATION_COLOR,handle:l({},x1),text:l(l({},D1),{},{position:"center"}),label:l(l({},w1),{},{color:void 0,fontSize:10})}),callout:l(l(l({},C1),M1),{},{color:b1.DEFAULT_LABEL_COLOUR,handle:l({},x1),fill:b1.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2}),comment:l(l({},M1),{},{color:"white",fontWeight:700,handle:l({},x1),fill:b1.DEFAULT_ANNOTATION_COLOR}),note:l(l({},M1),{},{color:b1.DEFAULT_TEXTBOX_COLOR,fill:b1.DEFAULT_ANNOTATION_COLOR,stroke:b1.DEFAULT_ANNOTATION_HANDLE_FILL,strokeWidth:1,strokeOpacity:1,handle:l({},x1),background:{fill:b1.DEFAULT_TEXTBOX_FILL,stroke:b1.DEFAULT_TEXTBOX_STROKE,strokeWidth:1}}),text:l(l({},M1),{},{handle:l({},x1)}),arrow:l(l({},C1),{},{handle:l({},x1),text:l({},D1)}),"arrow-up":{fill:b1.PALETTE_UP_FILL,handle:l(l({},x1),{},{stroke:b1.DEFAULT_ANNOTATION_COLOR})},"arrow-down":{fill:b1.PALETTE_DOWN_FILL,handle:l(l({},x1),{},{stroke:b1.DEFAULT_ANNOTATION_COLOR})},"date-range":l({},I1),"price-range":l({},I1),"date-price-range":l({},I1),"quick-date-price-range":{up:l(l({},C1),{},{fill:b1.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2,handle:l({},x1),statistics:l(l({},k1),{},{color:"#fff",fill:b1.DEFAULT_ANNOTATION_BACKGROUND_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})}),down:l(l({},C1),{},{stroke:b1.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE,fill:b1.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,fillOpacity:.2,handle:l(l({},x1),{},{stroke:b1.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE}),statistics:l(l({},k1),{},{color:"#fff",fill:b1.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}})})},axesButtons:{enabled:!0},toolbar:{buttons:[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}]},optionsToolbar:{buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color"},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color"},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color"},{tooltip:"toolbarAnnotationsTextSize",value:"text-size"},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width"},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type"},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings"},{icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]}}}},{BaseProperties:T1,ObserveChanges:E1,ProxyProperty:R1,Validate:L1,NUMBER:P1,POSITIVE_NUMBER:N1,RATIO:F1,createElement:O1,calculatePlacement:B1}=mW,G1=class extends T1{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var e;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),null===(e=this.onLoad)||void 0===e||e.call(this))},this.imageElement=O1("img"),this.imageElement.onload=this.onImageLoad,this.node=new mW.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(e,t){this.containerWidth=e,this.containerHeight=t;const i={x:0,y:0,width:e,height:t},n=B1(this.imageElement.width,this.imageElement.height,i,this);return this.node.setProperties(this.complete?l({visible:!0,opacity:this.opacity},n):{visible:!1}),n}};dj([L1(P1,{optional:!0})],G1.prototype,"top",2),dj([L1(P1,{optional:!0})],G1.prototype,"right",2),dj([L1(P1,{optional:!0})],G1.prototype,"bottom",2),dj([L1(P1,{optional:!0})],G1.prototype,"left",2),dj([L1(N1,{optional:!0})],G1.prototype,"width",2),dj([L1(N1,{optional:!0})],G1.prototype,"height",2),dj([L1(F1)],G1.prototype,"opacity",2),dj([R1("imageElement.src"),E1((e=>e.loadedSynchronously=e.complete))],G1.prototype,"url",2);var{ActionOnSet:z1,OBJECT:_1,Validate:V1}=mW,H1=class extends mW.Background{constructor(){super(...arguments),this.image=new G1}onLayoutComplete(e){if(super.onLayoutComplete(e),this.image){const{width:t,height:i}=e.chart;this.image.performLayout(t,i)}}onImageLoad(){this.ctx.updateService.update(mW.ChartUpdateType.SCENE_RENDER)}};dj([V1(_1,{optional:!0}),z1({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){this.node.removeChild(e.node),e.onLoad=void 0}})],H1.prototype,"image",2);var W1={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new H1(e)},{BOOLEAN:j1,ActionOnSet:U1,LayoutElement:K1,Logger:Y1,Menu:Z1,Validate:X1}=mW,q1=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],Q1=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.menu=new Z1(this.ctx,"chart-toolbar"),this.toolbar=e.sharedToolbar.getSharedToolbar("chartToolbar"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPressed.bind(this)),e.layoutManager.registerElement(K1.ToolbarLeft,this.onLayoutStart.bind(this)),(()=>this.toolbar.destroy()))}onLayoutStart(e){this.enabled&&(this.updateButton(),this.toolbar.layout(e.layoutBox))}onButtonPressed(e){let{event:t,buttonBounds:i}=e;this.menu.setAnchor({x:i.x+i.width+6,y:i.y}),this.menu.show({items:q1,menuItemRole:"menuitemradio",ariaLabel:this.ctx.localeManager.t("toolbarSeriesTypeDropdown"),class:"ag-charts-chart-toolbar__menu",value:this.getChartType(),sourceEvent:t.sourceEvent,onPress:e=>{this.setChartType(e.value),this.hidePopover()},onHide:()=>{this.toolbar.clearActiveButton()}}),this.toolbar.toggleActiveButtonByIndex(0)}updateButton(){var e;const t=this.getChartType(),i=null===(e=q1.find((e=>e.value===t)))||void 0===e?void 0:e.icon;null!=i&&this.toolbar.updateButtons([{icon:i,tooltip:"toolbarSeriesTypeDropdown"}])}hidePopover(){this.toolbar.clearActiveButton(),this.menu.hide()}setChartType(e){var t;const i={chartType:e};null===(t=this.ctx.chartService.publicApi)||void 0===t||t.updateDelta(i).catch((e=>Y1.error(e)))}getChartType(){var e;const t=null===(e=this.ctx.chartService.publicApi)||void 0===e||null===(e=e.getOptions())||void 0===e?void 0:e.chartType;return null!=t&&q1.some((e=>e.value===t))?t:"candlestick"}};dj([X1(j1),U1({changeValue(e){var t;null===(t=this.toolbar)||void 0===t||t.setHidden(!e)}})],Q1.prototype,"enabled",2);var J1={type:"root",optionsKey:"chartToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new Q1(e)},$1="ag-charts-context-menu",e2="ag-charts-dark-context-menu",{BOOLEAN:t2,Validate:i2,createElement:n2,initMenuKeyNav:o2,makeAccessibleClickListener:s2,ContextMenuRegistry:r2,Logger:a2}=mW,l2="context-menu";var d2=class extends mW.BaseModuleInstance{constructor(e){if(super(),this.ctx=e,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.extraSeriesAreaActions=[],this.extraLegendItemActions=[],this.pickedNode=void 0,this.showEvent=void 0,this.x=0,this.y=0,this.interactionManager=e.interactionManager,this.registry=e.contextMenuRegistry,this.groups={default:[],extra:[],extraSeriesArea:[],extraNode:[],extraLegendItem:[]},this.element=e.domManager.addChild("canvas-overlay",l2),this.element.classList.add($1),this.element.addEventListener("contextmenu",(e=>e.preventDefault())),this.destroyFns.push((()=>{var e;return null===(e=this.element.parentNode)||void 0===e?void 0:e.removeChild(this.element)})),this.doClose(),this.destroyFns.push(e.domManager.addListener("hidden",(()=>this.hide()))),"undefined"!==typeof MutationObserver){const e=new MutationObserver((()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()}));e.observe(this.element,{childList:!0}),this.mutationObserver=e,this.destroyFns.push((()=>e.disconnect()))}this.destroyFns.push(this.registry.registerDefaultAction({id:"download",type:"all",label:"contextMenuDownload",action:()=>{var t;const i=e.chartService.title;let n="image";null!==i&&void 0!==i&&i.enabled&&void 0!==(null===i||void 0===i?void 0:i.text)&&(n=i.text.replace(/\.+/,"")),null===(t=this.ctx.chartService.publicApi)||void 0===t||t.download({fileName:n}).catch((e=>{a2.error("Unable to download chart",e)}))}})),this.destroyFns.push(this.registry.addListener((e=>this.onContext(e))))}onContext(e){if(!this.enabled)return;e.preventDefault(),this.showEvent=e.sourceEvent,this.x=e.x,this.y=e.y,this.groups.default=this.registry.filterActions(e.type),this.pickedNode=void 0,this.pickedLegendItem=void 0,this.groups.extra=this.extraActions.map((e=>{let{label:t,action:i}=e;return{type:"all",label:t,action:i}})),this.groups.extraSeriesArea=[],this.groups.extraNode=[],r2.check("series-area",e)&&(this.pickedNode=e.context.pickedNode,this.groups.extraSeriesArea=this.extraSeriesAreaActions.map((e=>{let{label:t,action:i}=e;return{type:"series-area",label:t,action:i}})),this.pickedNode&&(this.groups.extraNode=this.extraNodeActions.map((e=>{let{label:t,action:i}=e;return{type:"node",label:t,action:i}})))),this.groups.extraLegendItem=[],r2.check("legend",e)&&(this.pickedLegendItem=e.context.legendItem,this.pickedLegendItem&&(this.groups.extraLegendItem=this.extraLegendItemActions.map((e=>{let{label:t,action:i}=e;return{type:"legend",label:t,action:i}}))));const{default:t,extra:i,extraSeriesArea:n,extraNode:o,extraLegendItem:s}=this.groups;0!==[t,i,n,o,s].reduce(((e,t)=>t.length+e),0)&&this.show(e.sourceEvent)}show(e){var t;this.interactionManager.pushState(mW.InteractionState.ContextMenu),this.element.classList.toggle(e2,this.darkTheme);const i=this.renderMenu();null===(t=this.menuCloser)||void 0===t||t.close(),this.menuElement?this.element.replaceChild(i,this.menuElement):this.element.appendChild(i),this.menuElement=i,this.element.style.display="block";const n=function(e,t){const{children:i}=null!==e&&void 0!==e?e:{};if(!i)return[];const n=[];for(const o of Array.from(i))o instanceof t&&n.push(o);return n}(i,HTMLButtonElement);this.menuCloser=o2({menu:i,buttons:n,orientation:"vertical",sourceEvent:e,autoCloseOnBlur:!0,closeCallback:()=>this.doClose()})}hide(){var e;null===(e=this.menuCloser)||void 0===e||e.close()}doClose(){this.interactionManager.popState(mW.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0,this.menuCloser=void 0),this.element.style.display="none"}renderMenu(){const e=n2("div");return e.classList.add("".concat($1,"__menu")),e.classList.toggle(e2,this.darkTheme),e.role="menu",this.appendMenuGroup(e,this.groups.default,!1),this.appendMenuGroup(e,this.groups.extra),this.appendMenuGroup(e,this.groups.extraSeriesArea),this.pickedNode&&this.appendMenuGroup(e,this.groups.extraNode),this.pickedLegendItem&&this.appendMenuGroup(e,this.groups.extraLegendItem),e}appendMenuGroup(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];0!==t.length&&(i&&e.appendChild(this.createDividerElement()),t.forEach((t=>{const i=this.renderItem(t);i&&e.appendChild(i)})))}renderItem(e){if(e&&"object"===typeof e&&e.constructor===Object)return this.createActionElement(e)}createDividerElement(){const e=n2("div");return e.classList.add("".concat($1,"__divider")),e.classList.toggle(e2,this.darkTheme),e.role="separator",e}createActionElement(e){let{id:t,label:i,type:n,action:o}=e;const s=!(!t||!this.registry.isDisabled(t));return this.createButtonElement(n,i,o,s)}createButtonOnClick(e,t){return r2.checkCallback("legend",e,t)?e=>{if(this.pickedLegendItem){const{seriesId:i,itemId:n}=this.pickedLegendItem;t({type:"contextmenu",seriesId:i,itemId:n,event:e}),this.hide()}}:r2.checkCallback("series-area",e,t)?()=>{t({type:"seriesContextMenuAction",event:this.showEvent}),this.hide()}:r2.checkCallback("node",e,t)?()=>{const{pickedNode:e,showEvent:i}=this,n=null===e||void 0===e?void 0:e.series.createNodeContextMenuActionEvent(i,e);n?t(n):a2.error("series node not found"),this.hide()}:()=>{t({type:"contextMenuEvent",event:this.showEvent}),this.hide()}}createButtonElement(e,t,i,n){const o=n2("button");return o.classList.add("".concat($1,"__item")),o.classList.toggle(e2,this.darkTheme),o.ariaDisabled=n.toString(),o.textContent=this.ctx.localeManager.t(t),o.role="menuitem",o.onclick=s2(o,this.createButtonOnClick(e,i)),o.addEventListener("mouseover",(()=>o.focus({preventScroll:!0}))),o}reposition(){let{x:e,y:t}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:n,offsetHeight:o}=this.element;e=mW.clamp(0,e,i.width-n),t=mW.clamp(0,t,i.height-o),this.element.style.left="".concat(e,"px"),this.element.style.top="calc(".concat(t,"px - 0.5em)")}destroy(){var e;super.destroy(),null===(e=this.mutationObserver)||void 0===e||e.disconnect(),this.ctx.domManager.removeStyles(l2),this.ctx.domManager.removeChild("canvas-overlay",l2)}};dj([i2(t2)],d2.prototype,"enabled",2),dj([i2(t2)],d2.prototype,"darkTheme",2);var c2={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsKey:"contextMenu",moduleFactory:e=>new d2(e),themeTemplate:{contextMenu:{enabled:!0,darkTheme:mW.ThemeSymbols.IS_DARK_THEME}}},{BaseProperties:h2,BOOLEAN:u2,FUNCTION:p2,NUMBER:g2,STRING:m2,Validate:v2,createId:f2,setAttribute:y2}=mW,b2=class extends mW.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};dj([v2(u2)],b2.prototype,"enabled",2),dj([v2(g2)],b2.prototype,"xOffset",2),dj([v2(g2)],b2.prototype,"yOffset",2),dj([v2(m2,{optional:!0})],b2.prototype,"format",2),dj([v2(p2,{optional:!0})],b2.prototype,"renderer",2);var C2=class extends h2{constructor(e,t,i){super(),this.domManager=e,this.id=f2(this),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=e.addChild("canvas-overlay","crosshair-label-".concat(this.id)),this.element.classList.add("ag-charts-crosshair-label"),y2(this.element,"aria-hidden",!0),this.element.setAttribute("data-key",t),this.element.setAttribute("data-axis-id",i)}show(e){const{element:t}=this,i=e.x+this.xOffset,n=e.y+this.yOffset;t.style.top="".concat(Math.round(n),"px"),t.style.left="".concat(Math.round(i),"px"),this.toggle(!0)}setLabelHtml(e){void 0!==e&&(this.element.innerHTML=e)}getBBox(){const{element:e}=this;return new mW.BBox(e.clientLeft,e.clientTop,e.clientWidth,e.clientHeight)}toggle(e){this.element.classList.toggle("ag-charts-crosshair-label--hidden",!e)}destroy(){this.domManager.removeChild("canvas-overlay","crosshair-label-".concat(this.id))}toLabelHtml(e,t){var i,n,o;if("string"===typeof e)return e;t=null!==(i=t)&&void 0!==i?i:{};const{text:s=(null!==(n=t.text)&&void 0!==n?n:""),color:r=t.color,backgroundColor:a=t.backgroundColor,opacity:l=(null!==(o=t.opacity)&&void 0!==o?o:1)}=e,d="opacity: ".concat(l,"; background-color: ").concat(null===a||void 0===a?void 0:a.toLowerCase(),"; color: ").concat(r);return'<div class="ag-charts-crosshair-label-content" style="'.concat(d,'">\n                    <span>').concat(s,"</span>\n                </div>")}};dj([v2(u2)],C2.prototype,"enabled",2),dj([v2(g2)],C2.prototype,"xOffset",2),dj([v2(g2)],C2.prototype,"yOffset",2),dj([v2(m2,{optional:!0})],C2.prototype,"format",2),dj([v2(p2,{optional:!0})],C2.prototype,"renderer",2);var{Group:x2,TranslatableGroup:w2,Line:S2,BBox:M2,createId:D2,POSITIVE_NUMBER:k2,RATIO:I2,BOOLEAN:A2,COLOR_STRING:T2,LINE_DASH:E2,OBJECT:R2,InteractionState:L2,Validate:P2,ZIndexMap:N2,formatNumber:F2,isInteger:O2,ChartAxisDirection:B2}=mW,G2=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.id=D2(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new b2,this.seriesRect=new M2(0,0,0,0),this.hoverRect=new M2(0,0,0,0),this.bounds=new M2(0,0,0,0),this.crosshairGroup=new w2({name:"crosshairs",zIndex:N2.SERIES_CROSSHAIR}),this.lineGroup=this.crosshairGroup.appendChild(new x2({name:"".concat(this.id,"-crosshair-lines"),zIndex:N2.SERIES_CROSSHAIR})),this.lineGroupSelection=mW.Selection.select(this.lineGroup,S2,!1),this.activeHighlight=void 0,this.axisCtx=e.parent,this.labels={};const t=e.regionManager.getRegion("series"),i=L2.Default|L2.Annotations|L2.AnnotationsSelected;this.hideCrosshairs(),e.domManager.addEventListener("focusin",(t=>{let{target:i}=t;const n=i instanceof HTMLElement&&e.domManager.contains(i,"series-area");this.crosshairGroup.visible&&!n&&(this.hideCrosshairs(),this.ctx.updateService.update(mW.ChartUpdateType.PERFORM_LAYOUT))})),this.destroyFns.push(e.scene.attachNode(this.crosshairGroup),t.addListener("hover",(e=>this.onMouseMove(e)),i),t.addListener("drag",(e=>this.onMouseMove(e)),L2.Annotations|L2.AnnotationsSelected),t.addListener("leave",(()=>this.onMouseOut()),i),e.keyNavManager.addListener("nav-hori",(()=>this.onKeyPress())),e.keyNavManager.addListener("nav-vert",(()=>this.onKeyPress())),e.zoomManager.addListener("zoom-pan-start",(()=>this.onMouseOut())),e.zoomManager.addListener("zoom-change",(()=>this.onMouseOut())),e.highlightManager.addListener("highlight-change",(e=>this.onHighlightChange(e))),e.layoutManager.addListener("layout:complete",(e=>this.layout(e))),(()=>Object.entries(this.labels).forEach((e=>{let[t,i]=e;return i.destroy()}))))}layout(e){let{series:{rect:t,paddedRect:i,visible:n},axes:o}=e;if(!n||!o||!this.enabled)return;this.seriesRect=t,this.hoverRect=i;const{position:s="left",axisId:r}=this.axisCtx,a=o.find((e=>e.id===r));if(!a)return;this.axisLayout=a,this.bounds=t.clone().grow(a.gridPadding+a.seriesAreaPadding,s);const{crosshairGroup:l,bounds:d}=this;l.translationX=Math.round(d.x),l.translationY=Math.round(d.y);const c=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(c),this.updateLines(),this.updateLabels(c)}updateSelections(e){this.lineGroupSelection.update(e,(e=>e.append(new S2)),(e=>e))}updateLabels(e){const{labels:t,ctx:i}=this;for(const o of e){var n;if(this.label.enabled)null!==(n=t[o])&&void 0!==n||(t[o]=new C2(i.domManager,o,this.axisCtx.axisId));t[o]&&this.updateLabel(t[o])}this.labelFormatter=this.axisCtx.scaleValueFormatter(this.label.format)}updateLabel(e){const{enabled:t,xOffset:i,yOffset:n,format:o,renderer:s}=this.label;e.enabled=t,e.xOffset=i,e.yOffset=n,e.format=o,e.renderer=s}updateLines(){const{lineGroupSelection:e,bounds:t,stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,axisLayout:a}=this;if(!a)return;const l=this.isVertical();e.each((e=>{e.stroke=i,e.strokeWidth=n,e.strokeOpacity=o,e.lineDash=s,e.lineDashOffset=r,e.y1=0,e.y2=l?t.height:0,e.x1=0,e.x2=l?0:t.width}))}isVertical(){return this.axisCtx.direction===B2.X}formatValue(e){const{labelFormatter:t,axisLayout:i,ctx:{callbackCache:n}}=this;if(t){const i=n.call(t,e);if(null!=i)return i}if("number"===typeof e){var o;const t=(null!==(o=null===i||void 0===i?void 0:i.label.fractionDigits)&&void 0!==o?o:0)+(O2(e)?0:1);return F2(e,t)}return String(null!==e&&void 0!==e?e:"")}onMouseMove(e){if(!this.enabled||this.snap)return;const{crosshairGroup:t,hoverRect:i}=this,{canvasX:n,canvasY:o}=e;if(i.containsPoint(n,o)){const i=this.getData(e);this.updatePositions(i),t.visible=!0}else this.hideCrosshairs();this.ctx.updateService.update(mW.ChartUpdateType.SCENE_RENDER)}onMouseOut(){this.hideCrosshairs(),this.ctx.updateService.update(mW.ChartUpdateType.SCENE_RENDER)}onKeyPress(){this.enabled&&!this.snap&&this.hideCrosshairs()}onHighlightChange(e){var t,i,n;if(!this.enabled)return;const{crosshairGroup:o,axisCtx:s}=this,{datum:r,series:a}=null!==(t=e.currentHighlight)&&void 0!==t?t:{},l=r&&((null===a||void 0===a||null===(i=a.axes.x)||void 0===i?void 0:i.id)===s.axisId||(null===a||void 0===a||null===(n=a.axes.y)||void 0===n?void 0:n.id)===s.axisId);if(this.activeHighlight=l?e.currentHighlight:void 0,this.activeHighlight){if(this.snap){const e=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(e),o.visible=!0}}else this.hideCrosshairs()}isInRange(e){return this.axisCtx.inRange(e)}updatePositions(e){const{seriesRect:t,lineGroupSelection:i}=this;i.each(((i,n)=>{const o=e[n];if(!o)return i.visible=!1,void this.hideLabel(n);i.visible=!0;const{value:s,position:r}=o;let a=0,l=0;this.isVertical()?(a=r,i.x=Math.round(a)):(l=r,i.y=Math.round(l)),this.label.enabled?this.showLabel(a+t.x,l+t.y,s,n):this.hideLabel(n)}))}getData(e){var t,i;const{axisCtx:n}=this,o="pointer",{datum:s,xKey:r="",yKey:a=""}=null!==(t=this.activeHighlight)&&void 0!==t?t:{},{regionX:l,regionY:d}=e,c=this.isVertical(),h=c?l:d;let u=null!==(i=null===s||void 0===s?void 0:s[c?r:a])&&void 0!==i?i:"";return n.continuous&&(u=n.scaleInvert(h)),{[o]:{position:h,value:u}}}getActiveHighlightData(e){var t,i;const{axisCtx:n}=this,{datum:o,series:s,xKey:r="",aggregatedValue:a,cumulativeValue:l,midPoint:d}=e,c=s.getKeyProperties(n.direction),h=(null!==(t=n.scale.bandwidth)&&void 0!==t?t:0)/2,u=(null===(i=s.axes[n.direction])||void 0===i?void 0:i.id)===n.axisId,p=c.indexOf("yKey")>-1&&u,g=c.indexOf("xKey")>-1&&u,m=null!==a&&void 0!==a?a:l;if(p&&void 0!==m){const e=n.scale.convert(m)+h;return this.isInRange(e)?{yKey:{value:m,position:e}}:{}}if(g){var v;const e=null!==(v=this.isVertical()?null===d||void 0===d?void 0:d.x:null===d||void 0===d?void 0:d.y)&&void 0!==v?v:0,t=n.continuous?n.scaleInvert(e):o[r];return this.isInRange(e)?{xKey:{value:t,position:e}}:{}}const f={};return c.forEach((e=>{const t=s.properties[e],i=o[t],r=n.scale.convert(i)+h;this.isInRange(r)&&(f[e]={value:i,position:r})})),f}getLabelHtml(e,t){var i,n;const o=null!==(i=null===(n=this.axisLayout)||void 0===n||null===(n=n.label)||void 0===n?void 0:n.fractionDigits)&&void 0!==i?i:0,s={text:this.formatValue(e)};return this.label.renderer?t.toLabelHtml(this.label.renderer({value:e,fractionDigits:o}),s):t.toLabelHtml(s)}showLabel(e,t,i,n){if(!this.axisLayout)return;const{bounds:o}=this,s=this.labels[n],r=this.getLabelHtml(i,s);s.setLabelHtml(r);const{width:a,height:l}=s.getBBox(),d=this.axisCtx.position;let c=this.axisLayout.label.spacing+this.axisLayout.tickSize;this.axisCtx.direction===B2.X?(c-=4,s.show({x:e-a/2,y:"bottom"===d?o.y+o.height+c:o.y-l-c})):(c-=8,s.show({x:"right"===d?o.x+o.width+c:o.x-a-c,y:t-l/2}))}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const e of Object.keys(this.labels))this.hideLabel(e)}hideLabel(e){var t;null===(t=this.labels[e])||void 0===t||t.toggle(!1)}};dj([P2(A2)],G2.prototype,"enabled",2),dj([P2(T2,{optional:!0})],G2.prototype,"stroke",2),dj([P2(E2,{optional:!0})],G2.prototype,"lineDash",2),dj([P2(k2)],G2.prototype,"lineDashOffset",2),dj([P2(k2)],G2.prototype,"strokeWidth",2),dj([P2(I2)],G2.prototype,"strokeOpacity",2),dj([P2(A2)],G2.prototype,"snap",2),dj([P2(R2)],G2.prototype,"label",2);var z2={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],moduleFactory:e=>new G2(e),themeTemplate:{crosshair:{snap:!0,stroke:mW.ThemeSymbols.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},{BOOLEAN:_2,FUNCTION:V2,ActionOnSet:H2,Validate:W2}=mW,j2=class extends mW.BaseModuleInstance{constructor(e){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=e.dataService}updateCallback(e,t){this.dataService&&(e&&null!=t?this.dataService.updateCallback(t):this.dataService.clearCallback())}};dj([H2({newValue(e){this.updateCallback(e,this.getData)}}),W2(_2)],j2.prototype,"enabled",2),dj([H2({newValue(e){this.updateCallback(this.enabled,e)}}),W2(V2)],j2.prototype,"getData",2),dj([H2({newValue(e){this.dataService.requestThrottle=e}})],j2.prototype,"requestThrottle",2),dj([H2({newValue(e){this.dataService.dispatchThrottle=e}})],j2.prototype,"updateThrottle",2),dj([H2({newValue(e){this.dataService.dispatchOnlyLatest=!e}})],j2.prototype,"updateDuringInteraction",2);var U2={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new j2(e),themeTemplate:{dataSource:{enabled:!1}}},{nearestSquaredInContainer:K2,partialAssign:Y2,mergeDefaults:Z2,BBox:X2}=mW,q2=class{constructor(e){this.components=e,this.union=X2.merge(e)}containsPoint(e,t){if(!this.union.containsPoint(e,t))return!1;for(const i of this.components)if(i.containsPoint(e,t))return!0;return!1}},Q2=class extends mW.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new mW.Path,this.capsPath=new mW.Path,this.bboxes=new q2([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(e){this._datum=e}calculateCapLength(e,t){const{lengthRatio:i=1,length:n}=e,{lengthRatioMultiplier:o,lengthMax:s}=t,r=null!==n&&void 0!==n?n:i*o;return Math.min(r,s)}getItemStylerParams(e,t,i){const{datum:n}=this;if(null==n||null==e.itemStyler)return;const{xLowerKey:o,xUpperKey:s,yLowerKey:r,yUpperKey:a}=e;return l(l({},t),{},{datum:n.datum,seriesId:n.datum.seriesId,xKey:n.xKey,yKey:n.yKey,xLowerKey:o,xUpperKey:s,yLowerKey:r,yUpperKey:a,highlighted:i})}formatStyles(e,t,i){let{cap:o}=e,s=n(e,sj);const r=this.getItemStylerParams(t,e,i);if(null!=r&&null!=t.itemStyler){const e=t.itemStyler(r);s=Z2(e,s),o=Z2(null===e||void 0===e?void 0:e.cap,e,o)}return{whiskerStyle:s,capsStyle:o}}applyStyling(e,t){Y2(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],e,t)}update(e,t,i){if(void 0===this.datum)return;const{whiskerStyle:n,capsStyle:o}=this.formatStyles(e,t,i),{xBar:s,yBar:r,capDefaults:a}=this.datum,l=this.whiskerPath;this.applyStyling(l,n),l.path.clear(!0),void 0!==r&&(l.path.moveTo(r.lowerPoint.x,r.lowerPoint.y),l.path.lineTo(r.upperPoint.x,r.upperPoint.y)),void 0!==s&&(l.path.moveTo(s.lowerPoint.x,s.lowerPoint.y),l.path.lineTo(s.upperPoint.x,s.upperPoint.y)),l.path.closePath(),this.capLength=this.calculateCapLength(null!==o&&void 0!==o?o:{},a);const d=this.capLength/2,c=this.capsPath;this.applyStyling(c,o),c.path.clear(!0),void 0!==r&&(c.path.moveTo(r.lowerPoint.x-d,r.lowerPoint.y),c.path.lineTo(r.lowerPoint.x+d,r.lowerPoint.y),c.path.moveTo(r.upperPoint.x-d,r.upperPoint.y),c.path.lineTo(r.upperPoint.x+d,r.upperPoint.y)),void 0!==s&&(c.path.moveTo(s.lowerPoint.x,s.lowerPoint.y-d),c.path.lineTo(s.lowerPoint.x,s.lowerPoint.y+d),c.path.moveTo(s.upperPoint.x,s.upperPoint.y-d),c.path.lineTo(s.upperPoint.x,s.upperPoint.y+d)),c.path.closePath()}updateBBoxes(){var e;const{capLength:t,whiskerPath:i,capsPath:n}=this,{yBar:o,xBar:s}=null!==(e=this.datum)&&void 0!==e?e:{},r=t/2,a=[];if(void 0!==o){const e=o.lowerPoint.y-o.upperPoint.y;a.push(new X2(o.lowerPoint.x,o.upperPoint.y,i.strokeWidth,e),new X2(o.lowerPoint.x-r,o.lowerPoint.y,t,n.strokeWidth),new X2(o.upperPoint.x-r,o.upperPoint.y,t,n.strokeWidth))}if(void 0!==s){const e=s.upperPoint.x-s.lowerPoint.x;a.push(new X2(s.lowerPoint.x,s.upperPoint.y,e,i.strokeWidth),new X2(s.lowerPoint.x,s.lowerPoint.y-r,n.strokeWidth,t),new X2(s.upperPoint.x,s.upperPoint.y-r,n.strokeWidth,t))}this.bboxes.components=a,this.bboxes.union=X2.merge(a)}containsPoint(e,t){return this.bboxes.containsPoint(e,t)}pickNode(e,t){return this.containsPoint(e,t)?this:void 0}nearestSquared(e,t,i){const{bboxes:n}=this;if(n.union.distanceSquared(e,t)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:o}=X2.nearestBox(e,t,n.components);return{nearest:this,distanceSquared:o}}},J2=class extends mW.Group{nearestSquared(e,t){const{nearest:i,distanceSquared:n}=K2(e,t,{children:this.children()});if(void 0!==i&&!isNaN(n))return{datum:i.datum,distanceSquared:n}}},{BaseProperties:$2,Validate:e3,BOOLEAN:t3,COLOR_STRING:i3,FUNCTION:n3,LINE_DASH:o3,NUMBER:s3,OBJECT:r3,POSITIVE_NUMBER:a3,RATIO:l3,STRING:d3}=mW,c3=class extends $2{};dj([e3(t3,{optional:!0})],c3.prototype,"visible",2),dj([e3(i3,{optional:!0})],c3.prototype,"stroke",2),dj([e3(a3,{optional:!0})],c3.prototype,"strokeWidth",2),dj([e3(l3,{optional:!0})],c3.prototype,"strokeOpacity",2),dj([e3(o3,{optional:!0})],c3.prototype,"lineDash",2),dj([e3(a3,{optional:!0})],c3.prototype,"lineDashOffset",2),dj([e3(s3,{optional:!0})],c3.prototype,"length",2),dj([e3(l3,{optional:!0})],c3.prototype,"lengthRatio",2);var h3=class extends $2{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new c3}};dj([e3(d3,{optional:!0})],h3.prototype,"yLowerKey",2),dj([e3(d3,{optional:!0})],h3.prototype,"yLowerName",2),dj([e3(d3,{optional:!0})],h3.prototype,"yUpperKey",2),dj([e3(d3,{optional:!0})],h3.prototype,"yUpperName",2),dj([e3(d3,{optional:!0})],h3.prototype,"xLowerKey",2),dj([e3(d3,{optional:!0})],h3.prototype,"xLowerName",2),dj([e3(d3,{optional:!0})],h3.prototype,"xUpperKey",2),dj([e3(d3,{optional:!0})],h3.prototype,"xUpperName",2),dj([e3(t3,{optional:!0})],h3.prototype,"visible",2),dj([e3(i3,{optional:!0})],h3.prototype,"stroke",2),dj([e3(a3,{optional:!0})],h3.prototype,"strokeWidth",2),dj([e3(l3,{optional:!0})],h3.prototype,"strokeOpacity",2),dj([e3(o3,{optional:!0})],h3.prototype,"lineDash",2),dj([e3(a3,{optional:!0})],h3.prototype,"lineDashOffset",2),dj([e3(n3,{optional:!0})],h3.prototype,"itemStyler",2),dj([e3(r3)],h3.prototype,"cap",2);var{fixNumericExtent:u3,groupAccumulativeValueProperty:p3,isDefined:g3,mergeDefaults:m3,valueProperty:v3,ChartAxisDirection:f3,Logger:y3}=mW;var b3=class e extends mW.BaseModuleInstance{constructor(e){super(),this.properties=new h3;const t=function(e){for(const t of fw)if(t===e.series.type)return e.series;throw new Error("AG Charts - unsupported series type '".concat(e.series.type,"', error bars supported series types: ").concat(fw.join(", ")))}(e),{annotationGroup:i,annotationSelections:n}=t;this.cartesianSeries=t,this.groupNode=new J2({name:"".concat(i.id,"-errorBars")}),i.appendChild(this.groupNode),this.selection=mW.Selection.select(this.groupNode,(()=>this.errorBarFactory())),n.add(this.selection),t.addEventListener("seriesVisibilityChange",(e=>this.onToggleSeriesItem(e))),this.destroyFns.push(t.addListener("data-processed",(e=>this.onDataProcessed(e))),t.addListener("data-update",(e=>this.onDataUpdate(e))),e.highlightManager.addListener("highlight-change",(e=>this.onHighlightChange(e))),(()=>i.removeChild(this.groupNode)),(()=>n.delete(this.selection)))}hasErrorBars(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:n}=this.properties;return g3(e)&&g3(t)||g3(i)&&g3(n)}isStacked(){var e;const t=null===(e=this.cartesianSeries.seriesGrouping)||void 0===e?void 0:e.stackCount;return null!=t&&t>0}getUnstackPropertyDefinition(e){const t=[],{xLowerKey:i,xUpperKey:n,yLowerKey:o,yUpperKey:s,xErrorsID:r,yErrorsID:a}=this.getMaybeFlippedKeys(),{xScaleType:l,yScaleType:d}=e;return null!=o&&null!=s&&t.push(v3(o,d,{id:"".concat(a,"-lower")}),v3(s,d,{id:"".concat(a,"-upper")})),null!=i&&null!=n&&t.push(v3(i,l,{id:"".concat(r,"-lower")}),v3(n,l,{id:"".concat(r,"-upper")})),t}getStackPropertyDefinition(e){var t,i;const n=[],{cartesianSeries:o}=this,{xLowerKey:s,xUpperKey:r,yLowerKey:a,yUpperKey:d,xErrorsID:c,yErrorsID:h}=this.getMaybeFlippedKeys(),{xScaleType:u,yScaleType:p}=e,g=null!==(t=null===(i=o.seriesGrouping)||void 0===i?void 0:i.groupIndex)&&void 0!==t?t:o.id,m=l({invalidValue:null,missingValue:0,separateNegative:!0},o.visible?{}:{forceValue:0}),v=(e,t,i,n)=>p3(e,"normal","current",l({id:"".concat(t,"-").concat(i),groupId:"errorGroup-".concat(g,"-").concat(i)},m),n),f=(e,t,i,o)=>{n.push(...v(e,i,"lower",o),...v(t,i,"upper",o))};return null!=a&&null!=d&&f(a,d,h,p),null!=s&&null!=r&&f(s,r,c,u),n}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:t,xUpperKey:i,xErrorsID:n,yLowerKey:o,yUpperKey:s,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===f3.X?g3(t)&&g3(i):g3(o)&&g3(s)){const{dataModel:t,processedData:i,cartesianSeries:o}=this;if(null!=t&&null!=i){const s={x:n,y:r}[e],a=t.getDomain(o,"".concat(s,"-lower"),"value",i),l=t.getDomain(o,"".concat(s,"-upper"),"value",i),d=[Math.min(...a,...l),Math.max(...a,...l)];return u3(d)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,g3(e.dataModel)&&g3(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){var e;return this.hasErrorBars()?null===(e=this.cartesianSeries.contextNodeData)||void 0===e?void 0:e.nodeData:void 0}createNodeData(){var e,t;const i=this.getNodeData(),n=null===(e=this.cartesianSeries.axes[f3.X])||void 0===e?void 0:e.scale,o=null===(t=this.cartesianSeries.axes[f3.Y])||void 0===t?void 0:t.scale;if(n&&o&&i)for(let s=0;s<i.length;s++){const{midPoint:e,xLower:t,xUpper:r,yLower:a,yUpper:l}=this.getDatum(i,s);if(null!=e){let d,c;g3(t)&&g3(r)&&(d={lowerPoint:{x:this.convert(n,t),y:e.y},upperPoint:{x:this.convert(n,r),y:e.y}}),g3(a)&&g3(l)&&(c={lowerPoint:{x:e.x,y:this.convert(o,a)},upperPoint:{x:e.x,y:this.convert(o,l)}}),i[s].xBar=d,i[s].yBar=c}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:n}=this.properties,[o,s]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,i]=[i,e],[t,n]=[n,t],[o,s]=[s,o]),{xLowerKey:e,xUpperKey:t,xErrorsID:o,yLowerKey:i,yUpperKey:n,yErrorsID:s}}static getDatumKey(e,t,i){if(null==t)return;const n=e.datum[t];if(null!=n){if("number"===typeof n)return n+i;y3.warnOnce("Found [".concat(t,"] error value of type ").concat(typeof n,". Expected number type"))}}getDatum(t,i){const{xLowerKey:n,xUpperKey:o,yLowerKey:s,yUpperKey:r}=this.getMaybeFlippedKeys(),a=t[i],l=null!=a.cumulativeValue&&this.isStacked()?a.cumulativeValue-a.yValue:0,[d,c]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:a.midPoint,xLower:e.getDatumKey(a,n,d),xUpper:e.getDatumKey(a,o,d),yLower:e.getDatumKey(a,s,c),yUpper:e.getDatumKey(a,r,c)}}convert(e,t){var i;const n=(null!==(i=e.bandwidth)&&void 0!==i?i:0)/2;return e.convert(t)+n}update(){const e=this.getNodeData();null!=e&&(this.selection.update(e),this.selection.each(((e,t,i)=>this.updateNode(e,t,i))))}updateNode(e,t,i){e.datum=t,e.update(this.getDefaultStyle(),this.properties,!1),e.updateBBoxes()}pickNodeExact(e){const{x:t,y:i}=e,n=this.groupNode.pickNode(t,i);if(null!=n)return{datum:n.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:n,xLowerName:o=e,xUpperName:s=t,yLowerName:r=i,yUpperName:a=n}=this.properties;return{xLowerKey:e,xLowerName:o,xUpperKey:t,xUpperName:s,yLowerKey:i,yLowerName:r,yUpperKey:n,yUpperName:a}}onToggleSeriesItem(e){this.groupNode.visible=e.visible}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:m3(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,t,i){const n=this.getNodeData();if(null!=n)for(let s=0;s<n.length;s++)if(e===n[s]){var o;null===(o=this.selection.at(s))||void 0===o||o.update(t,this.properties,i);break}}onHighlightChange(e){const{previousHighlight:t,currentHighlight:i}=e;(null===i||void 0===i?void 0:i.series)===this.cartesianSeries&&this.restyleHighlightChange(i,this.getHighlightStyle(),!0),(null===t||void 0===t?void 0:t.series)===this.cartesianSeries&&this.restyleHighlightChange(t,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new Q2}getWhiskerProperties(){const{stroke:e,strokeWidth:t,visible:i,strokeOpacity:n,lineDash:o,lineDashOffset:s}=this.properties;return{stroke:e,strokeWidth:t,visible:i,strokeOpacity:n,lineDash:o,lineDashOffset:s}}},C3={series:{errorBar:{visible:!0,stroke:mW.ThemeSymbols.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},x3={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:fw,moduleFactory:e=>new b3(e),themeTemplate:C3},{ZIndexMap:w3,ActionOnSet:S3,Validate:M3,ProxyPropertyOnWrite:D3,OBJECT:k3,RATIO:I3,COLOR_STRING:A3}=mW,T3=class extends mW.Background{constructor(){super(...arguments),this.image=new G1,this.fill="transparent",this.fillOpacity=void 0}createNode(){return new mW.Group({name:"foreground",zIndex:w3.FOREGROUND})}onLayoutComplete(e){super.onLayoutComplete(e);const{width:t,height:i}=e.chart;let n={x:0,y:0,width:t,height:i};this.image&&(n=this.image.performLayout(t,i)),this.text&&this.updateTextNode(n)}onImageLoad(){this.ctx.updateService.update(mW.ChartUpdateType.SCENE_RENDER)}updateTextNode(e){const{textNode:t}=this;t.fontWeight="bold",t.fontFamily="Impact, sans-serif",t.fontSize=19,t.opacity=.7,t.fill="#9b9b9b",t.textBaseline="top";const i=this.textNode.getBBox();t.x=e.x+e.width/2-i.width/2,t.y=e.y+e.height+10}};dj([M3(k3,{optional:!0}),S3({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){this.node.removeChild(e.node),e.onLoad=void 0}})],T3.prototype,"image",2),dj([M3(A3,{optional:!0}),D3("rectNode","fill")],T3.prototype,"fill",2),dj([M3(I3,{optional:!0}),D3("rectNode","fillOpacity")],T3.prototype,"fillOpacity",2);var E3={type:"root",optionsKey:"foreground",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new T3(e)},{TranslatableGroup:R3,ScenePathChangeDetection:L3}=mW,P3=class extends R3{constructor(){super(...arguments),this.inset=0,this.cornerRadius=0}applyClip(e,t){const{cornerRadius:i,inset:n}=this,{x:o,y:s,width:r,height:a}=t;e.beginPath(),e.roundRect(o+n,s+n,r-2*n,a-2*n,i),e.clip()}};dj([L3()],P3.prototype,"inset",2),dj([L3()],P3.prototype,"cornerRadius",2);var{Validate:N3,BOOLEAN:F3,POSITIVE_NUMBER:O3,ZIndexMap:B3,ActionOnSet:G3,CategoryAxis:z3,TextUtils:_3,Padding:V3,Logger:H3,Group:W3,BBox:j3,ProxyProperty:U3}=mW,K3=class{constructor(){this.top=0,this.bottom=0}};dj([N3(O3)],K3.prototype,"top",2),dj([N3(O3)],K3.prototype,"bottom",2);var Y3=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.padding=new K3,this.root=new W3({name:"root"}),this.seriesRoot=this.root.appendChild(new P3({name:"Series-root",zIndex:B3.SERIES_LAYER,renderToOffscreenCanvas:!0})),this.axisGridGroup=this.root.appendChild(new W3({name:"Axes-Grids",zIndex:B3.AXIS_GRID})),this.axisGroup=this.root.appendChild(new W3({name:"Axes-Grids",zIndex:B3.AXIS_GRID})),this.axisLabelGroup=this.root.appendChild(new W3({name:"Axes-Labels",zIndex:B3.SERIES_LABEL})),this.axisCrosslineRangeGroup=this.root.appendChild(new W3({name:"Axes-Crosslines-Range",zIndex:B3.SERIES_CROSSLINE_RANGE})),this.axisCrosslineLineGroup=this.root.appendChild(new W3({name:"Axes-Crosslines-Line",zIndex:B3.SERIES_CROSSLINE_LINE})),this.axisCrosslineLabelGroup=this.root.appendChild(new W3({name:"Axes-Crosslines-Label",zIndex:B3.SERIES_LABEL})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach((e=>e.destroy())),this.axes=[],this._destroyed=!0)}onSeriesChange(e,t){var i;const n=null!==(i=null===t||void 0===t?void 0:t.filter((t=>!e.includes(t))))&&void 0!==i?i:[];this.destroySeries(n);for(const o of e){if(null!==t&&void 0!==t&&t.includes(o))continue;o.attachSeries(this.seriesRoot,this.seriesRoot,void 0);const e=this;o.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return e.seriesRect}},o.resetAnimation("initial"===this.miniChartAnimationPhase?"initial":"disabled")}}destroySeries(e){null===e||void 0===e||e.forEach((e=>{e.destroy(),e.detachSeries(this.seriesRoot,this.seriesRoot,void 0),e.chart=void 0}))}assignSeriesToAxes(){this.axes.forEach((e=>{e.boundSeries=this.series.filter((t=>t.axes[e.direction]===e))}))}assignAxesToSeries(){const e={};this.axes.forEach((t=>{var i;const n=t.direction;(null!==(i=e[n])&&void 0!==i?i:e[n]=[]).push(t)})),this.series.forEach((t=>{t.directions.forEach((i=>{const n=e[i];if(!n)return void H3.warnOnce("no available axis for direction [".concat(i,"]; check series and axes configuration."));const o=t.getKeys(i),s=this.findMatchingAxis(n,o);s?t.axes[i]=s:H3.warnOnce("no matching axis for direction [".concat(i,"] and keys [").concat(o,"]; check series and axes configuration."))}))}))}findMatchingAxis(e,t){for(const i of e){if(!i.keys.length)return i;if(t)for(const e of t)if(i.keys.includes(e))return i}}updateData(e){this.series.forEach((t=>t.setChartData(e))),"initial"===this.miniChartAnimationPhase&&this.ctx.animationManager.onBatchStop((()=>{this.miniChartAnimationPhase="ready",this.series.forEach((e=>e.resetAnimation("disabled")))}))}async processData(e){this.series.some((e=>e.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());for(const t of this.axes)t.processData();await Promise.all(this.series.map((t=>(t.resetDatumCallbackCache(),t.processData(e)))))}computeAxisPadding(){const e=new V3;return this.enabled?(this.axes.forEach((t=>{let i,{position:n,thickness:o,line:s,label:r}=t;var a;null!=n&&(i=o||(s.enabled?s.width:0)+(r.enabled?_3.getLineHeight(null!==(a=r.fontSize)&&void 0!==a?a:0)+r.spacing:0),e[n]=Math.ceil(i))})),e):e}async layout(e,t){const{padding:i}=this,n=null!=this.seriesRect,o=new j3(0,0,e,t-(i.top+i.bottom));this.seriesRect=o,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectCanvasSpace(new j3(0,-i.top,e,t)),this.axes.forEach((i=>{const{position:s="left"}=i;switch(s){case"top":case"bottom":i.range=[0,o.width],i.gridLength=o.height;break;case"right":case"left":{const e=i instanceof z3;i.range=e?[0,o.height]:[o.height,0],i.gridLength=o.width;break}}i.gridPadding=0,i.translation.x=0,i.translation.y=0,"right"===s?i.translation.x=e:"bottom"===s&&(i.translation.y=t),i.calculateLayout(),i.update(n)})),await Promise.all(this.series.map((e=>e.update({seriesRect:o}))))}};dj([N3(F3)],Y3.prototype,"enabled",2),dj([U3(["seriesRoot","inset"])],Y3.prototype,"inset",2),dj([U3(["seriesRoot","cornerRadius"])],Y3.prototype,"cornerRadius",2),dj([G3({changeValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of t)e.includes(n)||(n.detachAxis(i),n.destroy());for(const n of e)null!==t&&void 0!==t&&t.includes(n)||n.attachAxis(i)}})],Y3.prototype,"axes",2),dj([G3({changeValue(e,t){this.onSeriesChange(e,t)}})],Y3.prototype,"series",2);var{clamp:Z3,SliderWidget:X3}=mW,q3=class{constructor(e,t){this.ctx=e,this.sliderHandlers=t,this._min=0,this._max=1,this.minRange=.001,this.dragStartX=0,this.ctx=e,this.toolbar=e.proxyInteractionService.createProxyContainer({type:"toolbar",domManagerId:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],orientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.sliders=[e.proxyInteractionService.createProxyElement({type:"slider",domIndex:1,ariaLabel:{id:"ariaLabelNavigatorMinimum"},parent:this.toolbar,cursor:"ew-resize"}),e.proxyInteractionService.createProxyElement({type:"slider",domIndex:0,ariaLabel:{id:"ariaLabelNavigatorRange"},parent:this.toolbar,cursor:"grab"}),e.proxyInteractionService.createProxyElement({type:"slider",ariaLabel:{id:"ariaLabelNavigatorMaximum"},parent:this.toolbar,cursor:"ew-resize"})];for(const[i,n]of["min","pan","max"].entries()){const e=this.sliders[i];e.step=X3.STEP_HUNDRETH,e.keyboardStep=X3.STEP_ONE,e.orientation="horizontal",e.setPreventsDefault(!1),e.addListener("drag-start",(t=>this.onDragStart(e,t,n))),e.addListener("drag-move",(t=>this.onDrag(e,t,n))),e.addListener("drag-end",(()=>this.updateSliderRatios())),e.addListener("contextmenu",(t=>this.onContextMenu(e,t)))}this.sliders[0].addListener("change",(()=>this.onMinSliderChange())),this.sliders[1].addListener("change",(()=>this.onPanSliderChange())),this.sliders[2].addListener("change",(()=>this.onMaxSliderChange())),this.updateSliderRatios(),this.updateVisibility(!1)}destroy(){this.toolbar.destroy()}updateVisibility(e){this.toolbar.setHidden(!e)}updateZoom(){const{_min:e,_max:t}=this;if(null!=e&&null!=t)return this.ctx.zoomManager.updateZoom("navigator",{x:{min:e,max:t}})}updateBounds(e){this.toolbar.setBounds(e)}updateSliderBounds(e,t){this.sliders[e].setBounds(t)}updateMinMax(e,t){this._min=e,this._max=t,this.updateSliderRatios()}updateSliderRatios(){const{_min:e,_max:t}=this,i=this.ctx.localeManager.t("ariaValuePanRange",{min:e,max:t});this.sliders[0].setValueRatio(e),this.sliders[1].setValueRatio(e,{ariaValueText:i}),this.sliders[2].setValueRatio(t)}toCanvasOffsets(e){return{offsetX:this.dragStartX+e.originDeltaX}}onDragStart(e,t,i){const n=this.toolbar.cssLeft(),o=e.cssLeft();this.dragStartX=n+o+t.offsetX,this.sliderHandlers.onDragStart(i,this.toCanvasOffsets(t))}onDrag(e,t,i){this.sliderHandlers.onDrag(i,this.toCanvasOffsets(t))}onContextMenu(e,t){let{sourceEvent:i,offsetX:n,offsetY:o}=t;const{x:s,y:r}=this.toolbar.getBounds(),{x:a,y:l}=e.getBounds(),d=n+s+a,c=o+r+l;this.ctx.contextMenuRegistry.dispatchContext("all",{sourceEvent:i,canvasX:d,canvasY:c},{})}onPanSliderChange(){const e=this.sliders[1].getValueRatio(),t=this._max-this._min;this._min=Z3(0,e,1-t),this._max=this._min+t,this.updateZoom()}onMinSliderChange(){this._min=this.sliders[0].clampValueRatio(0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(){this._max=this.sliders[2].clampValueRatio(this._min+this.minRange,1),this.updateZoom()}},{Validate:Q3,ScenePathChangeDetection:J3,POSITIVE_NUMBER:$3,BOOLEAN:e4,BBox:t4,ExtendedPath2D:i4}=mW,n4=class extends mW.Path{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.cornerRadius=4,this.grip=!0,this.gripPath=new i4}setCenter(e,t){this.dirtyPath=!0,this.centerX===e&&this.centerY===t||(this.centerX=e,this.centerY=t,this.markDirty())}static align(e,t,i,n,o,s,r,a,l){const d=e.align(i+o*r)+l,c=d+e.align(i+o*r,o*(a-r))-2*l,h=e.align(n+s/2);e.setCenter(d,h),t.setCenter(c,h)}computeBBox(){const{centerX:e,centerY:t,width:i,height:n}=this;return new t4(e-i/2,t-n/2,i,n)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}updatePath(){var e,t;const{centerX:i,centerY:n,path:o,gripPath:s,strokeWidth:r,cornerRadius:a,grip:l}=this,d=r/2,c=null!==(e=null===(t=this.layerManager)||void 0===t||null===(t=t.canvas)||void 0===t?void 0:t.pixelRatio)&&void 0!==e?e:1;o.clear(),s.clear();const h=Math.floor(this.width/2*c)/c,u=Math.floor(this.height/2*c)/c;o.roundRect(i-h+d,n-u+d,2*(h-d),2*(u-d),a);if(l)for(let p=-.5;p<=.5;p+=1)for(let e=-1;e<=1;e+=1)s.arc(i+3*p,n+3*e,1,0,2*Math.PI),s.closePath()}renderFill(e,t){const{stroke:i}=this;super.renderFill(e,t),e.fillStyle="string"===typeof i?i:"black",e.fill(this.gripPath.getPath2D())}};n4.className="RangeHandle",dj([Q3($3),J3()],n4.prototype,"width",2),dj([Q3($3),J3()],n4.prototype,"height",2),dj([Q3($3),J3()],n4.prototype,"cornerRadius",2),dj([Q3(e4),J3()],n4.prototype,"grip",2);var{Path:o4,BBox:s4,ExtendedPath2D:r4,clippedRoundRect:a4,POSITIVE_NUMBER:l4,Validate:d4,ScenePathChangeDetection:c4}=mW,h4=class extends o4{constructor(){super(...arguments),this.cornerRadius=4,this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1,this.visiblePath=new r4}layout(e,t,i,n,o,s){o=isNaN(o)?this.min:o,s=isNaN(s)?this.max:s,e===this.x&&t===this.y&&i===this.width&&this.height===n&&o===this.min&&s===this.max||(this.x=e,this.y=t,this.width=i,this.height=n,this.min=o,this.max=s,this.dirtyPath=!0,this.markDirty())}computeBBox(){const{x:e,y:t,width:i,height:n}=this;return new s4(e,t,i,n)}computeVisibleRangeBBox(){const{x:e,y:t,width:i,height:n,min:o,max:s}=this,r=e+i*o;return new s4(r,t,e+i*s-r,n)}updatePath(){const{path:e,visiblePath:t,x:i,y:n,width:o,height:s,min:r,max:a,strokeWidth:l,cornerRadius:d}=this,c=l/2;e.clear(),t.clear();const h=this.align(i)+c,u=this.align(n)+c,p=this.align(i,o)-2*c,g=this.align(n,s)-2*c,m=this.align(i+o*r)+c,v=m+this.align(i+o*r,o*(a-r))-2*c,f={topLeft:d,topRight:d,bottomRight:d,bottomLeft:d};a4(e,h,u,p,g,f,new s4(h,u,m-h,g)),a4(e,h,u,p,g,f,new s4(v,u,p+h-v,g)),a4(t,h,u,p,g,f,new s4(m,u,v-m,g))}renderStroke(e,t){super.renderStroke(e,t),super.renderStroke(e,this.visiblePath.getPath2D())}};h4.className="RangeMask",dj([d4(l4),c4()],h4.prototype,"cornerRadius",2);var u4=class extends mW.Group{constructor(e){super({name:"rangeSelectorGroup",zIndex:mW.ZIndexMap.NAVIGATOR}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new mW.TranslatableGroup({name:"navigator-background",zIndex:1})),this.append(e)}layout(e,t,i,n,o,s){this.x=e,this.y=t,this.width=i,this.height=n,this.lOffset=o,this.rOffset=s,this.background.translationX=e,this.background.translationY=t,this.markDirty()}updateBackground(e,t){null!=e&&this.background.removeChild(e),null!=t&&this.background.appendChild(t),this.markDirty()}computeBBox(){const{x:e,y:t,width:i,height:n,lOffset:o,rOffset:s}=this;return new mW.BBox(e-o,t,i+(o+s),n)}},{clamp:p4,BaseModuleInstance:g4,ObserveChanges:m4,Validate:v4,BOOLEAN:f4,POSITIVE_NUMBER:y4}=mW,b4=class extends g4{constructor(e){super(),this.ctx=e,this.enabled=!1,this.mask=new h4,this.minHandle=new n4,this.maxHandle=new n4,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(e,t)=>({x:e,y:t})},this.height=30,this.cornerRadius=0,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new u4([this.mask,this.minHandle,this.maxHandle]),this.destroyFns.push(e.scene.attachNode(this.rangeSelector),this.ctx.localeManager.addListener("locale-changed",(()=>this.updateZoom())),this.ctx.layoutManager.registerElement(mW.LayoutElement.Navigator,(e=>this.onLayoutStart(e))),this.ctx.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))),e.zoomManager.addListener("zoom-change",(e=>this.onZoomChange(e)))),this.domProxy=new q3(e,this),this.updateGroupVisibility(),this.miniChart=new Y3(e)}updateBackground(e,t){var i;null===(i=this.rangeSelector)||void 0===i||i.updateBackground(e,t)}updateGroupVisibility(){const{enabled:e}=this;null!=this.rangeSelector&&e!==this.rangeSelector.visible&&(this.rangeSelector.visible=e,this.domProxy.updateVisibility(e),e?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(e){if(this.enabled){const{layoutBox:t}=e,i=this.height+this.spacing;t.shrink(i,"bottom"),this.y=t.y+t.height+this.spacing}else this.y=0;if(this.enabled&&this.miniChart){const{top:t,bottom:i}=this.miniChart.computeAxisPadding();e.layoutBox.shrink(t+i,"bottom"),this.y-=i,this.miniChart.inset=this.mask.strokeWidth/2,this.miniChart.cornerRadius=this.mask.cornerRadius}}async onLayoutComplete(e){var t;const{x:i,width:n}=e.series.rect,{y:o,height:s}=this;if(this.domProxy.updateVisibility(this.enabled),this.enabled){const{_min:e,_max:t}=this.domProxy;this.layoutNodes(i,o,n,s,e,t),this.domProxy.updateBounds({x:i,y:o,width:n,height:s})}this.x=i,this.width=n,await(null===(t=this.miniChart)||void 0===t?void 0:t.layout(n,s))}canDrag(){const e=mW.InteractionState.Default|mW.InteractionState.Animation|mW.InteractionState.ZoomDrag;return this.enabled&&this.ctx.interactionManager.getState()&e}onDragStart(e,t){let{offsetX:i}=t;this.canDrag()&&("pan"===e&&(this.panStart=(i-this.x)/this.width-this.domProxy._min),this.ctx.zoomManager.fireZoomPanStartEvent("navigator"))}onDrag(e,t){let{offsetX:i}=t;if(!this.canDrag())return;const{panStart:n,x:o,width:s}=this,{minRange:r}=this.domProxy;let{_min:a,_max:l}=this.domProxy;const d=(i-o)/s;if("min"===e)a=p4(0,d,l-r);else if("max"===e)l=p4(a+r,d,1);else if("pan"===e&&null!=n){const e=l-a;a=p4(0,d-n,1-e),l=a+e}this.domProxy._min=a,this.domProxy._max=l,this.updateZoom()}onZoomChange(e){const{x:t}=e;if(!t)return;const{x:i,y:n,width:o,height:s}=this,{min:r,max:a}=t;this.domProxy.updateMinMax(r,a),this.layoutNodes(i,n,o,s,r,a)}layoutNodes(e,t,i,n,o,s){const{rangeSelector:r,mask:a,minHandle:l,maxHandle:d}=this;a.layout(e,t,i,n,o,s),r.layout(e,t,i,n,l.width/2,d.width/2),n4.align(l,d,e,t,i,n,o,s,a.strokeWidth/2),o+(s-o)/2<.5?(l.zIndex=3,d.zIndex=4):(l.zIndex=4,d.zIndex=3),[l,this.maskVisibleRange,d].forEach(((i,n)=>{const o=i.getBBox(),s={x:o.x-e,y:o.y-t,height:o.height,width:o.width};this.domProxy.updateSliderBounds(n,s)}))}updateZoom(){this.enabled&&this.domProxy.updateZoom()}updateData(e){var t;return null===(t=this.miniChart)||void 0===t?void 0:t.updateData(e)}async processData(e){var t;if(this.miniChart)return null===(t=this.miniChart)||void 0===t?void 0:t.processData(e)}};dj([m4(((e,t,i)=>{e.updateBackground(null===i||void 0===i?void 0:i.root,null===t||void 0===t?void 0:t.root)}))],b4.prototype,"miniChart",2),dj([v4(f4),m4(((e,t)=>{e.ctx.zoomManager.setNavigatorEnabled(Boolean(t)),e.updateGroupVisibility()}))],b4.prototype,"enabled",2),dj([v4(y4)],b4.prototype,"height",2),dj([v4(y4),m4(((e,t)=>{e.mask.cornerRadius=t}))],b4.prototype,"cornerRadius",2),dj([v4(y4)],b4.prototype,"spacing",2);var{DEFAULT_FONT_FAMILY:C4,DEFAULT_LABEL_COLOUR:x4,DEFAULT_INVERTED_BACKGROUND_COLOUR:w4,DEFAULT_BACKGROUND_COLOUR:S4,DEFAULT_NAVIGATOR_STROKE:M4}=mW.ThemeSymbols,D4={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new b4(e),removable:!1,themeTemplate:{navigator:{enabled:!1,height:18,cornerRadius:4,mask:{fill:w4,fillOpacity:.1,stroke:M4,strokeWidth:1},minHandle:{fill:S4,stroke:M4,strokeWidth:1,width:12,height:24,cornerRadius:4},maxHandle:{fill:S4,stroke:M4,strokeWidth:1,width:12,height:24,cornerRadius:4},miniChart:{enabled:!1,label:{color:x4,fontSize:10,fontFamily:C4,spacing:5},padding:{top:0,bottom:0}}}}},{AND:k4,ARRAY:I4,FUNCTION:A4,NUMBER:T4,OR:E4,ToolbarButtonProperties:R4,Validate:L4}=mW,P4=class extends R4{};dj([L4(E4(T4,k4(I4,I4.restrict({length:2})),A4))],P4.prototype,"value",2);var{BOOLEAN:N4,OBJECT:F4,ChartAxisDirection:O4,LayoutElement:B4,PropertiesArray:G4,Toolbar:z4,Validate:_4}=mW,V4=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.buttons=new G4(P4),this.verticalSpacing=10,this.toolbar=new z4(this.ctx.localeManager),this.toolbar.addClass("ag-charts-range-buttons"),e.domManager.addChild("canvas-overlay","range-buttons",this.toolbar.getElement()),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),e.layoutManager.registerElement(B4.ToolbarBottom,this.onLayoutStart.bind(this)),e.zoomManager.addListener("zoom-change",this.onZoomChanged.bind(this)),this.teardown.bind(this))}teardown(){this.ctx.domManager.removeChild("canvas-overlay","range-buttons"),this.toolbar.destroy()}onLayoutStart(e){const{buttons:t,ctx:i,enabled:n,toolbar:o,verticalSpacing:s}=this,{layoutBox:r}=e;if(!n||!i.zoomManager.isZoomEnabled())return void o.setHidden(!0);o.setHidden(!1),o.updateButtons(t);const a=o.getBounds().height;o.setBounds({x:r.x,y:r.y+r.height-a,width:r.width,height:a}),r.shrink({bottom:a+s})}onZoomChanged(){this.toolbar.clearActiveButton()}onButtonPress(e){let{button:{index:t}}=e;const{zoomManager:i}=this.ctx,n=this.buttons.at(t);if(!n)return;const{value:o}=n;"number"===typeof o?i.extendToEnd("zoom-buttons",O4.X,o):Array.isArray(o)?i.updateWith("zoom-buttons",O4.X,(()=>o)):"function"===typeof o&&i.updateWith("zoom-buttons",O4.X,o),this.toolbar.toggleActiveButtonByIndex(t)}};dj([_4(N4)],V4.prototype,"enabled",2),dj([_4(F4)],V4.prototype,"buttons",2);var H4=864e5,W4=30*H4,j4={type:"root",optionsKey:"ranges",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new V4(e),themeTemplate:{ranges:{enabled:!1,buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:W4},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*W4},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*W4},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(e,t)=>[new Date("".concat(new Date(t).getFullYear(),"-01-01")).getTime(),t]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:365*H4},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(e,t)=>[e,t]}]}}},U4=class e extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.activeSections=new Set,this.sectionButtons={annotations:[],chartToolbar:[]}}getSharedToolbar(e){return this.sharedToolbar||this.createSharedToolbar(),this.toolbarWithSection(e)}createSharedToolbar(){this.sharedToolbar=new mW.Toolbar(this.ctx.localeManager,"vertical"),this.sharedToolbar.addClass("ag-charts-shared-toolbar"),this.ctx.domManager.addChild("canvas-overlay","shared-toolbar",this.sharedToolbar.getElement()),this.destroyFns.push((()=>{var e;null===(e=this.sharedToolbar)||void 0===e||e.destroy(),this.sharedToolbar=void 0,this.ctx.domManager.removeChild("canvas-overlay","shared-toolbar")}))}toolbarWithSection(t){const i=this.sharedToolbar,n={layout:e=>{if(null!=this.firstLayoutSection&&this.firstLayoutSection!==t&&this.activeSections.has(this.firstLayoutSection))return;this.firstLayoutSection=t;const n=i.getBounds().width;i.setBounds({x:e.x,y:e.y,width:n}),e.shrink({left:n+i.horizontalSpacing})},addToolbarListener:(e,n)=>i.addToolbarListener(e,(e=>{const i=this.getSectionIndex(t,e.button.index);if(i<0)return;const o=l(l({},e),{},{button:this.sectionButtons[t][i]});n(o)})),updateButtons:n=>{this.sectionButtons[t]=n;const o=e.SECTION_ORDER.flatMap((e=>this.sectionButtons[e]));i.updateButtons(o)},updateButtonByIndex:(e,n)=>{i.updateButtonByIndex(this.getIndex(t,e),n)},toggleActiveButtonByIndex:e=>{i.toggleActiveButtonByIndex(this.getIndex(t,e))},toggleButtonEnabledByIndex:(e,n)=>{i.toggleButtonEnabledByIndex(this.getIndex(t,e),n)},setHidden:n=>{n?this.activeSections.delete(t):this.activeSections.add(t);let o=0;for(const s of e.SECTION_ORDER)if(s===t)for(const e of this.sectionButtons[t].keys())i.setButtonHiddenByIndex(o+e,n);else o+=this.sectionButtons[s].length},destroy:()=>{n.setHidden(!0),0===this.activeSections.size&&this.destroy()},clearActiveButton:i.clearActiveButton.bind(i),addListener:i.addListener.bind(i),removeListener:i.removeListener.bind(i)};return n.setHidden(!1),n}getIndex(t,i){let n=0;for(const o of e.SECTION_ORDER){if(o===t)return n+i;n+=this.sectionButtons[o].length}return-1}getSectionIndex(t,i){let n=0;for(const o of e.SECTION_ORDER){if(o===t)return i>=n+this.sectionButtons[t].length?-1:i-n;n+=this.sectionButtons[o].length}return-1}};U4.SECTION_ORDER=["chartToolbar","annotations"];var K4=U4,Y4={type:"context",contextKey:"sharedToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new K4(e)},{CachedTextMeasurerPool:Z4,ZIndexMap:X4,LayoutElement:q4,Validate:Q4,BaseProperties:J4,OBJECT:$4,BOOLEAN:e6,STRING:t6,COLOR_STRING:i6,RATIO:n6,valueProperty:o6,TextUtils:s6,Group:r6,Label:a6,Rect:l6,Text:d6}=mW,c6={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,hlc:184,"high-low":800},h6={up:"positive",down:"negative"},u6={hlc:"altNeutral"},p6=class extends J4{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};dj([Q4(i6)],p6.prototype,"fill",2),dj([Q4(n6)],p6.prototype,"fillOpacity",2);var g6=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new a6,this.positive=new a6,this.negative=new a6,this.neutral=new a6,this.altNeutral=new a6,this.background=new p6,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.layer=new r6({name:"StatusBar",zIndex:X4.STATUS_BAR}),this.labelGroup=this.layer.appendChild(new mW.TranslatableGroup),this.backgroundNode=this.labelGroup.appendChild(new l6),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new d6),value:this.labelGroup.appendChild(new d6),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=e.highlightManager,this.labelGroup.visible=!1,this.destroyFns.push(e.scene.attachNode(this.layer),e.layoutManager.registerElement(q4.Overlay,(e=>this.startPerformLayout(e))),e.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))),e.highlightManager.addListener("highlight-change",(()=>this.updateHighlight())))}async processData(e){if(!this.enabled||null==this.data)return;const t=[];for(const o of this.labels){const{id:e,key:i}=o,n=this[i];null==n?o.domain=void 0:t.push(o6(n,"number",{id:e}))}if(0===t.length)return;const{processedData:i,dataModel:n}=await e.request(this.id,this.data,{props:t});for(const o of this.labels){const{id:e,key:t}=o;null!=this[t]&&(o.domain=n.getDomain(this,e,"value",i))}}startPerformLayout(e){var t;if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return;const{layoutBox:i}=e;this.labelGroup.translationY=i.y+0;const n=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),o=s6.getLineHeight(n),s=null!==(t=c6[this.getChartType()])&&void 0!==t?t:0;let r,a=0,l="alphabetic";if("block"===this.layoutStyle)i.shrink(0+o+8,"top"),r=n+(o-n)/2;else{const{title:e}=this.ctx.chartService;if(l="top",r=0+e.padding,e.enabled){const t=e.node.getBBox();a=t.x+t.width+12}else a=e.padding}for(const{label:d,configuration:c,title:h,value:u,domain:p,formatter:g}of this.labels){if(null==p||0===(s&c)){h.visible=!1,u.visible=!1;continue}const e=Math.max(Z4.measureText(g.format(p[0]),{font:this.positive.getFont(),textBaseline:l,textAlign:"left"}).width,Z4.measureText(g.format(p[1]),{font:this.positive.getFont(),textBaseline:l,textAlign:"left"}).width,Z4.measureText(g.format(p[0]),{font:this.negative.getFont(),textBaseline:l,textAlign:"left"}).width,Z4.measureText(g.format(p[1]),{font:this.negative.getFont(),textBaseline:l,textAlign:"left"}).width);h.visible=!0,u.visible=!0;const t=Z4.measureText(d,{font:this.title.getFont(),textBaseline:l,textAlign:"left"});h.setFont(this.title),h.fill=this.title.color,h.text=d,h.textBaseline=l,h.y=r,h.x=a,a+=t.width+4,u.textBaseline=l,u.y=r,u.x=a,a+=e+12}this.backgroundNode.x=0,this.backgroundNode.y=0,this.backgroundNode.width=a-12,this.backgroundNode.height=o+0+8,this.backgroundNode.fill=this.background.fill,this.backgroundNode.fillOpacity=this.background.fillOpacity}onLayoutComplete(e){this.labelGroup.translationX=e.series.rect.x,this.updateHighlight()}updateHighlight(){var e,t;if(!this.enabled)return;const i=this.highlightManager.getActiveHighlight(),n=null!==(e=null===i||void 0===i?void 0:i.datum)&&void 0!==e?e:null===(t=this.data)||void 0===t?void 0:t.at(-1);if(null==n)return void(this.labelGroup.visible=!1);this.labelGroup.visible=!0;const o=null===i||void 0===i?void 0:i.itemId;let s=null!=o?h6[o]:void 0;null==s&&null!=this.openKey&&null!=this.closeKey&&(s=n[this.openKey]<n[this.closeKey]?"positive":"negative");for(const{domain:l,value:d,key:c,formatter:h,style:u}of this.labels){var r;if(null==l)continue;let e=null!==(r=null!==u&&void 0!==u?u:s)&&void 0!==r?r:"neutral";var a;if("neutral"===e)e=null!==(a=u6[this.getChartType()])&&void 0!==a?a:e;const t=this[c],i=null!=t?null===n||void 0===n?void 0:n[t]:void 0;d.setFont(this[e]),d.fill=this[e].color,d.text="number"===typeof i?h.format(i):""}}getChartType(){var e;let t=null===(e=this.ctx.chartService.publicApi)||void 0===e||null===(e=e.getOptions())||void 0===e?void 0:e.chartType;return null!=t&&null!=c6[t]||(t="candlestick"),t}};dj([Q4(e6)],g6.prototype,"enabled",2),dj([Q4(t6,{optional:!0})],g6.prototype,"openKey",2),dj([Q4(t6,{optional:!0})],g6.prototype,"highKey",2),dj([Q4(t6,{optional:!0})],g6.prototype,"lowKey",2),dj([Q4(t6,{optional:!0})],g6.prototype,"closeKey",2),dj([Q4(t6,{optional:!0})],g6.prototype,"volumeKey",2),dj([Q4($4)],g6.prototype,"title",2),dj([Q4($4)],g6.prototype,"positive",2),dj([Q4($4)],g6.prototype,"negative",2),dj([Q4($4)],g6.prototype,"neutral",2),dj([Q4($4)],g6.prototype,"altNeutral",2),dj([Q4($4)],g6.prototype,"background",2),dj([Q4(t6)],g6.prototype,"layoutStyle",2);var m6={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new g6(e),themeTemplate:{statusBar:{enabled:!1,layoutStyle:mW.ThemeSymbols.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:mW.ThemeSymbols.DEFAULT_LABEL_COLOUR},positive:{color:mW.ThemeSymbols.PALETTE_UP_STROKE},negative:{color:mW.ThemeSymbols.PALETTE_DOWN_STROKE},neutral:{color:mW.ThemeSymbols.PALETTE_NEUTRAL_STROKE},background:{fill:mW.ThemeSymbols.DEFAULT_BACKGROUND_COLOUR,fillOpacity:.5},altNeutral:{color:"gray"}}}},{BOOLEAN:v6,STRING:f6,UNION:y6,BaseProperties:b6,CartesianAxis:C6,ChartUpdateType:x6,isDate:w6,isDefined:S6,isFiniteNumber:M6,unique:D6,ObserveChanges:k6,TooltipManager:I6,Validate:A6,Logger:T6}=mW,E6=class extends b6{constructor(e){super(),this.moduleContext=e,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateSiblings(e){const{syncManager:t}=this.moduleContext;for(const i of t.getGroupSiblings(null!==e&&void 0!==e?e:this.groupId))this.updateChart(i)}updateChart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x6.UPDATE_DATA;e.ctx.updateService.update(t,{skipSync:!0})}enabledZoomSync(){const{syncManager:e,zoomManager:t}=this.moduleContext;this.disableZoomSync=t.addListener("zoom-change",(()=>{for(const i of e.getGroupSiblings(this.groupId)){var t;null!==(t=i.modulesManager.getModule("sync"))&&void 0!==t&&t.zoom&&i.ctx.zoomManager.updateZoom("sync",this.mergeZoom(i))}}))}enabledNodeInteractionSync(){const{highlightManager:e,syncManager:t}=this.moduleContext;this.disableNodeInteractionSync=e.addListener("highlight-change",(e=>{for(const g of t.getGroupSiblings(this.groupId)){var i,n;if(null!==(i=g.modulesManager.getModule("sync"))&&void 0!==i&&i.nodeInteraction)if(null!==(n=e.currentHighlight)&&void 0!==n&&n.datum)for(const t of g.axes){var o;const i="xy"===this.axes?"x":this.axes;if(!C6.is(t)||t.direction!==i)continue;const n=g.series.map((i=>{const n=i.getKeys(t.direction);if(t.keys.length&&!t.keys.some((e=>n.includes(e))))return;const{nodeData:o}=i.contextNodeData;if(null===o||void 0===o||!o.length)return;const s=o[0]["".concat(t.direction,"Key")];let r=e.currentHighlight.datum[s];const a=w6(r);a&&(r=r.getTime());const l=o.find((e=>{const t=e.datum[s];return a?t.getTime()===r:t===r}));return l?{series:i,nodeDatum:l}:null})).filter(S6);if(n.length<2&&(null===(o=n[0])||void 0===o?void 0:o.nodeDatum)!==g.ctx.highlightManager.getActiveHighlight()){var s;const{series:e,nodeDatum:t}=null!==(s=n[0])&&void 0!==s?s:{};if(g.ctx.highlightManager.updateHighlight(g.id,t),t){var r,a,l,d,c,h,u,p;const i=null!==(r=null!==(a=null===(l=t.midPoint)||void 0===l?void 0:l.x)&&void 0!==a?a:null===(d=t.point)||void 0===d?void 0:d.x)&&void 0!==r?r:0,n=null!==(c=null!==(h=null===(u=t.midPoint)||void 0===u?void 0:u.y)&&void 0!==h?h:null===(p=t.point)||void 0===p?void 0:p.y)&&void 0!==c?c:0,o=I6.makeTooltipMeta({type:"hover",canvasX:i,canvasY:n},t);delete o.lastPointerEvent,g.ctx.tooltipManager.updateTooltip(g.id,o,e.getTooltipContent(t))}else g.ctx.tooltipManager.removeTooltip(g.id);this.updateChart(g,x6.SERIES_UPDATE)}}else g.ctx.highlightManager.updateHighlight(g.id),g.ctx.tooltipManager.removeTooltip(g.id)}}))}getSyncedDomain(e){if(!C6.is(e)||"xy"!==this.axes&&this.axes!==e.direction)return;const{syncManager:t}=this.moduleContext,i=t.getGroup(this.groupId),[{axes:n}]=i,{direction:o,min:s,max:r,nice:a,reverse:l}=e;for(const d of n)if(o===d.direction&&(a!==d.nice||l!==d.reverse||s!==d.min&&(M6(s)||M6(d.min))||r!==d.max&&(M6(r)||M6(d.max))))return T6.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),void(this.enabled=!1);return D6(i.flatMap((e=>e.series)).filter((t=>{if(t.visible){const i=t.getKeys(e.direction);return!e.keys.length||e.keys.some((e=>i.includes(e)))}})).flatMap((t=>t.getDomain(e.direction))))}mergeZoom(e){var t,i;const{zoomManager:n}=this.moduleContext;if("xy"===this.axes)return n.getZoom();const o=null!==(t=e.ctx.zoomManager.getZoom())&&void 0!==t?t:{};return o[this.axes]=null===(i=n.getZoom())||void 0===i?void 0:i[this.axes],o}onEnabledChange(){const{syncManager:e}=this.moduleContext;this.enabled?e.subscribe(this.groupId):e.unsubscribe(this.groupId),this.updateSiblings(),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(e,t){if(!this.enabled||e===t)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(t),i.subscribe(e),this.updateSiblings(t),this.updateSiblings(e)}onAxesChange(){if(!this.enabled)return;const{syncManager:e}=this.moduleContext;this.updateChart(e.getChart())}onNodeInteractionChange(){var e;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():null===(e=this.disableNodeInteractionSync)||void 0===e||e.call(this)}onZoomChange(){var e;this.enabled&&this.zoom?this.enabledZoomSync():null===(e=this.disableZoomSync)||void 0===e||e.call(this)}destroy(){var e;const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(),null===(e=this.disableZoomSync)||void 0===e||e.call(this)}};E6.className="Sync",dj([A6(v6),k6((e=>e.onEnabledChange()))],E6.prototype,"enabled",2),dj([A6(f6,{optional:!0}),k6(((e,t,i)=>e.onGroupIdChange(t,i)))],E6.prototype,"groupId",2),dj([A6(y6(["x","y","xy"],"an axis")),k6((e=>e.onAxesChange()))],E6.prototype,"axes",2),dj([A6(v6),k6((e=>e.onNodeInteractionChange()))],E6.prototype,"nodeInteraction",2),dj([A6(v6),k6((e=>e.onZoomChange()))],E6.prototype,"zoom",2);var R6={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new E6(e),themeTemplate:{sync:{enabled:!1}}},{COLOR_STRING:L6,RATIO:P6,Validate:N6}=mW,F6=class extends mW.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};F6.className="ZoomRect",dj([N6(L6)],F6.prototype,"fill",2),dj([N6(P6)],F6.prototype,"fillOpacity",2);var{clamp:O6,isNumberEqual:B6,round:G6}=mW,z6={min:0,max:1},_6="end",V6="middle",H6=function(e){return O6(arguments.length>1&&void 0!==arguments[1]?arguments[1]:z6.min,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:z6.max)};function W6(){return{x:l({},z6),y:l({},z6)}}function j6(e){return e.x.max-e.x.min}function U6(e){return e.y.max-e.y.min}function K6(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return B6(e.min,t.min,i)&&B6(e.max,t.max,i)}function Y6(e,t,i){return K6(e.x,t.x,i)&&K6(e.y,t.y,i)}function Z6(e,t,i){const n=G6(j6(e),10)<=t,o=G6(U6(e),10)<=i;return n||o}function X6(e){var t,i,n,o,s,r,a,l;return{x:{min:null!==(t=null===e||void 0===e||null===(i=e.x)||void 0===i?void 0:i.min)&&void 0!==t?t:z6.min,max:null!==(n=null===e||void 0===e||null===(o=e.x)||void 0===o?void 0:o.max)&&void 0!==n?n:z6.max},y:{min:null!==(s=null===e||void 0===e||null===(r=e.y)||void 0===r?void 0:r.min)&&void 0!==s?s:z6.min,max:null!==(a=null===e||void 0===e||null===(l=e.y)||void 0===l?void 0:l.max)&&void 0!==a?a:z6.max}}}function q6(e,t,i){if(!e)return{x:0,y:0};const n=H6(t-e.x,0,e.x+e.width),o=H6(i-e.y,0,e.y+e.height),s=1/e.width*n,r=1-1/e.height*o;return{x:H6(s),y:H6(r)}}function Q6(e,t,i){return{x:{min:e.x.min+t,max:e.x.max+t},y:{min:e.y.min+i,max:e.y.max+i}}}function J6(e,t,i){return{x:{min:e.x.min,max:e.x.min+j6(e)*t},y:{min:e.y.min,max:e.y.min+U6(e)*i}}}function $6(e,t,i){const n=j6(e),o=U6(e),s=e.x.min+n/2,r=e.y.min+o/2;return{x:{min:s-n*t/2,max:s+n*t/2},y:{min:r-o*i/2,max:r+o*i/2}}}function e5(e,t,i,n){const{min:o,max:s}=t,r=o+(s-o)/2,a=e.max-e.min;switch(i){case"start":return{min:o,max:t.min+a};case"end":return{min:t.max-a,max:s};case"middle":return{min:r-a/2,max:r+a/2};case"pointer":return t5(e,t,null!==n&&void 0!==n?n:r);default:return{min:o,max:s}}}function t5(e,t,i){const n=e.max-e.min,o=i-i*(1-(t.max-t.min-n));return{min:e.min+o,max:e.max+o}}function i5(e){const t=W6();return t.x=n5(e.x),t.y=n5(e.y),t}function n5(e){const t=e.max-e.min;let i=e.max>z6.max?z6.max-t:e.min,n=e.min<z6.min?t:e.max;return i=Math.max(z6.min,i),n=Math.min(z6.max,n),{min:i,max:n}}function o5(e,t,i){let{min:n,max:o}=e;if(o===t.max)n=o-i;else if(n===t.min)o=n+i;else{const e=n+(o-n)/2;n=e-i/2,o=e+i/2}return{min:n,max:o}}var s5=class{update(e,t,i,n,o,s){var r;return null!==(r=this.oldZoom)&&void 0!==r||(this.oldZoom=X6(t===mW.ChartAxisDirection.X?l(l({},o),{},{x:s}):l(l({},o),{},{y:s}))),this.updateCoords(e.regionX,e.regionY),this.updateZoom(t,i,n)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(e,t){this.coords?(this.coords.x2=e,this.coords.y2=t):this.coords={x1:e,y1:t,x2:e,y2:t}}updateZoom(e,t,i){const{coords:n,oldZoom:o}=this;let s=X6(o);if(!n||!o)return e===mW.ChartAxisDirection.X?s.x:s.y;const r=q6(i,n.x1,n.y1),a=q6(i,n.x2,n.y2);if(e===mW.ChartAxisDirection.X){const e=(a.x-r.x)*j6(o);return s.x.max+=e,s.x=e5(s.x,o.x,t,r.x),s=i5(s),s.x}const l=(a.y-r.y)*U6(o);return s.y.max-=l,s.y=e5(s.y,o.y,t,r.y),s=i5(s),s.y}},r5="zoom-action",a5="pan-action",l5=class{constructor(e,t,i,n,o){this.contextMenuRegistry=e,this.zoomManager=t,this.getModuleProperties=i,this.getRect=n,this.updateZoom=o}registerActions(e,t){if(!e)return;const{contextMenuRegistry:i}=this,n=i.registerDefaultAction({id:r5,type:"series-area",label:"contextMenuZoomToCursor",action:this.onZoomToHere.bind(this)}),o=i.registerDefaultAction({id:a5,type:"series-area",label:"contextMenuPanToCursor",action:this.onPanToHere.bind(this)});return this.toggleActions(t),()=>{n(),o()}}toggleActions(e){const{contextMenuRegistry:t}=this,{minRatioX:i,minRatioY:n}=this.getModuleProperties();Z6(e,i,n)?t.disableAction(r5):t.enableAction(r5),Y6(e,W6())?t.disableAction(a5):t.enableAction(a5)}computeOrigin(e){const t=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!t||null===e||void 0===e||!e.target||!(e instanceof MouseEvent))return;return q6({x:0,y:0,width:t.width,height:t.height},e.offsetX,e.offsetY)}onZoomToHere(e){let{event:t}=e;const i=this.computeOrigin(t);if(!i)return;const{isScalingX:n,isScalingY:o,minRatioX:s,minRatioY:r}=this.getModuleProperties(),a=X6(this.zoomManager.getZoom()),l=i.x*j6(a),d=i.y*U6(a),c=z6.max-z6.min,h=c/2;let u={x:{min:i.x-h,max:i.x+h},y:{min:i.y-h,max:i.y+h}};u=$6(u,n?s:c,o?r:c),u=Q6(u,a.x.min-i.x+l,a.y.min-i.y+d),this.updateZoom(i5(u))}onPanToHere(e){let{event:t}=e;const i=this.computeOrigin(t);if(!i)return;const n=X6(this.zoomManager.getZoom()),o=j6(n),s=U6(n),r=i.x*o,a=i.y*s,l=(z6.max-z6.min)/2;let d={x:{min:i.x-l,max:i.x+l},y:{min:i.y-l,max:i.y+l}};d=$6(d,o,s),d=Q6(d,n.x.min-i.x+r,n.y.min-i.y+a),this.updateZoom(i5(d))}},{BBoxValues:d5}=mW,c5=class{constructor(e){this.axesHandlers=e,this.axes=[]}initAxis(e,t,i,n){const{X:o,Y:s}=mW.ChartAxisDirection,r={[o]:"ew-resize",[s]:"ns-resize"}[n],a=e.proxyInteractionService.createProxyElement({type:"region",domManagerId:t,where:"afterend"});return a.setCursor(r),a.addListener("drag-start",(()=>i.onDragStart(t,n))),a.addListener("drag-move",(e=>i.onDrag(e))),a.addListener("drag-end",i.onDragEnd),a.addListener("dblclick",(()=>i.onDoubleClick(t,n))),{axisId:t,div:a}}destroy(){this.axes.forEach((e=>e.div.destroy()))}update(e){const{X:t,Y:i}=mW.ChartAxisDirection,n=[...e.axisManager.getAxisContext(t),...e.axisManager.getAxisContext(i)],{removed:o,added:s}=this.diffAxisIds(n);o.length>0&&(this.axes=this.axes.filter((e=>!o.includes(e.axisId)||(e.div.destroy(),!1))));for(const r of s){const{axisId:t,direction:i}=r;this.axes.push(this.initAxis(e,t,this.axesHandlers,i))}for(const r of this.axes){const e=n.filter((e=>e.axisId===r.axisId))[0].getCanvasBounds();r.div.setHidden(d5.isEmpty(e)),void 0!==e&&r.div.setBounds(e)}}diffAxisIds(e){const t=this.axes.map((e=>e.axisId)),i=e.map((e=>e.axisId));return{removed:t.filter((e=>!i.includes(e))),added:e.filter((e=>!t.includes(e.axisId)))}}},h5={off:1,short:.01,long:.002},u5=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){var e;const{deceleration:t}=this;return Math.max("number"===typeof t?t:null!==(e=h5[t])&&void 0!==e?e:1,1e-4)}addListener(e,t){return this.onUpdate=t,()=>{this.onUpdate=void 0}}stopInteractions(){null!=this.inertiaHandle&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(e){var t,i;this.updateCoords(e.regionX,e.regionY);const{x1:n=0,y1:o=0,x2:s=0,y2:r=0}=null!==(t=this.coords)&&void 0!==t?t:{};null===(i=this.onUpdate)||void 0===i||i.call(this,{type:"update",deltaX:n-s,deltaY:o-r})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:e}=this;let t=0,i=0,n=0;if(e.length>0){const o=this.zoomCoordsHistoryIndex%16;let s=o-1;s<0&&(s=e.length-1);let r=o;r>=e.length&&(r=0);const a=e[s],l=e[r];t=a.x-l.x,i=a.y-l.y,n=a.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,n>0&&this.decelerationValue<1){const e=t/n,o=i/n,s=Math.hypot(e,o),r=Math.atan2(o,e),a=performance.now();this.inertiaHandle=mW.getWindow().requestAnimationFrame((e=>{this.animateInertia(e,e,a,s,r)}))}}recordCurrentZoomCoords(){const{coords:e,coordsHistory:t,zoomCoordsHistoryIndex:i}=this;if(!e)return;const{x2:n,y2:o}=e,s=Date.now();t[i%16]={x:n,y:o,t:s},this.zoomCoordsHistoryIndex+=1}animateInertia(e,t,i,n,o){var s;const r=1-this.decelerationValue,a=-n/Math.log(r),l=n*(r**(t-i)-1)/Math.log(r),d=n*(r**(e-i)-1)/Math.log(r);null===(s=this.onUpdate)||void 0===s||s.call(this,{type:"update",deltaX:-Math.cos(o)*(d-l),deltaY:-Math.sin(o)*(d-l)}),d>=a-1||(this.inertiaHandle=requestAnimationFrame((t=>{this.animateInertia(t,e,i,n,o)})))}updateCoords(e,t){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:e,y2:t}:this.coords={x1:e,y1:t,x2:e,y2:t}}translateZooms(e,t,i,n){const o=q6(e,e.x+Math.abs(i),e.y+e.height-Math.abs(n)),s=Math.sign(i)*o.x,r=-Math.sign(n)*o.y,a={};for(const[l,{direction:d,zoom:c}]of Object.entries(t)){if(c&&c.min===z6.min&&c.max===z6.max)continue;let e=X6({[d]:c});e=i5(Q6(e,s*j6(e),r*U6(e))),a[l]={direction:d,zoom:e[d]}}return a}},p5=class{update(e,t,i,n){const o=e.deltaX*t*200;return this.translateZooms(i,n,o)}translateZooms(e,t,i){const n={},o=q6(e,e.x+Math.abs(i),0),s=i<0?-o.x:o.x;for(const[r,{direction:a,zoom:l}]of Object.entries(t)){if(a!==mW.ChartAxisDirection.X)continue;let e=X6({x:l});e=i5(Q6(e,s*j6(e),0)),n[r]={direction:a,zoom:e.x}}return n}},g5=class{updateAxes(e,t,i,n){var o,s;const r=e.sourceEvent,a={},{anchorPointX:d,anchorPointY:c,isScalingX:h,isScalingY:u,scrollingStep:p}=t,g=q6(i,null!==(o=r.offsetX)&&void 0!==o?o:r.clientX,null!==(s=r.offsetY)&&void 0!==s?s:r.clientY);for(const[m,{direction:v,zoom:f}]of Object.entries(n)){if(null==f)continue;let t=l({},f);const i=p*e.deltaY*(f.max-f.min);if(v===mW.ChartAxisDirection.X&&h)t.max+=i,t=e5(t,f,d,g.x);else{if(v!==mW.ChartAxisDirection.Y||!u)continue;t.max+=i,t=e5(t,f,c,g.y)}a[m]={direction:v,zoom:n5(t)}}return a}update(e,t,i,n){const{anchorPointX:o,anchorPointY:s,isScalingX:r,isScalingY:a,scrollingStep:l}=t,d=q6(i,e.canvasX,e.canvasY),c=e.deltaY;let h=X6(n);return h.x.max+=r?l*c*j6(n):0,h.y.max+=a?l*c*U6(n):0,r&&(h.x=e5(h.x,n.x,o,d.x)),a&&(h.y=e5(h.y,n.y,s,d.y)),h=i5(h),h}updateDelta(e,t,i){const{anchorPointX:n,anchorPointY:o,isScalingX:s,isScalingY:r,scrollingStep:a}=t;let l=X6(i);return l.x.max+=s?a*-e*j6(i):0,l.y.max+=r?a*-e*U6(i):0,s&&(l.x=e5(l.x,i.x,n)),r&&(l.y=e5(l.y,i.y,o)),l=i5(l),l}},m5=class{constructor(e){this.rect=e,this.rect.visible=!1}update(e,t,i,n){this.rect.visible=!0,this.updateCoords(e.canvasX,e.canvasY,t,i,n),this.updateRect(i)}stop(e,t,i){let n=X6();if(!e||!t)return n;this.coords&&(n=this.createZoomFromCoords(t,i));return n=i5(function(e,t,i){return{x:{min:e.x.min*t,max:e.x.max*t},y:{min:e.y.min*i,max:e.y.max*i}}}(n,t.width/e.width,t.height/e.height)),this.reset(),n}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible&&this.rect.width>0&&this.rect.height>0}updateCoords(e,t,i,n,o){if(!this.coords)return void(this.coords={x1:e,y1:t,x2:e,y2:t});const{coords:s}=this;if(s.x2=e,s.y2=t,!n)return;const{isScalingX:r,isScalingY:a,keepAspectRatio:l,minRatioX:d,minRatioY:c}=i,h=X6(o),u=this.getNormalisedDimensions(),p=d/(h.x.max-h.x.min),g=c/(h.y.max-h.y.min);if(r&&u.width/n.width<p&&(s.x2<s.x1?s.x2=s.x1-n.width*p:s.x2=s.x1+n.width*p),l&&r&&a){const e=n.width/n.height;s.y2<s.y1?s.y2=Math.min(s.y1-u.width/e,s.y1-n.height*g):s.y2=Math.max(s.y1+u.width/e,s.y1+n.height*g)}else a&&u.height/n.height<g&&(s.y2<s.y1?s.y2=s.y1-n.height*g:s.y2=s.y1+n.height*g);r||(s.x1=n.x,s.x2=n.x+n.width),a||(s.y1=n.y,s.y2=n.y+n.height)}updateRect(e){if(!e)return;const{rect:t}=this,i=this.getNormalisedDimensions(),{width:n,height:o}=i;let{x:s,y:r}=i;s=Math.max(s,e.x),s-=Math.max(0,s+n-(e.x+e.width)),r=Math.max(r,e.y),r-=Math.max(0,r+o-(e.y+e.height)),t.x=s,t.y=r,t.width=n,t.height=o}createZoomFromCoords(e,t){const i=X6(t),n=this.getNormalisedDimensions(),o=q6(e,n.x,n.y+n.height);let s=J6(i,n.width/e.width,n.height/e.height);return s=Q6(s,o.x*j6(i),o.y*U6(i)),s=i5(s),s}getNormalisedDimensions(){var e;const{x1:t=0,y1:i=0,x2:n=0,y2:o=0}=null!==(e=this.coords)&&void 0!==e?e:{};return{x:t<=n?t:n,y:i<=o?i:o,width:t<=n?n-t:t-n,height:i<=o?o-i:i-o}}},{ARRAY:v5,BOOLEAN:f5,STRING:y5,UNION:b5,ActionOnSet:C5,BaseProperties:x5,ChartAxisDirection:w5,InteractionState:S5,NativeWidget:M5,PropertiesArray:D5,Toolbar:k5,ToolbarButtonProperties:I5,Validate:A5,createElement:T5}=mW,E5=class extends I5{};dj([A5(b5(["reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"]))],E5.prototype,"value",2),dj([A5(y5)],E5.prototype,"section",2);var R5=class extends x5{constructor(e,t,i,n,o,s){super(),this.ctx=e,this.getModuleProperties=t,this.getResetZoom=i,this.updateZoom=n,this.updateAxisZoom=o,this.resetZoom=s,this.enabled=!1,this.buttons=new D5(E5),this.verticalSpacing=10,this.detectionRange=38,this.destroyFns=[],this.container=new M5(T5("div")),this.container.addClass("ag-charts-zoom-buttons"),e.domManager.addChild("canvas-overlay","zoom-buttons",this.container.getElement()),this.toolbar=new k5(e.localeManager),this.container.addChild(this.toolbar),this.toggleVisibility(!1),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("button-focused",this.onButtonFocus.bind(this)),e.interactionManager.addListener("hover",this.onHover.bind(this),S5.All),e.interactionManager.addListener("leave",this.onLeave.bind(this),S5.All),e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),this.teardown.bind(this))}destroy(){for(const e of this.destroyFns)e()}teardown(){this.ctx.domManager.removeChild("canvas-overlay","zoom-buttons"),this.container.destroy()}onLayoutComplete(e){const{buttons:t,container:i}=this,{rect:n}=e.series;this.toolbar.updateButtons(t),this.toggleButtons();const o=i.getBounds().height;i.setBounds({y:n.y+n.height-o})}onHover(e){if(!this.enabled||this.toolbar.isHidden())return;const{container:t,detectionRange:i,ctx:{scene:n}}=this,{offsetY:o,sourceEvent:{target:s}}=e,r=t.getElement(),a=o>r.offsetTop-i&&o<n.canvas.element.offsetHeight||s===r;this.toggleVisibility(a)}onLeave(){this.toggleVisibility(!1)}toggleVisibility(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{container:i,toolbar:n,verticalSpacing:o}=this;n.toggleClass("ag-charts-zoom-buttons__toolbar--hidden",!e);const s=n.getElement();s.style.transitionDuration=t?"0s":"",s.style.transform=e?"translateY(0)":"translateY(".concat(i.getBounds().height+o,"px)")}toggleButtons(){const e=X6(this.ctx.zoomManager.getZoom()),{minRatioX:t,minRatioY:i}=this.getModuleProperties();for(const[n,o]of this.buttons.entries()){let s=!0;switch(null===o||void 0===o?void 0:o.value){case"pan-start":case"pan-left":s=e.x.min>z6.min;break;case"pan-end":case"pan-right":s=e.x.max<z6.max;break;case"zoom-out":s=!Y6(e,W6());break;case"zoom-in":s=!Z6(e,t,i);break;case"reset":s=!Y6(e,this.getResetZoom())}this.toolbar.toggleButtonEnabledByIndex(n,s)}}onButtonPress(e){let{button:t}=e;if(!this.enabled||this.toolbar.isHidden())return;const i=this.getModuleProperties();if(i.independentAxes&&"reset"!==t.value){const e=this.ctx.zoomManager.getAxisZooms();for(const[n,{direction:o,zoom:s}]of Object.entries(e))null!=s&&this.onButtonPressAxis(t,i,n,o,s)}else this.onButtonPressUnified(t,i)}onButtonFocus(e){this.toggleVisibility(!0,!0)}onButtonPressAxis(e,t,i,n,o){const{anchorPointX:s,anchorPointY:r,isScalingX:a,isScalingY:d,scrollingStep:c}=t;let h=l({},o);const u=o.max-o.min;switch(e.value){case"pan-start":h.max=u,h.min=0;break;case"pan-end":h.min=h.max-u,h.max=z6.max;break;case"pan-left":h.min-=u*c,h.max-=u*c;break;case"pan-right":h.min+=u*c,h.max+=u*c;break;case"zoom-in":case"zoom-out":{const t=n===w5.X,i=t&&a||!t&&d;let l="zoom-in"===e.value?1-c:1+c;i||(l=1);const u=t?"pointer"===s?_6:s:"pointer"===r?V6:r;h.max=h.min+(h.max-h.min)*l,h=e5(h,o,u);break}}this.updateAxisZoom(i,n,n5(h))}onButtonPressUnified(e,t){const{anchorPointX:i,anchorPointY:n,isScalingX:o,isScalingY:s,scrollingStep:r}=t,a=X6(this.ctx.zoomManager.getZoom());let l=X6(a);switch(e.value){case"reset":return void this.resetZoom();case"pan-start":l.x.max=j6(l),l.x.min=0;break;case"pan-end":l.x.min=z6.max-j6(l),l.x.max=z6.max;break;case"pan-left":l=Q6(l,-j6(l)*r,0);break;case"pan-right":l=Q6(l,j6(l)*r,0);break;case"zoom-in":case"zoom-out":{const t="zoom-in"===e.value?1-r:1+r,d="pointer"===i?_6:i,c="pointer"===n?V6:n;l=J6(l,o?t:1,s?t:1),l.x=e5(l.x,a.x,d),l.y=e5(l.y,a.y,c);break}}this.updateZoom(i5(l))}};dj([A5(f5),C5({changeValue(e){var t;null===(t=this.toolbar)||void 0===t||t.setHidden(!e)}})],R5.prototype,"enabled",2),dj([A5(v5)],R5.prototype,"buttons",2);var{BOOLEAN:L5,NUMBER:P5,RATIO:N5,UNION:F5,OBJECT:O5,OR:B5,ActionOnSet:G5,ChartAxisDirection:z5,ChartUpdateType:_5,Validate:V5,ProxyProperty:H5,round:W5}=mW,j5=e=>W5(e,10),U5=F5(["pointer","start","middle","end"],"an anchor cord"),K5="zoom-cursor",Y5="zoom-tooltip",Z5=class extends mW.BaseProperties{constructor(e){super(),this.onChange=e,this.enabled=!1,this.padding=0}};dj([V5(L5),G5({changeValue(e){this.onChange({enabled:e,padding:this.padding})}})],Z5.prototype,"enabled",2),dj([V5(N5),G5({changeValue(e){this.onChange({enabled:this.enabled,padding:e})}})],Z5.prototype,"padding",2);var X5=class extends mW.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.enableAxisDragging=!0,this.buttons=new R5(this.ctx,this.getModuleProperties.bind(this),this.getResetZoom.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this),this.resetZoom.bind(this)),this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(z6.max-z6.min)/10,this.keepAspectRatio=!1,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX=_6,this.anchorPointY=V6,this.autoScaling=new Z5((e=>{this.ctx.zoomManager.setAutoScaleYAxis(e.enabled,e.padding)})),this.axisDragger=new s5,this.panner=new u5,this.scroller=new g5,this.scrollPanner=new p5,this.deceleration="short",this.dragState=0,this.minRatioX=0,this.minRatioY=0,this.destroyContextMenuActions=void 0,this.isFirstWheelEvent=!0,this.debouncedWheelReset=mW.debounce((()=>{this.isFirstWheelEvent=!0}),100),this._didAutoZoomOnMount=!1;const t=new F6;this.selector=new m5(t),this.contextMenu=new l5(e.contextMenuRegistry,e.zoomManager,this.getModuleProperties.bind(this),(()=>this.paddedRect),this.updateZoom.bind(this));const{Default:i,ZoomDrag:n,Animation:o,Annotations:s,AnnotationsSelected:r}=mW.InteractionState,a=i|o|n,l=i|o,d=a|s|r,c=e.regionManager.getRegion("series");this.domProxy=new c5({onDragStart:(e,t)=>this.onAxisDragStart(e,t),onDrag:e=>this.onDrag({regionX:e.offsetX,regionY:e.offsetY,canvasX:NaN,canvasY:NaN}),onDragEnd:()=>this.onDragEnd(),onDoubleClick:(e,t)=>{this.hoveredAxis={id:e,direction:t},this.onDoubleClick(),this.hoveredAxis=void 0}});this.destroyFns.push(e.scene.attachNode(t),e.keyNavManager.addListener("nav-zoom",(e=>this.onNavZoom(e))),c.addListener("dblclick",(e=>this.onDoubleClick(e)),l),c.addListener("drag",(e=>this.onDrag(e)),a),c.addListener("drag-start",(e=>this.onDragStart(e)),a),c.addListener("drag-end",(()=>this.onDragEnd()),a),c.addListener("wheel",(e=>this.onWheel(e)),d),e.gestureDetector.addListener("pinch-move",(e=>this.onPinchMove(e))),e.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))),e.updateService.addListener("update-complete",(e=>this.onUpdateComplete(e))),e.zoomManager.addListener("zoom-change",(e=>this.onZoomChange(e))),e.zoomManager.addListener("zoom-pan-start",(e=>this.onZoomPanStart(e))),this.panner.addListener("update",(e=>this.onPanUpdate(e))),(()=>this.teardown()))}teardown(){var e;this.ctx.zoomManager.setZoomModuleEnabled(!1),this.buttons.destroy(),null===(e=this.destroyContextMenuActions)||void 0===e||e.call(this)}onEnabledChange(e){this.ctx.zoomManager.setZoomModuleEnabled(e);const t=this.getZoom();var i;this.contextMenu&&(null===(i=this.destroyContextMenuActions)||void 0===i||i.call(this),this.destroyContextMenuActions=this.contextMenu.registerActions(e,t))}onDoubleClick(e){const{enabled:t,enableDoubleClickToReset:i,hoveredAxis:n,ctx:{zoomManager:o}}=this;t&&i&&(n?o.resetAxisZoom("zoom",n.id):null!==e&&void 0!==e&&e.preventZoomDblClick||this.resetZoom())}onDragStart(e){const{enabled:t,enableAxisDragging:i,enablePanning:n,enableSelecting:o,hoveredAxis:s,ctx:{cursorManager:r,zoomManager:a}}=this;if(!t)return;this.panner.stopInteractions();let l=0;if(i&&s)l=1;else if(null!=e){const t=this.isPanningKeyPressed(e.sourceEvent);if(!n||o&&!t){if(o){this.isMinZoom(this.getZoom())||t||(l=3)}}else r.updateCursor(K5,"grabbing"),l=2,this.panner.start()}0!==(this.dragState=l)&&a.fireZoomPanStartEvent("zoom")}onDrag(e){const{anchorPointX:t,anchorPointY:i,axisDragger:n,dragState:o,enabled:s,paddedRect:r,panner:a,selector:l,seriesRect:d,hoveredAxis:c,ctx:{interactionManager:h,tooltipManager:u,updateService:p,zoomManager:g}}=this;if(!s||!r||!d)return;h.pushState(mW.InteractionState.ZoomDrag);const m=this.getZoom();switch(o){case 1:{if(!c)break;const{id:o,direction:s}=c,r=s===mW.ChartAxisDirection.X?t:i,a=g.getAxisZoom(o),l=n.update(e,s,r,d,m,a);g.setAxisManuallyAdjusted("zoom",o),this.updateAxisZoom(o,s,l);break}case 2:a.update(e);break;case 3:l.update(e,this.getModuleProperties(),r,m);break;case 0:return}u.updateTooltip(Y5),p.update(_5.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){const{axisDragger:e,dragState:t,enabled:i,panner:n,selector:o,ctx:{cursorManager:s,interactionManager:r,tooltipManager:a}}=this;if(r.popState(mW.InteractionState.ZoomDrag),i&&0!==t){switch(t){case 1:this.hoveredAxis=void 0,e.stop();break;case 2:n.stop();break;case 3:{if(!o.didUpdate())break;const e=this.getZoom();if(this.isMinZoom(e))break;const t=o.stop(this.seriesRect,this.paddedRect,e);this.updateZoom(t);break}}this.dragState=0,s.updateCursor(K5),a.removeTooltip(Y5)}}onNavZoom(e){const{enabled:t,enableScrolling:i,scroller:n}=this;t&&i&&(e.preventDefault(),this.updateZoom(n.updateDelta(e.delta,this.getModuleProperties(),this.getZoom())))}onWheel(e){const{enabled:t,enablePanning:i,enableScrolling:n,paddedRect:o}=this;if(!t||!n||!o)return;const s=e.sourceEvent,{deltaX:r,deltaY:a}=s,l=null!=r&&null!=a&&Math.abs(r)>Math.abs(a);i&&l?this.onWheelPanning(e):this.onWheelScrolling(e)}onWheelPanning(e){const{scrollingStep:t,scrollPanner:i,seriesRect:n,ctx:{zoomManager:o}}=this;if(!n)return;e.preventDefault();const s=i.update(e,t,n,o.getAxisZooms());for(const[r,{direction:a,zoom:l}]of Object.entries(s))this.updateAxisZoom(r,a,l)}onWheelScrolling(e){const{enableAxisDragging:t,enableIndependentAxes:i,hoveredAxis:n,scroller:o,seriesRect:s,ctx:{zoomManager:r}}=this;if(!s)return;const a=this.getZoom(),l=this.isMaxZoom(a)&&e.deltaY>0||this.isMinZoom(a)&&e.deltaY<0;this.isFirstWheelEvent&&l||e.preventDefault(),this.isFirstWheelEvent=!1,this.debouncedWheelReset();const d=t&&null!=n;let c=this.isScalingX(),h=this.isScalingY();d&&(c=n.direction===mW.ChartAxisDirection.X,h=!c);const u=this.getModuleProperties({isScalingX:c,isScalingY:h});if(!0===i){const t=o.updateAxes(e,u,s,r.getAxisZooms());for(const[e,{direction:i,zoom:o}]of Object.entries(t))d&&n.id!==e||this.updateAxisZoom(e,i,o)}else{const t=o.update(e,u,s,this.getZoom());this.updateUnifiedZoom(t)}}onAxisDragStart(e,t){this.hoveredAxis={id:e,direction:t},this.onDragStart(void 0)}onPinchMove(e){const{enabled:t,enableScrolling:i,paddedRect:n,seriesRect:o}=this;if(!t||!i||!n||!o)return;const s=this.getZoom(),r=X6(s),a=-.01*e.deltaDistance,l=q6(o,e.origin.x,e.origin.y);this.isScalingX()&&(r.x.max+=a*j6(s),r.x=t5(r.x,s.x,l.x)),this.isScalingY()&&(r.y.max+=a*(s.y.max-s.y.min),r.y=t5(r.y,s.y,l.y)),this.updateZoom(i5(r)),e.preventDefault()}onLayoutComplete(e){this.domProxy.update(this.ctx);const{enabled:t}=this;if(!t)return;const{series:{rect:i,paddedRect:n,shouldFlipXY:o}}=e;this.seriesRect=i,this.paddedRect=n,this.shouldFlipXY=o,this._didAutoZoomOnMount=!0}onUpdateComplete(e){const{minRect:t,minVisibleRect:i}=e,{enabled:n,minVisibleItemsX:o,minVisibleItemsY:s,paddedRect:r,shouldFlipXY:a}=this;if(!n||!r||!t||!i)return;const l=this.getZoom(),d=a?s:o,c=a?o:s,h=i.width*d/r.width,u=i.height*c/r.height,p=j5(h*j6(l)),g=j5(u*U6(l));this.isScalingX()&&(this.minRatioX=Math.min(1,p)),this.isScalingY()&&(this.minRatioY=Math.min(1,g)),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onZoomChange(e){"zoom"!==e.callerId&&this.panner.stopInteractions();const t=this.getZoom();this.contextMenu.toggleActions(t)}onZoomPanStart(e){"zoom"===e.callerId&&this.panner.stopInteractions()}onPanUpdate(e){const{panner:t,seriesRect:i,ctx:{tooltipManager:n,zoomManager:o}}=this;if(!i)return;const s=t.translateZooms(i,o.getAxisZooms(),e.deltaX,e.deltaY);for(const[r,{direction:a,zoom:l}]of Object.entries(s))this.updateAxisZoom(r,a,l);n.updateTooltip(Y5)}isPanningKeyPressed(e){switch(this.panKey){case"alt":return e.altKey;case"ctrl":return e.ctrlKey;case"shift":return e.shiftKey;case"meta":return e.metaKey}}isScalingX(){return"xy"===this.axes||(this.shouldFlipXY?"y"===this.axes:"x"===this.axes)}isScalingY(){return"xy"===this.axes||(this.shouldFlipXY?"x"===this.axes:"y"===this.axes)}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(e){return Z6(e,this.minRatioX,this.minRatioY)}isMaxZoom(e){const t=z6.max-z6.min;return j6(e)===t&&U6(e)===t}updateZoom(e){this.enableIndependentAxes?this.updatePrimaryAxisZooms(e):this.updateUnifiedZoom(e)}resetZoom(){this.ctx.zoomManager.resetZoom("zoom")}updatePrimaryAxisZoom(e,t){this.ctx.zoomManager.updatePrimaryAxisZoom("zoom",t,e[t])}updatePrimaryAxisZooms(e){this.updatePrimaryAxisZoom(e,z5.X),this.updatePrimaryAxisZoom(e,z5.Y)}updateUnifiedZoom(e){const{minRatioX:t,minRatioY:i,ctx:{zoomManager:n}}=this,o=this.getZoom(),s=j6(e);s<=j6(o)&&s<t&&(e.x=o5(e.x,o.x,t));const r=U6(e);r<=U6(o)&&r<i&&(e.y=o5(e.y,o.y,i)),n.updateZoom("zoom",e)}updateAxisZoom(e,t,i){const{enableIndependentAxes:n,minRatioX:o,minRatioY:s,ctx:{zoomManager:r}}=this;if(!i)return;const a=this.getZoom();if(!0!==n)return a[t]=i,void this.updateUnifiedZoom(a);const l=i.max-i.min,d=a[t].max-a[t].min,c=t===z5.X?o:s;l<=d&&l<c||r.updateAxisZoom("zoom",e,i)}getZoom(){return X6(this.ctx.zoomManager.getZoom())}getResetZoom(){return X6(this.ctx.zoomManager.getRestoredZoom())}getModuleProperties(e){var t,i,n,o,s,r,a,l,d,c;return{anchorPointX:null!==(t=null===e||void 0===e?void 0:e.anchorPointX)&&void 0!==t?t:this.getAnchorPointX(),anchorPointY:null!==(i=null===e||void 0===e?void 0:e.anchorPointY)&&void 0!==i?i:this.getAnchorPointY(),enabled:null!==(n=null===e||void 0===e?void 0:e.enabled)&&void 0!==n?n:this.enabled,independentAxes:null!==(o=null===e||void 0===e?void 0:e.independentAxes)&&void 0!==o?o:!0===this.enableIndependentAxes,isScalingX:null!==(s=null===e||void 0===e?void 0:e.isScalingX)&&void 0!==s?s:this.isScalingX(),isScalingY:null!==(r=null===e||void 0===e?void 0:e.isScalingY)&&void 0!==r?r:this.isScalingY(),keepAspectRatio:null!==(a=null===e||void 0===e?void 0:e.keepAspectRatio)&&void 0!==a?a:this.keepAspectRatio,minRatioX:null!==(l=null===e||void 0===e?void 0:e.minRatioX)&&void 0!==l?l:this.minRatioX,minRatioY:null!==(d=null===e||void 0===e?void 0:e.minRatioY)&&void 0!==d?d:this.minRatioY,scrollingStep:null!==(c=null===e||void 0===e?void 0:e.scrollingStep)&&void 0!==c?c:this.scrollingStep}}};dj([G5({newValue(e){this.onEnabledChange(e)}}),V5(L5)],X5.prototype,"enabled",2),dj([V5(L5)],X5.prototype,"enableAxisDragging",2),dj([V5(O5)],X5.prototype,"buttons",2),dj([V5(L5)],X5.prototype,"enableDoubleClickToReset",2),dj([G5({changeValue(e){this.ctx.zoomManager.setIndependentAxes(Boolean(e))}}),V5(L5,{optional:!0})],X5.prototype,"enableIndependentAxes",2),dj([V5(L5)],X5.prototype,"enablePanning",2),dj([V5(L5)],X5.prototype,"enableScrolling",2),dj([V5(L5)],X5.prototype,"enableSelecting",2),dj([V5(F5(["alt","ctrl","meta","shift"],"a pan key"))],X5.prototype,"panKey",2),dj([V5(F5(["x","y","xy"],"an axis"))],X5.prototype,"axes",2),dj([V5(N5)],X5.prototype,"scrollingStep",2),dj([V5(L5)],X5.prototype,"keepAspectRatio",2),dj([V5(P5.restrict({min:1}))],X5.prototype,"minVisibleItemsX",2),dj([V5(P5.restrict({min:1}))],X5.prototype,"minVisibleItemsY",2),dj([V5(U5)],X5.prototype,"anchorPointX",2),dj([V5(U5)],X5.prototype,"anchorPointY",2),dj([V5(O5)],X5.prototype,"autoScaling",2),dj([H5("panner.deceleration"),V5(B5(N5,F5(["off","short","long"],"a deceleration")))],X5.prototype,"deceleration",2);var q5={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],moduleFactory:e=>new X5(e),themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:{enabled:!0,buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out",section:"scale"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in",section:"scale"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left",section:"pan"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right",section:"pan"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset",section:"reset"}]},enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,deceleration:"short",minVisibleItemsX:2,minVisibleItemsY:2,panKey:"alt",scrollingStep:.1,autoScaling:{enabled:!1,padding:.25}}}},{BOOLEAN:Q5,OBJECT:J5,POSITION:$5,POSITIVE_NUMBER:e8,BaseProperties:t8,AxisTicks:i8,ZIndexMap:n8,ProxyProperty:o8,Validate:s8,LayoutElement:r8,createId:a8,Group:l8,Rect:d8,Triangle:c8,TranslatableGroup:h8,LinearGradient:u8}=mW,p8=class extends t8{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};dj([s8(e8)],p8.prototype,"thickness",2),dj([s8(e8)],p8.prototype,"preferredLength",2);var g8=class{constructor(e){this.axisTicks=e}};dj([o8("axisTicks.label")],g8.prototype,"label",2),dj([o8("axisTicks.interval")],g8.prototype,"interval",2),dj([o8("axisTicks.padding")],g8.prototype,"padding",2);var m8=class{constructor(e){this.ctx=e,this.id=a8(this),this.legendGroup=new h8({name:"legend",zIndex:n8.LEGEND}),this.gradientRect=new d8,this.arrow=new c8,this.ticksGroup=new l8({name:"legend-axis-group"}),this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new p8,this.spacing=20,this.data=[],this.highlightManager=e.highlightManager,this.axisTicks=new i8,this.axisTicks.attachAxis(this.ticksGroup),this.scale=new g8(this.axisTicks),this.legendGroup.append([this.gradientRect,this.arrow,this.ticksGroup]),this.destroyFns.push(e.highlightManager.addListener("highlight-change",(()=>this.onChartHoverChange())),e.layoutManager.registerElement(r8.Legend,(e=>this.onStartLayout(e))),(()=>this.legendGroup.remove()))}isVertical(){return"right"===this.position||"left"===this.position}destroy(){this.destroyFns.forEach((e=>e()))}attachLegend(e){e.appendChild(this.legendGroup)}onStartLayout(e){const[t]=this.data;if(!this.enabled||null===t||void 0===t||!t.enabled)return void(this.legendGroup.visible=!1);const{colorRange:i}=this.normalizeColorArrays(t);this.updateGradientRect(e.layoutBox,i);const n=this.updateAxis(t),{left:o,top:s}=this.getMeasurements(e.layoutBox,n);this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=o,this.legendGroup.translationY=s}normalizeColorArrays(e){let t=e.colorDomain.slice();const i=e.colorRange.slice();if(t.length===i.length)return{colorDomain:t,colorRange:i};t.length>i.length&&i.splice(t.length);const[n,o]=t,s=i.length;return t=i.map(((e,t)=>0===t?n:t===s-1?o:n+(o-n)*t/(s-1))),{colorDomain:t,colorRange:i}}updateGradientRect(e,t){const{gradientRect:i}=this,{preferredLength:n,thickness:o}=this.gradient;let s;this.isVertical()?(s=0,i.width=o,i.height=Math.min(e.height,n)):(s=90,i.width=Math.min(e.width,n),i.height=o);const r=new u8("oklch",t.map(((e,i)=>({offset:i/(t.length-1),color:e}))),s);i.fill=r}updateAxis(e){const{axisTicks:t}=this,i=this.isVertical(),n=this.reverseOrder!==i;return t.position=this.position,t.translationX=i?this.gradient.thickness:0,t.translationY=i?0:this.gradient.thickness,t.scale.domain=n?e.colorDomain.slice().reverse():e.colorDomain,t.scale.range=i?[0,this.gradientRect.height]:[0,this.gradientRect.width],t.calculateLayout()}updateArrow(){var e;const t=this.highlightManager.getActiveHighlight(),{arrow:i}=this;if(null==(null===t||void 0===t?void 0:t.colorValue))return void(i.visible=!1);const{scale:n,label:o}=this.axisTicks,s=null!==(e=o.fontSize)&&void 0!==e?e:0,r=n.convert(t.colorValue);let{x:a,y:l}=this.gradientRect,d=Math.PI;this.isVertical()?(a-=s/2,l+=r,d/=2):(a+=r,l-=s/2),i.visible=!0,i.fill=o.color,i.rotation=d,i.size=s,i.translationX=a,i.translationY=l}getMeasurements(e,t){let{x:i,y:n}=e,{width:o,height:s}=this.gradientRect;switch(this.isVertical()?o+=t.width+5:s+=t.height+5,this.position){case"left":n+=e.height/2-s/2,e.shrink(o+this.spacing,"left");break;case"right":i+=e.width-o,n+=e.height/2-s/2,e.shrink(o+this.spacing,"right");break;case"top":i+=e.width/2-o/2,e.shrink(s+this.spacing,"top");break;case"bottom":i+=e.width/2-o/2,n+=e.height-s,e.shrink(s+this.spacing,"bottom")}return{top:n,left:i}}onChartHoverChange(){this.enabled&&this.updateArrow()}};m8.className="GradientLegend",dj([s8(Q5)],m8.prototype,"enabled",2),dj([s8($5)],m8.prototype,"position",2),dj([s8(Q5)],m8.prototype,"reverseOrder",2),dj([s8(J5)],m8.prototype,"gradient",2),dj([s8(e8)],m8.prototype,"spacing",2);var{ThemeSymbols:{DEFAULT_FONT_FAMILY:v8,DEFAULT_LABEL_COLOUR:f8},ThemeConstants:{FONT_SIZE:y8}}=mW,b8={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient",moduleFactory:e=>new m8(e),themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:f8,fontSize:y8.SMALL,fontFamily:v8},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1},removable:"standalone-only"},C8=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],n=e[1],o=e[2],s=e[3];i=this.ff(i,n,o,s,t[0],7,-680876936),s=this.ff(s,i,n,o,t[1],12,-389564586),o=this.ff(o,s,i,n,t[2],17,606105819),n=this.ff(n,o,s,i,t[3],22,-1044525330),i=this.ff(i,n,o,s,t[4],7,-176418897),s=this.ff(s,i,n,o,t[5],12,1200080426),o=this.ff(o,s,i,n,t[6],17,-1473231341),n=this.ff(n,o,s,i,t[7],22,-45705983),i=this.ff(i,n,o,s,t[8],7,1770035416),s=this.ff(s,i,n,o,t[9],12,-1958414417),o=this.ff(o,s,i,n,t[10],17,-42063),n=this.ff(n,o,s,i,t[11],22,-1990404162),i=this.ff(i,n,o,s,t[12],7,1804603682),s=this.ff(s,i,n,o,t[13],12,-40341101),o=this.ff(o,s,i,n,t[14],17,-1502002290),n=this.ff(n,o,s,i,t[15],22,1236535329),i=this.gg(i,n,o,s,t[1],5,-165796510),s=this.gg(s,i,n,o,t[6],9,-1069501632),o=this.gg(o,s,i,n,t[11],14,643717713),n=this.gg(n,o,s,i,t[0],20,-373897302),i=this.gg(i,n,o,s,t[5],5,-701558691),s=this.gg(s,i,n,o,t[10],9,38016083),o=this.gg(o,s,i,n,t[15],14,-660478335),n=this.gg(n,o,s,i,t[4],20,-405537848),i=this.gg(i,n,o,s,t[9],5,568446438),s=this.gg(s,i,n,o,t[14],9,-1019803690),o=this.gg(o,s,i,n,t[3],14,-187363961),n=this.gg(n,o,s,i,t[8],20,1163531501),i=this.gg(i,n,o,s,t[13],5,-1444681467),s=this.gg(s,i,n,o,t[2],9,-51403784),o=this.gg(o,s,i,n,t[7],14,1735328473),n=this.gg(n,o,s,i,t[12],20,-1926607734),i=this.hh(i,n,o,s,t[5],4,-378558),s=this.hh(s,i,n,o,t[8],11,-2022574463),o=this.hh(o,s,i,n,t[11],16,1839030562),n=this.hh(n,o,s,i,t[14],23,-35309556),i=this.hh(i,n,o,s,t[1],4,-1530992060),s=this.hh(s,i,n,o,t[4],11,1272893353),o=this.hh(o,s,i,n,t[7],16,-155497632),n=this.hh(n,o,s,i,t[10],23,-1094730640),i=this.hh(i,n,o,s,t[13],4,681279174),s=this.hh(s,i,n,o,t[0],11,-358537222),o=this.hh(o,s,i,n,t[3],16,-722521979),n=this.hh(n,o,s,i,t[6],23,76029189),i=this.hh(i,n,o,s,t[9],4,-640364487),s=this.hh(s,i,n,o,t[12],11,-421815835),o=this.hh(o,s,i,n,t[15],16,530742520),n=this.hh(n,o,s,i,t[2],23,-995338651),i=this.ii(i,n,o,s,t[0],6,-198630844),s=this.ii(s,i,n,o,t[7],10,1126891415),o=this.ii(o,s,i,n,t[14],15,-1416354905),n=this.ii(n,o,s,i,t[5],21,-57434055),i=this.ii(i,n,o,s,t[12],6,1700485571),s=this.ii(s,i,n,o,t[3],10,-1894986606),o=this.ii(o,s,i,n,t[10],15,-1051523),n=this.ii(n,o,s,i,t[1],21,-2054922799),i=this.ii(i,n,o,s,t[8],6,1873313359),s=this.ii(s,i,n,o,t[15],10,-30611744),o=this.ii(o,s,i,n,t[6],15,-1560198380),n=this.ii(n,o,s,i,t[13],21,1309151649),i=this.ii(i,n,o,s,t[4],6,-145523070),s=this.ii(s,i,n,o,t[11],10,-1120210379),o=this.ii(o,s,i,n,t[2],15,718787259),n=this.ii(n,o,s,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(n,e[1]),e[2]=this.add32(o,e[2]),e[3]=this.add32(s,e[3])}cmn(e,t,i,n,o,s){return t=this.add32(this.add32(t,e),this.add32(n,s)),this.add32(t<<o|t>>>32-o,i)}ff(e,t,i,n,o,s,r){return this.cmn(t&i|~t&n,e,t,o,s,r)}gg(e,t,i,n,o,s,r){return this.cmn(t&n|i&~n,e,t,o,s,r)}hh(e,t,i,n,o,s,r){return this.cmn(t^i^n,e,t,o,s,r)}ii(e,t,i,n,o,s,r){return this.cmn(i^(t|~n),e,t,o,s,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let n;for(n=64;n<=e.length;n+=64)this.md5cycle(i,this.md5blk(e.substring(n-64,n)));e=e.substring(n-64);const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(i,o),n=0;n<16;n++)o[n]=0;return o[14]=8*t,this.md5cycle(i,o),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",n=0;for(;n<4;n++)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}};function x8(e){return null==e||0===e.length}var w8={"01":"GRID","02":"CHARTS","0102":"BOTH"},S8="https://ag-grid.com/charts/licensing/",M8=class e{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new C8,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(e.licenseKey,e.gridContext),i="AG ".concat("BOTH"===t.currentLicenseType?"Grid and ":"","Charts Enterprise");let n="";if("BOTH"===t.suppliedLicenseType?n="AG Grid and AG Charts Enterprise":"GRID"===t.suppliedLicenseType?n="AG Grid Enterprise":void 0!==t.suppliedLicenseType&&(n="AG Charts Enterprise"),t.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(t.expired){const i=e.getChartsReleaseDate(),o=e.formatDate(i);this.outputExpiredKey(t.expiry,o,n)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,n):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,n)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const n=i.length-32,o=i.substring(n),s=i.substring(0,n),[r,a,l]=e.extractBracketedInformation(i);return{md5:o,license:s,version:r,isTrial:a,type:l}}getLicenseDetails(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n="CHARTS";if(x8(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:n};const o=e.getChartsReleaseDate(),{md5:s,license:r,version:a,isTrial:l,type:d}=e.extractLicenseComponents(t);let c,h,u,p=s===this.md5.md5(r)&&-1===t.indexOf("For_Trialing_ag-Grid_Only"),g=null,m=!1;if(p&&(g=e.extractExpiry(r),p=!isNaN(g.getTime()),p))switch(h=o>g,a){case"legacy":case"2":p=!1;break;case"3":x8(d)?p=!1:(u=d,d!==w8["02"]&&d!==w8["0102"]?(p=!1,m=!0):l&&(c=g<new Date,h=void 0))}return p?{licenseKey:t,valid:p,expiry:e.formatDate(g),expired:h,version:a,isTrial:l,trialExpired:c,invalidLicenseTypeForCombo:i?"BOTH"!==u:void 0,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:u}:{licenseKey:t,valid:p,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:u}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!x8(this.watermarkMessage)}getWatermarkMessage(){var e;return null!==(e=this.watermarkMessage)&&void 0!==e?e:""}getHostname(){var e;if(!this.document)return"localhost";const t=null!==(e=this.document.defaultView)&&void 0!==e?e:window;if(!t)return"localhost";const i=t.location,{hostname:n=""}=i;return n}isForceWatermark(){var e,t;if(!this.document)return!1;const i=(null!==(e=null===(t=this.document)||void 0===t?void 0:t.defaultView)&&void 0!==e?e:"undefined"!=typeof window)?window:void 0;if(!i)return!1;const{pathname:n}=i.location;return!!n&&-1!==n.indexOf("forceWatermark")}isWebsiteUrl(){const e=this.getHostname();return null!==/^((?:[\w-]+\.)?ag-grid\.com)$/.exec(e)}isLocalhost(){const e=this.getHostname();return null!==/^(?:127\.0\.0\.1|localhost)$/.exec(e)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),n=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+n}static getChartsReleaseDate(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,o,s,r,a,l,d,c="",h=0;const u=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;h<u.length;)r=i.indexOf(u.charAt(h++)),a=i.indexOf(u.charAt(h++)),l=i.indexOf(u.charAt(h++)),d=i.indexOf(u.charAt(h++)),n=r<<2|a>>4,o=(15&a)<<4|l>>2,s=(3&l)<<6|d,c+=String.fromCharCode(n),64!=l&&(c+=String.fromCharCode(o)),64!=d&&(c+=String.fromCharCode(s));return c=e.utf8_decode(c),c}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}static setGridContext(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.gridContext=t}static setLicenseKey(t){e.licenseKey=t}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map((e=>e.replace("[","").replace("]","")));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter((e=>"TRIAL"===e)).length,n=t.filter((e=>e.startsWith("v")))[0],o=n?n.replace("v",""):"legacy",s=w8[t.filter((e=>w8[e]))[0]];return[o,i,s]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(t,i,n){e.gridContext||(t?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(n," only and does not cover you for ").concat(i,".")," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(S8,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(S8,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,i,n){e.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(n," expired on ").concat(t,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){e.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(t," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,i,n){e.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(n," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions of ".concat(n," released before ").concat(t,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(i,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};M8.RELEASE_INFORMATION="MTczNDYwMzc0NjU5NA==",M8.gridContext=!1;var D8=M8,{createElement:k8}=mW;function I8(e,t){const i=e.addChild("canvas-overlay","watermark"),n=k8("span");n.innerText=t,i.addEventListener("animationend",(()=>{e.removeChild("canvas-overlay","watermark"),e.removeStyles("watermark")})),i.classList.add("ag-watermark"),i.appendChild(n)}var{findMinMax:A8,findMinValue:T8,findMaxValue:E8}=mW;function R8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=Math.ceil(Math.log2(e.length/t))-1;return i=Math.min(Math.max(i,0),16),2**i|0}function L8(e){return A8(e.map((e=>Number(e))))}function P8(e,t,i){return(e.valueOf()-t)/(i-t)}function N8(e,t){return 4*Math.min(Math.floor(e*t),t-1)|0}function F8(e,t,i,n,o,s){const r=new Int32Array(4*s).fill(-1),a=new Float64Array(4*s).fill(NaN);for(let l=0;l<e.length;l+=1){const d=e[l],c=t[l],h=i[l];if(null==d||null==c||null==h)continue;const u=P8(d,n,o),p=c.valueOf(),g=h.valueOf(),m=N8(u,s),v=-1===r[m+0];(v||u<a[m+0])&&(r[m+0]=l,a[m+0]=u),(v||u>a[m+1])&&(r[m+1]=l,a[m+1]=u),(v||g<a[m+2])&&(r[m+2]=l,a[m+2]=g),(v||p>a[m+3])&&(r[m+3]=l,a[m+3]=p)}return{indexData:r,valueData:a}}function O8(e,t,i){let{inPlace:n=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=i/2|0,s=n?e:new Int32Array(4*o),r=n?t:new Float64Array(4*o);for(let a=0;a<o;a+=1){const i=4*a|0,n=2*i|0,o=n+4|0,l=-1===e[o+0],d=l||t[n+0]<t[o+0]?n:o;s[i+0]=e[d+0],r[i+0]=t[d+0];const c=l||t[n+1]>t[o+1]?n:o;s[i+1]=e[c+1],r[i+1]=t[c+1];const h=l||t[n+2]<t[o+2]?n:o;s[i+2]=e[h+2],r[i+2]=t[h+2];const u=l||t[n+3]>t[o+3]?n:o;s[i+3]=e[u+3],r[i+3]=t[u+3]}return{maxRange:o,indexData:s,valueData:r}}var B8={xMin:0,xMax:1,yMin:2,yMax:3,span:4};var{ChartAxisDirection:G8,ContinuousScale:z8,OrdinalTimeScale:_8}=mW,V8=class extends mW.BarSeries{visibleRange(e,t,i,n){return function(e,t,i,n){var o,s;let r=T8(0,e-1,(e=>{const i=n(e);return!Number.isFinite(i)||i>t?e:void 0}));r=Math.max((null!==(o=r)&&void 0!==o?o:0)-1,0);let a=E8(0,e-1,(e=>{const t=n(e);return!Number.isFinite(t)||t<i?e:void 0}));return a=Math.min((null!==(s=a)&&void 0!==s?s:e)+2,e),[r,a]}(e,t,i,n)}aggregateData(e,t){if(0===t.rawData.length||"ungrouped"!==t.type)return;const i=this.axes[G8.X];if(null==i||!z8.is(i.scale)&&!_8.is(i.scale))return;const n=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yValue-raw",t),{index:s}=e.resolveProcessedDataDefById(this,"xValue");return function(e,t,i){if(e.length<1e3)return;const[n,o]=L8(i);let s=R8(e,5),{indexData:r,valueData:a}=F8(e,t,t,n,o,s);const l=[{maxRange:s,indexData:r,indexes:B8}];for(;s>64;)({indexData:r,valueData:a,maxRange:s}=O8(r,a,s)),l.push({maxRange:s,indexData:r,indexes:B8});return l.reverse(),l}(n,o,t.domain.keys[s])}},{BarSeriesModule:H8}=mW,W8=l(l({},H8),{},{type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new V8(e)});var{ScalableGroup:j8,Rect:U8,Line:K8,BBox:Y8,Selection:Z8,Logger:X8}=mW,q8=class extends j8{constructor(){super(),this.append([new U8({tag:0}),new U8({tag:0}),new U8({tag:2}),new U8({tag:1}),new K8({tag:3}),new K8({tag:3}),new K8({tag:4}),new K8({tag:4})])}updateDatumStyles(e,t,i,n){const{bandwidth:o,scaledValues:{xValue:s,medianValue:r}}=e;let{minValue:a,q1Value:l,q3Value:d,maxValue:c}=e.scaledValues;(i&&!n||!i&&n)&&([c,d,l,a]=[a,l,d,c]);const h=(e,t,n,o)=>i?{y:e,x:t,width:o,height:n}:{x:e,y:t,width:n,height:o},u=(e,t,n)=>i?{y1:e,y2:t,x:n}:{x1:e,x2:t,y:n},p=(e,t,n)=>i?{x1:t,x2:n,y:e}:{x:e,y1:t,y2:n},g=(e,t,i,n)=>(({x:e,y:t,width:i,height:n}=h(e,t,i,n)),new Y8(e,t,i,n)),{fill:m,fillOpacity:v,stroke:f,strokeWidth:y,strokeOpacity:b,lineDash:C,lineDashOffset:x,cornerRadius:w,cap:S,whisker:M}=t,D=Z8.select(this,U8),k=D.selectByTag(0),[I]=D.selectByTag(2),[A]=D.selectByTag(1),T=D.selectByTag(3),E=D.selectByTag(4);M.strokeWidth>o&&(M.strokeWidth=o);const R=h(l,s,d-l,o);I.setProperties(R),k[0].setProperties(R),k[0].setProperties({cornerRadius:w,clipBBox:g(l,s,Math.round(r-l+y/2),o)}),k[1].setProperties(R),k[1].setProperties({cornerRadius:w,clipBBox:g(Math.round(r-y/2),s,Math.floor(d-r+y/2),o)});const L=Math.max(Math.round(r-y/2),l+y),P=Math.min(Math.round(r+y/2),d-y);A.setProperties(R),A.setProperties({visible:L<P,cornerRadius:w,clipBBox:g(L,s+y,P-L,Math.max(0,o-2*y))});const N=Math.floor(s+o*(1-S.lengthRatio)/2),F=Math.ceil(s+o*(1+S.lengthRatio)/2);E[0].setProperties(p(a,N,F)),E[1].setProperties(p(c,N,F)),T[0].setProperties(u(Math.round(a+M.strokeWidth/2),l,Math.floor(s+o/2))),T[1].setProperties(u(d,Math.round(c-M.strokeWidth/2),Math.floor(s+o/2)));for(const O of k)O.setProperties({fill:m,fillOpacity:v,strokeWidth:2*y,strokeOpacity:0});A.setProperties({fill:f,fillOpacity:b,strokeWidth:0});for(const O of[...T,...E])O.setProperties(M);I.setProperties({stroke:f,strokeWidth:y,strokeOpacity:b,lineDash:C,lineDashOffset:x,cornerRadius:w,fillOpacity:0})}distanceSquared(e,t){const i=Z8.selectByClass(this,U8,K8);return mW.nearestSquared(e,t,i).distanceSquared}get midPoint(){const e=this.datum;return void 0===e.midPoint?(X8.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):e.midPoint}},{BaseProperties:Q8,AbstractBarSeriesProperties:J8,SeriesTooltip:$8,Validate:e7,COLOR_STRING:t7,FUNCTION:i7,LINE_DASH:n7,OBJECT:o7,POSITIVE_NUMBER:s7,RATIO:r7,STRING:a7,mergeDefaults:l7}=mW,d7=class extends Q8{constructor(){super(...arguments),this.lengthRatio=.5}};dj([e7(r7)],d7.prototype,"lengthRatio",2);var c7=class extends Q8{};dj([e7(t7,{optional:!0})],c7.prototype,"stroke",2),dj([e7(s7)],c7.prototype,"strokeWidth",2),dj([e7(r7)],c7.prototype,"strokeOpacity",2),dj([e7(n7,{optional:!0})],c7.prototype,"lineDash",2),dj([e7(s7)],c7.prototype,"lineDashOffset",2);var h7=class extends J8{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new d7,this.whisker=new c7,this.tooltip=new $8,this.backgroundFill="white"}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:n,lineDashOffset:o}=this,s=super.toJson();return s.whisker=l7(s.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:n,lineDashOffset:o}),s}};dj([e7(a7)],h7.prototype,"xKey",2),dj([e7(a7)],h7.prototype,"minKey",2),dj([e7(a7)],h7.prototype,"q1Key",2),dj([e7(a7)],h7.prototype,"medianKey",2),dj([e7(a7)],h7.prototype,"q3Key",2),dj([e7(a7)],h7.prototype,"maxKey",2),dj([e7(a7,{optional:!0})],h7.prototype,"xName",2),dj([e7(a7,{optional:!0})],h7.prototype,"yName",2),dj([e7(a7,{optional:!0})],h7.prototype,"minName",2),dj([e7(a7,{optional:!0})],h7.prototype,"q1Name",2),dj([e7(a7,{optional:!0})],h7.prototype,"medianName",2),dj([e7(a7,{optional:!0})],h7.prototype,"q3Name",2),dj([e7(a7,{optional:!0})],h7.prototype,"maxName",2),dj([e7(t7,{optional:!0})],h7.prototype,"fill",2),dj([e7(r7)],h7.prototype,"fillOpacity",2),dj([e7(t7)],h7.prototype,"stroke",2),dj([e7(s7)],h7.prototype,"strokeWidth",2),dj([e7(r7)],h7.prototype,"strokeOpacity",2),dj([e7(n7)],h7.prototype,"lineDash",2),dj([e7(s7)],h7.prototype,"lineDashOffset",2),dj([e7(s7)],h7.prototype,"cornerRadius",2),dj([e7(i7,{optional:!0})],h7.prototype,"itemStyler",2),dj([e7(o7)],h7.prototype,"cap",2),dj([e7(o7)],h7.prototype,"whisker",2),dj([e7(o7)],h7.prototype,"tooltip",2),dj([e7(t7)],h7.prototype,"backgroundFill",2);var{extractDecoratedProperties:u7,fixNumericExtent:p7,keyProperty:g7,mergeDefaults:m7,SeriesNodePickMode:v7,SMALLEST_KEY_INTERVAL:f7,valueProperty:y7,diff:b7,animationValidation:C7,computeBarFocusBounds:x7,createDatumId:w7,Color:S7,ContinuousScale:M7,motion:D7}=mW,k7=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.minKey=n.properties.minKey,this.q1Key=n.properties.q1Key,this.medianKey=n.properties.medianKey,this.q3Key=n.properties.q3Key,this.maxKey=n.properties.maxKey}},I7=class extends mW.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[v7.NEAREST_NODE,v7.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new h7,this.NodeEvent=k7}async processData(e){var t,i,n;if(!this.properties.isValid()||!this.visible)return;const{xKey:o,minKey:s,q1Key:r,medianKey:a,q3Key:l,maxKey:d}=this.properties,c=!this.ctx.animationManager.isSkipped(),h=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,u=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:p,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:h,yScale:u}),v=[];c&&this.processedData&&v.push(b7(this.id,this.processedData)),c&&v.push(C7());const{processedData:f}=await this.requestDataModel(e,this.data,{props:[g7(o,g,{id:"xValue"}),y7(s,m,{id:"minValue"}),y7(r,m,{id:"q1Value"}),y7(a,m,{id:"medianValue"}),y7(l,m,{id:"q3Value"}),y7(d,m,{id:"maxValue"}),...p?[f7]:[],...v]});this.smallestDataInterval=null===(n=f.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];if(e===this.getBarDirection()){const e=i.getDomain(this,"minValue","value",t),n=i.getDomain(this,"maxValue","value",t);return p7([Math.min(...e),Math.max(...n)])}const{index:n,def:o}=i.resolveProcessedDataDefById(this,"xValue"),s=t.domain.keys[n];return"key"===o.type&&"category"===o.valueType?s:this.padBandExtent(s)}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,n=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&null!=i&&0!==i.rawData.length&&n&&o))return;const{xKey:s,fill:r,fillOpacity:a,stroke:l,strokeWidth:d,strokeOpacity:c,lineDash:h,lineDashOffset:u,cap:p,whisker:g}=this.properties,m=[],v=t.resolveKeysById(this,"xValue",i),f=t.resolveColumnById(this,"minValue",i),y=t.resolveColumnById(this,"q1Value",i),b=t.resolveColumnById(this,"medianValue",i),C=t.resolveColumnById(this,"q3Value",i),x=t.resolveColumnById(this,"maxValue",i),{barWidth:w,groupIndex:S}=this.updateGroupScale(n),M=M7.is(n.scale)?-.5*w:0,{groupScale:D}=this,k=this.isVertical(),I={itemId:s,nodeData:m,labelData:[],scales:this.calculateScaling(),visible:this.visible};return e?(i.rawData.forEach(((e,t)=>{const i=v[t];if(null==i)return;const I=f[t],A=y[t],T=b[t],E=C[t],R=x[t];if([I,A,T,E,R].some((e=>"number"!==typeof e))||I>A||A>T||T>E||E>R)return;const L={xValue:Math.round(n.scale.convert(i)),minValue:Math.round(o.scale.convert(I)),q1Value:Math.round(o.scale.convert(A)),medianValue:Math.round(o.scale.convert(T)),q3Value:Math.round(o.scale.convert(E)),maxValue:Math.round(o.scale.convert(R))};L.xValue+=Math.round(D.convert(String(S)))+M;const P=Math.round(w),N=Math.abs(L.q3Value-L.q1Value),F=L.xValue+P/2,O=Math.min(L.q3Value,L.q1Value)+N/2,B={x:k?F:O,y:k?O:F};let G;G=k?{x:B.x-P/2,y:L.minValue,width:P,height:L.maxValue-L.minValue}:{x:L.minValue,y:B.y-P/2,width:L.maxValue-L.minValue,height:P},m.push({series:this,itemId:i,datum:e,datumIndex:t,xKey:s,bandwidth:P,scaledValues:L,cap:p,whisker:g,fill:r,fillOpacity:a,stroke:l,strokeWidth:d,strokeOpacity:c,lineDash:h,lineDashOffset:u,midPoint:B,focusRect:G})})),I):I}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:o}=this.properties;return{marker:{fill:e,fillOpacity:t,stroke:i,strokeOpacity:o,strokeWidth:n}}}getLegendData(e){var t;const{id:i,ctx:{legendManager:n},visible:o}=this,{xKey:s,yName:r,showInLegend:a,legendItemName:l}=this.properties;return s&&"category"===e?[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:o&&n.getItemEnabled({seriesId:i,itemId:i}),label:{text:null!==(t=null!==l&&void 0!==l?l:r)&&void 0!==t?t:i},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!a}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{xKey:s,xName:r,yName:a,medianKey:d,medianName:c,q1Key:h,q1Name:u,q3Key:p,q3Name:g,minKey:m,minName:v,maxKey:f,maxName:y,legendItemName:b,tooltip:C}=o,x=this.getCategoryAxis(),w=this.getValueAxis();if(!i||!n||0===n.rawData.length||!x||!w)return;const{datumIndex:S}=e,M=n.rawData[S],D=i.resolveKeysById(this,"xValue",n)[S],k=i.resolveColumnById(this,"minValue",n)[S],I=i.resolveColumnById(this,"q1Value",n)[S],A=i.resolveColumnById(this,"medianValue",n)[S],T=i.resolveColumnById(this,"q3Value",n)[S],E=i.resolveColumnById(this,"maxValue",n)[S];if(null==D)return;const R=this.getItemBaseStyle(!1);return Object.assign(R,this.getItemStyleOverrides(String(S),M,R,!1)),C.formatTooltip({heading:x.formatDatum(D),title:null!==b&&void 0!==b?b:a,symbol:this.legendItemSymbol(),data:[{label:v,fallbackLabel:m,value:w.formatDatum(k)},{label:u,fallbackLabel:h,value:w.formatDatum(I)},{label:c,fallbackLabel:d,value:w.formatDatum(A)},{label:g,fallbackLabel:p,value:w.formatDatum(T)},{label:y,fallbackLabel:f,value:w.formatDatum(E)}]},l({seriesId:t,datum:M,title:a,xKey:s,xName:r,yName:a,medianKey:d,medianName:c,q1Key:h,q1Name:u,q3Key:p,q3Name:g,minKey:m,minName:v,maxKey:f,maxName:y},R))}animateEmptyUpdateReady(e){let{datumSelection:t}=e;const i=this.isVertical(),{from:n,to:o}=function(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}(i);D7.resetMotion([t],function(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}(i)),D7.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],n,o,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){var t;const i=null!==(t=e.nodeData)&&void 0!==t?t:[];return e.datumSelection.update(i)}getItemBaseStyle(e){var t,i,n,o,s,r,a,l;const{properties:d}=this,{cornerRadius:c,cap:h,whisker:u}=d,p=e?d.highlightStyle.item:void 0;return{fill:null!==(t=null===p||void 0===p?void 0:p.fill)&&void 0!==t?t:d.fill,fillOpacity:null!==(i=null===p||void 0===p?void 0:p.fillOpacity)&&void 0!==i?i:d.fillOpacity,stroke:null!==(n=null===p||void 0===p?void 0:p.stroke)&&void 0!==n?n:d.stroke,strokeWidth:null!==(o=null===p||void 0===p?void 0:p.strokeWidth)&&void 0!==o?o:d.strokeWidth,strokeOpacity:null!==(s=null===p||void 0===p?void 0:p.strokeOpacity)&&void 0!==s?s:d.strokeOpacity,lineDash:null!==(r=null!==(a=null===p||void 0===p?void 0:p.lineDash)&&void 0!==a?a:d.lineDash)&&void 0!==r?r:[],lineDashOffset:null!==(l=null===p||void 0===p?void 0:p.lineDashOffset)&&void 0!==l?l:d.lineDashOffset,cornerRadius:c,cap:h,whisker:u}}getItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{xKey:r,minKey:a,q1Key:d,medianKey:c,q3Key:h,maxKey:u,itemStyler:p}=s;if(null!=p)return this.cachedDatumCallback(w7(e,n?"highlight":"node"),(()=>p(l({seriesId:o,datum:t,xKey:r,minKey:a,q1Key:d,medianKey:c,q3Key:h,maxKey:u,highlighted:n},i))))}updateDatumNodes(e){var t;let{datumSelection:i,isHighlight:n}=e;const o=this.isVertical(),s=null===(t=this.getValueAxis())||void 0===t?void 0:t.isReversed();i.each(((e,t)=>{let i=this.getFormattedStyles(t,n?"highlight":"node");n&&(i=m7(this.properties.highlightStyle.item,i));const{stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}=i;i.whisker=m7(i.whisker,{stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:d,lineDashOffset:c}),e.updateDatumStyles(t,i,o,s)}))}updateLabelNodes(){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}nodeFactory(){return new q8}getFormattedStyles(e,t){const{id:i,properties:n}=this,{xKey:o,minKey:s,q1Key:r,medianKey:a,q3Key:d,maxKey:c,itemStyler:h,backgroundFill:u,cornerRadius:p}=n,{datum:g,stroke:m,strokeWidth:v,strokeOpacity:f,lineDash:y,lineDashOffset:b,cap:C,whisker:x}=e;let w,S;w=e.fill,S=n.fillOpacity;const M={fill:w,fillOpacity:S,stroke:m,strokeWidth:v,strokeOpacity:f,lineDash:y,lineDashOffset:b,cornerRadius:p,cap:u7(C),whisker:u7(x)};if(h){const e=this.cachedDatumCallback(w7(g.index,t),(()=>h(l(l({datum:g,seriesId:i,highlighted:"highlight"===t},M),{},{xKey:o,minKey:s,q1Key:r,medianKey:a,q3Key:d,maxKey:c}))));if(e)return m7(e,M)}return M}computeFocusBounds(e){var t;let{datumIndex:i}=e;return x7(null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i].focusRect)}};I7.className="BoxPlotSeries",I7.type="box-plot";var{CARTESIAN_AXIS_TYPE:A7}=mW.ThemeConstants,T7={series:{direction:"vertical",strokeWidth:2},axes:{[A7.NUMBER]:{crosshair:{snap:!1}},[A7.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},{Color:E7,swapAxisCondition:R7,ThemeSymbols:{DEFAULT_BACKGROUND_COLOUR:L7},ThemeConstants:{CARTESIAN_AXIS_TYPE:P7,CARTESIAN_POSITION:N7}}=mW,F7={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:e=>new I7(e),tooltipDefaults:{range:"exact"},defaultAxes:R7([{type:P7.NUMBER,position:N7.LEFT},{type:P7.CATEGORY,position:N7.BOTTOM}],(e=>"horizontal"===(null===e||void 0===e?void 0:e.direction))),themeTemplate:T7,groupable:!0,paletteFactory:e=>{var t;let{takeColors:i,themeTemplateParameters:n}=e;const o=n.get(L7),s=null!==(t=Array.isArray(o)?o[0]:o)&&void 0!==t?t:"white",{fills:[r],strokes:[a]}=i(1);let l;try{l=E7.mix(E7.fromString(s),E7.fromString(r),.3).toString()}catch(d){l=r}return{fill:l,stroke:a,backgroundFill:s}}};var{fixNumericExtent:O7,keyProperty:B7,createDatumId:G7,SeriesNodePickMode:z7,ChartAxisDirection:_7,SMALLEST_KEY_INTERVAL:V7,valueProperty:H7,diff:W7,animationValidation:j7,computeBarFocusBounds:U7,visibleRangeIndices:K7,Logger:Y7,ContinuousScale:Z7,OrdinalTimeScale:X7}=mW,q7=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.openKey=n.properties.openKey,this.closeKey=n.properties.closeKey,this.highKey=n.properties.highKey,this.lowKey=n.properties.lowKey}},Q7=class extends mW.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[z7.AXIS_ALIGNED,z7.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},pathsPerSeries:[]}),this.NodeEvent=q7,this.dataAggregationFilters=void 0}async processData(e){var t,i,n;if(!this.properties.isValid()||!this.visible)return;const{xKey:o,openKey:s,closeKey:r,highKey:a,lowKey:l}=this.properties,d=!this.ctx.animationManager.isSkipped(),c=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,h=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:u,xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:c,yScale:h}),m=[];d&&(this.processedData&&m.push(W7(this.id,this.processedData)),m.push(j7())),s&&m.push(H7(s,g,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:v,processedData:f}=await this.requestDataModel(e,this.data,{props:[B7(o,p,{id:"xValue"}),H7(r,g,{id:"closeValue"}),H7(a,g,{id:"highValue"}),H7(l,g,{id:"lowValue"}),...u?[V7]:[],...m]});this.smallestDataInterval=null===(n=f.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(v,f),this.animationState.transition("updateData")}aggregateData(e,t){if(0===t.rawData.length)return;const i=this.axes[_7.X];if(null==i||!Z7.is(i.scale)&&!X7.is(i.scale))return;const n=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"highValue",t),s=e.resolveColumnById(this,"lowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue");return function(e,t,i,n){if(e.length<1e3)return;const[o,s]=L8(n);let r=R8(e),{indexData:a,valueData:l}=F8(e,t,i,o,s,r);const d=[{maxRange:r,indexData:a}];for(;r>64;)({indexData:a,valueData:l,maxRange:r}=O8(a,l,r)),d.push({maxRange:r,indexData:a});return d.reverse(),d}(n,o,s,t.domain.keys[r])}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{openKey:n}=this.properties;if(e===this.getBarDirection()){const e=i.getDomain(this,"lowValue","value",t),o=i.getDomain(this,"highValue","value",t),s=n?i.getDomain(this,"openValue","value",t):[],r=i.getDomain(this,"closeValue","value",t);return O7([Math.min(...e,...o,...s,...r),Math.max(...o,...e,...s,...r)])}const{index:o,def:s}=i.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[o];return"key"===s.type&&"category"===s.valueType?r:this.padBandExtent(r)}getSeriesRange(e,t){var i;const{dataModel:n,processedData:o}=this;if(!n||!o)return[NaN,NaN];const s=this.axes[_7.X].scale,r=n.resolveKeysById(this,"xValue",o),a=null!==(i=s.bandwidth)&&void 0!==i?i:0,[l,d]=K7(r.length,t,(e=>{const t=s.convert(r[e]);return[t,t+a]}));return n.getDomainBetweenRange(this,["highValue","lowValue"],[l,d],o)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,n=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&null!=i&&0!==i.rawData.length&&n&&o))return;const s=[],{xKey:r,highKey:a,lowKey:l}=this.properties,{rawData:d}=i,c=t.resolveKeysById(this,"xValue",i),h=t.resolveColumnById(this,"openValue",i),u=t.resolveColumnById(this,"closeValue",i),p=t.resolveColumnById(this,"highValue",i),g=t.resolveColumnById(this,"lowValue",i),{groupScale:m}=this,{barWidth:v,groupIndex:f}=this.updateGroupScale(n),y=m.convert(String(f)),b=v>=1?v:m.rawBandwidth,C={itemId:r,nodeData:s,labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!e)return C;const x=(e,t,i,a,l,c,h,u)=>{const p=d[e],g=n.scale.convert(t)+y+h/2,m=o.scale.convert(i),v=o.scale.convert(a),f=o.scale.convert(l),b=o.scale.convert(c),C=a>i,x=C?"up":"down",w=Math.min(f,b),S=Math.max(f,b)-w,M={x:g,y:w+S/2};s.push({series:this,itemId:x,datum:p,datumIndex:e,xKey:r,xValue:t,openValue:i,closeValue:a,highValue:l,lowValue:c,midPoint:M,aggregatedValue:a,isRising:C,centerX:g,width:h,y:w,height:S,yOpen:m,yClose:v,crisp:u})},{dataAggregationFilters:w}=this,S=n.scale,[M,D]=S.range,k=D-M,I=e=>S.convert(c[e])+y,A=null===w||void 0===w?void 0:w.find((e=>e.maxRange>k));if(null==A){let[e,t]=K7(d.length,n.range,(e=>{const t=I(e);return[t,t+b]}));i.rawData.length<1e3&&(e=0,t=i.rawData.length);for(let i=e;i<t;i+=1){const e=c[i];if(null==e)continue;const t=h[i],n=u[i],o=p[i],s=g[i];null!=s&&s<=t&&s<=n?null!=o&&o>=t&&o>=n?x(i,e,t,n,o,s,b,!0):Y7.warnOnce("invalid high value for key [".concat(a,"] in data element, high value cannot be lower than datum open or close values.")):Y7.warnOnce("invalid low value for key [".concat(l,"] in data element, low value cannot be higher than datum open or close values"))}}else{const{maxRange:e,indexData:t}=A,[i,o]=K7(e,n.range,(e=>{const i=4*e,n=t[i+0],o=t[i+1];if(-1!==n)return[I(n),I(o)+b]}));for(let n=i;n<o;n+=1){const e=4*n,i=t[e+0],o=t[e+1],s=t[e+3],r=t[e+2];if(-1===i)continue;const a=(i+o)/2|0,l=c[a];if(null==l)continue;x(a,l,h[i],u[o],p[s],g[r],Math.abs(I(o)-I(i))+b,!1)}}return C}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){var t;const i=null!==(t=e.nodeData)&&void 0!==t?t:[];return e.datumSelection.update(i)}updateLabelNodes(e){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}getItemBaseStyle(e,t){var i,n,o,s,r,a,l;const{properties:d}=this,c=d.item[e],h=t?d.highlightStyle.item:void 0;return{fill:null!==(i=null===h||void 0===h?void 0:h.fill)&&void 0!==i?i:c.fill,fillOpacity:null!==(n=null===h||void 0===h?void 0:h.fillOpacity)&&void 0!==n?n:c.fillOpacity,stroke:null!==(o=null===h||void 0===h?void 0:h.stroke)&&void 0!==o?o:c.stroke,strokeWidth:null!==(s=null===h||void 0===h?void 0:h.strokeWidth)&&void 0!==s?s:c.strokeWidth,strokeOpacity:null!==(r=null===h||void 0===h?void 0:h.strokeOpacity)&&void 0!==r?r:c.strokeOpacity,lineDash:null!==(a=null===h||void 0===h?void 0:h.lineDash)&&void 0!==a?a:c.lineDash,lineDashOffset:null!==(l=null===h||void 0===h?void 0:h.lineDashOffset)&&void 0!==l?l:c.lineDashOffset}}getItemStyleOverrides(e,t,i,n,o){const{id:s,properties:r}=this,{itemStyler:a}=r;if(null==a)return;const{xKey:d,openKey:c,closeKey:h,highKey:u,lowKey:p}=r;return this.cachedDatumCallback(G7(e,o?"highlight":"node"),(()=>a(l({seriesId:s,datum:t,itemId:i,xKey:d,openKey:c,closeKey:h,highKey:u,lowKey:p,highlighted:o},n))))}getTooltipContent(e){var t,i,n,o,s;const{id:r,dataModel:a,processedData:d,properties:c}=this,{xKey:h,xName:u,yName:p,openKey:g,openName:m,highKey:v,highName:f,lowKey:y,lowName:b,closeKey:C,closeName:x,legendItemName:w,tooltip:S}=c,M=this.getCategoryAxis(),D=this.getValueAxis();if(!a||!d||0===d.rawData.length||!M||!D)return;const{datumIndex:k}=e,I=d.rawData[k],A=a.resolveKeysById(this,"xValue",d)[k],T=a.resolveColumnById(this,"openValue",d)[k],E=a.resolveColumnById(this,"highValue",d)[k],R=a.resolveColumnById(this,"lowValue",d)[k],L=a.resolveColumnById(this,"closeValue",d)[k];if(null==A)return;const P=L>=T?"up":"down",N=this.properties.item[P],F=this.getItemBaseStyle(P,!1);return Object.assign(F,this.getItemStyleOverrides(String(k),I,P,F,!1)),S.formatTooltip({heading:M.formatDatum(A),title:w,symbol:{marker:{fill:null!==(t=N.fill)&&void 0!==t?t:N.stroke,fillOpacity:null!==(i=null!==(n=N.fillOpacity)&&void 0!==n?n:N.strokeOpacity)&&void 0!==i?i:1,stroke:N.stroke,strokeWidth:null!==(o=N.strokeWidth)&&void 0!==o?o:1,strokeOpacity:null!==(s=N.strokeOpacity)&&void 0!==s?s:1}},data:[{label:m,fallbackLabel:g,value:D.formatDatum(T)},{label:f,fallbackLabel:v,value:D.formatDatum(E)},{label:b,fallbackLabel:y,value:D.formatDatum(R)},{label:x,fallbackLabel:C,value:D.formatDatum(L)}]},l({seriesId:r,datum:I,title:p,itemId:P,xKey:h,xName:u,yName:p,openKey:g,openName:m,highKey:v,highName:f,lowKey:y,lowName:b,closeKey:C,closeName:x},F))}getDatumId(e){return G7(e.xValue)}computeFocusBounds(e){var t;const i=null===(t=this.getNodeData())||void 0===t?void 0:t.at(e.datumIndex);if(null==i)return;const{centerX:n,y:o,width:s,height:r}=i;return U7({x:n-s/2,y:o,width:s,height:r})}},{Path:J7,ScenePathChangeDetection:$7,BBox:e9}=mW,t9=class extends J7{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:e,y:t,width:i,height:n}=this;return new e9(e-i/2,t,i,n)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:e,width:t,height:i,crisp:n,strokeAlignment:o}=this;let{centerX:s,yOpen:r,yClose:a}=this,l=s-t/2,d=s+t/2,c=e,h=e+i;if(n&&t>1){s=this.align(s),r=this.align(r),a=this.align(a);const n=this.align(t/2);l=s-n,d=s+n,c=this.align(e),h=c+this.align(c,i)}const u=(c+h)/2;return s+=o,l+=o,d+=o,c-=o,h+=o,r+=r<u?o:-o,a+=a<u?o:-o,{centerX:s,x0:l,x1:d,y0:c,y1:h,yOpen:r,yClose:a}}executeStroke(e,t){const{width:i,strokeWidth:n}=this;i<n&&(e.lineWidth=i),super.executeStroke(e,t)}};dj([$7()],t9.prototype,"centerX",2),dj([$7()],t9.prototype,"y",2),dj([$7()],t9.prototype,"width",2),dj([$7()],t9.prototype,"height",2),dj([$7()],t9.prototype,"yOpen",2),dj([$7()],t9.prototype,"yClose",2),dj([$7()],t9.prototype,"crisp",2),dj([$7()],t9.prototype,"strokeAlignment",2);var i9=class extends t9{updatePath(){const{path:e}=this,{centerX:t,x0:i,x1:n,y0:o,y1:s,yOpen:r,yClose:a}=this.alignedCoordinates();e.clear(),e.moveTo(t,o),e.lineTo(t,s),Math.abs(n-i)>1&&(e.moveTo(i,r),e.lineTo(t,r),e.moveTo(t,a),e.lineTo(n,a))}},{ScenePathChangeDetection:n9,ExtendedPath2D:o9}=mW,s9=class extends t9{constructor(){super(...arguments),this.wickPath=new o9,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:o,lineDashOffset:s,wickStroke:r,wickStrokeWidth:a,wickStrokeOpacity:l,wickLineDash:d,wickLineDashOffset:c,strokeAlignment:h}=this,{centerX:u,x0:p,x1:g,y0:m,y1:v,yOpen:f,yClose:y}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const b=null!=r&&r!==t||null!=a&&a!==i||null!=l&&l!==n||null!=d&&d!==o||null!=c&&c!==s?this.wickPath:e;if(Math.abs(g-p)<=3)return b.moveTo(u,m),void b.lineTo(u,v);const C=Math.min(f,y),x=Math.max(f,y);b.moveTo(u,m),b.lineTo(u,C+i/2),b.moveTo(u,v),b.lineTo(u,x-i/2);const w=h+i/2,S=x-C-2*w;if(S>0)e.rect(p+w,C+w,g-p-2*w,S);else{const t=(C+x)/2;e.moveTo(p,t),e.lineTo(g,t)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:n,strokeOpacity:o,lineDash:s,lineDashOffset:r,wickStroke:a=i,wickStrokeWidth:l=n,wickStrokeOpacity:d=o,wickLineDash:c=s,wickLineDashOffset:h=r}=this;0!==l&&(e.globalAlpha*=d,"string"===typeof a&&(e.strokeStyle=a),e.lineWidth=l,null!=c&&e.setLineDash(c),e.lineDashOffset=h,e.stroke(t.getPath2D()))}};dj([n9()],s9.prototype,"wickStroke",2),dj([n9()],s9.prototype,"wickStrokeWidth",2),dj([n9()],s9.prototype,"wickStrokeOpacity",2),dj([n9()],s9.prototype,"wickLineDash",2),dj([n9()],s9.prototype,"wickLineDashOffset",2);var{BaseProperties:r9,Validate:a9,AbstractBarSeriesProperties:l9,SeriesTooltip:d9,STRING:c9,COLOR_STRING:h9,FUNCTION:u9,LINE_DASH:p9,OBJECT:g9,POSITIVE_NUMBER:m9,RATIO:v9}=mW,f9=class extends r9{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};dj([a9(h9)],f9.prototype,"stroke",2),dj([a9(m9)],f9.prototype,"strokeWidth",2),dj([a9(v9)],f9.prototype,"strokeOpacity",2),dj([a9(p9)],f9.prototype,"lineDash",2),dj([a9(m9)],f9.prototype,"lineDashOffset",2);var y9=class extends r9{constructor(){super(...arguments),this.up=new f9,this.down=new f9}};dj([a9(g9)],y9.prototype,"up",2),dj([a9(g9)],y9.prototype,"down",2);var b9=class extends l9{};dj([a9(c9)],b9.prototype,"xKey",2),dj([a9(c9)],b9.prototype,"openKey",2),dj([a9(c9)],b9.prototype,"closeKey",2),dj([a9(c9)],b9.prototype,"highKey",2),dj([a9(c9)],b9.prototype,"lowKey",2),dj([a9(c9,{optional:!0})],b9.prototype,"xName",2),dj([a9(c9,{optional:!0})],b9.prototype,"yName",2),dj([a9(c9,{optional:!0})],b9.prototype,"openName",2),dj([a9(c9,{optional:!0})],b9.prototype,"closeName",2),dj([a9(c9,{optional:!0})],b9.prototype,"highName",2),dj([a9(c9,{optional:!0})],b9.prototype,"lowName",2);var C9=class extends b9{constructor(){super(...arguments),this.tooltip=new d9,this.item=new y9}};dj([a9(g9)],C9.prototype,"tooltip",2),dj([a9(g9)],C9.prototype,"item",2),dj([a9(u9,{optional:!0})],C9.prototype,"itemStyler",2);var{BaseProperties:x9,SeriesTooltip:w9,Validate:S9,COLOR_STRING:M9,FUNCTION:D9,LINE_DASH:k9,OBJECT:I9,POSITIVE_NUMBER:A9,RATIO:T9}=mW,E9=class extends x9{};dj([S9(M9,{optional:!0})],E9.prototype,"stroke",2),dj([S9(A9)],E9.prototype,"strokeWidth",2),dj([S9(T9)],E9.prototype,"strokeOpacity",2),dj([S9(k9,{optional:!0})],E9.prototype,"lineDash",2),dj([S9(A9)],E9.prototype,"lineDashOffset",2);var R9=class extends x9{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new E9}};dj([S9(M9,{optional:!0})],R9.prototype,"fill",2),dj([S9(T9)],R9.prototype,"fillOpacity",2),dj([S9(M9)],R9.prototype,"stroke",2),dj([S9(A9)],R9.prototype,"strokeWidth",2),dj([S9(T9)],R9.prototype,"strokeOpacity",2),dj([S9(k9)],R9.prototype,"lineDash",2),dj([S9(A9)],R9.prototype,"lineDashOffset",2),dj([S9(A9)],R9.prototype,"cornerRadius",2),dj([S9(I9)],R9.prototype,"wick",2);var L9=class extends x9{constructor(){super(...arguments),this.up=new R9,this.down=new R9}};dj([S9(I9)],L9.prototype,"up",2),dj([S9(I9)],L9.prototype,"down",2);var P9=class extends b9{constructor(){super(...arguments),this.item=new L9,this.tooltip=new w9}};dj([S9(I9)],P9.prototype,"item",2),dj([S9(I9)],P9.prototype,"tooltip",2),dj([S9(D9,{optional:!0})],P9.prototype,"itemStyler",2);var{createDatumId:N9}=mW,F9=class extends Q7{constructor(){super(...arguments),this.properties=new P9}nodeFactory(){return new s9}updateDatumNodes(e){let{datumSelection:t,isHighlight:i}=e;const{id:n,properties:o}=this,{xKey:s,highKey:r,lowKey:a,openKey:l,closeKey:d,item:c,itemStyler:h}=o,{up:u,down:p}=c,{fill:g,fillOpacity:m,stroke:v,strokeWidth:f,strokeOpacity:y,lineDash:b,lineDashOffset:C}=u,{stroke:x,strokeWidth:w,strokeOpacity:S,lineDash:M,lineDashOffset:D}=u.wick,{fill:k,fillOpacity:I,stroke:A,strokeWidth:T,strokeOpacity:E,lineDash:R,lineDashOffset:L}=p,{stroke:P,strokeWidth:N,strokeOpacity:F,lineDash:O,lineDashOffset:B}=p.wick,G=i?o.highlightStyle.item:void 0;t.each(((e,t)=>{var o,c,z,_,V,H,W,j,U,K,Y,Z,X,q,Q,J,$,ee,te,ie,ne,oe,se,re,ae,le,de,ce,he,ue,pe,ge,me,ve;const{isRising:fe,centerX:ye,width:be,y:Ce,height:xe,yOpen:we,yClose:Se,crisp:Me}=t;let De;if(null!=h){const{fill:e,fillOpacity:o,stroke:c,strokeWidth:g,strokeOpacity:m,lineDash:v,lineDashOffset:f}=fe?u:p;De=this.cachedDatumCallback(N9(this.getDatumId(t),i?"highlight":"node"),(()=>h({seriesId:n,itemId:t.itemId,xKey:s,highKey:r,lowKey:a,openKey:l,closeKey:d,datum:t.datum,fill:e,fillOpacity:o,strokeOpacity:m,stroke:c,strokeWidth:g,lineDash:v,lineDashOffset:f,highlighted:i})))}e.centerX=ye,e.width=be,e.y=Ce,e.height=xe,e.yOpen=we,e.yClose=Se,e.crisp=Me,e.fill=null!==(o=null!==(c=null===G||void 0===G?void 0:G.fill)&&void 0!==c?c:null===(z=De)||void 0===z?void 0:z.fill)&&void 0!==o?o:fe?g:k,e.fillOpacity=null!==(_=null!==(V=null===G||void 0===G?void 0:G.fillOpacity)&&void 0!==V?V:null===(H=De)||void 0===H?void 0:H.fillOpacity)&&void 0!==_?_:fe?m:I,e.stroke=null!==(W=null!==(j=null===G||void 0===G?void 0:G.stroke)&&void 0!==j?j:null===(U=De)||void 0===U?void 0:U.stroke)&&void 0!==W?W:fe?v:A,e.strokeWidth=null!==(K=null!==(Y=null===G||void 0===G?void 0:G.strokeWidth)&&void 0!==Y?Y:null===(Z=De)||void 0===Z?void 0:Z.strokeWidth)&&void 0!==K?K:fe?f:T,e.strokeOpacity=null!==(X=null!==(q=null===G||void 0===G?void 0:G.strokeOpacity)&&void 0!==q?q:null===(Q=De)||void 0===Q?void 0:Q.strokeOpacity)&&void 0!==X?X:fe?y:E,e.lineDash=null!==(J=null!==($=null===G||void 0===G?void 0:G.lineDash)&&void 0!==$?$:null===(ee=De)||void 0===ee?void 0:ee.lineDash)&&void 0!==J?J:fe?b:R,e.lineDashOffset=null!==(te=null!==(ie=null===G||void 0===G?void 0:G.lineDashOffset)&&void 0!==ie?ie:null===(ne=De)||void 0===ne?void 0:ne.lineDashOffset)&&void 0!==te?te:fe?C:L;const ke=null===(oe=De)||void 0===oe?void 0:oe.wick;e.wickStroke=null!==(se=null!==(re=null===G||void 0===G?void 0:G.stroke)&&void 0!==re?re:null===ke||void 0===ke?void 0:ke.stroke)&&void 0!==se?se:fe?x:P,e.wickStrokeWidth=null!==(ae=null!==(le=null===G||void 0===G?void 0:G.strokeWidth)&&void 0!==le?le:null===ke||void 0===ke?void 0:ke.strokeWidth)&&void 0!==ae?ae:fe?w:N,e.wickStrokeOpacity=null!==(de=null!==(ce=null===G||void 0===G?void 0:G.strokeOpacity)&&void 0!==ce?ce:null===ke||void 0===ke?void 0:ke.strokeOpacity)&&void 0!==de?de:fe?S:F,e.wickLineDash=null!==(he=null!==(ue=null===G||void 0===G?void 0:G.lineDash)&&void 0!==ue?ue:null===ke||void 0===ke?void 0:ke.lineDash)&&void 0!==he?he:fe?M:O,e.wickLineDashOffset=null!==(pe=null!==(ge=null===G||void 0===G?void 0:G.lineDashOffset)&&void 0!==ge?ge:null===ke||void 0===ke?void 0:ke.lineDashOffset)&&void 0!==pe?pe:fe?D:B,e.strokeAlignment=(null!==(me=null===(ve=De)||void 0===ve?void 0:ve.strokeWidth)&&void 0!==me?me:fe?f:T)/2}))}legendItemSymbol(){var e,t;const{up:i,down:n}=this.properties.item,o=new mW.LinearGradient("rgb",[{color:i.fill,offset:0},{color:i.fill,offset:.5},{color:n.fill,offset:.5}],90),s=new mW.LinearGradient("rgb",[{color:i.stroke,offset:0},{color:i.stroke,offset:.5},{color:n.stroke,offset:.5}],90);return{marker:{fill:o,fillOpacity:i.fillOpacity,stroke:s,strokeWidth:null!==(e=i.strokeWidth)&&void 0!==e?e:1,strokeOpacity:null!==(t=i.strokeOpacity)&&void 0!==t?t:1}}}getLegendData(e){var t;const{id:i,data:n,visible:o,ctx:{legendManager:s}}=this,{xKey:r,yName:a,showInLegend:l,legendItemName:d}=this.properties;return null!==n&&void 0!==n&&n.length&&r&&"category"===e?[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:o&&s.getItemEnabled({seriesId:i,itemId:i}),label:{text:null!==(t=null!==d&&void 0!==d?d:a)&&void 0!==t?t:i},symbol:this.legendItemSymbol(),legendItemName:d,hideInLegend:!l}]:[]}};F9.className="CandleStickSeries",F9.type="candlestick";var{CARTESIAN_AXIS_TYPE:O9}=mW.ThemeConstants,B9={series:{highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[O9.NUMBER]:{crosshair:{snap:!1}},[O9.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:G9,CARTESIAN_POSITION:z9}=mW.ThemeConstants,_9={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:e=>new F9(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:G9.NUMBER,position:z9.LEFT},{type:G9.ORDINAL_TIME,position:z9.BOTTOM}],themeTemplate:B9,groupable:!1,paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:n,palette:o}=e;if("user-indexed"===n){const{fills:e,strokes:n}=t(i);return{item:{up:{fill:"transparent",stroke:n[0]},down:{fill:e[0],stroke:n[0]}}}}return{item:{up:o.up,down:o.down}}}},{Logger:V9}=mW;function H9(e,t,i){i||(t=function(e){const t=new Set;for(const i of e)W9(e,i,t,[]);0!==t.size&&V9.warnOnce("Some links formed circular references. These will be removed from the output.");return 0===t.size?e:e.filter((e=>!t.has(e)))}(t));const n=new Map;for(const s of e)n.set(s.id,{datum:s,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let o=0;return n.forEach(((e,i)=>{o=Math.max(o,j9(n,t,e,i,-1,[])+j9(n,t,e,i,1,[])+1)})),{links:t,nodeGraph:n,maxPathLength:o}}function W9(e,t,i,n){const o=n.indexOf(t);if(-1!==o){for(let e=o;e<n.length;e+=1)i.add(n[e]);return}n.push(t);const{toNode:s}=t;for(const r of e)r.fromNode===s&&W9(e,r,i,n);n.pop()}function j9(e,t,i,n,o,s){if(s.includes(n))return 1/0;let r=-1===o?i.maxPathLengthBefore:i.maxPathLengthAfter;if(-1===r){r=0;const a=-1===o?i.linksBefore:i.linksAfter;for(const i of t){const{fromNode:l,toNode:d}=i,c=-1===o?d.id:l.id,h=-1===o?l.id:d.id,u=n===c?e.get(h):void 0;null!=u&&(a.push({node:u,link:i}),null===s||void 0===s||s.push(n),r=Math.max(r,j9(e,t,u,h,o,s)+1),null===s||void 0===s||s.pop())}-1===o?i.maxPathLengthBefore=r:i.maxPathLengthAfter=r}return r}var{DataModelSeries:U9,DataController:K9,Validate:Y9,ARRAY:Z9,keyProperty:X9,valueProperty:q9,Selection:Q9,Group:J9,TransformableText:$9}=mW,eee=class extends U9{constructor(){super(...arguments),this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new J9({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new J9({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new J9({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new J9({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new J9({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new J9({name:"nodeGroup"})),this.labelSelection=Q9.select(this.labelGroup,$9),this.linkSelection=Q9.select(this.linkGroup,(()=>this.linkFactory())),this.nodeSelection=Q9.select(this.nodeGroup,(()=>this.nodeFactory())),this.focusLinkSelection=Q9.select(this.focusLinkGroup,(()=>this.linkFactory())),this.focusNodeSelection=Q9.select(this.focusNodeGroup,(()=>this.nodeFactory())),this.highlightLinkSelection=Q9.select(this.highlightLinkGroup,(()=>this.linkFactory())),this.highlightNodeSelection=Q9.select(this.highlightNodeGroup,(()=>this.nodeFactory()))}get nodes(){var e;return null!==(e=this.properties.nodes)&&void 0!==e?e:this._chartNodes}setChartNodes(e){this._chartNodes=e,this.nodes===e&&(this.nodeDataRefresh=!0)}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}async processData(e){const{data:t,nodes:i}=this;if(null==t||!this.properties.isValid())return;const{fromKey:n,toKey:o,sizeKey:s,idKey:r,labelKey:a}=this.properties,l=new K9("standalone",e.suppressFieldDotNotation),d=null!=i?l.request(this.id,i,{props:[X9(r,void 0,{id:"idValue",includeProperty:!1}),...null!=a?[q9(a,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,c=this.requestDataModel(e,t,{props:[q9(n,void 0,{id:"fromValue",includeProperty:!1}),q9(o,void 0,{id:"toValue",includeProperty:!1}),...null!=s?[q9(s,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});null!=i&&l.execute();const[h,u]=await Promise.all([d,c]);this.nodesDataModel=null===h||void 0===h?void 0:h.dataModel,this.nodesProcessedData=null===h||void 0===h?void 0:h.processedData;const p=new Map;if(null==h){const e=u.dataModel.resolveColumnById(this,"fromValue",u.processedData),t=u.dataModel.resolveColumnById(this,"toValue",u.processedData),i=e=>{const t=p.size;return{series:this,itemId:void 0,datum:{},datumIndex:t,type:1,index:t,id:e,size:0,label:e}};u.processedData.rawData.forEach(((n,o)=>{const s=e[o],r=t[o];null!=s&&null!=r&&(p.has(s)||p.set(s,i(s)),p.has(r)||p.set(r,i(r)))}))}else{const e=h.dataModel.resolveColumnById(this,"idValue",h.processedData),t=null!=a?h.dataModel.resolveColumnById(this,"labelValue",h.processedData):void 0;h.processedData.rawData.forEach(((i,n)=>{const o=e[n],s=null===t||void 0===t?void 0:t[n];p.set(o,{series:this,itemId:void 0,datum:i,datumIndex:n,type:1,index:n,id:o,size:0,label:s})}))}this.processedNodes=p}getNodeGraph(e,t,i){let{includeCircularReferences:n}=i;const{dataModel:o,processedData:s}=this;if(null==o||null==s||0===s.rawData.length){const{links:e,nodeGraph:t,maxPathLength:i}=H9((new Map).values(),[],n);return this.nodeCount=0,this.linkCount=0,{nodeGraph:t,links:e,maxPathLength:i}}const{sizeKey:r}=this.properties,a=o.resolveColumnById(this,"fromValue",s),l=o.resolveColumnById(this,"toValue",s),d=null!=r?o.resolveColumnById(this,"sizeValue",s):void 0,c=new Map;this.processedNodes.forEach((t=>{const i=e(t);c.set(t.id,i)}));const h=[];s.rawData.forEach(((e,i)=>{const n=a[i],o=l[i],s=null!=d?d[i]:1,r=c.get(n),u=c.get(o);if(s<=0||null==r||null==u)return;const p=t({series:this,itemId:void 0,datum:e,datumIndex:i,type:0,index:i,fromNode:r,toNode:u,size:s});h.push(p)}));const{links:u,nodeGraph:p,maxPathLength:g}=H9(c.values(),h,n);return this.nodeCount=p.size,this.linkCount=u.length,{nodeGraph:p,links:u,maxPathLength:g}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){var t,i,n,o,s,r,a,l,d,c,h,u;const{seriesRect:p}=e,g={seriesRectWidth:null!==(t=null===p||void 0===p?void 0:p.width)&&void 0!==t?t:0,seriesRectHeight:null!==(i=null===p||void 0===p?void 0:p.height)&&void 0!==i?i:0};null!=this._nodeDataDependencies&&this._nodeDataDependencies.seriesRectWidth===g.seriesRectWidth&&this._nodeDataDependencies.seriesRectHeight===g.seriesRectHeight||(this._nodeDataDependencies=g),this.updateSelections();const m=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.nodeData)&&void 0!==n?n:[],v=null!==(s=null===(r=this.contextNodeData)||void 0===r?void 0:r.labelData)&&void 0!==s?s:[];let f,y,b,C,x=null===(a=this.ctx.highlightManager)||void 0===a?void 0:a.getActiveHighlight();if((null===(l=x)||void 0===l?void 0:l.series)===this&&null==x.type){const{itemId:e}=x;x=null!=e?m.find((t=>1===t.type&&t.id===e)):void 0}else(null===(d=x)||void 0===d?void 0:d.series)!==this&&(x=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=null!=x&&null!==(c=this.properties.highlightStyle.series.dimOpacity)&&void 0!==c?c:1,this.labelSelection=this.updateLabelSelection({labelData:v,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:m.filter((e=>0===e.type)),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:m.filter((e=>1===e.type)),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1}),1===(null===(h=x)||void 0===h?void 0:h.type)?(f=m.filter((e=>0===e.type&&(e.toNode===x||e.fromNode===x))),y=f.map((e=>e.fromNode===x?e.toNode:e.fromNode)),y.push(x),b=[],C=[x]):0===(null===(u=x)||void 0===u?void 0:u.type)?(f=[x],y=[x.fromNode,x.toNode],b=[x],C=[]):(f=[],y=[],b=[],C=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:f,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:y,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:b,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:C,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(e){}getSeriesDomain(e){return[]}getSeriesRange(e,t){return[NaN,NaN]}legendItemSymbol(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{fills:n,strokes:o}=this.properties,{fill:s=n[t%n.length],fillOpacity:r=1,stroke:a=o[t%o.length],strokeWidth:l=0,strokeOpacity:d=1}=i;return{marker:{fill:s,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:d}}}getLegendData(e){if("category"!==e)return[];const{showInLegend:t}=this.properties;return Array.from(this.processedNodes.values(),((e,i)=>{let{id:n,label:o}=e;return{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:!0,label:{text:null!==o&&void 0!==o?o:n},symbol:this.legendItemSymbol(1,i),hideInLegend:!t,isFixed:!0}}))}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.linkSelection.each(((e,s)=>{const r=e.containsPoint(i,n)?0:1/0;r<o&&(o=r,t=s)})),this.nodeSelection.each(((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)})),null!=t?{datum:t,distance:Math.sqrt(o)}:void 0}getDatumAriaText(e,t){var i;return 0===e.type?this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:e.index+1,count:this.linkCount,from:e.fromNode.id,to:e.toNode.id,size:e.size,sizeName:null!==(i=this.properties.sizeName)&&void 0!==i?i:this.properties.sizeKey}):1===e.type?this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:e.index+1,count:this.nodeCount,description:t}):void 0}};dj([Y9(Z9,{optional:!0,property:"nodes"})],eee.prototype,"_chartNodes",2);var{BBox:tee,Path:iee,ScenePathChangeDetection:nee}=mW;function oee(e){let{radius:t,startAngle:i,endAngle:n,tension:o}=e;const s=t*Math.cos(i),r=t*Math.sin(i),a=t*Math.cos(n),l=t*Math.sin(n);return{x:[s,s*o,a*o,a],y:[r,r*o,l*o,l]}}var see=class extends iee{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}computeBBox(){const{centerX:e,centerY:t,radius:i,startAngle1:n,endAngle1:o,startAngle2:s,endAngle2:r,tension:a}=this,l=oee({radius:i,startAngle:n,endAngle:r,tension:a}),d=oee({radius:i,startAngle:s,endAngle:o,tension:a}),c=Math.min(...l.x,...d.x),h=Math.max(...l.x,...d.x)-c,u=Math.min(...l.y,...d.y),p=Math.max(...l.y,...d.y)-u;return new tee(e+c,t+u,h,p)}tensionedCurveTo(e,t,i,n,o,s,r,a){const{path:l,tension:d}=this,c=1-d;l.cubicCurveTo((i-e)*c+e,(n-t)*c+t,(o-r)*c+r,(s-a)*c+a,r,a)}updatePath(){const{path:e,centerX:t,centerY:i,radius:n}=this;let{startAngle1:o,endAngle1:s,startAngle2:r,endAngle2:a}=this;o>r&&([o,r]=[r,o],[s,a]=[a,s]),e.clear();const l=t+n*Math.cos(o),d=i+n*Math.sin(o);e.moveTo(l,d),this.tensionedCurveTo(l,d,t,i,t,i,t+n*Math.cos(a),i+n*Math.sin(a)),e.arc(t,i,n,a,r,!0),this.tensionedCurveTo(t+n*Math.cos(r),i+n*Math.sin(r),t,i,t,i,t+n*Math.cos(s),i+n*Math.sin(s)),e.arc(t,i,n,s,o,!0),e.closePath()}};dj([nee()],see.prototype,"centerX",2),dj([nee()],see.prototype,"centerY",2),dj([nee()],see.prototype,"radius",2),dj([nee()],see.prototype,"startAngle1",2),dj([nee()],see.prototype,"endAngle1",2),dj([nee()],see.prototype,"startAngle2",2),dj([nee()],see.prototype,"endAngle2",2),dj([nee()],see.prototype,"tension",2);var{BaseProperties:ree,SeriesTooltip:aee,SeriesProperties:lee,ARRAY:dee,COLOR_STRING:cee,COLOR_STRING_ARRAY:hee,FUNCTION:uee,LINE_DASH:pee,OBJECT:gee,POSITIVE_NUMBER:mee,RATIO:vee,STRING:fee,Validate:yee,Label:bee}=mW,Cee=class extends bee{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};dj([yee(mee)],Cee.prototype,"spacing",2),dj([yee(mee)],Cee.prototype,"maxWidth",2);var xee=class extends ree{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};dj([yee(cee,{optional:!0})],xee.prototype,"fill",2),dj([yee(vee)],xee.prototype,"fillOpacity",2),dj([yee(cee,{optional:!0})],xee.prototype,"stroke",2),dj([yee(vee)],xee.prototype,"strokeOpacity",2),dj([yee(mee)],xee.prototype,"strokeWidth",2),dj([yee(pee)],xee.prototype,"lineDash",2),dj([yee(mee)],xee.prototype,"lineDashOffset",2),dj([yee(vee)],xee.prototype,"tension",2),dj([yee(uee,{optional:!0})],xee.prototype,"itemStyler",2);var wee=class extends ree{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};dj([yee(mee)],wee.prototype,"spacing",2),dj([yee(mee)],wee.prototype,"width",2),dj([yee(cee,{optional:!0})],wee.prototype,"fill",2),dj([yee(vee)],wee.prototype,"fillOpacity",2),dj([yee(cee,{optional:!0})],wee.prototype,"stroke",2),dj([yee(vee)],wee.prototype,"strokeOpacity",2),dj([yee(mee)],wee.prototype,"strokeWidth",2),dj([yee(pee)],wee.prototype,"lineDash",2),dj([yee(mee)],wee.prototype,"lineDashOffset",2),dj([yee(uee,{optional:!0})],wee.prototype,"itemStyler",2);var See=class extends lee{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fills=[],this.strokes=[],this.label=new Cee,this.link=new xee,this.node=new wee,this.tooltip=new aee}};dj([yee(fee)],See.prototype,"fromKey",2),dj([yee(fee)],See.prototype,"toKey",2),dj([yee(fee)],See.prototype,"idKey",2),dj([yee(fee,{optional:!0})],See.prototype,"idName",2),dj([yee(fee,{optional:!0})],See.prototype,"labelKey",2),dj([yee(fee,{optional:!0})],See.prototype,"labelName",2),dj([yee(fee,{optional:!0})],See.prototype,"sizeKey",2),dj([yee(fee,{optional:!0})],See.prototype,"sizeName",2),dj([yee(dee,{optional:!0})],See.prototype,"nodes",2),dj([yee(hee)],See.prototype,"fills",2),dj([yee(hee)],See.prototype,"strokes",2),dj([yee(gee)],See.prototype,"label",2),dj([yee(gee)],See.prototype,"link",2),dj([yee(gee)],See.prototype,"node",2),dj([yee(gee)],See.prototype,"tooltip",2);var{SeriesNodePickMode:Mee,CachedTextMeasurerPool:Dee,TextWrapper:kee,TextUtils:Iee,createDatumId:Aee,angleBetween:Tee,normalizeAngle360:Eee,isBetweenAngles:Ree,Logger:Lee,Sector:Pee,evaluateBezier:Nee}=mW,Fee=e=>e.startAngle+Tee(e.startAngle,e.endAngle)/2,Oee=class extends eee{constructor(e){super({moduleCtx:e,pickModes:[Mee.NEAREST_NODE,Mee.EXACT_SHAPE_MATCH]}),this.properties=new See}isLabelEnabled(){return(null!=this.properties.labelKey||null==this.nodes)&&this.properties.label.enabled}linkFactory(){return new see}nodeFactory(){return new Pee}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:n,toKey:o,sizeKey:s,label:{spacing:r,maxWidth:a,fontSize:d},node:{width:c,spacing:h}}=this.properties,u=t/2,p=i/2;let g=[];const{nodeGraph:m,links:v}=this.getNodeGraph((e=>l(l({},e),{},{centerX:u,centerY:p,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN})),(e=>l(l({},e),{},{centerX:u,centerY:p,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN})),{includeCircularReferences:!0});let f=0;m.forEach(((e,t)=>{let{datum:i,linksBefore:r,linksAfter:a}=e;const l=r.reduce(((e,t)=>{let{link:i}=t;return e+i.size}),0)+a.reduce(((e,t)=>{let{link:i}=t;return e+i.size}),0);if(0===l)m.delete(t);else{i.size=l,f+=i.size;const e=this.getLabelText(this.properties.label,{datum:i.datum,value:i.label,fromKey:n,toKey:o,sizeKey:s,size:i.size});i.label=String(e)}}));let y=0;if(this.isLabelEnabled()){const e=this.properties.label.getFont();let t=0;m.forEach((i=>{let{datum:n}=i;const{id:o,label:s}=n;if(null==s)return;const r=kee.wrapText(s,{maxWidth:a,font:this.properties.label,textWrap:"never"}),{width:l}=Dee.measureText(r,{font:e,textAlign:"left",textBaseline:"middle"});t=Math.max(l,t),g.push({id:o,text:r,centerX:u,centerY:p,angle:NaN,radius:NaN})})),y=t+r}const b=m.size;let C=Math.min(t,i)/2-c-y,x=h/C;if(0!==y&&(b*x>=1.5*Math.PI||C<=0)&&(g=[],C=Math.min(t,i)/2-c,x=h/C),b*x>=2*Math.PI||C<=0)return void Lee.warnOnce("There was insufficient space to display the Chord Series.");const w=C,S=C+c,M=Math.max((2*Math.PI-b*x)/f,0);let D=0;m.forEach((e=>{let{datum:t}=e;t.innerRadius=w,t.outerRadius=S,t.startAngle=D,t.endAngle=D+t.size*M,D=t.endAngle+x;const i=(t.innerRadius+t.outerRadius)/2,n=Fee(t);t.midPoint={x:t.centerX+i*Math.cos(n),y:t.centerY+i*Math.sin(n)}}));const k=[];m.forEach((e=>{let{datum:t,linksBefore:i,linksAfter:n}=e;const o=Fee(t),s=[...i.map((e=>({link:e.link,distance:Tee(Fee(e.node.datum),o),after:!1}))),...n.map((e=>({link:e.link,distance:Tee(Fee(e.node.datum),o),after:!0})))];let r=t.startAngle;s.toSorted(((e,t)=>e.distance-t.distance)).forEach((e=>{let{link:t,after:i}=e;const n=t.size*M;i?(t.startAngle1=r,t.endAngle1=r+n):(t.startAngle2=r,t.endAngle2=r+n),r+=t.size*M})),k.push(t)}));const{tension:I}=this.properties.link;v.forEach((e=>{e.radius=C;const t=oee({radius:C,startAngle:e.startAngle1,endAngle:e.endAngle2,tension:I}),i=oee({radius:C,startAngle:e.startAngle2,endAngle:e.endAngle1,tension:I}),n=Nee(...t.x,.5),o=Nee(...t.y,.5),s=Nee(...i.x,.5),r=Nee(...i.y,.5);e.midPoint={x:e.centerX+(n+s)/2,y:e.centerY+(o+r)/2},k.push(e)})),g.forEach((e=>{var t;const i=null===(t=m.get(e.id))||void 0===t?void 0:t.datum;null!=i&&(e.radius=S+r,e.angle=Eee(i.startAngle+Tee(i.startAngle,i.endAngle)/2))})),g.sort(((e,t)=>e.angle-t.angle));let A=1/0,T=-1/0;return g=g.filter((e=>{const t=Iee.getLineHeight(d),i=Math.atan2(t/2,e.radius),n=e.angle-i,o=e.angle+i;return!Ree(A,n,o)&&(!Ree(T,n,o)&&(A=Math.min(n,A),T=Math.max(o,T),!0))})),{itemId:e,nodeData:k,labelData:g}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:r}=this.properties.label;t.each(((e,t)=>{let{text:a,centerX:l,centerY:d,radius:c,angle:h}=t;e.visible=!0,e.translationX=l+c*Math.cos(h),e.translationY=d+c*Math.sin(h),e.text=a,e.fill=i,e.fontStyle=n,e.fontWeight=o,e.fontSize=s,e.fontFamily=r,e.textBaseline="middle",Math.cos(h)>=0?(e.textAlign="left",e.rotation=h):(e.textAlign="right",e.rotation=h-Math.PI)}))}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>Aee([e.type,e.id])))}getBaseNodeStyle(e){var t,i,n,o,s,r,a;const{properties:l}=this,{fill:d,fillOpacity:c,stroke:h,strokeOpacity:u,lineDash:p,lineDashOffset:g}=l.node,m=this.getStrokeWidth(l.node.strokeWidth),v=e?l.highlightStyle.item:void 0;return{fill:null!==(t=null===v||void 0===v?void 0:v.fill)&&void 0!==t?t:d,fillOpacity:null!==(i=null===v||void 0===v?void 0:v.fillOpacity)&&void 0!==i?i:c,stroke:null!==(n=null===v||void 0===v?void 0:v.stroke)&&void 0!==n?n:h,strokeOpacity:null!==(o=null===v||void 0===v?void 0:v.strokeOpacity)&&void 0!==o?o:u,strokeWidth:null!==(s=null===v||void 0===v?void 0:v.strokeWidth)&&void 0!==s?s:m,lineDash:null!==(r=null===v||void 0===v?void 0:v.lineDash)&&void 0!==r?r:p,lineDashOffset:null!==(a=null===v||void 0===v?void 0:v.lineDashOffset)&&void 0!==a?a:g}}getNodeStyleOverrides(e,t,i,n,o,s,r){var a,l;const{id:d,properties:c}=this,{fills:h,strokes:u}=c,{itemStyler:p}=c.node,g=null!==(a=s.fill)&&void 0!==a?a:h[i%h.length],m=null!==(l=s.stroke)&&void 0!==l?l:u[i%u.length],v={};if(r||(v.fill=g,v.stroke=m),null!=p){const i=this.cachedDatumCallback(Aee(e,r?"highlight":"node"),(()=>{const{fillOpacity:e=1,strokeOpacity:i=1,strokeWidth:a=0,lineDash:l=[],lineDashOffset:c=0}=s;return p({seriesId:d,datum:t,highlighted:r,label:o,size:n,fill:g,fillOpacity:e,stroke:m,strokeOpacity:i,strokeWidth:a,lineDash:l,lineDashOffset:c})}));Object.assign(v,i)}return v}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getBaseNodeStyle(i);t.each(((e,t)=>{var o,s,r,a,l,d,c;const{datumIndex:h,size:u,label:p}=t,g=this.getNodeStyleOverrides(String(h),t,h,u,p,n,i);e.centerX=t.centerX,e.centerY=t.centerY,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.fill=null!==(o=g.fill)&&void 0!==o?o:null===n||void 0===n?void 0:n.fill,e.fillOpacity=null!==(s=g.fillOpacity)&&void 0!==s?s:null===n||void 0===n?void 0:n.fillOpacity,e.stroke=null!==(r=g.stroke)&&void 0!==r?r:null===n||void 0===n?void 0:n.stroke,e.strokeOpacity=null!==(a=g.strokeOpacity)&&void 0!==a?a:null===n||void 0===n?void 0:n.strokeOpacity,e.strokeWidth=null!==(l=g.strokeWidth)&&void 0!==l?l:null===n||void 0===n?void 0:n.strokeWidth,e.lineDash=null!==(d=g.lineDash)&&void 0!==d?d:null===n||void 0===n?void 0:n.lineDash,e.lineDashOffset=null!==(c=g.lineDashOffset)&&void 0!==c?c:null===n||void 0===n?void 0:n.lineDashOffset,e.inset=e.strokeWidth/2}))}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>Aee([e.type,e.index,e.fromNode.id,e.toNode.id])))}getBaseLinkStyle(e){var t,i,n,o,s,r,a;const{properties:l}=this,{fill:d,fillOpacity:c,stroke:h,strokeOpacity:u,lineDash:p,lineDashOffset:g,tension:m}=l.link,v=this.getStrokeWidth(l.link.strokeWidth),f=e?l.highlightStyle.item:void 0;return{fill:null!==(t=null===f||void 0===f?void 0:f.fill)&&void 0!==t?t:d,fillOpacity:null!==(i=null===f||void 0===f?void 0:f.fillOpacity)&&void 0!==i?i:c,stroke:null!==(n=null===f||void 0===f?void 0:f.stroke)&&void 0!==n?n:h,strokeOpacity:null!==(o=null===f||void 0===f?void 0:f.strokeOpacity)&&void 0!==o?o:u,strokeWidth:null!==(s=null===f||void 0===f?void 0:f.strokeWidth)&&void 0!==s?s:v,lineDash:null!==(r=null===f||void 0===f?void 0:f.lineDash)&&void 0!==r?r:p,lineDashOffset:null!==(a=null===f||void 0===f?void 0:f.lineDashOffset)&&void 0!==a?a:g,tension:m}}getLinkStyleOverrides(e,t,i,n,o){var s,r;const{id:a,properties:l}=this,{fills:d,strokes:c}=l,{itemStyler:h}=l.link,u=null!==(s=n.fill)&&void 0!==s?s:d[i%d.length],p=null!==(r=n.stroke)&&void 0!==r?r:c[i%c.length],g={};if(o||(g.fill=u,g.stroke=p),null!=h){const i=this.cachedDatumCallback(Aee(e,o?"highlight":"node"),(()=>{const{fillOpacity:e=1,strokeOpacity:i=1,strokeWidth:s=0,lineDash:r=[],lineDashOffset:l=0,tension:d}=n;return h({seriesId:a,datum:t,highlighted:o,tension:d,fill:u,fillOpacity:e,stroke:p,strokeOpacity:i,strokeWidth:s,lineDash:r,lineDashOffset:l})}));Object.assign(g,i)}return g}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getBaseLinkStyle(i);t.each(((e,t)=>{var o,s,r,a,l,d,c,h;const{datumIndex:u}=t,p=t.fromNode.datumIndex,g=this.getLinkStyleOverrides(String(u),t,p,n,i);e.centerX=t.centerX,e.centerY=t.centerY,e.radius=t.radius,e.startAngle1=t.startAngle1,e.endAngle1=t.endAngle1,e.startAngle2=t.startAngle2,e.endAngle2=t.endAngle2,e.fill=null!==(o=null===g||void 0===g?void 0:g.fill)&&void 0!==o?o:n.fill,e.fillOpacity=null!==(s=null===g||void 0===g?void 0:g.fillOpacity)&&void 0!==s?s:n.fillOpacity,e.stroke=null!==(r=null===g||void 0===g?void 0:g.stroke)&&void 0!==r?r:n.stroke,e.strokeOpacity=null!==(a=null===g||void 0===g?void 0:g.strokeOpacity)&&void 0!==a?a:n.strokeOpacity,e.strokeWidth=null!==(l=null===g||void 0===g?void 0:g.strokeWidth)&&void 0!==l?l:n.strokeWidth,e.lineDash=null!==(d=null===g||void 0===g?void 0:g.lineDash)&&void 0!==d?d:n.lineDash,e.lineDashOffset=null!==(c=null===g||void 0===g?void 0:g.lineDashOffset)&&void 0!==c?c:n.lineDashOffset,e.tension=null!==(h=null===g||void 0===g?void 0:g.tension)&&void 0!==h?h:n.tension}))}getTooltipContent(e){const{id:t,processedData:i,nodesProcessedData:n,properties:o}=this,{fromKey:s,toKey:r,sizeKey:a,sizeName:d,tooltip:c}=o,{datumIndex:h}=e,u=0===e.type?e.fromNode.index:e.index,p=0===e.type?"".concat(e.fromNode.label," - ").concat(e.toNode.label):e.label,g=0===e.type?null===i||void 0===i?void 0:i.rawData[e.datumIndex]:null===n||void 0===n?void 0:n.rawData[e.datumIndex],m=e.size;let v;if(0===e.type){const t=e.fromNode.datumIndex,i=this.getBaseLinkStyle(!1);Object.assign(i,this.getLinkStyleOverrides(String(h),g,t,i,!1)),v=i}else{const t=e.label,i=this.getBaseNodeStyle(!1);Object.assign(i,this.getNodeStyleOverrides(String(h),g,h,m,t,i,!1)),v=i}return c.formatTooltip({title:p,symbol:this.legendItemSymbol(e.type,u,v),data:null!=a?[{label:d,fallbackLabel:a,value:String(m)}]:[]},l({seriesId:t,datum:g,title:p,fromKey:s,toKey:r,sizeKey:a,sizeName:d,size:m},v))}computeFocusBounds(e){var t;let{datumIndex:i}=e;const n=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i];if(1!==(null===n||void 0===n?void 0:n.type)){if(0!==(null===n||void 0===n?void 0:n.type));else for(const o of this.linkSelection)if(o.datum===n)return o.node}else for(const o of this.nodeSelection)if(o.datum===n)return o.node}};Oee.className="ChordSeries",Oee.type="chord";var{DEFAULT_FONT_FAMILY:Bee,DEFAULT_LABEL_COLOUR:Gee}=mW.ThemeSymbols,zee={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},moduleFactory:e=>new Oee(e),themeTemplate:{series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:Bee,color:Gee,spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory(e){let{takeColors:t,colorsCount:i}=e;const{fills:n,strokes:o}=t(i);return{fills:n,strokes:o}}},{ThemeSymbols:{DEFAULT_INSIDE_SERIES_LABEL_COLOUR:_ee,DEFAULT_FONT_FAMILY:Vee},ThemeConstants:{CARTESIAN_AXIS_TYPE:Hee,CARTESIAN_POSITION:Wee}}=mW;function jee(e){var t;const i=null!==(t=null===e||void 0===e?void 0:e.stageLabel)&&void 0!==t?t:{},{placement:o}=i,s=n(i,rj);return"horizontal"!==(null===e||void 0===e?void 0:e.direction)?[{type:Hee.CATEGORY,position:"after"===o?Wee.RIGHT:Wee.LEFT,label:s},{type:Hee.NUMBER,position:Wee.BOTTOM}]:[{type:Hee.NUMBER,position:Wee.LEFT},{type:Hee.CATEGORY,position:"before"===o?Wee.TOP:Wee.BOTTOM,label:s}]}var Uee={series:{direction:"vertical",strokeWidth:0,spacingRatio:.25,label:{enabled:!0,fontSize:12,fontFamily:Vee,color:_ee},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:0}},axes:{[Hee.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(e){var t;return Math.abs(e.value).toFixed(null!==(t=e.fractionDigits)&&void 0!==t?t:0)}}},[Hee.CATEGORY]:{line:{enabled:!1}}}},{lineDistanceSquared:Kee,BBox:Yee,Path:Zee,ScenePathChangeDetection:Xee}=mW,qee=1e-6;function Qee(e,t){let[i,n]=e,[o,s]=t;return Math.abs(i-o)<=qee&&Math.abs(n-s)<=qee}var Jee=class extends Zee{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:e,y0:t,x1:i,y1:n,x2:o,y2:s,x3:r,y3:a}=this;return{x:(e+i+o+r)/4,y:(t+n+s+a)/4}}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const{x0:i,y0:n,x1:o,y1:s,x2:r,y2:a,x3:l,y3:d}=this;return Math.min(Kee(e,t,i,n,o,s,1/0),Kee(e,t,o,s,r,a,1/0),Kee(e,t,r,a,l,d,1/0),Kee(e,t,l,d,i,n,1/0))}computeBBox(){const{x0:e,y0:t,x1:i,y1:n,x2:o,y2:s,x3:r,y3:a}=this,l=Math.min(e,i,o,r),d=Math.max(e,i,o,r)-l,c=Math.min(t,n,s,a),h=Math.max(t,n,s,a)-c;return new Yee(l,c,d,h)}updatePath(){const{path:e,x0:t,y0:i,x1:n,y1:o,x2:s,y2:r,x3:a,y3:l}=this,d=[[t,i],[n,o],[s,r],[a,l]];let c,h;e.clear(),d.forEach((t=>{var i;if(null!=c&&Qee(c,t)||null!=h&&Qee(h,t))return;const[n,o]=t;null==c?e.moveTo(n,o):e.lineTo(n,o),null!==(i=c)&&void 0!==i||(c=t),h=t})),e.closePath()}};dj([Xee()],Jee.prototype,"x0",2),dj([Xee()],Jee.prototype,"y0",2),dj([Xee()],Jee.prototype,"x1",2),dj([Xee()],Jee.prototype,"y1",2),dj([Xee()],Jee.prototype,"x2",2),dj([Xee()],Jee.prototype,"y2",2),dj([Xee()],Jee.prototype,"x3",2),dj([Xee()],Jee.prototype,"y3",2);var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:$ee}=mW;function ete(e,t,i,n){const{x0:o,y0:s,x1:r,y1:a,x2:l,y2:d,x3:c,y3:h,opacity:u}=e;return i?{x0:(o+c)/2,y0:(s+h)/2,x1:(r+l)/2,y1:(a+d)/2,x2:(r+l)/2,y2:(a+d)/2,x3:(o+c)/2,y3:(s+h)/2,opacity:u}:{x0:(o+r)/2,y0:(s+a)/2,x1:(o+r)/2,y1:(s+a)/2,x2:(l+c)/2,y2:(d+h)/2,x3:(l+c)/2,y3:(d+h)/2,opacity:u}}function tte(e,t){const{x0:i,y0:n,x1:o,y1:s,x2:r,y2:a,x3:l,y3:d,opacity:c}=t;return{x0:i,y0:n,x1:o,y1:s,x2:r,y2:a,x3:l,y3:d,opacity:c}}var{SeriesNodePickMode:ite,SeriesZIndexMap:nte,valueProperty:ote,keyProperty:ste,ChartAxisDirection:rte,updateLabelNode:ate,SMALLEST_KEY_INTERVAL:lte,LARGEST_KEY_INTERVAL:dte,diff:cte,fixNumericExtent:hte,seriesLabelFadeInAnimation:ute,resetMotion:pte,resetLabelFn:gte,animationValidation:mte,computeBarFocusBounds:vte,createDatumId:fte,ContinuousScale:yte,Group:bte,Selection:Cte,PointerEvents:xte,motion:wte}=mW,Ste=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.stageKey,this.yKey=n.properties.valueKey}},Mte=class extends mW.AbstractBarSeries{constructor(e){let{moduleCtx:t,animationResetFns:i}=e;super({moduleCtx:t,pickModes:[ite.AXIS_ALIGNED,ite.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["stageKey"],y:["valueKey"]},directionNames:{x:[],y:[]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:i.datum,label:gte}}),this.NodeEvent=Ste,this.connectorNodeGroup=this.contentGroup.appendChild(new bte({name:"".concat(this.id,"-series-connectorNodes"),zIndex:nte.BACKGROUND})),this.connectorSelection=Cte.select(this.connectorNodeGroup,(()=>this.connectionFactory())),this.connectorNodeGroup.pointerEvents=xte.None}get pickModeAxis(){return"main-category"}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.connectorNodeGroup.zIndex=[nte.BACKGROUND,e],!0)}isVertical(){return!super.isVertical()}connectionFactory(){return new Jee}async processData(e){var t,i,n,o;if(!this.properties.isValid())return;const{stageKey:s,valueKey:r}=this.properties,{visible:a,id:d}=this,c=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,h=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:u,xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:c,yScale:h}),m=[];this.ctx.animationManager.isSkipped()||(this.processedData&&m.push(cte(this.id,this.processedData)),m.push(mte()));const v=this.visible?{}:{forceValue:0},{processedData:f}=await this.requestDataModel(e,this.data,{props:[ste(s,p,{id:"xValue"}),ote(r,g,l(l({id:"yValue"},v),{},{validation:(e,t,i)=>a&&this.ctx.legendManager.getItemEnabled({seriesId:d,itemId:i}),invalidValue:0})),...u?[lte,dte]:[],...m],groupByKeys:!1});this.smallestDataInterval=null===(n=f.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.largestDataInterval=null===(o=f.reduced)||void 0===o?void 0:o.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,id:n,ctx:{legendManager:o}}=this;if(!t||!i)return[];const{keys:[s],values:r}=t.domain;if(e===this.getCategoryDirection()){const e=i.resolveProcessedDataDefById(this,"xValue");return"key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===(null===e||void 0===e?void 0:e.def.valueType)?this.hasData?s.filter(((e,t)=>o.getItemEnabled({seriesId:n,itemId:t}))):[]:this.padBandExtent(s)}{const e=r[i.resolveProcessedDataIndexById(this,"yValue")][1];return hte([-e,e])}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{hasData:e,data:t,dataModel:i,groupScale:n,processedData:o,id:s,ctx:{legendManager:r}}=this,a=this.getCategoryAxis(),l=this.getValueAxis();if(!(e&&t&&a&&l&&i&&"ungrouped"===(null===o||void 0===o?void 0:o.type)&&0!==o.rawData.length))return;const d=a.scale,c=l.scale,h=this.getBarDirection()===rte.X,{stageKey:u,valueKey:p}=this.properties,{strokeWidth:g}=this.barStyle(),m="".concat(p),v={itemId:m,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),visible:this.visible},f=this.visible;if(!f)return v;const y=i.resolveKeysById(this,"xValue",o),b=i.resolveColumnById(this,"yValue",o),{barWidth:C,groupIndex:x}=this.updateGroupScale(a),w=yte.is(d)?-.5*C:0;let S;return o.rawData.forEach(((e,t)=>{const i=f&&r.getItemEnabled({seriesId:s,itemId:t}),o=y[t];if(null==o)return;const a=Math.round(d.convert(o))+n.convert(String(x))+w,l=b[t],M=Math.round(c.convert(-l)),D=Math.round(c.convert(l)),k=Math.max(g,Math.abs(D-M)),I={x:h?Math.min(D,M):a,y:h?a:Math.min(D,M),width:h?k:C,height:h?C:k},A={x:I.x+I.width/2,y:I.y+I.height/2},T=this.createLabelData({rect:I,barAlongX:h,yDatum:l,datum:e,visible:i}),E={index:t,series:this,itemId:m,datum:e,datumIndex:t,xValue:o,yValue:l,xKey:u,yKey:p,x:I.x,y:I.y,width:I.width,height:I.height,midPoint:A,strokeWidth:g,opacity:1,label:T,visible:i};if(v.nodeData.push(E),null!=T&&v.labelData.push(T),null!=S){const e=S.rect,t=S.nodeDatum,i=S.datumIndex;h?v.connectorData.push({datum:t,datumIndex:i,x0:e.x,y0:e.y+e.height,x1:e.x+e.width,y1:e.y+e.height,x2:I.x+I.width,y2:I.y,x3:I.x,y3:I.y,opacity:1}):v.connectorData.push({datum:t,datumIndex:i,x0:e.x+e.width,y0:e.y,x1:I.x,y1:I.y,x2:I.x,y2:I.y+I.height,x3:e.x+e.width,y3:e.y+e.height,opacity:1})}i&&(S={itemId:m,rect:I,nodeDatum:E,datumIndex:t})})),v}updateNodes(e,t,i){var n,o;super.updateNodes(e,t,i);const{connectorSelection:s}=this,r=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.connectorData)&&void 0!==n?n:[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:s,connectorData:r}),this.updateConnectorNodes({connectorSelection:s})}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return i.update(n,void 0,(e=>this.getDatumId(e)))}updateConnectorSelection(e){const{connectorData:t,connectorSelection:i}=e;return i.update(this.connectorEnabled()?t:[],void 0,(e=>this.getDatumId(e.datum)))}updateConnectorNodes(e){const{fills:t,strokes:i}=this.properties,{fill:n,fillOpacity:o,stroke:s,strokeOpacity:r,strokeWidth:a,lineDash:l,lineDashOffset:d}=this.connectorStyle();e.connectorSelection.each(((e,c)=>{const{datumIndex:h}=c;e.setProperties(tte(0,c)),e.fill=null!==n&&void 0!==n?n:t[h%t.length],e.fillOpacity=o,e.stroke=null!==s&&void 0!==s?s:i[h%i.length],e.strokeOpacity=r,e.strokeWidth=a,e.lineDash=l,e.lineDashOffset=d}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,(e=>{e.pointerEvents=xte.None}))}updateLabelNodes(e){e.labelSelection.each(((e,t)=>{ate(e,this.properties.label,t)}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{fills:s,strokes:r,stageKey:a,valueKey:d,tooltip:c,itemStyler:h}=o,u=this.getCategoryAxis(),p=this.getValueAxis();if(!i||!n||0===n.rawData.length||!u||!p)return;const{datumIndex:g}=e,m=n.rawData[g],v=i.resolveKeysById(this,"xValue",n)[g],f=i.resolveColumnById(this,"yValue",n)[g];if(null==v)return;const y=l({fill:s[g%s.length],stroke:r[g%r.length]},this.barStyle());if(null!=h){const e=this.cachedDatumCallback(fte(String(g),"node"),(()=>h(l({seriesId:t,datum:m,stageKey:a,valueKey:d,highlighted:!1},y))));Object.assign(y,e)}return c.formatTooltip({symbol:this.legendItemSymbol(g),data:[{label:u.formatDatum(v),value:p.formatDatum(f)}]},l({seriesId:t,datum:m,title:a,stageKey:a,valueKey:d},y))}resetAllAnimation(e){super.resetAllAnimation(e),pte([this.connectorSelection],tte)}animateEmptyUpdateReady(e){let{labelSelection:t}=e;const{connectorSelection:i}=this,n=function(e,t){const i=e=>null==e;return{fromFn:(n,o,s)=>{let r;"updated"===s&&i(o)?s="removed":"updated"===s&&i(n.previousDatum)&&(s="added"),r="added"===s&&null==n.previousDatum&&"fade"===t?l(l({},tte(0,o)),{},{opacity:0}):"unknown"===s||"added"===s?ete(o,n.previousDatum,e):{x0:n.x0,y0:n.y0,x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,x3:n.x3,y3:n.y3,opacity:n.opacity};const a=$ee[s];return l(l({},r),{},{phase:a})},toFn:(n,o,s)=>{let r;return r="removed"===s&&null==n.datum&&"fade"===t?l(l({},tte(0,o)),{},{opacity:0}):"removed"===s||i(o)?ete(o,n.previousDatum,e):tte(0,o),r}}}(this.isVertical(),"normal");wte.fromToMotion(this.id,"connectors",this.ctx.animationManager,[i],n),ute(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const{labelSelection:t}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id),ute(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return"".concat(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){var t;let{datumIndex:i}=e;return vte(null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}legendItemSymbol(e){var t,i;const{strokeWidth:n,fillOpacity:o,strokeOpacity:s}=this.barStyle(),{fills:r,strokes:a}=this.properties;return{marker:{fill:null!==(t=r[e%r.length])&&void 0!==t?t:"black",fillOpacity:o,stroke:null!==(i=a[e%a.length])&&void 0!==i?i:"black",strokeWidth:n,strokeOpacity:s}}}getLegendData(e){const{id:t,processedData:i,dataModel:n,ctx:{legendManager:o},visible:s}=this;if(!n||!i||"category"!==e||!this.properties.isValid())return[];const{showInLegend:r}=this.properties,a=n.resolveKeysById(this,"xValue",i);return i.rawData.map(((e,i)=>{const n=a[i];if(null!=n)return{legendType:"category",id:t,itemId:i,seriesId:t,enabled:s&&o.getItemEnabled({seriesId:t,itemId:i}),label:{text:n},symbol:this.legendItemSymbol(i),skipAnimations:!0,hideInLegend:!r}})).filter((e=>null!=e))}},{Label:Dte,AbstractBarSeriesProperties:kte,SeriesTooltip:Ite,AxisLabel:Ate,Validate:Tte,UNION:Ete,COLOR_STRING_ARRAY:Rte,LINE_DASH:Lte,OBJECT:Pte,POSITIVE_NUMBER:Nte,RATIO:Fte,STRING:Ote}=mW,Bte=class extends Dte{constructor(){super(...arguments),this.spacing=0}};dj([Tte(Ete(["before","middle","after"],"a placement"))],Bte.prototype,"placement",2),dj([Tte(Nte)],Bte.prototype,"spacing",2);var Gte=class extends Ate{};dj([Tte(Ete(["before","after"],"a placement"))],Gte.prototype,"placement",2);var zte=class extends kte{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new Bte,this.stageLabel=new Gte,this.tooltip=new Ite}};function _te(e,t){let{x:i,y:n,width:o,height:s,opacity:r}=t;return{x1:i,y1:n,x2:i+o,y2:n+s,opacity:r}}dj([Tte(Ote)],zte.prototype,"stageKey",2),dj([Tte(Ote)],zte.prototype,"valueKey",2),dj([Tte(Rte)],zte.prototype,"fills",2),dj([Tte(Fte)],zte.prototype,"fillOpacity",2),dj([Tte(Rte)],zte.prototype,"strokes",2),dj([Tte(Nte)],zte.prototype,"strokeWidth",2),dj([Tte(Fte)],zte.prototype,"strokeOpacity",2),dj([Tte(Lte)],zte.prototype,"lineDash",2),dj([Tte(Nte)],zte.prototype,"lineDashOffset",2),dj([Tte(Pte)],zte.prototype,"label",2),dj([Tte(Pte)],zte.prototype,"stageLabel",2),dj([Tte(Pte)],zte.prototype,"tooltip",2);var{formatValue:Vte,Line:Hte}=mW,Wte=class extends Mte{constructor(e){super({moduleCtx:e,animationResetFns:{datum:_te}}),this.properties=new zte}get hasData(){var e;const{id:t,ctx:{legendManager:i}}=this,n=null===(e=this.data)||void 0===e?void 0:e.reduce(((e,n,o)=>e+(i.getItemEnabled({seriesId:t,itemId:o})?1:0)),0);return null!=n&&n>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0}}connectorStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:o}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:o}}nodeFactory(){return new Hte}createLabelData(e){let{rect:t,barAlongX:i,yDatum:n,datum:o,visible:s}=e;const{stageKey:r,valueKey:a,label:l}=this.properties,{spacing:d,placement:c}=l;let h,u,p,g;if(i)switch(h=t.x+t.width/2,p="center",c){case"before":u=t.y-d,g="bottom";break;case"after":u=t.y+t.height+d,g="top";break;default:u=t.y+t.height/2,g="middle"}else switch(u=t.y+t.height/2,g="middle",c){case"before":h=t.x-d,p="right";break;case"after":h=t.x+t.width+d,p="left";break;default:h=t.x+t.width/2,p="center"}return{x:h,y:u,textAlign:p,textBaseline:g,text:this.getLabelText(l,{itemId:a,value:n,datum:o,stageKey:r,valueKey:a},(e=>Vte(e,0))),itemId:a,datum:o,series:this,visible:s}}updateDatumNodes(e){const t=e.isHighlight?this.properties.highlightStyle.item:void 0;e.datumSelection.each(((e,i)=>{var n,o,s;e.setProperties(_te(0,i)),e.stroke=null===t||void 0===t?void 0:t.stroke,e.strokeWidth=null!==(n=null===t||void 0===t?void 0:t.strokeWidth)&&void 0!==n?n:0,e.strokeOpacity=null!==(o=null===t||void 0===t?void 0:t.strokeOpacity)&&void 0!==o?o:1,e.lineDash=null===t||void 0===t?void 0:t.lineDash,e.lineDashOffset=null!==(s=null===t||void 0===t?void 0:t.lineDashOffset)&&void 0!==s?s:0}))}};Wte.className="ConeFunnelSeries",Wte.type="cone-funnel";var{ThemeSymbols:{DEFAULT_LABEL_COLOUR:jte,DEFAULT_FONT_FAMILY:Ute},ThemeConstants:{CARTESIAN_AXIS_TYPE:Kte}}=mW,Yte={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"cone-funnel",moduleFactory:e=>new Wte(e),solo:!0,tooltipDefaults:{range:"nearest"},defaultAxes:jee,themeTemplate:{series:{direction:"vertical",strokeWidth:0,label:{enabled:!0,fontSize:12,fontFamily:Ute,color:jte,placement:"before",spacing:4}},seriesArea:{padding:{top:20,bottom:20}},axes:{[Kte.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(e){var t;return Math.abs(e.value).toFixed(null!==(t=e.fractionDigits)&&void 0!==t?t:0)}}},[Kte.CATEGORY]:{line:{enabled:!1}}}},paletteFactory:e=>{let{userPalette:t,themeTemplateParameters:i,takeColors:n,colorsCount:o}=e;const{fills:s}=n(o),r=i.get(mW.ThemeSymbols.DEFAULT_FUNNEL_SERIES_COLOR_RANGE),a="inbuilt"===t?r:[s[0],s[1]];return{fills:a,strokes:a.slice(0)}}},{Label:Zte,DropShadow:Xte,AbstractBarSeriesProperties:qte,BaseProperties:Qte,SeriesTooltip:Jte,AxisLabel:$te,Validate:eie,UNION:tie,BOOLEAN:iie,COLOR_STRING_ARRAY:nie,COLOR_STRING:oie,FUNCTION:sie,LINE_DASH:rie,OBJECT:aie,POSITIVE_NUMBER:lie,RATIO:die,STRING:cie}=mW,hie=class extends Zte{},uie=class extends $te{};dj([eie(tie(["before","after"],"a placement"))],uie.prototype,"placement",2);var pie=class extends Qte{constructor(){super(...arguments),this.enabled=!0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};dj([eie(iie)],pie.prototype,"enabled",2),dj([eie(oie,{optional:!0})],pie.prototype,"fill",2),dj([eie(die)],pie.prototype,"fillOpacity",2),dj([eie(oie,{optional:!0})],pie.prototype,"stroke",2),dj([eie(lie)],pie.prototype,"strokeWidth",2),dj([eie(die)],pie.prototype,"strokeOpacity",2),dj([eie(rie)],pie.prototype,"lineDash",2),dj([eie(lie)],pie.prototype,"lineDashOffset",2);var gie=class extends qte{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new pie,this.shadow=(new Xte).set({enabled:!1}),this.label=new hie,this.stageLabel=new uie,this.tooltip=new Jte}};dj([eie(cie)],gie.prototype,"stageKey",2),dj([eie(cie)],gie.prototype,"valueKey",2),dj([eie(nie)],gie.prototype,"fills",2),dj([eie(die)],gie.prototype,"fillOpacity",2),dj([eie(nie)],gie.prototype,"strokes",2),dj([eie(lie)],gie.prototype,"strokeWidth",2),dj([eie(die)],gie.prototype,"strokeOpacity",2),dj([eie(rie)],gie.prototype,"lineDash",2),dj([eie(lie)],gie.prototype,"lineDashOffset",2),dj([eie(die)],gie.prototype,"spacingRatio",2),dj([eie(sie,{optional:!0})],gie.prototype,"itemStyler",2),dj([eie(aie)],gie.prototype,"dropOff",2),dj([eie(aie)],gie.prototype,"shadow",2),dj([eie(aie)],gie.prototype,"label",2),dj([eie(aie)],gie.prototype,"stageLabel",2),dj([eie(aie)],gie.prototype,"tooltip",2);var{ChartAxisDirection:mie,getRectConfig:vie,updateRect:fie,checkCrisp:yie,resetBarSelectionsFn:bie,prepareBarAnimationFunctions:Cie,midpointStartingBarPosition:xie,formatValue:wie,Rect:Sie,motion:Mie}=mW,Die=class extends Mte{constructor(e){super({moduleCtx:e,animationResetFns:{datum:bie}}),this.properties=new gie}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:o}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:o}}connectorStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeOpacity:n,strokeWidth:o,lineDash:s,lineDashOffset:r}=this.properties.dropOff;return{fill:e,fillOpacity:t,stroke:i,strokeOpacity:n,strokeWidth:o,lineDash:s,lineDashOffset:r}}nodeFactory(){return new Sie}createLabelData(e){let{rect:t,yDatum:i,datum:n,visible:o}=e;const{valueKey:s,stageKey:r,label:a}=this.properties;return{x:t.x+t.width/2,y:t.y+t.height/2,textAlign:"center",textBaseline:"middle",text:this.getLabelText(a,{itemId:r,value:i,datum:n,valueKey:s,stageKey:r},(e=>wie(e,0))),itemId:r,datum:n,series:this,visible:o}}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{id:n}=this,{stageKey:o,valueKey:s,highlightStyle:{item:r},fills:a,strokes:l,fillOpacity:d,strokeOpacity:c,strokeWidth:h,lineDash:u,lineDashOffset:p,itemStyler:g,shadow:m}=this.properties,v=this.axes[mie.X],f=yie(null===v||void 0===v?void 0:v.scale,null===v||void 0===v?void 0:v.visibleRange,this.smallestDataInterval,this.largestDataInterval),y=this.getCategoryDirection()===mie.X;t.each(((e,t)=>{var v,b;const{datumIndex:C}=t,x={fill:null!==(v=a[C%a.length])&&void 0!==v?v:"black",stroke:null!==(b=l[C%l.length])&&void 0!==b?b:"black",fillOpacity:d,strokeOpacity:c,lineDash:u,lineDashOffset:p,fillShadow:m,strokeWidth:this.getStrokeWidth(h)},w=y?t.width>0:t.height>0,S=vie(this,String(t.datumIndex),{datum:t,isHighlighted:i,style:x,highlightStyle:r,itemStyler:g,seriesId:n,stageKey:o,valueKey:s});S.crisp=f,S.visible=w,fie(e,S)}))}animateEmptyUpdateReady(e){super.animateEmptyUpdateReady(e);const{datumSelection:t}=e,i=this.isVertical(),n=Cie(xie(i,"normal"));Mie.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n)}animateWaitingUpdateReady(e){var t;super.animateWaitingUpdateReady(e);const{datumSelection:i}=e,{processedData:n}=this,o=null===n||void 0===n||null===(t=n.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id],s=Cie(xie(this.isVertical(),"fade"));Mie.fromToMotion(this.id,"datums",this.ctx.animationManager,[i],s,((e,t)=>t.xValue),o)}};Die.className="FunnelSeries",Die.type="funnel";var kie={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"funnel",moduleFactory:e=>new Die(e),solo:!0,tooltipDefaults:{range:"exact"},defaultAxes:jee,themeTemplate:Uee,paletteFactory:e=>{let{takeColors:t}=e;const{fills:i,strokes:n}=t(1);return{fills:i,strokes:n}}},{CachedTextMeasurerPool:Iie,TextUtils:Aie,TextWrapper:Tie,findMaxValue:Eie,Logger:Rie}=mW;function Lie(e,t){return null!=e.lineHeight&&null!=e.fontSize?e.lineHeight*t/e.fontSize:Aie.getLineHeight(t)}function Pie(e,t,i,n,o,s){var r,a;let{padding:l}=o;const{spacing:d=0}=t,c=2*l,h=2*l+d,u=(null!==(r=t.minimumFontSize)&&void 0!==r?r:t.fontSize)+(null!==(a=n.minimumFontSize)&&void 0!==a?a:n.fontSize);if(u>s(u+h,!1).height-h)return;const p=function(e,t){const{fontSize:i,minimumFontSize:n=i}=e,{fontSize:o,minimumFontSize:s=o}=t,r=i-n,a=o-s;let l=e.fontSize,d=t.fontSize;const c=[{labelFontSize:i,secondaryLabelFontSize:o}];for(;l>n||d>s;)(r>0?(l-n)/r:-1)>(a>0?(d-s)/a:-1)?l--:d--,c.push({labelFontSize:l,secondaryLabelFontSize:d});return c.reverse(),c}(t,n),g={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},m={fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight};let v,f;return Eie(0,p.length-1,(o=>{const{labelFontSize:r,secondaryLabelFontSize:a}=p[o],l=0===o,u=Lie(t,r),y=Lie(n,a),b=s(u+y+h,l),C=b.width-c,x=b.height-h;if(u+y>x)return;if(null!=v&&v.fontSize===r||(g.fontSize=r,v=Bie(t,e,C,x,g,t.wrapping,l?t.overflowStrategy:"hide")),null==v||v.width>C||v.height>x)return;if(null!=f&&f.fontSize===a||(m.fontSize=a,f=Bie(n,i,C,x,m,n.wrapping,l?n.overflowStrategy:"hide")),null==f)return;const w=v.height+f.height;return f.width>C||w>x?void 0:{width:Math.max(v.width,f.width),height:w+d,meta:b.meta,label:v,secondaryLabel:f}}))}function Nie(e,t,i,n){var o;let{padding:s}=i;const r=2*s,a=Math.min(null!==(o=t.minimumFontSize)&&void 0!==o?o:t.fontSize,t.fontSize),d={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return Eie(a,t.fontSize,(i=>{var o;const s=Lie(t,i),c=i===a,h=n(s+r,c),u=h.width-r,p=h.height-r;if(s>p)return;d.fontSize=i;const g=Tie.wrapLines(e,{maxWidth:u,maxHeight:p,font:d,textWrap:t.wrapping,overflow:null!==(o=c?t.overflowStrategy:void 0)&&void 0!==o?o:"hide"});if(!g.length)return;const m=function(e,t){let{font:i,lineHeight:n=Aie.defaultLineHeight,maxWidth:o,maxHeight:s=1/0}=t,r=n*e.length;for(;r>s;){if(1===e.length)return;e.pop(),e[e.length-1]=Tie.appendEllipsis(e.at(-1)),r=n*e.length}const a=Iie.measureLines(e,{font:i});let l,d;if(a.width>o){const e=[];d=0;for(const t of a.lineMetrics){if(t.width>o){if(!e.length)return;break}e.push(t.text),d=Math.max(d,t.width)}l=Tie.appendEllipsis(e.join("\n"))}else l=e.join("\n"),d=a.width;return{text:l,width:d,height:r}}(g,{lineHeight:s,font:d,maxWidth:u,maxHeight:p});return m?[l({fontSize:i,lineHeight:s},m),h.meta]:void 0}))}function Fie(e){return null!=(null===e||void 0===e?void 0:e.minimumFontSize)&&(null===e||void 0===e?void 0:e.fontSize)&&(null===e||void 0===e?void 0:e.minimumFontSize)>(null===e||void 0===e?void 0:e.fontSize)}function Oie(e,t,i,n,o,s){const r=t.enabled?e:void 0,a=n.enabled?i:void 0;let l,d,c;if((Fie(t)||Fie(n))&&Rie.warnOnce("minimumFontSize should be set to a value less than or equal to the font size"),null!=r&&null!=a&&(l=Pie(r,t,a,n,o,s)),null==l&&null!=r&&(d=Nie(r,t,o,s)),null!=d){const[e,t]=d;l={width:e.width,height:e.height,meta:t,label:e,secondaryLabel:void 0}}if(null==l&&null==r&&null!=a&&(c=Nie(a,n,o,s)),null!=c){const[e,t]=c;l={width:e.width,height:e.height,meta:t,label:void 0,secondaryLabel:e}}return l}function Bie(e,t,i,n,o,s,r){const a=Tie.wrapLines(t,{maxWidth:i,maxHeight:n,font:o,textWrap:s,overflow:r});if(!a.length)return;const l=Lie(e,o.fontSize),{width:d}=Iie.measureLines(a,{font:o});return{width:d,lineHeight:l,text:a.join("\n"),height:a.length*l,fontSize:o.fontSize}}var{Validate:Gie,NUMBER:zie,POSITIVE_NUMBER:_ie,TEXT_WRAP:Vie,OVERFLOW_STRATEGY:Hie}=mW,Wie=class extends mW.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};dj([Gie(Vie)],Wie.prototype,"wrapping",2),dj([Gie(Hie)],Wie.prototype,"overflowStrategy",2),dj([Gie(_ie,{optional:!0})],Wie.prototype,"lineHeight",2),dj([Gie(_ie,{optional:!0})],Wie.prototype,"minimumFontSize",2);var jie=class extends Wie{constructor(){super(...arguments),this.spacing=0}};dj([Gie(zie)],jie.prototype,"spacing",2);var Uie=class extends Wie{},{CartesianSeriesProperties:Kie,SeriesTooltip:Yie,Validate:Zie,AND:Xie,ARRAY:qie,COLOR_STRING:Qie,COLOR_STRING_ARRAY:Jie,FUNCTION:$ie,OBJECT:ene,POSITIVE_NUMBER:tne,RATIO:ine,STRING:nne,TEXT_ALIGN:one,VERTICAL_ALIGN:sne}=mW,rne=class extends Kie{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new jie,this.tooltip=new Yie}};dj([Zie(nne,{optional:!0})],rne.prototype,"title",2),dj([Zie(nne)],rne.prototype,"xKey",2),dj([Zie(nne)],rne.prototype,"yKey",2),dj([Zie(nne,{optional:!0})],rne.prototype,"colorKey",2),dj([Zie(nne,{optional:!0})],rne.prototype,"xName",2),dj([Zie(nne,{optional:!0})],rne.prototype,"yName",2),dj([Zie(nne,{optional:!0})],rne.prototype,"colorName",2),dj([Zie(Xie(Jie,qie.restrict({minLength:1})))],rne.prototype,"colorRange",2),dj([Zie(Qie,{optional:!0})],rne.prototype,"stroke",2),dj([Zie(ine)],rne.prototype,"strokeOpacity",2),dj([Zie(tne,{optional:!0})],rne.prototype,"strokeWidth",2),dj([Zie(one)],rne.prototype,"textAlign",2),dj([Zie(sne)],rne.prototype,"verticalAlign",2),dj([Zie(tne)],rne.prototype,"itemPadding",2),dj([Zie($ie,{optional:!0})],rne.prototype,"itemStyler",2),dj([Zie(ene)],rne.prototype,"label",2),dj([Zie(ene)],rne.prototype,"tooltip",2);var{SeriesNodePickMode:ane,computeBarFocusBounds:lne,getMissCount:dne,valueProperty:cne,ChartAxisDirection:hne,DEFAULT_CARTESIAN_DIRECTION_KEYS:une,DEFAULT_CARTESIAN_DIRECTION_NAMES:pne,createDatumId:gne,Logger:mne,ColorScale:vne,Rect:fne,PointerEvents:yne}=mW,bne=class extends mW.CartesianSeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.colorKey=n.properties.colorKey}},Cne={left:-.5,center:0,right:-.5},xne={top:-.5,middle:0,bottom:-.5},wne=class extends mW.CartesianSeries{constructor(e){super({moduleCtx:e,directionKeys:une,directionNames:pne,pickModes:[ane.NEAREST_NODE,ane.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new rne,this.NodeEvent=bne,this.colorScale=new vne}async processData(e){var t,i,n;const o=this.axes[hne.X],s=this.axes[hne.Y];if(!o||!s||!this.properties.isValid()||null===(t=this.data)||void 0===t||!t.length)return;const{xKey:r,yKey:a,colorRange:l,colorKey:d}=this.properties,c=null===(i=this.axes[hne.X])||void 0===i?void 0:i.scale,h=null===(n=this.axes[hne.Y])||void 0===n?void 0:n.scale,{xScaleType:u,yScaleType:p}=this.getScaleInformation({xScale:c,yScale:h}),g=this.colorScale.type,{dataModel:m,processedData:v}=await this.requestDataModel(e,this.data,{props:[cne(r,u,{id:"xValue"}),cne(a,p,{id:"yValue"}),...d?[cne(d,g,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const e=m.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=v.domain.values[e],this.colorScale.range=l,this.colorScale.update()}}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.rawData.length,s=dne(this,i.defs.values[n].missing);return!(0===o||o===s)}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return t&&i?e===hne.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i):[]}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){var e,t,i,n,o;const{data:s,visible:r,axes:a,dataModel:l,processedData:d}=this,c=a[hne.X],h=a[hne.Y];if(!(s&&l&&null!==d&&void 0!==d&&d.rawData.length&&r&&c&&h))return;if("category"!==c.type||"category"!==h.type)return void mne.warnOnce('Heatmap series expected axes to have "category" type, but received "'.concat(c.type,'" and "').concat(h.type,'" instead.'));const{xKey:u,xName:p,yKey:g,yName:m,colorKey:v,colorName:f,textAlign:y,verticalAlign:b,itemPadding:C,label:x}=this.properties,w=l.resolveColumnById(this,"xValue",d),S=l.resolveColumnById(this,"yValue",d),M=v?l.resolveColumnById(this,"colorValue",d):void 0,D=c.scale,k=h.scale,I=(null!==(e=D.bandwidth)&&void 0!==e?e:0)/2,A=(null!==(t=k.bandwidth)&&void 0!==t?t:0)/2,T=[],E=[],R=null!==(i=D.bandwidth)&&void 0!==i?i:10,L=null!==(n=k.bandwidth)&&void 0!==n?n:10,P=(R-2*C)*Cne[y],N=(L-2*C)*xne[b],F=()=>({width:R,height:L,meta:null});return d.rawData.forEach(((e,t)=>{const i=w[t],n=S[t],o=D.convert(i)+I,s=k.convert(n)+A,r=null===M||void 0===M?void 0:M[t],a=Oie(null==r?void 0:this.getLabelText(x,{value:r,datum:e,colorKey:v,colorName:f,xKey:u,yKey:g,xName:p,yName:m}),this.properties.label,void 0,this.properties.label,{padding:C},F),l={x:o,y:s,size:0};if(T.push({series:this,itemId:g,datumIndex:t,yKey:g,xKey:u,xValue:i,yValue:n,colorValue:r,datum:e,point:l,width:R,height:L,midPoint:{x:o,y:s},missing:null==r}),null!=(null===a||void 0===a?void 0:a.label)){const{text:t,fontSize:i,lineHeight:n,height:o}=a.label,{fontStyle:s,fontFamily:r,fontWeight:d,color:c}=this.properties.label,h=l.x+P*(R-2*C),u=l.y+N*(L-2*C)-.5*(a.height-o);E.push({series:this,itemId:g,datum:e,text:t,fontSize:i,lineHeight:n,fontStyle:s,fontFamily:r,fontWeight:d,color:c,textAlign:y,verticalAlign:b,x:h,y:u})}})),{itemId:null!==(o=this.properties.yKey)&&void 0!==o?o:this.id,nodeData:T,labelData:E,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new fne}update(e){return this.ctx.animationManager.skipCurrentBatch(),super.update(e)}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return i.update(n)}getItemBaseStyle(e){var t,i,n,o;const{properties:s}=this,r=e?s.highlightStyle.item:void 0,a=this.getStrokeWidth(s.strokeWidth);return{fill:null===r||void 0===r?void 0:r.fill,fillOpacity:null!==(t=null===r||void 0===r?void 0:r.fillOpacity)&&void 0!==t?t:1,stroke:null!==(i=null===r||void 0===r?void 0:r.stroke)&&void 0!==i?i:s.stroke,strokeWidth:null!==(n=null===r||void 0===r?void 0:r.strokeWidth)&&void 0!==n?n:a,strokeOpacity:null!==(o=null===r||void 0===r?void 0:r.strokeOpacity)&&void 0!==o?o:s.strokeOpacity}}getItemStyleOverrides(e,t,i,n,o){const{id:s,properties:r}=this,{xKey:a,yKey:d,colorRange:c,itemStyler:h}=r,u=this.isColorScaleValid()&&null!=i?this.colorScale.convert(i):c[0];let p=null==n.fill?{fill:u}:void 0;if(null!=h){var g;null!==(g=p)&&void 0!==g||(p={});const i=this.cachedDatumCallback(gne(e,o?"highlight":"node"),(()=>h(l({seriesId:s,datum:t,xKey:a,yKey:d,highlighted:o,fill:u},n))));Object.assign(p,i)}return p}updateDatumNodes(e){var t;const{isHighlight:i}=e,n=this.axes[hne.X],[o,s]=null!==(t=null===n||void 0===n?void 0:n.visibleRange)&&void 0!==t?t:[],r=!(0!==o||1!==s),a=this.getItemBaseStyle(i);e.datumSelection.each(((e,t)=>{var n,o,s,l,d;const{datumIndex:c,colorValue:h,datum:u,point:p,width:g,height:m}=t,v=this.getItemStyleOverrides(String(c),u,h,a,i);e.crisp=r,e.x=Math.floor(p.x-g/2),e.y=Math.floor(p.y-m/2),e.width=Math.ceil(g),e.height=Math.ceil(m),e.fill=null!==(n=null===v||void 0===v?void 0:v.fill)&&void 0!==n?n:a.fill,e.fillOpacity=null!==(o=null===v||void 0===v?void 0:v.fillOpacity)&&void 0!==o?o:a.fillOpacity,e.stroke=null!==(s=null===v||void 0===v?void 0:v.stroke)&&void 0!==s?s:a.stroke,e.strokeWidth=null!==(l=null===v||void 0===v?void 0:v.strokeWidth)&&void 0!==l?l:a.strokeWidth,e.strokeOpacity=null!==(d=null===v||void 0===v?void 0:v.strokeOpacity)&&void 0!==d?d:a.strokeOpacity}))}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e,{enabled:n}=this.properties.label,o=n?t:[];return i.update(o)}updateLabelNodes(e){e.labelSelection.each(((e,t)=>{e.text=t.text,e.fontSize=t.fontSize,e.lineHeight=t.lineHeight,e.fontStyle=t.fontStyle,e.fontFamily=t.fontFamily,e.fontWeight=t.fontWeight,e.fill=t.color,e.textAlign=t.textAlign,e.textBaseline=t.verticalAlign,e.x=t.x,e.y=t.y,e.pointerEvents=yne.None}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s,colorScale:r}=this,{xKey:a,xName:d,yKey:c,yName:h,colorKey:u,colorName:p,colorRange:g,title:m,legendItemName:v,tooltip:f}=s,y=o[hne.X],b=o[hne.Y];if(!i||!n||0===n.rawData.length||!y||!b)return;const{datumIndex:C}=e,x=n.rawData[C],w=i.resolveColumnById(this,"xValue",n)[C],S=i.resolveColumnById(this,"yValue",n)[C],M=null!=u&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",n)[C]:void 0;if(null==w)return;const D=[];let k;null==M?k=g[0]:(k=r.convert(M),D.push({label:p,fallbackLabel:u,value:String(M)})),D.push({label:d,fallbackLabel:a,value:y.formatDatum(w)},{label:h,fallbackLabel:c,value:b.formatDatum(S)});const I=null!=k?{marker:{shape:"square",fill:k,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1}}:void 0,A=this.getItemBaseStyle(!1);return Object.assign(A,this.getItemStyleOverrides(String(C),x,M,A,!1)),f.formatTooltip({title:null!==m&&void 0!==m?m:v,symbol:I,data:D},l({seriesId:t,datum:x,title:m,xKey:a,xName:d,yKey:c,yName:h,colorKey:u,colorName:p},A))}getLegendData(e){return"gradient"===e&&this.properties.isValid()&&this.isColorScaleValid()&&this.dataModel?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]:[]}isLabelEnabled(){return this.properties.label.enabled&&Boolean(this.properties.colorKey)}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds(e){var t;let{datumIndex:i}=e;const n=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i];if(void 0===n)return;const{width:o,height:s,midPoint:r}=n,a={x:r.x-o/2,y:r.y-s/2,width:o,height:s};return lne(a)}};wne.className="HeatmapSeries",wne.type="heatmap";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:Sne,DEFAULT_LABEL_COLOUR:Mne},ThemeConstants:{FONT_SIZE:Dne}}=mW,kne={series:{label:{enabled:!1,color:Mne,fontSize:Dne.SMALL,fontFamily:Sne,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},{ThemeSymbols:{DEFAULT_DIVERGING_SERIES_COLOR_RANGE:Ine,DEFAULT_BACKGROUND_COLOUR:Ane},ThemeConstants:{CARTESIAN_AXIS_TYPE:Tne,CARTESIAN_POSITION:Ene}}=mW,Rne={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:e=>new wne(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:Tne.CATEGORY,position:Ene.LEFT},{type:Tne.CATEGORY,position:Ene.BOTTOM}],themeTemplate:kne,paletteFactory:e=>{var t;let{takeColors:i,colorsCount:n,userPalette:o,themeTemplateParameters:s}=e;const r=s.get(Ine),a=s.get(Ane),l=null!==(t=Array.isArray(a)?a[0]:a)&&void 0!==t?t:"white",{fills:d,strokes:c}=i(n);return{stroke:"inbuilt"===o?l:c[0],colorRange:"inbuilt"===o?r:[d[0],d[1]]}}};function Lne(e,t,i,n,o,s){const r=e[s];if(null==r)return!1;const a=N8(P8(r,t,i),o);return s===n[a+0]||s===n[a+1]||s===n[a+2]||s===n[a+3]}var{ChartAxisDirection:Pne,ContinuousScale:Nne,OrdinalTimeScale:Fne}=mW,One=class extends mW.LineSeries{aggregateData(e,t){if(0===t.rawData.length)return;const i=this.axes[Pne.X];if(null==i||!Nne.is(i.scale)&&!Fne.is(i.scale))return;return function(e,t,i){if(e.length<1e3)return;const[n,o]=L8(i);let s=R8(e,10);const{indexData:r,valueData:a}=F8(e,t,t,n,o,s);let l=[];for(let c=0;c<e.length;c+=1)Lne(e,n,o,r,s,c)&&l.push(c);const d=[{maxRange:s,indices:l}];for(;l.length>10&&s>64;)({maxRange:s}=O8(r,a,s,{inPlace:!0})),l=l.filter(Lne.bind(null,e,n,o,r,s)),d.push({maxRange:s,indices:l});return d.reverse(),d}(e.resolveColumnById(this,"xValue",t),e.resolveColumnById(this,"yValueRaw",t),e.getDomain(this,"xValue","value",t))}},{LineSeriesModule:Bne}=mW,Gne=l(l({},Bne),{},{type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new One(e)}),{ColorScale:zne}=mW;function _ne(e){if(null==e)return[];const t=new zne;t.domain=[0,1],t.range=e;return Array.from({length:5},((e,i)=>t.convert(i/4)))}var Vne={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function Hne(e,t){if(null==e)return"";if(null==t)return String(e);const[i,n]=t.scale.domain,o=0!==i?Math.ceil(Math.log10(Math.abs(i))):0,s=0!==n?Math.ceil(Math.log10(Math.abs(n))):0,r=Math.max(2-Math.max(o,s),0);return e.toFixed(r)}function Wne(e,t,i){var n;if(null!=t.text)return t.text;const o=null!==i&&void 0!==i?i:t.value,s=null===t||void 0===t||null===(n=t.formatter)||void 0===n?void 0:n.call(t,{seriesId:e.id,datum:void 0,value:o});return null!=s?String(s):void 0}var jne=class extends aN{updatePath(){const{x:e,y:t,path:i,size:n}=this;i.clear(),i.moveTo(e,t-n/2),i.lineTo(e,t+n/2)}};jne.className="LineMarker";var{BaseProperties:Une,Validate:Kne,COLOR_STRING:Yne,NUMBER:Zne,Logger:Xne,ColorScale:qne}=mW,Qne=class extends Une{constructor(){super(...arguments),this.color="black"}};function Jne(e){return e.flatMap(((t,i)=>{var n;const{offset:o}=t,s=null===(n=e.at(i+1))||void 0===n?void 0:n.color;return null!=s?[t,{offset:o,color:s}]:[t]}))}function $ne(e,t,i,n){var o;if(0===e.length)return function(e,t){const i="discrete"===t?1:0,n=e.map(((e,t,n)=>{let{length:o}=n;return{offset:(t+i)/(o-1+i),color:e}}));return"discrete"===t?Jne(n):n}(t,n);if(!function(e){let t;for(const{stop:i}of e)if(null!=i){if(null!=t&&i<t)return!1;t=i}return!0}(e))return Xne.warnOnce("[fills] must have the stops defined in ascending order"),[];const s=Math.min(...i),r=Math.max(...i),a="discrete"===n,l=new Float64Array(e.length);let d=0,c=-1;for(let g=0;g<e.length;g+=1){const t=e[g];if(g>=c){c=e.length-1;for(let t=g+1;t<e.length;t+=1)if(null!=e[t].stop){c=t;break}}let{stop:i}=t;if(null==i){const t=e[d].stop,n=e[c].stop,o=null!==t&&void 0!==t?t:s,l=a&&null==t?1:0;i=o+((null!==n&&void 0!==n?n:r)-o)*(g-d+l)/(c-d+l)}else d=g;const n=(i-s)/(r-s);l[g]=n}let h,u=null===(o=e.find((e=>null!=e.color)))||void 0===o?void 0:o.color;const p=e.map(((e,i)=>{let{color:n}=e;const o=l[i];return null!=n?u=n:null!=u?n=u:(null==h&&(h=new qne,h.domain=[0,1],h.range=t),n=h.convert(o)),{offset:o,color:n}}));return"discrete"===n?Jne(p):p}dj([Kne(Zne,{optional:!0})],Qne.prototype,"stop",2),dj([Kne(Yne,{optional:!0})],Qne.prototype,"color",2);var{MARKER_SHAPE:eoe,UNION:toe,OR:ioe}=mW,noe=toe(["continuous","discrete"],"a fill mode"),ooe=ioe(eoe,toe(["line"],"a marker shape")),soe=toe(["container","item"],"a corner mode"),{BaseProperties:roe,Validate:aoe,OBJECT:loe,BOOLEAN:doe,NUMBER:coe,NUMBER_ARRAY:hoe,Logger:uoe}=mW,poe=class extends roe{getSegments(e,t){var i;const{values:n,step:o,count:s}=this,r=Math.min(...e.domain),a=Math.max(...e.domain);let l;if(null!=n){const e=n.filter((e=>e>r&&e<a)).sort(((e,t)=>e-t));l=[r,...e,a]}else if(null!=o){const e=[];for(let t=r;t<a;t+=o)e.push(t);e.push(a),l=e}else if(null!=s){const e=s+1;l=Array.from({length:e+1},((t,i)=>i/e*(a-r)+r))}else{var d;const t=null===(d=e.ticks)||void 0===d?void 0:d.call(e).filter((e=>e>r&&e<a));l=null!=t?[r,...t,a]:void 0}return null!=l&&l.length>t&&(uoe.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),l=void 0),null!==(i=l)&&void 0!==i||(l=[r,a]),l}};dj([aoe(hoe,{optional:!0})],poe.prototype,"values",2),dj([aoe(coe,{optional:!0})],poe.prototype,"step",2),dj([aoe(coe,{optional:!0})],poe.prototype,"count",2);var goe=class extends roe{constructor(){super(...arguments),this.enabled=!1,this.interval=new poe,this.spacing=0}};dj([aoe(doe)],goe.prototype,"enabled",2),dj([aoe(loe)],goe.prototype,"interval",2),dj([aoe(coe)],goe.prototype,"spacing",2);var{BaseProperties:moe,SeriesTooltip:voe,SeriesProperties:foe,PropertiesArray:yoe,Validate:boe,BOOLEAN:Coe,COLOR_STRING:xoe,COLOR_STRING_ARRAY:woe,FUNCTION:Soe,LINE_DASH:Moe,NUMBER:Doe,OBJECT_ARRAY:koe,OBJECT:Ioe,POSITIVE_NUMBER:Aoe,RATIO:Toe,STRING:Eoe,UNION:Roe,Label:Loe}=mW,Poe=Roe(["before","after","middle"],"a placement"),Noe=Roe(["inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end"],"an placement"),Foe=Roe(["horizontal","vertical"],"an orientation"),Ooe=class extends Loe{};dj([boe(Doe,{optional:!0})],Ooe.prototype,"spacing",2);var Boe=class extends moe{constructor(){super(...arguments),this.value=0,this.label=new Ooe}};dj([boe(Eoe,{optional:!0})],Boe.prototype,"text",2),dj([boe(Doe)],Boe.prototype,"value",2),dj([boe(ooe,{optional:!0})],Boe.prototype,"shape",2),dj([boe(Poe,{optional:!0})],Boe.prototype,"placement",2),dj([boe(Doe,{optional:!0})],Boe.prototype,"spacing",2),dj([boe(Aoe,{optional:!0})],Boe.prototype,"size",2),dj([boe(Doe,{optional:!0})],Boe.prototype,"rotation",2),dj([boe(xoe,{optional:!0})],Boe.prototype,"fill",2),dj([boe(Toe,{optional:!0})],Boe.prototype,"fillOpacity",2),dj([boe(xoe,{optional:!0})],Boe.prototype,"stroke",2),dj([boe(Aoe,{optional:!0})],Boe.prototype,"strokeWidth",2),dj([boe(Toe,{optional:!0})],Boe.prototype,"strokeOpacity",2),dj([boe(Moe,{optional:!0})],Boe.prototype,"lineDash",2),dj([boe(Aoe,{optional:!0})],Boe.prototype,"lineDashOffset",2),dj([boe(Ioe)],Boe.prototype,"label",2);var Goe=class extends moe{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new yoe(Qne),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};dj([boe(Coe)],Goe.prototype,"enabled",2),dj([boe(Aoe,{optional:!0})],Goe.prototype,"thickness",2),dj([boe(Toe)],Goe.prototype,"thicknessRatio",2),dj([boe(koe)],Goe.prototype,"fills",2),dj([boe(noe)],Goe.prototype,"fillMode",2),dj([boe(xoe,{optional:!0})],Goe.prototype,"fill",2),dj([boe(Toe)],Goe.prototype,"fillOpacity",2),dj([boe(xoe)],Goe.prototype,"stroke",2),dj([boe(Aoe)],Goe.prototype,"strokeWidth",2),dj([boe(Toe)],Goe.prototype,"strokeOpacity",2),dj([boe(Moe)],Goe.prototype,"lineDash",2),dj([boe(Aoe)],Goe.prototype,"lineDashOffset",2);var zoe=class extends moe{constructor(){super(...arguments),this.fills=new yoe(Qne),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black"}};dj([boe(koe)],zoe.prototype,"fills",2),dj([boe(noe)],zoe.prototype,"fillMode",2),dj([boe(xoe,{optional:!0})],zoe.prototype,"fill",2),dj([boe(Toe)],zoe.prototype,"fillOpacity",2),dj([boe(xoe)],zoe.prototype,"stroke",2),dj([boe(Aoe)],zoe.prototype,"strokeWidth",2),dj([boe(Toe)],zoe.prototype,"strokeOpacity",2),dj([boe(Moe)],zoe.prototype,"lineDash",2),dj([boe(Aoe)],zoe.prototype,"lineDashOffset",2),dj([boe(xoe)],zoe.prototype,"defaultFill",2);var _oe=class extends jie{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};dj([boe(Eoe,{optional:!0})],_oe.prototype,"text",2),dj([boe(Noe)],_oe.prototype,"placement",2),dj([boe(Coe)],_oe.prototype,"avoidCollisions",2);var Voe=class extends foe{constructor(){super(...arguments),this.value=0,this.segmentation=new goe,this.defaultColorRange=[],this.targets=new yoe(Boe),this.defaultTarget=new Boe,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new zoe,this.bar=new Goe,this.label=new _oe,this.tooltip=new voe}};dj([boe(Doe)],Voe.prototype,"value",2),dj([boe(Ioe)],Voe.prototype,"segmentation",2),dj([boe(woe)],Voe.prototype,"defaultColorRange",2),dj([boe(koe)],Voe.prototype,"targets",2),dj([boe(Ioe)],Voe.prototype,"defaultTarget",2),dj([boe(Foe)],Voe.prototype,"direction",2),dj([boe(Aoe)],Voe.prototype,"thickness",2),dj([boe(Aoe)],Voe.prototype,"cornerRadius",2),dj([boe(soe)],Voe.prototype,"cornerMode",2),dj([boe(Doe)],Voe.prototype,"margin",2),dj([boe(Ioe)],Voe.prototype,"scale",2),dj([boe(Ioe)],Voe.prototype,"bar",2),dj([boe(Soe,{optional:!0})],Voe.prototype,"itemStyler",2),dj([boe(Ioe)],Voe.prototype,"label",2),dj([boe(Ioe)],Voe.prototype,"tooltip",2);var{CachedTextMeasurerPool:Hoe,BBox:Woe}=mW;function joe(e){const{x0:t,y0:i,x1:n,y1:o,horizontalInset:s,verticalInset:r}=e;return{x:Math.min(t,n)+s,y:Math.min(i,o)+r,width:Math.max(Math.abs(n-t)-2*s,0),height:Math.max(Math.abs(o-i)-2*r,0)}}function Uoe(e){const{clipX0:t,clipX1:i,clipY0:n,clipY1:o}=e;return null!=t&&null!=i||null!=n&&null!=o}function Koe(e,t){const i=e?"initial":"update";return{node:{fromFn(n,o){const s=n.previousDatum;let{x0:r,y0:a,x1:l,y1:d,clipX0:c,clipY0:h,clipX1:u,clipY1:p}=null!==s&&void 0!==s?s:o;const{horizontalInset:g,verticalInset:m}=o,v=null!=s&&Uoe(s),f=Uoe(o);return v&&f||(!v&&f?(({x0:r,y0:a,x1:l,y1:d,clipX0:c,clipY0:h,clipX1:u,clipY1:p}=o),e&&(t?u=o.clipX0:p=o.clipY0)):v&&!f?(({x0:r,y0:a,x1:l,y1:d}=o),c=void 0,h=void 0,u=void 0,p=void 0):e&&(t?l=r:d=a)),{x0:r,y0:a,x1:l,y1:d,clipX0:c,clipY0:h,clipX1:u,clipY1:p,horizontalInset:g,verticalInset:m,phase:i}},toFn(e,t){const{x0:i,y0:n,x1:o,y1:s,clipX0:r,clipY0:a,clipX1:l,clipY1:d,horizontalInset:c,verticalInset:h}=t;return{x0:i,y0:n,x1:o,y1:s,clipX0:r,clipY0:a,clipX1:l,clipY1:d,horizontalInset:c,verticalInset:h}},applyFn(e,t){e.setProperties(Yoe(e,t))}}}}function Yoe(e,t){const{x:i,y:n,width:o,height:s}=joe(t),r=function(e){if(!Uoe(e))return;const{x0:t,y0:i,x1:n,y1:o}=e,{x:s,y:r,width:a,height:l}=joe(e);let{clipX0:d,clipX1:c,clipY0:h,clipY1:u}=e;null!=d&&null!=c||(d=t,c=n),null!=h&&null!=u||(h=i,u=o);const p=Math.min(d,c),g=Math.min(h,u),m=Math.abs(c-d),v=Math.abs(u-h);return d=Math.max(s,p),h=Math.max(r,g),c=Math.min(s+a,p+m),u=Math.min(r+l,g+v),new Woe(Math.min(d,c),Math.min(h,u),Math.abs(c-d),Math.abs(u-h))}(t),a=function(e,t){if(null==t)return!0;const i=joe(e),n=1e-6,o=i.x+n,s=i.y+n,r=i.x+i.width-n,a=i.y+i.height-n,l=t.x,d=t.x+t.width,c=t.y,h=t.y+t.height;return Math.max(o,l)<=Math.min(r,d)&&Math.max(s,c)<=Math.min(a,h)}(t,r);return{x:i,y:n,width:o,height:s,clipBBox:r,visible:a}}var Zoe={Before:"right",Center:"center",After:"left"},Xoe={Before:"top",Center:"middle",After:"bottom"},qoe={Before:-1,Center:-.5,After:0},Qoe={Before:0,Center:-.5,After:-1};var{fromToMotion:Joe,resetMotion:$oe,SeriesNodePickMode:ese,StateMachine:tse,createDatumId:ise,ChartAxisDirection:nse,CachedTextMeasurerPool:ose,toRadians:sse,BBox:rse,Group:ase,PointerEvents:lse,Selection:dse,Rect:cse,Text:hse,LinearGradient:use,getMarker:pse,easing:gse}=mW,mse={before:180,middle:0,after:0},vse={before:90,middle:0,after:-90},fse=class extends mW.Series{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[ese.EXACT_SHAPE_MATCH,ese.NEAREST_NODE]}),this.canHaveAxes=!0,this.properties=new Voe,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new ase({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new ase({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new ase({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new ase({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new ase({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new ase({name:"itemTargetLabelGroup"})),this.scaleSelection=dse.select(this.scaleGroup,(()=>this.nodeFactory())),this.datumSelection=dse.select(this.itemGroup,(()=>this.nodeFactory())),this.targetSelection=dse.select(this.itemTargetGroup,(e=>this.markerFactory(e))),this.targetLabelSelection=dse.select(this.itemTargetLabelGroup,hse),this.labelSelection=dse.select(this.itemLabelGroup,hse),this.highlightTargetSelection=dse.select(this.highlightTargetGroup,(e=>this.markerFactory(e))),this.nodeDatum={series:this,datum:{}},this.animationState=new tse("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.itemGroup.pointerEvents=lse.None,this.itemTargetLabelGroup.pointerEvents=lse.None,this.itemLabelGroup.pointerEvents=lse.None}get horizontal(){return"horizontal"===this.properties.direction}get thickness(){return this.properties.thickness}computeInset(e,t){var i;const{label:n}=this.properties;let o;switch(n.placement){case"outside-start":o=1;break;case"outside-end":o=-1;break;default:return 0}const s=null===(i=n.text)||void 0===i?void 0:i.split("\n");let r;if(e===nse.Y){var a;r=Lie(n,n.fontSize)*(null!==(a=null===s||void 0===s?void 0:s.length)&&void 0!==a?a:1)}else{const e=n.getFont();r=(null!==s&&void 0!==s?s:t.map((e=>{var t;return null!==(t=Wne(this,this.labelDatum(n,e)))&&void 0!==t?t:""}))).reduce(((t,i)=>{const{width:n}=ose.measureText(i,{font:e});return Math.max(t,n)}),0)}return o*(n.spacing+r)}get hasData(){return!0}nodeFactory(){const e=new cse;return e.crisp=!0,e}markerFactory(e){let{shape:t}=e;const i=new("line"!==t?pse(t):jne);return i.size=1,i}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){const{axes:t,horizontal:i}=this;return Hne(e,i?t[nse.X]:t[nse.Y])}createLinearGradient(e,t){const{properties:i,originX:n,originY:o,horizontal:s,axes:r}=this,{thickness:a,defaultColorRange:l}=i,d=s?r[nse.X]:r[nse.Y],{domain:c,range:h}=d.scale,u=h[1]-h[0],p=$ne(e,l,c,t);return new use("oklch",p,s?90:0,new rse(n,o,s?u:a,s?a:u))}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map((e=>{var i,n,o,s,r,a,l,d,c,h,u,p,g,m,v,f,y;const{text:b=t.text,value:C=(null!==(i=t.value)&&void 0!==i?i:0),shape:x=(null!==(n=t.shape)&&void 0!==n?n:"triangle"),rotation:w=(null!==(o=t.rotation)&&void 0!==o?o:0),strokeWidth:S=(null!==(s=t.strokeWidth)&&void 0!==s?s:0),placement:M=(null!==(r=t.placement)&&void 0!==r?r:"middle"),spacing:D=(null!==(a=t.spacing)&&void 0!==a?a:0),size:k=(null!==(l=t.size)&&void 0!==l?l:0),fill:I=(null!==(d=t.fill)&&void 0!==d?d:"black"),fillOpacity:A=(null!==(c=t.fillOpacity)&&void 0!==c?c:1),stroke:T=(null!==(h=t.stroke)&&void 0!==h?h:"black"),strokeOpacity:E=(null!==(u=t.strokeOpacity)&&void 0!==u?u:1),lineDash:R=(null!==(p=t.lineDash)&&void 0!==p?p:[0]),lineDashOffset:L=(null!==(g=t.lineDashOffset)&&void 0!==g?g:0)}=e,{enabled:P=t.label.enabled,color:N=(null!==(m=t.label.color)&&void 0!==m?m:"black"),fontStyle:F=(null!==(v=t.label.fontStyle)&&void 0!==v?v:"normal"),fontWeight:O=(null!==(f=t.label.fontWeight)&&void 0!==f?f:"normal"),fontSize:B=t.label.fontSize,fontFamily:G=t.label.fontFamily,spacing:z=(null!==(y=t.label.spacing)&&void 0!==y?y:0)}=e.label;return{text:b,value:C,shape:x,placement:M,spacing:D,size:k,rotation:w,fill:I,fillOpacity:A,stroke:T,strokeWidth:S,strokeOpacity:E,lineDash:R,lineDashOffset:L,label:{enabled:P,color:N,fontStyle:F,fontWeight:O,fontSize:B,fontFamily:G,spacing:z}}}))}getTargetPoint(e){const t=this.axes[nse.X],i=this.axes[nse.Y];if(null==t||null==i)return{x:0,y:0};const{properties:n,originX:o,originY:s,horizontal:r}=this,{thickness:a}=n,{value:l,placement:d,spacing:c,size:h}=e,u=r?t:i,p=u.scale.convert(l)-u.scale.range[0];let g;switch(d){case"before":g=-(c+h/2);break;case"after":g=a+c+h/2;break;default:g=a/2}return{x:o+t.range[0]+(r?p:g),y:s+i.range[0]+(r?g:p)}}getTargetLabel(e){const{size:t,placement:i,label:n}=e,{spacing:o,color:s,fontStyle:r,fontWeight:a,fontSize:l,fontFamily:d}=n,c=t/2+o;let h,u,p=0,g=0;return this.horizontal?(h="center","after"===i?(u="top",g=c):(u="bottom",g=-c)):(u="middle","before"===i?(h="right",p=-c):(h="left",p=c)),{offsetX:p,offsetY:g,fill:s,textAlign:h,textBaseline:u,fontStyle:r,fontWeight:a,fontSize:l,fontFamily:d,lineHeight:void 0}}labelDatum(e,t){const{placement:i,avoidCollisions:n,spacing:o,text:s,color:r,fontSize:a,minimumFontSize:l,fontStyle:d,fontWeight:c,fontFamily:h,lineHeight:u,wrapping:p,overflowStrategy:g,formatter:m=e=>this.formatLabel(e.value)}=e;return{placement:i,avoidCollisions:n,spacing:o,text:s,value:t,fill:r,fontSize:a,minimumFontSize:l,fontStyle:d,fontWeight:c,fontFamily:h,lineHeight:u,wrapping:p,overflowStrategy:g,formatter:m}}createNodeData(){var e,t,i,n;const{id:o,properties:s,originX:r,originY:a,horizontal:l}=this;if(!s.isValid())return;const{value:d,segmentation:c,thickness:h,cornerRadius:u,cornerMode:p,bar:g,scale:m,label:v}=s,f=this.getTargets(),y=this.axes[nse.X],b=this.axes[nse.Y];if(null==y||null==b)return;const C=l?y:b,x=y.scale,w=b.scale,S=C.scale;let{domain:M}=C.scale;C.isReversed()&&(M=M.slice().reverse());const D=[],k=[],I=[],A=[],[T,E]=S.range,R=Math.abs(E-T);let[L,P]=y.range;y.isReversed()&&([P,L]=[L,P]);let[N,F]=b.range;b.isReversed()&&([F,N]=[N,F]);const O=l?x.convert(d):P,B=l?F:w.convert(d),G=c.enabled?c.spacing/2:0,z=l?G:0,_=l?0:G,V=Math.min(null!==(e=g.thickness)&&void 0!==e?e:Math.round(g.thicknessRatio*h),h),H=-(h-V)/2,W=l?0:H,j=l?H:0,U="item"===p,K=Math.ceil(R);let Y=c.enabled?c.interval.getSegments(S,K):void 0;const Z=null!==(t=g.fill)&&void 0!==t?t:this.createLinearGradient(g.fills,g.fillMode),X=null!==(i=null!==(n=m.fill)&&void 0!==n?n:g.enabled&&0===m.fills.length?m.defaultFill:void 0)&&void 0!==i?i:this.createLinearGradient(m.fills,m.fillMode);if(null==Y&&U){const e={value:d,segmentStart:Math.min(...M),segmentEnd:Math.max(...M)};if(g.enabled){const t=Math.min(u,V/2,R/2)*(C.isReversed()?-1:1),i=l?t:0,n=l?0:t;D.push({series:this,itemId:"value",datum:e,type:0,x0:r+L-i-W,y0:a+N-n-j,x1:r+O+i+W,y1:a+B+n+j,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:u,topRightCornerRadius:u,bottomRightCornerRadius:u,bottomLeftCornerRadius:u,fill:Z,horizontalInset:z,verticalInset:_})}const t=Math.min(u,h/2,R/2)*(C.isReversed()?-1:1),i=l?t:0,n=l?0:t;A.push({series:this,itemId:"scale",datum:e,type:0,x0:r+L-i,y0:a+N-n,x1:r+P+i,y1:a+F+n,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:u,topRightCornerRadius:u,bottomRightCornerRadius:u,bottomLeftCornerRadius:u,fill:X,horizontalInset:z,verticalInset:_})}else{var q;null!==(q=Y)&&void 0!==q||(Y=M);const e=r+L-W,t=a+N-j,i=r+O+W,n=a+B+j;for(let o=0;o<Y.length-1;o+=1){const s=Y[o+0],c=Y[o+1],h={value:d,segmentStart:s,segmentEnd:c},p=0===o,m=o===Y.length-2,v=S.convert(s),f=S.convert(c),y=U||p?u:0,b=U||m?u:0,C=l?y:b,x=b,w=l?b:y,M=y;g.enabled&&D.push({series:this,itemId:"value-".concat(o),datum:h,type:0,x0:r+(l?v:L),y0:a+(l?N:v),x1:r+(l?f:P),y1:a+(l?F:f),clipX0:e,clipY0:t,clipX1:i,clipY1:n,topLeftCornerRadius:C,topRightCornerRadius:x,bottomRightCornerRadius:w,bottomLeftCornerRadius:M,fill:Z,horizontalInset:z,verticalInset:_}),A.push({series:this,itemId:"scale-".concat(o),datum:h,type:0,x0:r+(l?v:L),y0:a+(l?N:v),x1:r+(l?f:P),y1:a+(l?F:f),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:C,topRightCornerRadius:x,bottomRightCornerRadius:w,bottomLeftCornerRadius:M,fill:X,horizontalInset:z,verticalInset:_})}}v.enabled&&I.push(this.labelDatum(v,d));const Q=l?mse:vse;for(let J=0;J<f.length;J+=1){const e=f[J],{value:t,text:i,shape:n,size:o,fill:s,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:d,lineDash:c,lineDashOffset:h}=e,u=this.getTargetPoint(e),p=sse(e.rotation+Q[e.placement]);k.push({series:this,itemId:"target-".concat(J),midPoint:u,datum:{value:t},type:1,value:t,text:i,x:u.x,y:u.y,shape:n,size:o,rotation:p,fill:s,fillOpacity:r,stroke:a,strokeOpacity:d,strokeWidth:l,lineDash:c,lineDashOffset:h,label:this.getTargetLabel(e)})}return{itemId:o,nodeData:D,targetData:k,labelData:I,scaleData:A}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(null!=e&&e.series===this&&1===e.type)return e}update(e){var t,i,n,o,s,r,a,l;let{seriesRect:d}=e;const{datumSelection:c,labelSelection:h,targetSelection:u,targetLabelSelection:p,scaleSelection:g,highlightTargetSelection:m}=this,v=this.checkResize(d);this.updateSelections(v),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const f=null!==(t=null===(i=this.contextNodeData)||void 0===i?void 0:i.nodeData)&&void 0!==t?t:[],y=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.labelData)&&void 0!==n?n:[],b=null!==(s=null===(r=this.contextNodeData)||void 0===r?void 0:r.targetData)&&void 0!==s?s:[],C=null!==(a=null===(l=this.contextNodeData)||void 0===l?void 0:l.scaleData)&&void 0!==a?a:[],x=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:C,scaleSelection:g}),this.updateScaleNodes({scaleSelection:g}),this.targetSelection=this.updateTargetSelection({targetData:b,targetSelection:u}),this.updateTargetNodes({targetSelection:u,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:b,targetLabelSelection:p}),this.updateTargetLabelNodes({targetLabelSelection:p}),this.datumSelection=this.updateDatumSelection({nodeData:f,datumSelection:c}),this.updateDatumNodes({datumSelection:c}),this.labelSelection=this.updateLabelSelection({labelData:y,labelSelection:h}),this.updateLabelNodes({labelSelection:h}),this.highlightTargetSelection=this.updateTargetSelection({targetData:null!=x?[x]:[],targetSelection:m}),this.updateTargetNodes({targetSelection:m,isHighlight:!0}),v&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(t=>ise(e.nodeData.length,t.itemId)))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:n}=this,{bar:o}=n,{fillOpacity:s,stroke:r,strokeOpacity:a,lineDash:l,lineDashOffset:d}=o,c=this.getStrokeWidth(o.strokeWidth),h=i.animationManager.isSkipped();t.each(((e,t)=>{const{topLeftCornerRadius:i,topRightCornerRadius:n,bottomRightCornerRadius:o,bottomLeftCornerRadius:u,fill:p}=t;e.fill=p,e.fillOpacity=s,e.stroke=r,e.strokeOpacity=a,e.strokeWidth=c,e.lineDash=l,e.lineDashOffset=d,e.topLeftCornerRadius=i,e.topRightCornerRadius=n,e.bottomRightCornerRadius=o,e.bottomLeftCornerRadius=u,(h||null==e.previousDatum)&&e.setProperties(Yoe(0,t))}))}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,(t=>ise(e.scaleData.length,t.itemId)))}updateScaleNodes(e){const{scaleSelection:t}=e,{scale:i}=this.properties,{fillOpacity:n,stroke:o,strokeOpacity:s,strokeWidth:r,lineDash:a,lineDashOffset:l}=i;t.each(((e,t)=>{const{topLeftCornerRadius:i,topRightCornerRadius:d,bottomRightCornerRadius:c,bottomLeftCornerRadius:h,fill:u}=t;e.fill=u,e.fillOpacity=n,e.stroke=o,e.strokeOpacity=s,e.strokeWidth=r,e.lineDash=a,e.lineDashOffset=l,e.topLeftCornerRadius=i,e.topRightCornerRadius=d,e.bottomRightCornerRadius=c,e.bottomLeftCornerRadius=h,e.setProperties(Yoe(0,t))}))}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,(e=>e.itemId))}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e,n=i?this.properties.highlightStyle.item:void 0;t.each(((e,t)=>{var i,o,s,r,a,l,d;const{x:c,y:h,size:u,rotation:p,fill:g,fillOpacity:m,stroke:v,strokeOpacity:f,strokeWidth:y,lineDash:b,lineDashOffset:C}=t;e.size=u,e.fill=null!==(i=null===n||void 0===n?void 0:n.fill)&&void 0!==i?i:g,e.fillOpacity=null!==(o=null===n||void 0===n?void 0:n.fillOpacity)&&void 0!==o?o:m,e.stroke=null!==(s=null===n||void 0===n?void 0:n.stroke)&&void 0!==s?s:v,e.strokeOpacity=null!==(r=null===n||void 0===n?void 0:n.strokeOpacity)&&void 0!==r?r:f,e.strokeWidth=null!==(a=null===n||void 0===n?void 0:n.strokeWidth)&&void 0!==a?a:y,e.lineDash=null!==(l=null===n||void 0===n?void 0:n.lineDash)&&void 0!==l?l:b,e.lineDashOffset=null!==(d=null===n||void 0===n?void 0:n.lineDashOffset)&&void 0!==d?d:C,e.translationX=c,e.translationY=h,e.rotation=p}))}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each(((e,t)=>{const{x:i,y:n,text:o}=t,{offsetX:s,offsetY:r,fill:a,fontStyle:l,fontWeight:d,fontSize:c,fontFamily:h,textAlign:u,textBaseline:p}=t.label;e.visible=!0,e.x=i+s,e.y=n+r,e.text=o,e.fill=a,e.fontStyle=l,e.fontWeight=d,e.fontSize=c,e.fontFamily=h,e.textAlign=u,e.textBaseline=p}))}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,(e=>"primary"))}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each(((e,t)=>{e.fill=t.fill,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontFamily=t.fontFamily})),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(null==e.text)return!1;return!0}formatLabelText(e){var t;const{labelSelection:i,horizontal:n,axes:o}=this,s=o[nse.X],r=o[nse.Y];if(null==s||null==r)return;const[a,l]=s.range,[d,c]=r.range,h=this.originX+Math.min(a,l),u=this.originY+Math.min(d,c),p=Math.abs(l-a),g=Math.abs(c-d),m=null!==(t=null===e||void 0===e?void 0:e.label)&&void 0!==t?t:this.properties.value;let v;if(n){const e=s.scale.convert(m);v=new rse(h,u,e-h,g)}else{const e=r.scale.convert(m);v=new rse(h,e,p,g-e)}const f={scale:new rse(h,u,p,g),bar:v},{margin:y}=this.properties;!function(e,t,i,n,o){const{scale:s,bar:r}=n,{padding:a,horizontal:l}=i;t.each(((t,i)=>{const n=Wne(e,i,null===o||void 0===o?void 0:o.label),d=()=>({width:s.width,height:s.height,meta:null});let c;const h=i.avoidCollisions&&"outside-start"!==i.placement&&"outside-end"!==i.placement;if(null==n)return;if(h){const e=Nie(n,i,{padding:a},d);c=null===e||void 0===e?void 0:e[0]}else{const e={fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,fontFamily:i.fontFamily,lineHeight:i.lineHeight},{width:t,height:o}=Hoe.measureText(n,{font:e});c={text:n,fontSize:i.fontSize,lineHeight:Lie(i,i.fontSize),width:t,height:o}}if(null==c)return void(t.visible=!1);const u=l?s.x:s.y+s.height,p=l?s.x+s.width:s.y,g=l?r.x:r.y+r.height,m=l?r.x+r.width:r.y,v=i.spacing*(l?1:-1);let f,y,b,C;switch(i.placement){case"outside-start":f=-1/0,y=1/0,b=u-v,C="Before";break;case"outside-end":f=-1/0,y=1/0,b=p+v,C="After";break;case"inside-start":f=u,y=m,b=u+v,C="After";break;case"inside-end":f=m,y=p,b=p-v,C="Before";break;case"inside-center":f=u,y=p,b=(u+p)/2,C="Center";break;case"bar-inside":f=g,y=m,b=(g+m)/2,C="Center";break;case"bar-inside-end":f=g,y=m,b=m-v,C="Before";break;case"bar-outside-end":f=m,y=p,b=m+v,C="After";break;case"bar-end":f=-1/0,y=1/0,b=m,C="Center"}const x=l?b:s.x+s.width/2,w=l?s.y+s.height/2:b;let S,M;l?(S=x+qoe[C]*c.width,M=S+c.width):(S=w+Qoe[C]*c.height,M=S+c.height);const D=Math.min(S,M)>=Math.min(f,y)&&Math.max(S,M)<=Math.max(f,y);!i.avoidCollisions||D?(t.visible=!0,t.text=c.text,t.fontSize=c.fontSize,t.lineHeight=c.lineHeight,t.textAlign=l?Zoe[C]:"center",t.textBaseline=l?"middle":Xoe[C],t.x=x,t.y=w):t.visible=!1}))}(this,i,{padding:y,horizontal:n},f,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),$oe([this.datumSelection],Yoe),this.formatLabelText()}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}animateLabelText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{animationManager:t}=this.ctx;let i=0,n=0;if(this.labelSelection.each(((t,o)=>{var s,r,a;t.opacity=1,i=null!==(s=null!==(r=null===(a=t.previousDatum)||void 0===a?void 0:a.value)&&void 0!==r?r:e.from)&&void 0!==s?s:o.value,n=o.value})),this.labelsHaveExplicitText());else if(i===n)this.formatLabelText({label:n});else{var o;const s="".concat(this.id,"_labels");t.animate({id:s,groupId:"label",from:{label:i},to:{label:n},phase:null!==(o=e.phase)&&void 0!==o?o:"update",ease:gse.easeOut,onUpdate:e=>this.formatLabelText(e)})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Koe(!0,this.horizontal);Joe(this.id,"node",e,[this.datumSelection],t,((e,t)=>t.itemId)),Joe(this.id,"label",e,[this.labelSelection],Vne,(()=>"primary")),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Koe(!1,this.horizontal);Joe(this.id,"node",e,[this.datumSelection],t,((e,t)=>t.itemId)),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}pickNode(e,t){switch(t){case"event":case"context-menu":{const t=this.scaleGroup.pickNode(e.x,e.y);return null!=t?{pickMode:mW.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:t.datum,distance:0}:void 0}case"tooltip":case"highlight":case"highlight-tooltip":{const t=this.itemTargetGroup.pickNode(e.x,e.y);return null!=t?{pickMode:mW.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:t.datum,distance:0}:{pickMode:mW.SeriesNodePickMode.NEAREST_NODE,match:this.nodeDatum,distance:0}}}}getTooltipContent(e){var t;const{id:i,properties:n}=this,{tooltip:o}=n;if(!n.isValid())return;const s=this.highlightDatum(e),r=null!==(t=null===s||void 0===s?void 0:s.value)&&void 0!==t?t:n.value,a=null===s||void 0===s?void 0:s.text;return o.formatTooltip({data:[{label:null!==a&&void 0!==a?a:"",value:this.formatLabel(r)}]},{seriesId:i,title:void 0,datum:void 0,value:r})}pickFocus(e){var t;const i=null===(t=this.contextNodeData)||void 0===t?void 0:t.targetData;if(null==i||0===i.length)return;const n=Math.min(Math.max(e.datumIndex,0),i.length-1),o=i[n];for(const s of this.targetSelection)if(s.datum===o){return{bounds:s.node,showFocusBox:!0,clipFocusBox:!0,datum:o,datumIndex:n}}}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),t.join(". ")}};fse.className="LinearGaugeSeries",fse.type="linear-gauge";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:yse,DEFAULT_HIERARCHY_FILLS:bse,DEFAULT_LABEL_COLOUR:Cse,DEFAULT_INVERTED_LABEL_COLOUR:xse,DEFAULT_GAUGE_SERIES_COLOR_RANGE:wse},ThemeConstants:{CARTESIAN_AXIS_TYPE:Sse}}=mW,Mse={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"linear-gauge",moduleFactory:e=>new fse(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:Sse.NUMBER,line:{enabled:!1}},{type:Sse.NUMBER,line:{enabled:!1}}],themeTemplate:{minWidth:200,minHeight:200,series:{thickness:50,bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:Cse,stroke:Cse,size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:yse,color:Cse,spacing:5}},label:{enabled:!1,placement:"inside-start",fontWeight:"normal",fontSize:24,minimumFontSize:12,spacing:18,fontFamily:yse,color:xse},margin:4,tooltip:{enabled:!1}},axes:{[Sse.NUMBER]:{line:{enabled:!1},gridLine:{enabled:!1}}}},paletteFactory(e){const{takeColors:t,colorsCount:i,userPalette:n,themeTemplateParameters:o}=e,{fills:s}=t(i),r=o.get(wse),a=o.get(bse),l="inbuilt"===n?r:[s[0],s[1]];return{scale:{defaultFill:null===a||void 0===a?void 0:a[1],stroke:null===a||void 0===a?void 0:a[2]},defaultColorRange:_ne(l)}}},Dse={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer"},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}};function kse(e,t,i,n){const[o,s]=e,[r,a]=t,l=r-o,d=a-s,c=l*l+d*d;let h,u;if(Math.abs(c)<1e-9)h=o,u=s;else{let e=((i-o)*l+(n-s)*d)/c;e=Math.max(0,Math.min(1,e)),h=o+e*(r-o),u=s+e*(a-s)}const p=i-h,g=n-u;return p*p+g*g}function Ise(e,t,i){let n=1/0,o=e[e.length-1];for(const s of e)n=Math.min(n,kse(o,s,t,i)),o=s;return Math.sqrt(n)}function Ase(e){let[t,i]=e[0],n=0;for(let o=1;o<e.length;o+=1){const[s,r]=e[o];n+=Math.hypot(s-t,r-i),t=s,i=r}return n}function Tse(e){if(0===e.length)return;const t=Ase(e)/2;let[i,n]=e[0],o=0;for(let s=1;s<e.length;s+=1){const[r,a]=e[s],l=Math.hypot(r-i,a-n),d=o+l;if(d>t){const e=(t-o)/l;return{point:[i+(r-i)*e,n+(a-n)*e],angle:Math.atan2(a-n,r-i)}}o=d,i=r,n=a}}var{LonLatBBox:Ese}=mW;function Rse(e,t,i,n,o){return null==e?e=new Ese(t,i,n,o):(e.lon0=Math.min(e.lon0,t),e.lat0=Math.min(e.lat0,i),e.lon1=Math.max(e.lon1,n),e.lat1=Math.max(e.lat1,o)),e}function Lse(e,t){return e.forEach((e=>{const[i,n]=e;t=Rse(t,i,n,i,n)})),t}function Pse(e,t,i){let n=!1,o=1/0;for(const s of e){let e=s[s.length-1],[r,a]=e;for(const l of s){const[s,d]=l;d>i!==a>i&&t<(r-s)*(i-d)/(a-d)+s&&(n=!n),o=Math.min(o,kse(e,l,t,i)),e=l,r=s,a=d}}return(n?-1:1)*Math.sqrt(o)}var{Path:Nse,ExtendedPath2D:Fse,BBox:Ose,ScenePathChangeDetection:Bse}=mW,Gse=class extends Nse{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new Fse}computeBBox(){var e;return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),null===(e=this.bbox)||void 0===e?void 0:e.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=null!=e?this.drawGeometry(e,void 0):void 0}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return null!=i&&(!!this.getBBox().containsPoint(e,t)&&this.geometryDistance(i,e,t)<=0)}distanceSquared(e,t){const{projectedGeometry:i}=this;if(null==i)return 1/0;const n=this.geometryDistance(i,e,t);return n>0?n*n:0}geometryDistance(e,t,i){const{renderMode:n,strokeWidth:o}=this,s=0!==(1&n),r=0!==(2&n),a=Math.max(o/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce(((e,n)=>Math.min(e,this.geometryDistance(n,t,i))),1/0);case"MultiPolygon":return s?e.coordinates.reduce(((e,n)=>Math.min(e,Math.max(Pse(n,t,i),0))),1/0):1/0;case"Polygon":return s?Math.max(Pse(e.coordinates,t,i),0):1/0;case"MultiLineString":return r?e.coordinates.reduce(((e,n)=>Math.min(e,Math.max(Ise(n,t,i)-a,0))),1/0):1/0;case"LineString":return r?Math.max(Ise(e.coordinates,t,i)-a,0):1/0;default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:n,strokePath:o}=this,s=0!==(1&i),r=0!==(2&i);switch(e.type){case"GeometryCollection":e.geometries.forEach((e=>{t=this.drawGeometry(e,t)}));break;case"MultiPolygon":s&&e.coordinates.forEach((e=>{t=this.drawPolygon(n,e,t)}));break;case"Polygon":s&&(t=this.drawPolygon(n,e.coordinates,t));break;case"LineString":r&&(t=this.drawLineString(o,e.coordinates,t,!1));break;case"MultiLineString":r&&e.coordinates.forEach((e=>{t=this.drawLineString(o,e,t,!1)}))}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let n=1;n<t.length;n+=1){const i=t[n];this.drawLineString(e,i,void 0,!0)}return i}drawLineString(e,t,i,n){if(t.length<2)return i;const o=n?t.length-1:t.length;for(let s=0;s<o;s+=1){const[n,o]=t[s];if(0===s?e.moveTo(n,o):e.lineTo(n,o),null==i)i=new Ose(n,o,0,0);else{const{x:e,y:t}=i,s=e+i.width,r=t+i.height;i.x=Math.min(e,n),i.y=Math.min(t,o),i.width=Math.max(s,n)-i.x,i.height=Math.max(r,o)-i.y}}return n&&e.closePath(),i}};function zse(e,t){if(null!=e.bbox){const[i,n,o,s]=e.bbox;return t=Rse(t,i,n,o,s)}switch(e.type){case"GeometryCollection":e.geometries.forEach((e=>{t=zse(e,t)}));break;case"MultiPolygon":e.coordinates.forEach((e=>{e.length>0&&(t=Lse(e[0],t))}));break;case"Polygon":e.coordinates.length>0&&(t=Lse(e.coordinates[0],t));break;case"MultiLineString":e.coordinates.forEach((e=>{t=Lse(e,t)}));break;case"LineString":t=Lse(e.coordinates,t);break;case"MultiPoint":e.coordinates.forEach((e=>{const[i,n]=e;t=Rse(t,i,n,i,n)}));break;case"Point":{const[i,n]=e.coordinates;t=Rse(t,i,n,i,n);break}}return t}function _se(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach((e=>{const n=_se(e);if(null==n)return;const o=Lse(n[0],void 0);if(null==o)return;const s=Math.abs(o.lat1-o.lat0)*Math.abs(o.lon1-o.lon0);(null==t||s>t)&&(t=s,i=n)})),i}case"MultiPolygon":{let t,i;return e.coordinates.forEach((e=>{const n=Lse(e[0],void 0);if(null==n)return;const o=Math.abs(n.lat1-n.lat0)*Math.abs(n.lon1-n.lon0);(null==t||o>t)&&(t=o,i=e)})),i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function Vse(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach((e=>{const n=Vse(e);if(null==n)return;const o=Ase(n);null!=o&&(null==t||o>t)&&(t=o,i=n)})),i}case"MultiLineString":{let t,i=0;return e.coordinates.forEach((e=>{const n=Ase(e);n>i&&(i=n,t=e)})),t}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function Hse(e,t){if(null==e)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some((e=>Hse(e,t)));case"MultiPolygon":case"Polygon":return 0!==(1&t);case"MultiLineString":case"LineString":return 0!==(2&t);case"MultiPoint":case"Point":return 0!==(4&t)}}function Wse(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map((e=>Wse(e,t)))};case"Polygon":return{type:"Polygon",coordinates:Use(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:jse(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:Use(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:Kse(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:Kse(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function jse(e,t){return e.map((e=>Use(e,t)))}function Use(e,t){return e.map((e=>Kse(e,t)))}function Kse(e,t){return e.map((e=>t.convert(e)))}dj([Bse()],Gse.prototype,"projectedGeometry",2),dj([Bse()],Gse.prototype,"renderMode",2);mW.SeriesProperties;var Yse=class extends mW.DataModelSeries{addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>{this.onLegendItemClick(e)})),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>{this.onLegendItemDoubleClick(e)})))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}};function Zse(e){return Array.isArray(e)&&e.length>=2&&e.every(mW.isFiniteNumber)}function Xse(e){return Array.isArray(e)&&e.length>=2&&e.every(Zse)}function qse(e){return Math.abs(e[0][0]-e[e.length-1][0])<.001&&Math.abs(e[0][1]-e[e.length-1][1])<.001}function Qse(e){return Array.isArray(e)&&e.every(Xse)&&e.every(qse)}function Jse(e){if(null===e)return!0;if("object"!==typeof e||null==e.type)return!1;const{type:t,coordinates:i}=e;switch(t){case"GeometryCollection":return Array.isArray(e.geometries)&&e.geometries.every(Jse);case"MultiPolygon":return Array.isArray(i)&&i.every(Qse);case"Polygon":return Qse(i);case"MultiLineString":return Array.isArray(i)&&i.every(Xse);case"LineString":case"MultiPoint":return Xse(i);case"Point":return Zse(i)}}function $se(e){return null!==e&&"object"===typeof e&&"Feature"===e.type&&Jse(e.geometry)}var ere=mW.predicateWithMessage((function(e){return null!==e&&"object"===typeof e&&"FeatureCollection"===e.type&&Array.isArray(e.features)&&e.features.every($se)}),"a GeoJSON object"),{COLOR_STRING:tre,LINE_DASH:ire,OBJECT:nre,POSITIVE_NUMBER:ore,RATIO:sre,Validate:rre,SeriesProperties:are,SeriesTooltip:lre}=mW,dre=class extends are{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new lre}};dj([rre(ere,{optional:!0})],dre.prototype,"topology",2),dj([rre(tre)],dre.prototype,"stroke",2),dj([rre(sre)],dre.prototype,"strokeOpacity",2),dj([rre(ore)],dre.prototype,"strokeWidth",2),dj([rre(ire)],dre.prototype,"lineDash",2),dj([rre(ore)],dre.prototype,"lineDashOffset",2),dj([rre(nre)],dre.prototype,"tooltip",2);var{createDatumId:cre,SeriesNodePickMode:hre,Validate:ure,Logger:pre,Group:gre,Selection:mre,PointerEvents:vre}=mW,fre=class extends Yse{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[hre.EXACT_SHAPE_MATCH]}),this.properties=new dre,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new gre({name:"itemGroup"})),this.datumSelection=mre.select(this.itemGroup,(()=>this.nodeFactory()))}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0)}nodeFactory(){const e=new Gse;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=vre.None,e}processData(){const{topology:e}=this;this.topologyBounds=null===e||void 0===e?void 0:e.features.reduce(((e,t)=>{const i=t.geometry;return null==i?e:zse(i,e)}),void 0),null==e&&pre.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(null==t)return;const n=[];return t.features.forEach(((e,t)=>{const{geometry:o}=e,s=null!=o&&null!=i?Wse(o,i):void 0;null!=s&&n.push({series:this,itemId:t,datum:e,index:t,projectedGeometry:s})})),{itemId:e,nodeData:n,labelData:[]}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e;const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=null!==(e=this.contextNodeData)&&void 0!==e?e:{};this.datumSelection=this.updateDatumSelection({nodeData:i,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>cre(e.index)))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{stroke:n,strokeOpacity:o,lineDash:s,lineDashOffset:r}=t,a=this.getStrokeWidth(t.strokeWidth);i.each(((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.stroke=n,e.strokeWidth=a,e.strokeOpacity=o,e.lineDash=s,e.lineDashOffset=r}))}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}computeFocusBounds(e){}};fre.className="MapLineBackgroundSeries",fre.type="map-line-background",dj([ure(ere,{optional:!0,property:"topology"})],fre.prototype,"_chartTopology",2);var{DEFAULT_HIERARCHY_STROKES:yre}=mW.ThemeSymbols,bre={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:e=>new fre(e),tooltipDefaults:{range:"exact"},themeTemplate:l(l({},Dse),{},{series:{strokeWidth:1,lineDash:[0],lineDashOffset:0}}),paletteFactory:e=>{var t;let{themeTemplateParameters:i}=e;return{stroke:null===(t=i.get(yre))||void 0===t?void 0:t[1]}}};function Cre(e,t){var i;const n=null===(i=e.contextNodeData)||void 0===i?void 0:i.nodeData[t.datumIndex];if(void 0!==n)for(const o of e.datumSelection.nodes())if(o.datum===n)return o}var{AND:xre,ARRAY:wre,COLOR_STRING:Sre,COLOR_STRING_ARRAY:Mre,FUNCTION:Dre,LINE_DASH:kre,NUMBER_ARRAY:Ire,OBJECT:Are,POSITIVE_NUMBER:Tre,RATIO:Ere,STRING:Rre,Validate:Lre,SeriesProperties:Pre,SeriesTooltip:Nre,Label:Fre}=mW,Ore=class extends Pre{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new Fre,this.tooltip=new Nre}};dj([Lre(ere,{optional:!0})],Ore.prototype,"topology",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"title",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"legendItemName",2),dj([Lre(Rre)],Ore.prototype,"idKey",2),dj([Lre(Rre)],Ore.prototype,"topologyIdKey",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"idName",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"labelKey",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"labelName",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"sizeKey",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"sizeName",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"colorKey",2),dj([Lre(Rre,{optional:!0})],Ore.prototype,"colorName",2),dj([Lre(Ire,{optional:!0})],Ore.prototype,"sizeDomain",2),dj([Lre(xre(Mre,wre.restrict({minLength:1})),{optional:!0})],Ore.prototype,"colorRange",2),dj([Lre(Tre,{optional:!0})],Ore.prototype,"maxStrokeWidth",2),dj([Lre(Sre)],Ore.prototype,"stroke",2),dj([Lre(Ere)],Ore.prototype,"strokeOpacity",2),dj([Lre(Tre)],Ore.prototype,"strokeWidth",2),dj([Lre(kre)],Ore.prototype,"lineDash",2),dj([Lre(Tre)],Ore.prototype,"lineDashOffset",2),dj([Lre(Dre,{optional:!0})],Ore.prototype,"itemStyler",2),dj([Lre(Are)],Ore.prototype,"label",2),dj([Lre(Are)],Ore.prototype,"tooltip",2);var{getMissCount:Bre,createDatumId:Gre,SeriesNodePickMode:zre,valueProperty:_re,CachedTextMeasurerPool:Vre,Validate:Hre,Logger:Wre,ColorScale:jre,LinearScale:Ure,Selection:Kre,Text:Yre}=mW,Zre=class extends Yse{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[zre.EXACT_SHAPE_MATCH,zre.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new Ore,this._chartTopology=void 0,this.colorScale=new jre,this.sizeScale=new Ure,this.datumSelection=Kre.select(this.contentGroup,(()=>this.nodeFactory())),this.labelSelection=Kre.select(this.labelGroup,Yre),this.highlightDatumSelection=Kre.select(this.highlightNode,(()=>this.nodeFactory())),this._previousDatumMidPoint=void 0}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}renderToOffscreenCanvas(){return!0}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0)}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new Gse;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}async processData(e){var t;if(null==this.data||!this.properties.isValid())return;const{data:i,topology:n,sizeScale:o,colorScale:s}=this,{topologyIdKey:r,idKey:a,sizeKey:l,colorKey:d,labelKey:c,sizeDomain:h,colorRange:u}=this.properties,p=new Map;null===n||void 0===n||n.features.forEach((e=>{var t;const i=null===(t=e.properties)||void 0===t?void 0:t[r];null!=i&&Hse(e.geometry,2)&&p.set(i,e)}));const g=this.sizeScale.type,m=this.colorScale.type,v=null===(t=this.scale)||void 0===t?void 0:t.type,{dataModel:f,processedData:y}=await this.requestDataModel(e,i,{props:[_re(a,v,{id:"idValue",includeProperty:!1}),_re(a,v,{id:"featureValue",includeProperty:!1,processor:()=>e=>p.get(e)}),...null!=c?[_re(c,"band",{id:"labelValue"})]:[],...null!=l?[_re(l,g,{id:"sizeValue"})]:[],...null!=d?[_re(d,m,{id:"colorValue"})]:[]]}),b=0!==y.rawData.length?f.resolveColumnById(this,"featureValue",y):void 0;if(this.topologyBounds=null===b||void 0===b?void 0:b.reduce(((e,t)=>{const i=null===t||void 0===t?void 0:t.geometry;return null==i?e:zse(i,e)}),void 0),null!=l){var C;const e=f.resolveProcessedDataIndexById(this,"sizeValue"),t=null!==(C=y.domain.values[e])&&void 0!==C?C:[];o.domain=null!==h&&void 0!==h?h:t}if(null!=u&&this.isColorScaleValid()){const e=f.resolveProcessedDataIndexById(this,"colorValue");s.domain=y.domain.values[e],s.range=u,s.update()}null==n&&Wre.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.rawData.length,s=Bre(this,i.defs.values[n].missing);return!(0===o||o===s)}getLabelDatum(e,t,i,n){if(null==t||null==i)return;const o=Vse(i);if(null==o)return;const{idKey:s,idName:r,sizeKey:a,sizeName:l,colorKey:d,colorName:c,labelKey:h,labelName:u,label:p}=this.properties,g=this.getLabelText(p,{value:t,datum:e,idKey:s,idName:r,sizeKey:a,sizeName:l,colorKey:d,colorName:c,labelKey:h,labelName:u});if(null==g)return;const m=Vre.measureText(String(g),{font:n}),v=Tse(o);if(null==v)return;const[f,y]=v.point,{width:b,height:C}=m;return{point:{x:f,y:y,size:0},label:{width:b,height:C,text:g},marker:void 0,placement:void 0}}createNodeData(){var e;const{id:t,dataModel:i,processedData:n,sizeScale:o,properties:s,scale:r}=this,{idKey:a,sizeKey:l,colorKey:d,labelKey:c,label:h}=s;if(null==i||null==n||0===n.rawData.length)return;const u=i.resolveColumnById(this,"idValue",n),p=i.resolveColumnById(this,"featureValue",n),g=null!=c?i.resolveColumnById(this,"labelValue",n):void 0,m=null!=l?i.resolveColumnById(this,"sizeValue",n):void 0,v=null!=d?i.resolveColumnById(this,"colorValue",n):void 0,f=null!==(e=s.maxStrokeWidth)&&void 0!==e?e:s.strokeWidth;o.range=[Math.min(s.strokeWidth,f),f];const y=h.getFont(),b=new Map;n.rawData.forEach(((e,t)=>{var i,n;const o=u[t],s=null!==(i=null===(n=p[t])||void 0===n?void 0:n.geometry)&&void 0!==i?i:void 0,a=null!=s&&null!=r?Wse(s,r):void 0;null!=o&&null!=a&&b.set(o,a)}));const C=[],x=[],w=[];n.rawData.forEach(((e,t)=>{const i=u[t],n=null===v||void 0===v?void 0:v[t],o=null===m||void 0===m?void 0:m[t],s=null===g||void 0===g?void 0:g[t],r=b.get(i);null==r&&w.push(i);const l=this.getLabelDatum(e,s,r,y);null!=l&&x.push(l),C.push({series:this,itemId:a,datum:e,datumIndex:t,idValue:i,labelValue:s,colorValue:n,sizeValue:o,projectedGeometry:r})}));if(w.length>10){const e=w.length-10;w.length=10,w.push("(+".concat(e," more)"))}return w.length>0&&Wre.warnOnce("some data items do not have matches in the provided topology",w),{itemId:t,nodeData:C,labelData:x}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e,t,i;const{datumSelection:n,highlightDatumSelection:o}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let s=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();null==s||s.series===this&&null!=s.datum||(s=void 0);const r=null!==(t=null===(i=this.contextNodeData)||void 0===i?void 0:i.nodeData)&&void 0!==t?t:[];this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:n}),this.updateDatumNodes({datumSelection:n,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:null!=s?[s]:[],datumSelection:o}),this.updateDatumNodes({datumSelection:o,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>Gre(e.idValue)))}getItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,a=e?r.highlightStyle.item:void 0,l=this.getStrokeWidth(r.strokeWidth);return{stroke:null!==(t=null===a||void 0===a?void 0:a.stroke)&&void 0!==t?t:r.stroke,strokeWidth:null!==(i=null===a||void 0===a?void 0:a.strokeWidth)&&void 0!==i?i:l,strokeOpacity:null!==(n=null===a||void 0===a?void 0:a.strokeOpacity)&&void 0!==n?n:r.strokeOpacity,lineDash:null!==(o=null===a||void 0===a?void 0:a.lineDash)&&void 0!==o?o:r.lineDash,lineDashOffset:null!==(s=null===a||void 0===a?void 0:a.lineDashOffset)&&void 0!==s?s:r.lineDashOffset}}getItemStyleOverrides(e,t,i,n,o,s){const{id:r,properties:a,colorScale:d,sizeScale:c}=this,{colorRange:h,itemStyler:u}=a;let p;var g,m,v;s||null==i||(null!==(g=p)&&void 0!==g||(p={}),p.stroke=this.isColorScaleValid()?d.convert(i):null!==(m=null===h||void 0===h?void 0:h[0])&&void 0!==m?m:a.stroke);null!=n&&(null!==(v=p)&&void 0!==v||(p={}),p.strokeWidth=c.convert(n,!0));if(null!=u){var f;const i=this.cachedDatumCallback(Gre(e,s?"highlight":"node"),(()=>u(l(l({seriesId:r,datum:t,highlighted:s},o),p))));null!==(f=p)&&void 0!==f||(p={}),Object.assign(p,i)}return p}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getItemBaseStyle(i);t.each(((e,t)=>{var o,s,r,a,l;const{datum:d,datumIndex:c,colorValue:h,sizeValue:u,projectedGeometry:p}=t;if(null==p)return e.visible=!1,void(e.projectedGeometry=void 0);const g=this.getItemStyleOverrides(String(c),d,h,u,n,i);e.visible=!0,e.projectedGeometry=p,e.stroke=null!==(o=null===g||void 0===g?void 0:g.stroke)&&void 0!==o?o:n.stroke,e.strokeWidth=null!==(s=null===g||void 0===g?void 0:g.strokeWidth)&&void 0!==s?s:n.strokeWidth,e.strokeOpacity=null!==(r=null===g||void 0===g?void 0:g.strokeOpacity)&&void 0!==r?r:n.strokeOpacity,e.lineDash=null!==(a=null===g||void 0===g?void 0:g.lineDash)&&void 0!==a?a:n.lineDash,e.lineDashOffset=null!==(l=null===g||void 0===g?void 0:g.lineDashOffset)&&void 0!==l?l:n.lineDashOffset}))}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,(e=>{e.pointerEvents=mW.PointerEvents.None})),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:r}=this.properties.label;t.each(((e,t)=>{let{x:a,y:l,width:d,height:c,text:h}=t;e.visible=!0,e.x=a+d/2,e.y=l+c/2,e.text=h,e.fill=i,e.fontStyle=n,e.fontWeight=o,e.fontSize=s,e.fontFamily=r,e.textAlign="center",e.textBaseline="middle"}))}resetAnimation(){}getLabelData(){var e,t;return this.isLabelEnabled()&&null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.labelData)&&void 0!==e?e:[]}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.datumSelection.each(((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)})),null!=t?{datum:t,distance:Math.sqrt(o)}:void 0}datumMidPoint(e){var t;const{_previousDatumMidPoint:i}=this;if((null===i||void 0===i?void 0:i.datum)===e)return i.point;const n=e.projectedGeometry,o=null!=n?Vse(n):void 0,s=null!=o?null===(t=Tse(o))||void 0===t?void 0:t.point:void 0,r=null!=s?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:r},r}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{strokeWidth:o,strokeOpacity:s,lineDash:r}=n;let{stroke:a}=n;if(null!=e&&this.isColorScaleValid()){const n=t.resolveColumnById(this,"colorValue",i)[e];a=this.colorScale.convert(n)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,enabled:!1},line:{stroke:a,strokeWidth:o,strokeOpacity:s,lineDash:r}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(null==t||null==i)return[];const{id:n,visible:o}=this,{title:s,legendItemName:r,idKey:a,idName:l,colorKey:d,colorName:c,colorRange:h,showInLegend:u}=this.properties;if("gradient"===e&&null!=d&&null!=h){return[{legendType:"gradient",enabled:o,seriesId:n,colorName:c,colorRange:h,colorDomain:t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")]}]}if("category"===e){var p,g;return[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:o,label:{text:null!==(p=null!==(g=null!==r&&void 0!==r?r:s)&&void 0!==g?g:l)&&void 0!==p?p:a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!u}]}return[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{idKey:s,idName:r,colorKey:a,colorName:d,sizeKey:c,sizeName:h,labelKey:u,labelName:p,title:g,legendItemName:m,tooltip:v}=o;if(!i||null===n||void 0===n||!n.rawData.length)return;const{datumIndex:f}=e,y=n.rawData[f],b=i.resolveColumnById(this,"idValue",n),C=[],x=null!=c?i.resolveColumnById(this,"sizeValue",n)[f]:void 0,w=null!=a?i.resolveColumnById(this,"colorValue",n)[f]:void 0;if(null!=c&&C.push({label:h,fallbackLabel:c,value:String(x)}),null!=a&&C.push({label:d,fallbackLabel:a,value:String(w)}),null!=u&&u!==s){const e=i.resolveColumnById(this,"labelValue",n)[f];C.push({label:p,fallbackLabel:u,value:e})}const S=this.getItemBaseStyle(!1);return Object.assign(S,this.getItemStyleOverrides(String(f),f,w,x,S,!1)),v.formatTooltip({heading:b[f],title:null!==g&&void 0!==g?g:m,symbol:this.legendItemSymbol(f),data:C},l({seriesId:t,datum:y,title:g,idKey:s,idName:r,colorKey:a,colorName:d,sizeKey:c,sizeName:h,labelKey:u,labelName:p},S))}computeFocusBounds(e){const t=Cre(this,e);return t?t.getBBox():void 0}};Zre.className="MapLineSeries",Zre.type="map-line",dj([Hre(ere,{optional:!0,property:"topology"})],Zre.prototype,"_chartTopology",2);var{DEFAULT_DIVERGING_SERIES_COLOR_RANGE:Xre,DEFAULT_FONT_FAMILY:qre,DEFAULT_LABEL_COLOUR:Qre}=mW.ThemeSymbols,Jre={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:e=>new Zre(e),tooltipDefaults:{range:"exact"},themeTemplate:l(l({},Dse),{},{series:{strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontSize:12,fontFamily:qre,color:Qre}}}),paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:n,themeTemplateParameters:o}=e,{fill:s}=mW.singleSeriesPaletteFactory(e),r=o.get(Xre),{fills:a}=t(i);return{colorRange:"inbuilt"===n?r:[a[0],a[1]],stroke:s}}},$re=(e,t,i)=>{let n=e,o=n;for(const s of t)if(null==n||i(n.value,s)>0)n={value:s,next:n},o=n;else{for(;null!=o.next&&i(o.next.value,s)<=0;)o=o.next;o.next={value:s,next:o.next}}return n};function eae(e,t,i){const n=Lse(e[0],void 0);if(null==n)return;const o=(n.lon0+n.lon1)/2,s=(n.lat0+n.lat1)/2,r=Math.abs(n.lon1-n.lon0),a=Math.abs(n.lat1-n.lat0),l=function(e){if(0===e.length)return;let t=0,i=0,n=0,[o,s]=e[e.length-1];for(const[r,a]of e){const e=o*a-r*s;n+=e,t+=(o+r)*e,i+=(s+a)*e,o=r,s=a}return n*=3,[t/n,i/n]}(e[0]),[d,c]=l,h=-Pse(e,d,c);let u;const p=(e,t)=>e-.5*Math.max(t-h,0),g=(t,n,o)=>{const{distance:s,maxDistance:r}=i(e,t,n,o),a=Math.hypot(d-t,c-n),l=Math.min(Math.max(d,t-o/2),t+o/2),h=Math.min(Math.max(c,n-o/2),n+o/2),u=Math.hypot(d-l,c-h);return{distance:s,maxDistance:r,value:p(s,a),maxValue:p(r,u),x:t,y:n,stride:o}},m=(e,t,i,n)=>{const o=g(t,i,n);o.maxDistance>=0&&e.push(o)},v=Math.min(r,a)/2;let f={value:g(o,s,v),next:null};for(;null!=f;){const e=f.value,{distance:i,value:n,maxValue:o,x:s,y:r,stride:a}=e;if(f=f.next,i>0&&(null==u||n>u.value)&&(u=e),null!=u&&o-u.value<=t)continue;const l=a/2,d=[];m(d,s-l,r-l,l),m(d,s+l,r-l,l),m(d,s-l,r+l,l),m(d,s+l,r+l,l),d.sort(tae),f=$re(f,d,tae)}if(null==u)return;const{distance:y,x:b,y:C}=u;return{x:b,y:C,distance:y}}var tae=(e,t)=>t.maxValue-e.maxValue;function iae(e,t){const i=eae(e,t,((e,t,i,n)=>{const o=-Pse(e,t,i);return{distance:o,maxDistance:o+n*Math.SQRT2}}));if(null==i)return;const{x:n,y:o}=i;return[n,o]}function nae(e,t){let i;switch(e.type){case"GeometryCollection":return e.geometries.flatMap((e=>nae(e,t)));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const n=_se(e);i=null!=n?iae(n,t):void 0;break}case"Polygon":{const n=e.coordinates;i=null!=n?iae(n,t):void 0;break}case"MultiLineString":{var n;const t=Vse(e);i=null!=t?null===(n=Tse(t))||void 0===n?void 0:n.point:void 0;break}case"LineString":var o;i=null===(o=Tse(e.coordinates))||void 0===o?void 0:o.point;break}return null!=i?[i]:[]}var{AND:oae,ARRAY:sae,COLOR_STRING:rae,COLOR_STRING_ARRAY:aae,FUNCTION:lae,NUMBER_ARRAY:dae,OBJECT:cae,POSITIVE_NUMBER:hae,RATIO:uae,STRING:pae,MARKER_SHAPE:gae,Validate:mae,SeriesProperties:vae,SeriesTooltip:fae,Logger:yae,Label:bae}=mW,Cae=class extends bae{constructor(){super(...arguments),this.placement="bottom"}};dj([mae(pae)],Cae.prototype,"placement",2);var xae=class extends vae{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.label=new Cae,this.tooltip=new fae}isValid(){const e=super.isValid(),t=null!=this.idKey,i=null!=this.latitudeKey&&null!=this.longitudeKey;return t||i?e:(yae.warnOnce("Either both [topology] and [idKey] or both [latitudeKey] and [longitudeKey] must be set to render a map marker series."),!1)}};dj([mae(ere,{optional:!0})],xae.prototype,"topology",2),dj([mae(pae,{optional:!0})],xae.prototype,"title",2),dj([mae(pae,{optional:!0})],xae.prototype,"legendItemName",2),dj([mae(pae,{optional:!0})],xae.prototype,"idKey",2),dj([mae(pae)],xae.prototype,"topologyIdKey",2),dj([mae(pae,{optional:!0})],xae.prototype,"idName",2),dj([mae(pae,{optional:!0})],xae.prototype,"latitudeKey",2),dj([mae(pae,{optional:!0})],xae.prototype,"latitudeName",2),dj([mae(pae,{optional:!0})],xae.prototype,"longitudeKey",2),dj([mae(pae,{optional:!0})],xae.prototype,"longitudeName",2),dj([mae(pae,{optional:!0})],xae.prototype,"labelKey",2),dj([mae(pae,{optional:!0})],xae.prototype,"labelName",2),dj([mae(pae,{optional:!0})],xae.prototype,"sizeKey",2),dj([mae(pae,{optional:!0})],xae.prototype,"sizeName",2),dj([mae(pae,{optional:!0})],xae.prototype,"colorKey",2),dj([mae(pae,{optional:!0})],xae.prototype,"colorName",2),dj([mae(oae(aae,sae.restrict({minLength:1})),{optional:!0})],xae.prototype,"colorRange",2),dj([mae(gae)],xae.prototype,"shape",2),dj([mae(hae)],xae.prototype,"size",2),dj([mae(hae,{optional:!0})],xae.prototype,"maxSize",2),dj([mae(dae,{optional:!0})],xae.prototype,"sizeDomain",2),dj([mae(rae)],xae.prototype,"fill",2),dj([mae(uae)],xae.prototype,"fillOpacity",2),dj([mae(rae)],xae.prototype,"stroke",2),dj([mae(hae)],xae.prototype,"strokeWidth",2),dj([mae(uae)],xae.prototype,"strokeOpacity",2),dj([mae(lae,{optional:!0})],xae.prototype,"itemStyler",2),dj([mae(cae)],xae.prototype,"label",2),dj([mae(cae)],xae.prototype,"tooltip",2);var{CachedTextMeasurerPool:wae,Validate:Sae,fromToMotion:Mae,StateMachine:Dae,getMissCount:kae,createDatumId:Iae,SeriesNodePickMode:Aae,valueProperty:Tae,computeMarkerFocusBounds:Eae,Logger:Rae,ColorScale:Lae,LinearScale:Pae,Group:Nae,Selection:Fae,Text:Oae,getMarker:Bae}=mW,Gae=class extends Yse{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[Aae.EXACT_SHAPE_MATCH,Aae.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new xae,this._chartTopology=void 0,this.colorScale=new Lae,this.sizeScale=new Pae,this.markerGroup=this.contentGroup.appendChild(new Nae({name:"markerGroup"})),this.labelSelection=Fae.select(this.labelGroup,Oae,!1),this.markerSelection=Fae.select(this.markerGroup,(()=>this.markerFactory()),!1),this.highlightMarkerSelection=Fae.select(this.highlightNode,(()=>this.markerFactory())),this.animationState=new Dae("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get hasData(){const e=null!=this.properties.latitudeKey&&null!=this.properties.longitudeKey;return super.hasData&&(null!=this.topology||e)}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[3,e],this.highlightGroup.zIndex=[4,e],!0)}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}markerFactory(){const{shape:e}=this.properties;return new(Bae(e))}async processData(e){var t;if(null==this.data||!this.properties.isValid())return;const{data:i,topology:n,sizeScale:o,colorScale:s}=this,{topologyIdKey:r,idKey:a,latitudeKey:l,longitudeKey:d,sizeKey:c,colorKey:h,labelKey:u,sizeDomain:p,colorRange:g}=this.properties,m=new Map;null===n||void 0===n||n.features.forEach((e=>{var t;const i=null===(t=e.properties)||void 0===t?void 0:t[r];null!=i&&m.set(i,e)}));const v=this.sizeScale.type,f=this.colorScale.type,y=null===(t=this.scale)||void 0===t?void 0:t.type,b=null!=l&&null!=d,{dataModel:C,processedData:x}=await this.requestDataModel(e,i,{props:[...null!=a?[Tae(a,y,{id:"idValue",includeProperty:!1}),Tae(a,y,{id:"featureValue",includeProperty:!1,processor:()=>e=>m.get(e)})]:[],...b?[Tae(l,y,{id:"latValue"}),Tae(d,y,{id:"lonValue"})]:[],...u?[Tae(u,"band",{id:"labelValue"})]:[],...c?[Tae(c,v,{id:"sizeValue"})]:[],...h?[Tae(h,f,{id:"colorValue"})]:[]]}),w=0!==x.rawData.length,S=w&&null!=a?C.resolveColumnById(this,"featureValue",x):void 0,M=w&&b?C.resolveColumnById(this,"latValue",x):void 0,D=w&&b?C.resolveColumnById(this,"lonValue",x):void 0;if(this.topologyBounds=x.rawData.reduce(((e,t,i)=>{const n=null===S||void 0===S?void 0:S[i],o=null===n||void 0===n?void 0:n.geometry;if(null!=o&&(e=zse(o,e)),null!=M&&null!=D){const t=D[i],n=M[i];e=Rse(e,t,n,t,n)}return e}),void 0),null!=c){var k;const e=C.resolveProcessedDataIndexById(this,"sizeValue"),t=null!==(k=x.domain.values[e])&&void 0!==k?k:[];o.domain=null!==p&&void 0!==p?p:t}if(null!=g&&this.isColorScaleValid()){const e=C.resolveProcessedDataIndexById(this,"colorValue");s.domain=x.domain.values[e],s.range=g,s.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.rawData.length,s=kae(this,i.defs.values[n].missing);return!(0===o||o===s)}getLabelDatum(e,t,i,n,o,s){if(null==t)return;const{idKey:r,idName:a,latitudeKey:l,latitudeName:d,longitudeKey:c,longitudeName:h,sizeKey:u,sizeName:p,colorKey:g,colorName:m,labelKey:v,labelName:f,label:y}=this.properties,{placement:b}=y,C=this.getLabelText(y,{value:t,datum:e,idKey:r,idName:a,latitudeKey:l,latitudeName:d,longitudeKey:c,longitudeName:h,sizeKey:u,sizeName:p,colorKey:g,colorName:m,labelKey:v,labelName:f});if(null==C)return;const{width:x,height:w}=wae.measureText(String(C),{font:s});return{point:{x:i,y:n,size:o},label:{width:x,height:w,text:C},marker:Bae(this.properties.shape),placement:b}}createNodeData(){var e;const{id:t,dataModel:i,processedData:n,sizeScale:o,properties:s,scale:r}=this,{idKey:a,latitudeKey:l,longitudeKey:d,sizeKey:c,colorKey:h,labelKey:u,label:p}=s;if(null==i||null==n||0===n.rawData.length||null==r)return;const g=null!=l&&null!=d,m=null!=a?i.resolveColumnById(this,"idValue",n):void 0,v=null!=a?i.resolveColumnById(this,"featureValue",n):void 0,f=g?i.resolveColumnById(this,"latValue",n):void 0,y=g?i.resolveColumnById(this,"lonValue",n):void 0,b=null!=u?i.resolveColumnById(this,"labelValue",n):void 0,C=null!=c?i.resolveColumnById(this,"sizeValue",n):void 0,x=null!=h?i.resolveColumnById(this,"colorValue",n):void 0,w=null!==(e=s.maxSize)&&void 0!==e?e:s.size;o.range=[Math.min(s.size,w),w];const S=p.getFont();let M;null!=m&&null!=v&&(M=new Map,n.rawData.forEach(((e,t)=>{var i,n;const o=m[t],s=null!==(i=null===(n=v[t])||void 0===n?void 0:n.geometry)&&void 0!==i?i:void 0,a=null!=s&&null!=r?Wse(s,r):void 0;null!=o&&null!=a&&M.set(o,a)})));const D=[],k=[],I=[];n.rawData.forEach(((e,t)=>{var i;const n=null===m||void 0===m?void 0:m[t],a=null===y||void 0===y?void 0:y[t],d=null===f||void 0===f?void 0:f[t],c=null===x||void 0===x?void 0:x[t],h=null===C||void 0===C?void 0:C[t],u=null===b||void 0===b?void 0:b[t],p=null!=h?o.convert(h,!0):s.size,g=null!=n?null===(i=M)||void 0===i?void 0:i.get(n):void 0;if(null!=n&&null==Wse&&I.push(n),null!=a&&null!=d){const[i,o]=r.convert([a,d]),s=this.getLabelDatum(e,u,i,o,p,S);s&&k.push(s),D.push({series:this,itemId:l,datum:e,datumIndex:t,index:-1,idValue:n,lonValue:a,latValue:d,labelValue:u,sizeValue:h,colorValue:c,point:{x:i,y:o,size:p},midPoint:{x:i,y:o}})}else null!=g&&nae(g,1).forEach(((i,o)=>{let[s,r]=i;const g=this.getLabelDatum(e,u,s,r,p,S);g&&k.push(g),D.push({series:this,itemId:l,datum:e,datumIndex:t,index:o,idValue:n,lonValue:a,latValue:d,labelValue:u,sizeValue:h,colorValue:c,point:{x:s,y:r,size:p},midPoint:{x:s,y:r}})}))}));if(I.length>10){const e=I.length-10;I.length=10,I.push("(+".concat(e," more)"))}return I.length>0&&Rae.warnOnce("some data items do not have matches in the provided topology",I),{itemId:t,nodeData:D,labelData:k}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale!==this.scale&&(this.previousScale=this.scale,!0)}update(e){var t,i,n;let{seriesRect:o}=e;const s=this.checkResize(o),r=this.checkScaleChange(),{markerSelection:a,highlightMarkerSelection:l}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let d=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();null==d||d.series===this&&null!=d.datum||(d=void 0);const c=null!==(i=null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData)&&void 0!==i?i:[];this.markerSelection=this.updateMarkerSelection({markerData:c,markerSelection:a}),this.updateMarkerNodes({markerSelection:a,isHighlight:!1,highlightedDatum:d}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:null!=d?[d]:[],markerSelection:l}),this.updateMarkerNodes({markerSelection:l,isHighlight:!0,highlightedDatum:d}),(r||s)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,(e=>{e.pointerEvents=mW.PointerEvents.None})),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:r}=this.properties.label;t.each(((e,t)=>{let{x:a,y:l,width:d,height:c,text:h}=t;e.visible=!0,e.x=a+d/2,e.y=l+c/2,e.text=h,e.fill=i,e.fontStyle=n,e.fontWeight=o,e.fontSize=s,e.fontFamily=r,e.textAlign="center",e.textBaseline="middle"}))}updateMarkerSelection(e){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,(e=>Iae([e.index,e.idValue,e.lonValue,e.latValue])))}getMarkerItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,a=e?r.highlightStyle.item:void 0,l=this.getStrokeWidth(r.strokeWidth);return{size:r.size,fill:null!==(t=null===a||void 0===a?void 0:a.fill)&&void 0!==t?t:r.fill,fillOpacity:null!==(i=null===a||void 0===a?void 0:a.fillOpacity)&&void 0!==i?i:r.fillOpacity,stroke:null!==(n=null===a||void 0===a?void 0:a.stroke)&&void 0!==n?n:r.stroke,strokeWidth:null!==(o=null===a||void 0===a?void 0:a.strokeWidth)&&void 0!==o?o:l,strokeOpacity:null!==(s=null===a||void 0===a?void 0:a.strokeOpacity)&&void 0!==s?s:r.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,n,o,s){const{id:r,properties:a,colorScale:d,sizeScale:c}=this,{colorRange:h,itemStyler:u}=a;let p;var g,m,v;s||null==i||(null!==(g=p)&&void 0!==g||(p={}),p.fill=this.isColorScaleValid()?d.convert(i):null!==(m=null===h||void 0===h?void 0:h[0])&&void 0!==m?m:a.fill);null!=n&&(null!==(v=p)&&void 0!==v||(p={}),p.size=c.convert(n,!0));if(null!=u){var f;const i=this.cachedDatumCallback(Iae(e,s?"highlight":"node"),(()=>u(l(l({seriesId:r,datum:t,highlighted:s},o),p))));null!==(f=p)&&void 0!==f||(p={}),Object.assign(p,i)}return p}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i,highlightedDatum:n}=e,o=this.getMarkerItemBaseStyle(i);t.each(((e,t)=>{var s,r,a,l,d,c;const{datumIndex:h,datum:u,point:p,colorValue:g,sizeValue:m}=t,v=this.getMarkerItemStyleOverrides(String(h),u,g,m,o,i);e.size=null!==(s=null===v||void 0===v?void 0:v.size)&&void 0!==s?s:o.size,e.fill=null!==(r=null===v||void 0===v?void 0:v.fill)&&void 0!==r?r:o.fill,e.fillOpacity=null!==(a=null===v||void 0===v?void 0:v.fillOpacity)&&void 0!==a?a:o.fillOpacity,e.stroke=null!==(l=null===v||void 0===v?void 0:v.stroke)&&void 0!==l?l:o.stroke,e.strokeWidth=null!==(d=null===v||void 0===v?void 0:v.strokeWidth)&&void 0!==d?d:o.strokeWidth,e.strokeOpacity=null!==(c=null===v||void 0===v?void 0:v.strokeOpacity)&&void 0!==c?c:o.strokeOpacity,e.translationX=p.x,e.translationY=p.y,e.zIndex=i||null==n||u!==n.datum?0:1}))}isProcessedDataAnimatable(){return!0}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t={fromFn:(e,t,i)=>"removed"===i?{scalingX:1,scalingY:1}:null==e.previousDatum?{scalingX:0,scalingY:0}:{scalingX:e.scalingX,scalingY:e.scalingY},toFn:(e,t,i)=>"removed"===i?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}};Mae(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){var e,t;return this.isLabelEnabled()&&null!==(e=null===(t=this.contextNodeData)||void 0===t?void 0:t.labelData)&&void 0!==e?e:[]}pickNodeClosestDatum(e){var t;const{x:i,y:n}=e;let o,s=1/0;return null===(t=this.contextNodeData)||void 0===t||t.nodeData.forEach((e=>{const{x:t,y:r,size:a}=e.point,l=Math.max(Math.abs(t-i)-a,0),d=Math.max(Math.abs(r-n)-a,0),c=l*l+d*d;c<s&&(s=c,o=e)})),null!=o?{datum:o,distance:Math.sqrt(s)}:void 0}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{shape:o,fillOpacity:s,stroke:r,strokeWidth:a,strokeOpacity:l}=n;let{fill:d}=n;if(null!=e&&this.isColorScaleValid()){const n=t.resolveColumnById(this,"colorValue",i)[e];d=this.colorScale.convert(n)}return{marker:{shape:o,fill:d,fillOpacity:s,stroke:r,strokeWidth:a,strokeOpacity:l}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(null==t||null==i)return[];const{id:n,visible:o}=this,{title:s,legendItemName:r,idName:a,idKey:l,colorKey:d,colorName:c,colorRange:h,showInLegend:u}=this.properties;if("gradient"===e&&null!=d&&null!=h){return[{legendType:"gradient",enabled:o,seriesId:n,colorName:c,colorRange:h,colorDomain:t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")]}]}if("category"===e){var p,g,m;return[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:o,label:{text:null!==(p=null!==(g=null!==(m=null!==r&&void 0!==r?r:s)&&void 0!==m?m:a)&&void 0!==g?g:l)&&void 0!==p?p:n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!u}]}return[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{idKey:s,idName:r,latitudeKey:a,latitudeName:d,longitudeKey:c,longitudeName:h,colorKey:u,colorName:p,sizeKey:g,sizeName:m,labelKey:v,labelName:f,title:y,legendItemName:b,tooltip:C}=o;if(!i||null===n||void 0===n||!n.rawData.length)return;const{datumIndex:x}=e,w=n.rawData[x],S=null!=g?i.resolveColumnById(this,"sizeValue",n)[x]:void 0,M=null!=u?i.resolveColumnById(this,"colorValue",n)[x]:void 0,D=[];if(null!=S&&D.push({label:m,fallbackLabel:g,value:String(S)}),null!=M&&D.push({label:p,fallbackLabel:u,value:String(M)}),null!=v&&v!==s){const e=i.resolveColumnById(this,"labelValue",n)[x];D.push({label:f,fallbackLabel:v,value:e})}let k;if(null!=s){k=i.resolveColumnById(this,"idValue",n)[x]}else if(null!=a&&null!=c){const e=i.resolveColumnById(this,"latValue",n)[x],t=i.resolveColumnById(this,"lonValue",n)[x];k="".concat(Math.abs(e).toFixed(4),"\xb0 ").concat(e>=0?"N":"S",", ").concat(Math.abs(t).toFixed(4),"\xb0 ").concat(t>=0?"W":"E")}const I=this.getMarkerItemBaseStyle(!1);return Object.assign(I,this.getMarkerItemStyleOverrides(String(x),x,M,S,I,!1)),C.formatTooltip({heading:k,title:null!==y&&void 0!==y?y:b,symbol:this.legendItemSymbol(x),data:D},l({seriesId:t,datum:w,title:y,idKey:s,idName:r,latitudeKey:a,latitudeName:d,longitudeKey:c,longitudeName:h,colorKey:u,colorName:p,sizeKey:g,sizeName:m,labelKey:v,labelName:f},I))}getFormattedMarkerStyle(e){const{datumIndex:t,colorValue:i,sizeValue:n}=e,o=this.getMarkerItemBaseStyle(!1);return Object.assign(o,this.getMarkerItemStyleOverrides(String(t),t,i,n,o,!1)),{size:o.size}}computeFocusBounds(e){return Eae(this,e)}};Gae.className="MapMarkerSeries",Gae.type="map-marker",dj([Sae(ere,{optional:!0,property:"topology"})],Gae.prototype,"_chartTopology",2);var{DEFAULT_LABEL_COLOUR:zae,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:_ae}=mW.ThemeSymbols,Vae={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:e=>new Gae(e),tooltipDefaults:{range:"exact"},themeTemplate:l(l({},Dse),{},{series:{shape:"circle",maxSize:30,fillOpacity:.5,label:{color:zae}}}),paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:n,themeTemplateParameters:o}=e,{fill:s,stroke:r}=mW.singleSeriesPaletteFactory(e),a=o.get(_ae),{fills:l}=t(i);return{fill:s,stroke:r,colorRange:"inbuilt"===n?a:[l[0],l[1]]}}},{COLOR_STRING:Hae,LINE_DASH:Wae,OBJECT:jae,POSITIVE_NUMBER:Uae,RATIO:Kae,Validate:Yae,SeriesProperties:Zae,SeriesTooltip:Xae}=mW,qae=class extends Zae{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new Xae}};dj([Yae(ere,{optional:!0})],qae.prototype,"topology",2),dj([Yae(Hae)],qae.prototype,"fill",2),dj([Yae(Kae)],qae.prototype,"fillOpacity",2),dj([Yae(Hae)],qae.prototype,"stroke",2),dj([Yae(Kae)],qae.prototype,"strokeOpacity",2),dj([Yae(Uae)],qae.prototype,"strokeWidth",2),dj([Yae(Wae)],qae.prototype,"lineDash",2),dj([Yae(Uae)],qae.prototype,"lineDashOffset",2),dj([Yae(jae)],qae.prototype,"tooltip",2);var{createDatumId:Qae,SeriesNodePickMode:Jae,Validate:$ae,Logger:ele,Selection:tle,Group:ile,PointerEvents:nle}=mW,ole=class extends Yse{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[Jae.EXACT_SHAPE_MATCH]}),this.properties=new qae,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new ile({name:"itemGroup"})),this.datumSelection=tle.select(this.itemGroup,(()=>this.nodeFactory()))}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0)}nodeFactory(){const e=new Gse;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=nle.None,e}processData(){const{topology:e}=this;this.topologyBounds=null===e||void 0===e?void 0:e.features.reduce(((e,t)=>{const i=t.geometry;return null==i?e:zse(i,e)}),void 0),null==e&&ele.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(null==t)return;const n=[];return t.features.forEach(((e,t)=>{const{geometry:o}=e,s=null!=o&&null!=i?Wse(o,i):void 0;null!=s&&n.push({series:this,itemId:t,datum:e,index:t,projectedGeometry:s})})),{itemId:e,nodeData:n,labelData:[]}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e;const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=null!==(e=this.contextNodeData)&&void 0!==e?e:{};this.datumSelection=this.updateDatumSelection({nodeData:i,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>Qae(e.index)))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{fill:n,fillOpacity:o,stroke:s,strokeOpacity:r,lineDash:a,lineDashOffset:l}=t,d=this.getStrokeWidth(t.strokeWidth);i.each(((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.fill=n,e.fillOpacity=o,e.stroke=s,e.strokeWidth=d,e.strokeOpacity=r,e.lineDash=a,e.lineDashOffset=l}))}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}pickFocus(){}computeFocusBounds(e){}};ole.className="MapShapeBackgroundSeries",ole.type="map-shape-background",dj([$ae(ere,{optional:!0,property:"topology"})],ole.prototype,"_chartTopology",2);var{DEFAULT_BACKGROUND_COLOUR:sle,DEFAULT_HIERARCHY_FILLS:rle}=mW.ThemeSymbols,ale={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:e=>new ole(e),tooltipDefaults:{range:"exact"},themeTemplate:l(l({},Dse),{},{series:{stroke:sle,strokeWidth:1}}),paletteFactory:e=>{var t;let{themeTemplateParameters:i}=e;return{fill:null===(t=i.get(rle))||void 0===t?void 0:t[1]}}};function lle(e,t){let{aspectRatio:i,precision:n}=t;const o=eae(e,n,((e,t,n,o)=>{const s=function(e,t,i,n){let o=!1,s=1/0;for(const r of e){let e=r[r.length-1],[a,l]=e;for(const d of r){const[r,c]=d;c>i!==l>i&&t<(a-r)*(i-c)/(l-c)+r&&(o=!o);const h=dle(e,d,t,i,n);s=Math.min(s,h),e=d,a=r,l=c}}return(o?1:-1)*s}(e,t,n,i),r=s+2*o*i;return{distance:s*Math.SQRT2,maxDistance:r*Math.SQRT2}}));if(null==o)return;const{x:s,y:r,distance:a}=o;return{x:s,y:r,maxWidth:a/Math.SQRT2}}function dle(e,t,i,n,o){const[s,r]=e,[a,l]=t,d=1/o,c=a-s,h=l-r,[u,p]=r<=l?e:t,[g,m]=s<=a?e:t,[v,f]=r<=l?t:e,[y,b]=s<=a?t:e;let C=1/0;if(0!==c){const e=h/c;for(let t=0;t<=1;t+=1){const o=0===t?d:-d,a=(e*s-r-o*i+n)/(e-o);if(a>=g&&a<=y){const e=2*Math.abs(i-a);C=Math.min(C,e)}}}else for(let k=0;k<=1;k+=1){const e=(0===k?d:-d)*(s-i)+n;if(e>=p&&e<=f){const t=2*Math.abs(n-e)*o;C=Math.min(C,t)}}const x=o,w=Math.abs((u-i)/(p-n)),S=Math.abs((v-i)/(f-n));if(f<n&&S<x){const e=2*Math.abs(n-f)*o;C=Math.min(C,e)}else if(p>n&&w<x){const e=2*Math.abs(n-p)*o;C=Math.min(C,e)}const M=Math.abs((m-n)/(g-i)),D=Math.abs((b-n)/(y-i));if(y<i&&D<d){const e=2*Math.abs(i-y);C=Math.min(C,e)}else if(g>i&&M<d){const e=2*Math.abs(i-g);C=Math.min(C,e)}return C}function cle(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function hle(e,t,i,n,o,s){const r=o-s/2,a=o+s/2,[l,d]=t,[c,h]=i,u=c-l,p=h-d,[g,m]=l<=c?t:i,[v,f]=l<=c?i:t;if(0!==u){const t=p/u;for(let i=0;i<=1;i+=1){const o=((0===i?r:a)-d)/t+l;o>=g&&o<=v&&cle(e,n,o)}}else Math.max(r,Math.min(d,h))<=Math.min(a,Math.max(d,h))&&cle(e,n,l);return v<n&&f>=r&&f<=a?cle(e,n,v):g>n&&m>=r&&m<=a&&cle(e,n,g),e}var{AND:ule,ARRAY:ple,COLOR_STRING:gle,COLOR_STRING_ARRAY:mle,FUNCTION:vle,LINE_DASH:fle,OBJECT:yle,POSITIVE_NUMBER:ble,RATIO:Cle,STRING:xle,Validate:wle,SeriesProperties:Sle,SeriesTooltip:Mle}=mW,Dle=class extends Sle{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new Uie,this.tooltip=new Mle}};dj([wle(ere,{optional:!0})],Dle.prototype,"topology",2),dj([wle(xle,{optional:!0})],Dle.prototype,"title",2),dj([wle(xle,{optional:!0})],Dle.prototype,"legendItemName",2),dj([wle(xle)],Dle.prototype,"idKey",2),dj([wle(xle,{optional:!0})],Dle.prototype,"idName",2),dj([wle(xle)],Dle.prototype,"topologyIdKey",2),dj([wle(xle,{optional:!0})],Dle.prototype,"labelKey",2),dj([wle(xle,{optional:!0})],Dle.prototype,"labelName",2),dj([wle(xle,{optional:!0})],Dle.prototype,"colorKey",2),dj([wle(xle,{optional:!0})],Dle.prototype,"colorName",2),dj([wle(ule(mle,ple.restrict({minLength:1})),{optional:!0})],Dle.prototype,"colorRange",2),dj([wle(gle)],Dle.prototype,"fill",2),dj([wle(Cle)],Dle.prototype,"fillOpacity",2),dj([wle(gle)],Dle.prototype,"stroke",2),dj([wle(Cle)],Dle.prototype,"strokeOpacity",2),dj([wle(ble)],Dle.prototype,"strokeWidth",2),dj([wle(fle)],Dle.prototype,"lineDash",2),dj([wle(ble)],Dle.prototype,"lineDashOffset",2),dj([wle(ble)],Dle.prototype,"padding",2),dj([wle(vle,{optional:!0})],Dle.prototype,"itemStyler",2),dj([wle(yle)],Dle.prototype,"label",2),dj([wle(yle)],Dle.prototype,"tooltip",2);var{getMissCount:kle,createDatumId:Ile,SeriesNodePickMode:Ale,valueProperty:Tle,Validate:Ele,CachedTextMeasurerPool:Rle,TextUtils:Lle,Logger:Ple,ColorScale:Nle,Group:Fle,Selection:Ole,Text:Ble,PointerEvents:Gle}=mW,zle=mW.MercatorScale.fixedScale(),_le=class extends Yse{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[Ale.EXACT_SHAPE_MATCH,Ale.NEAREST_NODE]}),this.properties=new Dle,this._chartTopology=void 0,this.colorScale=new Nle,this.itemGroup=this.contentGroup.appendChild(new Fle({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Fle({name:"itemLabelGroup"})),this.datumSelection=Ole.select(this.itemGroup,(()=>this.nodeFactory())),this.labelSelection=Ole.select(this.itemLabelGroup,Ble),this.highlightDatumSelection=Ole.select(this.highlightNode,(()=>this.nodeFactory())),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=Gle.None}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}get topology(){var e;return null!==(e=this.properties.topology)&&void 0!==e?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0)}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new Gse;return e.renderMode=1,e.lineJoin="round",e}async processData(e){var t;if(null==this.data||!this.properties.isValid())return;const{data:i,topology:n,colorScale:o}=this,{topologyIdKey:s,idKey:r,colorKey:a,labelKey:l,colorRange:d}=this.properties,c=new Map;null===n||void 0===n||n.features.forEach((e=>{var t;const i=null===(t=e.properties)||void 0===t?void 0:t[s];null!=i&&Hse(e.geometry,1)&&c.set(i,e)}));const h=this.colorScale.type,u=null===(t=this.scale)||void 0===t?void 0:t.type,{dataModel:p,processedData:g}=await this.requestDataModel(e,i,{props:[Tle(r,u,{id:"idValue",includeProperty:!1}),Tle(r,u,{id:"featureValue",includeProperty:!1,processor:()=>e=>c.get(e)}),...l?[Tle(l,"band",{id:"labelValue"})]:[],...a?[Tle(a,h,{id:"colorValue"})]:[]]}),m=0!==g.rawData.length?p.resolveColumnById(this,"featureValue",g):void 0;if(this.topologyBounds=null===m||void 0===m?void 0:m.reduce(((e,t)=>{const i=null===t||void 0===t?void 0:t.geometry;return null==i?e:zse(i,e)}),void 0),null!=d&&this.isColorScaleValid()){const e=p.resolveProcessedDataIndexById(this,"colorValue");o.domain=g.domain.values[e],o.range=d,o.update()}null==n&&Ple.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.rawData.length,s=kle(this,i.defs.values[n].missing);return!(0===o||o===s)}getLabelLayout(e,t,i,n,o){if(null==t||null==n)return;const{idKey:s,idName:r,colorKey:a,colorName:l,labelKey:d,labelName:c,padding:h,label:u}=this.properties,p=this.getLabelText(u,{value:t,datum:e,idKey:s,idName:r,colorKey:a,colorName:l,labelKey:d,labelName:c});if(null==p)return;const g=Rle.measureText(String(p),{font:i}),m=p.split("\n").length,v=(g.width+2*h)/(m*Lle.getLineHeight(u.fontSize)+2*h);if((null===o||void 0===o?void 0:o.geometry)===n&&(null===o||void 0===o?void 0:o.labelText)===p&&(null===o||void 0===o?void 0:o.aspectRatio)===v)return o;const f=_se(Wse(n,zle));if(null==f)return;const y=lle(f,{aspectRatio:v,precision:.001});if(null==y)return;const{x:b,y:C,maxWidth:x}=y;return{geometry:n,labelText:p,aspectRatio:v,x:b,y:C,maxWidth:x,fixedPolygon:f}}getLabelDatum(e,t){const{scale:i}=this;if(null==i)return;const{padding:n,label:o}=this.properties,{labelText:s,aspectRatio:r,x:a,y:l,maxWidth:d,fixedPolygon:c}=e,h={width:Math.ceil(d*t),height:Math.ceil(d*t/r),meta:a},u=Nie(s,o,{padding:n},((e,i)=>{if(!i)return h;const n=function(e,t,i,n){const o={minX:-1/0,maxX:1/0};for(const a of e){let e=a[a.length-1];for(const s of a)hle(o,e,s,t,i,n),e=s}const{minX:s,maxX:r}=o;return Number.isFinite(s)&&Number.isFinite(r)?{x:t+(s+r)/2,width:r-s}:{x:t,width:0}}(c,a,l,e/t);return{width:n.width*t,height:e,meta:n.x}}));if(null==u)return;const[{text:p,fontSize:g,lineHeight:m,width:v},f]=u;if(p===Lle.EllipsisChar)return;const y=v<h.width?a:f,b=this.scale.convert(zle.invert([y,l]));return{x:b[0],y:b[1],text:p,fontSize:g,lineHeight:m}}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:n,scale:o,previousLabelLayouts:s}=this,{idKey:r,colorKey:a,labelKey:l,label:d}=n;if(null==t||null==i||0===i.rawData.length)return;const c=null!=o?(o.range[1][0]-o.range[0][0])/o.bounds.width:NaN,h=t.resolveColumnById(this,"idValue",i),u=t.resolveColumnById(this,"featureValue",i),p=null!=l?t.resolveColumnById(this,"labelValue",i):void 0,g=null!=a?t.resolveColumnById(this,"colorValue",i):void 0,m=d.getFont(),v=new Map;this.previousLabelLayouts=v;const f=[],y=[],b=[];i.rawData.forEach(((e,t)=>{var i,n;const a=h[t],l=null===g||void 0===g?void 0:g[t],d=null===p||void 0===p?void 0:p[t],C=null!==(i=null===(n=u[t])||void 0===n?void 0:n.geometry)&&void 0!==i?i:void 0;null==C&&b.push(a);const x=this.getLabelLayout(e,d,m,C,null===s||void 0===s?void 0:s.get(a));null!=x&&v.set(a,x);const w=null!=x&&null!=o?this.getLabelDatum(x,c):void 0;null!=w&&y.push(w);const S=null!=C&&null!=o?Wse(C,o):void 0;f.push({series:this,itemId:r,datum:e,datumIndex:t,idValue:a,colorValue:l,labelValue:d,projectedGeometry:S})}));if(b.length>10){const e=b.length-10;b.length=10,b.push("(+".concat(e," more)"))}return b.length>0&&Ple.warnOnce("some data items do not have matches in the provided topology",b),{itemId:e,nodeData:f,labelData:y}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){var e,t,i,n,o;const{datumSelection:s,labelSelection:r,highlightDatumSelection:a}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let l=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();null==l||l.series===this&&null!=l.datum||(l=void 0);const d=null!==(t=null===(i=this.contextNodeData)||void 0===i?void 0:i.nodeData)&&void 0!==t?t:[],c=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.labelData)&&void 0!==n?n:[];this.datumSelection=this.updateDatumSelection({nodeData:d,datumSelection:s}),this.updateDatumNodes({datumSelection:s,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:c,labelSelection:r}),this.updateLabelNodes({labelSelection:r}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:null!=l?[l]:[],datumSelection:a}),this.updateDatumNodes({datumSelection:a,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>Ile(e.idValue)))}getItemBaseStyle(e){var t,i,n,o,s,r,a;const{properties:l}=this,d=e?l.highlightStyle.item:void 0,c=this.getStrokeWidth(l.strokeWidth);return{fill:null!==(t=null===d||void 0===d?void 0:d.fill)&&void 0!==t?t:l.fill,fillOpacity:null!==(i=null===d||void 0===d?void 0:d.fillOpacity)&&void 0!==i?i:l.fillOpacity,stroke:null!==(n=null===d||void 0===d?void 0:d.stroke)&&void 0!==n?n:l.stroke,strokeWidth:null!==(o=null===d||void 0===d?void 0:d.strokeWidth)&&void 0!==o?o:c,strokeOpacity:null!==(s=null===d||void 0===d?void 0:d.strokeOpacity)&&void 0!==s?s:l.strokeOpacity,lineDash:null!==(r=null===d||void 0===d?void 0:d.lineDash)&&void 0!==r?r:l.lineDash,lineDashOffset:null!==(a=null===d||void 0===d?void 0:d.lineDashOffset)&&void 0!==a?a:l.lineDashOffset}}getItemStyleOverrides(e,t,i,n,o){const{id:s,properties:r,colorScale:a}=this,{colorRange:d,itemStyler:c}=r;let h;var u,p;o||null==i||(null!==(u=h)&&void 0!==u||(h={}),h.fill=this.isColorScaleValid()?a.convert(i):null!==(p=null===d||void 0===d?void 0:d[0])&&void 0!==p?p:r.fill);if(null!=c){var g;const i=this.cachedDatumCallback(Ile(e,o?"highlight":"node"),(()=>c(l(l({seriesId:s,datum:t,highlighted:o},n),h))));null!==(g=h)&&void 0!==g||(h={}),Object.assign(h,i)}return h}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getItemBaseStyle(i);t.each(((e,t)=>{var o,s,r,a,l,d,c;const{datum:h,datumIndex:u,colorValue:p,projectedGeometry:g}=t;if(null==g)return e.visible=!1,void(e.projectedGeometry=void 0);const m=this.getItemStyleOverrides(String(u),h,p,n,i);e.visible=!0,e.projectedGeometry=g,e.fill=null!==(o=null===m||void 0===m?void 0:m.fill)&&void 0!==o?o:n.fill,e.fillOpacity=null!==(s=null===m||void 0===m?void 0:m.fillOpacity)&&void 0!==s?s:n.fillOpacity,e.stroke=null!==(r=null===m||void 0===m?void 0:m.stroke)&&void 0!==r?r:n.stroke,e.strokeWidth=null!==(a=null===m||void 0===m?void 0:m.strokeWidth)&&void 0!==a?a:n.strokeWidth,e.strokeOpacity=null!==(l=null===m||void 0===m?void 0:m.strokeOpacity)&&void 0!==l?l:n.strokeOpacity,e.lineDash=null!==(d=null===m||void 0===m?void 0:m.lineDash)&&void 0!==d?d:n.lineDash,e.lineDashOffset=null!==(c=null===m||void 0===m?void 0:m.lineDashOffset)&&void 0!==c?c:n.lineDashOffset}))}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:n,fontWeight:o,fontFamily:s}=this.properties.label;t.each(((e,t)=>{let{x:r,y:a,text:l,fontSize:d,lineHeight:c}=t;e.visible=!0,e.x=r,e.y=a,e.text=l,e.fill=i,e.fontStyle=n,e.fontWeight=o,e.fontSize=d,e.lineHeight=c,e.fontFamily=s,e.textAlign="center",e.textBaseline="middle"}))}resetAnimation(){}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.datumSelection.each(((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)})),null!=t?{datum:t,distance:Math.sqrt(o)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if((null===t||void 0===t?void 0:t.datum)===e)return t.point;const i=e.projectedGeometry,n=null!=i?_se(i):void 0,o=null!=n?iae(n,2):void 0,s=null!=o?{x:o[0],y:o[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:s},s}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{fillOpacity:o,stroke:s,strokeWidth:r,strokeOpacity:a}=n;let{fill:l}=n;if(null!=e&&this.isColorScaleValid()){const n=t.resolveColumnById(this,"colorValue",i)[e];l=this.colorScale.convert(n)}return{marker:{fill:l,fillOpacity:o,stroke:s,strokeWidth:r,strokeOpacity:a}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(null==t||null==i)return[];const{id:n,visible:o}=this,{title:s,legendItemName:r,idKey:a,idName:l,colorKey:d,colorName:c,colorRange:h,showInLegend:u}=this.properties;if("gradient"===e&&null!=d&&null!=h){return[{legendType:"gradient",enabled:o,seriesId:n,colorName:c,colorRange:h,colorDomain:t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")]}]}if("category"===e){var p,g;return[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:o,label:{text:null!==(p=null!==(g=null!==r&&void 0!==r?r:s)&&void 0!==g?g:l)&&void 0!==p?p:a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!u}]}return[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{idKey:s,idName:r,colorKey:a,colorName:d,labelKey:c,labelName:h,legendItemName:u,title:p,tooltip:g}=o;if(!i||null===n||void 0===n||!n.rawData.length)return;const{datumIndex:m}=e,v=n.rawData[m],f=i.resolveColumnById(this,"idValue",n)[m],y=null!=a?i.resolveColumnById(this,"colorValue",n)[m]:void 0,b=[];if(null!=y&&b.push({label:d,fallbackLabel:a,value:String(y)}),null!=c&&c!==s){const e=i.resolveColumnById(this,"labelValue",n)[m];b.push({label:h,fallbackLabel:c,value:e})}const C=this.getItemBaseStyle(!1);return Object.assign(C,this.getItemStyleOverrides(String(m),m,y,C,!1)),g.formatTooltip({heading:f,title:null!==p&&void 0!==p?p:u,symbol:this.legendItemSymbol(m),data:b},l({seriesId:t,datum:v,title:p,idKey:s,idName:r,colorKey:a,colorName:d,labelKey:c,labelName:h},C))}computeFocusBounds(e){return Cre(this,e)}};_le.className="MapShapeSeries",_le.type="map-shape",dj([Ele(ere,{optional:!0,property:"topology"})],_le.prototype,"_chartTopology",2);var{DEFAULT_INVERTED_LABEL_COLOUR:Vle,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:Hle,DEFAULT_BACKGROUND_COLOUR:Wle}=mW.ThemeSymbols,jle={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:e=>new _le(e),tooltipDefaults:{range:"exact"},themeTemplate:l(l({},Dse),{},{series:{fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:Vle,fontWeight:"bold",overflowStrategy:"hide"}}}),paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:n,themeTemplateParameters:o}=e,{fill:s}=mW.singleSeriesPaletteFactory(e),r=o.get(Hle),{fills:a}=t(i);return{fill:s,stroke:o.get(Wle),colorRange:"inbuilt"===n?r:[a[0],a[1]]}}},{isDefined:Ule,ChartAxisDirection:Kle,PolarAxis:Yle,diff:Zle,fixNumericExtent:Xle,groupAccumulativeValueProperty:qle,keyProperty:Qle,normaliseGroupTo:Jle,resetLabelFn:$le,seriesLabelFadeInAnimation:ede,seriesLabelFadeOutAnimation:tde,valueProperty:ide,animationValidation:nde,createDatumId:ode,SeriesNodePickMode:sde,normalizeAngle360:rde,BandScale:ade,motion:lde}=mW,dde=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},cde=class extends mW.PolarSeries{constructor(e,t){let{animationResetFns:i}=t;super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,pickModes:[sde.NEAREST_NODE,sde.EXACT_SHAPE_MATCH],animationResetFns:l(l({},i),{},{label:$le})}),this.NodeEvent=dde,this.groupScale=new ade,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Kle.X)return t.getDomain(this,"angleValue","key",i);{const e=t.getDomain(this,"radiusValue-end","value",i),n=[e[0]>0?0:e[0],e[1]<0?0:e[1]];return Xle(n)}}async processData(e){var t,i;const{visible:n}=this,{angleKey:o,radiusKey:s,normalizedTo:r}=this.properties,a=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const d=this.getStackId(),c="".concat(d,"-trailing"),h=[];Ule(r)&&h.push(Jle([d,c],Math.abs(r),"range")),a&&this.processedData&&h.push(Zle(this.id,this.processedData)),a&&h.push(nde());const u=n||!a?{}:{forceValue:0},p=null===(t=this.axes[Kle.Y])||void 0===t?void 0:t.scale.type,g=null===(i=this.axes[Kle.X])||void 0===i?void 0:i.scale.type;await this.requestDataModel(e,this.data,{props:[Qle(o,g,{id:"angleValue"}),ide(s,p,l({id:"radiusValue-raw",invalidValue:null},u)),...qle(s,"normal","current",l({id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:d,separateNegative:!0},u),p),...qle(s,"trailing","current",l({id:"radiusValue-start",invalidValue:null,groupId:c,separateNegative:!0},u),p),...h]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return(e!==n.r||t!==n.cx||i!==n.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}isRadiusAxisReversed(){var e;return null===(e=this.axes[Kle.Y])||void 0===e?void 0:e.isReversed()}maybeRefreshNodeData(){var e;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=null!==(e=this.createNodeData())&&void 0!==e?e:{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[Kle.Y];return e instanceof Yle?this.radius*e.innerRadiusRatio:0}createNodeData(){var e;const{processedData:t,dataModel:i,groupScale:n}=this;if(!i||!t||"ungrouped"!==t.type||0===t.rawData.length||!this.properties.isValid())return;const o=this.axes[Kle.X],s=this.axes[Kle.Y],r=null===o||void 0===o?void 0:o.scale,a=null===s||void 0===s?void 0:s.scale;if(!r||!a)return;const l=i.resolveKeysById(this,"angleValue",t),d=i.resolveColumnById(this,"radiusValue-start",t),c=i.resolveColumnById(this,"radiusValue-end",t),h=i.resolveColumnById(this,"radiusValue-raw",t),u=i.resolveProcessedDataIndexById(this,"radiusValue-range");let p=0,g=0;o instanceof fU&&(p=o.groupPaddingInner,g=o.paddingInner);const m=(null!==(e=r.bandwidth)&&void 0!==e?e:0)*(1-g),{index:v,visibleGroupCount:f}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);n.domain=Array.from({length:f}).map(((e,t)=>String(t))),n.range=[-m/2,m/2],n.paddingInner=f>1?p:0;const y=this.isRadiusAxisReversed(),b=y?this.radius:this.getAxisInnerRadius(),C=y?this.getAxisInnerRadius():this.radius,x=C+b,{angleKey:w,radiusKey:S,angleName:M,radiusName:D,label:k}=this.properties,I=(e,t,i,n)=>{const o=this.getLabelText(k,{value:t,datum:e,angleKey:w,radiusKey:S,angleName:M,radiusName:D});if(o)return{x:i,y:n,text:o,textAlign:"center",textBaseline:"middle"}},A=[],T={itemId:S,nodeData:A,labelData:A};if(!this.visible)return T;const{rawData:E,aggregation:R}=t;return E.forEach(((e,t)=>{var i;const o=l[t];if(null==o)return;const s=h[t],p=s>=0&&!Object.is(s,-0),g=d[t],m=c[t],f=null!==(i=R[t][u][p?1:0])&&void 0!==i?i:0,w=p===y;if(void 0===g||void 0===m)return;let S,M;if(1===E.length)S=-.5*Math.PI,M=1.5*Math.PI;else{const e=r.convert(o);S=rde(e+n.convert(String(v))),M=rde(S+n.bandwidth)}const D=S+n.bandwidth/2,k=x-a.convert(g),T=x-a.convert(m),L=(k+T)/2,P=x-a.convert(0),N=x-a.convert(f),F=Math.cos(D)*L,O=Math.sin(D)*L,B=this.properties.label.enabled?I(e,s,F,O):void 0,G=this.getColumnWidth(S,M);A.push({series:this,datum:e,datumIndex:t,point:{x:F,y:O,size:0},midPoint:{x:F,y:O},label:B,angleValue:o,radiusValue:s,negative:w,innerRadius:k,outerRadius:T,stackInnerRadius:P,stackOuterRadius:N,startAngle:S,endAngle:M,axisInnerRadius:b,axisOuterRadius:C,columnWidth:G,index:t})})),{itemId:S,nodeData:A,labelData:A}}getColumnWidth(e,t){return NaN}update(e){let{seriesRect:t}=e;const i=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(e){var t,i,n,o,s,r,a;const{properties:l}=this,d=e?l.highlightStyle.item:void 0,c=this.getStrokeWidth(l.strokeWidth);return{fill:null!==(t=null===d||void 0===d?void 0:d.fill)&&void 0!==t?t:l.fill,fillOpacity:null!==(i=null===d||void 0===d?void 0:d.fillOpacity)&&void 0!==i?i:l.fillOpacity,stroke:null!==(n=null===d||void 0===d?void 0:d.stroke)&&void 0!==n?n:l.stroke,strokeWidth:null!==(o=null===d||void 0===d?void 0:d.strokeWidth)&&void 0!==o?o:c,strokeOpacity:null!==(s=null===d||void 0===d?void 0:d.strokeOpacity)&&void 0!==s?s:l.strokeOpacity,lineDash:null!==(r=null===d||void 0===d?void 0:d.lineDash)&&void 0!==r?r:l.lineDash,lineDashOffset:null!==(a=null===d||void 0===d?void 0:d.lineDashOffset)&&void 0!==a?a:l.lineDashOffset,cornerRadius:l.cornerRadius}}getItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{angleKey:r,radiusKey:a,itemStyler:d}=s;if(null!=d)return this.cachedDatumCallback(ode(e,n?"highlight":"node"),(()=>d(l({seriesId:o,datum:t,highlighted:n,angleKey:r,radiusKey:a},i))))}updateSectorSelection(e,t){let i=[];if(t){var n;const e=null===(n=this.ctx.highlightManager)||void 0===n?void 0:n.getActiveHighlight();null!==e&&void 0!==e&&e.datum&&e.series===this&&i.push(e)}else i=this.nodeData;const o=this.getItemBaseStyle(t);e.update(i,void 0,(e=>this.getDatumId(e))).each(((e,i)=>{var n,s,r,a,d,c,h,u;const{datum:p,datumIndex:g}=i,m=this.getItemStyleOverrides(String(g),p,o,t);this.updateItemPath(e,i,t,l(l({},m),o)),e.fill=null!==(n=null===m||void 0===m?void 0:m.fill)&&void 0!==n?n:o.fill,e.fillOpacity=null!==(s=null===m||void 0===m?void 0:m.fillOpacity)&&void 0!==s?s:o.fillOpacity,e.stroke=null!==(r=null===m||void 0===m?void 0:m.stroke)&&void 0!==r?r:o.stroke,e.strokeWidth=null!==(a=null===m||void 0===m?void 0:m.strokeWidth)&&void 0!==a?a:o.strokeWidth,e.strokeOpacity=null!==(d=null===m||void 0===m?void 0:m.strokeOpacity)&&void 0!==d?d:o.strokeOpacity,e.lineDash=null!==(c=null===m||void 0===m?void 0:m.lineDash)&&void 0!==c?c:o.lineDash,e.lineDashOffset=null!==(h=null===m||void 0===m?void 0:m.lineDashOffset)&&void 0!==h?h:o.lineDashOffset,e.cornerRadius=null!==(u=null===m||void 0===m?void 0:m.cornerRadius)&&void 0!==u?u:o.cornerRadius,e.lineJoin="round"}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();lde.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),ede(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();lde.fromToMotion(this.id,"datums",t,[e],i),tde(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{angleKey:r,angleName:a,radiusKey:d,radiusName:c,tooltip:h}=s,u=o[Kle.X],p=o[Kle.Y];if(!i||!n||0===n.rawData.length||!u||!p)return;const{datumIndex:g}=e,m=n.rawData[g],v=i.resolveKeysById(this,"angleValue",n)[g],f=i.resolveColumnById(this,"radiusValue-raw",n)[g];if(null==v)return;const y=this.getItemBaseStyle(!1);return Object.assign(y,this.getItemStyleOverrides(String(g),g,y,!1)),h.formatTooltip({heading:u.formatDatum(v),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:d,value:p.formatDatum(f)}]},l({seriesId:t,datum:m,title:a,angleKey:r,angleName:a,radiusKey:d,radiusName:c},y))}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:o}=this.properties;return{marker:{fill:null!==e&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==t&&void 0!==t?t:"rgba(0, 0, 0, 0)",fillOpacity:null!==i&&void 0!==i?i:1,strokeOpacity:null!==n&&void 0!==n?n:1,strokeWidth:o}}}getLegendData(e){if(!this.properties.isValid()||"category"!==e)return[];const{id:t,visible:i}=this,{radiusKey:n,radiusName:o,showInLegend:s}=this.properties;return[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:i,label:{text:null!==o&&void 0!==o?o:n},symbol:this.legendItemSymbol(),hideInLegend:!s}]}getDatumId(e){return ode(e.angleValue)}computeLabelsBBox(){return null}},{SeriesProperties:hde,SeriesTooltip:ude,Validate:pde,COLOR_STRING:gde,NUMBER:mde,FUNCTION:vde,LINE_DASH:fde,OBJECT:yde,POSITIVE_NUMBER:bde,RATIO:Cde,STRING:xde,Label:wde}=mW,Sde=class extends hde{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new wde,this.tooltip=new ude}};dj([pde(xde)],Sde.prototype,"angleKey",2),dj([pde(xde,{optional:!0})],Sde.prototype,"angleName",2),dj([pde(xde)],Sde.prototype,"radiusKey",2),dj([pde(xde,{optional:!0})],Sde.prototype,"radiusName",2),dj([pde(gde)],Sde.prototype,"fill",2),dj([pde(Cde)],Sde.prototype,"fillOpacity",2),dj([pde(gde)],Sde.prototype,"stroke",2),dj([pde(bde)],Sde.prototype,"strokeWidth",2),dj([pde(Cde)],Sde.prototype,"strokeOpacity",2),dj([pde(fde)],Sde.prototype,"lineDash",2),dj([pde(bde)],Sde.prototype,"lineDashOffset",2),dj([pde(bde)],Sde.prototype,"cornerRadius",2),dj([pde(vde,{optional:!0})],Sde.prototype,"itemStyler",2),dj([pde(mde)],Sde.prototype,"rotation",2),dj([pde(xde,{optional:!0})],Sde.prototype,"stackGroup",2),dj([pde(mde,{optional:!0})],Sde.prototype,"normalizedTo",2),dj([pde(yde)],Sde.prototype,"label",2),dj([pde(yde)],Sde.prototype,"tooltip",2);var{motion:Mde}=mW;function Dde(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(t,i)=>({startAngle:e.startAngle.get(t)[i],endAngle:e.endAngle.get(t)[i]});return{calculate:(i,n,o)=>{t.forEach((t=>{const s=e[t];let r=("removed"===o||"updated"===o?i:n)[t],a=("removed"===o?i:n)[t];var l,d;isNaN(a)&&(a=null!==(l=null===(d=i.previousDatum)||void 0===d?void 0:d[t])&&void 0!==l?l:NaN);const c=r-a;Math.abs(c)>Math.PI&&(r-=2*Math.sign(c)*Math.PI),s.set(n,{from:r,to:a})}))},from:e=>i(e,"from"),to:e=>i(e,"to")}}function kde(e,t,i){if("updated"===i){if(null==e.previousDatum||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}function Ide(e,t){let{innerRadius:i,outerRadius:n,columnWidth:o,axisInnerRadius:s,axisOuterRadius:r,startAngle:a,endAngle:l}=t;return{innerRadius:i,outerRadius:n,columnWidth:o,axisInnerRadius:s,axisOuterRadius:r,startAngle:a,endAngle:l}}var{SectorBox:Ade,motion:Tde}=mW;function Ede(e){const{negative:t,innerRadius:i,outerRadius:n,stackInnerRadius:o,stackOuterRadius:s}=e;return{innerRadius:t?s:o,outerRadius:t?o:s,clipInnerRadius:t?n:i,clipOuterRadius:t?i:n}}function Rde(e,t){const{startAngle:i,endAngle:n}=t,{innerRadius:o,outerRadius:s,clipInnerRadius:r,clipOuterRadius:a}=Ede(t);return{innerRadius:o,outerRadius:s,startAngle:i,endAngle:n,clipSector:new Ade(i,n,r,a)}}var{Sector:Lde,SectorBox:Pde,PolarZIndexMap:Nde}=mW,Fde=class extends cde{constructor(e){super(e,{animationResetFns:{item:Rde}}),this.properties=new Sde}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[0,Nde.FOREGROUND,e],this.highlightGroup.zIndex=[0,Nde.HIGHLIGHT,e],this.labelGroup.zIndex=[0,Nde.LABEL,e],!0)}getStackId(){var e,t;const i=null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.groupIndex)&&void 0!==e?e:this.id;return"nightingale-stack-".concat(i,"-yValues")}nodeFactory(){return new Lde}updateItemPath(e,t,i,n){const{negative:o}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=o?0:this.properties.cornerRadius,e.endOuterCornerRadius=o?0:this.properties.cornerRadius,e.startInnerCornerRadius=o?this.properties.cornerRadius:0,e.endInnerCornerRadius=o?this.properties.cornerRadius:0,i){const{startAngle:i,endAngle:n}=t,{innerRadius:o,outerRadius:s,clipInnerRadius:r,clipOuterRadius:a}=Ede(t);e.innerRadius=o,e.outerRadius=s,e.startAngle=i,e.endAngle=n,e.clipSector=new Pde(i,n,r,a)}}getColumnTransitionFunctions(){return function(e){const t=Dde();return{toFn:(i,n,o)=>{const{startAngle:s,endAngle:r}=t.to(n);let a,l,d;if("removed"===o)a=e,l=e,d=new Ade(s,r,a,l);else{let t,i;({innerRadius:a,outerRadius:l,clipInnerRadius:t,clipOuterRadius:i}=Ede(n)),isNaN(a)&&(a=e),isNaN(l)&&(l=e),isNaN(t)&&(t=e),isNaN(i)&&(i=e),d=new Ade(s,r,t,i)}return{innerRadius:a,outerRadius:l,startAngle:s,endAngle:r,clipSector:d}},fromFn:(i,n,o)=>{var s;o=kde(i,n,o),t.calculate(i,n,o);const{startAngle:r,endAngle:a}=t.from(n);let l,d,c;return"removed"===o||"updated"===o?(l=i.innerRadius,d=i.outerRadius,c=i.clipSector):(l=e,d=e),null!==(s=c)&&void 0!==s||(c=new Ade(r,a,l,d)),{innerRadius:l,outerRadius:d,startAngle:r,endAngle:a,clipSector:c,phase:Tde.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}};Fde.className="NightingaleSeries",Fde.type="nightingale";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:Ode,DEFAULT_LABEL_COLOUR:Bde},ThemeConstants:{POLAR_AXIS_TYPE:Gde,POLAR_AXIS_SHAPE:zde}}=mW,_de={series:{strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Ode,color:Bde}},axes:{[Gde.ANGLE_CATEGORY]:{shape:zde.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Gde.RADIUS_NUMBER]:{shape:zde.CIRCLE}}},{ThemeSymbols:{DEFAULT_POLAR_SERIES_STROKE:Vde},ThemeConstants:{POLAR_AXIS_TYPE:Hde}}=mW,Wde={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:e=>new Fde(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:Hde.ANGLE_CATEGORY},{type:Hde.RADIUS_NUMBER}],themeTemplate:_de,paletteFactory(e){let{takeColors:t,userPalette:i}=e;const{fills:[n],strokes:[o]}=t(1);return{fill:n,stroke:"inbuilt"!==i?o:Vde}},stackable:!0,groupable:!0,stackedByDefault:!0},{createDatumId:jde}=mW,Ude=class extends Q7{constructor(){super(...arguments),this.properties=new C9}nodeFactory(){return new i9}updateDatumNodes(e){let{datumSelection:t,isHighlight:i}=e;const{id:n,properties:o}=this,{xKey:s,highKey:r,lowKey:a,openKey:l,closeKey:d,item:c,itemStyler:h}=o,{up:u,down:p}=c,{stroke:g,strokeWidth:m,strokeOpacity:v,lineDash:f,lineDashOffset:y}=u,{stroke:b,strokeWidth:C,strokeOpacity:x,lineDash:w,lineDashOffset:S}=p,M=i?o.highlightStyle.item:void 0;t.each(((e,t)=>{var o,c,D,k,I,A,T,E,R,L,P,N,F,O,B,G,z;const{isRising:_,centerX:V,width:H,y:W,height:j,yOpen:U,yClose:K,crisp:Y}=t;let Z;if(null!=h){const{stroke:e,strokeWidth:o,strokeOpacity:c,lineDash:g,lineDashOffset:m}=_?u:p;Z=this.cachedDatumCallback(jde(this.getDatumId(t),i?"highlight":"node"),(()=>h({seriesId:n,itemId:t.itemId,xKey:s,highKey:r,lowKey:a,openKey:l,closeKey:d,datum:t.datum,strokeOpacity:c,stroke:e,strokeWidth:o,lineDash:g,lineDashOffset:m,highlighted:i})))}e.centerX=V,e.width=H,e.y=W,e.height=j,e.yOpen=U,e.yClose=K,e.crisp=Y,e.stroke=null!==(o=null!==(c=null===M||void 0===M?void 0:M.stroke)&&void 0!==c?c:null===(D=Z)||void 0===D?void 0:D.stroke)&&void 0!==o?o:_?g:b,e.strokeWidth=null!==(k=null!==(I=null===M||void 0===M?void 0:M.strokeWidth)&&void 0!==I?I:null===(A=Z)||void 0===A?void 0:A.strokeWidth)&&void 0!==k?k:_?m:C,e.strokeOpacity=null!==(T=null!==(E=null===M||void 0===M?void 0:M.strokeOpacity)&&void 0!==E?E:null===(R=Z)||void 0===R?void 0:R.strokeOpacity)&&void 0!==T?T:_?v:x,e.lineDash=null!==(L=null!==(P=null===M||void 0===M?void 0:M.lineDash)&&void 0!==P?P:null===(N=Z)||void 0===N?void 0:N.lineDash)&&void 0!==L?L:_?f:w,e.lineDashOffset=null!==(F=null!==(O=null===M||void 0===M?void 0:M.lineDashOffset)&&void 0!==O?O:null===(B=Z)||void 0===B?void 0:B.lineDashOffset)&&void 0!==F?F:_?y:S,e.strokeAlignment=(null!==(G=null===(z=Z)||void 0===z?void 0:z.strokeWidth)&&void 0!==G?G:_?m:C)/2}))}getLegendData(e){var t;const{id:i,data:n,ctx:{legendManager:o},visible:s}=this,{xKey:r,yName:a,item:{up:l,down:d},showInLegend:c,legendItemName:h}=this.properties;if(null===n||void 0===n||!n.length||!r||"category"!==e)return[];const u=new mW.LinearGradient("rgb",[{color:l.stroke,offset:0},{color:l.stroke,offset:.5},{color:d.stroke,offset:.5}],90);return[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:s&&o.getItemEnabled({seriesId:i,itemId:i}),label:{text:null!==(t=null!==h&&void 0!==h?h:a)&&void 0!==t?t:i},symbol:{marker:{fill:u,fillOpacity:l.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1}},legendItemName:h,hideInLegend:!c}]}};Ude.className="ohlc",Ude.type="ohlc";var{CARTESIAN_AXIS_TYPE:Kde,CARTESIAN_POSITION:Yde}=mW.ThemeConstants,Zde={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:e=>new Ude(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:Kde.NUMBER,position:Yde.LEFT},{type:Kde.ORDINAL_TIME,position:Yde.BOTTOM}],themeTemplate:{animation:{enabled:!1},axes:{[Kde.NUMBER]:{crosshair:{snap:!1}},[Kde.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1,paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:n,palette:o}=e;if("user-indexed"===n){const[e]=t(i).strokes;return{item:{up:{stroke:e},down:{stroke:e}}}}return{item:{up:{stroke:o.up.stroke},down:{stroke:o.down.stroke}}}}},{SeriesProperties:Xde,SeriesTooltip:qde,Validate:Qde,UNION:Jde,COLOR_STRING_ARRAY:$de,FUNCTION:ece,DIRECTION:tce,BOOLEAN:ice,LINE_DASH:nce,OBJECT:oce,NUMBER:sce,POSITIVE_NUMBER:rce,RATIO:ace,STRING:lce,Label:dce,DropShadow:cce}=mW,hce=class extends dce{},uce=class extends dce{constructor(){super(...arguments),this.spacing=0}};dj([Qde(sce)],uce.prototype,"spacing",2),dj([Qde(Jde(["before","after"],"a placement"))],uce.prototype,"placement",2);var pce=class extends Xde{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=(new cce).set({enabled:!1}),this.label=new hce,this.stageLabel=new uce,this.tooltip=new qde}};dj([Qde(lce)],pce.prototype,"stageKey",2),dj([Qde(lce)],pce.prototype,"valueKey",2),dj([Qde($de)],pce.prototype,"fills",2),dj([Qde(ace)],pce.prototype,"fillOpacity",2),dj([Qde($de)],pce.prototype,"strokes",2),dj([Qde(rce)],pce.prototype,"strokeWidth",2),dj([Qde(ace)],pce.prototype,"strokeOpacity",2),dj([Qde(nce)],pce.prototype,"lineDash",2),dj([Qde(rce)],pce.prototype,"lineDashOffset",2),dj([Qde(tce)],pce.prototype,"direction",2),dj([Qde(ice,{optional:!0})],pce.prototype,"reverse",2),dj([Qde(rce)],pce.prototype,"spacing",2),dj([Qde(rce,{optional:!0})],pce.prototype,"aspectRatio",2),dj([Qde(ece,{optional:!0})],pce.prototype,"itemStyler",2),dj([Qde(oce)],pce.prototype,"shadow",2),dj([Qde(oce)],pce.prototype,"label",2),dj([Qde(oce)],pce.prototype,"stageLabel",2),dj([Qde(oce)],pce.prototype,"tooltip",2);var{valueProperty:gce,SeriesNodePickMode:mce,CachedTextMeasurerPool:vce,TextUtils:fce,createDatumId:yce,BBox:bce,Group:Cce,Selection:xce,Text:wce,PointerEvents:Sce}=mW,Mce=class extends mW.DataModelSeries{constructor(e){super({moduleCtx:e,pickModes:[mce.EXACT_SHAPE_MATCH,mce.NEAREST_NODE]}),this.properties=new pce,this.itemGroup=this.contentGroup.appendChild(new Cce({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Cce({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new Cce({name:"stageLabelGroup"})),this.datumSelection=xce.select(this.itemGroup,(()=>this.nodeFactory())),this.labelSelection=xce.select(this.itemLabelGroup,wce),this.stageLabelSelection=xce.select(this.stageLabelGroup,wce),this.highlightDatumSelection=xce.select(this.highlightNode,(()=>this.nodeFactory())),this.itemLabelGroup.pointerEvents=Sce.None,this.stageLabelGroup.pointerEvents=Sce.None}addChartEventListeners(){var e;this.destroyFns.push(null===(e=this.ctx.chartEventManager)||void 0===e?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))))}nodeFactory(){return new Jee}getNodeData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.nodeData}async processData(e){if(null==this.data||!this.properties.isValid())return;const{id:t,visible:i,ctx:{legendManager:n}}=this,{stageKey:o,valueKey:s}=this.properties,r=this.visible?{}:{forceValue:0};await this.requestDataModel(e,this.data,{props:[gce(o,"band",{id:"xValue"}),gce(s,"number",l(l({id:"yValue"},r),{},{validation:(e,o,s)=>i&&n.getItemEnabled({seriesId:t,itemId:s}),invalidValue:0}))]})}createNodeData(){var e,t,i,n;const{id:o,dataModel:s,processedData:r,properties:a,visible:l,ctx:{legendManager:d}}=this,{stageKey:c,valueKey:h,direction:u,reverse:p="horizontal"===u,spacing:g,aspectRatio:m,label:v,stageLabel:f}=a;if(null==s||null==r||0===r.rawData.length)return;const y="horizontal"===u,b=s.resolveColumnById(this,"xValue",r),C=s.resolveColumnById(this,"yValue",r),x=vce.getMeasurer({font:f.getFont()});let w,S;y?(w="center",S="before"===f.placement?"bottom":"top"):(w="after"===f.placement?"left":"right",S="middle");const M=f.enabled?[]:void 0;let D=0,k=0,I=0;r.rawData.forEach(((e,t)=>{const i=b[t],n=C[t],s=l&&d.getItemEnabled({seriesId:o,itemId:t});if(I+=n,null==M)return;const r=this.getLabelText(this.properties.stageLabel,{datum:e,value:i,stageKey:c,valueKey:h}),{width:a}=x.measureText(r),u=r.split("\n").length*fce.getLineHeight(v.fontSize);D=Math.max(D,a),k=Math.max(k,u),M.push({x:NaN,y:NaN,text:r,textAlign:w,textBaseline:S,visible:s})}));const A=null!==(e=null===(t=this._nodeDataDependencies)||void 0===t?void 0:t.seriesRectWidth)&&void 0!==e?e:0,T=null!==(i=null===(n=this._nodeDataDependencies)||void 0===n?void 0:n.seriesRectHeight)&&void 0!==i?i:0,E=g*(r.rawData.length-1);let R,L,P;if(y){const e=k+f.spacing;R=new bce(0,"before"===f.placement?e:0,A,T-e)}else{const e=D+f.spacing;R=new bce("after"===f.placement?0:e,0,A-e,T)}if(null!=m&&0!==m){const e="horizontal"===u?1/m:m,t=Math.min(R.width,R.height*e),i=t/e;R=new bce(R.x+(R.width-t)/2,R.y+(R.height-i)/2,t,i)}y?P="before"===f.placement?R.y-f.spacing:R.y+R.height+f.spacing:L="after"===f.placement?R.x+R.width+f.spacing:R.x-f.spacing;const N=R.width-(y?E:0),F=R.height-(y?0:E);if(N<0||F<0)return;const O=[],B=[];let G=0;return r.rawData.forEach(((e,t)=>{const i=b[t],n=C[t],s=l&&d.getItemEnabled({seriesId:o,itemId:t}),r=G+n,a=(G+r)/(2*I),u=(r-G)/I,m=y?N*a+g*t:.5*N,f=y?.5*F:F*a+g*t,x=R.x+m,w=R.y+f;if(null!=M){var S,D;const e=M[t];e.x=null!==(S=L)&&void 0!==S?S:x,e.y=null!==(D=P)&&void 0!==D?D:w}let k,A,T,E;if(y){const e=N*u;k=e,T=e;const t=(m+e/2)*(F/R.width),i=(m-e/2)*(F/R.width);A=p?R.height-t:t,E=p?R.height-i:i}else{const e=F*u;A=e,E=e;const t=(f-e/2)*(N/R.height),i=(f+e/2)*(N/R.height);k=p?R.width-t:t,T=p?R.width-i:i}const z={x:x,y:w,text:this.getLabelText(v,{datum:e,value:n,stageKey:c,valueKey:h}),textAlign:"center",textBaseline:"middle",visible:s};B.push(z),O.push({series:this,itemId:h,datum:e,datumIndex:t,index:t,xValue:i,yValue:n,x:x,y:w,top:k,right:A,bottom:T,left:E,label:z,enabled:s,midPoint:{x:x,y:w}}),G=r})),{itemId:o,nodeData:O,labelData:B,stageLabelData:M}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){var t,i,n,o,s,r,a;let{seriesRect:l}=e;this.checkResize(l);const{datumSelection:d,labelSelection:c,stageLabelSelection:h,highlightDatumSelection:u}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let p=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight();null==p||p.series===this&&null!=p.datum||(p=void 0);const g=null!==(i=null===(n=this.contextNodeData)||void 0===n?void 0:n.nodeData)&&void 0!==i?i:[],m=null!==(o=null===(s=this.contextNodeData)||void 0===s?void 0:s.labelData)&&void 0!==o?o:[],v=null!==(r=null===(a=this.contextNodeData)||void 0===a?void 0:a.stageLabelData)&&void 0!==r?r:[];this.datumSelection=this.updateDatumSelection({nodeData:g,datumSelection:d}),this.updateDatumNodes({datumSelection:d,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:m,labelSelection:c}),this.updateLabelNodes({labelSelection:c,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:v,stageLabelSelection:h}),this.updateLabelNodes({labelSelection:h,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:null!=p?[p]:[],datumSelection:u}),this.updateDatumNodes({datumSelection:u,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData)}getItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,a=e?r.highlightStyle.item:void 0,l=this.getStrokeWidth(r.strokeWidth);return{fill:null===a||void 0===a?void 0:a.fill,fillOpacity:null!==(t=null===a||void 0===a?void 0:a.fillOpacity)&&void 0!==t?t:r.fillOpacity,stroke:null===a||void 0===a?void 0:a.stroke,strokeWidth:null!==(i=null===a||void 0===a?void 0:a.strokeWidth)&&void 0!==i?i:l,strokeOpacity:null!==(n=null===a||void 0===a?void 0:a.strokeOpacity)&&void 0!==n?n:r.strokeOpacity,lineDash:null!==(o=null===a||void 0===a?void 0:a.lineDash)&&void 0!==o?o:r.lineDash,lineDashOffset:null!==(s=null===a||void 0===a?void 0:a.lineDashOffset)&&void 0!==s?s:r.lineDashOffset}}getItemStyleOverrides(e,t,i,n,o){var s,r;const{id:a,properties:d}=this,{fills:c,strokes:h,stageKey:u,valueKey:p,itemStyler:g}=d,m=null!==(s=n.fill)&&void 0!==s?s:c[i%c.length],v=null!==(r=n.stroke)&&void 0!==r?r:h[i%h.length],f={};if(o||(f.fill=m,f.stroke=v),null!=g){const i=this.cachedDatumCallback(yce(e,o?"highlight":"node"),(()=>g(l({seriesId:a,datum:t,stageKey:u,valueKey:p,highlighted:o,fill:m,stroke:v},n))));Object.assign(f,i)}return f}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{properties:n}=this,{shadow:o}=n,s=this.getItemBaseStyle(i);t.each(((e,t)=>{var n,r,a,l,d,c,h;const{datumIndex:u,datum:p,x:g,y:m,top:v,right:f,bottom:y,left:b}=t,C=this.getItemStyleOverrides(String(u),p,u,s,i);e.x0=g-v/2,e.x1=g+v/2,e.x2=g+y/2,e.x3=g-y/2,e.y0=m-b/2,e.y1=m-f/2,e.y2=m+f/2,e.y3=m+b/2,e.fill=null!==(n=null===C||void 0===C?void 0:C.fill)&&void 0!==n?n:s.fill,e.fillOpacity=null!==(r=null===C||void 0===C?void 0:C.fillOpacity)&&void 0!==r?r:s.fillOpacity,e.stroke=null!==(a=null===C||void 0===C?void 0:C.stroke)&&void 0!==a?a:s.stroke,e.strokeOpacity=null!==(l=null===C||void 0===C?void 0:C.strokeOpacity)&&void 0!==l?l:s.strokeOpacity,e.strokeWidth=null!==(d=null===C||void 0===C?void 0:C.strokeWidth)&&void 0!==d?d:s.strokeWidth,e.lineDash=null!==(c=null===C||void 0===C?void 0:C.lineDash)&&void 0!==c?c:s.lineDash,e.lineDashOffset=null!==(h=null===C||void 0===C?void 0:C.lineDashOffset)&&void 0!==h?h:s.lineDashOffset,e.fillShadow=o}))}updateLabelSelection(e){return e.labelSelection.update(this.properties.label.enabled?e.labelData:[])}updateStageLabelSelection(e){return e.stageLabelSelection.update(e.stageLabelData)}updateLabelNodes(e){const{labelSelection:t,labelProperties:i}=e,{color:n,fontSize:o,fontStyle:s,fontWeight:r,fontFamily:a}=i;t.each(((e,t)=>{let{visible:i,x:l,y:d,text:c,textAlign:h,textBaseline:u}=t;e.visible=i,e.x=l,e.y=d,e.text=c,e.fill=n,e.fontStyle=s,e.fontWeight=r,e.fontSize=o,e.fontFamily=a,e.textAlign=h,e.textBaseline=u}))}resetAnimation(e){}computeFocusBounds(e){var t;const i=null===(t=this.getNodeData())||void 0===t?void 0:t[e.datumIndex];if(void 0!==i)for(const n of this.datumSelection)if(n.datum===i)return n.node}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{stageKey:s,valueKey:r,tooltip:a}=o;if(!i||!n||0===n.rawData.length)return;const{datumIndex:d}=e,c=n.rawData[d],h=i.resolveColumnById(this,"xValue",n)[d],u=i.resolveColumnById(this,"yValue",n)[d];if(null==h)return;const p=this.getLabelText(this.properties.stageLabel,{datum:n.rawData[d],value:u,stageKey:s,valueKey:r}),g=this.getItemBaseStyle(!1);return Object.assign(g,this.getItemStyleOverrides(String(d),d,d,g,!1)),a.formatTooltip({symbol:this.legendItemSymbol(d),data:[{label:String(h),value:p}]},l({seriesId:t,datum:c,title:void 0,stageKey:s,valueKey:r},g))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}pickNodeClosestDatum(e){let t,{x:i,y:n}=e,o=1/0;return this.datumSelection.each(((e,s)=>{const r=e.distanceSquared(i,n);r<o&&(o=r,t=s)})),null!=t?{datum:t,distance:Math.sqrt(o)}:void 0}legendItemSymbol(e){var t,i;const{fills:n,strokes:o,strokeWidth:s,fillOpacity:r,strokeOpacity:a}=this.properties;return{marker:{fill:null!==(t=n[e%n.length])&&void 0!==t?t:"black",fillOpacity:r,stroke:null!==(i=o[e%o.length])&&void 0!==i?i:"black",strokeWidth:s,strokeOpacity:a}}}getLegendData(e){const{processedData:t,dataModel:i,id:n,ctx:{legendManager:o},visible:s}=this;if(!i||!t||"category"!==e||!this.properties.isValid())return[];const{showInLegend:r}=this.properties,a=[],l=i.resolveColumnById(this,"xValue",t);return t.rawData.forEach(((e,t)=>{const i=l[t];a.push({legendType:"category",id:n,itemId:t,seriesId:n,enabled:s&&o.getItemEnabled({seriesId:n,itemId:t}),label:{text:i},symbol:this.legendItemSymbol(t),hideInLegend:!r})})),a}},{DEFAULT_FONT_FAMILY:Dce,DEFAULT_LABEL_COLOUR:kce,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Ice}=mW.ThemeSymbols,Ace={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"pyramid",moduleFactory:e=>new Mce(e),solo:!0,tooltipDefaults:{range:"exact"},themeTemplate:{series:{direction:"vertical",strokeWidth:0,spacing:2,label:{enabled:!0,fontSize:12,fontFamily:Dce,color:Ice},stageLabel:{enabled:!0,fontSize:12,fontFamily:Dce,color:kce,spacing:12}}},paletteFactory:e=>{let{takeColors:t,colorsCount:i}=e;const{fills:n,strokes:o}=t(i);return{fills:n,strokes:o}}},{ThemeSymbols:{DEFAULT_FONT_FAMILY:Tce,DEFAULT_LABEL_COLOUR:Ece},ThemeConstants:{POLAR_AXIS_TYPE:Rce}}=mW,Lce={series:{label:{enabled:!1,fontSize:12,fontFamily:Tce,color:Ece},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[Rce.ANGLE_CATEGORY]:{label:{spacing:10}}}},Pce=mW.mergeDefaults({series:{strokeWidth:2}},Lce),Nce=mW.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},Lce),{Label:Fce,SeriesMarker:Oce,SeriesProperties:Bce,SeriesTooltip:Gce,Validate:zce,BOOLEAN:_ce,COLOR_STRING:Vce,NUMBER:Hce,LINE_DASH:Wce,OBJECT:jce,POSITIVE_NUMBER:Uce,RATIO:Kce,STRING:Yce}=mW,Zce=class extends Bce{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new Oce,this.label=new Fce,this.tooltip=new Gce,this.connectMissingData=!1}};dj([zce(Yce)],Zce.prototype,"angleKey",2),dj([zce(Yce)],Zce.prototype,"radiusKey",2),dj([zce(Yce,{optional:!0})],Zce.prototype,"angleName",2),dj([zce(Yce,{optional:!0})],Zce.prototype,"radiusName",2),dj([zce(Vce)],Zce.prototype,"stroke",2),dj([zce(Uce)],Zce.prototype,"strokeWidth",2),dj([zce(Kce)],Zce.prototype,"strokeOpacity",2),dj([zce(Wce)],Zce.prototype,"lineDash",2),dj([zce(Uce)],Zce.prototype,"lineDashOffset",2),dj([zce(Hce)],Zce.prototype,"rotation",2),dj([zce(jce)],Zce.prototype,"marker",2),dj([zce(jce)],Zce.prototype,"label",2),dj([zce(jce)],Zce.prototype,"tooltip",2),dj([zce(_ce)],Zce.prototype,"connectMissingData",2);var{ChartAxisDirection:Xce,PolarAxis:qce,SeriesNodePickMode:Qce,valueProperty:Jce,fixNumericExtent:$ce,seriesLabelFadeInAnimation:ehe,markerFadeInAnimation:the,resetMarkerFn:ihe,animationValidation:nhe,computeMarkerFocusBounds:ohe,isFiniteNumber:she,extent:rhe,isNumberEqual:ahe,createDatumId:lhe,BBox:dhe,Group:che,Path:hhe,PointerEvents:uhe,Selection:phe,Text:ghe,getMarker:mhe}=mW,vhe=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},fhe=class extends mW.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[Qce.NEAREST_NODE,Qce.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:ihe}}),this.clipFocusBox=!1,this.properties=new Zce,this.NodeEvent=vhe,this.lineGroup=this.contentGroup.appendChild(new che({name:"radar-line",zIndex:mW.SeriesZIndexMap.ANY_CONTENT})),this.lineSelection=phe.select(this.lineGroup,hhe),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){const{shape:e}=this.properties.marker;return new(mhe(e))}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.lineGroup.zIndex=[mW.SeriesZIndexMap.ANY_CONTENT,e,mW.SeriesContentZIndexMap.FOREGROUND,1],!0)}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Xce.X)return t.getDomain(this,"angleValue","value",i);{const e=t.getDomain(this,"radiusValue","value",i),n=rhe(0===e.length?e:[0].concat(e));return $ce(n)}}async processData(e){var t,i;if(!this.properties.isValid())return;const{angleKey:n,radiusKey:o}=this.properties,s=[];this.ctx.animationManager.isSkipped()||s.push(nhe());const r=null===(t=this.axes[Xce.Y])||void 0===t?void 0:t.scale.type,a=null===(i=this.axes[Xce.X])||void 0===i?void 0:i.scale.type;await this.requestDataModel(e,this.data,{props:[Jce(n,a,{id:"angleValue"}),Jce(o,r,{id:"radiusValue",invalidValue:void 0}),...s]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return(e!==n.r||t!==n.cx||i!==n.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[Xce.Y];return e instanceof qce?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){var e;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=null!==(e=this.createNodeData())&&void 0!==e?e:{};this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){var e,t;const{processedData:i,dataModel:n}=this;if(!i||!n||0===i.rawData.length||!this.properties.isValid())return;const{angleKey:o,radiusKey:s,angleName:r,radiusName:a,marker:l,label:d}=this.properties,c=null===(e=this.axes[Xce.X])||void 0===e?void 0:e.scale,h=null===(t=this.axes[Xce.Y])||void 0===t?void 0:t.scale;if(!c||!h)return;const u=n.resolveColumnById(this,"angleValue",i),p=n.resolveColumnById(this,"radiusValue",i),g=this.getAxisInnerRadius(),m=i.rawData.map(((e,t)=>{const i=u[t],n=p[t],m=c.convert(i),v=this.radius+g-h.convert(n),f=Math.cos(m),y=Math.sin(m),b=f*v,C=y*v;let x;if(d.enabled){const t=this.getLabelText(d,{value:n,datum:e,angleKey:o,radiusKey:s,angleName:r,radiusName:a});if(t){let e="right";ahe(f,0)?e="center":f>0&&(e="left");let i="bottom";ahe(y,0)?i="middle":y>0&&(i="top"),x={x:b+f*l.size,y:C+y*l.size,text:t,textAlign:e,textBaseline:i}}}return{series:this,datum:e,datumIndex:t,index:t,point:{x:b,y:C,size:l.size},midPoint:{x:b,y:C},label:x,angleValue:i,radiusValue:n,missing:!she(m)||!she(v)}}));return{itemId:s,nodeData:m,labelData:m}}update(e){var t,i;let{seriesRect:n}=e;const o=this.checkResize(n),s=!this.ctx.animationManager.isSkipped(),{series:r}=null!==(t=null===(i=this.ctx.highlightManager)||void 0===i?void 0:i.getActiveHighlight())&&void 0!==t?t:{};this.highlightGroup.visible=(s||this.visible)&&r===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),o&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=phe.select(this.itemGroup,(()=>this.nodeFactory()),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(e){var t;return null!==(t=null===e||void 0===e?void 0:e.fill)&&void 0!==t?t:this.properties.marker.fill}getMarkerItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,{marker:a}=r,l=e?r.highlightStyle.item:void 0,d=this.getStrokeWidth(a.strokeWidth);return{size:a.size,fill:null!==(t=null===l||void 0===l?void 0:l.fill)&&void 0!==t?t:a.fill,fillOpacity:null!==(i=null===l||void 0===l?void 0:l.fillOpacity)&&void 0!==i?i:a.fillOpacity,stroke:null!==(n=null===l||void 0===l?void 0:l.stroke)&&void 0!==n?n:a.stroke,strokeWidth:null!==(o=null===l||void 0===l?void 0:l.strokeWidth)&&void 0!==o?o:d,strokeOpacity:null!==(s=null===l||void 0===l?void 0:l.strokeOpacity)&&void 0!==s?s:a.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{angleKey:r,radiusKey:a,marker:d}=s,{itemStyler:c}=d;if(null!=c)return this.cachedDatumCallback(lhe(e,n?"highlight":"node"),(()=>c(l({seriesId:o,datum:t,angleKey:r,radiusKey:a,highlighted:n},i))))}updateMarkers(e,t){const{visible:i}=this,{marker:n}=this.properties;let o=[];if(i&&n.shape&&n.enabled)if(t){var s;const e=null===(s=this.ctx.highlightManager)||void 0===s?void 0:s.getActiveHighlight();null!==e&&void 0!==e&&e.datum&&(o=[e])}else o=this.nodeData;const r=this.getMarkerItemBaseStyle(t);e.update(o).each(((e,t)=>{var n,o,s,a,l,d;const{datum:c,datumIndex:h,point:u}=t,p=this.getMarkerItemStyleOverrides(String(h),c,r,!1);e.fill=null!==(n=null===p||void 0===p?void 0:p.fill)&&void 0!==n?n:r.fill,e.stroke=null!==(o=null===p||void 0===p?void 0:p.stroke)&&void 0!==o?o:r.stroke,e.strokeWidth=null!==(s=null===p||void 0===p?void 0:p.strokeWidth)&&void 0!==s?s:r.strokeWidth,e.fillOpacity=null!==(a=null===p||void 0===p?void 0:p.fillOpacity)&&void 0!==a?a:r.fillOpacity,e.strokeOpacity=null!==(l=null===p||void 0===p?void 0:p.strokeOpacity)&&void 0!==l?l:r.strokeOpacity,e.size=null!==(d=null===p||void 0===p?void 0:p.size)&&void 0!==d?d:r.size;const{x:g,y:m}=u;e.x=g,e.y=m,e.visible=i&&e.size>0&&!isNaN(g)&&!isNaN(m)}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{angleKey:r,angleName:a,radiusKey:d,radiusName:c,tooltip:h}=s,u=o[Xce.X],p=o[Xce.Y];if(!i||!n||0===n.rawData.length||!u||!p)return;const{datumIndex:g}=e,m=n.rawData[g],v=i.resolveColumnById(this,"angleValue",n)[g],f=i.resolveColumnById(this,"radiusValue",n)[g];if(null==v)return;const y=this.getMarkerItemBaseStyle(!1);return Object.assign(y,this.getMarkerItemStyleOverrides(String(g),g,y,!1)),h.formatTooltip({heading:u.formatDatum(v),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:d,value:p.formatDatum(f)}]},l({seriesId:t,datum:m,title:a,angleKey:r,radiusKey:d,angleName:a,radiusName:c},y))}legendItemSymbol(){var e,t,i,n,o,s,r,a,l;const{stroke:d,strokeWidth:c,strokeOpacity:h,lineDash:u,marker:p}=this.properties;return{marker:{shape:p.shape,fill:null!==(e=null!==(t=null!==(i=this.getMarkerFill())&&void 0!==i?i:p.stroke)&&void 0!==t?t:d)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(o=p.stroke)&&void 0!==o?o:d)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(s=p.fillOpacity)&&void 0!==s?s:1,strokeOpacity:null!==(r=null!==(a=p.strokeOpacity)&&void 0!==a?a:h)&&void 0!==r?r:1,strokeWidth:null!==(l=p.strokeWidth)&&void 0!==l?l:0,enabled:p.enabled||c<=0},line:{stroke:d,strokeOpacity:h,strokeWidth:c,lineDash:u}}}getLegendData(e){if(!this.properties.isValid()||"category"!==e)return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{radiusKey:o,radiusName:s,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:o,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:o}),label:{text:null!==s&&void 0!==s?s:o},symbol:this.legendItemSymbol(),hideInLegend:!r}]}pickNodeClosestDatum(e){const{nodeData:t,centerX:i,centerY:n}=this,{x:o,y:s}=e,r=this.radius;if(Math.sqrt((o-i)**2+(s-n)**2)>r+this.properties.marker.size)return;let a,l=1/0;for(const h of t){const{point:{x:t=NaN,y:o=NaN}={}}=h;if(isNaN(t)||isNaN(o))continue;const s=Math.sqrt((e.x-t-i)**2+(e.y-o-n)**2);s<l&&(l=s,a=h)}if(a){var d,c;return{datum:a,distance:Math.max(l-(null!==(d=null===(c=a.point)||void 0===c?void 0:c.size)&&void 0!==d?d:0),0)}}}computeLabelsBBox(){const{label:e}=this.properties;this.maybeRefreshNodeData();const t=[],i=new ghe;return this.nodeData.forEach((n=>{if(!e.enabled||!n.label)return;i.text=n.label.text,i.x=n.label.x,i.y=n.label.y,i.setFont(e),i.setAlign(n.label);const o=i.getBBox();t.push(o)})),0===t.length?null:dhe.merge(t)}getLineNode(){var e;return null===(e=this.lineSelection)||void 0===e?void 0:e.at(0)}beforePathAnimation(){const e=this.getLineNode();e&&(e.fill=void 0,e.lineJoin="round",e.lineCap="round",e.pointerEvents=uhe.None,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset)}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(0===e.length)return[];const n=this.axes[Xce.Y],o=this.axes[Xce.X],s=null===o||void 0===o?void 0:o.isReversed(),r=(null===n||void 0===n?void 0:n.isReversed())&&!s?[...e].reverse():e,a=[];let l,d=!1;return r.forEach(((e,n)=>{let{x:o,y:s}=e.point;const r=isNaN(o)||isNaN(s);var c;r||(null!==(c=l)&&void 0!==c||(l=e));r&&!i&&(o=0,s=0);const h=0===n||!t&&!i&&(r||d);a.push({x:o,y:s,moveTo:h}),d=r})),void 0!==l&&a.push({x:l.point.x,y:l.point.y,moveTo:!1}),a}animateSinglePath(e,t,i){const{path:n}=e;n.clear(!0);const o=this.getAxisInnerRadius(),s=this.axes[Xce.Y],r=(null===s||void 0===s?void 0:s.isReversed())?this.radius+o-(null===s||void 0===s?void 0:s.scale.convert(0)):o;t.forEach((e=>{const{x:t,y:o,arc:s,radius:a=0,startAngle:l=0,endAngle:d=0,moveTo:c}=e,h=Math.atan2(o,t),u=r*Math.cos(h),p=r*Math.sin(h),g=u*(1-i)+t*i,m=p*(1-i)+o*i;s?n.arc(t,o,a,l,d):c?n.moveTo(g,m):n.lineTo(g,m)})),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:"".concat(this.id,"_'path"),groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:e=>this.animatePaths(e),onStop:()=>this.animatePaths(1)}),the(this,i,"added",e),ehe(this,"labels",i,t)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear(!0);for(const{x:e,y:n,moveTo:o}of i)o?t.moveTo(e,n):t.lineTo(e,n);e.checkPathDirty()}}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,angleKey:t,radiusKey:i,highlighted:!0})}computeFocusBounds(e){const t=ohe(this,e),{translationX:i,translationY:n}=this.contentGroup;return null===t||void 0===t||t.translate(i,n),t}};fhe.className="RadarSeries";var{RATIO:yhe,COLOR_STRING:bhe,Validate:Che}=mW,xhe=class extends Zce{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};dj([Che(bhe)],xhe.prototype,"fill",2),dj([Che(yhe)],xhe.prototype,"fillOpacity",2);var{Group:whe,Path:She,PointerEvents:Mhe,Selection:Dhe,ChartAxisDirection:khe}=mW,Ihe=class extends fhe{constructor(e){super(e),this.properties=new xhe,this.resetInvalidToZero=!0;const t=new whe;this.contentGroup.append(t),this.areaSelection=Dhe.select(t,She)}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(e){var t,i;return null!==(t=null!==(i=null===e||void 0===e?void 0:e.fill)&&void 0!==i?i:this.properties.marker.fill)&&void 0!==t?t:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const e=this.getAreaNode();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.pointerEvents=Mhe.None,e.stroke=void 0}animatePaths(e){super.animatePaths(e),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),e)}getAreaPoints(){var e,t;const i=this.getLinePoints(),n=e=>{const t=this.axes[e];return t instanceof mW.PolarAxis?t:void 0},o=n(khe.Y),s=n(khe.X);if(!(null===o||void 0===o?void 0:o.isReversed()))return i;const r=null!==(e=null===s||void 0===s||null===(t=s.getAxisLinePoints())||void 0===t?void 0:t.points)&&void 0!==e?e:[];return i.concat(...r)}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.stroke=void 0,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,e.lineJoin=e.lineCap="round",t.clear(!0),i.forEach((e=>{let{x:i,y:n,moveTo:o,arc:s,radius:r=0,startAngle:a=0,endAngle:l=0}=e;s?t.arc(i,n,r,a,l):o?t.moveTo(i,n):t.lineTo(i,n)})),t.closePath(),e.checkPathDirty()}}};Ihe.className="RadarAreaSeries",Ihe.type="radar-area";var{markerPaletteFactory:Ahe,ThemeConstants:{POLAR_AXIS_TYPE:The}}=mW,Ehe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:e=>new Ihe(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:The.ANGLE_CATEGORY},{type:The.RADIUS_NUMBER}],themeTemplate:Nce,paletteFactory:e=>{const{marker:t}=Ahe(e);return{stroke:t.stroke,fill:t.fill,marker:t}}},Rhe=class extends fhe{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};Rhe.className="RadarLineSeries",Rhe.type="radar-line";var{POLAR_AXIS_TYPE:Lhe}=mW.ThemeConstants,Phe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:e=>new Rhe(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:Lhe.ANGLE_CATEGORY},{type:Lhe.RADIUS_NUMBER}],themeTemplate:Pce,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[n]}=t(1);return{stroke:i,marker:{fill:i,stroke:n}}}},{SeriesProperties:Nhe,SeriesTooltip:Fhe,Validate:Ohe,COLOR_STRING:Bhe,NUMBER:Ghe,FUNCTION:zhe,LINE_DASH:_he,OBJECT:Vhe,POSITIVE_NUMBER:Hhe,RATIO:Whe,STRING:jhe,Label:Uhe}=mW,Khe=class extends Nhe{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Uhe,this.tooltip=new Fhe}};dj([Ohe(jhe)],Khe.prototype,"angleKey",2),dj([Ohe(jhe)],Khe.prototype,"radiusKey",2),dj([Ohe(jhe,{optional:!0})],Khe.prototype,"angleName",2),dj([Ohe(jhe,{optional:!0})],Khe.prototype,"radiusName",2),dj([Ohe(Bhe)],Khe.prototype,"fill",2),dj([Ohe(Whe)],Khe.prototype,"fillOpacity",2),dj([Ohe(Bhe)],Khe.prototype,"stroke",2),dj([Ohe(Hhe)],Khe.prototype,"strokeWidth",2),dj([Ohe(Whe)],Khe.prototype,"strokeOpacity",2),dj([Ohe(_he)],Khe.prototype,"lineDash",2),dj([Ohe(Hhe)],Khe.prototype,"lineDashOffset",2),dj([Ohe(Hhe)],Khe.prototype,"cornerRadius",2),dj([Ohe(zhe,{optional:!0})],Khe.prototype,"itemStyler",2),dj([Ohe(Ghe)],Khe.prototype,"rotation",2),dj([Ohe(jhe,{optional:!0})],Khe.prototype,"stackGroup",2),dj([Ohe(Ghe,{optional:!0})],Khe.prototype,"normalizedTo",2),dj([Ohe(Vhe)],Khe.prototype,"label",2),dj([Ohe(Vhe)],Khe.prototype,"tooltip",2);var{SectorBox:Yhe,motion:Zhe}=mW;function Xhe(e){return{toFn:(t,i,n)=>{let o,s,r,a,l;return"removed"===n?(o=e,s=e,r=i.innerRadius,a=i.outerRadius,l=new Yhe(o,s,r,a)):(o=i.startAngle,s=i.endAngle,r=isNaN(i.innerRadius)?t.innerRadius:i.innerRadius,a=isNaN(i.outerRadius)?t.outerRadius:i.outerRadius,l=i.clipSector),{startAngle:o,endAngle:s,innerRadius:r,outerRadius:a,clipSector:l}},fromFn:(t,i,n)=>{var o;let s,r,a,l,d;n=function(e,t,i){if("updated"===i){if(null==e.previousDatum||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}(t,i,n),"removed"===n||"updated"===n?(s=t.startAngle,r=t.endAngle,a=t.innerRadius,l=t.outerRadius,d=t.clipSector):(s=e,r=e,a=i.innerRadius,l=i.outerRadius),null!==(o=d)&&void 0!==o||(d=new Yhe(s,r,a,l));return{startAngle:s,endAngle:r,innerRadius:a,outerRadius:l,clipSector:d,phase:Zhe.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n]}}}}function qhe(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{ChartAxisDirection:Qhe,PolarAxis:Jhe,diff:$he,isDefined:eue,groupAccumulativeValueProperty:tue,keyProperty:iue,normaliseGroupTo:nue,valueProperty:oue,fixNumericExtent:sue,resetLabelFn:rue,seriesLabelFadeInAnimation:aue,seriesLabelFadeOutAnimation:lue,animationValidation:due,angleBetween:cue,createDatumId:hue,BandScale:uue,Sector:pue,SectorBox:gue,motion:mue}=mW,vue=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},fue=class extends mW.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:qhe,label:rue}}),this.properties=new Khe,this.NodeEvent=vue,this.groupScale=new uue,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new pue}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Qhe.X){const e=t.getDomain(this,"angleValue-end","value",i),n=[e[0]>0?0:e[0],e[1]<0?0:e[1]];return sue(n)}return t.getDomain(this,"radiusValue","key",i)}async processData(e){var t,i;const{visible:n}=this,{angleKey:o,radiusKey:s,normalizedTo:r}=this.properties,a=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const d=this.getStackId(),c="".concat(d,"-trailing"),h=[];eue(r)&&h.push(nue([d,c],Math.abs(r),"range")),a&&(this.processedData&&h.push($he(this.id,this.processedData)),h.push(due()));const u=n||!a?{}:{forceValue:0},p=null===(t=this.axes[Qhe.Y])||void 0===t?void 0:t.scale.type,g=null===(i=this.axes[Qhe.X])||void 0===i?void 0:i.scale.type;await this.requestDataModel(e,this.data,{props:[iue(s,p,{id:"radiusValue"}),oue(o,g,l({id:"angleValue-raw",invalidValue:null},u)),...tue(o,"normal","current",l({id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:d,separateNegative:!0},u),g),...tue(o,"trailing","current",l({id:"angleValue-start",invalidValue:null,groupId:c,separateNegative:!0},u),g),...h]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return(e!==n.r||t!==n.cx||i!==n.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){var e;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=null!==(e=this.createNodeData())&&void 0!==e?e:{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[Qhe.Y];return e instanceof Jhe?this.radius*e.innerRadiusRatio:0}createNodeData(){var e;const{processedData:t,dataModel:i}=this;if(!i||!t||"ungrouped"!==t.type||0===t.rawData.length||!this.properties.isValid())return;const n=this.axes[Qhe.X],o=this.axes[Qhe.Y],s=null===n||void 0===n?void 0:n.scale,r=null===o||void 0===o?void 0:o.scale;if(!s||!r)return;const a=i.resolveKeysById(this,"radiusValue",t),l=i.resolveColumnById(this,"angleValue-start",t),d=i.resolveColumnById(this,"angleValue-end",t),c=i.resolveColumnById(this,"angleValue-raw",t),h=i.resolveProcessedDataIndexById(this,"angleValue-range");let u=0;o instanceof xK&&(u=o.groupPaddingInner);const{groupScale:p}=this,{index:g,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);p.domain=Array.from({length:m}).map(((e,t)=>String(t))),p.range=[0,Math.abs(null!==(e=r.bandwidth)&&void 0!==e?e:0)],p.paddingInner=m>1?u:0;const v=p.bandwidth>=1?p.bandwidth:p.rawBandwidth,f=n.isReversed(),y=o.isReversed(),b=y?this.radius:this.getAxisInnerRadius(),C=(y?this.getAxisInnerRadius():this.radius)+b,{angleKey:x,radiusKey:w,angleName:S,radiusName:M,label:D}=this.properties,k=(e,t,i,n)=>{const o=this.getLabelText(D,{value:t,datum:e,angleKey:x,radiusKey:w,angleName:S,radiusName:M});if(o)return{x:i,y:n,text:o,textAlign:"center",textBaseline:"middle"}},I=[],A={itemId:w,nodeData:I,labelData:I};if(!this.visible)return A;const{rawData:T,aggregation:E}=t;return T.forEach(((e,t)=>{const i=a[t];if(null==i)return;const n=c[t],o=l[t],u=d[t],m=n>=0&&!Object.is(n,-0),y=E[t][h][m?1:0],b=m===f;let x=s.convert(o,!0),w=s.convert(u,!0),S=s.convert(0,!0),M=s.convert(y,!0);b&&([S,M]=[M,S],[x,w]=[w,x]);const D=C-r.convert(i)+p.convert(String(g)),A=D+v,T=(D+A)/2,R=x+cue(x,w)/2,L=Math.cos(R)*T,P=Math.sin(R)*T,N=this.properties.label.enabled?k(e,n,L,P):void 0,F=new gue(x,w,D,A);I.push({series:this,datum:e,datumIndex:t,point:{x:L,y:P,size:0},midPoint:{x:L,y:P},label:N,angleValue:n,radiusValue:i,innerRadius:D,outerRadius:A,startAngle:S,endAngle:M,clipSector:F,reversed:b,index:t})})),A}update(e){let{seriesRect:t}=e;const i=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(e){var t,i,n,o,s,r,a;const{properties:l}=this,d=e?l.highlightStyle.item:void 0,c=this.getStrokeWidth(l.strokeWidth);return{fill:null!==(t=null===d||void 0===d?void 0:d.fill)&&void 0!==t?t:l.fill,fillOpacity:null!==(i=null===d||void 0===d?void 0:d.fillOpacity)&&void 0!==i?i:l.fillOpacity,stroke:null!==(n=null===d||void 0===d?void 0:d.stroke)&&void 0!==n?n:l.stroke,strokeWidth:null!==(o=null===d||void 0===d?void 0:d.strokeWidth)&&void 0!==o?o:c,strokeOpacity:null!==(s=null===d||void 0===d?void 0:d.strokeOpacity)&&void 0!==s?s:l.strokeOpacity,lineDash:null!==(r=null===d||void 0===d?void 0:d.lineDash)&&void 0!==r?r:l.lineDash,lineDashOffset:null!==(a=null===d||void 0===d?void 0:d.lineDashOffset)&&void 0!==a?a:l.lineDashOffset,cornerRadius:l.cornerRadius}}getItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{angleKey:r,radiusKey:a,itemStyler:d}=s;if(null!=d)return this.cachedDatumCallback(hue(e,n?"highlight":"node"),(()=>d(l({seriesId:o,datum:t,highlighted:n,angleKey:r,radiusKey:a},i))))}updateSectorSelection(e,t){let i=[];if(t){var n;const e=null===(n=this.ctx.highlightManager)||void 0===n?void 0:n.getActiveHighlight();null!==e&&void 0!==e&&e.datum&&e.series===this&&i.push(e)}else i=this.nodeData;const o=this.getItemBaseStyle(t);e.update(i,void 0,(e=>this.getDatumId(e))).each(((e,i)=>{var n,s,r,a,l,d,c,h;const{datum:u,datumIndex:p}=i,g=this.getItemStyleOverrides(String(p),u,o,t),m=null!==(n=null===g||void 0===g?void 0:g.stroke)&&void 0!==n?n:o.stroke,v=null!==(s=null===g||void 0===g?void 0:g.strokeWidth)&&void 0!==s?s:o.strokeWidth,f=null!==(r=null===g||void 0===g?void 0:g.cornerRadius)&&void 0!==r?r:o.cornerRadius;e.fill=null!==(a=null===g||void 0===g?void 0:g.fill)&&void 0!==a?a:o.fill,e.fillOpacity=null!==(l=null===g||void 0===g?void 0:g.fillOpacity)&&void 0!==l?l:o.fillOpacity,e.stroke=m,e.strokeWidth=v,e.strokeOpacity=null!==(d=null===g||void 0===g?void 0:g.strokeOpacity)&&void 0!==d?d:o.strokeOpacity,e.lineDash=null!==(c=null===g||void 0===g?void 0:g.lineDash)&&void 0!==c?c:o.lineDash,e.lineDashOffset=null!==(h=null===g||void 0===g?void 0:g.lineDashOffset)&&void 0!==h?h:o.lineDashOffset,e.lineJoin="round",e.inset=null!=m?v/2:0,e.startInnerCornerRadius=u.reversed?f:0,e.startOuterCornerRadius=u.reversed?f:0,e.endInnerCornerRadius=u.reversed?0:f,e.endOuterCornerRadius=u.reversed?0:f,t&&(e.startAngle=i.startAngle,e.endAngle=i.endAngle,e.clipSector=i.clipSector,e.innerRadius=i.innerRadius,e.outerRadius=i.outerRadius)}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}getBarTransitionFunctions(){var e;const t=null===(e=this.axes[Qhe.X])||void 0===e?void 0:e.scale;let i=0;if(!t)return Xhe(i);const n=Math.min(t.domain[0],t.domain[1]),o=Math.max(t.domain[0],t.domain[1]);return n<=0&&o>=0&&(i=t.convert(0)),Xhe(i)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();mue.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),aue(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();mue.fromToMotion(this.id,"datums",t,[e],i),lue(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{angleKey:r,angleName:a,radiusKey:d,radiusName:c,tooltip:h}=s,u=o[Qhe.X],p=o[Qhe.Y];if(!i||!n||0===n.rawData.length||!u||!p)return;const{datumIndex:g}=e,m=n.rawData[g],v=i.resolveKeysById(this,"radiusValue",n)[g],f=i.resolveColumnById(this,"angleValue-raw",n)[g];if(null==v)return;const y=this.getItemBaseStyle(!1);return Object.assign(y,this.getItemStyleOverrides(String(g),g,y,!1)),h.formatTooltip({heading:p.formatDatum(v),symbol:this.legendItemSymbol(),data:[{label:a,fallbackLabel:r,value:u.formatDatum(f)}]},l({seriesId:t,datum:m,title:a,angleKey:r,angleName:a,radiusKey:d,radiusName:c},y))}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:o}=this.properties;return{marker:{fill:null!==e&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==t&&void 0!==t?t:"rgba(0, 0, 0, 0)",fillOpacity:null!==i&&void 0!==i?i:1,strokeOpacity:null!==n&&void 0!==n?n:1,strokeWidth:o}}}getLegendData(e){if(!this.properties.isValid()||"category"!==e)return[];const{id:t,visible:i}=this,{angleKey:n,angleName:o,showInLegend:s}=this.properties;return[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:i,label:{text:null!==o&&void 0!==o?o:n},symbol:this.legendItemSymbol(),hideInLegend:!s}]}getDatumId(e){return hue(e.radiusValue)}computeLabelsBBox(){return null}getStackId(){var e,t;const i=null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.groupIndex)&&void 0!==e?e:this.id;return"radialBar-stack-".concat(i,"-xValues")}};fue.className="RadialBarSeries",fue.type="radial-bar";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:yue,DEFAULT_INVERTED_LABEL_COLOUR:bue},ThemeConstants:{POLAR_AXIS_TYPE:Cue}}=mW,xue={series:{strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:yue,color:bue}},axes:{[Cue.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:wue}=mW.ThemeConstants,Sue={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:e=>new fue(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:wue.ANGLE_NUMBER},{type:wue.RADIUS_CATEGORY}],themeTemplate:xue,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[n]}=t(1);return{fill:i,stroke:n}},stackable:!0,groupable:!0},{Validate:Mue,RATIO:Due}=mW,kue=class extends Sde{};dj([Mue(Due,{optional:!0})],kue.prototype,"columnWidthRatio",2),dj([Mue(Due,{optional:!0})],kue.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:Iue,PolarAxis:Aue,RadialColumnShape:Tue,getRadialColumnWidth:Eue}=mW,Rue=class extends cde{constructor(e){super(e,{animationResetFns:{item:Ide}}),this.properties=new kue}getStackId(){var e,t;const i=null!==(e=null===(t=this.seriesGrouping)||void 0===t?void 0:t.groupIndex)&&void 0!==e?e:this.id;return"radarColumn-stack-".concat(i,"-yValues")}nodeFactory(){return new Tue}getColumnTransitionFunctions(){return function(e){const t=Dde();return{toFn:(i,n,o)=>{const{startAngle:s,endAngle:r}=t.to(n);let a,l,d,c,h;return"removed"===o?(a=i.innerRadius,l=i.innerRadius,d=i.columnWidth,c=i.axisInnerRadius,h=i.axisOuterRadius):(a=isNaN(n.innerRadius)?e:n.innerRadius,l=isNaN(n.outerRadius)?e:n.outerRadius,d=isNaN(n.columnWidth)?i.columnWidth:n.columnWidth,c=n.axisInnerRadius,h=n.axisOuterRadius),{innerRadius:a,outerRadius:l,columnWidth:d,axisInnerRadius:c,axisOuterRadius:h,startAngle:s,endAngle:r}},fromFn:(i,n,o)=>{o=kde(i,n,o),t.calculate(i,n,o);const{startAngle:s,endAngle:r}=t.from(n);let a,l,d,c,h;return"removed"===o||"updated"===o?(a=i.innerRadius,l=i.outerRadius,d=i.columnWidth,c=i.axisInnerRadius,h=i.axisOuterRadius):(a=e,l=e,d=n.columnWidth,c=n.axisInnerRadius,h=n.axisOuterRadius),{innerRadius:a,outerRadius:l,columnWidth:d,axisInnerRadius:c,axisOuterRadius:h,startAngle:s,endAngle:r,phase:Mde.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}isRadiusAxisCircle(){const e=this.axes[Iue.Y];return e instanceof Aue&&"circle"===e.shape}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:n=.5}=this.properties;return Eue(e,t,this.radius,i,n)}};Rue.className="RadialColumnSeries",Rue.type="radial-column";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:Lue,DEFAULT_LABEL_COLOUR:Pue},ThemeConstants:{POLAR_AXIS_TYPE:Nue,POLAR_AXIS_SHAPE:Fue}}=mW,Oue={series:{columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Lue,color:Pue}},axes:{[Nue.ANGLE_CATEGORY]:{shape:Fue.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Nue.RADIUS_NUMBER]:{shape:Fue.CIRCLE,innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:Bue}=mW.ThemeConstants,Gue={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:e=>new Rue(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:Bue.ANGLE_CATEGORY},{type:Bue.RADIUS_NUMBER}],themeTemplate:Oue,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[n]}=t(1);return{fill:i,stroke:n}},stackable:!0,groupable:!0},{SvgPath:zue,Rotatable:_ue,Translatable:Vue,Scalable:Hue}=mW,Wue=class extends(_ue(Hue(Vue(zue)))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};Wue.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";var{BaseProperties:jue,SeriesTooltip:Uue,SeriesProperties:Kue,PropertiesArray:Yue,Validate:Zue,BOOLEAN:Xue,COLOR_STRING:que,COLOR_STRING_ARRAY:Que,FUNCTION:Jue,LINE_DASH:$ue,NUMBER:epe,OBJECT_ARRAY:tpe,OBJECT:ipe,POSITIVE_NUMBER:npe,RATIO:ope,STRING:spe,UNION:rpe,Logger:ape,Label:lpe}=mW,dpe=rpe(["inside","outside","middle"],"a placement"),cpe=class extends lpe{};dj([Zue(epe,{optional:!0})],cpe.prototype,"spacing",2);var hpe=class extends jue{constructor(){super(...arguments),this.label=new cpe}};dj([Zue(spe,{optional:!0})],hpe.prototype,"text",2),dj([Zue(epe,{optional:!0})],hpe.prototype,"value",2),dj([Zue(ooe,{optional:!0})],hpe.prototype,"shape",2),dj([Zue(dpe,{optional:!0})],hpe.prototype,"placement",2),dj([Zue(epe,{optional:!0})],hpe.prototype,"spacing",2),dj([Zue(npe,{optional:!0})],hpe.prototype,"size",2),dj([Zue(epe,{optional:!0})],hpe.prototype,"rotation",2),dj([Zue(que,{optional:!0})],hpe.prototype,"fill",2),dj([Zue(ope,{optional:!0})],hpe.prototype,"fillOpacity",2),dj([Zue(que,{optional:!0})],hpe.prototype,"stroke",2),dj([Zue(npe,{optional:!0})],hpe.prototype,"strokeWidth",2),dj([Zue(ope,{optional:!0})],hpe.prototype,"strokeOpacity",2),dj([Zue($ue,{optional:!0})],hpe.prototype,"lineDash",2),dj([Zue(npe,{optional:!0})],hpe.prototype,"lineDashOffset",2),dj([Zue(ipe)],hpe.prototype,"label",2);var upe=class extends jue{constructor(){super(...arguments),this.enabled=!0,this.fills=new Yue(Qne),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};dj([Zue(Xue)],upe.prototype,"enabled",2),dj([Zue(tpe)],upe.prototype,"fills",2),dj([Zue(noe)],upe.prototype,"fillMode",2),dj([Zue(que,{optional:!0})],upe.prototype,"fill",2),dj([Zue(ope)],upe.prototype,"fillOpacity",2),dj([Zue(que,{optional:!0})],upe.prototype,"stroke",2),dj([Zue(npe,{optional:!0})],upe.prototype,"strokeWidth",2),dj([Zue(ope)],upe.prototype,"strokeOpacity",2),dj([Zue($ue)],upe.prototype,"lineDash",2),dj([Zue(npe)],upe.prototype,"lineDashOffset",2);var ppe=class extends jue{constructor(){super(...arguments),this.fills=new Yue(Qne),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black"}};dj([Zue(tpe)],ppe.prototype,"fills",2),dj([Zue(noe)],ppe.prototype,"fillMode",2),dj([Zue(que,{optional:!0})],ppe.prototype,"fill",2),dj([Zue(ope)],ppe.prototype,"fillOpacity",2),dj([Zue(que)],ppe.prototype,"stroke",2),dj([Zue(npe)],ppe.prototype,"strokeWidth",2),dj([Zue(ope)],ppe.prototype,"strokeOpacity",2),dj([Zue($ue)],ppe.prototype,"lineDash",2),dj([Zue(npe)],ppe.prototype,"lineDashOffset",2),dj([Zue(que)],ppe.prototype,"defaultFill",2);var gpe=class extends jue{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};dj([Zue(Xue)],gpe.prototype,"enabled",2),dj([Zue(ope,{optional:!0})],gpe.prototype,"radiusRatio",2),dj([Zue(epe)],gpe.prototype,"spacing",2),dj([Zue(que)],gpe.prototype,"fill",2),dj([Zue(ope)],gpe.prototype,"fillOpacity",2),dj([Zue(que)],gpe.prototype,"stroke",2),dj([Zue(npe)],gpe.prototype,"strokeWidth",2),dj([Zue(ope)],gpe.prototype,"strokeOpacity",2),dj([Zue($ue)],gpe.prototype,"lineDash",2),dj([Zue(npe)],gpe.prototype,"lineDashOffset",2);var mpe=class extends jie{};dj([Zue(spe,{optional:!0})],mpe.prototype,"text",2);var vpe=class extends Uie{};dj([Zue(spe,{optional:!0})],vpe.prototype,"text",2);var fpe=class extends Kue{constructor(){super(...arguments),this.segmentation=new goe,this.defaultColorRange=[],this.targets=new Yue(hpe),this.defaultTarget=new hpe,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new ppe,this.bar=new upe,this.needle=new gpe,this.label=new mpe,this.secondaryLabel=new vpe,this.tooltip=new Uue}isValid(e){if(!super.isValid(e))return!1;const{outerRadius:t,innerRadius:i}=this;return null==t===(null==i)||(ape.warnOnce("Either [innerRadius] and [outerRadius] must both be set, or neither can be set."),!1)}};dj([Zue(epe)],fpe.prototype,"value",2),dj([Zue(ipe)],fpe.prototype,"segmentation",2),dj([Zue(Que)],fpe.prototype,"defaultColorRange",2),dj([Zue(tpe)],fpe.prototype,"targets",2),dj([Zue(ipe)],fpe.prototype,"defaultTarget",2),dj([Zue(ope)],fpe.prototype,"outerRadiusRatio",2),dj([Zue(ope)],fpe.prototype,"innerRadiusRatio",2),dj([Zue(npe,{optional:!0})],fpe.prototype,"outerRadius",2),dj([Zue(npe,{optional:!0})],fpe.prototype,"innerRadius",2),dj([Zue(npe)],fpe.prototype,"cornerRadius",2),dj([Zue(soe)],fpe.prototype,"cornerMode",2),dj([Zue(epe)],fpe.prototype,"spacing",2),dj([Zue(ipe)],fpe.prototype,"scale",2),dj([Zue(ipe)],fpe.prototype,"bar",2),dj([Zue(ipe)],fpe.prototype,"needle",2),dj([Zue(Jue,{optional:!0})],fpe.prototype,"itemStyler",2),dj([Zue(ipe)],fpe.prototype,"label",2),dj([Zue(ipe)],fpe.prototype,"secondaryLabel",2),dj([Zue(ipe)],fpe.prototype,"tooltip",2);var{SectorBox:ype}=mW;function bpe(e,t,i){return Math.max(e,i.startAngle)<=Math.min(t,i.endAngle)}function Cpe(e){return null!=e.clipStartAngle&&null!=e.clipEndAngle}function xpe(e,t){const{clipStartAngle:i,clipEndAngle:n,innerRadius:o,outerRadius:s}=e;return new ype(i,t?i:n,o,s)}function wpe(e,t){const i=e?"initial":"update";return{node:{fromFn(t,n){const o=t.previousDatum;let{startAngle:s,endAngle:r}=null!==o&&void 0!==o?o:n;const a=null!=o&&Cpe(o)?xpe(o,e):void 0,l=Cpe(n)?xpe(n,e):void 0;let d;return null!=a&&null!=l?d=a:null==a&&null!=l?(d=l,s=n.startAngle,r=n.endAngle):null!=a&&null==l?(d=void 0,s=n.startAngle,r=n.endAngle):e&&(r=s),{startAngle:s,endAngle:r,clipSector:d,phase:i}},toFn(e,t){const{startAngle:i,endAngle:n}=t;let o;return Cpe(t)&&(o=xpe(t,!1)),{startAngle:i,endAngle:n,clipSector:o}},applyFn(e,t){const{startAngle:i,endAngle:n}=t;let{clipSector:o}=t;null!=o&&(o=new ype(Math.max(i,o.startAngle),Math.min(n,o.endAngle),o.innerRadius,o.outerRadius));const s=null==o||bpe(i,n,o);e.startAngle=i,e.endAngle=n,e.clipSector=o,e.visible=s}},needle:{fromFn(n){var o;let{angle:s}=null!==(o=n.previousDatum)&&void 0!==o?o:n.datum;return e&&(s=t),{rotation:s,phase:i}},toFn(e,t){const{angle:i}=t;return{rotation:i}}}}}function Spe(e,t){const{startAngle:i,endAngle:n}=t,o=function(e){const{startAngle:t,endAngle:i,clipStartAngle:n,clipEndAngle:o,innerRadius:s,outerRadius:r}=e;if(null!=n&&null!=o)return new ype(Math.max(n,t),Math.min(o,i),s,r)}(t);return{startAngle:i,endAngle:n,clipSector:o,visible:null==o||bpe(i,n,o)}}function Mpe(e,t){const{angle:i}=t;return{rotation:i}}var Dpe={top:0,middle:.5,bottom:1};var{fromToMotion:kpe,resetMotion:Ipe,SeriesNodePickMode:Ape,StateMachine:Tpe,createDatumId:Epe,ChartAxisDirection:Rpe,normalizeAngle360:Lpe,normalizeAngle360Inclusive:Ppe,toDegrees:Npe,toRadians:Fpe,BBox:Ope,Group:Bpe,PointerEvents:Gpe,Selection:zpe,Sector:_pe,Text:Vpe,ConicGradient:Hpe,getMarker:Wpe}=mW,jpe={inside:90,middle:0,outside:-90},Upe=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],Kpe=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],Ype=class extends mW.Series{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[Ape.EXACT_SHAPE_MATCH,Ape.NEAREST_NODE]}),this.canHaveAxes=!0,this.properties=new fpe,this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.scaleGroup=this.contentGroup.appendChild(new Bpe({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Bpe({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new Bpe({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Bpe({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Bpe({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Bpe({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Bpe({name:"itemTargetLabelGroup"})),this.scaleSelection=zpe.select(this.scaleGroup,(()=>this.nodeFactory())),this.datumSelection=zpe.select(this.itemGroup,(()=>this.nodeFactory())),this.needleSelection=zpe.select(this.itemNeedleGroup,Wue),this.targetSelection=zpe.select(this.itemTargetGroup,(e=>this.markerFactory(e))),this.targetLabelSelection=zpe.select(this.itemTargetLabelGroup,Vpe),this.labelSelection=zpe.select(this.itemLabelGroup,Vpe),this.highlightTargetSelection=zpe.select(this.highlightTargetGroup,(e=>this.markerFactory(e))),this.nodeDatum={series:this,datum:{}},this.animationState=new Tpe("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.itemGroup.pointerEvents=Gpe.None,this.itemTargetLabelGroup.pointerEvents=Gpe.None,this.itemLabelGroup.pointerEvents=Gpe.None}get maximumRadius(){return this.properties.outerRadius}get minimumRadius(){return this.properties.outerRadius}get hasData(){return null!=this.properties.value}nodeFactory(){return new _pe}markerFactory(e){let{shape:t}=e;const i=new("line"!==t?Wpe(t):jne);return i.size=1,i}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){return Hne(e,this.axes[Rpe.X])}createConicGradient(e,t){const{centerX:i,centerY:n,radius:o}=this,{domain:s,range:r}=this.axes[Rpe.X].scale,[a,l]=r,{defaultColorRange:d}=this.properties,c=Lpe((a+l)/2+Math.PI),h=Ppe(l-a),u=$ne(e,d,s,t).map((e=>{let{color:t,offset:i}=e;i=Math.min(Math.max(i,0),1);return i=(a+h*i-c)/(2*Math.PI),i=(i%1+1)%1,{offset:i,color:t}}));return new Hpe("oklch",u,Npe(c)-90,new Ope(i-o,n-o,2*o,2*o))}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map((e=>{var i,n,o,s,r,a,l,d,c,h,u,p,g,m,v,f,y;const{text:b=t.text,value:C=(null!==(i=t.value)&&void 0!==i?i:0),shape:x=(null!==(n=t.shape)&&void 0!==n?n:"triangle"),rotation:w=(null!==(o=t.rotation)&&void 0!==o?o:0),strokeWidth:S=(null!==(s=t.strokeWidth)&&void 0!==s?s:0),placement:M=(null!==(r=t.placement)&&void 0!==r?r:"middle"),spacing:D=(null!==(a=t.spacing)&&void 0!==a?a:0),size:k=(null!==(l=t.size)&&void 0!==l?l:0),fill:I=(null!==(d=t.fill)&&void 0!==d?d:"black"),fillOpacity:A=(null!==(c=t.fillOpacity)&&void 0!==c?c:1),stroke:T=(null!==(h=t.stroke)&&void 0!==h?h:"black"),strokeOpacity:E=(null!==(u=t.strokeOpacity)&&void 0!==u?u:1),lineDash:R=(null!==(p=t.lineDash)&&void 0!==p?p:[0]),lineDashOffset:L=(null!==(g=t.lineDashOffset)&&void 0!==g?g:0)}=e,{enabled:P=t.label.enabled,color:N=(null!==(m=t.label.color)&&void 0!==m?m:"black"),fontStyle:F=(null!==(v=t.label.fontStyle)&&void 0!==v?v:"normal"),fontWeight:O=(null!==(f=t.label.fontWeight)&&void 0!==f?f:"normal"),fontSize:B=t.label.fontSize,fontFamily:G=t.label.fontFamily,spacing:z=(null!==(y=t.label.spacing)&&void 0!==y?y:0)}=e.label;return{text:b,value:C,shape:x,placement:M,spacing:D,size:k,rotation:w,fill:I,fillOpacity:A,stroke:T,strokeWidth:S,strokeOpacity:E,lineDash:R,lineDashOffset:L,label:{enabled:P,color:N,fontStyle:F,fontWeight:O,fontSize:B,fontFamily:G,spacing:z}}}))}getTargetRadius(e){const{radius:t,properties:i}=this,{innerRadiusRatio:n,outerRadiusRatio:o}=i,{placement:s,spacing:r,size:a}=e,l=t*o,d=t*n;switch(s){case"inside":return Math.max(d-r-a/2,0);case"outside":return l+r+a/2;default:return(d+l)/2}}getTargetLabel(e){const t=this.axes[Rpe.X].scale,{value:i,size:n,placement:o,label:s}=e,{spacing:r,color:a,fontStyle:l,fontWeight:d,fontSize:c,fontFamily:h}=s,u=t.convert(i),p=Lpe(u)/(Math.PI/2)|0,g=n/2+r;let m,v,f,y;switch(o){case"outside":({textAlign:m,textBaseline:v}=Upe[p]),f=g*Math.cos(u),y=g*Math.sin(u);break;case"inside":({textAlign:m,textBaseline:v}=Kpe[p]),f=-g*Math.cos(u),y=-g*Math.sin(u);break;default:m="center",v="bottom",f=0,y=-g}return{offsetX:f,offsetY:y,fill:a,textAlign:m,textBaseline:v,fontStyle:l,fontWeight:d,fontSize:c,fontFamily:h,lineHeight:void 0}}createNodeData(){var e,t,i;const{id:n,properties:o,radius:s,centerX:r,centerY:a}=this;if(!o.isValid())return;const l=this.axes[Rpe.X];if(null==l)return;const{value:d,innerRadiusRatio:c,outerRadiusRatio:h,segmentation:u,cornerRadius:p,cornerMode:g,needle:m,bar:v,scale:f,label:y,secondaryLabel:b}=o,{outerRadius:C=s*h,innerRadius:x=s*c}=o,w=this.getTargets(),{domain:S}=l.scale,M=[],D=[],k=[],I=[],A=[],[T,E]=l.range,R=l.scale,L="item"===g,P=R.convert(S[0]),N=R.convert(d),F=Math.ceil(Ppe(N-P)*s);let O=u.enabled?u.interval.getSegments(l.scale,F):void 0;const B=null!==(e=v.fill)&&void 0!==e?e:this.createConicGradient(v.fills,v.fillMode),G=null!==(t=null!==(i=f.fill)&&void 0!==i?i:v.enabled&&0===f.fills.length?f.defaultFill:void 0)&&void 0!==t?t:this.createConicGradient(f.fills,f.fillMode);if(null==O&&L){const[e,t]=S,i={value:d,segmentStart:e,segmentEnd:t},n=Math.min(p,(C-x)/2)/((x+C)/2);v.enabled&&M.push({series:this,itemId:"value",datum:i,type:0,centerX:r,centerY:a,outerRadius:C,innerRadius:x,startAngle:P-n,endAngle:N+n,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:p,endCornerRadius:p,fill:B}),A.push({series:this,itemId:"scale",datum:i,type:0,centerX:r,centerY:a,outerRadius:C,innerRadius:x,startAngle:T-n,endAngle:E+n,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:p,endCornerRadius:p,fill:G})}else{var z;null!==(z=O)&&void 0!==z||(O=S);for(let e=0;e<O.length-1;e++){const t=O[e],i=O[e+1],n={value:d,segmentStart:t,segmentEnd:i},o=0===e,s=e===O.length-2,l=R.convert(t),c=R.convert(i);v.enabled&&M.push({series:this,itemId:"value-".concat(e),datum:n,type:0,centerX:r,centerY:a,outerRadius:C,innerRadius:x,startAngle:l,endAngle:c,clipStartAngle:P,clipEndAngle:N,startCornerRadius:L||o?p:0,endCornerRadius:L||s?p:0,fill:B}),A.push({series:this,itemId:"scale-".concat(e),datum:n,type:0,centerX:r,centerY:a,outerRadius:C,innerRadius:x,startAngle:l,endAngle:c,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:L||o?p:0,endCornerRadius:L||s?p:0,fill:G})}}if(!m.enabled&&y.enabled){const{text:e,color:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:s,fontFamily:l,lineHeight:c,formatter:h=e=>this.formatLabel(e.value)}=y;I.push({label:"primary",centerX:r,centerY:a,text:e,value:d,fill:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:s,fontFamily:l,lineHeight:c,formatter:h})}if(!m.enabled&&b.enabled){const{text:e,color:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:s,fontFamily:l,lineHeight:c,formatter:h}=b;I.push({label:"secondary",centerX:r,centerY:a,text:e,value:d,fill:t,fontSize:i,minimumFontSize:n,fontStyle:o,fontWeight:s,fontFamily:l,lineHeight:c,formatter:h})}if(m.enabled){let e=null!=m.radiusRatio?s*m.radiusRatio:x;e=Math.max(e-m.spacing,0);const t=R.convert(d);k.push({centerX:r,centerY:a,radius:e,angle:t})}for(let _=0;_<w.length;_+=1){const e=w[_],{value:t,text:i,size:n,shape:o,fill:s,fillOpacity:l,stroke:d,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:p}=e;if(t<Math.min(...S)||t>Math.max(...S))continue;const g=this.getTargetRadius(e),m=R.convert(t),v=Fpe(e.rotation+jpe[e.placement]);D.push({series:this,itemId:"target-".concat(_),midPoint:{x:g*Math.cos(m)+r,y:g*Math.sin(m)+a},datum:{value:t},type:1,value:t,text:i,centerX:r,centerY:a,shape:o,radius:g,angle:m,rotation:v,size:n,fill:s,fillOpacity:l,stroke:d,strokeOpacity:h,strokeWidth:c,lineDash:u,lineDashOffset:p,label:this.getTargetLabel(e)})}return{itemId:n,nodeData:M,needleData:k,targetData:D,labelData:I,scaleData:A}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(null!=e&&e.series===this&&1===e.type)return e}update(e){var t,i,n,o,s,r,a,l,d,c;let{seriesRect:h}=e;const{datumSelection:u,labelSelection:p,needleSelection:g,targetSelection:m,targetLabelSelection:v,scaleSelection:f,highlightTargetSelection:y}=this,b=this.checkResize(h);this.updateSelections(b),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const C=null!==(t=null===(i=this.contextNodeData)||void 0===i?void 0:i.nodeData)&&void 0!==t?t:[],x=null!==(n=null===(o=this.contextNodeData)||void 0===o?void 0:o.labelData)&&void 0!==n?n:[],w=null!==(s=null===(r=this.contextNodeData)||void 0===r?void 0:r.needleData)&&void 0!==s?s:[],S=null!==(a=null===(l=this.contextNodeData)||void 0===l?void 0:l.targetData)&&void 0!==a?a:[],M=null!==(d=null===(c=this.contextNodeData)||void 0===c?void 0:c.scaleData)&&void 0!==d?d:[],D=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:M,scaleSelection:f}),this.updateScaleNodes({scaleSelection:f}),this.needleSelection=this.updateNeedleSelection({needleData:w,needleSelection:g}),this.updateNeedleNodes({needleSelection:g}),this.targetSelection=this.updateTargetSelection({targetData:S,targetSelection:m}),this.updateTargetNodes({targetSelection:m,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:S,targetLabelSelection:v}),this.updateTargetLabelNodes({targetLabelSelection:v}),this.datumSelection=this.updateDatumSelection({nodeData:C,datumSelection:u}),this.updateDatumNodes({datumSelection:u}),this.labelSelection=this.updateLabelSelection({labelData:x,labelSelection:p}),this.updateLabelNodes({labelSelection:p}),this.highlightTargetSelection=this.updateTargetSelection({targetData:null!=D?[D]:[],targetSelection:y}),this.updateTargetNodes({targetSelection:y,isHighlight:!0}),b&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(t=>Epe(e.nodeData.length,t.itemId)))}updateDatumNodes(e){var t;const{datumSelection:i}=e,{ctx:n,properties:o}=this,{bar:s,segmentation:r}=o,a=null!==(t=r.spacing)&&void 0!==t?t:0,{fillOpacity:l,stroke:d,strokeOpacity:c,lineDash:h,lineDashOffset:u}=s,p=this.getStrokeWidth(s.strokeWidth),g=n.animationManager.isSkipped();i.each(((e,t)=>{const{centerX:i,centerY:n,innerRadius:o,outerRadius:s,startCornerRadius:r,endCornerRadius:m,fill:v}=t;e.centerX=i,e.centerY=n,e.innerRadius=o,e.outerRadius=s,e.fill=v,e.fillOpacity=l,e.stroke=d,e.strokeOpacity=c,e.strokeWidth=p,e.lineDash=h,e.lineDashOffset=u,e.startOuterCornerRadius=r,e.startInnerCornerRadius=r,e.endOuterCornerRadius=m,e.endInnerCornerRadius=m,e.radialEdgeInset=(a+e.strokeWidth)/2,e.concentricEdgeInset=e.strokeWidth/2,(g||null==e.previousDatum)&&e.setProperties(Spe(0,t))}))}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,(t=>Epe(e.scaleData.length,t.itemId)))}updateScaleNodes(e){var t;const{scaleSelection:i}=e,{scale:n,segmentation:o}=this.properties,s=null!==(t=o.spacing)&&void 0!==t?t:0,{fillOpacity:r,stroke:a,strokeOpacity:l,strokeWidth:d,lineDash:c,lineDashOffset:h}=n;i.each(((e,t)=>{const{centerX:i,centerY:n,innerRadius:o,outerRadius:u,startCornerRadius:p,endCornerRadius:g,fill:m}=t;e.centerX=i,e.centerY=n,e.innerRadius=o,e.outerRadius=u,e.fill=m,e.fillOpacity=r,e.stroke=a,e.strokeOpacity=l,e.strokeWidth=d,e.lineDash=c,e.lineDashOffset=h,e.startOuterCornerRadius=p,e.startInnerCornerRadius=p,e.endOuterCornerRadius=g,e.endInnerCornerRadius=g,e.radialEdgeInset=(s+e.strokeWidth)/2,e.concentricEdgeInset=e.strokeWidth/2,e.setProperties(Spe(0,t))}))}updateNeedleSelection(e){return e.needleSelection.update(e.needleData,void 0,(()=>Epe([])))}updateNeedleNodes(e){const{needleSelection:t}=e,{fill:i,fillOpacity:n,stroke:o,strokeOpacity:s,strokeWidth:r,lineDash:a,lineDashOffset:l}=this.properties.needle,d=this.ctx.animationManager.isSkipped();t.each(((e,t)=>{const{centerX:c,centerY:h,radius:u}=t,p=2*u;e.d=Wue.defaultPathData,e.fill=i,e.fillOpacity=n,e.stroke=o,e.strokeOpacity=s,e.strokeWidth=r/p,e.lineDash=a.map((e=>e/p)),e.lineDashOffset=l/p,e.translationX=c,e.translationY=h,e.scalingX=p,e.scalingY=p,d&&e.setProperties(Mpe(0,t))}))}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,(e=>e.itemId))}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e,n=i?this.properties.highlightStyle.item:void 0;t.each(((e,t)=>{var i,o,s,r,a,l,d;const{centerX:c,centerY:h,angle:u,radius:p,size:g,rotation:m,fill:v,fillOpacity:f,stroke:y,strokeOpacity:b,strokeWidth:C,lineDash:x,lineDashOffset:w}=t;e.size=g,e.fill=null!==(i=null===n||void 0===n?void 0:n.fill)&&void 0!==i?i:v,e.fillOpacity=null!==(o=null===n||void 0===n?void 0:n.fillOpacity)&&void 0!==o?o:f,e.stroke=null!==(s=null===n||void 0===n?void 0:n.stroke)&&void 0!==s?s:y,e.strokeOpacity=null!==(r=null===n||void 0===n?void 0:n.strokeOpacity)&&void 0!==r?r:b,e.strokeWidth=null!==(a=null===n||void 0===n?void 0:n.strokeWidth)&&void 0!==a?a:C,e.lineDash=null!==(l=null===n||void 0===n?void 0:n.lineDash)&&void 0!==l?l:x,e.lineDashOffset=null!==(d=null===n||void 0===n?void 0:n.lineDashOffset)&&void 0!==d?d:w,e.translationX=c+p*Math.cos(u),e.translationY=h+p*Math.sin(u),e.rotation=u+m}))}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData,void 0,(e=>e.itemId))}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each(((e,t)=>{const{centerX:i,centerY:n,radius:o,angle:s,text:r}=t,{offsetX:a,offsetY:l,fill:d,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:p,textAlign:g,textBaseline:m}=t.label;null!=r?(e.visible=!0,e.x=i+o*Math.cos(s)+a,e.y=n+o*Math.sin(s)+l,e.text=r,e.fill=d,e.fontStyle=c,e.fontWeight=h,e.fontSize=u,e.fontFamily=p,e.textAlign=g,e.textBaseline=m):e.visible=!1}))}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,(e=>e.label))}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each(((e,t)=>{e.fill=t.fill,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontFamily=t.fontFamily})),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(null==e.text)return!1;return!0}formatLabelText(e){if(null==this.axes[Rpe.X])return;const{labelSelection:t,radius:i,textAlign:n,verticalAlign:o}=this,{spacing:s,innerRadiusRatio:r}=this.properties;!function(e,t,i,n,o){const{padding:s,textAlign:r,verticalAlign:a}=i;let l,d;if(t.each(((e,t)=>{"primary"===t.label?l=t:"secondary"===t.label&&(d=t)})),null==l)return;const c=Wne(e,l,null===o||void 0===o?void 0:o.label);if(null==c)return;const h=null!=d?Wne(e,d,null===o||void 0===o?void 0:o.secondaryLabel):void 0,u={padding:s},p="center"===r?2:1,g="middle"===a?2:1,m=e=>({width:Math.sqrt(Math.max(n**2-(e/g)**2,0))*p,height:Math.min(e,g*n),meta:null});let v,f,y;if(null!=d&&null!=h){var b;const e=Pie(c,l,h,d,u,m);v=null===e||void 0===e?void 0:e.label,f=null===e||void 0===e?void 0:e.secondaryLabel,y=null!==(b=null===e||void 0===e?void 0:e.height)&&void 0!==b?b:0}else{var C;const e=Nie(c,l,u,m);v=null===e||void 0===e?void 0:e[0],f=void 0,y=null!==(C=null===e||void 0===e?void 0:e[0].height)&&void 0!==C?C:0}const x=y*Dpe[a];t.each(((e,t)=>{let i;if("primary"===t.label?i=v:"secondary"===t.label&&(i=f),null==i)return void(e.visible=!1);e.visible=!0,e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.textAlign=r,e.textBaseline="middle";const n="primary"===t.label?i.height/2:y-i.height/2;e.y=t.centerY+n-x,e.x=t.centerX}))}(this,t,{padding:s,textAlign:n,verticalAlign:o},i*r,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Ipe([this.datumSelection],Spe),Ipe([this.needleSelection],Mpe),this.formatLabelText()}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}animateLabelText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{animationManager:t}=this.ctx;let i,n,o,s;if(this.labelSelection.each(((t,r)=>{var a,l,d;if(t.opacity=1,"primary"===r.label)i=null!==(a=null!==(l=null===(d=t.previousDatum)||void 0===d?void 0:d.value)&&void 0!==l?l:e.from)&&void 0!==a?a:r.value,n=r.value;else if("secondary"===r.label){var c,h,u;o=null!==(c=null!==(h=null===(u=t.previousDatum)||void 0===u?void 0:u.value)&&void 0!==h?h:e.from)&&void 0!==c?c:r.value,s=r.value}})),this.labelsHaveExplicitText());else if(null==n||null==s)this.formatLabelText();else if(i===n&&o===s)this.formatLabelText({label:n,secondaryLabel:s});else{var r;const a="".concat(this.id,"_labels");t.animate({id:a,groupId:"label",from:{label:i,secondaryLabel:o},to:{label:n,secondaryLabel:s},phase:null!==(r=e.phase)&&void 0!==r?r:"update",onUpdate:e=>this.formatLabelText(e)})}}animateEmptyUpdateReady(){var e,t,i,n;const{animationManager:o}=this.ctx,{node:s,needle:r}=wpe(!0,null!==(e=null===(t=this.axes[Rpe.X])||void 0===t?void 0:t.range[0])&&void 0!==e?e:0);kpe(this.id,"node",o,[this.datumSelection],s,((e,t)=>t.itemId)),kpe(this.id,"needle",o,[this.needleSelection],r,(()=>"needle")),kpe(this.id,"label",o,[this.labelSelection],Vne,((e,t)=>t.label)),this.animateLabelText({from:null!==(i=null===(n=this.axes[Rpe.X])||void 0===n?void 0:n.scale.domain[0])&&void 0!==i?i:0,phase:"initial"})}animateWaitingUpdateReady(){var e,t;const{animationManager:i}=this.ctx,{node:n,needle:o}=wpe(!1,null!==(e=null===(t=this.axes[Rpe.X])||void 0===t?void 0:t.range[0])&&void 0!==e?e:0);kpe(this.id,"node",i,[this.datumSelection],n,((e,t)=>t.itemId)),kpe(this.id,"needle",i,[this.needleSelection],o,(()=>"needle")),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}pickNode(e,t){switch(t){case"event":case"context-menu":{const t=this.scaleGroup.pickNode(e.x,e.y);return null!=t?{pickMode:mW.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:t.datum,distance:0}:void 0}case"tooltip":case"highlight":case"highlight-tooltip":{const t=this.itemTargetGroup.pickNode(e.x,e.y);return null!=t?{pickMode:mW.SeriesNodePickMode.EXACT_SHAPE_MATCH,match:t.datum,distance:0}:{pickMode:mW.SeriesNodePickMode.NEAREST_NODE,match:this.nodeDatum,distance:0}}}}getTooltipContent(e){var t;const{id:i,properties:n}=this,{tooltip:o}=n;if(!n.isValid())return;const s=this.highlightDatum(e),r=null!==(t=null===s||void 0===s?void 0:s.value)&&void 0!==t?t:n.value,a=null===s||void 0===s?void 0:s.text;return o.formatTooltip({data:[{label:null!==a&&void 0!==a?a:"",value:this.formatLabel(r)}]},{seriesId:i,title:void 0,datum:void 0,value:r})}pickFocus(e){var t;const i=null===(t=this.contextNodeData)||void 0===t?void 0:t.targetData;if(null==i||0===i.length)return;const n=Math.min(Math.max(e.datumIndex,0),i.length-1),o=i[n];for(const s of this.targetSelection)if(s.datum===o){return{bounds:s.node,showFocusBox:!0,clipFocusBox:!0,datum:o,datumIndex:n}}}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),this.labelSelection.each(((e,i)=>{const n=Wne(this,i);null!=n&&t.push(n)})),t.join(". ")}};Ype.className="RadialGaugeSeries",Ype.type="radial-gauge";var{ThemeSymbols:{DEFAULT_FONT_FAMILY:Zpe,DEFAULT_HIERARCHY_FILLS:Xpe,DEFAULT_LABEL_COLOUR:qpe,DEFAULT_MUTED_LABEL_COLOUR:Qpe,DEFAULT_GAUGE_SERIES_COLOR_RANGE:Jpe},ThemeConstants:{POLAR_AXIS_TYPE:$pe}}=mW,ege={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"radial-gauge",moduleFactory:e=>new Ype(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:$pe.ANGLE_NUMBER,line:{enabled:!1}},{type:$pe.RADIUS_NUMBER,line:{enabled:!1}}],themeTemplate:{minWidth:200,minHeight:200,series:{outerRadiusRatio:1,innerRadiusRatio:.8,bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:qpe,stroke:qpe,size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:Zpe,color:qpe,spacing:5}},needle:{enabled:!1,fill:qpe,spacing:10},label:{enabled:!0,fontWeight:"normal",fontSize:56,minimumFontSize:18,fontFamily:Zpe,color:qpe},secondaryLabel:{enabled:!0,fontWeight:"normal",fontSize:14,minimumFontSize:12,fontFamily:Zpe,color:Qpe},tooltip:{enabled:!1}},axes:{[$pe.ANGLE_NUMBER]:{startAngle:270,endAngle:450,nice:!1,line:{enabled:!1}}}},paletteFactory(e){const{takeColors:t,colorsCount:i,userPalette:n,themeTemplateParameters:o}=e,{fills:s}=t(i),r=o.get(Jpe),a=o.get(Xpe),l="inbuilt"===n?r:[s[0],s[1]];return{scale:{defaultFill:null===a||void 0===a?void 0:a[1],stroke:null===a||void 0===a?void 0:a[2]},defaultColorRange:_ne(l)}}};function tge(e,t,i,n,o,s){const r=e[s];if(null==r)return!1;return s===n[N8(P8(r,t,i),o)+3]}function ige(e,t,i,n,o,s){const r=e[s];if(null==r)return!1;return s===n[N8(P8(r,t,i),o)+2]}var{CartesianSeriesProperties:nge,InterpolationProperties:oge,SeriesMarker:sge,SeriesTooltip:rge,Validate:age,BOOLEAN:lge,COLOR_STRING:dge,LINE_DASH:cge,OBJECT:hge,PLACEMENT:uge,POSITIVE_NUMBER:pge,RATIO:gge,STRING:mge,DropShadow:vge,Label:fge}=mW,yge=class extends fge{constructor(){super(...arguments),this.placement="outside",this.padding=6}};dj([age(uge)],yge.prototype,"placement",2),dj([age(pge)],yge.prototype,"padding",2);var bge=class extends nge{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new oge,this.shadow=(new vge).set({enabled:!1}),this.marker=new sge,this.label=new yge,this.tooltip=new rge,this.connectMissingData=!1}};dj([age(mge)],bge.prototype,"xKey",2),dj([age(mge)],bge.prototype,"yLowKey",2),dj([age(mge)],bge.prototype,"yHighKey",2),dj([age(mge,{optional:!0})],bge.prototype,"xName",2),dj([age(mge,{optional:!0})],bge.prototype,"yName",2),dj([age(mge,{optional:!0})],bge.prototype,"yLowName",2),dj([age(mge,{optional:!0})],bge.prototype,"yHighName",2),dj([age(dge)],bge.prototype,"fill",2),dj([age(gge)],bge.prototype,"fillOpacity",2),dj([age(dge)],bge.prototype,"stroke",2),dj([age(pge)],bge.prototype,"strokeWidth",2),dj([age(gge)],bge.prototype,"strokeOpacity",2),dj([age(cge)],bge.prototype,"lineDash",2),dj([age(pge)],bge.prototype,"lineDashOffset",2),dj([age(hge)],bge.prototype,"interpolation",2),dj([age(hge)],bge.prototype,"shadow",2),dj([age(hge)],bge.prototype,"marker",2),dj([age(hge)],bge.prototype,"label",2),dj([age(hge)],bge.prototype,"tooltip",2),dj([age(lge)],bge.prototype,"connectMissingData",2);var{CollapseMode:Cge,isScaleValid:xge,pairUpSpans:wge,prepareAreaFillAnimationFns:Sge,plotInterpolatedLinePathStroke:Mge,prepareLinePathPropertyAnimation:Dge,areScalingEqual:kge}=mW;function Ige(e,t,i){var n,o,s;if("category"===(null===(n=e.scales.x)||void 0===n?void 0:n.type)!==("category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type))||!xge(e.scales.x)||!xge(t.scales.x))return;let r="updated";t.visible&&!e.visible?r="removed":!t.visible&&e.visible&&(r="added");const a=wge({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},Cge.Split);if(null==a)return;const l=wge({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},Cge.Split);if(null==l)return;const d=wge({scales:e.scales,data:e.highStrokeData.spans},{scales:t.scales,data:t.highStrokeData.spans},Cge.Split);if(null==d)return;const c=wge({scales:e.scales,data:e.lowStrokeData.spans},{scales:t.scales,data:t.lowStrokeData.spans},Cge.Split);if(null==c)return;const h="fade",u=Sge(r,a,l,h),p=function(e,t,i,n){return{status:e,path:{addPhaseFn:(e,n)=>{Mge(e,n,t.added),Mge(e,n,i.added)},updatePhaseFn:(e,n)=>{Mge(e,n,t.moved),Mge(e,n,i.moved)},removePhaseFn:(e,n)=>{Mge(e,n,t.removed),Mge(e,n,i.removed)}},pathProperties:Dge(e,n)}}(r,d,c,h);return{status:r,fill:u,stroke:p,hasMotion:null===(s=null===i||void 0===i?void 0:i.changed)||void 0===s||s||!kge(e.scales.x,t.scales.x)||!kge(e.scales.y,t.scales.y)||"updated"!==r}}var{valueProperty:Age,keyProperty:Tge,ChartAxisDirection:Ege,mergeDefaults:Rge,updateLabelNode:Lge,fixNumericExtent:Pge,buildResetPathFn:Nge,resetLabelFn:Fge,resetMarkerFn:Oge,resetMarkerPositionFn:Bge,pathSwipeInAnimation:Gge,resetMotion:zge,markerSwipeScaleInAnimation:_ge,seriesLabelFadeInAnimation:Vge,animationValidation:Hge,diff:Wge,updateClipPath:jge,computeMarkerFocusBounds:Uge,plotAreaPathFill:Kge,plotLinePathStroke:Yge,interpolatePoints:Zge,pathFadeInAnimation:Xge,markerFadeInAnimation:qge,fromToMotion:Qge,pathMotion:Jge,extent:$ge,getMarker:eme,visibleRangeIndices:tme,createDatumId:ime,PointerEvents:nme,Group:ome,BBox:sme,ContinuousScale:rme,OrdinalTimeScale:ame}=mW,lme=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yLowKey=n.properties.yLowKey,this.yHighKey=n.properties.yHighKey}},dme=class extends mW.CartesianSeries{constructor(e){super({moduleCtx:e,hasMarkers:!0,pathsPerSeries:["fill","stroke"],pickModes:[mW.SeriesNodePickMode.AXIS_ALIGNED],directionKeys:{[Ege.X]:["xKey"],[Ege.Y]:["yLowKey","yHighKey"]},directionNames:{[Ege.X]:["xName"],[Ege.Y]:["yLowName","yHighName","yName"]},animationResetFns:{path:Nge({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Fge,marker:(e,t)=>l(l({},Oge(e)),Bge(e,t))}}),this.properties=new bge,this.NodeEvent=lme,this.dataAggregationFilters=void 0}async processData(e){var t,i;if(!this.properties.isValid())return;const{xKey:n,yLowKey:o,yHighKey:s}=this.properties,r=null===(t=this.axes[Ege.X])||void 0===t?void 0:t.scale,a=null===(i=this.axes[Ege.Y])||void 0===i?void 0:i.scale,{xScaleType:l,yScaleType:d}=this.getScaleInformation({xScale:r,yScale:a}),c=[],h=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&c.push(Wge(this.id,this.processedData)),h&&c.push(Hge());const{dataModel:u,processedData:p}=await this.requestDataModel(e,this.data,{props:[Tge(n,l,{id:"xValue"}),Age(o,d,{id:"yLowValue"}),Age(s,d,{id:"yHighValue"}),...c]});this.dataAggregationFilters=this.aggregateData(u,p),this.animationState.transition("updateData")}aggregateData(e,t){if(0===t.rawData.length)return;const i=this.axes[Ege.X];if(null==i||!rme.is(i.scale)&&!ame.is(i.scale))return;const n=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),s=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue");return function(e,t,i,n){if(e.length<1e3)return;const[o,s]=L8(n);let r=R8(e);const{indexData:a,valueData:l}=F8(e,t,i,o,s,r);let d=[],c=[];for(let u=0;u<e.length;u+=1)tge(e,o,s,a,r,u)&&d.push(u),ige(e,o,s,a,r,u)&&c.push(u);const h=[{maxRange:r,topIndices:d,bottomIndices:c}];for(;r>64;)({maxRange:r}=O8(a,l,r,{inPlace:!0})),d=d.filter(tge.bind(null,e,o,s,a,r)),c=c.filter(ige.bind(null,e,o,s,a,r)),h.push({maxRange:r,topIndices:d,bottomIndices:c});return h.reverse(),h}(n,o,s,t.domain.keys[r])}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{domain:{keys:[n],values:o}}=t;if(e===Ege.X){const e=i.resolveProcessedDataDefById(this,"xValue");return"key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===e.def.valueType?n:Pge($ge(n))}{const e=o[i.resolveProcessedDataIndexById(this,"yLowValue")],t=o[i.resolveProcessedDataIndexById(this,"yHighValue")],n=[e[0]>t[0]?t[0]:e[0],t[1]<e[1]?e[1]:t[1]];return Pge(n)}}visibleRangeIndices(e,t){var i;const{dataModel:n,processedData:o}=this;if(!n||!o)return[0,0];const s=this.axes[Ege.X].scale,r=n.resolveKeysById(this,"xValue",o);return tme(null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:r.length,e,(e=>{var i;const n=s.convert(r[null!==(i=null===t||void 0===t?void 0:t[e])&&void 0!==i?i:e]);return[n,n]}))}getSeriesRange(e,t){const{dataModel:i,processedData:n}=this;if(!i||!n)return[NaN,NaN];const[o,s]=this.visibleRangeIndices(t);return i.getDomainBetweenRange(this,["yLowValue","yHighValue"],[o,s],n)}createNodeData(){var e,t;const{data:i,dataModel:n,processedData:o,axes:s}=this,r=s[Ege.X],a=s[Ege.Y];if(!(i&&r&&a&&n&&null!=o&&0!==o.rawData.length))return;const l=r.scale,d=a.scale,{xKey:c,yLowKey:h,yHighKey:u,connectMissingData:p,marker:g,interpolation:m}=this.properties,{rawData:v}=o,f=(null!==(e=l.bandwidth)&&void 0!==e?e:0)/2,y=n.resolveKeysById(this,"xValue",o),b=n.resolveColumnById(this,"yHighValue",o),C=n.resolveColumnById(this,"yLowValue",o),x=[],w=[],S=[],M=(e,t,i)=>{const n=v[e],o=y[e];if(null==o)return;const s=S[S.length-1];if(Number.isFinite(t)&&Number.isFinite(i)){const a=(s,r,a)=>{w.push({index:e,series:this,itemId:s,datum:n,datumIndex:e,midPoint:{x:m,y:a},yHighValue:t,yLowValue:i,xValue:o,xKey:c,yLowKey:h,yHighKey:u,point:{x:m,y:a,size:C},enabled:!0});const l=this.createLabelData({point:{x:m,y:a},value:r,yLowValue:i,yHighValue:t,itemId:s,inverted:p,datum:n,series:this});x.push(l)},p=i>t,m=(r=e,l.convert(y[r])+f),v=d.convert(t),b=d.convert(i),{size:C}=g;a("high",t,v),a("low",i,b);const M={high:{point:{x:m,y:v},xDatum:o,yDatum:t},low:{point:{x:m,y:b},xDatum:o,yDatum:i}};Array.isArray(s)?s.push(M):null!=s?(s.skip+=1,S.push([M])):S.push([M])}else p||(Array.isArray(s)||null==s?S.push({skip:0}):s.skip+=1);var r},{dataAggregationFilters:D}=this,[k,I]=l.range,A=I-k,T=null===D||void 0===D?void 0:D.find((e=>e.maxRange>A)),E=null===T||void 0===T?void 0:T.topIndices,R=null===T||void 0===T?void 0:T.bottomIndices;let[L,P]=this.visibleRangeIndices(r.range,E);L=Math.max(L-1,0),P=Math.min(P+1,null!==(t=null===E||void 0===E?void 0:E.length)&&void 0!==t?t:y.length),o.rawData.length<1e3&&(L=0,P=o.rawData.length);for(let G=L;G<P;G+=1){var N,F;const e=null!==(N=null===E||void 0===E?void 0:E[G])&&void 0!==N?N:G,t=null!==(F=null===R||void 0===R?void 0:R[G])&&void 0!==F?F:G;M(e,b[e],C[t])}const O=S.flatMap((e=>{if(!Array.isArray(e))return[];const t=e.map((e=>e.high));return Zge(t,m)})),B=S.flatMap((e=>{if(!Array.isArray(e))return[];const t=e.map((e=>e.low));return Zge(t,m)}));return{itemId:"".concat(h,"-").concat(u),labelData:x,nodeData:w,fillData:{itemId:"high",spans:O,phantomSpans:B},highStrokeData:{itemId:"high",spans:O},lowStrokeData:{itemId:"low",spans:B},scales:this.calculateScaling(),visible:this.visible}}createLabelData(e){let{point:t,value:i,itemId:n,inverted:o,datum:s,series:r}=e;const{xKey:a,yLowKey:l,yHighKey:d,xName:c,yName:h,yLowName:u,yHighName:p,label:g}=this.properties,{placement:m,padding:v=10}=g;let f=n;o&&(f="low"===n?"high":"low");const y="outside"===m&&"high"===f||"inside"===m&&"low"===f?-1:1;return{x:t.x,y:t.y+v*y,series:r,itemId:n,datum:s,text:this.getLabelText(g,{value:i,datum:s,itemId:n,xKey:a,yLowKey:l,yHighKey:d,xName:c,yLowName:u,yHighName:p,yName:h}),textAlign:"center",textBaseline:-1===y?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(eme(e))}updatePathNodes(e){const{opacity:t,visible:i,animationEnabled:n}=e,[o,s]=e.paths,r=this.getStrokeWidth(this.properties.strokeWidth);s.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:nme.None,stroke:this.properties.stroke,strokeWidth:r,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i||n}),o.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:nme.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:r,opacity:t,visible:i||n}),jge(this,s),jge(this,o)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty()}updateFillPath(e,t){const[i]=e;i.path.clear(),Kge(i,t.fillData),i.markDirty()}updateStrokePath(e,t){const[,i]=e;i.path.clear(),Yge(i,t.highStrokeData.spans),Yge(i,t.lowStrokeData.spans),i.markDirty()}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}getMarkerItemBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,{marker:a}=r,l=e?r.highlightStyle.item:void 0,d=this.getStrokeWidth(a.strokeWidth);return{size:a.size,fill:null!==(t=null===l||void 0===l?void 0:l.fill)&&void 0!==t?t:a.fill,fillOpacity:null!==(i=null===l||void 0===l?void 0:l.fillOpacity)&&void 0!==i?i:a.fillOpacity,stroke:null!==(n=null===l||void 0===l?void 0:l.stroke)&&void 0!==n?n:a.stroke,strokeWidth:null!==(o=null===l||void 0===l?void 0:l.strokeWidth)&&void 0!==o?o:d,strokeOpacity:null!==(s=null===l||void 0===l?void 0:l.strokeOpacity)&&void 0!==s?s:a.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{xKey:r,yHighKey:a,yLowKey:d,marker:c}=s,{itemStyler:h}=c;if(null!=h)return this.cachedDatumCallback(ime(e,n?"highlight":"node"),(()=>h(l({seriesId:o,datum:t,xKey:r,yHighKey:a,yLowKey:d,highlighted:n},i))))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yLowKey:o,yHighKey:s,marker:r,fill:a,stroke:l,strokeWidth:d,fillOpacity:c,strokeOpacity:h}=this.properties,u=Rge(i&&this.properties.highlightStyle.item,r.getStyle(),{fill:a,fillOpacity:c,stroke:l,strokeWidth:d,strokeOpacity:h});t.each(((e,t)=>{this.updateMarkerStyle(e,r,{datum:t,highlighted:i,xKey:n,yHighKey:s,yLowKey:o},u)})),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,(e=>{e.pointerEvents=nme.None}))}updateLabelNodes(e){e.labelSelection.each(((e,t)=>{Lge(e,this.properties.label,t)}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}getHighlightData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:o,properties:s}=this,{xName:r,yName:a,yLowKey:d,yLowName:c,xKey:h,yHighKey:u,yHighName:p,tooltip:g}=s,m=o[Ege.X],v=o[Ege.Y];if(!i||!n||0===n.rawData.length||!m||!v)return;const{datumIndex:f}=e,y=n.rawData[f],b=i.resolveKeysById(this,"xValue",n)[f],C=i.resolveColumnById(this,"yHighValue",n)[f],x=i.resolveColumnById(this,"yLowValue",n)[f];if(null==b)return;const w=this.getMarkerItemBaseStyle(!1);Object.assign(w,this.getMarkerItemStyleOverrides(String(f),f,w,!1));const S="".concat(v.formatDatum(x)," - ").concat(v.formatDatum(C));return g.formatTooltip({heading:m.formatDatum(b),symbol:this.legendItemSymbol(),data:[{label:a,fallbackLabel:"".concat(null!==c&&void 0!==c?c:d," - ").concat(p),value:S}]},l({seriesId:t,datum:y,title:a,itemId:e.itemId,xName:r,yName:a,yLowKey:d,yLowName:c,xKey:h,yHighKey:u,yHighName:p},w))}legendItemSymbol(){var e,t;const{fill:i,stroke:n,strokeWidth:o,strokeOpacity:s,lineDash:r,marker:a}=this.properties;return{marker:{shape:a.shape,fill:null!==(e=a.fill)&&void 0!==e?e:i,stroke:null!==(t=a.stroke)&&void 0!==t?t:n,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth},line:{stroke:n,strokeOpacity:s,strokeWidth:o,lineDash:r}}}getLegendData(e){if("category"!==e)return[];const{id:t,visible:i}=this,{yLowKey:n,yHighKey:o,yName:s,yLowName:r,yHighName:a,showInLegend:l}=this.properties,d=null!==s&&void 0!==s?s:"".concat(null!==r&&void 0!==r?r:n," - ").concat(null!==a&&void 0!==a?a:o);return[{legendType:"category",id:t,itemId:"".concat(n,"-").concat(o),seriesId:t,enabled:i,label:{text:"".concat(d)},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new ome}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:n,paths:o}=e,{animationManager:s}=this.ctx;this.updateAreaPaths(o,n),Gge(this,s,...o),zge([t],Bge),_ge(this,s,t),Vge(this,"labels",s,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t;const{animationManager:i}=this.ctx,{markerSelection:n,labelSelection:o,contextData:s,paths:r,previousContextData:a}=e,[l,d]=r;if(null==l&&null==d)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(r,s)};if(null==s||null==a)return c(),qge(this,i,"added",n),Xge(this,"fill_path_properties",i,"add",l),Xge(this,"stroke_path_properties",i,"add",d),void Vge(this,"labels",i,o);const h=Ige(s,a,null===(t=this.processedData)||void 0===t||null===(t=t.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id]);if(void 0===h)return i.skipCurrentBatch(),void c();"no-op"!==h.status&&(Qge(this.id,"fill_path_properties",i,[l],h.fill.pathProperties),Qge(this.id,"stroke_path_properties",i,[d],h.stroke.pathProperties),"added"===h.status?this.updateAreaPaths(r,s):"removed"===h.status?this.updateAreaPaths(r,a):(Jge(this.id,"fill_path_update",i,[l],h.fill.path),Jge(this.id,"stroke_path_update",i,[d],h.stroke.path)),h.hasMotion&&(qge(this,i,void 0,n),Vge(this,"labels",i,o)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(r,s)}))}getFormattedMarkerStyle(e){const{xKey:t,yLowKey:i,yHighKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yLowKey:i,yHighKey:n,highlighted:!0})}computeFocusBounds(e){const t=Uge(this,e),i=Uge(this,l(l({},e),{},{datumIndex:e.datumIndex+1}));if(t&&i)return sme.merge([t,i])}computeFocusDatumIndex(e,t){const i=l(l({},e),{},{datumIndex:e.datumIndex+e.datumIndexDelta,datumIndexDelta:2*e.datumIndexDelta});return super.computeFocusDatumIndex(i,t)}};dme.className="RangeAreaSeries",dme.type="range-area";var cme={series:{fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:mW.ThemeSymbols.DEFAULT_FONT_FAMILY,color:mW.ThemeSymbols.DEFAULT_LABEL_COLOUR},interpolation:{type:"linear",tension:1,position:"end"}},axes:{[mW.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{markerPaletteFactory:hme,ThemeConstants:{CARTESIAN_AXIS_TYPE:ume,CARTESIAN_POSITION:pme}}=mW,gme={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:e=>new dme(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:ume.NUMBER,position:pme.LEFT},{type:ume.CATEGORY,position:pme.BOTTOM}],themeTemplate:cme,paletteFactory:e=>{const{marker:t}=hme(e);return{fill:t.fill,stroke:t.stroke,marker:t}}};var{AbstractBarSeriesProperties:mme,SeriesTooltip:vme,Validate:fme,COLOR_STRING:yme,FUNCTION:bme,LINE_DASH:Cme,OBJECT:xme,PLACEMENT:wme,POSITIVE_NUMBER:Sme,RATIO:Mme,STRING:Dme,BOOLEAN:kme,DropShadow:Ime,Label:Ame}=mW,Tme=class extends Ame{constructor(){super(...arguments),this.placement="inside",this.padding=6}};dj([fme(wme)],Tme.prototype,"placement",2),dj([fme(Sme)],Tme.prototype,"padding",2);var Eme=class extends mme{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=(new Ime).set({enabled:!1}),this.label=new Tme,this.tooltip=new vme,this.fastDataProcessing=!1}};dj([fme(Dme)],Eme.prototype,"xKey",2),dj([fme(Dme)],Eme.prototype,"yLowKey",2),dj([fme(Dme)],Eme.prototype,"yHighKey",2),dj([fme(Dme,{optional:!0})],Eme.prototype,"xName",2),dj([fme(Dme,{optional:!0})],Eme.prototype,"yName",2),dj([fme(Dme,{optional:!0})],Eme.prototype,"yLowName",2),dj([fme(Dme,{optional:!0})],Eme.prototype,"yHighName",2),dj([fme(yme)],Eme.prototype,"fill",2),dj([fme(Mme)],Eme.prototype,"fillOpacity",2),dj([fme(yme)],Eme.prototype,"stroke",2),dj([fme(Sme)],Eme.prototype,"strokeWidth",2),dj([fme(Mme)],Eme.prototype,"strokeOpacity",2),dj([fme(Cme)],Eme.prototype,"lineDash",2),dj([fme(Sme)],Eme.prototype,"lineDashOffset",2),dj([fme(Sme)],Eme.prototype,"cornerRadius",2),dj([fme(bme,{optional:!0})],Eme.prototype,"itemStyler",2),dj([fme(xme)],Eme.prototype,"shadow",2),dj([fme(xme)],Eme.prototype,"label",2),dj([fme(xme)],Eme.prototype,"tooltip",2),dj([fme(kme)],Eme.prototype,"fastDataProcessing",2);var{SeriesNodePickMode:Rme,valueProperty:Lme,keyProperty:Pme,ChartAxisDirection:Nme,getRectConfig:Fme,updateRect:Ome,checkCrisp:Bme,updateLabelNode:Gme,SMALLEST_KEY_INTERVAL:zme,LARGEST_KEY_INTERVAL:_me,diff:Vme,prepareBarAnimationFunctions:Hme,midpointStartingBarPosition:Wme,resetBarSelectionsFn:jme,fixNumericExtent:Ume,seriesLabelFadeInAnimation:Kme,resetLabelFn:Yme,animationValidation:Zme,computeBarFocusBounds:Xme,visibleRangeIndices:qme,createDatumId:Qme,ContinuousScale:Jme,OrdinalTimeScale:$me,Rect:eve,PointerEvents:tve,motion:ive}=mW,nve=class extends mW.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yLowKey=n.properties.yLowKey,this.yHighKey=n.properties.yHighKey}},ove=class extends mW.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Rme.AXIS_ALIGNED,Rme.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:jme,label:Yme}}),this.properties=new Eme,this.dataAggregationFilters=void 0,this.NodeEvent=nve}async processData(e){var t,i,n,o;if(!this.properties.isValid())return;const{xKey:s,yLowKey:r,yHighKey:a,fastDataProcessing:d}=this.properties,c=!d,h=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,u=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:p,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:h,yScale:u}),v=[];this.ctx.animationManager.isSkipped()||(this.processedData&&v.push(Vme(this.id,this.processedData)),v.push(Zme()));const f=this.visible?{}:{forceValue:0},{dataModel:y,processedData:b}=await this.requestDataModel(e,this.data,{props:[Pme(s,g,{id:"xValue"}),Lme(r,m,l({id:"yLowValue",invalidValue:null},f)),Lme(a,m,l({id:"yHighValue",invalidValue:null},f)),...p?[zme,_me]:[],...v],groupByKeys:c});this.smallestDataInterval=null===(n=b.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.largestDataInterval=null===(o=b.reduced)||void 0===o?void 0:o.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(y,b),this.animationState.transition("updateData")}aggregateData(e,t){if("grouped"!==t.type||0===t.rawData.length)return;const i=this.axes[Nme.X];if(null==i||!Jme.is(i.scale)&&!$me.is(i.scale))return;const n=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),s=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue");return function(e,t,i,n){if(e.length<1e3)return;const[o,s]=L8(n);let r=R8(e,5),{indexData:a,valueData:l}=F8(e,t,i,o,s,r);const d=[{maxRange:r,indexData:a}];for(;r>64;)({indexData:a,valueData:l,maxRange:r}=O8(a,l,r)),d.push({maxRange:r,indexData:a});return d.reverse(),d}(n,o,s,t.domain.keys[r])}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[n],values:o}=t.domain;if(e===this.getCategoryDirection()){const e=i.resolveProcessedDataDefById(this,"xValue");return"key"===(null===e||void 0===e?void 0:e.def.type)&&"category"===(null===e||void 0===e?void 0:e.def.valueType)?n:this.padBandExtent(n)}{const e=o[i.resolveProcessedDataIndexById(this,"yLowValue")],t=o[i.resolveProcessedDataIndexById(this,"yHighValue")],n=[e[0]>t[0]?t[0]:e[0],t[1]<e[1]?e[1]:t[1]];return Ume(n)}}getSeriesRange(e,t){var i;const{dataModel:n,processedData:o}=this;if(!n||!o)return[NaN,NaN];const s=this.axes[Nme.X].scale,r=n.resolveKeysById(this,"xValue",o),a=null!==(i=s.bandwidth)&&void 0!==i?i:0,[l,d]=qme(r.length,t,(e=>{const t=s.convert(r[e]);return[t,t+a]}));return n.getDomainBetweenRange(this,["yHighValue","yLowValue"],[l,d],o)}createNodeData(){const{data:e,dataModel:t,groupScale:i,processedData:n,visible:o}=this,s=this.getCategoryAxis(),r=this.getValueAxis();if(!(e&&s&&r&&t&&null!==n&&void 0!==n&&n.rawData.length))return;const a=s.scale,l=r.scale,d=this.getBarDirection()===Nme.X,{xKey:c,yLowKey:h,yHighKey:u,fill:p,stroke:g,strokeWidth:m}=this.properties,v="".concat(h,"-").concat(u),f={itemId:v,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!o)return f;const{rawData:y}=n,b=t.resolveKeysById(this,"xValue",n),C=t.resolveColumnById(this,"yLowValue",n),x=t.resolveColumnById(this,"yHighValue",n),{barWidth:w,groupIndex:S}=this.updateGroupScale(s),M=Jme.is(a)?-.5*w:0,D=i.convert(String(S)),k=Bme(null===s||void 0===s?void 0:s.scale,null===s||void 0===s?void 0:s.visibleRange,this.smallestDataInterval,this.largestDataInterval),I=e=>Math.round(a.convert(b[e]))+D+M,A=(e,t,i,n,o,s,r)=>{const a=y[e],w=b[e];if(null==w)return;const S=C[e],M=x[e];if(!Number.isFinite(null===S||void 0===S?void 0:S.valueOf())||!Number.isFinite(null===M||void 0===M?void 0:M.valueOf()))return;const[D,k]=S<M?[S,M]:[M,S],I=Math.round(l.convert(s)),A=Math.round(l.convert(o)),T=Math.max(m,Math.abs(A-I)),E={x:d?Math.min(I,A):i,y:d?i:Math.min(I,A),width:d?T:n,height:d?n:T},R={x:E.x+E.width/2,y:E.y+E.height/2},L=this.createLabelData({rect:E,barAlongX:d,yLowValue:D,yHighValue:k,datum:a,series:this}),P={index:t,valueIndex:e,series:this,itemId:v,datum:a,datumIndex:e,xValue:w,yLowValue:S,yHighValue:M,yLowKey:h,yHighKey:u,xKey:c,x:E.x,y:E.y,width:E.width,height:E.height,midPoint:R,fill:p,stroke:g,strokeWidth:m,opacity:1,crisp:r,labels:L};f.nodeData.push(P),f.labelData.push(...L)},{dataAggregationFilters:T}=this,[E,R]=a.range,L=R-E,P=null===T||void 0===T?void 0:T.find((e=>e.maxRange>L));if(null!=P){const{maxRange:e,indexData:t}=P,[i,n]=qme(e,s.range,(e=>{const i=4*e,n=t[i+0],o=t[i+1];if(-1===n)return;return[I((n+o)/2|0),I(o)+w]}));for(let o=i;o<n;o+=1){const e=4*o,i=t[e+0],n=t[e+1],s=t[e+2],r=t[e+3];if(-1===i)continue;const a=(i+n)/2|0;if(null==b[a])continue;const l=I(a),d=Math.abs(I(i)-I(n))+w,c=C[s],h=x[r];A(a,0,l,d,c,h,!1)}}else if("ungrouped"===n.type){let[e,t]=qme(y.length,s.range,(e=>[I(e),w]));n.rawData.length<1e3&&(e=0,t=n.rawData.length);for(let i=e;i<t;i+=1){const e=I(i),t=w,n=C[i],o=x[i];A(i,0,e,t,n,o,k)}}else n.groups.forEach(((e,t)=>{let{datumIndices:i}=e;i.forEach((e=>{const i=I(e),n=w,o=C[e],s=x[e];A(e,t,i,n,o,s,k)}))}));return f}createLabelData(e){let{rect:t,barAlongX:i,yLowValue:n,yHighValue:o,datum:s,series:r}=e;const{xKey:a,yLowKey:d,yHighKey:c,xName:h,yLowName:u,yHighName:p,yName:g,label:m}=this.properties,v={datum:s,xKey:a,yLowKey:d,yHighKey:c,xName:h,yLowName:u,yHighName:p,yName:g},{placement:f,padding:y}=m,b=y*("outside"===f?1:-1),C={x:t.x+(i?-b:t.width/2),y:t.y+(i?t.height/2:t.height+b),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(m,l({itemId:"low",value:n},v)),itemId:"low",datum:s,series:r},x={x:t.x+(i?t.width+b:t.width/2),y:t.y+(i?t.height/2:-b),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(m,l({itemId:"high",value:o},v)),itemId:"high",datum:s,series:r};return"outside"===f&&(C.textAlign=i?"right":"center",C.textBaseline=i?"middle":"top",x.textAlign=i?"left":"center",x.textBaseline=i?"middle":"bottom"),[C,x]}nodeFactory(){return new eve}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return i.update(n,void 0,(e=>this.getDatumId(e)))}getItemBaseStyle(e){var t,i,n,o,s,r,a,l;const{properties:d}=this,{cornerRadius:c}=d,h=e?d.highlightStyle.item:void 0;return{fill:null!==(t=null===h||void 0===h?void 0:h.fill)&&void 0!==t?t:d.fill,fillOpacity:null!==(i=null===h||void 0===h?void 0:h.fillOpacity)&&void 0!==i?i:d.fillOpacity,stroke:null!==(n=null===h||void 0===h?void 0:h.stroke)&&void 0!==n?n:d.stroke,strokeWidth:null!==(o=null===h||void 0===h?void 0:h.strokeWidth)&&void 0!==o?o:d.strokeWidth,strokeOpacity:null!==(s=null===h||void 0===h?void 0:h.strokeOpacity)&&void 0!==s?s:d.strokeOpacity,lineDash:null!==(r=null!==(a=null===h||void 0===h?void 0:h.lineDash)&&void 0!==a?a:d.lineDash)&&void 0!==r?r:[],lineDashOffset:null!==(l=null===h||void 0===h?void 0:h.lineDashOffset)&&void 0!==l?l:d.lineDashOffset,cornerRadius:c}}getItemStyleOverrides(e,t,i,n){const{id:o,properties:s}=this,{xKey:r,yHighKey:a,yLowKey:d,itemStyler:c}=s;if(null!=c)return this.cachedDatumCallback(Qme(e,n?"highlight":"node"),(()=>c(l({seriesId:o,datum:t,xKey:r,yHighKey:a,yLowKey:d,highlighted:n},i))))}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{id:n}=this,{yLowKey:o,yHighKey:s,highlightStyle:{item:r},fillOpacity:a,strokeOpacity:l,strokeWidth:d,lineDash:c,lineDashOffset:h,itemStyler:u,shadow:p}=this.properties,g=this.getCategoryDirection()===Nme.X;t.each(((e,t)=>{const m={fill:t.fill,stroke:t.stroke,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:h,fillShadow:p,strokeWidth:this.getStrokeWidth(d),cornerRadius:this.properties.cornerRadius},v=g?t.width>0:t.height>0,f=Fme(this,this.getDatumId(t),{datum:t,isHighlighted:i,style:m,highlightStyle:r,itemStyler:u,seriesId:n,yLowKey:o,yHighKey:s});f.crisp=t.crisp,f.visible=v,Ome(e,f)}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,(e=>{e.pointerEvents=tve.None}))}updateLabelNodes(e){e.labelSelection.each(((e,t)=>{Gme(e,this.properties.label,t)}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{xKey:s,xName:r,yName:a,yLowKey:d,yHighKey:c,yLowName:h,yHighName:u,tooltip:p}=o,g=this.getCategoryAxis(),m=this.getValueAxis();if(!i||!n||0===n.rawData.length||!g||!m)return;const{datumIndex:v}=e,f=n.rawData[v],y=i.resolveKeysById(this,"xValue",n)[v],b=i.resolveColumnById(this,"yHighValue",n)[v],C=i.resolveColumnById(this,"yLowValue",n)[v];if(null==y)return;const x=this.getItemBaseStyle(!1);Object.assign(x,this.getItemStyleOverrides(String(v),f,x,!1));const w="".concat(m.formatDatum(C)," - ").concat(m.formatDatum(b));return p.formatTooltip({heading:g.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:a,fallbackLabel:"".concat(null!==h&&void 0!==h?h:d," - ").concat(null!==u&&void 0!==u?u:c),value:w}]},l({seriesId:t,datum:f,title:a,xKey:s,xName:r,yName:a,yLowKey:d,yHighKey:c,yLowName:h,yHighName:u},x))}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:o}=this.properties;return{marker:{fill:e,stroke:t,fillOpacity:n,strokeOpacity:o,strokeWidth:i}}}getLegendData(e){if("category"!==e)return[];const{id:t,visible:i}=this,{yName:n,yLowName:o,yHighName:s,yLowKey:r,yHighKey:a,showInLegend:l}=this.properties,d=null!==n&&void 0!==n?n:"".concat(null!==o&&void 0!==o?o:r," - ").concat(null!==s&&void 0!==s?s:a);return[{legendType:"category",id:t,itemId:"".concat(r,"-").concat(a),seriesId:t,enabled:i,label:{text:"".concat(d)},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;const n=Hme(Wme(this.isVertical(),"normal"));ive.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n),Kme(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t;const{datumSelection:i,labelSelection:n}=e,{processedData:o}=this,s=null===o||void 0===o||null===(t=o.reduced)||void 0===t||null===(t=t.diff)||void 0===t?void 0:t[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=Hme(Wme(this.isVertical(),"fade"));ive.fromToMotion(this.id,"datums",this.ctx.animationManager,[i],r,((e,t)=>this.getDatumId(t)),s),Kme(this,"labels",this.ctx.animationManager,n)}getDatumId(e){return"".concat(e.xValue,"-").concat(e.valueIndex)}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds(e){var t;let{datumIndex:i}=e;return Xme(null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}};ove.className="RangeBarSeries",ove.type="range-bar";var sve={series:{direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:mW.ThemeSymbols.DEFAULT_FONT_FAMILY,color:mW.ThemeSymbols.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside"}},axes:{[mW.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:rve,CARTESIAN_POSITION:ave}=mW.ThemeConstants,lve={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:e=>new ove(e),tooltipDefaults:{range:"exact"},defaultAxes:mW.swapAxisCondition([{type:rve.NUMBER,position:ave.LEFT},{type:rve.CATEGORY,position:ave.BOTTOM}],(e=>"horizontal"===(null===e||void 0===e?void 0:e.direction))),themeTemplate:sve,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[n]}=t(1);return{fill:i,stroke:n}},groupable:!0};function dve(e){e.nodes.sort(((e,t)=>Math.round(100*(e.datum.y-t.datum.y))/100||-(e.datum.size-t.datum.size)))}function cve(e,t,i,n,o,s,r,a){const l=(i-e)/(n-t),d=(r-o)/(a-s),c=(l*d*(s-t)+e*d-o*l)/(d-l);return e<i?c>e&&c<Math.min(i,r):c<e&&c>Math.max(i,r)}function hve(e,t){let i=!1;const n=e.nodes.filter((e=>1===t(e).length));let o=!0;for(let s=0;o&&s<n.length;s+=1){o=!1;for(let e=0;e<n.length-1;e+=1){const{datum:s}=n[e],r=t(n[e])[0].node.datum,{datum:a}=n[e+1],l=t(n[e+1])[0].node.datum;if(!(cve(s.x,s.y,r.x,r.y,a.x,a.y,l.x,l.y)||cve(s.x,s.y+s.height/2,r.x,r.y+r.height/2,a.x,a.y+a.height/2,l.x,l.y+l.height/2)||cve(s.x,s.y+s.height,r.x,r.y+r.height,a.x,a.y+a.height,l.x,l.y+l.height)))continue;const d=n[e];n[e]=n[e+1],n[e+1]=d;const c=s.y;s.y=a.y+a.height-s.height,a.y=c,i=!0,o=!0}}return i}function uve(e){let t=!1;return dve(e),t=hve(e,(e=>e.linksBefore))||t,t=hve(e,(e=>e.linksAfter))||t,t}function pve(e,t,i,n){return e.nodes.forEach((e=>{let{datum:t,linksBefore:o,linksAfter:s}=e;const r=1===n?s:o,a=function(e){if(0===e.length)return;let t=0,i=0;for(const{node:{datum:n}}of e)t+=n.y*n.size,i+=n.size;return t/i}(1===n?o:s);if(null!=a){const e=0!==r.length?i:1;t.y=t.y+(a-t.y)*e}})),function(e,t){const{nodes:i}=e,{seriesRectHeight:n,nodeSpacing:o}=t;dve(e);let s=0,r=0;for(const{datum:l}of i){const e=Math.max(r-l.y,0);l.y+=e,s+=e,r=l.y+l.height+o}if(r-o<n)return s>0;let a=n;for(let l=i.length-1;l>=0;l-=1){const{datum:e}=i[l],t=e.y+e.height,n=Math.min(a-t,0);e.y+=n,s+=n,a=e.y-o}return!0}(e,t)}function gve(e,t,i){let n=!1;for(const o of e)n=pve(o,t,i,1)||n;return n}function mve(e,t,i){let n=!1;for(let o=e.length-1;o>=0;o-=1)n=pve(e[o],t,i,-1)||n;return n}function vve(e){let t=!1;for(let i=e.length-1;i>=0;i-=1)t=uve(e[i])||t;return t}var{BBox:fve,Path:yve,ScenePathChangeDetection:bve,splitBezier:Cve}=mW;function xve(e,t,i,n,o,s,r,a,l,d){let c,h;if(o!==i&&l!==r){const e=-(n-t)/(o-i),d=-(a-s)/(l-r);c=(r-i+e*t-d*s)/(e-d),h=e*(c-t)+i}else if(o===i&&l!==r){c=t;h=-(a-s)/(l-r)*(c-a)+l}else{if(o===i||l!==r)throw new Error("Offsetting flat bezier curve");c=a;h=-(n-t)/(o-i)*(c-t)+i}const u=Math.hypot(i-h,t-c),p=(u+d)/u,g=Math.hypot(l-h,a-c),m=(g+d)/g,v=c+(n-c)*p,f=h+(o-h)*p,y=c+(s-c)*m,b=h+(r-h)*m,C=c+(a-c)*m,x=h+(l-h)*m;e.cubicCurveTo(v,f,y,b,C,x)}var wve=class extends yve{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2)-e,i=Math.min(this.y1,this.y2),n=Math.max(this.y1,this.y2)-i+this.height;return new fve(e,i,t,n)}updatePath(){const{path:e,inset:t}=this;e.clear();const i=this.x1+t,n=this.x2-t,o=this.y1+t,s=this.y2+t,r=this.height-2*t;if(r<0||i>n)return;const a=i,l=o+r/2,d=(i+n)/2,c=o+r/2,h=(i+n)/2,u=s+r/2,p=n,g=s+r/2;if(e.moveTo(a,l-r/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)e.cubicCurveTo(d,c-r/2,h,u-r/2,p,g-r/2),e.lineTo(p,g+r/2),e.cubicCurveTo(h,u+r/2,d,c+r/2,a,l+r/2);else{const[t,i]=Cve(a,l,d,c,h,u,p,g,.5),n=(s>o?1:-1)*r/2;xve(e,t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y,n),xve(e,i[0].x,i[0].y,i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y,-n),e.lineTo(p,g+r/2),xve(e,i[3].x,i[3].y,i[2].x,i[2].y,i[1].x,i[1].y,i[0].x,i[0].y,n),xve(e,t[3].x,t[3].y,t[2].x,t[2].y,t[1].x,t[1].y,t[0].x,t[0].y,-n)}e.closePath()}};dj([bve()],wve.prototype,"x1",2),dj([bve()],wve.prototype,"x2",2),dj([bve()],wve.prototype,"y1",2),dj([bve()],wve.prototype,"y2",2),dj([bve()],wve.prototype,"height",2),dj([bve()],wve.prototype,"inset",2);var{BaseProperties:Sve,SeriesTooltip:Mve,SeriesProperties:Dve,ARRAY:kve,COLOR_STRING:Ive,COLOR_STRING_ARRAY:Ave,FUNCTION:Tve,LINE_DASH:Eve,OBJECT:Rve,POSITIVE_NUMBER:Lve,RATIO:Pve,STRING:Nve,UNION:Fve,Validate:Ove,Label:Bve}=mW,Gve=Fve(["left","right","center","justify"],"a justification value"),zve=class extends Bve{constructor(){super(...arguments),this.spacing=1}};dj([Ove(Lve)],zve.prototype,"spacing",2);var _ve=class extends Sve{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};dj([Ove(Ive,{optional:!0})],_ve.prototype,"fill",2),dj([Ove(Pve)],_ve.prototype,"fillOpacity",2),dj([Ove(Ive,{optional:!0})],_ve.prototype,"stroke",2),dj([Ove(Pve)],_ve.prototype,"strokeOpacity",2),dj([Ove(Lve)],_ve.prototype,"strokeWidth",2),dj([Ove(Eve)],_ve.prototype,"lineDash",2),dj([Ove(Lve)],_ve.prototype,"lineDashOffset",2),dj([Ove(Tve,{optional:!0})],_ve.prototype,"itemStyler",2);var Vve=class extends Sve{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};dj([Ove(Lve)],Vve.prototype,"spacing",2),dj([Ove(Lve)],Vve.prototype,"width",2),dj([Ove(Gve)],Vve.prototype,"alignment",2),dj([Ove(Ive,{optional:!0})],Vve.prototype,"fill",2),dj([Ove(Pve)],Vve.prototype,"fillOpacity",2),dj([Ove(Ive,{optional:!0})],Vve.prototype,"stroke",2),dj([Ove(Pve)],Vve.prototype,"strokeOpacity",2),dj([Ove(Lve)],Vve.prototype,"strokeWidth",2),dj([Ove(Eve)],Vve.prototype,"lineDash",2),dj([Ove(Lve)],Vve.prototype,"lineDashOffset",2),dj([Ove(Tve,{optional:!0})],Vve.prototype,"itemStyler",2);var Hve=class extends Dve{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fills=[],this.strokes=[],this.label=new zve,this.link=new _ve,this.node=new Vve,this.tooltip=new Mve}};dj([Ove(kve,{optional:!0})],Hve.prototype,"nodes",2),dj([Ove(Nve)],Hve.prototype,"fromKey",2),dj([Ove(Nve)],Hve.prototype,"toKey",2),dj([Ove(Nve)],Hve.prototype,"idKey",2),dj([Ove(Nve,{optional:!0})],Hve.prototype,"idName",2),dj([Ove(Nve,{optional:!0})],Hve.prototype,"labelKey",2),dj([Ove(Nve,{optional:!0})],Hve.prototype,"labelName",2),dj([Ove(Nve,{optional:!0})],Hve.prototype,"sizeKey",2),dj([Ove(Nve,{optional:!0})],Hve.prototype,"sizeName",2),dj([Ove(Ave)],Hve.prototype,"fills",2),dj([Ove(Ave)],Hve.prototype,"strokes",2),dj([Ove(Rve)],Hve.prototype,"label",2),dj([Ove(Rve)],Hve.prototype,"link",2),dj([Ove(Rve)],Hve.prototype,"node",2),dj([Ove(Rve)],Hve.prototype,"tooltip",2);var{SeriesNodePickMode:Wve,CachedTextMeasurerPool:jve,TextWrapper:Uve,TextUtils:Kve,createDatumId:Yve,Logger:Zve,Rect:Xve,BBox:qve}=mW,Qve=class extends eee{constructor(e){super({moduleCtx:e,pickModes:[Wve.NEAREST_NODE,Wve.EXACT_SHAPE_MATCH]}),this.properties=new Hve}isLabelEnabled(){return(null!=this.properties.labelKey||null==this.nodes)&&this.properties.label.enabled}linkFactory(){return new wve}nodeFactory(){return new Xve}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:n,toKey:o,sizeKey:s,label:{spacing:r},node:{spacing:a,width:d,alignment:c}}=this.properties,{nodeGraph:h,links:u,maxPathLength:p}=this.getNodeGraph((e=>l(l({},e),{},{x:NaN,y:NaN,width:d,height:NaN})),(e=>l(l({},e),{},{x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN})),{includeCircularReferences:!1}),g=h,m=this.isLabelEnabled()?(t-d)*(1-p/(p+1)):0,v=(t-d-2*m)/(p-1),f=[];for(let l=0;l<p;l+=1){const e=m+l*v;f.push({index:l,size:0,nodes:[],x:e})}g.forEach((e=>{const{datum:t,linksBefore:i,linksAfter:r,maxPathLengthBefore:a,maxPathLengthAfter:l}=e,d=Math.max(i.reduce(((e,t)=>{let{link:i}=t;return e+i.size}),0),r.reduce(((e,t)=>{let{link:i}=t;return e+i.size}),0));if(0===i.length&&0===r.length||0===d)return void(e.columnIndex=-1);let h;switch(c){case"left":h=f[a];break;case"right":h=f[p-1-l];break;case"center":if(0!==i.length)h=f[a];else if(0!==r.length){const e=r.reduce(((e,t)=>Math.min(e,t.node.maxPathLengthBefore)),p)-1;h=f[e]}else h=f[0];break;case"justify":h=0===r.length?f[p-1]:f[a]}t.x=h.x,t.size=d;const u=this.getLabelText(this.properties.label,{datum:t.datum,value:t.label,fromKey:n,toKey:o,sizeKey:s,size:d});t.label=String(u),h.nodes.push(e),h.size+=d,e.columnIndex=h.index})),g.forEach((e=>{let t=1/0,i=0;e.linksAfter.forEach((e=>{const n=e.node,{columnIndex:o}=n;o<t?(t=o,i=n.datum.size):o===t&&(i=Math.max(i,n.datum.size))})),e.closestColumnIndex=t,e.maxSizeOfClosestNodesAfter=i}));const y=f.reduce(((e,t)=>{let{size:n,nodes:o}=t;const s=(1-(o.length-1)*(a/i))/n;return Math.min(e,s)}),1/0);for(let l=f.length-1;l>=0;l-=1){f[l].nodes.sort(((e,t)=>e.closestColumnIndex-t.closestColumnIndex||e.maxSizeOfClosestNodesAfter-t.maxSizeOfClosestNodesAfter||e.datum.size-t.datum.size))}!function(e,t){e.forEach((e=>{!function(e,t){let{nodes:i,size:n}=e,{seriesRectHeight:o,nodeSpacing:s,sizeScale:r}=t,a=(o-(o*n*r+s*(i.length-1)))/2;i.forEach((e=>{let{datum:t}=e;const i=o*t.size*r;t.y=a,t.height=i,a+=i+s}))}(e,t)}));let i=!1;for(let n=0;n<6;n+=1){const n=gve(e,t,1);i=mve(e,t,.5);const o=vve(e);if(!n&&!i&&!o)break}i&&(gve(e,t,1),vve(e))}(f,{seriesRectHeight:i,nodeSpacing:a,sizeScale:y});let b=!1;if(g.forEach((e=>{let{datum:t,linksBefore:n,linksAfter:o}=e;b||(b=t.height<0);const s=t.y+t.height,r=e=>e.sort(((e,i)=>{const n=e.node.datum,o=i.node.datum,r=n.y+n.height,a=o.y+o.height;return Math.atan2(n.y-t.y,Math.abs(n.x-t.x))-Math.atan2(o.y-t.y,Math.abs(o.x-t.x))+(Math.atan2(r-s,Math.abs(n.x-t.x))-Math.atan2(a-s,Math.abs(o.x-t.x)))}));let a=t.y;r(n).forEach((e=>{let{link:t}=e;t.y2=a,a+=t.size*i*y}));let l=t.y;r(o).forEach((e=>{let{link:t}=e;t.y1=l,l+=t.size*i*y}))})),b)return void Zve.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");const C=[],x=[],{fontSize:w}=this.properties.label,S=this.properties.label.getFont();return f.forEach(((e,i)=>{const n=0===i,o=i===f.length-1;let s=-1/0;e.nodes.sort(((e,t)=>e.datum.y-t.datum.y)),e.nodes.forEach((e=>{let{datum:i}=e;if(i.midPoint={x:i.x+i.width/2,y:i.y+i.height/2},C.push(i),null==i.label)return;const a=n?i.x-r:i.x+i.width+r,l=i.y+i.height/2;let d;if(!n&&!o){const e=l-Kve.getLineHeight(w),n=l+Kve.getLineHeight(w);let o=t;g.forEach((t=>{let{datum:s}=t;s.x>i.x&&Math.max(s.y,e)<=Math.min(s.y+s.height,n)&&(o=Math.min(o,s.x-r))}));const s=o-i.x-2*r;d=Uve.wrapText(i.label,{maxWidth:s,maxHeight:i.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(null==d||""===d){const e=n||o?r:2*r;d=Uve.wrapText(i.label,{maxWidth:v-e,maxHeight:i.height,font:this.properties.label,textWrap:"never"})}if(""===d)return;const{height:c}=jve.measureText(d,{font:S,textAlign:"left",textBaseline:"middle"}),h=l+c/2;l-c/2>=s&&(x.push({x:a,y:l,leading:n,text:d}),s=h)}))})),u.forEach((e=>{const{fromNode:t,toNode:n,size:o}=e;e.height=i*o*y,e.x1=t.x+d,e.x2=n.x,e.midPoint={x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2+e.height/2},C.push(e)})),{itemId:e,nodeData:C,labelData:x}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:r}=this.properties.label;t.each(((e,t)=>{let{x:a,y:l,leading:d,text:c}=t;e.visible=!0,e.x=a,e.y=l,e.text=c,e.fill=i,e.fontStyle=n,e.fontWeight=o,e.fontSize=s,e.fontFamily=r,e.textAlign=d?"right":"left",e.textBaseline="middle"}))}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>Yve([e.type,e.id])))}getBaseNodeStyle(e){var t,i,n,o,s,r,a;const{properties:l}=this,{fill:d,fillOpacity:c,stroke:h,strokeOpacity:u,lineDash:p,lineDashOffset:g}=l.node,m=this.getStrokeWidth(l.node.strokeWidth),v=e?l.highlightStyle.item:void 0;return{fill:null!==(t=null===v||void 0===v?void 0:v.fill)&&void 0!==t?t:d,fillOpacity:null!==(i=null===v||void 0===v?void 0:v.fillOpacity)&&void 0!==i?i:c,stroke:null!==(n=null===v||void 0===v?void 0:v.stroke)&&void 0!==n?n:h,strokeOpacity:null!==(o=null===v||void 0===v?void 0:v.strokeOpacity)&&void 0!==o?o:u,strokeWidth:null!==(s=null===v||void 0===v?void 0:v.strokeWidth)&&void 0!==s?s:m,lineDash:null!==(r=null===v||void 0===v?void 0:v.lineDash)&&void 0!==r?r:p,lineDashOffset:null!==(a=null===v||void 0===v?void 0:v.lineDashOffset)&&void 0!==a?a:g}}getNodeStyleOverrides(e,t,i,n,o,s,r){var a,l;const{id:d,properties:c}=this,{fills:h,strokes:u}=c,{itemStyler:p}=c.node,g=null!==(a=s.fill)&&void 0!==a?a:h[i%h.length],m=null!==(l=s.stroke)&&void 0!==l?l:u[i%u.length],v={};if(r||(v.fill=g,v.stroke=m),null!=p){const i=this.cachedDatumCallback(Yve(e,r?"highlight":"node"),(()=>{const{fillOpacity:e=1,strokeOpacity:i=1,strokeWidth:a=0,lineDash:l=[],lineDashOffset:c=0}=s;return p({seriesId:d,datum:t,highlighted:r,label:o,size:n,fill:g,fillOpacity:e,stroke:m,strokeOpacity:i,strokeWidth:a,lineDash:l,lineDashOffset:c})}));Object.assign(v,i)}return v}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getBaseNodeStyle(i);t.each(((e,t)=>{var o,s,r,a,l,d,c;const{datumIndex:h,size:u,label:p}=t,g=this.getNodeStyleOverrides(String(h),t,h,u,p,n,i);e.x=t.x,e.y=t.y,e.width=Math.max(t.width,0),e.height=Math.max(t.height,0),e.fill=null!==(o=null===g||void 0===g?void 0:g.fill)&&void 0!==o?o:n.fill,e.fillOpacity=null!==(s=null===g||void 0===g?void 0:g.fillOpacity)&&void 0!==s?s:n.fillOpacity,e.stroke=null!==(r=null===g||void 0===g?void 0:g.stroke)&&void 0!==r?r:n.stroke,e.strokeOpacity=null!==(a=null===g||void 0===g?void 0:g.strokeOpacity)&&void 0!==a?a:n.strokeOpacity,e.strokeWidth=null!==(l=null===g||void 0===g?void 0:g.strokeWidth)&&void 0!==l?l:n.strokeWidth,e.lineDash=null!==(d=null===g||void 0===g?void 0:g.lineDash)&&void 0!==d?d:n.lineDash,e.lineDashOffset=null!==(c=null===g||void 0===g?void 0:g.lineDashOffset)&&void 0!==c?c:n.lineDashOffset}))}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>Yve([e.type,e.index,e.fromNode.id,e.toNode.id])))}getBaseLinkStyle(e){var t,i,n,o,s,r,a;const{properties:l}=this,{fill:d,fillOpacity:c,stroke:h,strokeOpacity:u,lineDash:p,lineDashOffset:g}=l.link,m=this.getStrokeWidth(l.link.strokeWidth),v=e?l.highlightStyle.item:void 0;return{fill:null!==(t=null===v||void 0===v?void 0:v.fill)&&void 0!==t?t:d,fillOpacity:null!==(i=null===v||void 0===v?void 0:v.fillOpacity)&&void 0!==i?i:c,stroke:null!==(n=null===v||void 0===v?void 0:v.stroke)&&void 0!==n?n:h,strokeOpacity:null!==(o=null===v||void 0===v?void 0:v.strokeOpacity)&&void 0!==o?o:u,strokeWidth:null!==(s=null===v||void 0===v?void 0:v.strokeWidth)&&void 0!==s?s:m,lineDash:null!==(r=null===v||void 0===v?void 0:v.lineDash)&&void 0!==r?r:p,lineDashOffset:null!==(a=null===v||void 0===v?void 0:v.lineDashOffset)&&void 0!==a?a:g}}getLinkStyleOverrides(e,t,i,n,o){var s,r;const{id:a,properties:l}=this,{fills:d,strokes:c}=l,{itemStyler:h}=l.link,u=null!==(s=n.fill)&&void 0!==s?s:d[i%d.length],p=null!==(r=n.stroke)&&void 0!==r?r:c[i%c.length],g={};if(o||(g.fill=u,g.stroke=p),null!=h){const i=this.cachedDatumCallback(Yve(e,o?"highlight":"node"),(()=>{const{fillOpacity:e=1,strokeOpacity:i=1,strokeWidth:s=0,lineDash:r=[],lineDashOffset:l=0}=n;return h({seriesId:a,datum:t,highlighted:o,fill:u,fillOpacity:e,stroke:p,strokeOpacity:i,strokeWidth:s,lineDash:r,lineDashOffset:l})}));Object.assign(g,i)}return g}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getBaseLinkStyle(i);t.each(((e,t)=>{var o,s,r,a,l,d,c;const{datumIndex:h}=t,u=t.fromNode.datumIndex,p=this.getLinkStyleOverrides(String(h),t,u,n,i);e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.height=t.height,e.fill=null!==(o=null===p||void 0===p?void 0:p.fill)&&void 0!==o?o:null===n||void 0===n?void 0:n.fill,e.fillOpacity=null!==(s=null===p||void 0===p?void 0:p.fillOpacity)&&void 0!==s?s:null===n||void 0===n?void 0:n.fillOpacity,e.stroke=null!==(r=null===p||void 0===p?void 0:p.stroke)&&void 0!==r?r:null===n||void 0===n?void 0:n.stroke,e.strokeOpacity=null!==(a=null===p||void 0===p?void 0:p.strokeOpacity)&&void 0!==a?a:null===n||void 0===n?void 0:n.strokeOpacity,e.strokeWidth=Math.min(null!==(l=null===p||void 0===p?void 0:p.strokeWidth)&&void 0!==l?l:null===n||void 0===n?void 0:n.strokeWidth,t.height/2),e.lineDash=null!==(d=null===p||void 0===p?void 0:p.lineDash)&&void 0!==d?d:null===n||void 0===n?void 0:n.lineDash,e.lineDashOffset=null!==(c=null===p||void 0===p?void 0:p.lineDashOffset)&&void 0!==c?c:null===n||void 0===n?void 0:n.lineDashOffset,e.inset=e.strokeWidth/2}))}getTooltipContent(e){const{id:t,processedData:i,nodesProcessedData:n,properties:o}=this,{fromKey:s,toKey:r,sizeKey:a,sizeName:d,tooltip:c}=o,{datumIndex:h}=e,u=0===e.type?e.fromNode.index:e.index,p=0===e.type?"".concat(e.fromNode.label," - ").concat(e.toNode.label):e.label,g=0===e.type?null===i||void 0===i?void 0:i.rawData[e.datumIndex]:null===n||void 0===n?void 0:n.rawData[e.datumIndex],m=e.size;let v;if(0===e.type){const t=e.fromNode.datumIndex,i=this.getBaseLinkStyle(!1);Object.assign(i,this.getLinkStyleOverrides(String(h),g,t,i,!1)),v=i}else{const t=e.label,i=this.getBaseNodeStyle(!1);Object.assign(i,this.getNodeStyleOverrides(String(h),g,h,m,t,i,!1)),v=i}return c.formatTooltip({title:p,symbol:this.legendItemSymbol(e.type,u,v),data:null!=a?[{label:d,fallbackLabel:a,value:String(m)}]:[]},l({seriesId:t,datum:g,title:p,fromKey:s,toKey:r,sizeKey:a,sizeName:d,size:m},v))}computeFocusBounds(e){var t;let{datumIndex:i}=e;const n=null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i];if(1===(null===n||void 0===n?void 0:n.type)){const{x:e,y:t,width:i,height:o}=n;return new qve(e,t,i,o)}if(0!==(null===n||void 0===n?void 0:n.type));else for(const o of this.linkSelection)if(o.datum===n)return o.node}};Qve.className="SankeySeries",Qve.type="sankey";var{DEFAULT_FONT_FAMILY:Jve,DEFAULT_LABEL_COLOUR:$ve}=mW.ThemeSymbols,efe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:e=>new Qve(e),tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:Jve,color:$ve,fontSize:12,spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory(e){let{takeColors:t,colorsCount:i}=e;return t(i)}},{HierarchySeriesProperties:tfe,HighlightStyle:ife,SeriesTooltip:nfe,Validate:ofe,COLOR_STRING:sfe,FUNCTION:rfe,NUMBER:afe,OBJECT:lfe,POSITIVE_NUMBER:dfe,RATIO:cfe,STRING:hfe}=mW,ufe=class extends ife{constructor(){super(...arguments),this.label=new jie,this.secondaryLabel=new jie}};dj([ofe(hfe,{optional:!0})],ufe.prototype,"fill",2),dj([ofe(cfe,{optional:!0})],ufe.prototype,"fillOpacity",2),dj([ofe(sfe,{optional:!0})],ufe.prototype,"stroke",2),dj([ofe(dfe,{optional:!0})],ufe.prototype,"strokeWidth",2),dj([ofe(cfe,{optional:!0})],ufe.prototype,"strokeOpacity",2),dj([ofe(lfe)],ufe.prototype,"label",2),dj([ofe(lfe)],ufe.prototype,"secondaryLabel",2);var pfe=class extends tfe{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new ufe,this.label=new jie,this.secondaryLabel=new Uie,this.tooltip=new nfe}};dj([ofe(hfe,{optional:!0})],pfe.prototype,"sizeName",2),dj([ofe(hfe,{optional:!0})],pfe.prototype,"labelKey",2),dj([ofe(hfe,{optional:!0})],pfe.prototype,"secondaryLabelKey",2),dj([ofe(cfe)],pfe.prototype,"fillOpacity",2),dj([ofe(dfe)],pfe.prototype,"strokeWidth",2),dj([ofe(cfe)],pfe.prototype,"strokeOpacity",2),dj([ofe(dfe)],pfe.prototype,"cornerRadius",2),dj([ofe(afe,{optional:!0})],pfe.prototype,"sectorSpacing",2),dj([ofe(afe,{optional:!0})],pfe.prototype,"padding",2),dj([ofe(rfe,{optional:!0})],pfe.prototype,"itemStyler",2),dj([ofe(lfe)],pfe.prototype,"highlightStyle",2),dj([ofe(lfe)],pfe.prototype,"label",2),dj([ofe(lfe)],pfe.prototype,"secondaryLabel",2),dj([ofe(lfe)],pfe.prototype,"tooltip",2);var{fromToMotion:gfe,normalizeAngle360:mfe,createDatumId:vfe,Sector:ffe,ScalableGroup:yfe,Selection:bfe,TransformableText:Cfe}=mW,xfe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*Math.PI/e.sumSize,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Array.from(e,(()=>{})),o=t;for(const s of e.children){const e=o,t=o+s.sumSize*i;n[s.index]={start:e,end:t},xfe(s,e,i,n),o=t}return n},wfe=class extends mW.HierarchySeries{constructor(){super(...arguments),this.properties=new pfe,this.groupSelection=bfe.select(this.contentGroup,yfe),this.highlightSelection=bfe.select(this.highlightGroup,yfe),this.angleData=[]}processData(){const{childrenKey:e,colorKey:t,colorName:i,labelKey:n,secondaryLabelKey:o,sizeKey:s,sizeName:r}=this.properties;super.processData(),this.angleData=xfe(this.rootNode),this.labelData=Array.from(this.rootNode,(a=>{let l,d,{datum:c,depth:h}=a;if(null!=c&&null!=h&&null!=n){const a=c[n];l=this.getLabelText(this.properties.label,{depth:h,datum:c,childrenKey:e,colorKey:t,colorName:i,labelKey:n,secondaryLabelKey:o,sizeKey:s,sizeName:r,value:a})}if(""===l&&(l=void 0),null!=c&&null!=h&&null!=o){const a=c[o];d=this.getLabelText(this.properties.secondaryLabel,{depth:h,datum:c,childrenKey:e,colorKey:t,colorName:i,labelKey:n,secondaryLabelKey:o,sizeKey:s,sizeName:r,value:a})}return""===d&&(d=void 0),null!=l||null!=d?{label:l,secondaryLabel:d}:void 0}))}updateSelections(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(null==e)return;if(null==e.seriesRect)return;const t=Array.from(this.rootNode),i=e=>{e.append([new ffe,new Cfe({tag:0}),new Cfe({tag:1})])};this.groupSelection.update(t,i,(e=>this.getDatumId(e))),this.highlightSelection.update(t,i,(e=>this.getDatumId(e)))}getItemBaseStyle(e){var t,i,n;const{properties:o}=this,s=e?o.highlightStyle:void 0;return{fill:null===s||void 0===s?void 0:s.fill,fillOpacity:null!==(t=null===s||void 0===s?void 0:s.fillOpacity)&&void 0!==t?t:o.fillOpacity,stroke:null===s||void 0===s?void 0:s.stroke,strokeWidth:null!==(i=null===s||void 0===s?void 0:s.strokeWidth)&&void 0!==i?i:o.strokeWidth,strokeOpacity:null!==(n=null===s||void 0===s?void 0:s.strokeOpacity)&&void 0!==n?n:o.strokeOpacity}}getItemStyleOverrides(e,t,i,n,o,s,r){var a,d;const{id:c,properties:h,colorScale:u}=this,{fills:p,strokes:g,itemStyler:m}=h,v=null!==(a=s.fill)&&void 0!==a?a:p[i%p.length],f=null!==(d=s.stroke)&&void 0!==d?d:g[i%g.length],y={};if(r||(y.fill=null!=o?u.convert(o):v,y.stroke=f),null!=m){const i=this.cachedDatumCallback(vfe(e,r?"highlight":"node"),(()=>m(l({seriesId:c,datum:t,depth:n,highlighted:r,fill:v,stroke:f},s))));Object.assign(y,i)}return y}updateNodes(){var e;const{chart:t,data:i,maxDepth:n,labelData:o}=this;if(null==t||null==i||null==o)return;const{width:s,height:r}=t.seriesRect,{sectorSpacing:a=0,padding:l=0,cornerRadius:d}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=r/2,this.highlightGroup.translationX=s/2,this.highlightGroup.translationY=r/2;const c=.5*a,h=Math.min(s,r)/2/(n+1),u=-Math.PI/2,p=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();(new Cfe).setFont(this.properties.label),this.rootNode.walk((e=>{const t=this.angleData[e.index];if(null!=e.depth&&null!=t){const i=t.end-t.start,n=(e.depth+.5)*h;e.midPoint.x=Math.cos(i)*n,e.midPoint.y=Math.sin(i)*n}}));const g=(e,t,i,n)=>{var o,s,r,a,l;const{datum:p,index:g,rootIndex:m,depth:v,colorValue:f}=e,y=this.angleData[g];if(null==v||null==y)return void(t.visible=!1);t.visible=!0;const b=this.getItemStyleOverrides(String(g),p,m,v,f,i,n),C=null!==(o=b.strokeWidth)&&void 0!==o?o:i.strokeWidth;t.fill=null!==(s=b.fill)&&void 0!==s?s:i.fill,t.fillOpacity=null!==(r=b.fillOpacity)&&void 0!==r?r:i.fillOpacity,t.stroke=null!==(a=b.stroke)&&void 0!==a?a:i.stroke,t.strokeWidth=C,t.strokeOpacity=null!==(l=b.strokeOpacity)&&void 0!==l?l:i.strokeOpacity,t.centerX=0,t.centerY=0,t.innerRadius=v*h,t.outerRadius=(v+1)*h,t.startAngle=y.start+u,t.endAngle=y.end+u,t.inset=c+.5*C,t.cornerRadius=d},m=this.getItemBaseStyle(!1);this.groupSelection.selectByClass(ffe).forEach((e=>{g(e.datum,e,m,!1)}));const v=this.getItemBaseStyle(!0);this.highlightSelection.selectByClass(ffe).forEach((e=>{const t=e.datum,i=p===t;e.visible=i,e.visible&&g(e.datum,e,v,!0)}));const f=Array.from(this.rootNode,((e,t)=>{const{depth:i}=e,n=o[t],s=this.angleData[t];if(null==i||null==s)return;const r=i*h+c,a=(i+1)*h-c,d=r>c?c/r:c,p=a>c?c/a:c,g=s.start+d,m=s.end+d-g,v=s.start+p,f=s.end+p-v,y=Oie(null===n||void 0===n?void 0:n.label,this.properties.label,null===n||void 0===n?void 0:n.secondaryLabel,this.properties.secondaryLabel,{padding:l},(t=>{var n;if(0===i&&(null===(n=e.parent)||void 0===n?void 0:n.sumSize)===e.sumSize){return{width:2*Math.sqrt(a**2-(.5*t)**2),height:t,meta:0}}const o=t,s=2*Math.sqrt(a**2-(r+o)**2),l=m<Math.PI?2*r*Math.tan(.5*m):1/0,d=Math.min(s,l),c=Math.PI/4;let h,u;return 0===i?(h=t,u=Math.sqrt(a**2-(h/2)**2)-t/(2*Math.tan(.5*f))):mfe(m)<c?(h=2*r*Math.tan(.5*m),u=Math.sqrt(a**2-(h/2)**2)-r):(u=0,h=0),d>=u?{width:d,height:o,meta:1}:{width:u,height:h,meta:2}}));if(null==y)return;const{width:b,height:C,meta:x,label:w,secondaryLabel:S}=y,M=u+(s.start+s.end)/2,D=(Math.sin(M)>=0?3:12)&(Math.cos(M)>=0?6:9);let k;switch(x){case 0:k=0;break;case 1:{const e=a-(h-C)*.58,t=Math.sqrt((a-l)**2-(b/2)**2);k=Math.min(e,t);break}case 2:if(0===i){k=.5*(C/(2*Math.tan(.5*m))+.5*b+(Math.sqrt(a**2-(.5*C)**2)-.5*b))}else k=.5*(r+a)}return{width:b,height:C,labelPlacement:x,circleQuarter:D,radius:k,theta:M,label:w,secondaryLabel:S}})),y=(e,t,i,n)=>{var o;const{index:s,depth:r}=e,a=null===f||void 0===f?void 0:f[s],l=0===i?this.properties.label:this.properties.secondaryLabel,d=0===i?null===a||void 0===a?void 0:a.label:null===a||void 0===a?void 0:a.secondaryLabel;if(null==r||null==a||null==d)return void(t.visible=!1);const{height:c,labelPlacement:h,circleQuarter:u,radius:p,theta:g}=a;let m;if(n){m=(0===i?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color}switch(t.text=d.text,t.fontSize=d.fontSize,t.lineHeight=d.lineHeight,t.fontStyle=l.fontStyle,t.fontFamily=l.fontFamily,t.fontWeight=l.fontWeight,t.fill=null!==(o=m)&&void 0!==o?o:l.color,h){case 0:t.textAlign="center",t.textBaseline="top",t.translationX=0,t.translationY=(0===i?0:c-d.height)-.5*c,t.rotation=0;break;case 1:{const e=0!==(3&u),n=0===i===!e?p:p-(c-d.height);t.textAlign="center",t.textBaseline=e?"bottom":"top",t.translationX=Math.cos(g)*n,t.translationY=Math.sin(g)*n,t.rotation=e?g-.5*Math.PI:g+.5*Math.PI;break}case 2:{const e=0!==(6&u),n=0===i===!e?.5*(c-d.height):.5*(d.height-c);t.textAlign="center",t.textBaseline="middle",t.translationX=Math.cos(g)*p+Math.cos(g+Math.PI/2)*n,t.translationY=Math.sin(g)*p+Math.sin(g+Math.PI/2)*n,t.rotation=e?g:g+Math.PI;break}}t.visible=!0};this.groupSelection.selectByClass(Cfe).forEach((e=>{y(e.datum,e,e.tag,!1)})),this.highlightSelection.selectByClass(Cfe).forEach((e=>{const t=e.datum,i=p===t;e.visible=i,e.visible&&y(e.datum,e,e.tag,i)}))}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:n,secondaryLabelKey:o,childrenKey:s,sizeKey:r,sizeName:a,colorKey:d,colorName:c,tooltip:h}=i,{datum:u,index:p,rootIndex:g,depth:m}=e;if(null==u||null==m)return;const v=[],f=null!=r?u[r]:void 0;null!=f&&v.push({label:a,fallbackLabel:r,value:f});const y=null!=d?u[d]:void 0;null!=y&&v.push({label:c,fallbackLabel:d,value:y});const b=this.getItemBaseStyle(!1);Object.assign(b,this.getItemStyleOverrides(String(p),u,g,m,y,b,!1));const C=b.fill;return h.formatTooltip({title:null!=n?u[n]:void 0,symbol:{marker:{shape:"square",fill:C,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1}},data:v},l({seriesId:t,datum:u,title:void 0,depth:m,labelKey:n,secondaryLabelKey:o,childrenKey:s,sizeKey:r,sizeName:a,colorKey:d,colorName:c},b))}createNodeData(){}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.groupSelection.selectByClass(ffe))}animateEmptyUpdateReady(e){let{datumSelections:t}=e;gfe(this.id,"nodes",this.ctx.animationManager,t,{toFn:()=>({scalingX:1,scalingY:1}),fromFn:(e,t,i)=>"unknown"===i&&null!=t&&null==e.previousDatum?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}})}getAnimationData(){return{datumSelections:[this.groupSelection]}}computeFocusBounds(e){let t;for(const{node:i,datum:n}of this.groupSelection)n===e&&(t=bfe.selectByClass(i,ffe)[0]);return t}};wfe.className="SunburstSeries",wfe.type="sunburst";var{DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Sfe,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:Mfe}=mW.ThemeSymbols,Dfe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:e=>new wfe(e),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{label:{fontSize:14,minimumFontSize:9,color:Sfe,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:Sfe,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:Sfe},secondaryLabel:{color:Sfe},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:n}=e;const{fills:o,strokes:s}=t(i);return{fills:o,strokes:s,colorRange:n.get(Mfe)}}},{BaseProperties:kfe,HierarchySeriesProperties:Ife,HighlightStyle:Afe,SeriesTooltip:Tfe,Validate:Efe,BOOLEAN:Rfe,COLOR_STRING:Lfe,FUNCTION:Pfe,NUMBER:Nfe,OBJECT:Ffe,POSITIVE_NUMBER:Ofe,RATIO:Bfe,STRING:Gfe,STRING_ARRAY:zfe,TEXT_ALIGN:_fe,VERTICAL_ALIGN:Vfe,Label:Hfe}=mW,Wfe=class extends Hfe{constructor(){super(...arguments),this.spacing=0}};dj([Efe(Nfe)],Wfe.prototype,"spacing",2);var jfe=class extends kfe{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new Wfe}};dj([Efe(Gfe,{optional:!0})],jfe.prototype,"fill",2),dj([Efe(Bfe)],jfe.prototype,"fillOpacity",2),dj([Efe(Lfe,{optional:!0})],jfe.prototype,"stroke",2),dj([Efe(Ofe)],jfe.prototype,"strokeWidth",2),dj([Efe(Bfe)],jfe.prototype,"strokeOpacity",2),dj([Efe(Ofe)],jfe.prototype,"cornerRadius",2),dj([Efe(_fe)],jfe.prototype,"textAlign",2),dj([Efe(Ofe)],jfe.prototype,"gap",2),dj([Efe(Ofe)],jfe.prototype,"padding",2),dj([Efe(Rfe)],jfe.prototype,"interactive",2),dj([Efe(Ffe)],jfe.prototype,"label",2);var Ufe=class extends kfe{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new jie,this.secondaryLabel=new Uie}};dj([Efe(Gfe,{optional:!0})],Ufe.prototype,"fill",2),dj([Efe(Bfe)],Ufe.prototype,"fillOpacity",2),dj([Efe(Lfe,{optional:!0})],Ufe.prototype,"stroke",2),dj([Efe(Ofe,{optional:!0})],Ufe.prototype,"strokeWidth",2),dj([Efe(Bfe)],Ufe.prototype,"strokeOpacity",2),dj([Efe(Ofe)],Ufe.prototype,"cornerRadius",2),dj([Efe(_fe)],Ufe.prototype,"textAlign",2),dj([Efe(Vfe)],Ufe.prototype,"verticalAlign",2),dj([Efe(Ofe)],Ufe.prototype,"gap",2),dj([Efe(Ofe)],Ufe.prototype,"padding",2),dj([Efe(Ffe)],Ufe.prototype,"label",2),dj([Efe(Ffe)],Ufe.prototype,"secondaryLabel",2);var Kfe=class extends kfe{constructor(){super(...arguments),this.label=new jie}};dj([Efe(Gfe,{optional:!0})],Kfe.prototype,"fill",2),dj([Efe(Bfe,{optional:!0})],Kfe.prototype,"fillOpacity",2),dj([Efe(Lfe,{optional:!0})],Kfe.prototype,"stroke",2),dj([Efe(Ofe,{optional:!0})],Kfe.prototype,"strokeWidth",2),dj([Efe(Bfe,{optional:!0})],Kfe.prototype,"strokeOpacity",2),dj([Efe(Ffe)],Kfe.prototype,"label",2);var Yfe=class extends kfe{constructor(){super(...arguments),this.label=new jie,this.secondaryLabel=new Uie}};dj([Efe(Gfe,{optional:!0})],Yfe.prototype,"fill",2),dj([Efe(Bfe,{optional:!0})],Yfe.prototype,"fillOpacity",2),dj([Efe(Lfe,{optional:!0})],Yfe.prototype,"stroke",2),dj([Efe(Ofe,{optional:!0})],Yfe.prototype,"strokeWidth",2),dj([Efe(Bfe,{optional:!0})],Yfe.prototype,"strokeOpacity",2),dj([Efe(Ffe)],Yfe.prototype,"label",2),dj([Efe(Ffe)],Yfe.prototype,"secondaryLabel",2);var Zfe=class extends Afe{constructor(){super(...arguments),this.group=new Kfe,this.tile=new Yfe}};dj([Efe(Ffe)],Zfe.prototype,"group",2),dj([Efe(Ffe)],Zfe.prototype,"tile",2);var Xfe=class extends Ife{constructor(){super(...arguments),this.highlightStyle=new Zfe,this.tooltip=new Tfe,this.group=new jfe,this.tile=new Ufe,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};dj([Efe(Gfe,{optional:!0})],Xfe.prototype,"sizeName",2),dj([Efe(Gfe,{optional:!0})],Xfe.prototype,"labelKey",2),dj([Efe(Gfe,{optional:!0})],Xfe.prototype,"secondaryLabelKey",2),dj([Efe(Pfe,{optional:!0})],Xfe.prototype,"itemStyler",2),dj([Efe(Ffe)],Xfe.prototype,"highlightStyle",2),dj([Efe(Ffe)],Xfe.prototype,"tooltip",2),dj([Efe(Ffe)],Xfe.prototype,"group",2),dj([Efe(Ffe)],Xfe.prototype,"tile",2),dj([Efe(zfe)],Xfe.prototype,"undocumentedGroupFills",2),dj([Efe(zfe)],Xfe.prototype,"undocumentedGroupStrokes",2);var{TextUtils:qfe,TextWrapper:Qfe,clamp:Jfe,isNumberEqual:$fe,createDatumId:eye,Rect:tye,Group:iye,BBox:nye,Selection:oye,Text:sye}=mW,rye=new sye;function aye(e){return e.children.length>0?e.sumSize-e.sizeValue:e.sizeValue}var lye={left:0,center:.5,right:1},dye={top:0,middle:.5,bottom:1},cye=(mW.Group,class extends mW.HierarchySeries{constructor(){super(...arguments),this.properties=new Xfe,this.rectGroup=this.contentGroup.appendChild(new iye),this.rectSelection=oye.select(this.rectGroup,tye),this.labelSelection=oye.select(this.labelGroup,iye),this.highlightSelection=oye.select(this.rectGroup,tye)}groupTitleHeight(e,t){var i;const n=null===(i=this.labelData)||void 0===i||null===(i=i[e.index])||void 0===i?void 0:i.label,{label:o}=this.properties.group;if(null!=n&&!(o.fontSize>t.width/3||o.fontSize>t.height/3)){const{height:e}=function(e,t){const{fontStyle:i,fontWeight:n,fontSize:o,fontFamily:s}=t;rye.setProperties({text:e,fontStyle:i,fontWeight:n,fontSize:o,fontFamily:s,textAlign:"left",textBaseline:"top"});const{width:r,height:a}=rye.getBBox();return{width:r,height:a}}(n,o);return Math.max(e,o.fontSize)}}getNodePadding(e,t){if(0===e.index)return{top:0,right:0,bottom:0,left:0};if(0===e.children.length){const{padding:e}=this.properties.tile;return{top:e,right:e,bottom:e,left:e}}const{label:{spacing:i},padding:n}=this.properties.group,o=this.groupTitleHeight(e,t);return{top:n+(null!=o?o+i:0),right:n,bottom:n,left:n}}processData(){var e;super.processData();const{childrenKey:t,colorKey:i,colorName:n,labelKey:o,secondaryLabelKey:s,sizeKey:r,sizeName:a,tile:l,group:d}=this.properties;null!==(e=this.data)&&void 0!==e&&e.length?this.labelData=Array.from(this.rootNode,(e=>{let{datum:c,depth:h,children:u}=e;const p=0===u.length,g=p?l.label:d.label;let m,v;if(null!=c&&null!=h&&null!=o){const e=c[o];m=this.getLabelText(g,{depth:h,datum:c,childrenKey:t,colorKey:i,colorName:n,labelKey:o,secondaryLabelKey:s,sizeKey:r,sizeName:a,value:e})}if(""===m&&(m=void 0),p&&null!=c&&null!=h&&null!=s){const e=c[s];v=this.getLabelText(l.secondaryLabel,{depth:h,datum:c,childrenKey:t,colorKey:i,colorName:n,labelKey:o,secondaryLabelKey:s,sizeKey:r,sizeName:a,value:e})}return""===v&&(v=void 0),null!=m||null!=v?{label:m,secondaryLabel:v}:void 0})):this.labelData=void 0}sortChildren(e){let{children:t}=e;const i=Array.from(t,((e,t)=>t)).filter((e=>aye(t[e])>0)).sort(((e,i)=>aye(t[i])-aye(t[e])));return{sortedChildrenIndices:i,childAt:e=>{const n=i[e];return t[n]}}}squarify(e,t,i,n){const{index:o,datum:s,children:r}=e;if(t.width<=0||t.height<=0)return i[o]=void 0,void(n[o]=void 0);const a=null!=s?this.getNodePadding(e,t):{top:0,right:0,bottom:0,left:0};i[o]=0===o?void 0:t,n[o]=0===o?void 0:a;const{sortedChildrenIndices:l,childAt:d}=this.sortChildren(e),c=l.every((e=>0===r[e].children.length)),h=t.width-a.left-a.right,u=t.height-a.top-a.bottom;if(h<=0||u<=0)return;const p=l.length;let g=0,m=0,v=1/0,f=l.reduce(((e,t)=>e+aye(r[t])),0);const y=new nye(t.x+a.left,t.y+a.top,h,u),b=y.clone();let C=0;for(;C<p;){const e=aye(d(C)),t=aye(d(m)),o=b.width<b.height;g+=e;const s=o?b.height:b.width,r=o?b.width:b.height,a=r*t/g;let l=s*g/f;const h=Math.max(a,l)/Math.min(a,l),u=Math.abs(1-h);if(u<v){v=u,C++;continue}g-=e,l=s*g/f;let p=o?b.x:b.y;for(let v=m;v<C;v++){const e=d(v),t=aye(e),s=o?p:b.x,a=o?b.y:p,h=r*t/g,u=new nye(s,a,o?h:l,o?l:h);this.applyGap(y,u,c),this.squarify(e,u,i,n),f-=t,p+=h}o?(b.y+=l,b.height-=l):(b.x+=l,b.width-=l),m=C,g=0,v=1/0}const x=b.width<b.height;let w=x?b.x:b.y;for(let S=m;S<p;S++){const e=d(S),t=x?w:b.x,o=x?b.y:w,s=aye(e)/f,r=b.width*(x?s:1),a=b.height*(x?1:s),l=new nye(t,o,r,a);this.applyGap(y,l,c),this.squarify(e,l,i,n),w+=x?r:a}}applyGap(e,t,i){const n=i?.5*this.properties.tile.gap:.5*this.properties.group.gap,o=e=>({left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height}),s=o(e),r=o(t);["top","right","bottom","left"].forEach((e=>{$fe(s[e],r[e])||t.shrink(n,e)}))}createNodeData(){}getGroupBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,{group:a}=r,l=e?r.highlightStyle.group:void 0;return{fill:null!==(t=null===l||void 0===l?void 0:l.fill)&&void 0!==t?t:a.fill,fillOpacity:null!==(i=null===l||void 0===l?void 0:l.fillOpacity)&&void 0!==i?i:a.fillOpacity,stroke:null!==(n=null===l||void 0===l?void 0:l.stroke)&&void 0!==n?n:a.stroke,strokeWidth:null!==(o=null===l||void 0===l?void 0:l.strokeWidth)&&void 0!==o?o:a.strokeWidth,strokeOpacity:null!==(s=null===l||void 0===l?void 0:l.strokeOpacity)&&void 0!==s?s:a.strokeOpacity}}getGroupStyleOverrides(e,t,i,n,o){var s,r;const{id:a,properties:d}=this,{undocumentedGroupFills:c,undocumentedGroupStrokes:h,itemStyler:u}=d,p=null!==(s=n.fill)&&void 0!==s?s:c[Math.min(null!==i&&void 0!==i?i:0,c.length)],g=null!==(r=n.stroke)&&void 0!==r?r:h[Math.min(null!==i&&void 0!==i?i:0,h.length)],m={};if(o||(m.fill=p,m.stroke=g),null!=u){const s=this.cachedDatumCallback(eye(e,o?"highlight":"node"),(()=>u(l({seriesId:a,datum:t,depth:i,highlighted:o,fill:p,stroke:g},n))));Object.assign(m,s)}return m}getTileBaseStyle(e){var t,i,n,o,s;const{properties:r}=this,{tile:a}=r,l=e?r.highlightStyle.tile:void 0;return{fill:null!==(t=null===l||void 0===l?void 0:l.fill)&&void 0!==t?t:a.fill,fillOpacity:null!==(i=null===l||void 0===l?void 0:l.fillOpacity)&&void 0!==i?i:a.fillOpacity,stroke:null!==(n=null===l||void 0===l?void 0:l.stroke)&&void 0!==n?n:a.stroke,strokeWidth:null!==(o=null===l||void 0===l?void 0:l.strokeWidth)&&void 0!==o?o:a.strokeWidth,strokeOpacity:null!==(s=null===l||void 0===l?void 0:l.strokeOpacity)&&void 0!==s?s:a.strokeOpacity}}getTileStyleOverrides(e,t,i,n,o,s,r){var a,d;const{id:c,properties:h,colorScale:u}=this,{fills:p,strokes:g,itemStyler:m}=h,v=null!==(a=s.fill)&&void 0!==a?a:p[n%p.length],f=null!==(d=s.stroke)&&void 0!==d?d:g[n%g.length],y={};if(r||(y.fill=null!=o?u.convert(o):v,y.stroke=f),null!=m){const n=this.cachedDatumCallback(eye(e,r?"highlight":"node"),(()=>m(l({seriesId:c,datum:t,depth:i,highlighted:r,fill:v,stroke:f},s))));Object.assign(y,n)}return y}updateSelections(){var e,t;let i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();if(null==i||this.properties.group.interactive||0===i.children.length||(i=void 0),this.highlightSelection.update(null!=i?[i]:[],void 0,(e=>this.getDatumId(e))),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:n}=null!==(t=this.chart)&&void 0!==t?t:{};if(!n)return;const o=Array.from(this.rootNode);this.rectSelection.update(o,void 0,(e=>this.getDatumId(e))),this.labelSelection.update(o,(e=>{e.append([new sye({tag:0}),new sye({tag:1})])}),(e=>this.getDatumId(e)))}updateNodes(){var e;const{rootNode:t,data:i}=this,{highlightStyle:n,tile:o,group:s}=this.properties,{seriesRect:r}=null!==(e=this.chart)&&void 0!==e?e:{};if(!r||!i)return;const{width:a,height:l}=r,d=Array.from(this.rootNode,(()=>{})),c=Array.from(this.rootNode,(()=>{}));this.squarify(t,new nye(0,0,a,l),d,c),this.updateNodeMidPoint(d);const h=(e,t,i,n,r)=>{var a,l,h,u,p,g;const m=d[e.index];if(null==m)return void(t.visible=!1);const{datum:v,depth:f=-1,index:y,rootIndex:b,colorValue:C}=e,x=0===e.children.length,w=x?n:i,S=x?this.getTileStyleOverrides(String(y),v,f,b,C,w,r):this.getGroupStyleOverrides(String(y),v,f,w,r);t.crisp=!0,t.fill=null!==(a=null===S||void 0===S?void 0:S.fill)&&void 0!==a?a:w.fill,t.fillOpacity=null!==(l=null===S||void 0===S?void 0:S.fillOpacity)&&void 0!==l?l:w.fillOpacity,t.stroke=null!==(h=null===S||void 0===S?void 0:S.stroke)&&void 0!==h?h:w.stroke,t.strokeWidth=null!==(u=null===S||void 0===S?void 0:S.strokeWidth)&&void 0!==u?u:w.strokeWidth,t.strokeOpacity=null!==(p=null===S||void 0===S?void 0:S.strokeOpacity)&&void 0!==p?p:w.strokeOpacity,t.cornerRadius=x?o.cornerRadius:s.cornerRadius,t.zIndex=[0,f,r?1:0];const M=null===(g=e.parent)||void 0===g?void 0:g.children.every((e=>0===e.children.length)),D=null!=e.parent?d[e.parent.index]:void 0,k=null!=e.parent?c[e.parent.index]:void 0;!0===M&&null!=D&&null!=k?(t.clipBBox=m,t.x=D.x+k.left,t.y=D.y+k.top,t.width=D.width-(k.left+k.right),t.height=D.height-(k.top+k.bottom)):(t.clipBBox=void 0,t.x=m.x,t.y=m.y,t.width=m.width,t.height=m.height),t.visible=!0},u=this.getGroupBaseStyle(!1),p=this.getTileBaseStyle(!1);this.rectSelection.each(((e,t)=>h(t,e,u,p,!1)));const g=this.getGroupBaseStyle(!0),m=this.getTileBaseStyle(!0);this.highlightSelection.each(((e,t)=>{h(t,e,g,m,!0)}));const v=Array.from(this.rootNode,(e=>{var t;const{index:i,children:n}=e,r=d[i],a=null===(t=this.labelData)||void 0===t?void 0:t[i];if(null!=r&&null!=a){if(0===n.length){var l,c;const e={width:r.width,height:r.height,meta:null},t=Oie(a.label,this.properties.tile.label,a.secondaryLabel,this.properties.tile.secondaryLabel,{padding:o.padding},(()=>e));if(null==t)return;const{height:i,label:n,secondaryLabel:s}=t,{textAlign:d,verticalAlign:h,padding:u}=o,p=null!==(l=lye[d])&&void 0!==l?l:.5,g=r.x+u+(r.width-2*u)*p,m=null!==(c=dye[h])&&void 0!==c?c:.5,v=r.y+u+.5*i+(r.height-2*u-i)*m;return{label:null!=n?{text:n.text,fontSize:n.fontSize,lineHeight:n.lineHeight,style:this.properties.tile.label,x:g,y:v-.5*(i-n.height)}:void 0,secondaryLabel:null!=s?{text:s.text,fontSize:s.fontSize,lineHeight:s.fontSize,style:this.properties.tile.secondaryLabel,x:g,y:v+.5*(i-s.height)}:void 0,verticalAlign:"middle",textAlign:d}}if(null!=(null===a||void 0===a?void 0:a.label)){var h;const{padding:t,textAlign:i}=s,n=this.groupTitleHeight(e,r);if(null==n)return;const o=r.width-2*t,l=Qfe.wrapText(a.label,{maxWidth:r.width-2*t,font:s.label,textWrap:"never"}),d=null!==(h=lye[i])&&void 0!==h?h:.5;return{label:{text:l,fontSize:s.label.fontSize,lineHeight:qfe.getLineHeight(s.label.fontSize),style:this.properties.group.label,x:r.x+t+o*d,y:r.y+t+.5*n},secondaryLabel:void 0,verticalAlign:"middle",textAlign:i}}}}));this.labelSelection.selectByClass(sye).forEach((e=>{((e,t,i,o)=>{var s;const r=0===e.children.length,a=v[e.index],l=0===i?null===a||void 0===a?void 0:a.label:null===a||void 0===a?void 0:a.secondaryLabel;if(null==a||null==l)return void(t.visible=!1);let d;if(o){const{tile:e,group:t}=n;d=e.secondaryLabel.color,r?0===i&&(d=e.label.color):d=t.label.color}t.text=l.text,t.fontSize=l.fontSize,t.lineHeight=l.lineHeight,t.fontStyle=l.style.fontStyle,t.fontFamily=l.style.fontFamily,t.fontWeight=l.style.fontWeight,t.fill=null!==(s=d)&&void 0!==s?s:l.style.color,t.textAlign=a.textAlign,t.textBaseline=a.verticalAlign,t.x=l.x,t.y=l.y,t.visible=!0,t.zIndex=1})(e.datum,e,e.tag,!1)}))}updateNodeMidPoint(e){this.rootNode.walk((t=>{const i=e[t.index];null!=i&&(t.midPoint.x=i.x+i.width/2,t.midPoint.y=i.y)}))}pickNodeClosestDatum(e){const t=this.pickNodeExactShape(e);return void 0!==t?t:this.pickNodeNearestDistantObject(e,this.rectSelection.nodes())}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:n,secondaryLabelKey:o,childrenKey:s,sizeKey:r,sizeName:a,colorKey:d,colorName:c,tooltip:h}=i,{datum:u,index:p,rootIndex:g,depth:m,children:v}=e;if(null==u||null==m)return;const f=0===v.length,y=[],b=null!=r?u[r]:void 0;null!=b&&y.push({label:a,fallbackLabel:r,value:b});const C=null!=d?u[d]:void 0;let x;null!=C&&y.push({label:c,fallbackLabel:d,value:C}),f?(x=this.getTileBaseStyle(!1),Object.assign(x,this.getTileStyleOverrides(String(p),u,m,g,C,x,!1))):(x=this.getGroupBaseStyle(!1),Object.assign(x,this.getGroupStyleOverrides(String(p),u,m,x,!1)));const w=x.fill,S=f?{marker:{shape:"square",fill:w,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1}}:void 0;return h.formatTooltip({title:null!=n?u[n]:void 0,symbol:S,data:y},l({seriesId:t,datum:u,title:void 0,depth:m,labelKey:n,secondaryLabelKey:o,childrenKey:s,sizeKey:r,sizeName:a,colorKey:d,colorName:c},x))}pickFocus(e){const{focusPath:t}=this;(t.length<2||null==this.focusSorted)&&(t.length=1,this.focusSorted=this.sortChildren(t[0].nodeDatum),t.push({nodeDatum:this.focusSorted.childAt(0),childIndex:0}));const{datumIndexDelta:i,otherIndexDelta:n}=e,o=t[t.length-1];if(1===n){if(o.nodeDatum.children.length>0){this.focusSorted=this.sortChildren(o.nodeDatum);const e={nodeDatum:this.focusSorted.childAt(0),childIndex:0};return t.push(e),this.computeFocusOutputs(e)}}else if(0!==i){var s,r;const e=o.childIndex+i,t=(null!==(s=null===(r=o.nodeDatum.parent)||void 0===r?void 0:r.children.length)&&void 0!==s?s:1)-1;return o.childIndex=Jfe(0,e,t),o.nodeDatum=this.focusSorted.childAt(o.childIndex),this.computeFocusOutputs(o)}const a=super.pickFocus(e);return n<0&&(this.focusSorted=this.sortChildren(t[t.length-1].nodeDatum.parent)),a}getAnimationData(){return{datumSelections:[]}}computeFocusBounds(e){var t;return null===(t=this.rectSelection.at(e.index))||void 0===t?void 0:t.getBBox()}});cye.className="TreemapSeries",cye.type="treemap";var{DEFAULT_DIVERGING_SERIES_COLOR_RANGE:hye,DEFAULT_FONT_FAMILY:uye,DEFAULT_HIERARCHY_FILLS:pye,DEFAULT_HIERARCHY_STROKES:gye,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:mye,DEFAULT_LABEL_COLOUR:vye}=mW.ThemeSymbols,fye={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:e=>new cye(e),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{group:{label:{enabled:!0,color:vye,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:uye,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:mye,fontStyle:void 0,fontWeight:"normal",fontSize:18,minimumFontSize:10,fontFamily:uye,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:mye,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:uye,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:vye},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:mye},secondaryLabel:{color:mye},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:n}=e;const{fills:o,strokes:s}=t(i);return{fills:o,strokes:s,colorRange:n.get(hye),undocumentedGroupFills:n.get(pye),undocumentedGroupStrokes:n.get(gye)}}},{AbstractBarSeriesProperties:yye,BaseProperties:bye,PropertiesArray:Cye,SeriesTooltip:xye,Validate:wye,BOOLEAN:Sye,COLOR_STRING:Mye,FUNCTION:Dye,LINE_DASH:kye,NUMBER:Iye,OBJECT:Aye,OBJECT_ARRAY:Tye,POSITIVE_NUMBER:Eye,RATIO:Rye,STRING:Lye,UNION:Pye,DropShadow:Nye,Label:Fye}=mW,Oye=class extends bye{};dj([wye(Pye(["subtotal","total"],"a total type"))],Oye.prototype,"totalType",2),dj([wye(Iye)],Oye.prototype,"index",2),dj([wye(Lye)],Oye.prototype,"axisLabel",2);var Bye=class extends bye{};dj([wye(Dye,{optional:!0})],Bye.prototype,"renderer",2);var Gye=class extends Fye{constructor(){super(...arguments),this.placement="outside-end",this.padding=6}};dj([wye(Pye(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],Gye.prototype,"placement",2),dj([wye(Eye)],Gye.prototype,"padding",2);var zye=class extends bye{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=(new Nye).set({enabled:!1}),this.label=new Gye,this.tooltip=new Bye}};dj([wye(Lye,{optional:!0})],zye.prototype,"name",2),dj([wye(Mye)],zye.prototype,"fill",2),dj([wye(Mye)],zye.prototype,"stroke",2),dj([wye(Rye)],zye.prototype,"fillOpacity",2),dj([wye(Rye)],zye.prototype,"strokeOpacity",2),dj([wye(kye)],zye.prototype,"lineDash",2),dj([wye(Eye)],zye.prototype,"lineDashOffset",2),dj([wye(Eye)],zye.prototype,"strokeWidth",2),dj([wye(Eye)],zye.prototype,"cornerRadius",2),dj([wye(Dye,{optional:!0})],zye.prototype,"itemStyler",2),dj([wye(Aye)],zye.prototype,"shadow",2),dj([wye(Aye)],zye.prototype,"label",2),dj([wye(Aye)],zye.prototype,"tooltip",2);var _ye=class extends bye{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};dj([wye(Sye)],_ye.prototype,"enabled",2),dj([wye(Mye)],_ye.prototype,"stroke",2),dj([wye(Rye)],_ye.prototype,"strokeOpacity",2),dj([wye(kye)],_ye.prototype,"lineDash",2),dj([wye(Eye)],_ye.prototype,"lineDashOffset",2),dj([wye(Eye)],_ye.prototype,"strokeWidth",2);var Vye=class extends bye{constructor(){super(...arguments),this.positive=new zye,this.negative=new zye,this.total=new zye}};dj([wye(Aye)],Vye.prototype,"positive",2),dj([wye(Aye)],Vye.prototype,"negative",2),dj([wye(Aye)],Vye.prototype,"total",2);var Hye=class extends yye{constructor(){super(...arguments),this.item=new Vye,this.totals=new Cye(Oye),this.line=new _ye,this.tooltip=new xye}};dj([wye(Lye)],Hye.prototype,"xKey",2),dj([wye(Lye)],Hye.prototype,"yKey",2),dj([wye(Lye,{optional:!0})],Hye.prototype,"xName",2),dj([wye(Lye,{optional:!0})],Hye.prototype,"yName",2),dj([wye(Aye)],Hye.prototype,"item",2),dj([wye(Tye)],Hye.prototype,"totals",2),dj([wye(Aye)],Hye.prototype,"line",2),dj([wye(Aye)],Hye.prototype,"tooltip",2);var{adjustLabelPlacement:Wye,SeriesNodePickMode:jye,fixNumericExtent:Uye,valueProperty:Kye,keyProperty:Yye,accumulativeValueProperty:Zye,trailingAccumulatedValueProperty:Xye,ChartAxisDirection:qye,getRectConfig:Qye,createDatumId:Jye,updateRect:$ye,checkCrisp:ebe,updateLabelNode:tbe,prepareBarAnimationFunctions:ibe,collapsedStartingBarPosition:nbe,resetBarSelectionsFn:obe,seriesLabelFadeInAnimation:sbe,resetLabelFn:rbe,animationValidation:abe,DEFAULT_CARTESIAN_DIRECTION_KEYS:lbe,DEFAULT_CARTESIAN_DIRECTION_NAMES:dbe,computeBarFocusBounds:cbe,isContinuous:hbe,Rect:ube,motion:pbe}=mW,gbe=class extends mW.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:lbe,directionNames:dbe,pickModes:[jye.NEAREST_NODE,jye.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:obe,label:rbe}}),this.properties=new Hye,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(e){var t,i,n,o;const{xKey:s,yKey:r,totals:a}=this.properties,{data:d=[]}=this;if(!this.properties.isValid()||!this.visible)return;const c={missingValue:void 0,invalidValue:void 0},h=[],u=a.reduce(((e,t)=>{const i=e.get(t.index);return i?i.push(t):e.set(t.index,[t]),e}),new Map);d.forEach(((e,t)=>{var i;h.push(e),null===(i=u.get(t))||void 0===i||i.forEach((e=>h.push(l(l({},e.toJson()),{},{[s]:e.axisLabel}))))}));const p=[];this.ctx.animationManager.isSkipped()||p.push(abe());const g=null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale,m=null===(i=this.getValueAxis())||void 0===i?void 0:i.scale,{isContinuousX:v,xScaleType:f,yScaleType:y}=this.getScaleInformation({xScale:g,yScale:m}),{processedData:b}=await this.requestDataModel(e,h,{props:[Yye(s,f,{id:"xValue"}),Zye(r,y,l(l({},c),{},{id:"yCurrent"})),Zye(r,y,l(l({},c),{},{missingValue:0,id:"yCurrentTotal"})),Zye(r,y,l(l({},c),{},{id:"yCurrentPositive",validation:e=>hbe(e)&&Number(e)>=0})),Zye(r,y,l(l({},c),{},{id:"yCurrentNegative",validation:e=>hbe(e)&&Number(e)>=0})),Xye(r,y,l(l({},c),{},{id:"yPrevious"})),Kye(r,y,{id:"yRaw"}),Kye("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:e=>"total"===e||"subtotal"===e}),...v?[mW.SMALLEST_KEY_INTERVAL,mW.LARGEST_KEY_INTERVAL]:[],...p]});this.smallestDataInterval=null===(n=b.reduced)||void 0===n?void 0:n.smallestKeyInterval,this.largestDataInterval=null===(o=b.reduced)||void 0===o?void 0:o.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[n],values:o}=t.domain;if(e===this.getCategoryDirection()){const t=i.resolveProcessedDataDefById(this,"xValue");if("key"===(null===t||void 0===t?void 0:t.def.type)&&"category"===(null===t||void 0===t?void 0:t.def.valueType))return n;const o=e===qye.Y,s=this.getCategoryAxis().isReversed();return this.padBandExtent(n,s!==o)}{const e=o[i.resolveProcessedDataIndexById(this,"yCurrent")],t=[Math.min(0,e[0]),Math.max(0,e[1])];return Uye(t)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){var e;const{data:t,dataModel:i,processedData:n}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!t||!o||!s||!i||null==n||0===n.rawData.length)return;const{line:r}=this.properties,a=o.scale,d=s.scale,c=this.getBarDirection()===qye.X,h=null!==(e=this.getBandwidth(o))&&void 0!==e?e:10,u=o.isReversed(),p=s.isReversed();if("ungrouped"!==n.type)return;const g={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return g;const m=[],v=i.resolveKeysById(this,"xValue",n),f=i.resolveColumnById(this,"yRaw",n),y=i.resolveColumnById(this,"totalTypeValue",n),b=i.resolveColumnById(this,"yCurrent",n),C=i.resolveColumnById(this,"yPrevious",n),x=i.resolveColumnById(this,"yCurrentTotal",n);let w=0;const{xKey:S,yKey:M,xName:D,yName:k}=this.properties;n.rawData.forEach(((e,t)=>{const i=y[t],n=this.isSubtotal(i),o=this.isTotal(i),s=o||n,I=v[t];if(null==I)return;const A=Math.round(a.convert(I)),T=f[t],{cumulativeValue:E,trailingValue:R}=function(e,t,i){return e||t?{cumulativeValue:x[i],trailingValue:t?w:0}:{cumulativeValue:b[i],trailingValue:C[i]}}(o,n,t);s&&(w=null!==E&&void 0!==E?E:0);const L=Math.round(d.convert(E)),P=Math.round(d.convert(R)),N=function(e,t,i,n,o){return e?n:t?(null!==n&&void 0!==n?n:0)-(null!==o&&void 0!==o?o:0):i}(o,n,T,E,R),F=(null!==N&&void 0!==N?N:0)>=0,O=this.getSeriesItemType(F,i),{fill:B,stroke:G,strokeWidth:z,label:_}=this.getItemConfig(O),V=F?L:P,H=F?P:L,W=Math.max(z,Math.abs(H-V)),j={x:c?Math.min(V,H):A,y:c?A:Math.min(V,H),width:c?W:h,height:c?h:W},U={x:j.x+j.width/2,y:j.y+j.height/2},K=s?L:P,Y=Math.floor(r.strokeWidth)%2/2,Z=u?L:K,X=u?K:L;let q,Q;c?(q={x:Z+Y,y:j.y},Q={x:X+Y,y:j.y+j.height}):(q={x:j.x,y:Z+Y},Q={x:j.x+j.width,y:X+Y});const J={x:u?Q.x:q.x,y:u?Q.y:q.y,x2:u?q.x:Q.x,y2:u?q.y:Q.y,size:0};m.push(J);const $="subtotal"===O?"total":O,ee=this.getLabelText(_,{itemId:$,value:N,datum:e,xKey:S,yKey:M,xName:D,yName:k}),te={index:t,series:this,itemId:O,datum:e,datumIndex:t,cumulativeValue:null!==E&&void 0!==E?E:0,xValue:I,yValue:N,yKey:M,xKey:S,x:j.x,y:j.y,width:j.width,height:j.height,midPoint:U,fill:B,stroke:G,strokeWidth:z,opacity:1,label:l({text:ee},Wye({isUpward:(null!==N&&void 0!==N?N:-1)>=0!==p,isVertical:!c,placement:_.placement,padding:_.padding,rect:j}))};g.nodeData.push(te),g.labelData.push(te)}));const I=this.properties.line.enabled;return null!=b&&I&&(g.pointData=m),g}updateSeriesItemTypes(){var e,t;const{dataModel:i,seriesItemTypes:n,processedData:o}=this;if(!i||!o)return;n.clear();const s=i.resolveProcessedDataIndexById(this,"yCurrentPositive"),r=i.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=i.resolveProcessedDataIndexById(this,"totalTypeValue"),l=null!==(e=o.domain.values[s])&&void 0!==e?e:[],d=null!==(t=o.domain.values[r])&&void 0!==t?t:[];l.length>0&&n.add("positive"),d.length>0&&n.add("negative");const c=null===o||void 0===o?void 0:o.domain.values[a];c&&c.forEach((e=>{"total"!==e&&"subtotal"!==e||n.add("total")}))}isSubtotal(e){return"subtotal"===e}isTotal(e){return"total"===e}nodeFactory(){return new ube}getSeriesItemType(e,t){return null!==t&&void 0!==t?t:e?"positive":"negative"}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=null!==t&&void 0!==t?t:[];return i.update(n)}getItemStyle(e,t,i,n){var o,s,r,a,d,c,h,u;const{id:p,properties:g}=this,m=g.item["subtotal"===i?"total":i],v=n?g.highlightStyle.item:void 0,{itemStyler:f}=m,{xKey:y,yKey:b}=g,C={fill:null!==(o=null===v||void 0===v?void 0:v.fill)&&void 0!==o?o:m.fill,fillOpacity:null!==(s=null===v||void 0===v?void 0:v.fillOpacity)&&void 0!==s?s:m.fillOpacity,stroke:null!==(r=null===v||void 0===v?void 0:v.stroke)&&void 0!==r?r:m.stroke,strokeWidth:null!==(a=null===v||void 0===v?void 0:v.strokeWidth)&&void 0!==a?a:m.strokeWidth,strokeOpacity:null!==(d=null===v||void 0===v?void 0:v.strokeOpacity)&&void 0!==d?d:m.strokeOpacity,lineDash:null!==(c=null!==(h=null===v||void 0===v?void 0:v.lineDash)&&void 0!==h?h:m.lineDash)&&void 0!==c?c:[],lineDashOffset:null!==(u=null===v||void 0===v?void 0:v.lineDashOffset)&&void 0!==u?u:m.lineDashOffset,cornerRadius:m.cornerRadius};if(null!=f){const o=this.cachedDatumCallback(Jye(e,n?"highlight":"node"),(()=>f(l({seriesId:p,itemId:i,datum:t,xKey:y,yKey:b,highlighted:n},C))));Object.assign(C,o)}return C}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{id:n}=this,{yKey:o,highlightStyle:{item:s}}=this.properties,r=this.getCategoryAxis(),a=ebe(null===r||void 0===r?void 0:r.scale,null===r||void 0===r?void 0:r.visibleRange,this.smallestDataInterval,this.largestDataInterval),l=this.getCategoryDirection()===qye.X;t.each(((e,t)=>{const r=t.itemId,{fillOpacity:d,strokeOpacity:c,strokeWidth:h,lineDash:u,lineDashOffset:p,cornerRadius:g,itemStyler:m,shadow:v}=this.getItemConfig(r),f={fill:t.fill,stroke:t.stroke,fillOpacity:d,strokeOpacity:c,lineDash:u,lineDashOffset:p,fillShadow:v,strokeWidth:this.getStrokeWidth(h),cornerRadius:g},y=l?t.width>0:t.height>0,b=Qye(this,Jye(t.index,"node"),{datum:t,isHighlighted:i,style:f,highlightStyle:s,itemStyler:m,seriesId:n,itemId:t.itemId,value:t.yValue,yKey:o});b.crisp=a,b.visible=y,$ye(e,b)}))}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;if(0===t.length)return i.update([]);const n=t.filter((e=>{const{label:t}=this.getItemConfig(e.itemId);return t.enabled}));return i.update(n)}updateLabelNodes(e){e.labelSelection.each(((e,t)=>{tbe(e,this.getItemConfig(t.itemId).label,t.label)}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:o}=this,{xKey:s,xName:r,yKey:a,yName:d,tooltip:c}=o,h=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!n||0===n.rawData.length||!h||!u)return;const{datumIndex:p}=e,g=n.rawData[p],m=i.resolveKeysById(this,"xValue",n)[p],v=i.resolveColumnById(this,"yRaw",n)[p],f=i.resolveColumnById(this,"yCurrentTotal",n),y=i.resolveColumnById(this,"totalTypeValue",n);if(null==m)return;const b=y[p],C=(null!==v&&void 0!==v?v:0)>=0,x=this.getSeriesItemType(C,b);let w;if(this.isTotal(b))w=f[p];else if(this.isSubtotal(b)){w=f[p];for(let e=p-1;e>=0;e-=1)if(this.isSubtotal(y[e])){w-=f[e];break}}else w=v;const S=this.getItemStyle(String(p),g,x,!1);return c.formatTooltip({heading:h.formatDatum(m),symbol:this.legendItemSymbol(x),data:[{label:d,fallbackLabel:a,value:u.formatDatum(w)}]},l({seriesId:t,datum:g,title:d,itemId:x,xKey:s,xName:r,yKey:a,yName:d},S))}legendItemSymbol(e){const{fill:t,stroke:i,fillOpacity:n,strokeOpacity:o,strokeWidth:s}=this.getItemConfig(e);return{marker:{fill:t,stroke:i,fillOpacity:n,strokeOpacity:o,strokeWidth:s}}}getLegendData(e){if("category"!==e)return[];const{id:t,seriesItemTypes:i}=this,n=[],{showInLegend:o}=this.properties;return i.forEach((e=>{const{name:i}=this.getItemConfig(e);var s;n.push({legendType:"category",id:t,itemId:e,seriesId:t,enabled:!0,label:{text:null!==i&&void 0!==i?i:(s=e,s.charAt(0).toUpperCase()+s.substring(1))},symbol:this.legendItemSymbol(e),hideInLegend:!o,isFixed:!0})})),n}toggleSeriesItem(){}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i,contextData:n,paths:o}=e;const s=ibe(nbe(this.isVertical(),this.axes,"normal"));pbe.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s),sbe(this,"labels",this.ctx.animationManager,i);const{pointData:r}=n;if(!r)return;const[a]=o;this.isVertical()?this.animateConnectorLinesVertical(a,r):this.animateConnectorLinesHorizontal(a,r)}animateConnectorLinesHorizontal(e,t){const{path:i}=e;this.updateLineNode(e);const n=this.getValueAxis(),o=null===n||void 0===n?void 0:n.isReversed(),s=o?(e,t)=>e<t:(e,t)=>e>t,r=null===n||void 0===n?void 0:n.scale.convert(0),a=t.reduce(((e,t)=>(s(t.x,e)&&(e=t.x),e)),o?1/0:0),l=(e,t,i,n,o)=>(e-t)/(i-t)*(o-n)+n;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:r,to:a,ease:mW.Motion.easeOut,collapsable:!1,onUpdate(n){i.clear(!0),t.forEach(((e,t)=>{const o=l(n,r,a,r,e.x),s=l(n,r,a,r,e.x2);0!==t&&i.lineTo(o,e.y),i.moveTo(s,e.y2)})),e.checkPathDirty()}})}animateConnectorLinesVertical(e,t){const{path:i}=e;this.updateLineNode(e);const n=this.getValueAxis(),o=null===n||void 0===n?void 0:n.isReversed(),s=o?(e,t)=>e>t:(e,t)=>e<t,r=null===n||void 0===n?void 0:n.scale.convert(0),a=t.reduce(((e,t)=>(s(t.y,e)&&(e=t.y),e)),o?0:1/0),l=(e,t,i,n,o)=>(e-t)/(i-t)*(o-n)+n;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:r,to:a,ease:mW.Motion.easeOut,collapsable:!1,onUpdate(n){i.clear(!0),t.forEach(((e,t)=>{const o=l(n,r,a,r,e.y),s=l(n,r,a,r,e.y2);0!==t&&i.lineTo(e.x,o),i.moveTo(e.x2,s)})),e.checkPathDirty()}})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}resetConnectorLinesPath(e){let{contextData:t,paths:i}=e;if(0===i.length)return;const[n]=i;this.updateLineNode(n);const{path:o}=n;o.clear(!0);const{pointData:s}=t;s&&(s.forEach(((e,t)=>{0!==t&&o.lineTo(e.x,e.y),o.moveTo(e.x2,e.y2)})),n.checkPathDirty())}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:o,lineDashOffset:s}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:this.getStrokeWidth(i),strokeOpacity:n,lineDash:o,lineDashOffset:s,lineJoin:"round",pointerEvents:mW.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds(e){var t;let{datumIndex:i}=e;return cbe(null===(t=this.contextNodeData)||void 0===t?void 0:t.nodeData[i])}};gbe.className="WaterfallSeries",gbe.type="waterfall";var mbe={strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:mW.ThemeSymbols.DEFAULT_FONT_FAMILY,color:mW.ThemeSymbols.DEFAULT_LABEL_COLOUR,formatter:void 0,placement:"outside-end"}},vbe={series:{item:{positive:mbe,negative:mbe,total:mbe},line:{stroke:mW.ThemeSymbols.PALETTE_NEUTRAL_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},{ThemeSymbols:fbe,ThemeConstants:ybe}=mW,bbe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:e=>new gbe(e),tooltipDefaults:{range:"exact"},defaultAxes:mW.swapAxisCondition([{type:ybe.CARTESIAN_AXIS_TYPE.NUMBER,position:ybe.CARTESIAN_POSITION.LEFT},{type:ybe.CARTESIAN_AXIS_TYPE.CATEGORY,position:ybe.CARTESIAN_POSITION.BOTTOM}],(e=>"horizontal"===(null===e||void 0===e?void 0:e.direction))),themeTemplate:vbe,paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:n,palette:o}=e;if("user-indexed"===n){const{fills:e,strokes:n}=t(i);return{line:{stroke:o.neutral.stroke},item:{positive:{fill:e[0],stroke:n[0]},negative:{fill:e[1],stroke:n[1]},total:{fill:e[2],stroke:n[2]}}}}return{line:{stroke:o.neutral.stroke},item:{positive:{fill:o.altUp.fill,stroke:o.altUp.stroke,label:{color:fbe.DEFAULT_LABEL_COLOUR}},negative:{fill:o.altDown.fill,stroke:o.altDown.stroke,label:{color:fbe.DEFAULT_LABEL_COLOUR}},total:{fill:o.neutral.fill,stroke:o.neutral.stroke,label:{color:fbe.DEFAULT_LABEL_COLOUR}}}}}};function Cbe(){mW.moduleRegistry.register(yU,BU,GK,A1,W1,W8,E3,F7,_9,zee,Yte,kie,Zde,J1,c2,z2,U2,x3,Mse,Gne,Jre,bre,Vae,jle,ale,D4,m6,b8,Rne,Wde,VU,Ehe,Phe,Sue,Gue,wK,ege,LK,lve,gme,j4,Ace,efe,Y4,Dfe,R6,fye,bbe,q5),mW.enterpriseModule.isEnterprise=!0,mW.enterpriseModule.styles='.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-dialog{display:flex;flex-direction:column;font-size:14px}.ag-charts-dialog__tabs{display:flex;flex-direction:column}.ag-charts-dialog__header{border-bottom:1px solid var(--ag-charts-border-color);display:flex}.ag-charts-dialog__tab-list{display:flex;gap:var(--ag-charts-input-spacing)}.ag-charts-dialog__drag-handle{align-items:center;color:inherit;cursor:grab;display:flex;padding:1px 6px;text-align:center}.ag-charts-dialog__drag-handle--dragging{cursor:grabbing}.ag-charts-dialog__tab-button{background:none;border:0;border-bottom:2px solid transparent;border-radius:0;color:var(--ag-charts-dialog-tab-color--inactive);margin-bottom:-1px;padding:var(--ag-charts-input-padding) calc(var(--ag-charts-input-padding) / 2)}.ag-charts-dialog__tab-button:hover{background:none}.ag-charts-dialog__tab-button--active{border-color:currentColor;color:inherit}.ag-charts-dialog__drag-handle+.ag-charts-dialog__tab-button{margin-left:calc(var(--ag-charts-input-spacing) * -1)}.ag-charts-button.ag-charts-dialog__close-button{background:none;border:0;margin-left:auto;padding:1px 6px}.ag-charts-dialog__close-button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-dialog__tab-panel{display:none;flex-direction:column;gap:calc(var(--ag-charts-input-spacing) * 2);margin:0 calc(var(--ag-charts-input-spacing) * 2);padding:calc(var(--ag-charts-input-spacing) * 2) 0}.ag-charts-dialog__tab-panel--active{display:flex}.ag-charts-dialog__input-group-line{display:flex;gap:18px}.ag-charts-dialog__input-group{align-items:center;display:flex;font-size:12px}.ag-charts-dialog__input-group-label{color:var(--ag-charts-dialog-input-group-label-color);margin-right:5px}.ag-charts-dialog__input-group-label[for]{cursor:pointer}.ag-charts-dialog__button{border-radius:0;margin-right:-1px}.ag-charts-dialog__button.ag-charts-dialog__button--active{background:var(--ag-charts-input-background-color--active);border-color:var(--ag-charts-input-border-color--active);color:var(--ag-charts-input-color--active);z-index:var(--input-layer-active)}.ag-charts-dialog__button:first-child,.ag-charts-dialog__input-group-label+.ag-charts-dialog__button{border-bottom-left-radius:var(--ag-charts-input-border-radius);border-top-left-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__button:last-child{border-bottom-right-radius:var(--ag-charts-input-border-radius);border-top-right-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__color-picker-button{--color: #000;background:var(--color);border:none;color:transparent;height:26px;width:26px}.ag-charts-dialog__color-picker-button:hover{background:var(--color)}.ag-charts-dialog__color-picker-button--multi-color,.ag-charts-dialog__color-picker-button--multi-color:hover{background:linear-gradient(135deg,red 0%,#ff0 calc(100% * 1 / 6),#0f0 calc(100% * 2 / 6),#0ff 50%,#00f calc(100% * 4 / 6),#f0f calc(100% * 5 / 6),red 100%)}.ag-charts-color-picker{width:190px;padding:8px;--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>\');--multi-color: linear-gradient( 135deg, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-color-picker__content{display:flex;flex-direction:column}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:6px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-row{display:flex;gap:8px;align-items:center;margin-bottom:4px;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:99px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button{width:36px;margin-left:var(--inset);height:var(--track-height);border-radius:99px;border:0;background:var(--multi-color);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button--hidden{display:none}.ag-charts-color-picker__multi-color-button--active{box-shadow:inset 0 0 0 1px #0003;outline-offset:1px;outline:2px solid #2196f3}.ag-charts-color-picker__hue-input{flex:1 0 0}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:4px;overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-active-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:2px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-label--multi-color{background:var(--multi-color)}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__line-stroke-width-menu,.ag-charts-annotations__line-style-type-menu,.ag-charts-annotations__text-size-menu{.ag-charts-menu__row:first-child{border-radius:0}}.ag-charts-annotations__stroke-width-button:before{--stroke-width-color: var(--ag-charts-toolbar-foreground-color);background:var(--stroke-width-color);content:"";margin-right:var(--ag-charts-toolbar-button-padding);height:min(var(--stroke-width),20px);width:12px}.ag-charts-annotations__stroke-width-button[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-annotations__color-picker-button{--emblem: var(--color)}.ag-charts-annotations__color-picker-button--multi-color{--emblem: linear-gradient( to right, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-annotations__color-picker-button:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--emblem)}.ag-charts-annotations__color-picker-button[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-annotations__toolbar-menu{min-width:200px}.ag-charts-annotations__text-size-menu{--item-padding: 4px 8px;border-top-left-radius:0;border-top-right-radius:0;width:34px}.ag-charts-annotations__line-stroke-width-menu{--item-padding: 6px;column-gap:6px}.ag-charts-annotations__line-style-type-menu{--item-padding: 6px;column-gap:0}.ag-charts-annotations__axis-button-wrapper{position:absolute;left:0;top:0;user-select:none;font:16px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-annotations);box-sizing:border-box}.ag-charts-annotations__axis-button-wrapper--hidden{display:none}.ag-charts-annotations__axis-button{cursor:pointer;border:none;border-radius:2px;padding:0;line-height:16px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-axis-label-color)}.ag-charts-dialog--annotation-settings{min-height:233px;width:289px}.ag-charts-dialog--annotation-settings .ag-charts-textarea{height:calc(10px * 2 + var(--line-height) * 1em * 3 + 2px);overflow-y:auto;resize:vertical}.ag-charts-context-menu{background:#f8f8f8;border:1px solid #babfc7;border-radius:5px;box-shadow:0 1px 4px 1px #babfc766;color:#181d1f;font:13px Verdana,sans-serif;transition:transform .1s ease;white-space:nowrap;z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-context-menu.ag-charts-dark-context-menu{color:#fff;background:#15181c}.ag-charts-context-menu__cover{position:fixed;left:0;top:0}.ag-charts-context-menu__menu{display:flex;flex-direction:column;padding:.5em 0}.ag-charts-context-menu__menu:focus{outline:none}.ag-charts-context-menu__item{background:none;border:none;box-sizing:border-box;font:inherit;padding:.5em 1em;text-align:left;-webkit-appearance:none;-moz-appearance:none}.ag-charts-context-menu__item.ag-charts-dark-context-menu{color:#fff}.ag-charts-context-menu__item:focus{background:#2196f31a}.ag-charts-context-menu__item:focus.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-context-menu__item:active{background:#2196f333}.ag-charts-context-menu__item:active.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-context-menu__item:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-context-menu__item[aria-disabled=true]{border:none;opacity:.5;text-align:left}.ag-charts-context-menu__item[aria-disabled=true]:focus{background:inherit;cursor:inherit}.ag-charts-context-menu__divider{margin:5px 0;background:#babfc7;height:1px}.ag-charts-context-menu__divider.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font:12px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-charts-crosshair-label-content{padding:0 8px;border-radius:2px;line-height:20px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-charts-crosshair-label--hidden{visibility:hidden!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;outline:none;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--ag-charts-input-placeholder-color);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}.ag-charts-chart-toolbar__menu{min-width:200px}.ag-charts-range-buttons .ag-charts-toolbar__button{padding:var(--ag-charts-toolbar-button-padding) calc(var(--ag-charts-toolbar-button-padding) * 1.5)}.ag-charts-zoom-buttons{align-items:center;display:flex;height:calc(var(--ag-charts-toolbar-size) + 10px);justify-content:center;overflow:hidden;padding-bottom:10px;pointer-events:none;width:100%;.ag-charts-toolbar{--ag-charts-toolbar-size: var(--ag-charts-toolbar-size-small);--ag-charts-toolbar-font-size: var(--ag-charts-toolbar-font-size-small);--ag-charts-toolbar-button-padding: var(--ag-charts-toolbar-button-padding-small);display:flex;height:var(--ag-charts-toolbar-size);justify-content:center;opacity:1;pointer-events:auto;transition:opacity .2s ease-in-out,transform .4s ease-in-out;.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar__label{padding-left:calc(var(--ag-charts-toolbar-gap) / 2);padding-right:calc(var(--ag-charts-toolbar-gap) / 2)}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{padding-left:0}}.ag-charts-toolbar__button--gap{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-zoom-buttons__toolbar--hidden{opacity:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out}}.ag-charts-shared-toolbar{gap:var(--ag-charts-toolbar-gap);.ag-charts-toolbar__button{border-radius:var(--ag-charts-button-radius);margin:0}}\n',mW.enterpriseModule.licenseManager=e=>{var t,i;return new D8(null!==(t=null===(i=e.container)||void 0===i?void 0:i.ownerDocument)&&void 0!==t?t:"undefined"===typeof document?void 0:document)},mW.enterpriseModule.injectWatermark=I8}var xbe={VERSION:xE,_Scene:aW,_Theme:uW,_Util:gW,create:oW.create.bind(oW),createSparkline:oW.__createSparkline.bind(oW),setup:function(){Cbe(),lV()},setGridContext:D8.setGridContext.bind(D8),setLicenseKey:D8.setLicenseKey.bind(D8),isEnterprise:!0};Cbe();const wbe=["nodes"],Sbe=["xAxis","yAxis"],Mbe=["chartType","chartPalette","chartOptions"],Dbe=["dimOpacity"],kbe=["item","series"],Ibe=["axes","series","seriesDefaults"],Abe=["chartType","chartOptions"],Tbe=["type"],Ebe=["tracking"];var Rbe=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],n=e[1],o=e[2],s=e[3];i=this.ff(i,n,o,s,t[0],7,-680876936),s=this.ff(s,i,n,o,t[1],12,-389564586),o=this.ff(o,s,i,n,t[2],17,606105819),n=this.ff(n,o,s,i,t[3],22,-1044525330),i=this.ff(i,n,o,s,t[4],7,-176418897),s=this.ff(s,i,n,o,t[5],12,1200080426),o=this.ff(o,s,i,n,t[6],17,-1473231341),n=this.ff(n,o,s,i,t[7],22,-45705983),i=this.ff(i,n,o,s,t[8],7,1770035416),s=this.ff(s,i,n,o,t[9],12,-1958414417),o=this.ff(o,s,i,n,t[10],17,-42063),n=this.ff(n,o,s,i,t[11],22,-1990404162),i=this.ff(i,n,o,s,t[12],7,1804603682),s=this.ff(s,i,n,o,t[13],12,-40341101),o=this.ff(o,s,i,n,t[14],17,-1502002290),n=this.ff(n,o,s,i,t[15],22,1236535329),i=this.gg(i,n,o,s,t[1],5,-165796510),s=this.gg(s,i,n,o,t[6],9,-1069501632),o=this.gg(o,s,i,n,t[11],14,643717713),n=this.gg(n,o,s,i,t[0],20,-373897302),i=this.gg(i,n,o,s,t[5],5,-701558691),s=this.gg(s,i,n,o,t[10],9,38016083),o=this.gg(o,s,i,n,t[15],14,-660478335),n=this.gg(n,o,s,i,t[4],20,-405537848),i=this.gg(i,n,o,s,t[9],5,568446438),s=this.gg(s,i,n,o,t[14],9,-1019803690),o=this.gg(o,s,i,n,t[3],14,-187363961),n=this.gg(n,o,s,i,t[8],20,1163531501),i=this.gg(i,n,o,s,t[13],5,-1444681467),s=this.gg(s,i,n,o,t[2],9,-51403784),o=this.gg(o,s,i,n,t[7],14,1735328473),n=this.gg(n,o,s,i,t[12],20,-1926607734),i=this.hh(i,n,o,s,t[5],4,-378558),s=this.hh(s,i,n,o,t[8],11,-2022574463),o=this.hh(o,s,i,n,t[11],16,1839030562),n=this.hh(n,o,s,i,t[14],23,-35309556),i=this.hh(i,n,o,s,t[1],4,-1530992060),s=this.hh(s,i,n,o,t[4],11,1272893353),o=this.hh(o,s,i,n,t[7],16,-155497632),n=this.hh(n,o,s,i,t[10],23,-1094730640),i=this.hh(i,n,o,s,t[13],4,681279174),s=this.hh(s,i,n,o,t[0],11,-358537222),o=this.hh(o,s,i,n,t[3],16,-722521979),n=this.hh(n,o,s,i,t[6],23,76029189),i=this.hh(i,n,o,s,t[9],4,-640364487),s=this.hh(s,i,n,o,t[12],11,-421815835),o=this.hh(o,s,i,n,t[15],16,530742520),n=this.hh(n,o,s,i,t[2],23,-995338651),i=this.ii(i,n,o,s,t[0],6,-198630844),s=this.ii(s,i,n,o,t[7],10,1126891415),o=this.ii(o,s,i,n,t[14],15,-1416354905),n=this.ii(n,o,s,i,t[5],21,-57434055),i=this.ii(i,n,o,s,t[12],6,1700485571),s=this.ii(s,i,n,o,t[3],10,-1894986606),o=this.ii(o,s,i,n,t[10],15,-1051523),n=this.ii(n,o,s,i,t[1],21,-2054922799),i=this.ii(i,n,o,s,t[8],6,1873313359),s=this.ii(s,i,n,o,t[15],10,-30611744),o=this.ii(o,s,i,n,t[6],15,-1560198380),n=this.ii(n,o,s,i,t[13],21,1309151649),i=this.ii(i,n,o,s,t[4],6,-145523070),s=this.ii(s,i,n,o,t[11],10,-1120210379),o=this.ii(o,s,i,n,t[2],15,718787259),n=this.ii(n,o,s,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(n,e[1]),e[2]=this.add32(o,e[2]),e[3]=this.add32(s,e[3])}cmn(e,t,i,n,o,s){return t=this.add32(this.add32(t,e),this.add32(n,s)),this.add32(t<<o|t>>>32-o,i)}ff(e,t,i,n,o,s,r){return this.cmn(t&i|~t&n,e,t,o,s,r)}gg(e,t,i,n,o,s,r){return this.cmn(t&n|i&~n,e,t,o,s,r)}hh(e,t,i,n,o,s,r){return this.cmn(t^i^n,e,t,o,s,r)}ii(e,t,i,n,o,s,r){return this.cmn(i^(t|~n),e,t,o,s,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let n;for(n=64;n<=e.length;n+=64)this.md5cycle(i,this.md5blk(e.substring(n-64,n)));e=e.substring(n-64);const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(i,o),n=0;n<16;n++)o[n]=0;return o[14]=8*t,this.md5cycle(i,o),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",n=0;for(;n<4;n++)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}},Lbe={"01":"GRID","02":"CHARTS","0102":"BOTH"},Pbe="https://ag-grid.com/licensing/",Nbe=class e{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new Rbe,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(e.licenseKey),i="AG Grid ".concat("BOTH"===t.currentLicenseType?"and AG Charts ":"","Enterprise"),n=void 0===t.suppliedLicenseType?"":"AG ".concat("BOTH"===t.suppliedLicenseType?"Grid and AG Charts":"GRID"===t.suppliedLicenseType?"Grid":"Charts"," Enterprise");if(t.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(t.expired){const o=e.getGridReleaseDate(),s=e.formatDate(o);this.outputExpiredKey(t.expiry,s,i,n)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,n):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,n)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const n=i.length-32,o=i.substring(n),s=i.substring(0,n),[r,a,l]=e.extractBracketedInformation(i);return{md5:o,license:s,version:r,isTrial:a,type:l}}getLicenseDetails(t){const i=e.chartsLicenseManager?"BOTH":"GRID";if(null===t||void 0===t||!t.length)return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:i};const n=e.getGridReleaseDate(),{md5:o,license:s,version:r,isTrial:a,type:l}=e.extractLicenseComponents(t);let d,c,h,u=o===this.md5.md5(s)&&-1===t.indexOf("For_Trialing_ag-Grid_Only"),p=null,g=!1;function m(){d=p<new Date,c=void 0}if(u&&(p=e.extractExpiry(s),u=!isNaN(p.getTime()),u))switch(c=n>p,r){case"legacy":case"2":a&&m();break;case"3":null!==l&&void 0!==l&&l.length?(h=l,l!==Lbe["01"]&&l!==Lbe["0102"]||"BOTH"===i&&"BOTH"!==h?(u=!1,g=!0):a&&m()):u=!1}return u?{licenseKey:t,valid:u,expiry:e.formatDate(p),expired:c,version:r,isTrial:a,trialExpired:d,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:h}:{licenseKey:t,valid:u,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:h}}isDisplayWatermark(){var e;return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!(null===(e=this.watermarkMessage)||void 0===e||!e.length)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const e=(this.document.defaultView||window).location,{hostname:t=""}=e;return t}isForceWatermark(){const e=(this.document.defaultView||window).location,{pathname:t}=e;return!!t&&-1!==t.indexOf("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),n=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+n}static getGridReleaseDate(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,o,s,r,a,l,d,c="",h=0;const u=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;h<u.length;)r=i.indexOf(u.charAt(h++)),a=i.indexOf(u.charAt(h++)),l=i.indexOf(u.charAt(h++)),d=i.indexOf(u.charAt(h++)),n=r<<2|a>>4,o=(15&a)<<4|l>>2,s=(3&l)<<6|d,c+=String.fromCharCode(n),64!=l&&(c+=String.fromCharCode(o)),64!=d&&(c+=String.fromCharCode(s));return c=e.utf8_decode(c),c}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}static setChartsLicenseManager(e){this.chartsLicenseManager=e}static setLicenseKey(e){var t;this.licenseKey=e,null===(t=this.chartsLicenseManager)||void 0===t||t.setLicenseKey(e,!0)}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map((e=>e.replace("[","").replace("]","")));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter((e=>"TRIAL"===e)).length,n=t.filter((e=>0===e.indexOf("v")))[0],o=n?n.replace("v",""):"legacy",s=Lbe[t.filter((e=>Lbe[e]))[0]];return[o,i,s]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(e,t,i){e?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(i," only and does not cover you for ").concat(t,".")," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(Pbe,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(Pbe,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,t,i){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(i," expired on ").concat(e,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(e," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(e," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,t,i,n){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions of ".concat(n," released before ").concat(e,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};Nbe.RELEASE_INFORMATION="MTczMzc1NjY3OTc2Mw==";var Fbe=Nbe,Obe={selector:"AG-WATERMARK",component:class extends En{constructor(){super('<div class="ag-watermark">\n                <div data-ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>'),this.eLicenseTextRef=Tn,this.registerCSS('.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;transition:opacity 1s ease-out 3s;&:before{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5QjlCOUIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOUI5QjlCIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==");background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}:where(.ag-ltr) .ag-watermark{right:25px}:where(.ag-rtl) .ag-watermark{left:25px}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}:where(.ag-ltr) .ag-watermark-text{padding-left:.7rem}:where(.ag-rtl) .ag-watermark-text{padding-right:.7rem}')}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((()=>this.addCssClass("ag-opacity-zero")),0),window.setTimeout((()=>this.setDisplayed(!1)),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}}},Bbe=class extends Si{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new Fbe(Tt(this.beans)),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new Fbe(null).getLicenseDetails(e)}getWatermarkSelector(){return Obe}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){Fbe.setLicenseKey(e)}static setChartsLicenseManager(e){Fbe.setChartsLicenseManager(e)}},Gbe={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},zbe="\r\n";function _be(e,t,i){if(!t&&""!==t&&0!==t)return"";let n=t;return"boolean"===typeof t&&i&&(n=i(t))," ".concat(e,'="').concat(n,'"')}function Vbe(e,t){let i="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach((e=>{Object.keys(e.map).forEach((n=>{i+=_be(e.prefix+n,e.map[n],t)}))})),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach((n=>{i+=_be(n,e.properties.rawMap[n],t)})));let n="<"+e.name+i;return e.children||null!=e.textNode?null!=e.textNode?n+">"+e.textNode+"</"+e.name+">"+zbe:(n+=">\r\n",e.children&&e.children.forEach((e=>{n+=Vbe(e,t)})),n+"</"+e.name+">"+zbe):n+"/>"+zbe}var Hbe=e=>Math.ceil(9525*e),Wbe=(e,t)=>{if(!t)return;let i;if("number"===typeof t)i=t;else{i=t({rowIndex:e})}return i},jbe=(e,t)=>{const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["version"];e.version||(e.version="1.0"),e.encoding&&t.push("encoding"),e.standalone&&t.push("standalone");const i=t.map((t=>"".concat(t,'="').concat(e[t],'"'))).join(" ");return"".concat("<?","xml ").concat(i," ").concat("?>")}({encoding:"UTF-8",standalone:"yes"}),n=Vbe(e);return t?n:"".concat(i).concat(n)},Ube=e=>{const t=String.fromCharCode,i=Math.floor(e/26),n=e%26;return i&&26!==e?n?i<26?t(65+i-1)+t(65+n-1):Ube(i)+t(65+n-1):Ube(i-1)+"Z":t(65+e-1)},Kbe=e=>{if(null==e)return null;let t="";for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);if(n>=0&&n<=31&&10!==n){const e=n.toString(16).toUpperCase().padStart(4,"0");t+="_x".concat(e,"_")}else t+=e[i]}return t},Ybe=e=>{const t=[];for(const i of e.keys()){const e=i.toString(),n={name:"t",textNode:Ho(Kbe(e),!1)};e.trim().length!==e.length&&(n.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[n]})}return t},Zbe={getTemplate(e){const{name:t,ContentType:i,Extension:n,PartName:o}=e;return{name:t,properties:{rawMap:{Extension:n,PartName:o,ContentType:i}}}}},Xbe=e=>"jpg"===e?"jpeg":e,qbe={getTemplate(e){const t=new Array(e).fill(void 0).map(((e,t)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet".concat(t+1,".xml")}))),i=Jxe.size,n=$xe.size,o={};ewe.forEach((e=>{o[Xbe(e.type)]=!0}));const s=new Array(i).fill(void 0).map(((e,t)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing".concat(t+1,".xml")}))),r=[];iwe.forEach((e=>{let{name:t}=e;r.push({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:"/xl/tables/".concat(t,".xml")})}));const a=Object.keys(o).map((e=>({name:"Default",ContentType:"image/".concat(e),Extension:e})));n&&a.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:[...a,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...t,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...s,...r,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map((e=>Zbe.getTemplate(e)))}}},Qbe={getTemplate(e){const t=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t}]}}},Jbe=(e,t)=>({name:"xdr:".concat(e),children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}),$be=e=>{const t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(e.recolor&&e.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},eCe=(e,t)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:null!=e.altText?e.altText:void 0}},children:[$be(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),tCe=e=>{if(!e.saturation&&!e.tint)return;const t=[];return e.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:1e3*e.saturation}}}),e.tint&&t.push({name:"a:tint",properties:{rawMap:{val:1e3*e.tint}}}),t},iCe=(e,t)=>{let i;if(e.transparency){const t=Math.min(Math.max(e.transparency,0),100);i=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*t)}}}]}if(e.recolor)switch(i||(i=[]),e.recolor.toLocaleLowerCase()){case"grayscale":i.push({name:"a:grayscl"});break;case"sepia":i.push((o={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(n={color:"black"}).color}},children:tCe(n)},{name:"a:srgbClr",properties:{rawMap:{val:o.color}},children:tCe(o)}]}));break;case"washout":i.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}var n,o;return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId".concat(t),"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:i},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},nCe=(e,t)=>{const i={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(e.rotation){const t=e.rotation;i.properties={rawMap:{rot:6e4*Math.min(Math.max(t,0),360)}}}return{name:"xdr:spPr",children:[i,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},oCe=(e,t,i,n)=>({name:"xdr:pic",children:[eCe(e,t+1),iCe(e,i+1),nCe(e,n)]}),sCe={getTemplate(e){const{sheetIndex:t}=e,i=Jxe.get(t),n=twe.get(t),o=i.map(((e,t)=>{const i=(e=>{e.fitCell=!!e.fitCell||!e.width||!e.height;const{position:t={},fitCell:i,width:n=0,height:o=0,totalHeight:s,totalWidth:r}=e,{offsetX:a=0,offsetY:l=0,row:d=1,rowSpan:c=1,column:h=1,colSpan:u=1}=t;return{from:{row:d-1,col:h-1,offsetX:Hbe(a),offsetY:Hbe(l)},to:{row:d-1+(i?1:c-1),col:h-1+(i?1:u-1),offsetX:Hbe(n+a),offsetY:Hbe(o+l)},height:Hbe(s||o),width:Hbe(r||n)}})(e);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Jbe("from",i.from),Jbe("to",i.to),oCe(e,t,n.get(e.id).index,i),{name:"xdr:clientData"}]}}));return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:o}}},rCe=sCe,aCe={getTemplate(e){const{Id:t,Type:i,Target:n}=e;return{name:"Relationship",properties:{rawMap:{Id:t,Type:i,Target:n}}}}},lCe=aCe,dCe={getTemplate:e=>({name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e.map((e=>lCe.getTemplate(e)))})},cCe={getTemplate:e=>({name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:Ybe(e)})},hCe={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot",Continuous:"Continuous"},uCe=["Dashed","DashDot","DashDotDot"],pCe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},gCe={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},mCe={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},vCe=e=>void 0==e?e:("#"===e.charAt(0)&&(e=e.substring(1)),6===e.length?"FF"+e:e),fCe=(e,t)=>{if(!e)return"thin";const i=(e=>{switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}})(t);if("Continuous"===e)return i;const n=hCe[e];return"medium"===i&&uCe.some((e=>e===n))?"medium".concat(n):"".concat(n.charAt(0).toLowerCase()).concat(n.substring(1))},yCe=e=>gCe[e]||"general",bCe=e=>mCe[e]||void 0,CCe=e=>({name:"color",properties:{rawMap:{rgb:vCe(e||"#000000")}}}),xCe={getTemplate(e){const{left:t,right:i,top:n,bottom:o,diagonal:s}=e,r=t?[CCe(t.color)]:void 0,a=i?[CCe(i.color)]:void 0,l=n?[CCe(n.color)]:void 0,d=o?[CCe(o.color)]:void 0,c=s?[CCe(s.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:r},{name:"right",properties:{rawMap:{style:i&&i.style}},children:a},{name:"top",properties:{rawMap:{style:n&&n.style}},children:l},{name:"bottom",properties:{rawMap:{style:o&&o.style}},children:d},{name:"diagonal",properties:{rawMap:{style:s&&s.style}},children:c}]}}},wCe={getTemplate:e=>({name:"borders",properties:{rawMap:{count:e.length}},children:e.map((e=>xCe.getTemplate(e)))})},SCe=e=>{const t=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(t,0)},MCe={getTemplate(e){const{horizontal:t,indent:i,readingOrder:n,rotate:o,shrinkToFit:s,vertical:r,wrapText:a}=e;return{name:"alignment",properties:{rawMap:{horizontal:t&&yCe(t),indent:i,readingOrder:n&&SCe(n),textRotation:o,shrinkToFit:s,vertical:r&&bCe(r),wrapText:a}}}}},DCe=MCe,kCe={getTemplate(e){const t=!1===e.protected?0:1;return{name:"protection",properties:{rawMap:{hidden:!0===e.hideFormula?1:0,locked:t}}}}},ICe={getTemplate(e){const{alignment:t,borderId:i,fillId:n,fontId:o,numFmtId:s,protection:r,quotePrefix:a,xfId:l}=e,d=[];return t&&d.push(DCe.getTemplate(t)),r&&d.push(kCe.getTemplate(r)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:r?1:void 0,applyBorder:i?1:void 0,applyFill:n?1:void 0,borderId:i,fillId:n,applyFont:o?1:void 0,fontId:o,applyNumberFormat:s?1:void 0,numFmtId:s,quotePrefix:a?1:void 0,xfId:l}},children:d.length?d:void 0}}},ACe={getTemplate:e=>({name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map((e=>ICe.getTemplate(e)))})},TCe={getTemplate(e){const{builtinId:t,name:i,xfId:n}=e;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:i,xfId:n}}}}},ECe={getTemplate:e=>({name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map((e=>TCe.getTemplate(e)))})},RCe={getTemplate:e=>({name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map((e=>ICe.getTemplate(e)))})},LCe={getTemplate(e){const{patternType:t,fgTheme:i,fgTint:n,fgRgb:o,bgRgb:s,bgIndexed:r}=e,a={name:"patternFill",properties:{rawMap:{patternType:t}}};return(i||n||o)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:i,tint:n,rgb:o}}}]),(r||s)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:r,rgb:s}}})),{name:"fill",children:[a]}}},PCe={getTemplate:e=>({name:"fills",properties:{rawMap:{count:e.length}},children:e.map((e=>LCe.getTemplate(e)))})},NCe={getTemplate(e){const{size:t,colorTheme:i,color:n="FF000000",fontName:o="Calibri",family:s,scheme:r,italic:a,bold:l,strikeThrough:d,outline:c,shadow:h,underline:u,verticalAlign:p}=e,g=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:i,rgb:n}}},{name:"name",properties:{rawMap:{val:o}}}];return s&&g.push({name:"family",properties:{rawMap:{val:s}}}),r&&g.push({name:"scheme",properties:{rawMap:{val:r}}}),a&&g.push({name:"i"}),l&&g.push({name:"b"}),d&&g.push({name:"strike"}),c&&g.push({name:"outline"}),h&&g.push({name:"shadow"}),u&&g.push({name:"u",properties:{rawMap:{val:u}}}),p&&g.push({name:"vertAlign",properties:{rawMap:{val:p}}}),{name:"font",children:g}}},FCe=NCe,OCe={getTemplate:e=>({name:"fonts",properties:{rawMap:{count:e.length}},children:e.map((e=>FCe.getTemplate(e)))})},BCe=OCe;var GCe,zCe,_Ce,VCe,HCe,WCe,jCe,UCe,KCe,YCe={getTemplate(e){let{formatCode:t,numFmtId:i}=e;return t.length&&(t=function(e){const t=e.split(/(\[[^\]]*\])/);for(let i=0;i<t.length;i++){let e=t[i];e.length&&(e.startsWith("[")||(e=e.replace(/\$/g,'"$"')),t[i]=Ho(e))}return t.join("")}(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:i}}}}},ZCe=YCe,XCe={getTemplate:e=>({name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map((e=>ZCe.getTemplate(e)))})},qCe=XCe,QCe=(e,t)=>(-1!==e.indexOf("mixedStyle")&&t>1&&(e+="_".concat(t)),e),JCe=()=>{GCe={base:0},zCe=[],_Ce=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],VCe=[{patternType:"none"},{patternType:"gray125"}],HCe=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],WCe=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],jCe=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],UCe=[{builtinId:0,name:"Normal",xfId:0}]},$Ce=e=>{const t=(i=e.pattern)?pCe[i]||i:"none";var i;const n=vCe(e.color),o=vCe(e.patternColor);let s=VCe.findIndex((e=>{const{patternType:i,fgRgb:s,bgRgb:r}=e;return i==t&&s==n&&r==o}));return-1===s&&(s=VCe.length,VCe.push({patternType:t,fgRgb:n,bgRgb:o})),s},exe=e=>{const{fontName:t="Calibri",color:i,size:n,bold:o,italic:s,outline:r,shadow:a,strikeThrough:l,underline:d,family:c,verticalAlign:h}=e,u=vCe(i),p=(e=>{if(void 0===e)return;const t=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(t,0)})(c),g=d?d.toLocaleLowerCase():void 0,m=h?h.toLocaleLowerCase():void 0;let v=_Ce.findIndex((e=>e.fontName==t&&e.color==u&&e.size==n&&e.bold==o&&e.italic==s&&e.outline==r&&e.shadow==a&&e.strikeThrough==l&&e.underline==g&&e.verticalAlign==m&&e.family==p));return-1===v&&(v=_Ce.length,_Ce.push({fontName:t,color:u,size:n,bold:o,italic:s,outline:r,shadow:a,strikeThrough:l,underline:g,verticalAlign:m,family:null!=p?p.toString():void 0})),v},txe=e=>{const{alignment:t,borders:i,font:n,interior:o,numberFormat:s,protection:r,quotePrefix:a}=e;let{id:l}=e,d=0,c=0,h=0,u=0;l&&(l=QCe(l,KCe),void 0==GCe[l]&&(o&&(d=$Ce(o)),i&&(c=(e=>{const{borderBottom:t,borderTop:i,borderLeft:n,borderRight:o}=e;let s,r,a,l,d,c,h,u;n&&(a=fCe(n.lineStyle,n.weight),h=vCe(n.color)),o&&(l=fCe(o.lineStyle,o.weight),u=vCe(o.color)),t&&(s=fCe(t.lineStyle,t.weight),d=vCe(t.color)),i&&(r=fCe(i.lineStyle,i.weight),c=vCe(i.color));let p=HCe.findIndex((e=>{const{left:t,right:i,top:n,bottom:o}=e;if(!t&&(a||h))return!1;if(!i&&(l||u))return!1;if(!n&&(r||c))return!1;if(!o&&(s||d))return!1;const{style:p,color:g}=t||{},{style:m,color:v}=i||{},{style:f,color:y}=n||{},{style:b,color:C}=o||{};return p==a&&g==h&&m==l&&v==u&&f==r&&y==c&&b==s&&C==d}));return-1===p&&(p=HCe.length,HCe.push({left:{style:a,color:h},right:{style:l,color:u},top:{style:r,color:c},bottom:{style:s,color:d},diagonal:{style:void 0,color:void 0}})),p})(i)),n&&(h=exe(n)),s&&(u=(e=>{if(Gbe[e])return Gbe[e];let t=zCe.findIndex((t=>t.formatCode===e));return-1===t?(t=zCe.length+164,zCe.push({formatCode:e,numFmtId:t})):t=zCe[t].numFmtId,t})(s.format)),GCe[l]=jCe.length,jCe.push({alignment:t,borderId:c||0,fillId:d||0,fontId:h||0,numFmtId:u||0,protection:r,quotePrefix:a,xfId:0})))},ixe={getTemplate(e){const t=qCe.getTemplate(zCe),i=BCe.getTemplate(_Ce.map((t=>l(l({},t),{},{size:null!=t.size?t.size:e})))),n=PCe.getTemplate(VCe),o=wCe.getTemplate(HCe),s=ACe.getTemplate(WCe),r=RCe.getTemplate(jCe),a=ECe.getTemplate(UCe);return JCe(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,i,n,o,s,r,a,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},nxe=(e,t)=>GCe[QCe(e,t)]||0,oxe=ixe,sxe={getTemplate(e,t){const{name:i,columns:n,rowRange:o,displayName:s,showRowStripes:r,showColumnStripes:a,showFilterButtons:l,highlightFirstColumn:d,highlightLastColumn:c}=e||{},h=!o||o[0]-o[1]===0;if(!e||!i||!Array.isArray(n)||!n.length||h)return{name:"table"};const u=n.map(((e,t)=>({name:"filterColumn",properties:{rawMap:{colId:t.toString(),hiddenButton:l[t]?0:1}}}))),p="A".concat(o[0]),g="".concat(Ube(n.length)).concat(o[1]),m="".concat(p,":").concat(g),v="".concat(t+1);return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:i,displayName:t?"".concat(s,"_").concat(v):s,ref:m,totalsRowShown:0,id:v}},children:[{name:"autoFilter",properties:{rawMap:{ref:m}},children:u},{name:"tableColumns",properties:{rawMap:{count:n.length}},children:n.map(((e,t)=>({name:"tableColumn",properties:{rawMap:{id:(t+1).toString(),name:e,dataCellStyle:"Normal"}}})))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:d?1:0,showLastColumn:c?1:0,showRowStripes:r?1:0,showColumnStripes:a?1:0}}}]}}},rxe=e=>{const[t,i,n,o]=e;return{name:"a:".concat(t),children:[{name:"a:".concat(i),properties:{rawMap:{val:n,lastClr:o}}}]}},axe={getTemplate:()=>({name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[rxe(["dk1","sysClr","windowText","000000"]),rxe(["lt1","sysClr","window","FFFFFF"]),rxe(["dk2","srgbClr","44546A"]),rxe(["lt2","srgbClr","E7E6E6"]),rxe(["accent1","srgbClr","4472C4"]),rxe(["accent2","srgbClr","ED7D31"]),rxe(["accent3","srgbClr","A5A5A5"]),rxe(["accent4","srgbClr","FFC000"]),rxe(["accent5","srgbClr","5B9BD5"]),rxe(["accent6","srgbClr","70AD47"]),rxe(["hlink","srgbClr","0563C1"]),rxe(["folHlink","srgbClr","954F72"])]})},lxe=e=>{const[t,i,n,o]=e;return{name:"a:".concat(t),properties:{rawMap:{script:n,typeface:i,panose:o}}}},dxe={getTemplate:()=>({name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[lxe(["latin","Calibri Light",void 0,"020F0302020204030204"]),lxe(["ea",""]),lxe(["cs",""]),lxe(["font","\u6e38\u30b4\u30b7\u30c3\u30af Light","Jpan"]),lxe(["font","\ub9d1\uc740 \uace0\ub515","Hang"]),lxe(["font","\u7b49\u7ebf Light","Hans"]),lxe(["font","\u65b0\u7d30\u660e\u9ad4","Hant"]),lxe(["font","Times New Roman","Arab"]),lxe(["font","Times New Roman","Hebr"]),lxe(["font","Tahoma","Thai"]),lxe(["font","Nyala","Ethi"]),lxe(["font","Vrinda","Beng"]),lxe(["font","Shruti","Gujr"]),lxe(["font","MoolBoran","Khmr"]),lxe(["font","Tunga","Knda"]),lxe(["font","Raavi","Guru"]),lxe(["font","Euphemia","Cans"]),lxe(["font","Plantagenet Cherokee","Cher"]),lxe(["font","Microsoft Yi Baiti","Yiii"]),lxe(["font","Microsoft Himalaya","Tibt"]),lxe(["font","MV Boli","Thaa"]),lxe(["font","Mangal","Deva"]),lxe(["font","Gautami","Telu"]),lxe(["font","Latha","Taml"]),lxe(["font","Estrangelo Edessa","Syrc"]),lxe(["font","Kalinga","Orya"]),lxe(["font","Kartika","Mlym"]),lxe(["font","DokChampa","Laoo"]),lxe(["font","Iskoola Pota","Sinh"]),lxe(["font","Mongolian Baiti","Mong"]),lxe(["font","Times New Roman","Viet"]),lxe(["font","Microsoft Uighur","Uigh"]),lxe(["font","Sylfaen","Geor"]),lxe(["font","Arial","Armn"]),lxe(["font","Leelawadee UI","Bugi"]),lxe(["font","Microsoft JhengHei","Bopo"]),lxe(["font","Javanese Text","Java"]),lxe(["font","Segoe UI","Lisu"]),lxe(["font","Myanmar Text","Mymr"]),lxe(["font","Ebrima","Nkoo"]),lxe(["font","Nirmala UI","Olck"]),lxe(["font","Ebrima","Osma"]),lxe(["font","Phagspa","Phag"]),lxe(["font","Estrangelo Edessa","Syrn"]),lxe(["font","Estrangelo Edessa","Syrj"]),lxe(["font","Estrangelo Edessa","Syre"]),lxe(["font","Nirmala UI","Sora"]),lxe(["font","Microsoft Tai Le","Tale"]),lxe(["font","Microsoft New Tai Lue","Talu"]),lxe(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[lxe(["latin","Calibri",void 0,"020F0502020204030204"]),lxe(["ea",""]),lxe(["cs",""]),lxe(["font","\u6e38\u30b4\u30b7\u30c3\u30af","Jpan"]),lxe(["font","\ub9d1\uc740 \uace0\ub515","Hang"]),lxe(["font","\u7b49\u7ebf","Hans"]),lxe(["font","\u65b0\u7d30\u660e\u9ad4","Hant"]),lxe(["font","Arial","Arab"]),lxe(["font","Arial","Hebr"]),lxe(["font","Tahoma","Thai"]),lxe(["font","Nyala","Ethi"]),lxe(["font","Vrinda","Beng"]),lxe(["font","Shruti","Gujr"]),lxe(["font","DaunPenh","Khmr"]),lxe(["font","Tunga","Knda"]),lxe(["font","Raavi","Guru"]),lxe(["font","Euphemia","Cans"]),lxe(["font","Plantagenet Cherokee","Cher"]),lxe(["font","Microsoft Yi Baiti","Yiii"]),lxe(["font","Microsoft Himalaya","Tibt"]),lxe(["font","MV Boli","Thaa"]),lxe(["font","Mangal","Deva"]),lxe(["font","Gautami","Telu"]),lxe(["font","Latha","Taml"]),lxe(["font","Estrangelo Edessa","Syrc"]),lxe(["font","Kalinga","Orya"]),lxe(["font","Kartika","Mlym"]),lxe(["font","DokChampa","Laoo"]),lxe(["font","Iskoola Pota","Sinh"]),lxe(["font","Mongolian Baiti","Mong"]),lxe(["font","Arial","Viet"]),lxe(["font","Microsoft Uighur","Uigh"]),lxe(["font","Sylfaen","Geor"]),lxe(["font","Arial","Armn"]),lxe(["font","Leelawadee UI","Bugi"]),lxe(["font","Microsoft JhengHei","Bopo"]),lxe(["font","Javanese Text","Java"]),lxe(["font","Segoe UI","Lisu"]),lxe(["font","Myanmar Text","Mymr"]),lxe(["font","Ebrima","Nkoo"]),lxe(["font","Nirmala UI","Olck"]),lxe(["font","Ebrima","Osma"]),lxe(["font","Phagspa","Phag"]),lxe(["font","Estrangelo Edessa","Syrn"]),lxe(["font","Estrangelo Edessa","Syrj"]),lxe(["font","Estrangelo Edessa","Syre"]),lxe(["font","Nirmala UI","Sora"]),lxe(["font","Microsoft Tai Le","Tale"]),lxe(["font","Microsoft New Tai Lue","Talu"]),lxe(["font","Ebrima","Tfng"])]}]})},cxe=(e,t,i)=>({name:"a:".concat(e),properties:{rawMap:{val:t}},children:i}),hxe=e=>{const[t,i,n,o,s,r]=e,a=[];return a.push(cxe("satMod",n)),o&&a.push(cxe("lumMod",o)),s&&a.push(cxe("tint",s)),r&&a.push(cxe("shade",r)),{name:"a:gs",properties:{rawMap:{pos:t}},children:[{name:"a:schemeClr",properties:{rawMap:{val:i}},children:a}]}},uxe=(e,t)=>({name:"a:solidFill",children:[cxe("schemeClr",e,t)]}),pxe=e=>{const[t,i,n,o,s]=e,[r,a]=s;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:t}},children:[{name:"a:gsLst",children:[hxe(i),hxe(n),hxe(o)]},{name:"a:lin",properties:{rawMap:{ang:r,scaled:a}}}]}},gxe=e=>{const[t,i,n,o]=e;return{name:"a:ln",properties:{rawMap:{w:t,cap:i,cmpd:n,algn:o}},children:[uxe("phClr"),cxe("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},mxe=e=>{const t=[];if(e){const[i,n,o,s,r]=e;t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:i,dist:n,dir:o,algn:s,rotWithShape:r}},children:[cxe("srgbClr","000000",[cxe("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},vxe={getTemplate:()=>({name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[uxe("phClr"),pxe(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),pxe(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[gxe(["6350","flat","sng","ctr"]),gxe(["12700","flat","sng","ctr"]),gxe(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[mxe(),mxe(),mxe(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[uxe("phClr"),uxe("phClr",[cxe("tint","95000"),cxe("satMod","170000")]),pxe(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]})},fxe={getTemplate:()=>({name:"a:themeElements",children:[axe.getTemplate(),dxe.getTemplate(),vxe.getTemplate()]})},yxe={getTemplate:()=>({name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[fxe.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]})},bxe=e=>{const{aspectratio:t,rotation:i}=e||{},n={};return t&&(n.aspectratio="t"),i&&(n.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:n}}};var Cxe=(e,t)=>{let i;const{recolor:n,brightness:o,contrast:s,id:r}=e;if(n&&(i={},"Washout"!==n&&"Grayscale"!==n||(i.gain="19661f",i.blacklevel="22938f"),"Black & White"!==n&&"Grayscale"!==n||(i.grayscale="t","Black & White"===n&&(i.bilevel="t"))),!n||"Grayscale"===n){if(i||(i={}),null!=s&&50!==s){let e="1";s>=0&&(s<50?e=String(s/50):s<100?e=String(50/(100-s)):100===s&&(e="2147483647f")),i.gain=e}null!=o&&50!==o&&(i.blacklevel=(a=o,l=0,d=100,c=-.5,h=.5,(a-l)/(d-l)*(h-c)+c).toString())}var a,l,d,c,h;return{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:"rId".concat(t),title:r}}],rawMap:i}}},xxe=e=>Math.floor(.74999943307122*(null!==e&&void 0!==e?e:0)),wxe={getTemplate(e){const t=$xe.get(e.sheetIndex)||[],i=[{name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]},{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[{name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}},(n=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"],{name:"v:formulas",children:n.map((e=>({name:"v:f",properties:{rawMap:{eqn:e}}})))}),{name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}},bxe({aspectratio:!0})]},...t.map(((e,t)=>((e,t)=>{const{width:i=0,height:n=0,altText:o}=e,s=xxe(i),r=xxe(n);return{name:"v:shape",properties:{rawMap:{id:e.headerFooterPosition,"o:spid":"_x0000_s1025",style:"position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ".concat(s,"pt; height: ").concat(r,"pt; z-index: ").concat(t+1),type:"#_x0000_t75",alt:o}},children:[Cxe(e,t+1),bxe({rotation:!0})]}})(e,t)))];var n;return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:i}}},Sxe=wxe,Mxe={getTemplate(e,t){const i=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:i,"r:id":"rId".concat(i)}}}}},Dxe={getTemplate:e=>({name:"sheets",children:e.map(((e,t)=>Mxe.getTemplate(e,t)))})},kxe={getTemplate:(e,t)=>({name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[{name:"bookViews",children:[{name:"workbookView",properties:{rawMap:{activeTab:t}}}]},Dxe.getTemplate(e)]})},Ixe={getTemplate(e){const{min:t,max:i,outlineLevel:n,s:o,width:s,hidden:r,bestFit:a}=e;let l=1,d="0";return s>1&&(l=(e=>Math.ceil((e-12)/7+1))(s),d="1"),{name:"col",properties:{rawMap:{min:t,max:i,outlineLevel:null!=n?n:void 0,width:l,style:o,hidden:r?"1":"0",bestFit:a?"1":"0",customWidth:d}}}}},Axe=Ixe,Txe={getTemplate:e=>({name:"mergeCell",properties:{rawMap:{ref:e}}})},Exe={getTemplate(e,t,i){const{ref:n,data:o,styleId:s}=e,{type:r,value:a}=o||{type:"empty",value:null};let l=r;"f"===r?l="str":r.charAt(0)===r.charAt(0).toUpperCase()&&(l=(e=>{const t=e.charAt(0).toLowerCase();return"s"===t?"inlineStr":t})(r));const d={name:"c",properties:{rawMap:{r:n,t:"empty"===l?void 0:l,s:s?nxe(s,i):void 0}}};if("empty"===l)return d;let c;return c="str"===l&&"f"===r?[{name:"f",textNode:Ho(Kbe(a),!1)}]:"inlineStr"===l?[{name:"is",children:[{name:"t",textNode:Ho(Kbe(a),!1)}]}]:[{name:"v",textNode:a}],Object.assign({},d,{children:c})}},Rxe=e=>{var t;return""!==(null===(t=e.data)||void 0===t?void 0:t.value)||void 0!==e.styleId},Lxe={getTemplate(e,t,i){const{collapsed:n,hidden:o,height:s,outlineLevel:r,cells:a=[]}=e;((e,t)=>{const i=[];let n=0;for(let o=0;o<e.length;o++){const t=e[o];t.mergeAcross&&(i.push({pos:o,excelPos:n}),n+=t.mergeAcross),n++}if(i.length)for(let o=i.length-1;o>=0;o--){const n=[],s=e[i[o].pos];for(let e=1;e<=s.mergeAcross;e++)n.push({ref:"".concat(Ube(i[o].excelPos+1+e)).concat(t+1),styleId:s.styleId,data:{type:"empty",value:null}});n.length&&e.splice(i[o].pos+1,0,...n)}})(a,t);return{name:"row",properties:{rawMap:{r:t+1,collapsed:n?"1":"0",hidden:o?"1":"0",ht:s,customHeight:null!=s?"1":"0",spans:"1:1",outlineLevel:r||void 0}},children:a.filter(Rxe).map(((e,t)=>Exe.getTemplate(e,t,i)))}}},Pxe=Lxe,Nxe=e=>{if(null==e)return 1;const t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return-1===t?1:t+1},Fxe=(e,t,i)=>e.reduce(((e,n,o)=>{const s="Center"===(r=n.position)?"C":"Right"===r?"R":"L";var r;const a=((e,t)=>t?(e+="&amp;&quot;",e+=t.fontName||"Calibri",t.bold!==t.italic?e+=t.bold?",Bold":",Italic":t.bold?e+=",Bold Italic":e+=",Regular",e+="&quot;",t.size&&(e+="&amp;".concat(t.size)),t.strikeThrough&&(e+="&amp;S"),t.underline&&(e+="&amp;".concat("Double"===t.underline?"E":"U")),t.color&&(e+="&amp;K".concat(t.color.replace("#","").toUpperCase())),e):e)("".concat(e,"&amp;").concat(s),n.font),l=["Left","Center","Right"];n.position||(n.position=l[o]);const{image:d}=n;if("&[Picture]"===n.value&&d){!function(e,t){const i=qxe.length-1,n=e;n.headerFooterPosition=t,lwe({imageToAdd:n,idx:i});let o=$xe.get(i);o||(o=[],$xe.set(i,o));o.find((t=>t.id===e.id))||o.push(e)}(d,"".concat(s).concat(t).concat(i))}return"".concat(a).concat(Ho((c=n.value,Object.entries({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"}).forEach((e=>{let[t,i]=e;c=c.replace(t,i)})),c)));var c}),""),Oxe=e=>{const t=[];return["all","first","even"].forEach((i=>{const n=e[i],o="all"===i?"odd":i;if(n)for(const[e,s]of Object.entries(n)){const n="".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),r=e[0].toUpperCase();if(s){const e="all"===i?"":i.toUpperCase();t.push({name:"".concat(o).concat(n),properties:{rawMap:{"xml:space":"preserve"}},textNode:Fxe(s,r,e)})}}})),t},Bxe=e=>t=>(e.length&&t.children.push({name:"cols",children:e.map((e=>Axe.getTemplate(e)))}),t),Gxe=(e,t)=>i=>(e.length&&i.children.push({name:"sheetData",children:e.map(((e,i)=>Pxe.getTemplate(e,i,t)))}),i),zxe=e=>t=>{const{top:i=.75,right:n=.7,bottom:o=.75,left:s=.7,header:r=.3,footer:a=.3}=e;return t.children.push({name:"pageMargins",properties:{rawMap:{bottom:o,footer:a,header:r,left:s,right:n,top:i}}}),t},_xe=e=>t=>{var i;return e&&t.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(i=e.orientation,!i||"Portrait"!==i&&"Landscape"!==i?"portrait":i.toLocaleLowerCase()),paperSize:Nxe(e.pageSize)}}}),t},Vxe=e=>t=>{if(!e)return t;const i=null!=e.first?1:0,n=null!=e.even?1:0;return t.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:i,differentOddEven:n}},children:Oxe(e)}),t},Hxe=e=>t=>{const i=Jxe.get(e);return null!==i&&void 0!==i&&i.length&&t.children.push({name:"drawing",properties:{rawMap:{"r:id":"rId".concat(++t.rIdCounter)}}}),t},Wxe=e=>t=>($xe.get(e)&&t.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":"rId".concat(++t.rIdCounter)}}}),t),jxe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=e>0||t>0;return i?[{name:"pane",properties:{rawMap:{state:i?"frozen":void 0,topLeftCell:i?"".concat(Ube(e+1)).concat(t+1):void 0,xSplit:0===e?void 0:e,ySplit:0===t?void 0:t}}}]:void 0},Uxe=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return n=>(n.children.push({name:"sheetViews",children:[{name:"sheetView",properties:{rawMap:{rightToLeft:!0===e?"1":"0",workbookViewId:"0"}},children:jxe(t,i)}]}),n)},Kxe=e=>t=>{const i=e.reduce(((e,t)=>t.outlineLevel&&t.outlineLevel>e?t.outlineLevel:e),0);return t.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:i||void 0}}}),t},Yxe={getTemplate(e){const{worksheet:t,currentSheet:i,config:n}=e,{margins:o={},pageSetup:s,headerFooterConfig:r,suppressColumnOutline:a,rightToLeft:l,frozenRowCount:d,frozenColumnCount:c}=n,{table:h}=t,{rows:u,columns:p}=h,g=p&&p.length?((e,t,i)=>{const n=[],o=[];e.forEach(((e,i)=>{const s=e.cells;let r,a=0;s.forEach(((e,s)=>{const l=s+a+1,d=Ube(l),c=i+1;if(e.mergeAcross){a+=e.mergeAcross;const t=Ube(s+a+1);n.push("".concat(d).concat(c,":").concat(t).concat(c))}t[l-1]||(t[l-1]={});const{collapsibleRanges:h}=e;h&&h.forEach((e=>{o.push([l+e[0],l+e[1]])})),r=t[l-1],r.min=l,r.max=l,e.ref="".concat(d).concat(c)}))})),o.sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:t[1]-e[1]));const s=new Map,r=new Map;return o.filter((e=>{const t=e.toString();return!s.get(t)&&(s.set(t,!0),!0)})).forEach((e=>{const n=t.find((t=>t.min==e[0]&&t.max==e[1])),o=r.get(e[0]);t.push({min:e[0],max:e[1],outlineLevel:i?void 0:o||1,width:(n||{width:100}).width}),r.set(e[0],(o||0)+1)})),n})(u,p,!!a):[],m=iwe.get(i),{children:v}=[e=>(e.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e),Uxe(l,c,d),Kxe(u),Bxe(p),Gxe(u,i+1),(y=g,e=>(y.length&&e.children.push({name:"mergeCells",properties:{rawMap:{count:y.length}},children:y.map((e=>Txe.getTemplate(e)))}),e)),zxe(o),_xe(s),Vxe(r),Hxe(i),Wxe(i),(f=m,e=>(f&&e.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":"rId".concat(++e.rIdCounter)}}}]}),e))].reduce(((e,t)=>t(e)),{children:[],rIdCounter:0});var f,y;return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:v}}},Zxe=Yxe,Xxe=new Map,qxe=[],Qxe=new Map,Jxe=new Map,$xe=new Map,ewe=new Map,twe=new Map,iwe=new Map,nwe="AG-GRID-TABLE",owe="SINGLE_SHEET";function swe(e,t,i){!function(e){const t=Ho(e.name)||"";let i="";for(;-1!==qxe.indexOf("".concat(t).concat(i));)if(""===i)i="_1";else{const e=parseInt(i.slice(1),10);i="_".concat(e+1)}e.name="".concat(t).concat(i),qxe.push(e.name)}(t),((e,t)=>{1===(KCe=t)&&JCe(),e.forEach(txe)})(e,qxe.length);const n=Object.assign({},i);return i.exportAsExcelTable&&(i.colModel.isPivotActive()&&(rwe("pivot mode"),n.exportAsExcelTable=!1),i.gos.get("masterDetail")&&(rwe("master/detail"),n.exportAsExcelTable=!1)),function(e,t){const{exportAsExcelTable:i,prependContent:n,appendContent:o,colModel:s}=t;if(!i)return;const r="boolean"===typeof i?{}:i,{name:a,showColumnStripes:l,showRowStripes:d,showFilterButton:c,highlightFirstColumn:h,highlightLastColumn:u}=r,p=(D=a||nwe,D.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")),g=qxe.length-1,{table:m}=e,{rows:v,columns:f}=m,y=fr(s),b=n?n.length:0,C=o?o.length:0,x=v.length,w=f.length,S=[],M=[];var D;for(let I=0;I<w;I++){var k;const e=f[I];S.push(e.displayName||""),M.push("match"===c||void 0===c?null!==(k=e.filterAllowed)&&void 0!==k&&k:c)}if(!S||!S.length||!x||!p)return void pt(165);!function(e,t){if(iwe.has(e))return void pt(164);iwe.set(e,t)}(g,{name:"table".concat(iwe.size+1),displayName:p,columns:S,showFilterButtons:M,rowRange:[y+b,y+(x-y)-C],showRowStripes:null===d||void 0===d||d,showColumnStripes:null!==l&&void 0!==l&&l,highlightFirstColumn:null!==h&&void 0!==h&&h,highlightLastColumn:null!==u&&void 0!==u&&u})}(t,n),function(e,t){return jbe(Zxe.getTemplate({worksheet:e,currentSheet:qxe.length-1,config:t}))}(t,n)}function rwe(e){pt(163,{featureName:e})}function awe(e,t,i,n,o){const s=qxe.length,{row:r,column:a}=e.position||{},l=e;n&&(null==t||null==i||r&&a||(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:n.indexOf(i)+1})),((e,t)=>{const{colSpan:i,column:n}=e.position;if(e.width)if(i){const o=t.slice(n-1,n+i-1);let s=0;for(let t=0;t<o.length;t++){const i=o[t].getActualWidth();if(e.width<s+i){e.position.colSpan=t+1,e.totalWidth=e.width,e.width=e.totalWidth-s;break}s+=i}}else e.totalWidth=e.width})(l,n),((e,t)=>{const{rowSpan:i,row:n}=e.position;var o;if(e.height)if(i){let s=0,r=0;for(let a=n;a<n+i;a++){const i=(o=Wbe(a,t)||20,Math.round(96*o/72));if(e.height<s+i){e.position.rowSpan=r+1,e.totalHeight=e.height,e.height=e.totalHeight-s;break}s+=i,r++}}else e.totalHeight=e.height})(l,o)),lwe({imageToAdd:l,idx:s});let d=twe.get(s);d||(d=new Map,twe.set(s,d));const c=Jxe.get(s);c?c.push(l):Jxe.set(s,[l]),d.get(e.id)||d.set(e.id,{index:d.size,type:e.imageType})}function lwe(e){const{imageToAdd:t,idx:i}=e,n=Qxe.get(t.id);if(n){const e=n.find((e=>e.sheetId===i));e?e.image.push(t):n.push({sheetId:i,image:[t]})}else Qxe.set(t.id,[{sheetId:i,image:[t]}]),ewe.set(t.id,{type:t.imageType,index:ewe.size})}function dwe(e){return Xxe.has(e)?Xxe.get(e):(Xxe.set(e,Xxe.size),Xxe.size-1)}function cwe(){Xxe.clear(),Qxe.clear(),Jxe.clear(),$xe.clear(),ewe.clear(),twe.clear(),iwe.clear(),qxe=[],owe="SINGLE_SHEET"}function hwe(){let{drawingIndex:e,vmlDrawingIndex:t,tableName:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===e&&void 0===t&&void 0===i)return"";const n=[];null!=e&&n.push({Id:"rId".concat(n.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing".concat(e+1,".xml")}),null!=t&&n.push({Id:"rId".concat(n.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:"../drawings/vmlDrawing".concat(t+1,".vml")}),null!=i&&n.push({Id:"rId".concat(n.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:"../tables/".concat(i,".xml")});const o=dCe.getTemplate(n);return jbe(o)}var uwe=class extends th{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.frozenRowCount=0,this.skipFrozenRows=!1,this.frozenColumnCount=0,this.skipFrozenColumns=!1,this.config=Object.assign({},e),this.stylesByIds={},this.config.baseExcelStyles.forEach((e=>{this.stylesByIds[e.id]=e})),this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(e){e.forEach((e=>{const t=this.rows.length+1;let i;this.config.suppressRowOutline||null==e.outlineLevel||(i=e.outlineLevel);const n={height:Wbe(t,e.height||this.config.rowHeight),cells:(e.cells||[]).map(((e,i)=>{var n,o,s;const r=this.addImage(t,this.columnsToExport[i],null===(n=e.data)||void 0===n?void 0:n.value);let a=null;e.styleId&&(a="string"===typeof e.styleId?[e.styleId]:e.styleId);const l=this.getStyleId(a);if(r)return this.createCell(l,this.getDataTypeForValue(r.value),null==r.value?"":r.value);const d=null!==(o=null===(s=e.data)||void 0===s?void 0:s.value)&&void 0!==o?o:"",c=this.getDataTypeForValue(d);return e.mergeAcross?this.createMergedCell(l,c,d,e.mergeAcross):this.createCell(l,c,d)})),outlineLevel:i};null!=e.collapsed&&(n.collapsed=e.collapsed),null!=e.hidden&&(n.hidden=e.hidden),this.rows.push(n)}))}onNewHeaderGroupingRow(){const e=[],{freezeRows:t,headerRowHeight:i}=this.config;return this.rows.push({cells:e,height:Wbe(this.rows.length+1,i)}),t&&this.frozenRowCount++,{onColumn:(t,i,n,o,s)=>{const r=this.config.styleLinker({rowType:"HEADER_GROUPING",rowIndex:1,value:"grouping-".concat(i),columnGroup:t});e.push(l(l({},this.createMergedCell(this.getStyleId(r),this.getDataTypeForValue("string"),i,o)),{},{collapsibleRanges:s}))}}}onNewHeaderRow(){const{freezeRows:e,headerRowHeight:t}=this.config;return e&&this.frozenRowCount++,this.onNewRow(this.onNewHeaderColumn,t)}onNewBodyRow(e){const{freezeRows:t,rowHeight:i}=this.config;this.skipFrozenRows||("headersAndPinnedRows"===t&&"top"===(null===e||void 0===e?void 0:e.rowPinned)||"function"===typeof t&&t(l(l({},this.gos.getGridCommonParams()),{},{node:e}))?this.frozenRowCount++:this.skipFrozenRows=!0);const n=this.onNewRow(this.onNewBodyColumn,i);return e&&this.addRowOutlineIfNecessary(e),n}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map(((e,t)=>this.convertColumnToExcel(e,t)))}parse(){const e=this.rows.reduce(((e,t)=>Math.max(e,t.cells.length)),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));const{config:t}=this;let i;if(null!=t.sheetName){const{sheetName:e}=t,n="function"===typeof e?e(this.gos.getGridCommonParams()):e;i=String(n).substring(0,31)}else i="ag-grid";const n={name:i,table:{columns:this.cols,rows:this.rows}};return this.createExcel(n)}addRowOutlineIfNecessary(e){const{gos:t,suppressRowOutline:i,rowGroupExpandState:n="expanded"}=this.config;if(t.get("groupHideOpenParents")||i||null==e.level)return;const o=e.footer?1:0,s=Gi(this.rows),r=Math.min(e.level+o,7);if(s.outlineLevel=r,"expanded"===n)return;const a="collapsed"===n;if(e.isExpandable()){const t=!a&&e.expanded;s.collapsed=!t}s.hidden=!!e.parent&&-1!==e.parent.level&&(a||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&-1!==e.level;){if(!e.expanded)return!0;e=e.parent}return!1}convertColumnToExcel(e,t){const i=this.config.columnWidth,n=e?this.extractHeaderValue(e):void 0,o=null!==n&&void 0!==n?n:"",s=!!e&&e.isFilterAllowed();if(i)return"number"===typeof i?{width:i,displayName:o,filterAllowed:s}:{width:i({column:e,index:t}),displayName:o,filterAllowed:s};if(e){const t=75;return{width:Math.max(e.getActualWidth(),t),displayName:o,filterAllowed:s}}return{displayName:o,filterAllowed:s}}onNewHeaderColumn(e,t){return i=>{const n=this.extractHeaderValue(i),o=this.config.styleLinker({rowType:"HEADER",rowIndex:e,value:n,column:i});t.push(this.createCell(this.getStyleId(o),this.getDataTypeForValue("string"),n))}}onNewBodyColumn(e,t){let i=0;const{freezeColumns:n,rightToLeft:o}=this.config;return(s,r,a)=>{if(i>0)return void(i-=1);if(!this.skipFrozenColumns){const e=s.getPinned();"pinned"===n&&e&&(!0===e||"left"===e)!==o||"function"===typeof n&&n(l(l({},this.gos.getGridCommonParams()),{},{column:s}))?this.frozenColumnCount++:this.skipFrozenColumns=!0}const{value:d,valueFormatted:c}=this.extractRowCellValue(s,r,e,"excel",a),h=this.config.styleLinker({rowType:"BODY",rowIndex:e,value:d,column:s,node:a}),u=this.getStyleId(h),p=s.getColSpan(a),g=this.addImage(e,s,d);g?t.push(this.createCell(u,this.getDataTypeForValue(g.value),null==g.value?"":g.value)):p>1?(i=p-1,t.push(this.createMergedCell(u,this.getDataTypeForValue(d),d,p-1))):t.push(this.createCell(u,this.getDataTypeForValue(d),d,c))}}onNewRow(e,t){const i=[];return this.rows.push({cells:i,height:Wbe(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,i)()}}createExcel(e){const{excelStyles:t,config:i}=this;return this.frozenColumnCount&&(i.frozenColumnCount=this.frozenColumnCount),this.frozenRowCount&&(i.frozenRowCount=this.frozenRowCount),swe(t,e,i)}getDataTypeForValue(e){return void 0===e?"empty":this.isNumerical(e)?"n":"s"}getTypeFromStyle(e,t){if(this.isFormula(t))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:pt(162,{id:e.id,dataType:e.dataType})}return null}addImage(e,t,i){if(!this.config.addImageToCell)return;const n=this.config.addImageToCell(e,t,i);return n?(awe(n.image,e,t,this.columnsToExport,this.config.rowHeight),n):void 0}createCell(e,t,i,n){const o=this.getStyleById(e);null!==o&&void 0!==o&&o.dataType||"s"!==t||!n||(i=n);const s=this.getTypeFromStyle(o,i)||t,{value:r,escaped:a}=this.getCellValue(s,i),l=[];return o&&l.push(e),a&&l.push("_quotePrefix"),{styleId:e=this.getStyleId(l)||void 0,data:{type:s,value:r}}}createMergedCell(e,t,i,n){const o=null==i?"":i;return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:"s"===t?dwe(o).toString():i},mergeAcross:n}}getCellValue(e,t){let i=!1;if(null==t||"s"===e&&""===t)return{value:"",escaped:!1};if("s"===e)t&&"'"===t[0]&&(i=!0,t=t.slice(1)),t=dwe(t).toString();else if("f"===e)t=t.slice(1);else if("n"===e){const e=Number(t);isNaN(e)?t="":""!==t&&(t=e.toString())}return{value:t,escaped:i}}getStyleId(e){if(!e||!e.length)return null;if(1===e.length)return e[0];const t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID}deepCloneObject(e){return JSON.parse(JSON.stringify(e))}addNewMixedStyle(e){this.mixedStyleCounter+=1;const t="mixedStyle".concat(this.mixedStyleCounter),i={};for(const o of e)for(const e of this.excelStyles)e.id===o&&Di(i,this.deepCloneObject(e));i.id=t;const n=e.join("-");this.mixedStyles[n]={excelID:t,key:n,result:i},this.excelStyles.push(i),this.stylesByIds[t]=i}isFormula(e){return null!=e&&(this.config.autoConvertFormulas&&e.toString().startsWith("="))}isNumerical(e){return"bigint"===typeof e||isFinite(e)&&""!==e&&!isNaN(parseFloat(e))}getStyleById(e){return null==e?null:this.stylesByIds[e]||null}},pwe=async e=>{const t=new Blob([e]),{size:i,content:n}=await(async e=>{let t=0;const i=[],n=new WritableStream({write:e=>{i.push(e),t+=e.length}}),o=new ReadableStream({start:t=>{const i=new FileReader;i.onload=e=>{var i;null!==(i=e.target)&&void 0!==i&&i.result&&t.enqueue(e.target.result),t.close()},i.readAsArrayBuffer(e)}}),s=new window.CompressionStream("deflate-raw");return await o.pipeThrough(s).pipeTo(n),{size:t,content:new Blob(i)}})(t);return{size:i,content:new Uint8Array(await n.arrayBuffer())}};function gwe(e,t){let i="";for(let n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i}var mwe=e=>{if(!e.length)return 0;let t=~0,i=0,n=0,o=0;for(let s=0;s<e.length;s++)i=e[s],n=255&(t^i),o=fwe[n],t=t>>>8^o;return~t},vwe=e=>e.length?mwe("string"===typeof e?(new TextEncoder).encode(e):e):0,fwe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function ywe(e){const t=String.fromCharCode;function i(e,i){return t(e>>i&63|128)}function n(e){if(0==(4294967168&e))return t(e);let n="";return 0==(4294965248&e)?n=t(e>>6&31|192):0==(4294901760&e)?(!function(e){if(e>=55296&&e<=57343)throw Error(ft(255,{point:e}))}(e),n=t(e>>12&15|224),n+=i(e,6)):0==(4292870144&e)&&(n=t(e>>18&7|240),n+=i(e,12),n+=i(e,6)),n+=t(63&e|128),n}const o=function(e){const t=[];if(!e)return[];const i=e.length;let n,o,s=0;for(;s<i;)n=e.charCodeAt(s++),n>=55296&&n<=56319&&s<i?(o=e.charCodeAt(s++),56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),s--)):t.push(n);return t}(e),s=o.length;let r,a=-1,l="";for(;++a<s;)r=o[a],l+=n(r);return l}var bwe=(e,t,i,n,o,s)=>{const{content:r,path:a,created:l}=e,d=(e=>{let t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2,t})(l),c=(e=>{let t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate(),t})(l),h=vwe(o),u=void 0!==s?s:n,p=ywe(a),g=p!==a;let m="";if(g){const e=gwe(1,1)+gwe(vwe(p),4)+p;m="up"+gwe(e.length,2)+e}const v="\x14\0"+(g?"\0\b":"\0\0")+gwe(t?8:0,2)+gwe(d,2)+gwe(c,2)+gwe(u?h:0,4)+gwe(null!==s&&void 0!==s?s:n,4)+gwe(n,4)+gwe(p.length,2)+gwe(m.length,2),f="PK\x03\x04"+v+p+m,y="PK\x01\x02\x14\0"+v+"\0\0\0\0\0\0"+(r?"\0\0\0\0":"\x10\0\0\0")+gwe(i,4)+p+m;return{localFileHeader:Uint8Array.from(f,(e=>e.charCodeAt(0))),centralDirectoryHeader:Uint8Array.from(y,(e=>e.charCodeAt(0)))}},Cwe=e=>{let t;if("string"===typeof e){const i=atob(e.split(";base64,")[1]);t=Uint8Array.from(i,(e=>e.charCodeAt(0)))}else t=e;return{size:t.length,content:t}},xwe=async(e,t)=>{const{content:i}=e,{size:n,content:o}=i?Cwe(i):{size:0,content:Uint8Array.from([])};let s,r,a=!1;if("file"===e.type&&o&&n>0){const e=await pwe(o);s=e.content,r=e.size,a=!0}return l(l({},bwe(e,a,t,n,o,r)),{},{content:s||o,isCompressed:a})},wwe=(e,t)=>{const{content:i}=e,{content:n}=i?Cwe(i):{content:Uint8Array.from([])};return l(l({},bwe(e,!1,t,n.length,n,void 0)),{},{content:n,isCompressed:!1})},Swe=class{constructor(){this.folders=[],this.files=[]}addFolders(e){e.forEach(this.addFolder.bind(this))}addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}addFile(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.files.push({path:e,created:new Date,content:i?t:(new TextEncoder).encode(t),isBase64:i,type:"file"})}async getZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}getUncompressedZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}clearStream(){this.folders=[],this.files=[]}packageFiles(e){let t=0,i=0;for(const d of e){const{localFileHeader:e,centralDirectoryHeader:n,content:o}=d;t+=e.length+o.length,i+=n.length}const n=new Uint8Array(t),o=new Uint8Array(i);let s=0,r=0;for(const d of e){const{localFileHeader:e,centralDirectoryHeader:t,content:i}=d;n.set(e,s),s+=e.length,n.set(i,s),s+=i.length,o.set(t,r),r+=t.length}const a=((e,t,i)=>{const n="PK\x05\x06\0\0\0\0"+gwe(e,2)+gwe(e,2)+gwe(t,4)+gwe(i,4)+"\0\0";return Uint8Array.from(n,(e=>e.charCodeAt(0)))})(e.length,i,t),l=new Uint8Array(n.length+o.length+a.length);return l.set(n),l.set(o,n.length),l.set(a,n.length+o.length),l}async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const n of e){const e=await xwe(n,i),{localFileHeader:o,content:s}=e;t.push(e),i+=o.length+s.length}return this.packageFiles(t)}buildFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const n of e){const e=wwe(n,i),{localFileHeader:o,content:s}=e;t.push(e),i+=o.length+s.length}return this.packageFiles(t)}},Mwe=(e,t,i)=>{const n="xl/drawings",o="".concat(n,"/drawing").concat(i+1,".xml"),s="".concat(n,"/_rels/drawing").concat(i+1,".xml.rels");e.addFile(s,function(e){const t=twe.get(e)||[],i=[];for(const[n,o]of t){const{index:e,type:t}=o;i.push({Id:"rId".concat(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(ewe.get(n).index+1,".").concat(Xbe(t))})}return jbe(dCe.getTemplate(i))}(t)),e.addFile(o,function(e){return jbe(rCe.getTemplate({sheetIndex:e}))}(t))},Dwe=(e,t,i)=>{const n="xl/drawings",o="".concat(n,"/vmlDrawing").concat(i+1,".vml"),s="".concat(n,"/_rels/vmlDrawing").concat(i+1,".vml.rels");e.addFile(o,function(e){return jbe(Sxe.getTemplate({sheetIndex:e}),!0)}(t)),e.addFile(s,function(e){const t=$xe.get(e)||[],i=[];for(let n=0;n<t.length;n++){const e=t[n],o=ewe.get(e.id);if(!o)continue;const{index:s,type:r}=o;i.push({Id:"rId".concat(n+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(s+1,".").concat(Xbe(r))})}return jbe(dCe.getTemplate(i))}(t))},kwe=(e,t,i,n,o)=>{var s,r;e.addFile("xl/workbook.xml",(s=o,jbe(kxe.getTemplate(qxe,s)))),e.addFile("xl/styles.xml",(r=t,jbe(oxe.getTemplate(r)))),e.addFile("xl/sharedStrings.xml",jbe(cCe.getTemplate(Xxe))),e.addFile("xl/theme/theme1.xml",jbe(yxe.getTemplate())),e.addFile("xl/_rels/workbook.xml.rels",function(e){const t=new Array(e).fill(void 0).map(((e,t)=>({Id:"rId".concat(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet".concat(t+1,".xml")}))),i=dCe.getTemplate([...t,{Id:"rId".concat(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId".concat(e+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId".concat(e+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return jbe(i)}(n)),e.addFile("docProps/core.xml",function(e){return jbe(Qbe.getTemplate(e))}(i)),e.addFile("[Content_Types].xml",function(e){return jbe(qbe.getTemplate(e))}(n)),e.addFile("_rels/.rels",function(){const e=dCe.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return jbe(e)}())},Iwe=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||0===t.length)return pt(159),cwe(),!1;const{fontSize:n=11,author:o="AG Grid",activeTab:s=0}=i,r=t.length,a=Math.max(Math.min(s,r-1),0);return(e=>{if(e.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),!Qxe.size)return;e.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let t=0;Qxe.forEach((i=>{const n=i[0].image[0],{base64:o,imageType:s}=n;e.addFile("xl/media/image".concat(++t,".").concat(Xbe(s)),o,!0)}))})(e),(e=>{const t=iwe,i=Array.from(t.keys());for(let s=0;s<i.length;s++){const r=i[s],a=t.get(r);a&&e.addFile("xl/tables/".concat(a.name,".xml"),(n=a,o=s,jbe(sxe.getTemplate(n,o))))}var n,o})(e),((e,t)=>{let i=0,n=0;for(let o=0;o<t.length;o++){const s=t[o];e.addFile("xl/worksheets/sheet".concat(o+1,".xml"),s,!1);const r=Qxe.size>0&&Jxe.has(o),a=iwe.size>0&&iwe.get(o),l=Qxe.size&&$xe.has(o);if(!r&&!a&&!l)continue;let d,c,h;r&&(Mwe(e,o,i),c=i,i++),l&&(Dwe(e,o,n),h=n,n++),a&&(d=a.name);const u="xl/worksheets/_rels/sheet".concat(o+1,".xml.rels");e.addFile(u,hwe({tableName:d,drawingIndex:c,vmlDrawingIndex:h}))}})(e,t),kwe(e,n,o,r,a),cwe(),!0},Awe=e=>{const{data:t,fontSize:i,author:n,activeSheetIndex:o}=e,s=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",r=new Swe;return Iwe(r,t,{author:n,fontSize:i,activeTab:o})?r.getZipFile(s):Promise.resolve(void 0)},Twe=e=>{const{data:t,fontSize:i,author:n,activeSheetIndex:o}=e,s=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",r=new Swe;if(Iwe(r,t,{author:n,fontSize:i,activeTab:o}))return r.getUncompressedZipFile(s)},Ewe="33.0.3",Rwe={moduleName:"EnterpriseCore",version:Ewe,beans:[Bbe],icons:{accordionOpen:"tree-open",accordionClosed:"tree-closed",accordionIndeterminate:"tree-indeterminate",close:"cross",cancel:"cancel",maximize:"maximize",minimize:"minimize",columnDrag:"grip"},dependsOn:[]};var Lwe={ariaAdvancedFilterBuilderItem:e=>"".concat(e[0],". Level ").concat(e[1],". Press ENTER to edit"),ariaAdvancedFilterBuilderItemValidation:e=>"".concat(e[0],". Level ").concat(e[1],". ").concat(e[2]," Press ENTER to edit"),ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:e=>"Expression has an error. ".concat(e[0]," - ").concat(e[1],"."),advancedFilterValidationMessageAtEnd:e=>"Expression has an error. ".concat(e[0]," at end of expression."),advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function Pwe(e,t,i){if(!e)return"";const n=i-t;return n?e.slice(0,e.length-n):e}function Nwe(e,t,i,n,o,s,r){const a=i+(!e.length||r?0:1);let l=0;o&&(" "===e[a]?l=1:(n+=" ",s&&(n+='"')));return{updatedValue:e.slice(0,t)+n+e.slice(a),updatedPosition:t+n.length+l}}function Fwe(e,t,i,n){let o=t,s=!1;for(;o<e.length;){const t=e[o];if("("===t){n&&" "===e[o-1]?s=!0:o-=1;break}if(" "===t||i&&")"===t){o-=1;break}o++}return{endPosition:o,isEmpty:s}}function Owe(e,t,i,n){i!==t&&(e.expression=Nwe(e.expression,n-t.length+1,n,i).updatedValue)}var Bwe=class{constructor(e,t){this.params=e,this.startPosition=t,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}parse(e,t){if(e!==_we||this.colName)if(e===Vwe&&this.hasStartChar){if(this.parseColumn(!1,t))return this.hasEndChar=!0,!1;this.colName+=e}else this.colName+=e;else this.hasStartChar=!0}getDisplayValue(){return(this.hasStartChar?_we:"")+this.colName+(this.hasEndChar?Vwe:"")}getColId(){return this.colId}complete(e){this.parseColumn(!0,e)}getValidationError(){var e;return this.valid?null:{message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:null!==(e=this.endPosition)&&void 0!==e?e:this.params.expression.length-1}}parseColumn(e,t){this.endPosition=t;const i=this.params.advFilterExpSvc.getColId(this.colName);var n,o;if(i&&this.hasStartChar&&(this.colId=i.colId,Owe(this.params,this.colName,i.columnName,t-1),this.colName=i.columnName,this.column=this.params.colModel.getColDefCol(this.colId),this.column))return this.baseCellDataType=null!==(n=null===(o=this.params.dataTypeSvc)||void 0===o?void 0:o.getBaseDataType(this.column))&&void 0!==n?n:"text",!0;return e&&(this.valid=!1),this.baseCellDataType="text",!1}},Gwe=class{constructor(e,t,i){this.params=e,this.startPosition=t,this.baseCellDataType=i,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}parse(e,t){if(" "===e||")"===e){if(this.parseOperator(!1,t-1))return!0;this.operator+=e}else this.operator+=e}complete(e){this.parseOperator(!0,e)}getValidationError(){var e;return this.valid?null:{message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:null!==(e=this.endPosition)&&void 0!==e?e:this.params.expression.length-1}}getDisplayValue(){return this.operator}getOperatorKey(){return this.parsedOperator}parseOperator(e,t){const i=this.params.advFilterExpSvc.getDataTypeExpressionOperator(this.baseCellDataType),n=i.findOperator(this.operator);if(this.endPosition=t,n){this.parsedOperator=n;const e=i.operators[n];this.expectedNumOperands=e.numOperands;const o=e.displayValue;return Owe(this.params,this.operator,o,t),this.operator=o,!0}return!e&&null===n||(this.valid=!1),!1}},zwe=class{constructor(e,t,i,n){this.params=e,this.startPosition=t,this.baseCellDataType=i,this.column=n,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}parse(e,t){if(" "===e){if(!this.quotes)return this.parseOperand(!1,t),!0;this.operand+=e}else if(")"===e){if("number"===this.baseCellDataType||!this.quotes)return this.parseOperand(!1,t-1),!0;this.operand+=e}else if(this.operand||this.quotes||"'"!==e&&'"'!==e){if(this.quotes&&e===this.quotes)return this.parseOperand(!1,t),!1;this.operand+=e}else this.quotes=e}complete(e){this.parseOperand(!0,e)}getValidationError(){var e;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:null!==(e=this.endPosition)&&void 0!==e?e:this.params.expression.length-1}:null}getRawValue(){return this.operand}getModelValue(){return this.modelValue}parseOperand(e,t){const{advFilterExpSvc:i}=this.params;if(this.endPosition=t,this.modelValue=this.operand,e&&this.quotes)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingQuote");else if(""===this.modelValue)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingValue");else{const e=i.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(null!=e&&(this.modelValue=e),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":null==e&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationInvalidDate"))}}}},_we="[",Vwe="]",Hwe=class{constructor(e,t){this.params=e,this.startPosition=t,this.isAwaiting=!0}parseExpression(){var e,t;let i=this.startPosition;const{expression:n}=this.params;for(;i<n.length;){const e=n[i];if(" "===e&&this.isAwaiting);else{if(this.isAwaiting=!1,!this.parser){let e;this.columnParser?this.operatorParser?(this.operandParser=new zwe(this.params,i,this.columnParser.baseCellDataType,this.columnParser.column),e=this.operandParser):(this.operatorParser=new Gwe(this.params,i,this.columnParser.baseCellDataType),e=this.operatorParser):(this.columnParser=new Bwe(this.params,i),e=this.columnParser),this.parser=e}const t=this.parser.parse(e,i);if(null!=t){if(this.isComplete())return this.returnEndPosition(t?i-1:i,!0);this.parser=void 0,this.isAwaiting=!0}}i++}return null===(e=this.parser)||void 0===e||null===(t=e.complete)||void 0===t||t.call(e,i-1),this.returnEndPosition(i)}isValid(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)}getValidationError(){var e,t,i,n,o;const s=null!==(e=null!==(t=null===(i=this.columnParser)||void 0===i?void 0:i.getValidationError())&&void 0!==t?t:null===(n=this.operatorParser)||void 0===n?void 0:n.getValidationError())&&void 0!==e?e:null===(o=this.operandParser)||void 0===o?void 0:o.getValidationError();if(s)return s;const r=this.params.expression.length;let a;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(a="advancedFilterValidationMissingValue"):a="advancedFilterValidationMissingOption":a="advancedFilterValidationMissingColumn",a?{message:this.params.advFilterExpSvc.translate(a),startPosition:r,endPosition:r}:null}getFunctionString(e){return this.getFunctionCommon(e,((e,t,i,n)=>{const o=i.replace(/(['"])/,"\\$1");const s=null==e?"":", params.operands[".concat(e,"]");return"params.operators[".concat(t,"].evaluator(expressionProxy.getValue('").concat(o,"', node), node, params.evaluatorParams[").concat(n,"]").concat(s,")")}))}getFunctionParsed(e){return this.getFunctionCommon(e,((e,t,i,n)=>(o,s,r)=>r.operators[t].evaluator(o.getValue(i,s),s,r.evaluatorParams[n],null==e?void 0:r.operands[e])))}getAutocompleteListParams(e){return this.isColumnPosition(e)?this.getColumnAutocompleteListParams(e):this.isOperatorPosition(e)?this.getOperatorAutocompleteListParams(e):this.isBeyondEndPosition(e)?void 0:{enabled:!1}}updateExpression(e,t,i){const{expression:n}=this.params;var o;if(this.isColumnPosition(e))return Nwe(this.params.expression,this.startPosition,null!==(o=this.columnParser)&&void 0!==o&&o.getColId()?this.columnParser.endPosition:Fwe(n,e).endPosition,this.params.advFilterExpSvc.getColumnValue(t),!0);if(this.isOperatorPosition(e)){var s;const o=this.getBaseCellDataTypeFromOperatorAutocompleteType(i),c=this.hasOperand(o,t.key),h=c&&this.doesOperandNeedQuotes(o);let u;if(null!=(null===(s=this.operatorParser)||void 0===s?void 0:s.startPosition)&&e<this.operatorParser.startPosition){var r;u=Nwe(n,e,e,null!==(r=t.displayValue)&&void 0!==r?r:t.key,c,h)}else{var a,d;let i,o=!1;if(null!==(a=this.operatorParser)&&void 0!==a&&a.getOperatorKey())i=this.operatorParser.endPosition;else{const{endPosition:t,isEmpty:s}=Fwe(n,e,!0,!0);i=t,o=s}u=Nwe(n,function(e,t,i){let n=t;for(;n<i&&" "===e[n];)n++;return n}(n,this.columnParser.endPosition+1,i),i,null!==(d=t.displayValue)&&void 0!==d?d:t.key,c,h,o)}return l(l({},u),{},{hideAutocomplete:!c})}return null}getModel(){const e=this.columnParser.getColId(),t={filterType:this.columnParser.baseCellDataType,colId:e,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(t.filter=this.operandParser.getModelValue()),t}getFunctionCommon(e,t){var i,n;const o=this.columnParser.getColId(),s=null===(i=this.operatorParser)||void 0===i?void 0:i.getOperatorKey(),{operators:r,evaluatorParams:a,operands:l}=e,d=this.params.advFilterExpSvc.getExpressionOperator(this.columnParser.baseCellDataType,s),c=this.addToListAndGetIndex(r,d),h=this.params.advFilterExpSvc.getExpressionEvaluatorParams(o),u=this.addToListAndGetIndex(a,h);return t(0===(null===(n=this.operatorParser)||void 0===n?void 0:n.expectedNumOperands)?void 0:this.addToListAndGetIndex(l,this.getOperandValue()),c,o,u)}getOperandValue(){let e=this.operandParser.getRawValue();const{baseCellDataType:t,column:i}=this.columnParser;switch(t){case"number":e=Number(e);break;case"date":case"dateString":e=this.params.valueSvc.parseValue(i,null,e,void 0)}if("dateString"===t){const{dataTypeSvc:t}=this.params;return t?t.getDateParserFunction(i)(e):e}return e}isComplete(){return!(!this.operatorParser||!(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))}isColumnPosition(e){return!this.columnParser||null==this.columnParser.endPosition||e<=this.columnParser.endPosition+1}isOperatorPosition(e){return!this.operatorParser||null==this.operatorParser.endPosition||e<=this.operatorParser.endPosition+1}isBeyondEndPosition(e){return this.isComplete()&&null!=this.endPosition&&e>this.endPosition+1&&this.endPosition+1<this.params.expression.length}returnEndPosition(e,t){return this.endPosition=t?e:e-1,e}getColumnAutocompleteListParams(e){return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(e))}getColumnSearchString(e){var t,i,n,o,s;const r=null!==(t=null===(i=this.columnParser)||void 0===i?void 0:i.getDisplayValue())&&void 0!==t?t:"",a=Pwe(r,e,null==(null===(n=this.columnParser)||void 0===n?void 0:n.endPosition)?this.params.expression.length:this.columnParser.endPosition+1),l=(null===(o=this.columnParser)||void 0===o?void 0:o.hasStartChar)&&a.length>0,d=(null===(s=this.columnParser)||void 0===s?void 0:s.hasEndChar)&&a.length===r.length+2;return l?a.slice(1,d?-1:void 0):a}getOperatorAutocompleteListParams(e){var t,i,n,o,s;const r=null===(t=this.columnParser)||void 0===t?void 0:t.column;if(!r)return{enabled:!1};const a=this.columnParser.baseCellDataType,l=null!=(null===(i=this.operatorParser)||void 0===i?void 0:i.startPosition)&&e<this.operatorParser.startPosition?"":Pwe(null!==(n=null===(o=this.operatorParser)||void 0===o?void 0:o.getDisplayValue())&&void 0!==n?n:"",e,null==(null===(s=this.operatorParser)||void 0===s?void 0:s.endPosition)?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getOperatorAutocompleteEntries(r,a),"operator-".concat(a),l)}getBaseCellDataTypeFromOperatorAutocompleteType(e){return null===e||void 0===e?void 0:e.replace("operator-","")}hasOperand(e,t){var i,n;return!e||!t||(null!==(i=null===(n=this.params.advFilterExpSvc.getExpressionOperator(e,t))||void 0===n?void 0:n.numOperands)&&void 0!==i?i:0)>0}doesOperandNeedQuotes(e){return"number"!==e}addToListAndGetIndex(e,t){const i=e.length;return e.push(t),i}};function Wwe(e,t,i){let n=!1;const o=e.toLocaleLowerCase(),s=o+" ",r=Object.entries(t).find((e=>{let[,t]=e;const r=i(t).toLocaleLowerCase();return r.startsWith(s)&&(n=!0),r===o}));return r?r[0]:n?null:void 0}function jwe(e,t){return(null!==t&&void 0!==t?t:Object.keys(e)).map((t=>({key:t,displayValue:e[t].displayValue})))}var Uwe=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return jwe(this.operators,e)}findOperator(e){return Wwe(e,this.operators,(e=>{let{displayValue:t}=e;return t}))}initOperators(){const{translate:e}=this.params;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:(e,t,i,n)=>this.evaluateExpression(e,t,i,n,!1,((e,t)=>e.includes(t))),numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:(e,t,i,n)=>this.evaluateExpression(e,t,i,n,!0,((e,t)=>!e.includes(t))),numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:(e,t,i,n)=>this.evaluateExpression(e,t,i,n,!1,((e,t)=>e===t)),numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:(e,t,i,n)=>this.evaluateExpression(e,t,i,n,!0,((e,t)=>e!=t)),numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:(e,t,i,n)=>this.evaluateExpression(e,t,i,n,!1,((e,t)=>e.startsWith(t))),numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:(e,t,i,n)=>this.evaluateExpression(e,t,i,n,!1,((e,t)=>e.endsWith(t))),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:e=>null==e||"string"===typeof e&&0===e.trim().length,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:e=>null!=e&&("string"!==typeof e||e.trim().length>0),numOperands:0}}}evaluateExpression(e,t,i,n,o,s){return null==e?o:i.caseSensitive?s(i.valueConverter(e,t),n):s(i.valueConverter(e,t).toLocaleLowerCase(),n.toLocaleLowerCase())}},Kwe=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return jwe(this.operators,e)}findOperator(e){return Wwe(e,this.operators,(e=>{let{displayValue:t}=e;return t}))}initOperators(){const{translate:e,equals:t}=this.params;this.operators={equals:{displayValue:e("advancedFilterEquals"),evaluator:(e,i,n,o)=>this.evaluateSingleOperandExpression(e,i,n,o,!!n.includeBlanksInEquals,t),numOperands:1},notEqual:{displayValue:e("advancedFilterNotEqual"),evaluator:(e,i,n,o)=>this.evaluateSingleOperandExpression(e,i,n,o,!!n.includeBlanksInEquals,((e,i)=>!t(e,i))),numOperands:1},greaterThan:{displayValue:e("advancedFilterGreaterThan"),evaluator:(e,t,i,n)=>this.evaluateSingleOperandExpression(e,t,i,n,!!i.includeBlanksInGreaterThan,((e,t)=>e>t)),numOperands:1},greaterThanOrEqual:{displayValue:e("advancedFilterGreaterThanOrEqual"),evaluator:(e,t,i,n)=>this.evaluateSingleOperandExpression(e,t,i,n,!!i.includeBlanksInGreaterThan,((e,t)=>e>=t)),numOperands:1},lessThan:{displayValue:e("advancedFilterLessThan"),evaluator:(e,t,i,n)=>this.evaluateSingleOperandExpression(e,t,i,n,!!i.includeBlanksInLessThan,((e,t)=>e<t)),numOperands:1},lessThanOrEqual:{displayValue:e("advancedFilterLessThanOrEqual"),evaluator:(e,t,i,n)=>this.evaluateSingleOperandExpression(e,t,i,n,!!i.includeBlanksInLessThan,((e,t)=>e<=t)),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:e=>null==e,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:e=>null!=e,numOperands:0}}}evaluateSingleOperandExpression(e,t,i,n,o,s){return null==e?o:s(i.valueConverter(e,t),n)}},Ywe=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return jwe(this.operators,e)}findOperator(e){return Wwe(e,this.operators,(e=>{let{displayValue:t}=e;return t}))}initOperators(){const{translate:e}=this.params;this.operators={true:{displayValue:e("advancedFilterTrue"),evaluator:e=>!!e,numOperands:0},false:{displayValue:e("advancedFilterFalse"),evaluator:e=>!1===e,numOperands:0},blank:{displayValue:e("advancedFilterBlank"),evaluator:e=>null==e,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:e=>null!=e,numOperands:0}}}};var Zwe=class extends En{constructor(e){super(function(e){const t=e.cssIdentifier||"default";return'<div class="ag-panel ag-'.concat(t,'-panel" tabindex="-1">\n        <div data-ref="eTitleBar" class="ag-panel-title-bar ag-').concat(t,'-panel-title-bar ag-unselectable">\n            <span data-ref="eTitle" class="ag-panel-title-bar-title ag-').concat(t,'-panel-title-bar-title"></span>\n            <div data-ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-').concat(t,'-panel-title-bar-buttons"></div>\n        </div>\n        <div data-ref="eContentWrapper" class="ag-panel-content-wrapper ag-').concat(t,'-panel-content-wrapper"></div>\n    </div>')}(e)),this.config=e,this.closable=!0,this.eContentWrapper=Tn,this.eTitleBar=Tn,this.eTitleBarButtons=Tn,this.eTitle=Tn,this.registerCSS(".ag-panel{background-color:var(--ag-panel-background-color);display:flex;flex-direction:column;overflow:hidden;position:relative}.ag-dialog{border:var(--ag-dialog-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dialog-shadow);position:absolute}.ag-panel-title-bar{align-items:center;background-color:var(--ag-panel-title-bar-background-color);border-bottom:var(--ag-panel-title-bar-border);color:var(--ag-header-text-color);cursor:default;display:flex;flex:none;height:var(--ag-header-height);padding:var(--ag-spacing) var(--ag-cell-horizontal-padding)}.ag-panel-title-bar-button{cursor:pointer}:where(.ag-ltr) .ag-panel-title-bar-button{margin-left:calc(var(--ag-spacing)*2);margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-panel-title-bar-button{margin-left:var(--ag-spacing);margin-right:calc(var(--ag-spacing)*2)}.ag-panel-title-bar-title{color:var(--ag-header-text-color);flex:1 1 auto;font-weight:500}.ag-panel-title-bar-buttons{display:flex}.ag-panel-content-wrapper{display:flex;flex:1 1 auto;overflow:hidden;position:relative}:where(.ag-dragging-fill-handle) .ag-dialog,:where(.ag-dragging-range-handle) .ag-dialog{opacity:.7;pointer-events:none}")}postConstruct(){const{component:e,closable:t,hideTitleBar:i,title:n,minWidth:o=250,width:s,minHeight:r=250,height:a,centered:l,popup:d,x:c,y:h}=this.config;this.positionableFeature=new Ss(this.getGui(),{minWidth:o,width:s,minHeight:r,height:a,centered:l,x:c,y:h,popup:d,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const u=this.getGui();e&&this.setBodyComponent(e),i?le(this.eTitleBar,!1):(n&&this.setTitle(n),this.setClosable(null!=t?t:this.closable)),this.addManagedElementListeners(this.eTitleBar,{mousedown:e=>{if(u.contains(e.relatedTarget)||u.contains(Lt(this.beans))||this.eTitleBarButtons.contains(e.target))return void e.preventDefault();const t=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");t&&t.focus()}}),d&&this.positionableFeature.isPositioned()||(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const e=this.closeButtonComp=new En('<div class="ag-button"></div>');this.createBean(e);const t=e.getGui(),i=Wr("close",this.beans);i.classList.add("ag-panel-title-bar-button-icon"),t.appendChild(i),this.addTitleBarButton(e),e.addManagedElementListeners(t,{click:this.onBtClose.bind(this)})}else if(this.closeButtonComp){const e=this.closeButtonComp.getGui();e.parentElement.removeChild(e),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const i=this.eTitleBarButtons,n=i.children,o=n.length;null==t&&(t=o),t=Math.max(0,Math.min(t,o)),e.addCssClass("ag-panel-title-bar-button");const s=e.getGui();0===t?i.insertAdjacentElement("afterbegin",s):t===o?i.insertAdjacentElement("beforeend",s):n[t-1].insertAdjacentElement("afterend",s),e.setParentComponent(this)}getBodyHeight(){return pe(this.eContentWrapper)}getBodyWidth(){return ge(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&Me(e)&&this.close(),super.destroy()}},Xwe=class extends Zwe{constructor(e){super(l(l({},e),{},{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){const e=this.getGui(),{movable:t,resizable:i,maximizable:n,modal:o,postProcessPopupParams:s}=this.config;if(this.addCssClass("ag-dialog"),super.postConstruct(),s){var r;const{type:t,eventSource:i,column:n,mouseEvent:o,rowNode:a}=s;null===(r=this.popupSvc)||void 0===r||r.callPostProcessPopup(t,e,i,o,n,a)}if(this.tabGuardFeature=this.createManagedBean(new Ea(this)),this.tabGuardFeature.initialiseTabGuard({isFocusableContainer:!0,onFocusIn:()=>{var t;null===(t=this.popupSvc)||void 0===t||t.bringPopupToFront(e)},onTabKeyDown:t=>{if(o)return;const i=t.shiftKey,n=No(this.beans,e,!1,i);n&&!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(n)||zo(this.beans,i)&&t.preventDefault()}}),t&&this.setMovable(t),n&&this.setMaximizable(n),i&&this.setResizable(i),!this.config.modal){const e=this.beans.ctrlsSvc.get("gridCtrl");e.addFocusableContainer(this),this.addDestroyFunc((()=>e.removeFocusableContainer(this)))}}setAllowFocus(e){this.tabGuardFeature.getTabGuardCtrl().setAllowFocus(e)}renderComponent(){var e;const t=this.getGui(),{alwaysOnTop:i,modal:n,title:o,afterGuiAttached:s}=this.config,r=this.getLocaleTextFunc(),a=null===(e=this.popupSvc)||void 0===e?void 0:e.addPopup({modal:n,eChild:t,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:i,ariaLabel:o||r("ariaLabelDialog","Dialog"),afterGuiAttached:s});a&&(this.close=a.hideFunc)}onClosed(e){var t,i;this.destroy(),null===(t=(i=this.config).closedCallback)||void 0===t||t.call(i,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:e,y:t,width:i,height:n}=this.lastPosition;this.setWidth(i),this.setHeight(n),this.positionableFeature.offsetElement(e,t)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){le(this.maximizeIcon,!this.isMaximized),le(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach((e=>e())),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedElementListeners(i.getGui(),{click:this.toggleMaximize.bind(this)}),this.addTitleBarButton(i,0),this.maximizeListeners.push(...this.addManagedElementListeners(t,{dblclick:this.toggleMaximize.bind(this)})),[this.resizeListenerDestroy]=this.addManagedListeners(this.positionableFeature,{resize:()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new En('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=Wr("maximize",this.beans),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Wr("minimize",this.beans),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}};var qwe=class extends Ra{constructor(e){super(function(e){return'<div class="ag-virtual-list-viewport ag-'.concat(e,'-virtual-list-viewport" role="presentation">\n            <div class="ag-virtual-list-container ag-').concat(e,'-virtual-list-container" data-ref="eContainer"></div>\n        </div>')}((null===e||void 0===e?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=Tn,this.awaitStableCallbacks=[];const{cssIdentifier:t="default",ariaRole:i="listbox",listName:n}=e||{};this.cssIdentifier=t,this.ariaRole=i,this.listName=n}wireBeans(e){this.environment=e.environment}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanged.bind(this)})}onGridStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}setAriaProperties(){const e=this.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),t=this.eContainer;I(t,this.ariaRole),A(t,e)}addResizeObserver(){const e=Be(this.beans,this.getGui(),(()=>Mo(this.beans,(()=>this.drawVirtualRows()))));this.addDestroyFunc(e)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=parseInt(t.getAttribute("aria-posinset"),10)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case Do.UP:case Do.DOWN:e.preventDefault(),this.navigate(e.key===Do.UP);break;case Do.PAGE_HOME:case Do.PAGE_END:case Do.PAGE_UP:case Do.PAGE_DOWN:null!==this.navigateToPage(e.key)&&e.preventDefault()}}onTabKeyDown(e){fi(e),this.forceFocusOutOfContainer(e.shiftKey)}navigate(e){if(null==this.lastFocusedRowIndex)return;const t=this.lastFocusedRowIndex+(e?-1:1);t<0||t>=this.model.getRowCount()||this.focusRow(t)}navigateToPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"focused",i=!1;"focused"===t&&(t=this.getLastFocusedRow(),i=!0);const n=this.model.getRowCount()-1;let o=-1;return e===Do.PAGE_HOME?o=0:e===Do.PAGE_END?o=n:e===Do.PAGE_DOWN?o=Math.min(t+this.pageSize,n):e===Do.PAGE_UP&&(o=Math.max(t-this.pageSize,0)),-1===o?null:(i?this.focusRow(o):this.ensureIndexVisible(o),o)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),Mo(this.beans,(()=>{if(this.isScrolling=!1,!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()})))}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach(((t,i)=>e(t.rowComponent,i)))}getItemHeight(){return this.isHeightFromTheme?this.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.model.getRowCount();if("number"!==typeof e||e<0||e>=i)return pt(229,{index:e}),!1;const n=e*this.rowHeight,o=n+this.rowHeight,s=this.getGui(),r=s.scrollTop,a=s.offsetHeight,l=r+a,d=t?0:this.rowHeight,c=l<o-d;if(r>n+d)return s.scrollTop=n,!0;if(c){const e=o-a;return s.scrollTop=e,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(null==this.model||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height="".concat(t*this.rowHeight,"px"),this.awaitStable((()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))}))}awaitStable(e){if(this.awaitStableCallbacks.push(e),this.awaitStableCallbacks.length>1)return;const t=this.model.getRowCount();tt((()=>this.eContainer.clientHeight>=t*this.rowHeight),(()=>{if(!this.isAlive())return;const e=this.awaitStableCallbacks;this.awaitStableCallbacks=[],e.forEach((e=>e()))}))}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&"function"===typeof this.model.areRowsEqual&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach(((e,t)=>this.removeRow(t)))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),i=t.scrollTop,n=i+t.offsetHeight,o=Math.floor(i/this.rowHeight),s=Math.floor(n/this.rowHeight);this.pageSize=Math.floor((n-i)/this.rowHeight),this.ensureRowsRendered(o,s,e)}ensureRowsRendered(e,t,i){this.renderedRows.forEach(((i,n)=>{(n<e||n>t)&&n!==this.lastFocusedRowIndex&&this.removeRow(n)})),i&&this.refreshRows();for(let n=e;n<=t;n++)this.renderedRows.has(n)||n<this.model.getRowCount()&&this.insertRow(n)}insertRow(e){const t=this.model.getRow(e),i=document.createElement("div");i.classList.add("ag-virtual-list-item","ag-".concat(this.cssIdentifier,"-virtual-list-item")),I(i,"tree"===this.ariaRole?"treeitem":"option"),G(i,this.model.getRowCount()),z(i,e+1),i.setAttribute("tabindex","-1"),i.style.height="".concat(this.rowHeight,"px"),i.style.top="".concat(this.rowHeight*e,"px");const n=this.componentCreator(t,i);n.addGuiEventListener("focusin",(()=>this.lastFocusedRowIndex=e)),i.appendChild(n.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:n,eDiv:i,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach(((t,i)=>{if(i>=e)this.removeRow(i);else{var n,o;const e=this.model.getRow(i);null!==(n=(o=this.model).areRowsEqual)&&void 0!==n&&n.call(o,t.value,e)?this.componentUpdater(e,t.rowComponent):this.removeRow(i)}}))}addScrollListener(){this.addGuiEventListener("scroll",(()=>this.drawVirtualRows()),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),this.awaitStableCallbacks.length=0,super.destroy())}},Qwe=class extends En{constructor(){super('\n        <div class="ag-autocomplete-row" role="presentation">\n            <div class="ag-autocomplete-row-label"></div>\n        </div>'),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){let t=!1;if(ze(e)){var i;const n=null===(i=this.value)||void 0===i?void 0:i.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){t=!0,this.hasHighlighting=!0;const i=n+e.length,o=Ho(this.value.slice(0,n)),s=Ho(this.value.slice(n,i)),r=Ho(this.value.slice(i));this.getGui().lastElementChild.innerHTML="".concat(o,"<b>").concat(s,"</b>").concat(r)}}!t&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=null!==(e=Ho(this.value))&&void 0!==e?e:"&nbsp;"}},Jwe=class extends La{constructor(e){super('<div class="ag-autocomplete-list-popup">\n            <div data-ref="eList" class="ag-autocomplete-list"></div>\n        <div>'),this.params=e,this.eList=Tn,this.searchString=""}postConstruct(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new qwe({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:e=>this.autocompleteEntries[e]});const e=this.virtualList.getGui();this.addManagedListeners(e,{click:()=>this.params.onConfirmed(),mousemove:this.onMouseMove.bind(this),mousedown:e=>e.preventDefault()}),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();const i=this.autocompleteEntries.indexOf(this.selectedValue),n=t===Do.UP?i-1:i+1;this.checkSetSelectedValue(n)}setSearch(e){this.searchString=e,ze(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let i,n=!1;const o=e.toLocaleLowerCase(),s=t.filter((e=>{const t=e.toLocaleLowerCase().indexOf(o),s=0===t,r=t>=0;return r&&(!i||!n&&s||n===s&&e.length<i.length)&&(i=e,n=s),r}));return!i&&s.length&&(i=s[0]),{topMatch:i,allMatches:s}}runSearch(){const{autocompleteEntries:e,useFuzzySearch:t,forceLastSelection:i}=this.params,n=e.map((e=>{var t;return null!==(t=e.displayValue)&&void 0!==t?t:e.key}));let o,s;if(t)o=Qc({inputValue:this.searchString,allSuggestions:n,hideIrrelevant:!0,addSequentialWeight:!0}).values,s=o.length?o[0]:void 0;else{const e=this.runContainsSearch(this.searchString,n);o=e.allMatches,s=e.topMatch}let r=e.filter((e=>{let{key:t,displayValue:i}=e;return o.includes(null!==i&&void 0!==i?i:t)}));if(!r.length&&this.selectedValue&&null!==i&&void 0!==i&&i(this.selectedValue,this.searchString)&&(r=[this.selectedValue]),this.autocompleteEntries=r,this.virtualList.refresh(),!s)return;const a=o.indexOf(s);this.checkSetSelectedValue(a)}updateSearchInList(){this.virtualList.forEachRenderedRow((e=>e.setSearchString(this.searchString)))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow(((t,i)=>{t.updateSelected(e===i)})))}createRowComponent(e){var t;const i=new Qwe;return this.createBean(i),i.setState(null!==(t=e.displayValue)&&void 0!==t?t:e.key,e===this.selectedValue),i}onMouseMove(e){const t=this.virtualList,i=t.getGui().getBoundingClientRect(),n=t.getScrollTop(),o=e.clientY-i.top+n,s=Math.floor(o/t.getRowHeight());this.checkSetSelectedValue(s)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&null!==(e=this.selectedValue)&&void 0!==e?e:null}},$we={selector:"AG-AUTOCOMPLETE",component:class extends En{constructor(){super('\n            <div class="ag-autocomplete" role="presentation">\n                <ag-input-text-field data-ref="eAutocompleteInput"></ag-input-text-field>\n            </div>',[sa]),this.eAutocompleteInput=Tn,this.isListOpen=!1,this.lastPosition=0,this.valid=!0,this.registerCSS(".ag-autocomplete{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}}.ag-autocomplete-list-popup{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-autocomplete-list{height:calc(var(--ag-row-height)*6.5);min-width:200px;position:relative;width:100%}.ag-autocomplete-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:focus-visible:after{content:none}&:hover{background-color:var(--ag-row-hover-color)}}.ag-autocomplete-row{align-items:center;display:flex;flex:1 1 auto;overflow:hidden}.ag-autocomplete-row-label{margin:0 var(--ag-widget-container-horizontal-padding);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-autocomplete-row-selected{background-color:var(--ag-selected-row-background-color)}")}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.eAutocompleteInput.onValueChange((e=>this.onValueChanged(e))),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc((()=>{this.destroyBean(this.autocompleteList)})),this.addGuiEventListener("focusout",(()=>this.onFocusOut()))}onValueChanged(e){const t=Ge(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(e){this.updateLastPosition(),this.dispatchLocalEvent({type:"eventValueChanged",value:e}),this.validate(e)}updateAutocompleteList(e){var t,i,n;const o=null!==(t=null===(i=this.listGenerator)||void 0===i?void 0:i.call(this,e,this.lastPosition))&&void 0!==t?t:{enabled:!1},s=this.isListOpen;if(o.type&&o.type===(null===(n=this.autocompleteListParams)||void 0===n?void 0:n.type)||s&&this.closeList(),this.autocompleteListParams=o,null!==o&&void 0!==o&&o.enabled){s||this.openList();const{searchString:e}=o;this.autocompleteList.setSearch(null!==e&&void 0!==e?e:"")}else s&&this.closeList()}onKeyDown(e){const t=e.key;switch(this.updateLastPosition(),t){case Do.ENTER:this.onEnterKeyDown(e);break;case Do.TAB:this.onTabKeyDown(e);break;case Do.DOWN:case Do.UP:this.onUpDownKeyDown(e,t);break;case Do.LEFT:case Do.RIGHT:case Do.PAGE_HOME:case Do.PAGE_END:setTimeout((()=>{this.updatePositionAndList()}));break;case Do.ESCAPE:this.onEscapeKeyDown(e);break;case Do.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList())}}confirmSelection(){var e;const t=null===(e=this.autocompleteList)||void 0===e?void 0:e.getSelectedValue();t&&(this.closeList(),this.dispatchLocalEvent({type:"eventOptionSelected",value:this.getValue(),position:this.lastPosition,updateEntry:t,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){var i;(e.preventDefault(),this.isListOpen)?null===(i=this.autocompleteList)||void 0===i||i.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList(null!==(e=this.eAutocompleteInput.getValue())&&void 0!==e?e:null)}setCaret(e,t){t&&Ft(this.beans)&&this.eAutocompleteInput.getFocusableElement().focus();const i=this.eAutocompleteInput.getInputElement();i.setSelectionRange(e,e),e===i.value.length&&(i.scrollLeft=i.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=null!==(e=this.eAutocompleteInput.getInputElement().selectionStart)&&void 0!==e?e:0}validate(e){if(!this.validator)return;const t=this.validationMessage=this.validator(e);this.eAutocompleteInput.getInputElement().setCustomValidity(null!==t&&void 0!==t?t:""),this.valid=!t,this.dispatchLocalEvent({type:"eventValidChanged",isValid:this.valid,validationMessage:t})}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new Jwe({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},i=this.popupSvc.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupSvc.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=i.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchLocalEvent({type:"eventValueConfirmed",value:this.getValue(),isValid:this.isValid()})}getValue(){return Ge(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:t,position:i,silent:n,updateListOnlyIfOpen:o,restoreFocus:s}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(null!==i&&void 0!==i?i:this.lastPosition,s),n||this.updateValue(t),o&&!this.isListOpen||this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}}},eSe=class extends En{constructor(){super('\n            <div class="ag-advanced-filter" role="presentation" tabindex="-1">\n                <ag-autocomplete data-ref="eAutocomplete"></ag-autocomplete>\n                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" data-ref="eApplyFilterButton"></button>\n                <button class="ag-button ag-advanced-filter-builder-button" data-ref="eBuilderFilterButton">\n                    <span data-ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>\n                    <span class="ag-advanced-filter-builder-button-label" data-ref="eBuilderFilterButtonLabel"></span>\n                </button>\n            </div>',[$we]),this.eAutocomplete=Tn,this.eApplyFilterButton=Tn,this.eBuilderFilterButton=Tn,this.eBuilderFilterButtonIcon=Tn,this.eBuilderFilterButtonLabel=Tn,this.expressionParser=null,this.isApplyDisabled=!0,this.builderOpen=!1}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc,this.advancedFilter=e.advancedFilter,this.filterManager=e.filterManager,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipShowDelayOverride:()=>1e3,getLocation:()=>"advancedFilter"})),this.eAutocomplete.setListGenerator(((e,t)=>this.generateAutocompleteListParams(t))).setValidator((()=>this.validateValue())).setForceLastSelection(((e,t)=>this.forceLastSelection(e,t))).setInputAriaLabel(this.advFilterExpSvc.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advFilterExpSvc.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListeners(this.eAutocomplete,{eventValueChanged:e=>{let{value:t}=e;return this.onValueChanged(t)},eventValueConfirmed:e=>{let{isValid:t}=e;return this.onValueConfirmed(t)},eventOptionSelected:e=>{let{position:t,updateEntry:i,autocompleteType:n}=e;return this.onOptionSelected(t,i,n)},eventValidChanged:e=>{let{isValid:t,validationMessage:i}=e;return this.onValidChanged(t,i)}}),this.setupApplyButton(),this.setupBuilderButton()}refresh(){const e=this.advancedFilter.getExpressionDisplayValue();this.eAutocomplete.setValue({value:null!==e&&void 0!==e?e:"",position:null===e||void 0===e?void 0:e.length,updateListOnlyIfOpen:!0})}setInputDisabled(e){this.eAutocomplete.setInputDisabled(e),ce(this.eApplyFilterButton,e||this.isApplyDisabled)}setupApplyButton(){this.eApplyFilterButton.innerText=this.advFilterExpSvc.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedElementListeners(this.eApplyFilterButton,{click:()=>this.onValueConfirmed(this.eAutocomplete.isValid())}),ce(this.eApplyFilterButton,this.isApplyDisabled)}setupBuilderButton(){this.eBuilderFilterButtonIcon.appendChild(Wr("advancedFilterBuilder",this.beans)),this.eBuilderFilterButtonLabel.innerText=this.advFilterExpSvc.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedElementListeners(this.eBuilderFilterButton,{click:()=>this.openBuilder()}),this.addManagedListeners(this.advancedFilter.getCtrl(),{advancedFilterBuilderClosed:()=>this.closeBuilder()})}onValueChanged(e){var t;e=Ge(e),this.advancedFilter.setExpressionDisplayValue(e),this.expressionParser=this.advancedFilter.createExpressionParser(e);const i=null===(t=this.expressionParser)||void 0===t?void 0:t.parseExpression();i&&i!==e&&this.eAutocomplete.setValue({value:i,silent:!0,restoreFocus:!0})}onValueConfirmed(e){var t;e&&!this.isApplyDisabled&&(ce(this.eApplyFilterButton,!0),this.advancedFilter.applyExpression(),null===(t=this.filterManager)||void 0===t||t.onFilterChanged({source:"advancedFilter"}))}onOptionSelected(e,t,i){const{updatedValue:n,updatedPosition:o,hideAutocomplete:s}=this.updateExpression(e,t,i);this.eAutocomplete.setValue({value:n,position:o,updateListOnlyIfOpen:s,restoreFocus:!0})}validateValue(){var e,t,i;return null!==(e=this.expressionParser)&&void 0!==e&&e.isValid()?null:null!==(t=null===(i=this.expressionParser)||void 0===i?void 0:i.getValidationMessage())&&void 0!==t?t:null}onValidChanged(e,t){var i;this.isApplyDisabled=!e||this.advancedFilter.isCurrentExpressionApplied(),ce(this.eApplyFilterButton,this.isApplyDisabled),null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(t)}generateAutocompleteListParams(e){return this.expressionParser?this.expressionParser.getAutocompleteListParams(e):this.advFilterExpSvc.getDefaultAutocompleteListParams("")}updateExpression(e,t,i){var n,o;return this.advFilterExpSvc.updateAutocompleteCache(t,i),null!==(n=null===(o=this.expressionParser)||void 0===o?void 0:o.updateExpression(e,t,i))&&void 0!==n?n:this.advancedFilter.getDefaultExpression(t)}forceLastSelection(e,t){let{key:i,displayValue:n}=e;return!!t.toLocaleLowerCase().match("^".concat((null!==n&&void 0!==n?n:i).toLocaleLowerCase(),"\\s*$"))}openBuilder(){this.builderOpen||(this.builderOpen=!0,ce(this.eBuilderFilterButton,!0),this.advancedFilter.getCtrl().toggleFilterBuilder({source:"ui",eventSource:this.eBuilderFilterButton}))}closeBuilder(){this.builderOpen&&(this.builderOpen=!1,ce(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())}},tSe=class extends En{constructor(e){super('\n            <div class="ag-advanced-filter-header" role="row">\n            </div>'),this.enabled=e}wireBeans(e){this.colModel=e.colModel,this.focusSvc=e.focusSvc,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.setupAdvancedFilter(this.enabled),this.addDestroyFunc((()=>this.destroyBean(this.eAdvancedFilter)));const e=()=>{this.enabled&&this.setEnabledHeight()};this.addManagedEventListeners({gridColumnsChanged:()=>this.onGridColumnsChanged(),columnHeaderHeightChanged:e,gridStylesChanged:e}),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addGuiEventListener("keydown",(e=>this.onKeyDown(e))),this.addGuiEventListener("focusout",(e=>{this.getFocusableElement().contains(e.relatedTarget)||this.focusSvc.clearAdvancedFilterColumn()}))}getFocusableElement(){var e,t;return null!==(e=null===(t=this.eAdvancedFilter)||void 0===t?void 0:t.getGui())&&void 0!==e?e:this.getGui()}setEnabled(e){e!==this.enabled&&this.setupAdvancedFilter(e)}refresh(){var e;null===(e=this.eAdvancedFilter)||void 0===e||e.refresh()}getHeight(){return this.height}setInputDisabled(e){var t;null===(t=this.eAdvancedFilter)||void 0===t||t.setInputDisabled(e)}setupAdvancedFilter(e){const t=this.getGui();if(e){this.eAdvancedFilter=this.createBean(new eSe);const e=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.setEnabledHeight(),this.setAriaRowIndex(),I(e,"gridcell"),W(e,1),this.setAriaColumnCount(e),t.appendChild(e)}else xe(t),this.destroyBean(this.eAdvancedFilter),this.height=0;le(t,e),this.enabled=e}setEnabledHeight(){const e=this.getGui();this.height=Sr(this.beans);const t="".concat(this.height,"px");e.style.height=t,e.style.minHeight=t}setAriaColumnCount(e){j(e,this.colModel.getCols().length)}setAriaRowIndex(){var e,t;V(this.getGui(),null!==(e=null===(t=this.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===t?void 0:t.getRowCount())&&void 0!==e?e:0)}onGridColumnsChanged(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())}onKeyDown(e){switch(e.key){case Do.ENTER:this.hasFocus()&&Po(this.getFocusableElement())&&e.preventDefault();break;case Do.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case Do.UP:this.navigateUpDown(!0,e);break;case Do.DOWN:this.navigateUpDown(!1,e);break;case Do.TAB:if(this.hasFocus())this.navigateLeftRight(e);else{const t=No(this.beans,this.getFocusableElement(),null,e.shiftKey);t?(e.preventDefault(),t.focus()):this.navigateLeftRight(e)}}}navigateUpDown(e,t){this.hasFocus()&&this.focusSvc.focusNextFromAdvancedFilter(e)&&t.preventDefault()}navigateLeftRight(e){(e.shiftKey?this.focusSvc.focusLastHeader():this.focusSvc.focusNextFromAdvancedFilter(!1,!0))&&e.preventDefault()}hasFocus(){return Lt(this.beans)===this.getFocusableElement()}},iSe="ag-list-item-hovered",nSe=class extends Si{constructor(e,t,i){super(),this.comp=e,this.virtualList=t,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}wireBeans(e){this.dragAndDrop=e.dragAndDrop}postConstruct(){this.addManagedListeners(this.params.eventSource,{[this.params.listItemDragStartEvent]:this.listItemDragStart.bind(this),[this.params.listItemDragEndEvent]:this.listItemDragEnd.bind(this)}),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout((()=>{this.currentDragValue=null,this.moveBlocked=!1}),10)}createDropTarget(){var e;const t={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?"pinned":"move",getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave(),onDragCancel:()=>this.onDragCancel()};null===(e=this.dragAndDrop)||void 0===e||e.addDropTarget(t)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new ns({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),i=this.virtualList.getComponentAt(t.rowIndex);if(!i)return;const n=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,se(n,iSe),se(n,"ag-item-highlight-".concat(t.position)))}getListDragItem(e){const t=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(t).paddingTop),n=this.virtualList.getRowHeight(),o=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-i+o)/n),r=this.params.getNumRows(this.comp)-1,a=0|Math.min(r,s);return{rowIndex:a,position:Math.round(s)>s||s>r?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearDragProperties())}onDragCancel(){this.clearDragProperties()}onDragLeave(){this.clearDragProperties()}clearDragProperties(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(".".concat(iSe)).forEach((e=>{[iSe,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((t=>{e.classList.remove(t)}))})),this.lastHoveredListItem=null}},oSe=class extends Si{constructor(e,t){super(),this.comp=e,this.virtualList=t}postConstruct(){this.createManagedBean(new nSe(this.comp,this.virtualList,{dragSourceType:is.AdvancedFilterBuilder,listItemDragStartEvent:"advancedFilterBuilderDragStarted",listItemDragEndEvent:"advancedFilterBuilderDragEnded",eventSource:this,getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:()=>!1,getNumRows:e=>e.getNumItems(),moveItem:(e,t)=>this.moveItem(e,t)}))}getCurrentDragValue(e){return e.item}moveItem(e,t){this.comp.moveItem(e,t)}},sSe=class extends En{constructor(e){super('\n            <div class="ag-pill" role="option">\n                <span class="ag-pill-text" data-ref="eText"></span>\n                <span class="ag-button ag-pill-button" data-ref="eButton" role="presentation"></span>\n            </div>\n        '),this.config=e,this.eText=Tn,this.eButton=Tn}postConstruct(){const{config:e,eButton:t}=this,{onKeyDown:i,onButtonClick:n}=e;this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),this.addGuiEventListener("focus",(()=>{this.eButton.focus()})),i&&this.addGuiEventListener("keydown",i),n&&this.addManagedElementListeners(t,{click:n})}toggleCloseButtonClass(e,t){this.eButton.classList.toggle(e,t)}setText(e){this.eText.textContent=e}getText(){return this.eText.textContent}},rSe=class extends En{constructor(){super('\n            <div class="ag-pill-container" role="listbox"></div>\n            '),this.pills=[]}init(e){this.params=e,this.refresh()}refresh(){this.clearPills();const{params:e,onPillKeyDown:t}=this,i=e.getValue();if(!Array.isArray(i))return;const n=i.length;for(let o=0;o<n;o++){const s=i[o],r=this.createBean(new sSe({onButtonClick:()=>this.onPillButtonClick(r),onKeyDown:t.bind(this)})),a=r.getGui();z(a,o+1),G(a,n),e.onPillMouseDown&&r.addGuiEventListener("mousedown",e.onPillMouseDown),e.announceItemFocus&&r.addGuiEventListener("focus",e.announceItemFocus),r.setText(s),r.toggleCloseButtonClass("ag-icon-cancel",!0),this.appendChild(a),this.pills.push(r)}}onNavigationKeyDown(e){const{key:t}=e;if(!this.pills.length||t!==Do.LEFT&&t!==Do.RIGHT)return;e.preventDefault();const{params:i,beans:n}=this,o=Lt(n),s=this.getGui();if(s.contains(o)){const e=No(n,s,!1,t===Do.LEFT);e?e.focus():i.eWrapper&&i.eWrapper.focus()}else{const e=Lo(s);e.length>0&&e[t===Do.RIGHT?0:e.length-1].focus()}}clearPills(){const e=this.getGui();e.contains(Lt(this.beans))&&this.params.eWrapper&&this.params.eWrapper.focus(),xe(e),this.destroyBeans(this.pills),this.pills=[]}onPillButtonClick(e){this.deletePill(e)}onPillKeyDown(e){const t=e.key;if(t!==Do.DELETE&&t!==Do.BACKSPACE)return;e.preventDefault();const i=Tt(this.beans),n=this.pills.findIndex((e=>e.getGui().contains(i.activeElement)));if(-1===n)return;const o=this.pills[n];o&&this.deletePill(o,n)}deletePill(e,t){const i=e.getText(),n=(this.params.getValue()||[]).filter((e=>e!==i));if(this.params.setValue(n),!n.length&&this.params.eWrapper)this.params.eWrapper.focus();else if(null!=t){const e=this.pills[Math.min(t,this.pills.length-1)];e&&e.getFocusableElement().focus()}}destroy(){this.clearPills(),super.destroy()}},aSe=class extends En{constructor(e){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e}wireBeans(e){this.userCompFactory=e.userCompFactory,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),shouldDisplayTooltip:()=>{var e,t;return null===(e=null===(t=this.shouldDisplayTooltip)||void 0===t?void 0:t.call(this))||void 0===e||e}}))}setState(e){let t="";const{params:i}=this;i.valueFormatter&&(t=i.valueFormatter(e));this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.value=e}highlightString(e){const{parsedValue:t}=this;if(this.params.cellRenderer||!ze(t))return;let i=ze(e);if(i){const n=null===t||void 0===t?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){const i=n+e.length,o=Ho(t.slice(0,n),!0),s=Ho(t.slice(n,i),!0),r=Ho(t.slice(i));this.renderValueWithoutRenderer("".concat(o,'<span class="ag-rich-select-row-text-highlight">').concat(s,"</span>").concat(r))}else i=!1}i||this.renderValueWithoutRenderer(t)}updateSelected(e){Y(this.getGui().parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}getValue(){return this.value}toggleHighlighted(e){this.addOrRemoveCssClass("ag-rich-select-row-highlighted",e)}populateWithoutRenderer(e,t){var i;const n=Tt(this.beans),o=this.getGui(),s=n.createElement("span");s.style.overflow="hidden",s.style.textOverflow="ellipsis";const r=Ho(ze(t)?t:e,!0);this.parsedValue=ze(r)?r:null,o.appendChild(s),this.renderValueWithoutRenderer(r),this.shouldDisplayTooltip=xa((()=>s)),null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(this.parsedValue)}renderValueWithoutRenderer(e){const t=this.getGui().querySelector("span");t&&(t.innerHTML=ze(e)?e:"&nbsp;")}populateWithRenderer(e,t){let i,n;if(this.params.cellRenderer){var o;const i=null===(o=this.getParentComponent())||void 0===o?void 0:o.getParentComponent();n=to(this.userCompFactory,this.params,{value:e,valueFormatted:t,getValue:()=>null===i||void 0===i?void 0:i.getValue(),setValue:e=>{null===i||void 0===i||i.setValue(e,!0)},setTooltip:(e,t)=>{var i;this.gos.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=t,null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(e)}})}return n&&(i=n.newAgStackInstance()),i&&Oe(i,this.getGui()),!!i&&(i.then((e=>{this.addDestroyFunc((()=>{this.destroyBean(e)}))})),!0)}},lSe="ag-rich-select-list",dSe="ag-rich-select-row",cSe=class extends qwe{constructor(e,t,i){super({cssIdentifier:"rich-select"}),this.params=e,this.richSelectWrapper=t,this.getSearchString=i,this.lastRowHovered=-1,this.selectedItems=new Set,this.params=e,this.setComponentCreator(this.createRowComponent.bind(this)),this.setComponentUpdater((()=>{}))}postConstruct(){super.postConstruct(),this.createLoadingElement();const{cellRowHeight:e,pickerAriaLabelKey:t,pickerAriaLabelValue:i}=this.params;e&&this.setRowHeight(e);const n=this.getGui(),o=this.getAriaElement();this.addManagedListeners(n,{mousemove:this.onMouseMove.bind(this),mouseout:this.onMouseOut.bind(this),mousedown:this.onMouseDown.bind(this),click:this.onClick.bind(this)}),n.classList.add(lSe);const s="".concat(lSe,"-").concat(this.getCompId());o.setAttribute("id",s);A(o,this.getLocaleTextFunc()(t,i)),X(this.richSelectWrapper,o)}navigateToPage(e){const t=super.navigateToPage(e,this.lastRowHovered);return null!=t&&Mo(this.beans,(()=>{if(!this.isAlive())return null;this.highlightIndex(t)})),t}drawVirtualRows(e){super.drawVirtualRows(e),this.refreshSelectedItems()}highlightFilterMatch(e){this.forEachRenderedRow((t=>{t.highlightString(e)}))}onNavigationKeyDown(e,t){Mo(this.beans,(()=>{if(!this.currentList||!this.isAlive())return;const i=this.currentList.length,n=this.lastRowHovered,o=e===Do.DOWN?1:-1,s=Math.min(Math.max(-1===n?0:n+o,0),i-1);this.highlightIndex(s),t()}))}selectValue(e){var t,i;if(!this.currentList)return this.eLoading&&this.appendChild(this.eLoading),!1;null!==(t=this.eLoading)&&void 0!==t&&t.offsetParent&&(null===(i=this.eLoading.parentElement)||void 0===i||i.removeChild(this.eLoading));if(null==e)return!1;const n=this.getIndicesForValues(e),o=n.length>0;return o&&(this.refresh(),this.ensureIndexVisible(n[0]),this.refresh(!0)),this.selectListItems(Array.isArray(e)?e:[e]),o}selectListItems(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.selectedItems.clear();for(let t=0;t<e.length;t++){const i=e[t];this.selectedItems.has(i)||this.selectedItems.add(i)}this.refreshSelectedItems()}getCurrentList(){return this.currentList}setCurrentList(e){this.currentList=e,this.setModel({getRowCount:()=>e.length,getRow:t=>e[t],areRowsEqual:(e,t)=>e===t})}getSelectedItems(){return this.selectedItems}getLastItemHovered(){return this.currentList[this.lastRowHovered]}highlightIndex(e,t){if(this.currentList){if(e<0||e>=this.currentList.length)this.lastRowHovered=-1;else{this.lastRowHovered=e;this.ensureIndexVisible(e,!t)&&!t&&this.refresh(!0)}this.forEachRenderedRow(((t,i)=>{const n=e===i;if(t.toggleHighlighted(n),n){const e="".concat(dSe,"-").concat(t.getCompId());F(this.richSelectWrapper,e),this.richSelectWrapper.setAttribute("data-active-option",e)}}))}}getIndicesForValues(e){const{currentList:t}=this;if(!t||0===t.length||null==e)return[];if(Array.isArray(e)||(e=[e]),0===e.length)return[];const i=[];for(let n=0;n<e.length;n++){const o=t.indexOf(e[n]);o>=0&&i.push(o)}return i}toggleListItemSelection(e){this.selectedItems.has(e)?this.selectedItems.delete(e):this.selectedItems.add(e),this.refreshSelectedItems(),this.dispatchValueSelected()}refreshSelectedItems(){this.forEachRenderedRow((e=>{const t=this.selectedItems.has(e.getValue());e.updateSelected(t)}))}createLoadingElement(){const e=Tt(this.beans),t=this.getLocaleTextFunc(),i=e.createElement("div");i.classList.add("ag-loading-text"),i.innerText=t("loadingOoo","Loading..."),this.eLoading=i}createRowComponent(e,t){const i=new aSe(this.params);t.setAttribute("id","".concat(dSe,"-").concat(i.getCompId())),i.setParentComponent(this),this.createBean(i),i.setState(e);const{highlightMatch:n,searchType:o="fuzzy"}=this.params;return n&&"fuzzy"!==o&&i.highlightString(this.getSearchString()),i}getRowForMouseEvent(e){const t=this.getGui().getBoundingClientRect(),i=this.getScrollTop(),n=e.clientY-t.top+i;return Math.floor(n/this.getRowHeight())}onMouseMove(e){const t=this.getRowForMouseEvent(e);-1!==t&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.highlightIndex(t,!0))}onMouseDown(e){e.preventDefault()}onMouseOut(e){this.getGui().contains(e.relatedTarget)||this.highlightIndex(-1)}onClick(e){const{multiSelect:t}=this.params;if(!this.currentList)return;const i=this.getRowForMouseEvent(e),n=this.currentList[i];t?this.toggleListItemSelection(n):(this.selectListItems([n]),this.dispatchValueSelected())}dispatchValueSelected(){this.dispatchLocalEvent({type:"richSelectListRowSelected",fromEnterKey:!1,value:this.selectedItems})}destroy(){super.destroy(),this.eLoading=void 0}},hSe=class extends Sa{constructor(e){var t,i;super(l(l({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"richSelectOpen",ariaRole:"combobox",template:null!==(t=null===e||void 0===e?void 0:e.template)&&void 0!==t?t:'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">\n                    <span data-ref="eDisplayField" class="ag-picker-field-display"></span>\n                    <ag-input-text-field data-ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                    <span data-ref="eDeselect" class="ag-rich-select-deselect-button ag-picker-field-icon" role="presentation"></span>\n                    <span data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></span>\n                </div>\n            </div>',agComponents:[sa],modalPicker:!1},e),{},{maxPickerHeight:null!==(i=null===e||void 0===e?void 0:e.maxPickerHeight)&&void 0!==i?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.searchStringCreator=null,this.eInput=Tn,this.eDeselect=Tn,this.skipWrapperAnnouncement=!1;const{value:n,valueList:o,searchStringCreator:s}=e||{};void 0!==n&&(this.value=n),null!=o&&(this.values=o),s&&(this.searchStringCreator=s),this.registerCSS(".ag-rich-select{cursor:default;height:100%}.ag-rich-select-value{align-items:center;background-color:var(--ag-input-background-color);display:flex;height:100%;padding:var(--ag-spacing);:where(.ag-picker-field-display){overflow:hidden;text-overflow:ellipsis;&:where(.ag-display-as-placeholder){opacity:.5}}}.ag-rich-select-list{background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);box-shadow:var(--ag-dropdown-shadow);height:auto;position:relative;width:100%;:where(.ag-loading-text){padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}}.ag-rich-select-row{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;padding:0 var(--ag-spacing);white-space:nowrap}.ag-rich-select-row-selected{background-color:var(--ag-selected-row-background-color)}.ag-rich-select-row-highlighted,.ag-rich-select-row:hover{background-image:linear-gradient(var(--ag-row-hover-color),var(--ag-row-hover-color))}.ag-rich-select-row-text-highlight{font-weight:700}.ag-rich-select-field-input{flex:1 1 auto;:where(.ag-input-field-input){border:none!important;box-shadow:none!important;padding:0!important;text-overflow:ellipsis;&::-moz-placeholder{opacity:.8}&::placeholder{opacity:.8}}}:where(.ag-ltr) .ag-rich-select-field-input{left:var(--ag-spacing)}:where(.ag-rtl) .ag-rich-select-field-input{right:var(--ag-spacing)}:where(.ag-popup-editor) .ag-rich-select-value{height:var(--ag-row-height);min-width:200px}.ag-rich-select-virtual-list-item{cursor:default;height:var(--ag-list-item-height)}.ag-pill-container{display:flex;flex-wrap:nowrap;gap:.25rem}.ag-pill{align-items:center;background:var(--ag-select-cell-background-color);border:var(--ag-select-cell-border);border-radius:var(--ag-border-radius);display:flex;padding:0 .25rem;white-space:nowrap}.ag-pill-button{border:none;padding:0;&:hover{color:var(--ag-accent-color);cursor:pointer}}:where(.ag-ltr) .ag-pill-button{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-pill-button{margin-right:var(--ag-spacing)}")}wireBeans(e){this.userCompFactory=e.userCompFactory,this.ariaAnnounce=e.ariaAnnounce,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),shouldDisplayTooltip:()=>{var e,t;return null===(e=null===(t=this.shouldDisplayTooltip)||void 0===t?void 0:t.call(this))||void 0===e||e}})),super.postConstruct(),this.createListComponent(),this.eDeselect.appendChild(Wr("richSelectRemove",this.beans));const{allowTyping:e,placeholder:t,suppressDeselectAll:i}=this.config;this.eDeselect.classList.add("ag-hidden"),e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.setupAriaProperties();const{searchDebounceDelay:n=300}=this.config;this.clearSearchString=$e(this,this.clearSearchString.bind(this),n),this.renderSelectedValue(),e&&this.eInput.onValueChange((e=>this.searchTextFromString(e))),this.addManagedElementListeners(this.eWrapper,{focus:this.onWrapperFocus.bind(this)}),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)}),i||this.addManagedElementListeners(this.eDeselect,{mousedown:this.onDeselectAllMouseDown.bind(this),click:this.onDeselectAllClick.bind(this)})}setupAriaProperties(){const{eWrapper:e,gos:t}=this;e.tabIndex=t.get("tabIndex");const i=this.getLocaleTextFunc();this.ariaDeleteSelection=i("ariaLabelRichSelectDeleteSelection","Press DELETE to deselect item"),this.ariaDeselectAllItems=i("ariaLabelRichSelectDeselectAllItems","Press DELETE to deselect all items"),this.ariaToggleSelection=i("ariaLabelRichSelectToggleSelection","Press SPACE to toggle selection")}createListComponent(){this.listComponent=this.createBean(new cSe(this.config,this.eWrapper,(()=>this.searchString))),this.listComponent.setParentComponent(this),this.addManagedListeners(this.listComponent,{richSelectListRowSelected:e=>{this.onListValueSelected(e.value,e.fromEnterKey)}})}renderSelectedValue(){const{value:e,eDisplayField:t,config:i,gos:n}=this,{allowTyping:o,cellRenderer:s,initialInputValue:r,multiSelect:a,suppressDeselectAll:l,suppressMultiSelectPillRenderer:d}=i,c=this.config.valueFormatter?this.config.valueFormatter(e):e;if(o)return void this.eInput.setValue(null!==r&&void 0!==r?r:c);if(a&&!l){const t=null==e||Array.isArray(e)&&0===e.length;this.eDeselect.classList.toggle("ag-hidden",t)}let h,u;if(!a||d)if(s&&(h=to(this.userCompFactory,i,{value:e,valueFormatted:c,getValue:()=>this.getValue(),setValue:e=>{this.setValue(e,!0)},setTooltip:(e,t)=>{var i;n.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=t,null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(e)}})),h&&(u=h.newAgStackInstance()),u)xe(t),Oe(u,t),u.then((e=>{this.addDestroyFunc((()=>this.destroyBean(e)))}));else{var p;if(ze(this.value))t.innerText=c,t.classList.remove("ag-display-as-placeholder");else{const{placeholder:e}=i;ze(e)?(t.innerHTML="".concat(Ho(e)),t.classList.add("ag-display-as-placeholder")):xe(t)}this.shouldDisplayTooltip=xa((()=>this.eDisplayField)),null===(p=this.tooltipFeature)||void 0===p||p.setTooltipAndRefresh(null!==c&&void 0!==c?c:null)}else this.createOrUpdatePillContainer(t)}createPickerComponent(){const{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueList(e){const{valueList:t,refresh:i}=e;if(this.listComponent&&this.listComponent.getCurrentList()!==t&&(this.listComponent.setCurrentList(t),i)){if(this.values)this.listComponent.refresh(!0);else if(this.values=t,this.isPickerDisplayed){this.listComponent.selectValue(this.value)||this.listComponent.refresh()}this.alignPickerToComponent()}}showPicker(){super.showPicker();const{listComponent:e,value:t}=this;if(!e)return;let i=null;null!=this.value&&(e.selectValue(this.value),i=e.getIndicesForValues(Array.isArray(t)?t:[t])[0]),null!=i?e.highlightIndex(i):e.refresh(),this.displayOrHidePicker()}beforeHidePicker(){super.beforeHidePicker()}createOrUpdatePillContainer(e){if(!this.pillContainer){const t=this.pillContainer=this.createBean(new rSe);this.addDestroyFunc((()=>{this.destroyBean(this.pillContainer),this.pillContainer=null})),xe(e),e.appendChild(t.getGui()),t.init({eWrapper:this.eWrapper,onPillMouseDown:e=>{e.stopImmediatePropagation()},announceItemFocus:()=>{this.announceAriaValue(this.ariaDeleteSelection)},getValue:()=>this.getValue(),setValue:e=>this.setValue(e,!0)})}this.doWhileBlockingAnnouncement((()=>{var e;return null===(e=this.pillContainer)||void 0===e?void 0:e.refresh()}))}doWhileBlockingAnnouncement(e){this.skipWrapperAnnouncement=!0,e(),this.skipWrapperAnnouncement=!1}onWrapperFocus(){const{eInput:e,config:t}=this,{allowTyping:i,multiSelect:n,suppressDeselectAll:o}=t;if(i){const t=e.getFocusableElement();t.focus(),t.select()}else!n||o||this.skipWrapperAnnouncement||this.announceAriaValue(this.ariaDeselectAllItems)}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}onDeselectAllMouseDown(e){e.stopImmediatePropagation()}onDeselectAllClick(){this.setValue([],!0)}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===Do.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!js(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){null==e&&(e=""),this.searchString=e,this.runSearch()}buildSearchStrings(e){const{valueFormatter:t=e=>e}=this.config;let i;return"number"===typeof e[0]||"string"===typeof e[0]?i=e.map((e=>t(e))):"object"===typeof e[0]&&this.searchStringCreator&&(i=this.searchStringCreator(e)),i}filterListModel(e){const{filterList:t}=this.config;t&&this.setValueList({valueList:e,refresh:!0})}runSearch(){if(!this.listComponent)return;const{values:e}=this,t=this.buildSearchStrings(e);if(!t)return void this.listComponent.highlightIndex(-1);const{suggestions:i,filteredValues:n}=this.getSuggestionsAndFilteredValues(this.searchString,t),{filterList:o,highlightMatch:s,searchType:r="fuzzy"}=this.config,a=n.length,l=!(!o||""===this.searchString);if(this.filterListModel(l?n:e),i.length){var d;const e=l?0:t.indexOf(i[0]);null===(d=this.listComponent)||void 0===d||d.highlightIndex(e)}else{var c,h;if(null===(c=this.listComponent)||void 0===c||c.highlightIndex(-1),!l||a)null===(h=this.listComponent)||void 0===h||h.ensureIndexVisible(0);else if(l){var u;this.getAriaElement().removeAttribute("data-active-option");const e=null===(u=this.listComponent)||void 0===u?void 0:u.getAriaElement();e&&F(e,null)}}var p;s&&"fuzzy"!==r&&(null===(p=this.listComponent)||void 0===p||p.highlightFilterMatch(this.searchString));this.displayOrHidePicker()}getSuggestionsAndFilteredValues(e,t){let i=[];const n=[];if(!e.length)return{suggestions:i,filteredValues:n};const{searchType:o="fuzzy",filterList:s}=this.config;if("fuzzy"===o){const o=Qc({inputValue:e,allSuggestions:t,hideIrrelevant:!0,addSequentialWeight:!0});i=o.values;const r=o.indices;if(s&&r.length)for(let e=0;e<r.length;e++)n.push(this.values[r[e]])}else i=t.filter(((e,t)=>{const i=e.toLocaleLowerCase(),r=this.searchString.toLocaleLowerCase(),a="match"===o?i.startsWith(r):-1!==i.indexOf(r);return s&&a&&n.push(this.values[t]),a}));return{suggestions:i,filteredValues:n}}displayOrHidePicker(){if(!this.listComponent)return;const e=this.listComponent.getGui(),t=this.listComponent.getCurrentList(),i=!!t&&0===t.length;e.classList.toggle("ag-hidden",i)}clearSearchString(){this.searchString=""}setValue(e,t,i,n){if(this.value===e)return this;const o=Array.isArray(e);if(null!=e){if(!o){var s;const t=null===(s=this.listComponent)||void 0===s?void 0:s.getCurrentList();if(-1===(t?t.indexOf(e):-1))return this}var r;if(!i)null===(r=this.listComponent)||void 0===r||r.selectValue(e)}return super.setValue(e,t),n||this.renderSelectedValue(),this}onNavigationKeyDown(e,t,i){var n;e.preventDefault();const o=t===Do.DOWN;this.isPickerDisplayed||!o?null===(n=this.listComponent)||void 0===n||n.onNavigationKeyDown(t,i):this.showPicker()}onEnterKeyDown(e){var t;if(this.isPickerDisplayed&&(e.preventDefault(),null!==(t=this.listComponent)&&void 0!==t&&t.getCurrentList())){const e=this.listComponent.getLastItemHovered();this.config.multiSelect||null==e?this.dispatchPickerEventAndHidePicker(this.value,!0):this.onListValueSelected(new Set([e]),!0)}}onDeleteKeyDown(e){const{eWrapper:t,beans:i}=this;Lt(i)===t&&(e.preventDefault(),this.setValue([],!0))}onTabKeyDown(){const{config:e,isPickerDisplayed:t,listComponent:i}=this,{multiSelect:n}=e;if(t&&i){if(n){const e=this.getValueFromSet(i.getSelectedItems());e&&this.setValue(e,!1,!0,!0)}else this.setValue(i.getLastItemHovered(),!1,!0);this.hidePicker()}}getValueFromSet(e){const{multiSelect:t}=this.config;let i=null;for(const n of e){if(1===e.size&&!t){i=n;break}i||(i=[]),i.push(n)}return Array.isArray(i)&&i.sort(),i}onListValueSelected(e,t){const i=this.getValueFromSet(e);this.setValue(i,!1,!0),this.config.multiSelect||this.dispatchPickerEventAndHidePicker(i,t)}dispatchPickerEventAndHidePicker(e,t){const i={type:"fieldPickerValueSelected",fromEnterKey:t,value:e};this.dispatchLocalEvent(i),this.hidePicker()}getFocusableElement(){const{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){const{key:t}=e,{isPickerDisplayed:i,config:n,listComponent:o,pickerComponent:s}=this,{allowTyping:r,multiSelect:a,suppressDeselectAll:l}=n;switch(t){case Do.LEFT:case Do.RIGHT:var d;if(!r||this.pillContainer)if(e.preventDefault(),this.pillContainer)null===(d=this.listComponent)||void 0===d||d.highlightIndex(-1),this.pillContainer.onNavigationKeyDown(e);break;case Do.PAGE_HOME:case Do.PAGE_END:if(r){e.preventDefault();const i=this.eInput.getInputElement(),n=t===Do.PAGE_HOME?0:i.value.length;i.setSelectionRange(n,n);break}case Do.PAGE_UP:case Do.PAGE_DOWN:e.preventDefault(),s&&(null===o||void 0===o||o.navigateToPage(t));break;case Do.DOWN:case Do.UP:this.onNavigationKeyDown(e,t,(()=>{a&&(this.doWhileBlockingAnnouncement((()=>this.eWrapper.focus())),this.announceAriaValue(this.ariaToggleSelection))}));break;case Do.ESCAPE:i&&(Me(this.listComponent.getGui())&&(e.preventDefault(),fi(e)),this.hidePicker());break;case Do.ENTER:this.onEnterKeyDown(e);break;case Do.SPACE:if(i&&a&&o){e.preventDefault();const t=o.getLastItemHovered();t&&o.toggleListItemSelection(t)}break;case Do.TAB:this.onTabKeyDown();break;case Do.DELETE:a&&!l&&this.onDeleteKeyDown(e);break;default:r||this.buildSearchStringFromKeyboardEvent(e)}}announceAriaValue(e){var t;null===(t=this.ariaAnnounce)||void 0===t||t.announceValue(e,"richSelect")}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},uSe=class extends hSe{constructor(e){super(l(l({},e),{},{template:'\n                <div class="ag-picker-field" role="presentation">\n                    <div data-ref="eLabel"></div>\n                    <div data-ref="eWrapper" class="ag-wrapper ag-picker-collapsed">\n                        <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                        <ag-input-text-field data-ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <span data-ref="eDeselect" class="ag-rich-select-deselect-button ag-picker-field-icon" role="presentation"></span>\n                        <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>',agComponents:[sa]})),this.params=e}showPicker(){setTimeout((()=>super.showPicker()))}hidePicker(){setTimeout((()=>super.hidePicker()))}postConstruct(){super.postConstruct();const{wrapperClassName:e,ariaLabel:t}=this.params;le(this.eDisplayField,!1),e&&this.eWrapper.classList.add(e),T(this.eWrapper,""),A(this.eWrapper,t)}onEnterKeyDown(e){fi(e),this.isPickerDisplayed?super.onEnterKeyDown(e):(e.preventDefault(),this.showPicker())}},pSe=class extends Si{constructor(e,t,i){super(),this.eGui=e,this.focusWrapper=t,this.eFocusableComp=i}postConstruct(){this.addManagedElementListeners(this.eGui,{keydown:e=>{switch(e.key){case Do.TAB:e.defaultPrevented||fi(e);break;case Do.UP:case Do.DOWN:fi(e);break;case Do.ESCAPE:if(yi(e))return;this.eGui.contains(Lt(this.beans))&&(e.preventDefault(),fi(e),this.focusWrapper.focus())}}});const e="ag-advanced-filter-builder-virtual-list-item-highlight";this.addManagedListeners(this.focusWrapper,{keydown:e=>{if(e.key===Do.ENTER){if(yi(e))return;Lt(this.beans)===this.focusWrapper&&(e.preventDefault(),fi(e),this.eFocusableComp.getFocusableElement().focus())}},focusin:()=>{this.focusWrapper.classList.add(e)},focusout:t=>{this.focusWrapper.contains(t.relatedTarget)||this.focusWrapper.classList.remove(e)}})}};function gSe(e,t){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:e("advancedFilterBuilderAddCondition")},{key:"join",displayValue:e("advancedFilterBuilderAddJoin")}],valueFormatter:e=>{var t;return null==e?null:null!==(t=e.displayValue)&&void 0!==t?t:e.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:"".concat(null!==t&&void 0!==t?t:120,"px"),wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:e("advancedFilterBuilderAddButtonTooltip")}}var mSe=class extends En{constructor(e,t){super('\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div data-ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">\n                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>\n                    </div>\n                </div>\n            </div>\n        '),this.item=e,this.focusWrapper=t,this.eItem=Tn}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc,this.registry=e.registry}postConstruct(){var e;L(this.focusWrapper,2);const t=gSe((e=>this.advFilterExpSvc.translate(e)),null===(e=this.gos.get("advancedFilterBuilderParams"))||void 0===e?void 0:e.addSelectWidth),i=this.createManagedBean(new uSe(t));this.addManagedListeners(i,{fieldPickerValueSelected:e=>{let{value:t}=e;this.dispatchLocalEvent({type:"advancedFilterBuilderAdded",item:this.item,isJoin:"join"===t.key})}}),this.eItem.appendChild(i.getGui()),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>i.getGui(),getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip")})),this.createManagedBean(new pSe(this.getGui(),this.focusWrapper,i)),A(this.focusWrapper,this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItem",[this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip"),"".concat(this.item.level+1)]))}afterAdd(){}},vSe=class extends En{constructor(){super('\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        '),this.validationMessage=null}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}init(e){const{item:t,createPill:i}=e;this.item=t,this.createPill=i,this.filterModel=t.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc((()=>this.destroyBeans([this.eColumnPill,this.eOperatorPill,this.eOperandPill])))}getDragName(){return this.filterModel.colId?this.advFilterExpSvc.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()}getAriaLabel(){return"".concat(this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderFilterItem")," ").concat(this.getDragName())}getValidationMessage(){return this.validationMessage}getFocusableElement(){return this.eColumnPill.getFocusableElement()}setupColumnCondition(e){var t;const i=this.advFilterExpSvc.getColumnDetails(e.colId);this.baseCellDataType=i.baseCellDataType,this.column=i.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:null!==(t=this.getColumnDisplayValue())&&void 0!==t?t:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:()=>({values:this.advFilterExpSvc.getColumnAutocompleteEntries()}),update:e=>this.setColumnKey(e),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),ze(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())}createOperatorPill(){var e;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:null!==(e=this.getOperatorDisplayValue())&&void 0!==e?e:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:()=>({values:this.getOperatorAutocompleteEntries()}),update:e=>this.setOperatorKey(e),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())}createOperandPill(){var e;const{filter:t}=this.filterModel,i=null!==(e="number"===typeof t?Ve(t):t)&&void 0!==e?e:"";this.eOperandPill=this.createPill({key:i,valueFormatter:e=>this.advFilterExpSvc.getOperandDisplayValue(l(l({},this.filterModel),{},{filter:e}),!0),baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:e=>this.setOperand(e),ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())}getColumnKey(){return this.filterModel.colId}getColumnDisplayValue(){return this.advFilterExpSvc.getColumnDisplayValue(this.filterModel)}getOperatorKey(){return this.filterModel.type}getOperatorDisplayValue(){return this.advFilterExpSvc.getOperatorDisplayValue(this.filterModel)}getOperandDisplayValue(){return this.advFilterExpSvc.getOperandDisplayValue(this.filterModel,!0)}hasOperand(){return this.numOperands>0}getOperatorAutocompleteEntries(){return this.column?this.advFilterExpSvc.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]}setColumnKey(e){this.eOperatorPill||this.createOperatorPill();const t=this.advFilterExpSvc.getColumnDetails(e);this.column=t.column;const i=t.baseCellDataType;this.baseCellDataType!==i&&(this.baseCellDataType=i,this.setOperatorKey(void 0),this.eOperatorPill&&(we(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=e,this.filterModel.filterType=this.baseCellDataType}setOperatorKey(e){const t=this.getNumOperands(e);t!==this.numOperands&&(this.numOperands=t,0===t?this.destroyOperandPill():(this.createOperandPill(),"number"!==this.baseCellDataType&&this.setOperand(""))),this.filterModel.type=e,this.validate()}setOperand(e){let t=e;"number"===this.baseCellDataType&&(t=ze(e)?Number(e):""),this.filterModel.filter=t,this.validate()}getNumOperands(e){var t,i;return null!==(t=null===(i=this.advFilterExpSvc.getExpressionOperator(this.baseCellDataType,e))||void 0===i?void 0:i.numOperands)&&void 0!==t?t:0}destroyOperandPill(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0}validate(){let e=null;ze(this.getColumnKey())?ze(this.getOperatorKey())?this.numOperands>0&&!ze(this.getOperandDisplayValue())&&(e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationEnterValue")):e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationSelectOption"):e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!e,e!==this.validationMessage&&(this.validationMessage=e,this.dispatchLocalEvent({type:"advancedFilterBuilderValidChanged"}))}getDefaultColumnDisplayValue(){return this.advFilterExpSvc.translate("advancedFilterBuilderSelectColumn")}getDefaultOptionSelectValue(){return this.advFilterExpSvc.translate("advancedFilterBuilderSelectOption")}},fSe=class extends En{constructor(e){super('\n            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                <div data-ref="ePill" class="ag-advanced-filter-builder-pill" role="button">\n                    <span data-ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>\n                </div>\n            </div>\n        '),this.params=e,this.ePill=Tn,this.eLabel=Tn;const{value:t,valueFormatter:i}=e;this.value=t,this.displayValue=i(t)}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}postConstruct(){const{cssClass:e,ariaLabel:t}=this.params;this.ePill.classList.add(e),this.activateTabIndex([this.ePill]),this.eLabel.id="".concat(this.getCompId()),E(this.ePill,this.eLabel.id),A(this.ePill,t),this.renderValue(),this.addManagedListeners(this.ePill,{click:e=>{e.preventDefault(),this.showEditor()},keydown:e=>{if(e.key===Do.ENTER)e.preventDefault(),fi(e),this.showEditor()}}),this.addDestroyFunc((()=>this.destroyBean(this.eEditor)))}getFocusableElement(){return this.ePill}showEditor(){if(this.eEditor)return;le(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);const e=this.eEditor.getGui();this.eEditor.addManagedElementListeners(e,{keydown:e=>{switch(e.key){case Do.ENTER:e.preventDefault(),fi(e),this.updateValue(!0);break;case Do.ESCAPE:e.preventDefault(),fi(e),this.hideEditor(!0)}},focusout:()=>this.updateValue(!1)}),this.getGui().appendChild(e),this.eEditor.getFocusableElement().focus()}createEditorComp(e){let t;switch(e){case"text":t=new oa;break;case"number":t=new aa;break;case"date":t=new ma}return this.createBean(t)}hideEditor(e){const{eEditor:t}=this;t&&(this.eEditor=void 0,this.getGui().removeChild(t.getGui()),this.destroyBean(t),le(this.ePill,!0),e&&this.ePill.focus())}renderValue(){let e;const{displayValue:t,eLabel:i}=this,{classList:n}=i;n.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),ze(t)?"number"===this.params.type?(e=t,n.add("ag-advanced-filter-builder-value-number")):(e='"'.concat(t,'"'),n.add("ag-advanced-filter-builder-value-text")):(e=this.advFilterExpSvc.translate("advancedFilterBuilderEnterValue"),n.add("ag-advanced-filter-builder-value-empty")),i.innerText=e}updateValue(e){var t;if(!this.eEditor)return;const i=null!==(t=this.eEditor.getValue())&&void 0!==t?t:"";this.dispatchLocalEvent({type:"fieldValueChanged",value:i}),this.value=i,this.displayValue=this.params.valueFormatter(i),this.renderValue(),this.hideEditor(e)}},ySe=class extends En{wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}constructor(){super('\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')}init(e){const{item:t,createPill:i}=e,n=t.filterModel;this.filterModel=n,this.ePill=i({key:n.type,displayValue:this.advFilterExpSvc.parseJoinOperator(n),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:()=>({values:this.advFilterExpSvc.getJoinOperatorAutocompleteEntries()}),update:e=>n.type=e,pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc((()=>this.destroyBean(this.ePill)))}getDragName(){return this.advFilterExpSvc.parseJoinOperator(this.filterModel)}getAriaLabel(){return"".concat(this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderGroupItem")," ").concat(this.getDragName())}getValidationMessage(){return null}getFocusableElement(){return this.ePill.getFocusableElement()}},bSe=class extends hSe{constructor(e){super(l(l({},e),{},{template:'\n                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                    <div data-ref="eLabel"></div>\n                    <div data-ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">\n                        <div data-ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>\n                        <ag-input-text-field data-ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <span data-ref="eDeselect" class="ag-rich-select-deselect-button ag-picker-field-icon" role="presentation"></span>\n                        <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>',agComponents:[sa]})),this.params=e}getFocusableElement(){return this.eWrapper}showPicker(){setTimeout((()=>super.showPicker()))}hidePicker(){setTimeout((()=>super.hidePicker()))}postConstruct(){super.postConstruct();const{wrapperClassName:e,ariaLabel:t}=this.params;this.eWrapper.classList.add(e),T(this.eWrapper,""),A(this.eWrapper,t)}createPickerComponent(){if(!this.values){var e;const{values:t}=this.params.getEditorParams();this.values=t;const i=this.value.key,n=null!==(e=t.find((e=>e.key===i)))&&void 0!==e?e:{key:i,displayValue:this.value.displayValue};this.value=n}return super.createPickerComponent()}onEnterKeyDown(e){fi(e),this.isPickerDisplayed?super.onEnterKeyDown(e):(e.preventDefault(),this.showPicker())}},CSe=class extends Ra{constructor(e,t,i){super('\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div class="ag-advanced-filter-builder-item" role="presentation">\n                    <div data-ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>\n                    <span data-ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>\n                    <span data-ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>\n                </div>\n                <div data-ref="eButtons" class="ag-advanced-filter-builder-item-buttons">\n                    <span data-ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <span data-ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <div data-ref="eAddButton" role="presentation"></div>\n                    <span data-ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                </div>\n            </div>\n        '),this.item=e,this.dragFeature=t,this.focusWrapper=i,this.eTreeLines=Tn,this.eDragHandle=Tn,this.eButtons=Tn,this.eValidation=Tn,this.eMoveUpButton=Tn,this.eMoveDownButton=Tn,this.eAddButton=Tn,this.eRemoveButton=Tn,this.moveUpDisabled=!1,this.moveDownDisabled=!1}wireBeans(e){this.dragAndDrop=e.dragAndDrop,this.advFilterExpSvc=e.advFilterExpSvc,this.registry=e.registry}postConstruct(){const{filterModel:e,level:t,showMove:i}=this.item,n="join"===e.filterType;if(this.ePillWrapper=this.createManagedBean(n?new ySe:new vSe),this.ePillWrapper.init({item:this.item,createPill:e=>this.createPill(e)}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),0===t){const e=document.createElement("div");e.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),e.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(e),le(this.eDragHandle,!1),le(this.eButtons,!1),O(this.focusWrapper,!0)}else this.setupTreeLines(t),this.eDragHandle.appendChild(Wr("advancedFilterBuilderDrag",this.beans)),this.setupValidation(),this.setupMoveButtons(i),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();L(this.focusWrapper,t+1),this.initialiseTabGuard({}),this.createManagedBean(new pSe(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListeners(this.ePillWrapper,{advancedFilterBuilderValueChanged:()=>this.dispatchLocalEvent({type:"advancedFilterBuilderValueChanged"}),advancedFilterBuilderValidChanged:()=>this.updateValidity()})}setState(e){const{level:t}=this.item;if(0===t)return;const{showMove:i}=this.item,{disableMoveUp:n,disableMoveDown:o,treeLines:s,showStartTreeLine:r}=e;var a,l;(this.updateTreeLines(s,r),this.updateAriaExpanded(),i)&&(this.moveUpDisabled=!!n,this.moveDownDisabled=!!o,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",n),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",o),P(this.eMoveUpButton,!!n),P(this.eMoveDownButton,!!o),null===(a=this.moveUpTooltipFeature)||void 0===a||a.refreshTooltip(),null===(l=this.moveDownTooltipFeature)||void 0===l||l.refreshTooltip())}focusMoveButton(e){(e?this.eMoveUpButton:this.eMoveDownButton).focus()}afterAdd(){this.ePillWrapper.getFocusableElement().focus()}setupTreeLines(e){for(let t=0;t<e;t++){const e=document.createElement("div");this.eTreeLines.appendChild(e)}}updateTreeLines(e,t){const i=e.length-1,{children:n}=this.eTreeLines;for(let s=0;s<i;s++){const t=n.item(s);t&&t.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!e[s])}const o=n.item(i);if(o){o.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");const t=e[i];o.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",t),o.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!t)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",t)}setupValidation(){this.eValidation.appendChild(Wr("advancedFilterBuilderInvalid",this.beans)),this.validationTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eValidation,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.ePillWrapper.getValidationMessage(),getTooltipShowDelayOverride:()=>1e3})),this.updateValidity()}setupAddButton(){var e;const t=gSe((e=>this.advFilterExpSvc.translate(e)),null===(e=this.gos.get("advancedFilterBuilderParams"))||void 0===e?void 0:e.addSelectWidth),i=this.createManagedBean(new uSe(t));this.addManagedListeners(i,{fieldPickerValueSelected:e=>{let{value:t}=e;return this.dispatchLocalEvent({type:"advancedFilterBuilderAdded",item:this.item,isJoin:"join"===t.key})}}),this.eAddButton.appendChild(i.getGui()),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eAddButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip")}))}setupRemoveButton(){this.eRemoveButton.appendChild(Wr("advancedFilterBuilderRemove",this.beans)),this.addManagedListeners(this.eRemoveButton,{click:()=>this.removeItem(),keydown:e=>{if(e.key===Do.ENTER)e.preventDefault(),fi(e),this.removeItem()}}),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eRemoveButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderRemoveButtonTooltip")})),A(this.eRemoveButton,this.advFilterExpSvc.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])}setupMoveButtons(e){e?(this.eMoveUpButton.appendChild(Wr("advancedFilterBuilderMoveUp",this.beans)),this.addManagedListeners(this.eMoveUpButton,{click:()=>this.moveItem(!0),keydown:e=>{if(e.key===Do.ENTER)e.preventDefault(),fi(e),this.moveItem(!0)}}),this.moveUpTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eMoveUpButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveUpDisabled?null:this.advFilterExpSvc.translate("advancedFilterBuilderMoveUpButtonTooltip")})),A(this.eMoveUpButton,this.advFilterExpSvc.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(Wr("advancedFilterBuilderMoveDown",this.beans)),this.addManagedListeners(this.eMoveDownButton,{click:()=>this.moveItem(!1),keydown:e=>{if(e.key===Do.ENTER)e.preventDefault(),fi(e),this.moveItem(!1)}}),this.moveDownTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eMoveDownButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveDownDisabled?null:this.advFilterExpSvc.translate("advancedFilterBuilderMoveDownButtonTooltip")})),A(this.eMoveDownButton,this.advFilterExpSvc.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(le(this.eMoveUpButton,!1),le(this.eMoveDownButton,!1))}updateValidity(){var e;de(this.eValidation,!this.item.valid),null===(e=this.validationTooltipFeature)||void 0===e||e.refreshTooltip(),this.updateAriaLabel()}createPill(e){const{key:t,cssClass:i,update:n,ariaLabel:o}=e,s=e=>{null!=e&&(n(e),this.dispatchLocalEvent({type:"advancedFilterBuilderValueChanged"}))};if(e.isSelect){var r,a;const{getEditorParams:n,pickerAriaLabelKey:l,pickerAriaLabelValue:d,displayValue:c}=e,h=this.gos.get("advancedFilterBuilderParams"),u="".concat(null!==(r=null===h||void 0===h?void 0:h.pillSelectMinWidth)&&void 0!==r?r:140,"px"),p="".concat(null!==(a=null===h||void 0===h?void 0:h.pillSelectMaxWidth)&&void 0!==a?a:200,"px"),g=this.createBean(new bSe({pickerAriaLabelKey:l,pickerAriaLabelValue:d,pickerType:"ag-list",value:{key:t,displayValue:c},valueFormatter:e=>{var t;return null==e?null:null!==(t=e.displayValue)&&void 0!==t?t:e.key},variableWidth:!0,minPickerWidth:u,maxPickerWidth:p,getEditorParams:n,wrapperClassName:i,ariaLabel:o,pickerIcon:"advancedFilterBuilderSelectOpen"}));return this.addManagedListeners(g,{fieldPickerValueSelected:e=>{let{value:t}=e;return s(null===t||void 0===t?void 0:t.key)}}),g}{const{baseCellDataType:n,valueFormatter:r}=e,a=this.createBean(new fSe({value:t,valueFormatter:r,cssClass:i,type:this.getInputType(n),ariaLabel:o}));return this.addManagedListeners(a,{fieldValueChanged:e=>{let{value:t}=e;return s(t)}}),a}}getInputType(e){switch(e){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}}setupDragging(){const e={type:is.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:()=>this.ePillWrapper.getDragName(),getDefaultIconName:()=>"notAllowed",getDragItem:()=>({}),onDragStarted:()=>this.dragFeature.dispatchLocalEvent({type:"advancedFilterBuilderDragStarted",item:this.item}),onDragStopped:()=>this.dragFeature.dispatchLocalEvent({type:"advancedFilterBuilderDragEnded"})};this.dragAndDrop.addDragSource(e,!0),this.addDestroyFunc((()=>this.dragAndDrop.removeDragSource(e)))}updateAriaLabel(){const e=this.ePillWrapper.getAriaLabel(),t="".concat(this.item.level+1),i=this.ePillWrapper.getValidationMessage();let n;n=i?this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItemValidation",[e,t,i]):this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItem",[e,t]),A(this.focusWrapper,n)}updateAriaExpanded(){B(this.focusWrapper);const{filterModel:e}=this.item;"join"===(null===e||void 0===e?void 0:e.filterType)&&e.conditions.length&&O(this.focusWrapper,!0)}removeItem(){this.dispatchLocalEvent({type:"advancedFilterBuilderRemoved",item:this.item})}moveItem(e){this.dispatchLocalEvent({type:"advancedFilterBuilderMoved",item:this.item,backwards:e})}},xSe=class extends En{constructor(){super('\n            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">\n                <div role="presentation" class="ag-advanced-filter-builder-list" data-ref="eList"></div>\n                <div role="presentation" class="ag-advanced-filter-builder-button-panel">\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" data-ref="eApplyFilterButton"></button>\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" data-ref="eCancelFilterButton"></button>\n                </div>\n            </div>'),this.eList=Tn,this.eApplyFilterButton=Tn,this.eCancelFilterButton=Tn,this.validationMessage=null}wireBeans(e){this.filterManager=e.filterManager,this.advancedFilter=e.advancedFilter,this.advFilterExpSvc=e.advFilterExpSvc,this.registry=e.registry}postConstruct(){var e;const{showMoveButtons:t}=null!==(e=this.gos.get("advancedFilterBuilderParams"))&&void 0!==e?e:{};this.showMove=!!t,this.addManagedPropertyListener("advancedFilterBuilderParams",(e=>{let{currentValue:t}=e;this.showMove=!(null===t||void 0===t||!t.showMoveButtons),this.refreshList(!1)})),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new oSe(this,this.virtualList)),this.setupButtons()}refresh(){const e=this.virtualList;let t=e.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),null!=t&&(e.getComponentAt(t)||(t=0),e.focusRow(t))}getNumItems(){return this.items.length}moveItem(e,t){t&&e&&this.moveItemToIndex(e,t.rowIndex,t.position)}afterGuiAttached(){this.virtualList.awaitStable((()=>this.virtualList.focusRow(0)))}setupVirtualList(){const e=this.virtualList=this.createManagedBean(new qwe({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderList")}));e.setComponentCreator(this.createItemComponent.bind(this)),e.setComponentUpdater(this.updateItemComponent.bind(this)),e.setRowHeight(40),this.eList.appendChild(e.getGui()),e.setModel({getRowCount:()=>this.items.length,getRow:e=>this.items[e],areRowsEqual:(e,t)=>e===t}),this.buildList(),e.refresh()}setupButtons(){this.eApplyFilterButton.innerText=this.advFilterExpSvc.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedElementListeners(this.eApplyFilterButton,{click:()=>{var e;this.advancedFilter.setModel(this.filterModel),null===(e=this.filterManager)||void 0===e||e.onFilterChanged({source:"advancedFilter"}),this.close()}}),this.validationTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApplyFilterButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.validationMessage,getTooltipShowDelayOverride:()=>1e3})),this.validate();const e=e=>this.addOrRemoveCssClass("ag-advanced-filter-builder-validation",e);this.addManagedListeners(this.eApplyFilterButton,{mouseenter:()=>e(!0),mouseleave:()=>e(!1)}),this.eCancelFilterButton.innerText=this.advFilterExpSvc.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedElementListeners(this.eCancelFilterButton,{click:()=>this.close()})}removeItemFromParent(e){const t=e.parent.conditions.indexOf(e.filterModel);return e.parent.conditions.splice(t,1),t}moveItemToIndex(e,t,i){var n;const o=this.items[t],s="join"===(null===(n=o.filterModel)||void 0===n?void 0:n.filterType)&&"bottom"===i,r=s?o.filterModel:o.parent;if(!r)return;if(this.isChildOrSelf(r,e.filterModel)||o===e)return;let a;this.removeItemFromParent(e),s?a=0:(a=r.conditions.indexOf(o.filterModel),-1===a?a=r.conditions.length:"bottom"===i&&(a+=1)),r.conditions.splice(a,0,e.filterModel),this.refreshList(!1)}isChildOrSelf(e,t){return e===t||"join"===t.filterType&&t.conditions.some((t=>this.isChildOrSelf(e,t)))}setupFilterModel(){const e=this.formatFilterModel(this.advancedFilter.getModel());return this.stringifiedModel=JSON.stringify(e),e}formatFilterModel(e){var t;return"join"!==(e=null!==(t=e)&&void 0!==t?t:{filterType:"join",type:"AND",conditions:[]}).filterType&&(e={filterType:"join",type:"AND",conditions:[e]}),e}buildList(){const e=(t,i,n,o)=>{i.push({filterModel:t,level:n,parent:o,valid:!0,showMove:this.showMove}),"join"===t.filterType&&(t.conditions.forEach((o=>e(o,i,n+1,t))),0===n&&i.push({filterModel:null,level:n+1,parent:t,valid:!0}))};this.items=[],e(this.filterModel,this.items,0)}refreshList(e){if(!e){const e=[];this.items.forEach((t=>{t.valid||e.push(t.filterModel)})),this.buildList(),e.length&&this.items.forEach((t=>{t.filterModel&&e.includes(t.filterModel)&&(t.valid=!1)}))}this.virtualList.refresh(e),this.validate()}updateItemComponent(e,t){const i=this.items.indexOf(e),n=(e,t)=>{const i=this.items.find((t=>t.filterModel===e)),o=null===i||void 0===i?void 0:i.parent;if(o){const{conditions:i}=o;n(o,t),t.push(i[i.length-1]===e)}},o=[],{filterModel:s}=e;s&&(n(s,o),o[0]=!1);const r="join"===(null===s||void 0===s?void 0:s.filterType)&&!!s.conditions.length;t.setState({disableMoveUp:1===i,disableMoveDown:!this.canMoveDown(e,i),treeLines:o,showStartTreeLine:r})}createItemComponent(e,t){const i=this.createBean(e.filterModel?new CSe(e,this.dragFeature,t):new mSe(e,t));return i.addManagedListeners(i,{advancedFilterBuilderRemoved:e=>{let{item:t}=e;return this.removeItem(t)},advancedFilterBuilderValueChanged:()=>this.validate(),advancedFilterBuilderAdded:e=>{let{item:t,isJoin:i}=e;return this.addItem(t,i)},advancedFilterBuilderMoved:e=>{let{item:t,backwards:i}=e;return this.moveItemUpDown(t,i)}}),i instanceof CSe&&this.updateItemComponent(e,i),i}addItem(e,t){const{parent:i,level:n,filterModel:o}=e,s="join"===(null===o||void 0===o?void 0:o.filterType),r=t?{filterType:"join",type:"AND",conditions:[]}:{},a=s?o:i;let l=s?0:a.conditions.indexOf(o);l>=0?(s||(l+=1),a.conditions.splice(l,0,r)):a.conditions.push(r);let d=this.items.indexOf(e);const c=d>=0;if(c){e.filterModel&&d++;const i=[{filterModel:r,level:s?n+1:n,parent:a,valid:t,showMove:this.showMove}];this.items.splice(d,0,...i)}var h;(this.refreshList(c),c)&&(null===(h=this.virtualList.getComponentAt(d))||void 0===h||h.afterAdd())}removeItem(e){var t;const i=e.parent,{filterModel:n}=e,o=i.conditions.indexOf(n);i.conditions.splice(o,1);const s="join"===(null===(t=e.filterModel)||void 0===t?void 0:t.filterType),r=this.items.indexOf(e),a=!s&&r>=0;a&&this.items.splice(r,1),this.refreshList(a),r>=0&&this.virtualList.focusRow(r)}moveItemUpDown(e,t){const i=this.items.indexOf(e),n=t?i-1:i+1;if(0===n||!t&&!this.canMoveDown(e,i))return;const o=this.items[n],s=this.removeItemFromParent(e),{level:r,filterModel:a,parent:l}=e,{level:d,filterModel:c,parent:h}=o;if(t)if(d===r&&"join"===c.filterType)c.conditions.push(a);else if(d<=r){const e=h.conditions.indexOf(c);h.conditions.splice(e,0,a)}else{l.conditions[s-1].conditions.push(a)}else if(d===r)if("join"===c.filterType)c.conditions.splice(0,0,a);else{const e=h.conditions.indexOf(c);h.conditions.splice(e+1,0,a)}else if(s<l.conditions.length)l.conditions.splice(s+1,0,a);else{const e=this.items.find((e=>e.filterModel===l)),t=e.parent.conditions.indexOf(e.filterModel)+1;e.parent.conditions.splice(t,0,a)}this.refreshList(!1);const u=this.items.findIndex((e=>{let{filterModel:t}=e;return t===a}));if(u>=0){const e=this.virtualList.getComponentAt(u);e instanceof CSe&&e.focusMoveButton(t)}}canMoveDown(e,t){return!(1===e.level&&t===this.items.length-2||1===e.level&&e.parent.conditions[e.parent.conditions.length-1]===e.filterModel)}close(){this.advancedFilter.getCtrl().toggleFilterBuilder({source:"ui"})}validate(){var e;let t=!this.items.every((e=>{let{valid:t}=e;return t}));t?this.validationMessage=this.advFilterExpSvc.translate("advancedFilterBuilderValidationIncomplete"):(t=JSON.stringify(this.filterModel)===this.stringifiedModel,this.validationMessage=t?this.advFilterExpSvc.translate("advancedFilterBuilderValidationAlreadyApplied"):null),ce(this.eApplyFilterButton,t),null===(e=this.validationTooltipFeature)||void 0===e||e.refreshTooltip()}validateItems(){const e=e=>{e.type=void 0},t=e=>{delete e.filter};this.items.forEach((i=>{if(!i.valid||!i.filterModel||"join"===i.filterModel.filterType)return;const{filterModel:n}=i,{colId:o}=n,s=this.advFilterExpSvc.getColumnAutocompleteEntries().find((e=>{let{key:t}=e;return t===o})),r=this.advFilterExpSvc.getColumnDetails(n.colId);if(!s||!r.column)return i.valid=!1,n.colId=void 0,e(n),void t(n);const a=this.advFilterExpSvc.getDataTypeExpressionOperator(r.baseCellDataType).operators[n.type];if(!a)return i.valid=!1,e(n),void t(n);a.numOperands>0&&!ze(n.filter)&&(i.valid=!1)}))}},wSe=class extends Si{constructor(e){super(),this.enabled=e}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.popupSvc=e.popupSvc,this.advFilterExpSvc=e.advFilterExpSvc,this.environment=e.environment}postConstruct(){this.hasAdvancedFilterParent=!!this.gos.get("advancedFilterParent"),this.ctrlsSvc.whenReady(this,(()=>this.setAdvancedFilterComp())),this.addManagedEventListeners({advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onEnabledChanged(t)}}),this.addManagedPropertyListener("advancedFilterParent",(()=>this.updateComps())),this.addDestroyFunc((()=>{this.destroyAdvancedFilterComp(),this.destroyBean(this.eBuilderComp),this.eBuilderDialog&&this.eBuilderDialog.isAlive()&&this.destroyBean(this.eBuilderDialog)}))}setupHeaderComp(e){var t;this.eHeaderComp&&(null===(t=this.eHeaderComp)||void 0===t||t.getGui().remove(),this.destroyBean(this.eHeaderComp));this.eHeaderComp=this.createManagedBean(new tSe(this.enabled&&!this.hasAdvancedFilterParent)),e.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())}focusHeaderComp(){return!!this.eHeaderComp&&(this.eHeaderComp.getFocusableElement().focus(),!0)}refreshComp(){var e,t;null===(e=this.eFilterComp)||void 0===e||e.refresh(),null===(t=this.eHeaderComp)||void 0===t||t.refresh()}refreshBuilderComp(){var e;null===(e=this.eBuilderComp)||void 0===e||e.refresh()}getHeaderHeight(){var e,t;return null!==(e=null===(t=this.eHeaderComp)||void 0===t?void 0:t.getHeight())&&void 0!==e?e:0}setInputDisabled(e){var t,i;null===(t=this.eFilterComp)||void 0===t||t.setInputDisabled(e),null===(i=this.eHeaderComp)||void 0===i||i.setInputDisabled(e)}toggleFilterBuilder(e){const{source:t,force:i,eventSource:n}=e;if(i&&this.eBuilderDialog||!1===i&&!this.eBuilderDialog)return;if(this.eBuilderDialog)return this.builderDestroySource=t,void this.destroyBean(this.eBuilderDialog);this.setInputDisabled(!0);const{width:o,height:s,minWidth:r}=this.getBuilderDialogSize();this.eBuilderComp=this.createBean(new xSe),this.eBuilderDialog=this.createBean(new Xwe({title:this.advFilterExpSvc.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:o,height:s,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:r,afterGuiAttached:()=>{var e;return null===(e=this.eBuilderComp)||void 0===e?void 0:e.afterGuiAttached()},postProcessPopupParams:{type:"advancedFilterBuilder",eventSource:n}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener("destroyed",(()=>{var e;this.destroyBean(this.eBuilderComp),this.eBuilderComp=void 0,this.eBuilderDialog=void 0,this.setInputDisabled(!1),this.dispatchLocalEvent({type:"advancedFilterBuilderClosed"}),this.dispatchFilterBuilderVisibleChangedEvent(null!==(e=this.builderDestroySource)&&void 0!==e?e:"ui",!1),this.builderDestroySource=void 0}))}dispatchFilterBuilderVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"advancedFilterBuilderVisibleChanged",source:e,visible:t})}getBuilderDialogSize(){var e,t;const i=null!==(e=null===(t=this.gos.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.minWidth)&&void 0!==e?e:500,n=this.popupSvc.getPopupParent(),o=Math.round(ve(n))-2,s=Math.round(.75*me(n))-2;return{width:Math.min(Math.max(600,i),o),height:Math.min(600,s),minWidth:i}}onEnabledChanged(e){this.enabled=e,this.updateComps()}updateComps(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}setAdvancedFilterComp(){if(this.destroyAdvancedFilterComp(),!this.enabled)return;const e=this.gos.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){const t=this.createBean(new eSe),i=t.getGui();this.environment.applyThemeClasses(i),i.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),e.appendChild(i),this.eFilterComp=t}}setHeaderCompEnabled(){var e;null===(e=this.eHeaderComp)||void 0===e||e.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)}destroyAdvancedFilterComp(){this.eFilterComp&&(we(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))}},SSe=class{constructor(e){this.params=e,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}parseExpression(e){this.operators.push(""),this.operatorStartPositions.push(e),this.operatorEndPositions.push(void 0);const{expression:t}=this.params;for(;e<t.length;){const i=t[e];if(" "===i){if(this.parseOperator(e-1))return this.activeOperator++,e-1;this.operators[this.activeOperator]+=i}else this.operators[this.activeOperator]+=i;e++}return this.parseOperator(e-1),e}isValid(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)}getValidationError(){return this.validationError}getFunction(){return"OR"===this.parsedOperator?"||":"&&"}getModel(){return"OR"===this.parsedOperator?"OR":"AND"}getAutocompleteListParams(e,t){let i;if(null==t)i="";else{const n=this.operators[t],o=this.operatorEndPositions[t];i=Pwe(n,e,null==o?this.params.expression.length:o+1)}let n=this.params.advFilterExpSvc.getJoinOperatorAutocompleteEntries();return(t||null==t&&this.activeOperator)&&(n=n.filter((e=>{let{key:t}=e;return t===this.parsedOperator}))),this.params.advFilterExpSvc.generateAutocompleteListParams(n,"join",i)}updateExpression(e,t,i){var n,o;let{expression:s}=this.params;const r=null!==(n=t.displayValue)&&void 0!==n?n:t.key;if(0===i)for(let a=this.operatorEndPositions.length-1;a>0;a--){const e=this.operatorEndPositions[a];null!=e&&(s=Nwe(s,this.operatorStartPositions[a],e,r).updatedValue)}return Nwe(s,this.operatorStartPositions.length>i?this.operatorStartPositions[i]:e,null!==(o=this.operatorEndPositions.length>i?this.operatorEndPositions[i]:void 0)&&void 0!==o?o:Fwe(s,e,!0).endPosition,r,!0)}getNumOperators(){return this.operators.length}getLastOperatorEndPosition(){return this.operatorEndPositions[this.operatorEndPositions.length-1]}parseOperator(e){const t=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",i=this.params.advFilterExpSvc.getExpressionJoinOperators(),n=Wwe(t,i,(e=>e));if(n){this.operatorEndPositions[this.activeOperator]=e;const o=i[n];if(this.activeOperator){if(n!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advFilterExpSvc.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:e-t.length+1,endPosition:e}),!1}else this.parsedOperator=n;return t!==o&&(Owe(this.params,t,o,e),this.operators[this.activeOperator]=o),!0}return null!==n&&(this.validationError||(this.validationError={message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:e-t.length+1,endPosition:e}),!0)}},MSe=class e{constructor(e,t){this.params=e,this.startPosition=t,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new SSe(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}parseExpression(){let t=this.startPosition;const{expression:i}=this.params;for(;t<i.length;){const n=i[t];if("("!==n||this.expectingOperator){if(")"===n)return this.endPosition=t-1,0===this.startPosition&&(this.extraEndBracket=!0),t;if(" "===n);else if(this.expectingExpression){const e=new Hwe(this.params,t);t=e.parseExpression(),this.expressionParsers.push(e),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(t=this.operatorParser.parseExpression(t),this.expectingOperator=!1,this.expectingExpression=!0)}else{const i=new e(this.params,t+1);t=i.parseExpression(),this.expressionParsers.push(i),this.expectingExpression=!1,this.expectingOperator=!0}t++}return this.startPosition>0&&(this.missingEndBracket=!0),t}isValid(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every((e=>e.isValid()))}getValidationError(){const e=this.operatorParser.getValidationError();for(let i=0;i<this.expressionParsers.length;i++){const t=this.expressionParsers[i].getValidationError();if(t)return e&&e.startPosition<t.startPosition?e:t}if(e)return e;if(this.extraEndBracket)return{message:this.params.advFilterExpSvc.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1};let t;return this.expressionParsers.length===this.operatorParser.getNumOperators()?t="advancedFilterValidationMissingCondition":this.missingEndBracket&&(t="advancedFilterValidationMissingEndBracket"),t?{message:this.params.advFilterExpSvc.translate(t),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null}getFunctionString(e){const t=this.expressionParsers.length>1,i=this.expressionParsers.map((t=>t.getFunctionString(e))).join(" ".concat(this.operatorParser.getFunction()," "));return t?"(".concat(i,")"):i}getFunctionParsed(e){const t=this.operatorParser.getFunction(),i=this.expressionParsers.map((t=>t.getFunctionParsed(e))),n="&&"===t?"every":"some";return(e,t,o)=>i[n]((i=>i(e,t,o)))}getAutocompleteListParams(e){if(null!=this.endPosition&&e>this.endPosition+1)return;if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();const t=this.getExpressionParserIndex(e);if(null==t)return"("===this.params.expression[e]?{enabled:!1}:this.getColumnAutocompleteListParams();const i=this.expressionParsers[t].getAutocompleteListParams(e);if(!i){if(t<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(e,t);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){const t=this.operatorParser.getLastOperatorEndPosition();return null==t||e<=t+1?this.operatorParser.getAutocompleteListParams(e,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return")"===this.params.expression[e-1]?{enabled:!1}:this.operatorParser.getAutocompleteListParams(e)}return i}updateExpression(e,t,i){const n=this.params.expression,o=this.getExpressionParserIndex(e);if(null==o){var s;const e="column"===i?this.params.advFilterExpSvc.getColumnValue(t):null!==(s=t.displayValue)&&void 0!==s?s:t.key;return Nwe(n,this.startPosition,this.startPosition,e,!0)}const r=this.expressionParsers[o].updateExpression(e,t,i);return null==r?"column"===i?Nwe(n,e,n.length-1,this.params.advFilterExpSvc.getColumnValue(t),!0):null!=this.endPosition&&e>this.endPosition+1?null:this.operatorParser.updateExpression(e,t,o):r}getModel(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map((e=>e.getModel()))}:this.expressionParsers[0].getModel()}getColumnAutocompleteListParams(){return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getColumnAutocompleteEntries(),"column","")}getExpressionParserIndex(e){let t;for(let i=0;i<this.expressionParsers.length;i++){if(this.expressionParsers[i].startPosition>e)break;t=i}return t}},DSe=class{constructor(e){this.params=e,this.valid=!1}parseExpression(){this.joinExpressionParser=new MSe(this.params,0);const e=this.joinExpressionParser.parseExpression();return this.valid=e>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression}isValid(){return this.valid}getValidationMessage(){const e=this.joinExpressionParser.getValidationError();if(!e)return null;const{message:t,startPosition:i,endPosition:n}=e;return i<this.params.expression.length?this.params.advFilterExpSvc.translate("advancedFilterValidationMessage",[t,this.params.expression.slice(i,n+1).trim()]):this.params.advFilterExpSvc.translate("advancedFilterValidationMessageAtEnd",[t])}getFunctionString(){const e=this.createFunctionParams();return{functionString:"return ".concat(this.joinExpressionParser.getFunctionString(e),";"),params:e}}getFunctionParsed(){const e=this.createFunctionParams();return{expressionFunction:this.joinExpressionParser.getFunctionParsed(e),params:e}}getAutocompleteListParams(e){var t;return null!==(t=this.joinExpressionParser.getAutocompleteListParams(e))&&void 0!==t?t:{enabled:!1}}updateExpression(e,t,i){return this.joinExpressionParser.updateExpression(e,t,i)}getModel(){return this.isValid()?this.joinExpressionParser.getModel():null}createFunctionParams(){return{operands:[],operators:[],evaluatorParams:[]}}},kSe={moduleName:"AdvancedFilter",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="advancedFilter",this.appliedExpression=null,this.expression=null,this.isValid=!0}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.dataTypeSvc=e.dataTypeSvc,this.advFilterExpSvc=e.advFilterExpSvc,this.filterValueSvc=e.filterValueSvc}postConstruct(){this.setEnabled(this.gos.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new wSe(this.enabled)),this.expressionProxy={getValue:(e,t)=>{const i=this.colModel.getColDefCol(e);return i?this.filterValueSvc.getValue(i,t):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",(e=>this.setEnabled(!!e.currentValue))),this.addManagedEventListeners({newColumnsLoaded:e=>this.onNewColumnsLoaded(e)}),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",(()=>this.updateValidity()))}isEnabled(){return this.enabled}isFilterPresent(){return!!this.expressionFunction}doesFilterPass(e){return this.expressionFunction(this.expressionProxy,e,this.expressionParams)}getModel(){var e;const t=this.createExpressionParser(this.appliedExpression);return null===t||void 0===t||t.parseExpression(),null!==(e=null===t||void 0===t?void 0:t.getModel())&&void 0!==e?e:null}setModel(e){const t=(e,i)=>{if("join"===e.filterType){const n=this.advFilterExpSvc.parseJoinOperator(e),o=e.conditions.map((e=>t(e))).filter((e=>ze(e))).join(" ".concat(n," "));return i||e.conditions.length<=1?o:"(".concat(o,")")}return this.advFilterExpSvc.parseColumnFilterModel(e)},i=e?t(e,!0):null;this.setExpressionDisplayValue(i),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()}getExpressionDisplayValue(){return this.expression}setExpressionDisplayValue(e){this.expression=e}isCurrentExpressionApplied(){return this.appliedExpression===this.expression}createExpressionParser(e){return e?new DSe({expression:e,colModel:this.colModel,dataTypeSvc:this.dataTypeSvc,valueSvc:this.valueSvc,advFilterExpSvc:this.advFilterExpSvc}):null}getDefaultExpression(e){const t=this.advFilterExpSvc.getColumnValue(e)+" ";return{updatedValue:t,updatedPosition:t.length}}isHeaderActive(){return!this.gos.get("advancedFilterParent")}getCtrl(){return this.ctrl}setEnabled(e,t){const i=this.enabled,n=bt(this.gos)||Ct(this.gos);e&&!n&&pt(123),this.enabled=e&&n,t||this.enabled===i||this.eventSvc.dispatchEvent({type:"advancedFilterEnabledChanged",enabled:this.enabled})}applyExpression(){const e=this.createExpressionParser(this.expression);null===e||void 0===e||e.parseExpression(),this.applyExpressionFromParser(e)}applyExpressionFromParser(e){if(this.isValid=!e||e.isValid(),!e||!this.isValid)return this.expressionFunction=null,this.expressionParams=null,void(this.appliedExpression=null);const{expressionFunction:t,params:i}=this.getFunction(e);this.expressionFunction=t,this.expressionParams=i,this.appliedExpression=this.expression}getFunction(e){if(this.gos.get("suppressAdvancedFilterEval"))return e.getFunctionParsed();{const{functionString:t,params:i}=e.getFunctionString();return{expressionFunction:new Function("expressionProxy","node","params",t),params:i}}}updateValidity(){this.advFilterExpSvc.resetColumnCaches();const e=this.createExpressionParser(this.expression);null===e||void 0===e||e.parseExpression();const t=(!e||e.isValid())!==this.isValid;return this.applyExpressionFromParser(e),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),t}onNewColumnsLoaded(e){var t;if("gridInitializing"!==e.source||null===(t=this.dataTypeSvc)||void 0===t||!t.isPendingInference)return;this.ctrl.setInputDisabled(!0);const[i]=this.addManagedEventListeners({dataTypesInferred:()=>{null===i||void 0===i||i(),this.ctrl.setInputDisabled(!1)}})}},class extends Si{constructor(){super(...arguments),this.beanName="advFilterExpSvc",this.columnNameToIdMap={},this.columnAutocompleteEntries=null,this.expressionEvaluatorParams={}}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.colNames=e.colNames,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()}parseJoinOperator(e){var t;const{type:i}=e;return null!==(t=this.expressionJoinOperators[i])&&void 0!==t?t:i}getColumnDisplayValue(e){const{colId:t}=e,i=this.getColumnAutocompleteEntries().find((e=>{let{key:i}=e;return i===t}));let n;return i?(n=i.displayValue,this.columnNameToIdMap[n.toLocaleUpperCase()]={colId:t,columnName:n}):n=t,n}getOperatorDisplayValue(e){var t,i;return null!==(t=null===(i=this.getExpressionOperator(e.filterType,e.type))||void 0===i?void 0:i.displayValue)&&void 0!==t?t:e.type}getOperandModelValue(e,t,i){switch(t){case"number":return ze(e)?Number(e):null;case"date":return ca(this.valueSvc.parseValue(i,null,e,void 0),!1);case"dateString":{var n;const t=this.valueSvc.parseValue(i,null,e,void 0);return this.dataTypeSvc?ca(null!==(n=this.dataTypeSvc.getDateParserFunction(i)(t))&&void 0!==n?n:null,!1):t}}return e}getOperandDisplayValue(e,t){var i;const{colId:n,filter:o}=e,s=this.colModel.getColDefCol(n);let r="";if(null!=o){let n;switch(e.filterType){case"number":n=null!==(i=Ve(o))&&void 0!==i?i:"";break;case"date":{const e=pa(o);n=s?this.valueSvc.formatValue(s,null,e):null;break}case"dateString":{let e;if(this.dataTypeSvc){var a;const t=pa(o);e=s?null===(a=this.dataTypeSvc)||void 0===a?void 0:a.getDateFormatterFunction(s)(null!==t&&void 0!==t?t:void 0):null}else e=o;n=s?this.valueSvc.formatValue(s,null,e):null;break}}var l,d;if("number"!==e.filterType)n=null!==(l=null!==(d=n)&&void 0!==d?d:Ve(o))&&void 0!==l?l:"",t||(n='"'.concat(n,'"'));r=t?n:" ".concat(n)}return r}parseColumnFilterModel(e){var t,i;const n=null!==(t=this.getColumnDisplayValue(e))&&void 0!==t?t:"",o=null!==(i=this.getOperatorDisplayValue(e))&&void 0!==i?i:"",s=this.getOperandDisplayValue(e);return"[".concat(n,"] ").concat(o).concat(s)}updateAutocompleteCache(e,t){if("column"===t){const{key:t,displayValue:i}=e;this.columnNameToIdMap[e.displayValue.toLocaleUpperCase()]={colId:t,columnName:i}}}translate(e,t){let i=Lwe[e];return"function"===typeof i&&(i=i(t)),this.getLocaleTextFunc()(e,i,t)}generateAutocompleteListParams(e,t,i){return{enabled:!0,type:t,searchString:i,entries:e}}getColumnAutocompleteEntries(){var e;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;const t=null!==(e=this.colModel.getColDefCols())&&void 0!==e?e:[],i=[],n=this.gos.get("includeHiddenColumnsInAdvancedFilter");return t.forEach((e=>{e.getColDef().filter&&(n||e.isVisible()||e.isRowGroupActive())&&i.push({key:e.getColId(),displayValue:this.colNames.getDisplayNameForColumn(e,"advancedFilter")})})),i.sort(((e,t)=>{var i,n;const o=null!==(i=e.displayValue)&&void 0!==i?i:"",s=null!==(n=t.displayValue)&&void 0!==n?n:"";return o<s?-1:s>o?1:0})),i}getOperatorAutocompleteEntries(e,t){const i=this.getActiveOperators(e);return this.getDataTypeExpressionOperator(t).getEntries(i)}getJoinOperatorAutocompleteEntries(){return Object.entries(this.expressionJoinOperators).map((e=>{let[t,i]=e;return{key:t,displayValue:i}}))}getDefaultAutocompleteListParams(e){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",e)}getDataTypeExpressionOperator(e){return this.expressionOperators[e]}getExpressionOperator(e,t){var i;return null===(i=this.getDataTypeExpressionOperator(e))||void 0===i||null===(i=i.operators)||void 0===i?void 0:i[t]}getExpressionJoinOperators(){return this.expressionJoinOperators}getColId(e){const t=e.toLocaleUpperCase(),i=this.columnNameToIdMap[t];if(i)return i;const n=this.getColumnAutocompleteEntries().find((e=>{let{displayValue:i}=e;return i.toLocaleUpperCase()===t}));if(n){const{key:e,displayValue:i}=n,o={colId:e,columnName:i};return this.columnNameToIdMap[t]=o,o}return null}getExpressionEvaluatorParams(e){var t,i,n;let o=this.expressionEvaluatorParams[e];if(o)return o;const s=this.colModel.getColDefCol(e);if(!s)return{valueConverter:e=>e};switch(null===(t=this.dataTypeSvc)||void 0===t?void 0:t.getBaseDataType(s)){case"dateString":o={valueConverter:null!==(i=null===(n=this.dataTypeSvc)||void 0===n?void 0:n.getDateParserFunction(s))&&void 0!==i?i:e=>e};break;case"object":o=s.getColDef().filterValueGetter?{valueConverter:e=>e}:{valueConverter:(e,t)=>{var i;return null!==(i=this.valueSvc.formatValue(s,t,e))&&void 0!==i?i:"function"===typeof e.toString?e.toString():""}};break;case"text":case void 0:o={valueConverter:e=>Ve(e)};break;default:o={valueConverter:e=>e}}const{filterParams:r}=s.getColDef();return r&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach((e=>{const t=r[e];t&&(o[e]=t)})),this.expressionEvaluatorParams[e]=o,o}getColumnDetails(e){var t,i,n;const o=null!==(t=this.colModel.getColDefCol(e))&&void 0!==t?t:void 0;return{column:o,baseCellDataType:null!==(i=o?null===(n=this.dataTypeSvc)||void 0===n?void 0:n.getBaseDataType(o):void 0)&&void 0!==i?i:"text"}}generateExpressionOperators(){const e=(e,t)=>this.translate(e,t);return{text:new Uwe({translate:e}),boolean:new Ywe({translate:e}),object:new Uwe({translate:e}),number:new Kwe({translate:e,equals:(e,t)=>e===t}),date:new Kwe({translate:e,equals:(e,t)=>e.getTime()===t.getTime()}),dateString:new Kwe({translate:e,equals:(e,t)=>e.getTime()===t.getTime()})}}getColumnValue(e){let{displayValue:t}=e;return"".concat(_we).concat(t).concat(Vwe)}generateExpressionJoinOperators(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}}getActiveOperators(e){var t;const i=null===(t=e.getColDef().filterParams)||void 0===t?void 0:t.filterOptions;if(!i)return;return i.every((e=>"string"===typeof e))?i:void 0}resetColumnCaches(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}}}],icons:{advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",advancedFilterBuilderSelectOpen:"small-down",richSelectRemove:"cancel"},apiFunctions:{getAdvancedFilterModel:function(e){var t,i;return null!==(t=null===(i=e.filterManager)||void 0===i?void 0:i.getAdvFilterModel())&&void 0!==t?t:null},setAdvancedFilterModel:function(e,t){var i;null===(i=e.filterManager)||void 0===i||i.setAdvFilterModel(t)},showAdvancedFilterBuilder:function(e){var t;null===(t=e.filterManager)||void 0===t||t.toggleAdvFilterBuilder(!0,"api")},hideAdvancedFilterBuilder:function(e){var t;null===(t=e.filterManager)||void 0===t||t.toggleAdvFilterBuilder(!1,"api")}},dependsOn:[Rwe,su,al,Lh,ru],css:['.ag-advanced-filter-header{align-items:center;background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);display:flex;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);position:relative}.ag-advanced-filter{align-items:center;display:flex;width:100%}.ag-advanced-filter-apply-button,.ag-advanced-filter-builder-button{line-height:normal;white-space:nowrap}:where(.ag-ltr) .ag-advanced-filter-apply-button,:where(.ag-ltr) .ag-advanced-filter-builder-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-advanced-filter-apply-button,:where(.ag-rtl) .ag-advanced-filter-builder-button{margin-right:calc(var(--ag-spacing)*2)}.ag-advanced-filter-builder-button{align-items:center;background-color:unset;border:0;display:flex;font-size:var(--ag-font-size);font-weight:600;padding:var(--ag-spacing);&:where(:not(:disabled)){cursor:pointer;&:hover{background-color:var(--ag-row-hover-color)}}}:where(.ag-ltr) .ag-advanced-filter-builder-button-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-advanced-filter-builder-button-label{margin-right:var(--ag-spacing)}.ag-advanced-filter-builder{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ag-advanced-filter-builder-list{flex:1;overflow:auto}.ag-advanced-filter-builder-button-panel{border-top:var(--ag-advanced-filter-builder-button-bar-border);display:flex;justify-content:flex-end;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-advanced-filter-builder-apply-button,:where(.ag-ltr) .ag-advanced-filter-builder-cancel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-advanced-filter-builder-apply-button,:where(.ag-rtl) .ag-advanced-filter-builder-cancel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-advanced-filter-builder-item-wrapper{align-items:center;display:flex;flex:1 1 auto;justify-content:space-between;overflow:hidden}:where(.ag-ltr) .ag-advanced-filter-builder-item-wrapper{padding-left:calc(var(--ag-icon-size)/2);padding-right:var(--ag-icon-size)}:where(.ag-rtl) .ag-advanced-filter-builder-item-wrapper{padding-left:var(--ag-icon-size);padding-right:calc(var(--ag-icon-size)/2)}:where(.ag-virtual-list-viewport .ag-advanced-filter-builder-item-wrapper) .ag-tab-guard{position:absolute}.ag-advanced-filter-builder-item-tree-lines>*{width:var(--ag-advanced-filter-builder-indent-size)}.ag-advanced-filter-builder-item-tree-line-root{width:var(--ag-icon-size);&:before{height:50%;top:50%}}.ag-advanced-filter-builder-item-tree-line-horizontal,.ag-advanced-filter-builder-item-tree-line-vertical,.ag-advanced-filter-builder-item-tree-line-vertical-bottom,.ag-advanced-filter-builder-item-tree-line-vertical-top{align-items:center;display:flex;height:100%;position:relative;&:after,&:before{content:"";height:100%;position:absolute}}.ag-advanced-filter-builder-item-tree-line-horizontal:after{border-bottom:1px solid var(--ag-border-color);height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size))}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-horizontal:after{left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-horizontal:after{right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical:before{top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical:before{border-left:1px solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical:before{border-right:1px solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-top:before{height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-left:1px solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-right:1px solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{height:calc(50% - var(--ag-icon-size)*1.5/2);top:calc(50% + var(--ag-icon-size)*1.5/2);width:calc(var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-left:1px solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-right:1px solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-condition{padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing)}.ag-advanced-filter-builder-item,.ag-advanced-filter-builder-item-buttons,.ag-advanced-filter-builder-item-condition,.ag-advanced-filter-builder-item-tree-lines,.ag-advanced-filter-builder-pill,.ag-advanced-filter-builder-pill-wrapper{align-items:center;display:flex;height:100%}.ag-advanced-filter-builder-pill-wrapper{margin:0 var(--ag-spacing)}.ag-advanced-filter-builder-pill{border-radius:var(--ag-border-radius);min-height:calc(100% - var(--ag-spacing)*3);min-width:calc(var(--ag-spacing)*2);padding:var(--ag-spacing) calc(var(--ag-spacing)*2);position:relative}:where(.ag-advanced-filter-builder-pill){.ag-advanced-filter-builder-value-number{font-family:monospace;font-weight:700}.ag-advanced-filter-builder-value-empty{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-advanced-filter-builder-pill){.ag-picker-field-display{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-advanced-filter-builder-pill){.ag-picker-field-display{margin-left:var(--ag-spacing)}}.ag-advanced-filter-builder-pill-display{font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-advanced-filter-builder-join-pill{background-color:var(--ag-advanced-filter-builder-join-pill-color);cursor:pointer}.ag-advanced-filter-builder-column-pill{background-color:var(--ag-advanced-filter-builder-column-pill-color);cursor:pointer}.ag-advanced-filter-builder-option-pill{background-color:var(--ag-advanced-filter-builder-option-pill-color);cursor:pointer}.ag-advanced-filter-builder-value-pill{background-color:var(--ag-advanced-filter-builder-value-pill-color);cursor:text;max-width:140px;:where(.ag-advanced-filter-builder-pill-display){display:block}}.ag-advanced-filter-builder-item-buttons>*{margin:0 calc(var(--ag-spacing)*.5)}.ag-advanced-filter-builder-item-button{color:var(--ag-subtle-text-color);cursor:pointer;position:relative}.ag-advanced-filter-builder-item-button,.ag-advanced-filter-builder-pill{&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-advanced-filter-builder-item-button-disabled{cursor:default;opacity:.5}.ag-advanced-filter-builder-virtual-list-container{top:var(--ag-spacing)}.ag-advanced-filter-builder-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:hover{background-color:var(--ag-row-hover-color);:where(.ag-advanced-filter-builder-item-button){opacity:1}}}.ag-advanced-filter-builder-invalid{color:var(--ag-invalid-color);cursor:default;margin:0 var(--ag-spacing)}:where(.ag-advanced-filter-builder-validation) .ag-advanced-filter-builder-invalid,:where(.ag-advanced-filter-builder-virtual-list-item-highlight) .ag-advanced-filter-builder-item-button:focus-visible{opacity:1}']};function ISe(e,t){if(!t)return null;const i=Lo(e),n=i.indexOf(t);if(-1===n)return null;let o=-1;for(let s=n-1;s>=0;s--)if(i[s].classList.contains(Ia)){o=s;break}return o<=0?null:i[o-1]}function ASe(e,t){if(!t)return!1;const i=e.querySelectorAll(".".concat(Ms));if(!i.length)return!1;for(let n=0;n<i.length;n++)if(i[n].contains(t))return!0;return!1}var TSe=class extends En{constructor(e){super(),this.toolPanelDef=e,this.eToggleButton=Tn,this.eIconWrapper=Tn,this.eLabel=Tn}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){const e=this.createTemplate();this.setTemplate(e,[]),this.setLabel(),this.setIcon(),this.addManagedElementListeners(this.eToggleButton,{click:this.onButtonPressed.bind(this)}),this.eToggleButton.setAttribute("id","ag-".concat(this.getCompId(),"-button"))}createTemplate(){return'<div class="ag-side-button" role="presentation">\n                <button type="button" data-ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div data-ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span data-ref="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>'}setLabel(){const e=this.getLocaleTextFunc(),t=this.toolPanelDef,i=e(t.labelKey,t.labelDefault);this.eLabel.innerText=i}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",Wr(this.toolPanelDef.iconKey,this.beans))}onButtonPressed(){this.dispatchLocalEvent({type:"toggleButtonClicked"})}setSelected(e){this.addOrRemoveCssClass("ag-selected",e),O(this.eToggleButton,e)}},ESe={selector:"AG-SIDE-BAR-BUTTONS",component:class extends En{constructor(){super('<div class="ag-side-buttons" role="tablist"></div>'),this.buttonComps=[]}postConstruct(){this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){e.key===Do.TAB&&e.shiftKey&&(zo(this.beans,!0)?e.preventDefault():fi(e))}setActiveButton(e){this.buttonComps.forEach((t=>{t.setSelected(e===t.getToolPanelId())}))}addButtonComp(e){const t=this.createBean(new TSe(e));return this.buttonComps.push(t),this.appendChild(t),t.addEventListener("toggleButtonClicked",(()=>{this.dispatchLocalEvent({type:"sideBarButtonClicked",toolPanelId:e.id})})),t}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),xe(this.getGui()),super.destroy()}destroy(){this.clearButtons(),super.destroy()}}},RSe={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columnsToolPanel",toolPanel:"agColumnsToolPanel"},LSe={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filtersToolPanel",toolPanel:"agFiltersToolPanel"},PSe={columns:RSe,filters:LSe};function NSe(e){if(!e)return;if(!0===e)return{toolPanels:[RSe,LSe],defaultToolPanel:"columns"};if("string"===typeof e)return NSe([e]);if(Array.isArray(e)){const t=[];if(e.forEach((e=>{const i=PSe[e];i?t.push(i):pt(215,{key:e,defaultByKey:PSe})})),0===t.length)return;return{toolPanels:t,defaultToolPanel:t[0].id}}return{toolPanels:FSe(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}function FSe(e){const t=[];return e?(e.forEach((e=>{let i=null;if("string"===typeof e){const t=PSe[e];if(!t)return void pt(215,{key:e,defaultByKey:PSe});i=t}else i=e;t.push(i)})),t):t}var OSe=class extends En{constructor(){super('<div class="ag-tool-panel-horizontal-resize"></div>'),this.minWidth=100,this.maxWidth=null}postConstruct(){const e=this.beans.horizontalResizeSvc.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.inverted=this.gos.get("enableRtl")}dispatchResizeEvent(e,t,i){this.eventSvc.dispatchEvent({type:"toolPanelSizeChanged",width:i,started:e,ended:t})}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(e){return this.onResizing(e,!0)}onResizing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.inverted?-1:1;let n=Math.max(this.minWidth,Math.floor(this.startingWidth-e*i));null!=this.maxWidth&&(n=Math.min(this.maxWidth,n)),this.elementToResize.style.width="".concat(n,"px"),this.dispatchResizeEvent(!1,t,n)}};var BSe={name:"toolPanel",optionalMethods:["refresh","getState"]},GSe=class extends En{constructor(){super('<div class="ag-tool-panel-wrapper" role="tabpanel"/>')}postConstruct(){const e=this.getGui(),t=this.resizeBar=this.createManagedBean(new OSe);e.setAttribute("id","ag-".concat(this.getCompId())),t.elementToResize=e,this.appendChild(t)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,t){const{id:i,minWidth:n,maxWidth:o,width:s}=e;this.toolPanelId=i,this.width=s;const r=function(e,t,i){return e.getCompDetails(t,BSe,void 0,i,!0)}(this.beans.userCompFactory,e,t);if(null==r)return!1;const a=r.newAgStackInstance();this.params=r.params,a.then(this.setToolPanelComponent.bind(this));const l=this.resizeBar;return null!=n&&(l.minWidth=n),null!=o&&(l.maxWidth=o),!0}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc((()=>{this.destroyBean(e)}));const t=this.width;t&&(this.getGui().style.width="".concat(t,"px"))}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){const t="left"===e,i=this.gos.get("enableRtl")?t:!t;this.resizeBar.inverted=i}refresh(){var e;null===(e=this.toolPanelCompInstance)||void 0===e||e.refresh(this.params)}},zSe={selector:"AG-SIDE-BAR",component:class extends En{constructor(){super('<div class="ag-side-bar ag-unselectable">\n                <ag-side-bar-buttons data-ref="sideBarButtons"></ag-side-bar-buttons>\n            </div>',[ESe]),this.sideBarButtons=Tn,this.toolPanelWrappers=[],this.registerCSS('.ag-tool-panel-wrapper{cursor:default;display:flex;overflow:hidden auto;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-side-bar-panel-width)}.ag-select-agg-func-item{align-items:center;display:flex;flex:1 1 auto;flex-flow:row nowrap;height:100%;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap;>*{flex:none}}.ag-tool-panel-horizontal-resize{cursor:ew-resize;height:100%;position:absolute;top:0;width:5px;z-index:1}.ag-side-bar{background-color:var(--ag-side-bar-background-color);display:flex;flex-direction:row-reverse;position:relative}:where(.ag-ltr) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{right:-3px}:where(.ag-rtl) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-ltr) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-rtl) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{right:-3px}.ag-side-bar-left{flex-direction:row;order:-1}.ag-side-buttons{background-color:var(--ag-side-button-bar-background-color);padding-top:var(--ag-side-button-bar-top-padding);position:relative}.ag-side-button{background-color:var(--ag-side-button-background-color);border-bottom:var(--ag-side-button-selected-border);border-bottom-color:transparent;border-top:var(--ag-side-button-selected-border);border-top-color:transparent;color:var(--ag-side-button-text-color);position:relative;&:before{background-color:transparent;bottom:0;content:"";display:block;position:absolute;top:0;transition:background-color var(--ag-side-button-selected-underline-transition-duration);width:var(--ag-side-button-selected-underline-width)}&:hover{background-color:var(--ag-side-button-hover-background-color);color:var(--ag-side-button-hover-text-color)}&.ag-selected{background-color:var(--ag-side-button-selected-background-color);border-bottom:var(--ag-side-button-selected-border);color:var(--ag-side-button-selected-text-color);&:where(:not(:first-of-type)){border-top:var(--ag-side-button-selected-border)}&:before{background-color:var(--ag-side-button-selected-underline-color)}}}:where(.ag-ltr) .ag-side-button{&:before{left:0}}:where(.ag-rtl) .ag-side-button{&:before{right:0}}.ag-side-button-button{align-items:center;cursor:pointer;display:flex;flex-direction:column;gap:var(--ag-spacing);position:relative;white-space:nowrap;width:100%;&:focus{box-shadow:none}}:where(.ag-ltr) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding)}:where(.ag-rtl) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding)}.ag-side-button-button:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-side-button-label{writing-mode:vertical-lr}@media (resolution <= 1.5x){.ag-side-button-label{font-family:"Segoe UI",var(--ag-font-family)}:where(.ag-ltr) .ag-side-button-label{transform:rotate(.05deg)}:where(.ag-rtl) .ag-side-button-label{transform:rotate(-.05deg)}}:where(.ag-ltr) .ag-side-bar-left,:where(.ag-rtl) .ag-side-bar-right{border-right:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-left:var(--ag-side-panel-border)}}:where(.ag-ltr) .ag-side-bar-right,:where(.ag-rtl) .ag-side-bar-left{border-left:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-right:var(--ag-side-panel-border)}}')}postConstruct(){var e;this.sideBarButtons.addEventListener("sideBarButtonClicked",this.onToolPanelButtonClicked.bind(this));const{beans:t,gos:i}=this,{sideBar:n}=null!==(e=i.get("initialState"))&&void 0!==e?e:{};this.setSideBarDef({sideBarDef:NSe(i.get("sideBar")),sideBarState:n}),this.addManagedPropertyListener("sideBar",this.onSideBarUpdated.bind(this)),t.sideBar.comp=this;const o=this.getFocusableElement();this.createManagedBean(new Ds(o,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),Ro(t,this,o)}onTabKeyDown(e){if(e.defaultPrevented)return;const{beans:t,sideBarButtons:i}=this,n=this.getGui(),o=i.getGui(),s=Lt(t),r=n.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),a=e.target;if(!r)return zo(t,e.shiftKey,!0);if(o.contains(s))return void(Po(r,e.shiftKey)&&e.preventDefault());if(!e.shiftKey)return;let l=null;r.contains(s)?l=No(t,r,void 0,!0):ASe(r,a)&&e.shiftKey&&(l=ISe(r,a)),l||(l=o.querySelector(".ag-selected button")),l&&l!==e.target&&(e.preventDefault(),l.focus())}handleKeyDown(e){const t=Lt(this.beans),i=this.sideBarButtons;if(!i.getGui().contains(t))return;const n=i.getGui(),o=Array.prototype.slice.call(n.querySelectorAll(".ag-side-button")),s=o.findIndex((e=>e.contains(t)));let r=null;switch(e.key){case Do.LEFT:case Do.UP:r=Math.max(0,s-1);break;case Do.RIGHT:case Do.DOWN:r=Math.min(s+1,o.length-1)}if(null===r)return;const a=o[r].querySelector("button");a&&(a.focus(),e.preventDefault())}onToolPanelButtonClicked(e){const t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(t,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtons.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef(e){let{sideBarDef:t,sideBarState:i,existingToolPanelWrappers:n}=e;if(this.setDisplayed(!1),this.sideBar=t,t&&t.toolPanels){const e=t.toolPanels;if(this.createToolPanelsAndSideButtons(e,i,n),!this.toolPanelWrappers.length)return;const o=i?i.visible:!t.hiddenByDefault;if(this.setDisplayed(o),this.setSideBarPosition(i?i.position:t.position),o)if(i){const{openToolPanel:e}=i;e&&this.openToolPanel(e,"sideBarInitializing")}else this.openToolPanel(t.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;const t="left"===e,i=t?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",t),this.addOrRemoveCssClass("ag-side-bar-right",!t),this.toolPanelWrappers.forEach((e=>{e.setResizerSizerSide(i)})),this.dispatchSideBarUpdated(),this}setDisplayed(e,t){super.setDisplayed(e,t),this.dispatchSideBarUpdated()}getState(){const e={};return this.toolPanelWrappers.forEach((t=>{var i,n;e[t.getToolPanelId()]=null===(i=t.getToolPanelInstance())||void 0===i||null===(n=i.getState)||void 0===n?void 0:n.call(i)})),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,t,i){for(const o of e){var n;this.createToolPanelAndSideButton(o,null===t||void 0===t||null===(n=t.toolPanels)||void 0===n?void 0:n[o.id],null===i||void 0===i?void 0:i[o.id])}}validateDef(e){if(null==e.id)return pt(212),!1;var t;if("agFiltersToolPanel"===e.toolPanel&&(null!==(t=this.beans.filterManager)&&void 0!==t&&t.isAdvFilterEnabled()))return pt(213),!1;return!0}createToolPanelAndSideButton(e,t,i){if(!this.validateDef(e))return;let n;if(i)n=i;else{n=this.createBean(new GSe);if(!n.setToolPanelDef(e,{initialState:t,onStateUpdated:()=>this.dispatchSideBarUpdated()}))return}n.setDisplayed(!1);const o=n.getGui();this.appendChild(o),this.toolPanelWrappers.push(n);X(this.sideBarButtons.addButtonComp(e).eToggleButton,o)}refresh(){this.toolPanelWrappers.forEach((e=>e.refresh()))}openToolPanel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=this.openedItem();if(i===e)return;this.toolPanelWrappers.forEach((t=>{const i=e===t.getToolPanelId();t.setDisplayed(i)}));i!==this.openedItem()&&(this.sideBarButtons.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,null!==i&&void 0!==i?i:void 0,t))}getToolPanelInstance(e){const t=this.toolPanelWrappers.filter((t=>t.getToolPanelId()===e))[0];if(t)return t.getToolPanelInstance();pt(214,{key:e})}raiseToolPanelVisibleEvent(e,t,i){const n=!!e&&!!t,o=this.eventSvc;t&&o.dispatchEvent({type:"toolPanelVisibleChanged",source:i,key:t,visible:!1,switchingToolPanel:n}),e&&o.dispatchEvent({type:"toolPanelVisibleChanged",source:i,key:e,visible:!0,switchingToolPanel:n})}close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api";this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;return this.toolPanelWrappers.forEach((t=>{t.isDisplayed()&&(e=t.getToolPanelId())})),e}onSideBarUpdated(){const e=NSe(this.gos.get("sideBar")),t={};var i;e&&this.sideBar&&(null===(i=e.toolPanels)||void 0===i||i.forEach((e=>{var i,n,o;const{id:s}=e;if(!s)return;const r=null===(i=this.sideBar.toolPanels)||void 0===i?void 0:i.find((e=>e.id===s));if(!r||e.toolPanel!==r.toolPanel)return;const a=this.toolPanelWrappers.find((e=>e.getToolPanelId()===s));if(!a)return;const d=this.gos.addGridCommonParams(l(l({},null!==(n=e.toolPanelParams)&&void 0!==n?n:{}),{},{onStateUpdated:()=>this.dispatchSideBarUpdated()}));!0===(null===(o=a.getToolPanelInstance())||void 0===o?void 0:o.refresh(d))&&(this.toolPanelWrappers=this.toolPanelWrappers.filter((e=>e!==a)),we(a.getGui()),t[s]=a)})));this.clearDownUi(),this.setSideBarDef({sideBarDef:e,existingToolPanelWrappers:t})}dispatchSideBarUpdated(){this.eventSvc.dispatchEvent({type:"sideBarUpdated"})}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach((e=>{we(e.getGui()),this.destroyBean(e)})),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}}},_Se={moduleName:"SideBar",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="sideBar"}getSelector(){return zSe}}],apiFunctions:{isSideBarVisible:function(e){var t,i;return null!==(t=null===(i=e.sideBar)||void 0===i?void 0:i.comp.isDisplayed())&&void 0!==t&&t},setSideBarVisible:function(e,t){var i;null===(i=e.sideBar)||void 0===i||i.comp.setDisplayed(t)},setSideBarPosition:function(e,t){var i;null===(i=e.sideBar)||void 0===i||i.comp.setSideBarPosition(t)},openToolPanel:function(e,t){var i;null===(i=e.sideBar)||void 0===i||i.comp.openToolPanel(t,"api")},closeToolPanel:function(e){var t;null===(t=e.sideBar)||void 0===t||t.comp.close("api")},getOpenedToolPanel:function(e){var t,i;return null!==(t=null===(i=e.sideBar)||void 0===i?void 0:i.comp.openedItem())&&void 0!==t?t:null},refreshToolPanel:function(e){var t;null===(t=e.sideBar)||void 0===t||t.comp.refresh()},isToolPanelShowing:function(e){var t,i;return null!==(t=null===(i=e.sideBar)||void 0===i?void 0:i.comp.isToolPanelShowing())&&void 0!==t&&t},getToolPanelInstance:function(e,t){var i;return so(null===(i=e.sideBar)||void 0===i?void 0:i.comp.getToolPanelInstance(t))},getSideBar:function(e){var t;return null===(t=e.sideBar)||void 0===t?void 0:t.comp.getDef()}},dependsOn:[Rwe,dl]},VSe=class extends En{constructor(){super(),this.setTemplate("<div></div>")}init(e){var t;this.params=e,this.cssClassPrefix=null!==(t=this.params.cssClassPrefix)&&void 0!==t?t:"ag-menu-option",this.addAriaAttributes(),this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addAriaAttributes(){const{checked:e,subMenu:t}=this.params,i=this.getGui();e&&Z(i,e),t&&O(i,!1)}addIcon(){if(this.params.isCompact)return;const e=De('<span data-ref="eIcon" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("icon"),'" role="presentation"></span>')),{checked:t,icon:i}=this.params;t?e.appendChild(Wr("check",this.beans)):i&&(Pe(i)?e.appendChild(i):"string"===typeof i?e.innerHTML=i:pt(227)),this.getGui().appendChild(e)}addName(){const e=De('<span data-ref="eName" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("text"),'">').concat(this.params.name||"","</span>"));this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=De('<span data-ref="eShortcut" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("shortcut"),'">').concat(this.params.shortcut||"","</span>"));this.getGui().appendChild(e)}addSubMenu(){const e=De('<span data-ref="ePopupPointer" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"),'"></span>')),t=this.getGui();if(this.params.subMenu){const t=this.gos.get("enableRtl")?"subMenuOpenRtl":"subMenuOpen";e.appendChild(Wr(t,this.beans))}t.appendChild(e)}getClassName(e){return"".concat(this.cssClassPrefix,"-").concat(e)}},HSe={moduleName:"MenuItem",version:Ewe,userComponents:{agMenuItem:VSe},icons:{check:"tick",subMenuOpen:"small-right",subMenuOpenRtl:"small-left"},css:['.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option{cursor:pointer;font-weight:500}:where(.ag-ltr) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:right}:where(.ag-rtl) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:left}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:1px solid var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-compact-menu-option-icon,:where(.ag-ltr) .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-compact-menu-option-icon,:where(.ag-rtl) .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-compact-menu-option-shortcut,:where(.ag-ltr) .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-shortcut,:where(.ag-rtl) .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}:where(.ag-ltr) .ag-compact-menu-option-popup-pointer,:where(.ag-ltr) .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-popup-pointer,:where(.ag-rtl) .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;:where(.ag-column-select){height:100%}}.ag-menu:where(.ag-tabs){min-width:290px}.ag-context-menu-loading-icon{pointer-events:none;position:absolute}']},WSe={selector:"AG-PRIMARY-COLS-HEADER",component:class extends En{constructor(){super('<div class="ag-column-select-header" role="presentation">\n            <div data-ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox data-ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" data-ref="eFilterTextField"></ag-input-text-field>\n        </div>',[Zr,sa]),this.eExpand=Tn,this.eSelect=Tn,this.eFilterTextField=Tn}postConstruct(){this.createExpandIcons(),this.addManagedListeners(this.eExpand,{click:this.onExpandClicked.bind(this),keydown:e=>{e.key===Do.SPACE&&(e.preventDefault(),this.onExpandClicked())}}),this.addManagedElementListeners(this.eSelect.getInputElement(),{click:this.onSelectClicked.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",(()=>this.onFunctionsReadOnlyPropChanged())),this.eFilterTextField.setAutoComplete(!1).onValueChange((()=>this.onFilterTextChanged())),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)});const e=this.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle All Columns Visibility")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e)}init(e){this.params=e;const t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t),this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){const e=this.beans;this.eExpand.appendChild(this.eExpandChecked=Wr("columnSelectOpen",e)),this.eExpand.appendChild(this.eExpandUnchecked=Wr("columnSelectClosed",e)),this.eExpand.appendChild(this.eExpandIndeterminate=Wr("columnSelectIndeterminate",e)),this.setExpandState(0)}showOrHideOptions(){var e;const t=this.params,i=!t.suppressColumnFilter,n=!t.suppressColumnSelectAll,o=!t.suppressColumnExpandAll,s=!(null===(e=this.beans.colModel.colDefCols)||void 0===e||!e.treeDepth),r=this.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(r("searchOoo","Search...")),le(this.eFilterTextField.getGui(),i),le(this.eSelect.getGui(),n),le(this.eExpand,o&&s)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=$e(this,(()=>{const e=this.eFilterTextField.getValue();this.dispatchLocalEvent({type:"filterChanged",filterText:e})}),300)),this.onFilterTextChangedDebounced()}onSelectClicked(){this.dispatchLocalEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchLocalEvent({type:0===this.expandState?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,le(this.eExpandChecked,0===e),le(this.eExpandUnchecked,1===e),le(this.eExpandIndeterminate,2===e)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}}};function jSe(e){return!!e&&"undefined"!==typeof e.children}function USe(e){return jSe(e)?e.groupId:e.colId}function KSe(e,t,i){if(!jSe(e))return!0;const n=e,o=i;if(((e,t)=>{const i=e.children.map(USe).includes(USe(t)),n=Gi(e.children),o=n&&USe(n)!==USe(t);return i&&o})(n,o))return n.children.push(o),!0;if(n.groupId===t){if(!n.children.map(USe).includes(USe(o)))return n.children.push(o),!0}for(let s=n.children.length-1;s>=0&&!KSe(n.children[s],t,i);s--);return!1}function YSe(e){const t=(e,i)=>{if(!jSe(i))return e;const n=e,o=i;if(o.children&&o.groupId){if(KSe(n,o.groupId,o.children[0]))return n}return o.children.forEach((e=>t(n,e))),n},i=[];for(let s=1;s<=e.length;s++){const r=e[s-1],a=e[s];o=a,jSe(n=r)&&jSe(o)&&USe(n)===USe(o)?e[s]=t(r,a):i.push(r)}var n,o;return i}function ZSe(e,t){const i=[],n=(t,o)=>{if(jSe(t)){const e=t,i="undefined"!==typeof e.groupId?e.groupId:e.headerName,s=new Ni(e,i,!1,o),r=[];return e.children.forEach((e=>{const t=n(e,o+1);t&&r.push(t)})),s.setChildren(r),s}{const n=t,o=n.colId?n.colId:n.field,s=e.getColDefCol(o);return s||i.push(n),s}},o=[];return t.forEach((e=>{const t=n(e,0);t&&o.push(t)})),i.length>0&&pt(217,{invalidColIds:i}),o}function XSe(e,t){const i=function(e){const t=(e,i)=>{let n;if(Pi(e))if(e.isPadding())n=i;else{const t=Object.assign({},e.getColGroupDef());t.groupId=e.getGroupId(),t.children=[i],n=t}else{const t=Object.assign({},e.getColDef());t.colId=e.getColId(),n=t}const o=e.getOriginalParent();return o?t(o,n):n},i=e.getCols();return i.filter((e=>{const t=e.getColDef();return e.isPrimary()&&!t.showRowGroup})).map((e=>t(e,e.getColDef())))}(e);t(YSe(i))}var qSe=class{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.displayName=e,this.depth=i,this.group=n,this.localEventService=new C,n?(this.columnGroup=t,this._expanded=o,this.children=[]):this.column=t}get expanded(){return!!this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.localEventService.dispatchEvent({type:"expandedChanged"}))}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};function QSe(e,t,i,n){JSe(e,function(e){const t=[],i=e=>{e.forEach((e=>{e.passesFilter&&(e.group?i(e.children):t.push(e.column))}))};return i(e),t}(t),i,n)}function JSe(e,t,i,n){e.colModel.isPivotMode()?function(e,t,i,n){!function(e,t,i,n){const o=[],s=t=>{if(!t.isAnyFunctionActive())if(t.isAllowValue()){var i;const n="string"===typeof t.getAggFunc()?t.getAggFunc():null===(i=e.aggFuncSvc)||void 0===i?void 0:i.getDefaultAggFunc(t);o.push({colId:t.getId(),aggFunc:n})}else t.isAllowRowGroup()?o.push({colId:t.getId(),rowGroup:!0}):t.isAllowPivot()&&o.push({colId:t.getId(),pivot:!0})},r=e=>{(e.isPivotActive()||e.isRowGroupActive()||e.isValueActive())&&o.push({colId:e.getId(),pivot:!1,rowGroup:!1,aggFunc:null})},a=i?s:r;t.forEach(a),o.length>0&&Zi(e,{state:o},n)}(e,t,i,n)}(e,t,i,n):function(e,t,i,n){var o;const s=[];t.forEach((e=>{e.getColDef().lockVisible||e.isVisible()!=i&&s.push({colId:e.getId(),hide:!i})})),s.length>0&&Zi(e,{state:s},n);null===(o=e.selectionColSvc)||void 0===o||o.refreshVisibility(n)}(e,t,i,n)}function $Se(e,t){const{columns:i,visibleState:n,pivotState:o,eventType:s}=t,r=i.map((t=>{const i=t.getColId();if(e.colModel.isPivotMode()){const e=null===o||void 0===o?void 0:o[i];return{colId:i,pivot:null===e||void 0===e?void 0:e.pivot,rowGroup:null===e||void 0===e?void 0:e.rowGroup,aggFunc:null===e||void 0===e?void 0:e.aggFunc}}return{colId:i,hide:!(null!==n&&void 0!==n&&n[i])}}));Zi(e,{state:r},s)}function eMe(e){return{pivot:e.isPivotActive(),rowGroup:e.isRowGroupActive(),aggFunc:e.isValueActive()?e.getAggFunc():void 0}}function tMe(e,t,i,n){const o=t.getCol(i);e.groupData||(e.groupData={});const s=o.getColId(),r=e.groupData[s];r!==n&&(e.groupData[s]=n,e.dispatchCellChangedEvent(o,n,r))}function iMe(e,t,i){var n;e.group!==i&&(e.group&&!i&&(e.expanded=!1),e.group=i,e.updateHasChildren(),null===(n=t.selectionSvc)||void 0===n||n.updateRowSelectable(e),e.dispatchRowEvent("groupChanged"))}function nMe(e,t){const{gos:i,rowGroupColsSvc:n}=t;if(!n||!e)return!1;const o=i.get("groupLockGroupColumns");if(!e.isRowGroupActive()||0===o)return!1;if(-1===o)return!0;return o>n.columns.findIndex((t=>t.getColId()===e.getColId()))}var oMe=class extends Ra{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===Do.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout((()=>e.getGui().focus()),0)}};var sMe={name:"menuItem",optionalMethods:["setActive","select","setExpanded","configureDefaults"]},rMe=class extends Si{constructor(){super(...arguments),this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory,this.registry=e.registry}init(e){var t,i,n;const{menuItemDef:o,isAnotherSubMenuOpen:s,level:r,childComponent:a,contextParams:d}=e;this.params=e.menuItemDef,this.level=r,this.isAnotherSubMenuOpen=s,this.childComponent=a,this.contextParams=d,this.cssClassPrefix=null!==(t=null===(i=this.params.menuItemParams)||void 0===i?void 0:i.cssClassPrefix)&&void 0!==t?t:"ag-menu-option";const c=function(e,t,i){return e.getCompDetails(t,sMe,"agMenuItem",i,!0)}(this.userCompFactory,this.params,l(l({},o),{},{level:r,isAnotherSubMenuOpen:s,openSubMenu:e=>this.openSubMenu(e),closeSubMenu:()=>this.closeSubMenu(),closeMenu:e=>this.closeMenu(e),updateTooltip:(e,t)=>this.refreshTooltip(e,t),onItemActivated:()=>this.onItemActivated()}));return null!==(n=null===c||void 0===c?void 0:c.newAgStackInstance().then((e=>{var t;this.menuItemComp=e;const i=null===(t=e.configureDefaults)||void 0===t?void 0:t.call(e);i&&this.configureDefaults(!0===i?void 0:i)})))&&void 0!==n?n:Rn.resolve()}addListeners(e,t){null!==t&&void 0!==t&&t.suppressClick||this.addManagedElementListeners(e,{click:e=>this.onItemSelected(e)}),null!==t&&void 0!==t&&t.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:e=>{e.key!==Do.ENTER&&e.key!==Do.SPACE||(e.preventDefault(),this.onItemSelected(e))}}),null!==t&&void 0!==t&&t.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:e=>{e.stopPropagation(),e.preventDefault()}}),null!==t&&void 0!==t&&t.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const o=De('<div class="ag-menu" role="presentation"></div>');let s;this.eSubMenuGui=o;let r=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const e=this.createBean(new oMe(this.childComponent));e.setParentComponent(this);const t=e.getGui(),i="mouseenter",n=()=>this.cancelDeactivate();t.addEventListener(i,n),s=()=>t.removeEventListener(i,n),o.appendChild(t),this.childComponent.afterGuiAttached&&(r=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const e=this.createBean(new aMe(this.level+1,this.contextParams));e.setParentComponent(this),e.addMenuItems(this.params.subMenu),o.appendChild(e.getGui()),this.addManagedListeners(e,{closeMenu:e=>this.dispatchLocalEvent(e)}),e.addGuiEventListener("mouseenter",(()=>this.cancelDeactivate())),s=()=>this.destroyBean(e),i&&(r=()=>{e.activateFirstItem(),this.subMenuIsOpening=!1})}const{popupSvc:a}=this,l=this.getLocaleTextFunc(),d=null===a||void 0===a?void 0:a.addPopup({modal:!0,eChild:o,positionCallback:()=>{const e=this.eGui;null===a||void 0===a||a.positionPopupForMenu({eventSource:e,ePopup:o});const{column:t,node:i}=this.contextParams;null===a||void 0===a||a.callPostProcessPopup("subMenu",o,e,n instanceof MouseEvent?n:void 0,t,i)},anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:r});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var e,t;d&&d.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),s(),null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!1),this.eSubMenuGui=void 0},null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!0)}setAriaExpanded(e){this.suppressAria||O(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var t,i;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add("".concat(this.cssClassPrefix,"-active")),null===(t=(i=this.menuItemComp).setActive)||void 0===t||t.call(i,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout((()=>{this.isAlive()&&this.isActive&&this.openSubMenu()}),300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove("".concat(this.cssClassPrefix,"-active")),null===(e=(t=this.menuItemComp).setActive)||void 0===e||e.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,i;null===(t=(i=this.menuItemComp).select)||void 0===t||t.call(i),this.params.action?this.beans.frameworkOverrides.wrapOutgoing((()=>this.params.action(this.gos.addGridCommonParams(l({},this.contextParams))))):this.openSubMenu(e&&"keydown"===e.type,e),this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect||this.closeMenu(e)}closeMenu(e){const t={type:"closeMenu"};e&&(e instanceof MouseEvent?t.mouseEvent=e:t.keyboardEvent=e),this.dispatchLocalEvent(t)}onItemActivated(){const e={type:"menuItemActivated",menuItem:this};this.dispatchLocalEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout((()=>this.activate(!0)),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout((()=>this.deactivate()),this.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var t,i;if(!this.menuItemComp)return void setTimeout((()=>this.configureDefaults(e)));let n=this.menuItemComp.getGui();const{suppressRootStyles:o,suppressTooltip:s,suppressAria:r,suppressTabIndex:a,suppressFocus:l}=e||{},d=null===(t=(i=this.menuItemComp).getRootElement)||void 0===t?void 0:t.call(i);var c;(d&&(o||n.classList.add("ag-menu-option-custom"),n=d),this.eGui=n,this.suppressRootStyles=!!o,this.suppressRootStyles)||(n.classList.add(this.cssClassPrefix),null===(c=this.params.cssClasses)||void 0===c||c.forEach((e=>n.classList.add(e))),this.params.disabled&&n.classList.add("".concat(this.cssClassPrefix,"-disabled")));s||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!r,this.suppressAria||(I(n,"treeitem"),L(n,this.level+1),this.params.disabled&&P(n,!0)),a||n.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(n,e),this.suppressFocus=!!l}refreshTooltip(e,t){if(this.tooltip=e,this.tooltipFeature=this.destroyBean(this.tooltipFeature),!e||!this.menuItemComp)return;const i=this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t});i&&(this.tooltipFeature=this.createBean(i))}destroy(){var e,t;this.tooltipFeature=this.destroyBean(this.tooltipFeature),null===(e=this.menuItemComp)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),super.destroy()}},aMe=class extends Ra{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[],this.params=null!==t&&void 0!==t?t:{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){const t=this.getParentComponent(),i=t&&t.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case Do.UP:case Do.RIGHT:case Do.DOWN:case Do.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case Do.ESCAPE:this.closeIfIsChild()&&fi(e)}}handleFocusIn(e){var t;const i=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(i)&&(this.getGui().contains(i)||null!==(t=this.activeMenuItem)&&void 0!==t&&null!==(t=t.getSubMenuGui())&&void 0!==t&&t.contains(i))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const i=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||null!==(t=this.activeMenuItem.getSubMenuGui())&&void 0!==t&&t.contains(i)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){null!=e&&Rn.all(e.map((e=>"separator"===e?Rn.resolve({eGui:this.createSeparator()}):"string"===typeof e?(pt(228,{menuItemOrString:e}),Rn.resolve({eGui:null})):this.addItem(e)))).then((e=>{(null!==e&&void 0!==e?e:[]).forEach((e=>{null!==e&&void 0!==e&&e.eGui&&(this.appendChild(e.eGui),e.comp&&this.menuItems.push(e.comp))}))}))}addItem(e){const t=this.createManagedBean(new rMe);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some((e=>e.isSubMenuOpen())),level:this.level,contextParams:this.params}).then((()=>(t.setParentComponent(this),this.addManagedListeners(t,{closeMenu:e=>{this.dispatchLocalEvent(e)},menuItemActivated:e=>{this.activeMenuItem&&this.activeMenuItem!==e.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=e.menuItem}}),{comp:t,eGui:t.getGui()})))}activateFirstItem(){const e=this.menuItems.filter((e=>!e.isDisabled()))[0];e&&e.activate()}createSeparator(){return De('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>')}handleNavKey(e){switch(e){case Do.UP:case Do.DOWN:{const t=this.findNextItem(e===Do.UP);return void(t&&t!==this.activeMenuItem&&t.activate())}}e===(this.gos.get("enableRtl")?Do.RIGHT:Do.LEFT)?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return!!(t&&t instanceof rMe)&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0)}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter((e=>!e.isDisabled()));if(!t.length)return;if(!this.activeMenuItem)return e?Gi(t):t[0];let i;e&&t.reverse();let n=!1;for(let o=0;o<t.length;o++){const e=t[o];if(n){i=e;break}e===this.activeMenuItem&&(n=!0)}return n&&!i?t[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},lMe=class extends En{constructor(e,t,i){super('<div class="ag-menu"></div>'),this.column=e,this.mouseEvent=t,this.parentEl=i,this.displayName=null}postConstruct(){const{column:e,beans:{colNames:t}}=this;let i;if(this.initializeProperties(e),i=Ri(e)?t.getDisplayNameForColumn(e,"columnToolPanel"):t.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),this.displayName=i,this.buildMenuItemMap(),this.isActive()){this.mouseEvent.preventDefault();const e=this.getMappedMenuItems();if(0===e.length)return;this.displayContextMenu(e)}}initializeProperties(e){let t;t=Pi(e)?e.getLeafColumns():[e],this.columns=t,this.allowGrouping=t.some((e=>e.isPrimary()&&e.isAllowRowGroup())),this.allowValues=t.some((e=>e.isPrimary()&&e.isAllowValue())),this.allowPivoting=this.beans.colModel.isPivotMode()&&t.some((e=>e.isPrimary()&&e.isAllowPivot()))}buildMenuItemMap(){const e=this.getLocaleTextFunc(),{beans:t,displayName:i}=this,{rowGroupColsSvc:n,valueColsSvc:o,pivotColsSvc:s,colModel:r}=t,a=new Map;this.menuItemMap=a,a.set("rowGroup",{allowedFunction:e=>e.isPrimary()&&e.isAllowRowGroup()&&!nMe(e,t),activeFunction:e=>e.isRowGroupActive(),activateLabel:()=>"".concat(e("groupBy","Group by")," ").concat(i),deactivateLabel:()=>"".concat(e("ungroupBy","Un-Group by")," ").concat(i),activateFunction:()=>null===n||void 0===n?void 0:n.setColumns(this.addColumnsToList(n.columns),"toolPanelUi"),deActivateFunction:()=>null===n||void 0===n?void 0:n.setColumns(this.removeColumnsFromList(n.columns),"toolPanelUi"),addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),a.set("value",{allowedFunction:e=>e.isPrimary()&&e.isAllowValue(),activeFunction:e=>e.isValueActive(),activateLabel:()=>e("addToValues","Add ".concat(i," to values"),[i]),deactivateLabel:()=>e("removeFromValues","Remove ".concat(i," from values"),[i]),activateFunction:()=>null===o||void 0===o?void 0:o.setColumns(this.addColumnsToList(o.columns),"toolPanelUi"),deActivateFunction:()=>null===o||void 0===o?void 0:o.setColumns(this.removeColumnsFromList(o.columns),"toolPanelUi"),addIcon:"valuePanel",removeIcon:"valuePanel"}),a.set("pivot",{allowedFunction:e=>r.isPivotMode()&&e.isPrimary()&&e.isAllowPivot(),activeFunction:e=>e.isPivotActive(),activateLabel:()=>e("addToLabels","Add ".concat(i," to labels"),[i]),deactivateLabel:()=>e("removeFromLabels","Remove ".concat(i," from labels"),[i]),activateFunction:()=>null===s||void 0===s?void 0:s.setColumns(this.addColumnsToList(s.columns),"toolPanelUi"),deActivateFunction:()=>null===s||void 0===s?void 0:s.setColumns(this.removeColumnsFromList(s.columns),"toolPanelUi"),addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(e){return[...e].concat(this.columns.filter((t=>-1===e.indexOf(t))))}removeColumnsFromList(e){return e.filter((e=>-1===this.columns.indexOf(e)))}displayContextMenu(e){const t=this.getGui(),i=this.createBean(new aMe),n=this.getLocaleTextFunc();let o=()=>{};t.appendChild(i.getGui()),i.addMenuItems(e),i.addManagedListeners(i,{closeMenu:()=>{this.parentEl.focus(),o()}});const s=this.beans.popupSvc,r=s.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:()=>Po(i.getGui()),ariaLabel:n("ariaLabelContextMenu","Context Menu"),closedCallback:e=>{e instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(i)}});r&&(o=r.hideFunc),s.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:t})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const e=[],{menuItemMap:t,columns:i,displayName:n,beans:o}=this;for(const s of t.values()){const t=i.some((e=>s.allowedFunction(e)&&!s.activeFunction(e))),r=i.some((e=>s.allowedFunction(e)&&s.activeFunction(e)));t&&e.push({name:s.activateLabel(n),icon:Wr(s.addIcon,o,null),action:()=>s.activateFunction()}),r&&e.push({name:s.deactivateLabel(n),icon:Wr(s.removeIcon,o,null),action:()=>s.deActivateFunction()})}return e}},dMe=class extends En{constructor(e,t,i,n){super(),this.modelItem=e,this.allowDragging=t,this.eventType=i,this.focusWrapper=n,this.cbSelect=Tn,this.eLabel=Tn,this.eGroupOpenedIcon=Tn,this.eGroupClosedIcon=Tn,this.eColumnGroupIcons=Tn,this.processingColumnStateChange=!1;const{columnGroup:o,depth:s,displayName:r}=e;this.columnGroup=o,this.columnDepth=s,this.displayName=r}postConstruct(){this.setTemplate('<div class="ag-column-select-column-group">\n                <span class="ag-column-group-icons" data-ref="eColumnGroupIcons" >\n                    <span class="ag-column-group-closed-icon" data-ref="eGroupClosedIcon"></span>\n                    <span class="ag-column-group-opened-icon" data-ref="eGroupOpenedIcon"></span>\n                </span>\n                <ag-checkbox data-ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n                <span class="ag-column-select-column-label" data-ref="eLabel"></span>\n            </div>',[Zr]);const{beans:e,cbSelect:t,eLabel:i,displayName:n,columnDepth:o,modelItem:s,focusWrapper:r,columnGroup:a}=this,{registry:l,gos:d}=e,c=Wr("columnDrag",e);this.eDragHandle=c,c.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const h=t.getGui(),u=t.getInputElement();h.insertAdjacentElement("afterend",c),u.setAttribute("tabindex","-1"),i.innerHTML=null!==n&&void 0!==n?n:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+o),this.getGui().style.setProperty("--ag-indentation-level",String(o)),this.tooltipFeature=this.createOptionalManagedBean(l.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumnGroup",shouldDisplayTooltip:Ca(d,(()=>i))})),this.addManagedEventListeners({columnPivotModeChanged:this.onColumnStateChanged.bind(this)}),this.addManagedElementListeners(i,{click:this.onLabelClicked.bind(this)}),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedListeners(s,{expandedChanged:this.onExpandChanged.bind(this)}),this.addManagedListeners(r,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip();xo(a.getColGroupDef(),d,null,a).forEach((e=>this.addOrRemoveCssClass(e,!0)))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const t=()=>{var t;return null===(t=this.tooltipFeature)||void 0===t?void 0:t.setTooltipAndRefresh(e.headerTooltip)};t(),this.addManagedEventListeners({newColumnsLoaded:t})}handleKeyDown(e){switch(e.key){case Do.LEFT:e.preventDefault(),this.modelItem.expanded=!1;break;case Do.RIGHT:e.preventDefault(),this.modelItem.expanded=!0;break;case Do.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}}onContextMenu(e){const{columnGroup:t,gos:i}=this;if(i.get("functionsReadOnly"))return;const n=this.createBean(new lMe(t,e,this.focusWrapper));this.addDestroyFunc((()=>{n.isAlive()&&this.destroyBean(n)}))}addVisibilityListenersToAllChildren(){const e=this.onColumnStateChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{this.addManagedListeners(t,{visibleChanged:e,columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e})}))}setupDragging(){if(!this.allowDragging)return void le(this.eDragHandle,!1);const e=this.beans,{gos:t,eventSvc:i,dragAndDrop:n}=e;let o=!t.get("suppressDragLeaveHidesColumns");const s={type:is.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>o?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{o=!t.get("suppressDragLeaveHidesColumns"),i.dispatchEvent({type:"columnPanelItemDragStart",column:this.columnGroup})},onDragStopped:()=>{i.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:t=>{o&&$Se(e,{columns:this.columnGroup.getLeafColumns(),visibleState:null===t||void 0===t?void 0:t.visibleState,pivotState:null===t||void 0===t?void 0:t.pivotState,eventType:this.eventType})},onGridExit:()=>{o&&this.onChangeCommon(!1)}};n.addDragSource(s,!0),this.addDestroyFunc((()=>n.removeDragSource(s)))}createDragItem(){const e=this.columnGroup.getLeafColumns(),t={},i={};return e.forEach((e=>{const n=e.getId();t[n]=e.isVisible(),i[n]=eMe(e)})),{columns:e,visibleState:t,pivotState:i}}setupExpandContract(){const{beans:e,eGroupClosedIcon:t,eGroupOpenedIcon:i,eColumnGroupIcons:n}=this;t.appendChild(Hr("columnSelectClosed",e,null)),i.appendChild(Hr("columnSelectOpen",e,null));const o=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(t,{click:o}),this.addManagedElementListeners(i,{click:o});const s=new Pa(n,!0);this.addManagedListeners(s,{tap:o}),this.addDestroyFunc(s.destroy.bind(s))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=i=>{i.forEach((i=>{i.passesFilter&&(i.group?t(i.children):e.push(i.column))}))};return t(this.modelItem.children),e}onChangeCommon(e){this.refreshAriaLabel(),this.processingColumnStateChange||QSe(this.beans,this.modelItem.children,e,this.eventType)}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:i}=this,n=this.getLocaleTextFunc(),o=n("ariaColumnGroup","Column Group"),s=e.getValue(),r=void 0===s?n("ariaIndeterminate","indeterminate"):s?n("ariaVisible","visible"):n("ariaHidden","hidden"),a=n("ariaToggleVisibility","Press SPACE to toggle visibility");A(t,"".concat(i," ").concat(o)),e.setInputAriaLabel("".concat(a," (").concat(r,")")),E(t,e.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0;const i=this.cbSelect;i.setValue(e),i.setReadOnly(t),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.beans.colModel.isPivotMode(),t=this.getVisibleLeafColumns();let i=0,n=0;if(t.forEach((t=>{!e&&t.getColDef().lockVisible||(this.isColumnChecked(t,e)?i++:n++)})),!(i>0&&n>0))return i>0}workOutReadOnlyValue(){const e=this.beans.colModel.isPivotMode();let t=0;return this.columnGroup.getLeafColumns().forEach((i=>{e?i.isAnyFunctionAllowed()&&t++:i.getColDef().lockVisible||t++})),0===t}isColumnChecked(e,t){if(t){const t=e.isPivotActive(),i=e.isRowGroupActive(),n=e.isValueActive();return t||i||n}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem,t=e.expanded;e.expanded=!t}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.expanded;le(this.eGroupClosedIcon,!e),le(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){O(this.focusWrapper,this.modelItem.expanded)}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect,i=t.getValue();!t.isReadOnly()&&(e&&!i||!e&&i)&&t.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}},cMe=class extends Si{constructor(e,t){super(),this.comp=e,this.virtualList=t}postConstruct(){this.createManagedBean(new nSe(this.comp,this.virtualList,{dragSourceType:is.ToolPanel,listItemDragStartEvent:"columnPanelItemDragStart",listItemDragEndEvent:"columnPanelItemDragEnd",eventSource:this.eventSvc,getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:e=>this.isMoveBlocked(e),getNumRows:e=>e.getDisplayedColsList().length,moveItem:(e,t)=>this.moveItem(this.getCurrentColumnsBeingMoved(e),t)}))}getCurrentDragValue(e){return e.column}getCurrentColumnsBeingMoved(e){return Pi(e)?e.getLeafColumns():e?[e]:[]}isMoveBlocked(e){if(this.gos.get("suppressMovableColumns"))return!0;return!!this.getCurrentColumnsBeingMoved(e).find((e=>{const t=e.getColDef();return!!t.suppressMovable||!!t.lockPosition}))}moveItem(e,t){if(!t)return;const{component:i}=t;let n=null,o="top"===t.position;if(i instanceof dMe){n=i.getColumns()[0],o=!0}else i&&(n=i.column);if(!n)return;const s=this.getMoveTargetIndex({currentColumns:e,lastHoveredColumn:n,isBefore:o});var r;null!=s&&(null===(r=this.beans.colMoves)||void 0===r||r.moveColumns(e,s,"toolPanelUi"))}getMoveTargetIndex(e){const{currentColumns:t,lastHoveredColumn:i,isBefore:n}=e;if(!i||!t)return null;const o=this.beans.colModel.getCols(),s=o.indexOf(i),r=n?s:s+1;return r-this.getMoveDiff(o,t,r)}getMoveDiff(e,t,i){if(!t)return 0;const n=t[0],o=t.length;return e.indexOf(n)<i?o:0}},hMe=class extends En{constructor(e,t,i,n){super(),this.allowDragging=t,this.groupsExist=i,this.focusWrapper=n,this.eLabel=Tn,this.cbSelect=Tn,this.processingColumnStateChange=!1;const{column:o,depth:s,displayName:r}=e;this.column=o,this.columnDept=s,this.displayName=r}postConstruct(){this.setTemplate('<div class="ag-column-select-column">\n                <ag-checkbox data-ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n                <span class="ag-column-select-column-label" data-ref="eLabel"></span>\n            </div>',[Zr]);const{beans:e,cbSelect:t,displayName:i,eLabel:n,columnDept:o,groupsExist:s,column:r,gos:a,focusWrapper:l}=this,d=Wr("columnDrag",e);this.eDragHandle=d,d.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const c=t.getGui(),h=t.getInputElement();c.insertAdjacentElement("afterend",d),h.setAttribute("tabindex","-1");const u=Ho(i);n.innerHTML=u,s&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-".concat(o)),this.getGui().style.setProperty("--ag-indentation-level",String(o)),this.tooltipFeature=this.createOptionalManagedBean(e.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumn",getColDef:()=>r.getColDef(),shouldDisplayTooltip:Ca(a,(()=>n))})),this.setupDragging();const p=this.onColumnStateChanged.bind(this);this.addManagedEventListeners({columnPivotModeChanged:p}),this.addManagedListeners(r,{columnValueChanged:p,columnPivotChanged:p,columnRowGroupChanged:p,visibleChanged:p}),this.addManagedListeners(l,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedElementListeners(n,{click:this.onLabelClicked.bind(this)}),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip();xo(r.getColDef(),a,r,null).forEach((e=>this.addOrRemoveCssClass(e,!0)))}getColumn(){return this.column}setupTooltip(){const e=()=>{var e;return null===(e=this.tooltipFeature)||void 0===e?void 0:e.setTooltipAndRefresh(this.column.getColDef().headerTooltip)};e(),this.addManagedEventListeners({newColumnsLoaded:e})}onContextMenu(e){const{column:t,gos:i}=this;if(i.get("functionsReadOnly"))return;const n=this.createBean(new lMe(t,e,this.focusWrapper));this.addDestroyFunc((()=>{n.isAlive()&&this.destroyBean(n)}))}handleKeyDown(e){e.key===Do.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||JSe(this.beans,[this.column],e,"toolPanelUi"))}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:i}=this,n=this.getLocaleTextFunc(),o=n("ariaColumn","Column"),s=e.getValue()?n("ariaVisible","visible"):n("ariaHidden","hidden"),r=n("ariaToggleVisibility","Press SPACE to toggle visibility");A(t,"".concat(i," ").concat(o)),this.cbSelect.setInputAriaLabel("".concat(r," (").concat(s,")")),E(t,e.getInputElement().id)}setupDragging(){const e=this.eDragHandle;if(!this.allowDragging)return void le(e,!1);const t=this.beans,{gos:i,eventSvc:n,dragAndDrop:o}=t;let s=!i.get("suppressDragLeaveHidesColumns");const r={type:is.ToolPanel,eElement:e,dragItemName:this.displayName,getDefaultIconName:()=>s?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{s=!i.get("suppressDragLeaveHidesColumns"),n.dispatchEvent({type:"columnPanelItemDragStart",column:this.column})},onDragStopped:()=>{n.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:e=>{s&&$Se(t,{columns:[this.column],visibleState:null===e||void 0===e?void 0:e.visibleState,pivotState:null===e||void 0===e?void 0:e.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{s&&this.onChangeCommon(!1)}};o.addDragSource(r,!0),this.addDestroyFunc((()=>o.removeDragSource(r)))}createDragItem(){const e=this.column.getColId(),t={[e]:this.column.isVisible()},i={[e]:eMe(this.column)};return{columns:[this.column],visibleState:t,pivotState:i}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.beans.colModel.isPivotMode();if(e){const e=this.column.isAnyFunctionActive();this.cbSelect.setValue(e)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,i=!0;if(e){const e=this.gos.get("functionsReadOnly"),n=!this.column.isAnyFunctionAllowed();t=!e&&!n,i=t}else{const{enableRowGroup:e,enableValue:n,lockPosition:o,suppressMovable:s,lockVisible:r}=this.column.getColDef();t=!r,i=!!e||!!n||!(!!o||!!s)}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.addOrRemoveCssClass("ag-column-select-column-readonly",!i&&!t),this.cbSelect.setPassive(!1),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect;e!==t.getValue()&&(t.isReadOnly()||t.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){pt(158)}},uMe=class{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}},pMe={selector:"AG-PRIMARY-COLS-LIST",component:class extends En{constructor(){super('<div class="'.concat("ag-column-select-list",'" role="presentation"></div>')),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1}wireBeans(e){this.colModel=e.colModel}destroy(){this.destroyColumnTree(),super.destroy()}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((e=>e())),this.destroyColumnItemFuncs=[]}init(e,t,i){this.params=e,this.allowDragging=t,this.eventType=i,e.suppressSyncLayoutWithGrid||this.addManagedEventListeners({columnMoved:this.onColumnsChanged.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.onColumnsChanged.bind(this)});const n=this.fireSelectionChangedEvent.bind(this);this.addManagedEventListeners({columnPivotChanged:n,columnPivotModeChanged:n,columnRowGroupChanged:n,columnValueChanged:n,columnVisible:n,newColumnsLoaded:n}),this.expandGroupsByDefault=!e.contractColumnSelection;const o=this.createManagedBean(new qwe({cssIdentifier:"column-select",ariaRole:"tree"}));this.virtualList=o,this.appendChild(o.getGui()),o.setComponentCreator(((e,t)=>(L(t,e.depth+1),this.createComponentFromItem(e,t)))),this.colModel.ready&&this.onColumnsChanged(),e.suppressColumnMove||this.createManagedBean(new cMe(this,o))}createComponentFromItem(e,t){const i=this.allowDragging;if(e.group){const n=new dMe(e,i,this.eventType,t);return this.createBean(n),n}const n=new hMe(e,i,this.groupsExist,t);return this.createBean(n),n}onColumnsChanged(){const e=this.params;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!e.initialState);const t=this.getExpandedStates(),i=this.colModel.isPivotMode();!e.suppressSyncLayoutWithGrid&&!i?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:t}=this.params.initialState;return t.forEach((t=>{e[t]=!0})),e}return this.allColsTree?(this.forEachItem((t=>{if(!t.group)return;const i=t.columnGroup;i&&(e[i.getId()]=t.expanded)})),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:t}=this;this.forEachItem((i=>{if(!i.group)return;const n=i.columnGroup;if(n){const o=e[n.getId()];(null!=o||t)&&(i.expanded=!!o)}}))}buildTreeFromWhatGridIsDisplaying(){XSe(this.colModel,this.setColumnLayout.bind(this))}setColumnLayout(e){const t=ZSe(this.colModel,e);this.buildListModel(t),this.groupsExist=e.some((e=>e&&"undefined"!==typeof e.children)),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){var e;const t=this.colModel;this.buildListModel(t.getColDefColTree()),this.groupsExist=!(null===(e=t.colDefCols)||void 0===e||!e.treeDepth)}buildListModel(e){const t=this.onColumnExpanded.bind(this),i=e=>{e.addEventListener("expandedChanged",t);const i=e.removeEventListener.bind(e,"expandedChanged",t);this.destroyColumnItemFuncs.push(i)},n=this.beans.colNames,o=(e,t,i)=>{e.forEach((e=>{Pi(e)?s(e,t,i):r(e,t,i)}))},s=(e,t,s)=>{const r=e.getColGroupDef();if(r&&r.suppressColumnsToolPanel)return;if(e.isPadding())return void o(e.getChildren(),t,s);const a=n.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),l=new qSe(a,e,t,!0,this.expandGroupsByDefault);s.push(l),i(l),o(e.getChildren(),t+1,l.children)},r=(e,t,i)=>{if(e.getColDef()&&e.getColDef().suppressColumnsToolPanel)return;const o=n.getDisplayNameForColumn(e,"columnToolPanel");i.push(new qSe(o,e,t))};this.destroyColumnTree(),o(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=t=>{t.passesFilter&&(this.displayedColsList.push(t),t.group&&t.expanded&&t.children.forEach(e))},t=this.virtualList;this.allColsTree.forEach(e),t.setModel(new uMe(this.displayedColsList));const i=t.getLastFocusedRow();t.refresh(),null!=i&&this.focusRowIfAlive(i),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),i=e("columns","Columns"),n=this.displayedColsList.length;A(this.virtualList.getAriaElement(),"".concat(t," ").concat(n," ").concat(i))}focusRowIfAlive(e){window.setTimeout((()=>{this.isAlive()&&this.virtualList.focusRow(e)}),0)}forEachItem(e){const t=i=>{i.forEach((i=>{e(i),i.group&&t(i.children)}))},i=this.allColsTree;i&&t(i)}doSetExpandedAll(e){this.forEachItem((t=>{t.group&&(t.expanded=e)}))}setGroupsExpanded(e,t){if(!t)return void this.doSetExpandedAll(e);const i=[];this.forEachItem((n=>{if(!n.group)return;const o=n.columnGroup.getId();t.indexOf(o)>=0&&(n.expanded=e,i.push(o))}));const n=t.filter((e=>!i.includes(e)));n.length>0&&pt(157,{unrecognisedGroupIds:n})}getExpandState(){let e=0,t=0;return this.forEachItem((i=>{i.group&&(i.expanded?e++:t++)})),e>0&&t>0?2:t>0?1:0}doSetSelectedAll(e){QSe(this.beans,this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const i=this.colModel.isPivotMode();if(this.forEachItem((n=>{if(n.group)return;if(!n.passesFilter)return;const o=n.column,s=o.getColDef();let r;if(i){if(!o.isAllowPivot()&&!o.isAllowRowGroup()&&!o.isAllowValue())return;r=o.isValueActive()||o.isPivotActive()||o.isRowGroupActive()}else{if(s.lockVisible)return;r=o.isVisible()}r?e++:t++})),!(e>0&&t>0))return!(0===e||t>0)}setFilterText(e){this.filterText=ze(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=e=>{if(!ze(this.filterText))return!0;const t=e.displayName;return null==t||-1!==t.toLowerCase().indexOf(this.filterText)},t=(i,n)=>{let o=!1;if(i.group){const s=e(i);i.children.forEach((e=>{const i=t(e,s||n);i&&(o=i)}))}const s=!(!n&&!o)||e(i);return i.passesFilter=s,s};this.allColsTree.forEach((e=>t(e,!1)))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchLocalEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchLocalEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree?(this.forEachItem((t=>{t.group&&t.expanded&&e.push(t.columnGroup.getId())})),e):e}}},gMe=class extends En{constructor(){super('<div class="ag-column-select">\n            <ag-primary-cols-header data-ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list data-ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',[WSe,pMe]),this.primaryColsHeaderPanel=Tn,this.primaryColsListPanel=Tn,this.registerCSS(".ag-column-select{display:flex;flex:3 1 0px;flex-direction:column;overflow:hidden;position:relative}.ag-column-select-header{align-items:center;display:flex;flex:none;gap:var(--ag-widget-horizontal-spacing);height:var(--ag-header-height);padding-left:var(--ag-widget-container-horizontal-padding);padding-right:var(--ag-widget-container-horizontal-padding);position:relative}.ag-column-select-column,.ag-column-select-column-group{align-items:center;display:flex;gap:var(--ag-widget-horizontal-spacing);height:100%;position:relative;&:where(:not(:last-child)){margin-bottom:var(--ag-widget-vertical-spacing)}}:where(.ag-ltr) .ag-column-select-column,:where(.ag-ltr) .ag-column-select-column-group{padding-left:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}:where(.ag-rtl) .ag-column-select-column,:where(.ag-rtl) .ag-column-select-column-group{padding-right:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-column-select-header-icon{border-radius:var(--ag-border-radius);cursor:pointer;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-column-select-header-filter-wrapper{flex:1 1 auto}.ag-column-select-header-filter{width:100%}.ag-column-select-list{flex:1 1 0px;overflow:hidden}:where(.ag-ltr) .ag-column-select-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}:where(.ag-rtl) .ag-column-select-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly{opacity:.5;pointer-events:none}.ag-column-select-virtual-list-viewport{padding:calc(var(--ag-widget-container-vertical-padding)*.5) 0}.ag-column-select-virtual-list-item{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-column-select-column-label{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-select-checkbox{display:flex}")}init(e,t,i){const{primaryColsHeaderPanel:n,primaryColsListPanel:o}=this;n.init(t);const s=t.suppressColumnFilter,r=t.suppressColumnSelectAll;t.suppressColumnExpandAll&&s&&r&&n.setDisplayed(!1),this.addManagedListeners(o,{groupExpanded:e=>{n.setExpandState(e.state),t.onStateUpdated()},selectionChanged:e=>n.setSelectionState(e.state)}),o.init(t,e,i),this.addManagedListeners(n,{expandAll:o.doSetExpandedAll.bind(o,!0),collapseAll:o.doSetExpandedAll.bind(o,!1),selectAll:o.doSetSelectedAll.bind(o,!0),unselectAll:o.doSetSelectedAll.bind(o,!1),filterChanged:e=>o.setFilterText(e.filterText)}),this.positionableFeature=this.createManagedBean(new Ss(this.getGui(),{minHeight:100}))}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}};function mMe(e,t,i){null!=e&&null!=t&&e.splice(i,0,...t)}var vMe=class extends En{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state="notDragging",this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),I(this.ePillDropList,"listbox"),this.registerCSS(".ag-column-drop{align-items:center;display:inline-flex;overflow:auto;position:relative;width:100%}.ag-column-drop-list{align-items:center;display:flex}.ag-column-drop-cell{align-items:center;background-color:var(--ag-column-drop-cell-background-color);border:var(--ag-column-drop-cell-border);border-radius:500px;color:var(--ag-column-drop-cell-text-color);display:flex;padding:calc(var(--ag-spacing)*.25);position:relative;&:focus-visible{box-shadow:var(--ag-focus-shadow)}:where(.ag-drag-handle){color:var(--ag-column-drop-cell-drag-handle-color)}}:where(.ag-ltr) .ag-column-drop-cell{padding-left:calc(var(--ag-spacing)*.75)}:where(.ag-rtl) .ag-column-drop-cell{padding-right:calc(var(--ag-spacing)*.75)}.ag-column-drop-cell-text{flex:1 1 auto;margin:0 var(--ag-spacing);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-drop-vertical{align-items:stretch;display:flex;flex-direction:column;min-height:75px;overflow:hidden}.ag-column-drop-vertical-title-bar{align-items:center;display:flex;flex:none;padding:var(--ag-widget-container-vertical-padding) calc(var(--ag-spacing)*2) 0}.ag-column-drop-vertical-list{align-items:stretch;flex-direction:column;flex-grow:1;overflow-x:auto;padding-bottom:var(--ag-spacing);padding-left:var(--ag-spacing);padding-right:var(--ag-spacing);position:relative;>*{flex:none}}:where(.ag-column-drop-empty) .ag-column-drop-vertical-list{overflow:hidden}.ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}.ag-column-drop-cell-button{cursor:pointer;min-width:0;opacity:.75;&:hover{opacity:1}}.ag-column-drop-wrapper{display:flex}.ag-column-drop-horizontal-half-width{width:50%!important}.ag-column-drop-cell-ghost{opacity:.5}.ag-column-drop-horizontal{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;white-space:nowrap}:where(.ag-ltr) .ag-column-drop-horizontal{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-column-drop-horizontal{padding-right:var(--ag-cell-horizontal-padding)}.ag-column-drop-horizontal-list{gap:var(--ag-cell-widget-spacing)}.ag-column-drop-vertical-cell{margin-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-icon{margin-right:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-icon{margin-left:var(--ag-widget-horizontal-spacing)}.ag-select-agg-func-popup{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);height:calc(var(--ag-spacing)*5*3.5);padding:0;position:absolute}.ag-select-agg-func-virtual-list-item{cursor:default;&:hover{background-color:var(--ag-selected-row-background-color)}}:where(.ag-ltr) .ag-select-agg-func-virtual-list-item{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-select-agg-func-virtual-list-item{padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-left:1px solid var(--ag-border-color)}")}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:i}=e;return t.contains(i.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach((e=>e())),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,xe(this.getGui()),xe(this.ePillDropList)}init(e){this.params=null!==e&&void 0!==e?e:{},this.createManagedBean(new Ds(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.onKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new Ss(this.getGui()),this.createManagedBean(this.positionableFeature),this.refreshGui(),A(this.ePillDropList,this.getAriaLabel())}onTabKeyDown(e){const t=Lo(this.getFocusableElement(),null,!0),i=t.length;if(0===i)return;const{shiftKey:n}=e,o=Lt(this.beans),s=o===t[0],r=o===Gi(t);1===i||s&&n||r&&!n||t[n?0:i-1].focus()}onKeyDown(e){const{key:t}=e,i=!this.horizontal;let n=t===Do.DOWN,o=t===Do.UP;if(!i){const e=this.gos.get("enableRtl");n=!e&&t===Do.RIGHT||e&&t===Do.LEFT,o=!e&&t===Do.LEFT||e&&t===Do.RIGHT}if(!n&&!o)return;const s=No(this.beans,this.getFocusableElement(),!1,o);s&&(e.preventDefault(),s.focus())}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop".concat(t),"ag-column-drop-".concat(i).concat(t))}setupDropTarget(){var e;this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),onDragCancel:this.onDragCancel.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},null===(e=this.beans.dragAndDrop)||void 0===e||e.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const t=this.getNewInsertIndex(e);if(t<0)return!1;const i=this.minimumAllowedNewInsertIndex(),n=Math.max(i,t),o=n!==this.insertIndex;return o&&(this.insertIndex=n),o}getNewInsertIndex(e){const t=e.event,i=this.horizontal?t.clientX:t.clientY,n=this.childPillComponents.map((e=>e.getGui().getBoundingClientRect())),o=n.findIndex((e=>this.horizontal?e.right>i&&e.left<i:e.top<i&&e.bottom>i));if(-1===o){const e=this.gos.get("enableRtl");if(n.every((e=>i>(this.horizontal?e.right:e.bottom))))return e&&this.horizontal?0:this.childPillComponents.length;return n.every((e=>i<(this.horizontal?e.left:e.top)))?e&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=o?o+1:o}checkDragStartedBySelf(e){"notDragging"===this.state&&(this.state="rearrangeItems",this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const t=this.getItems(e.dragSource.getDragItem());this.state="newItemsIn";const i=t.filter((t=>this.isItemDroppable(t,e))),n=i.every((e=>-1!==this.childPillComponents.map((e=>e.getItem())).indexOf(e)));0!==i.length&&(this.potentialDndItems=i,n?this.state="notDragging":(this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()))}isPotentialDndItems(){var e;return!(null===(e=this.potentialDndItems)||void 0===e||!e.length)}handleDragLeaveEnd(e){}onDragLeave(e){if("rearrangeItems"===this.state){const t=this.getItems(e.dragSource.getDragItem());this.removeItems(t)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragCancel(e){this.isPotentialDndItems()&&("newItemsIn"===this.state&&this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragStop(){this.isPotentialDndItems()&&("newItemsIn"===this.state?this.addItems(this.potentialDndItems):this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}removeItems(e){const t=this.getExistingItems().filter((t=>!e.includes(t)));this.updateItems(t)}addItems(e){if(!e)return;const t=this.getExistingItems().slice(),i=e.filter((e=>t.indexOf(e)<0));mMe(t,i,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){const t=this.getNonGhostItems().slice();return mMe(t,e,this.insertIndex),!zi(t,this.getExistingItems())&&(this.updateItems(t),!0)}refreshGui(){const e=this.ePillDropList.scrollTop,t=this.resizeEnabled,i=this.getFocusedItem(),{eGridDiv:n}=this.beans;let o=No(this.beans,n);o||(o=No(this.beans,n,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.horizontal||(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),Eo()&&this.restoreFocus(i,o)}getFocusedItem(){const e=this.getGui(),t=Lt(this.beans);if(!e.contains(t))return-1;return Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t)}restoreFocus(e,t){const i=this.getGui(),n=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(-1===e)return;0===n.length&&t.focus();const o=n[Math.min(n.length-1,e)];o&&o.focus()}focusList(e){const t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter((e=>!this.potentialDndItems.includes(e))):e}addItemsToGui(){const e=this.getNonGhostItems().map((e=>this.createItemComponent(e,!1)));if(this.isPotentialDndItems()){const t=this.potentialDndItems.map((e=>this.createItemComponent(e,!0)));this.insertIndex>=e.length?e.push(...t):e.splice(this.insertIndex,0,...t)}this.appendChild(this.ePillDropList),e.forEach(((e,t)=>{t>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(e.getGui())})),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach(((e,t)=>{const i=e.getGui();z(i,t+1),G(i,this.childPillComponents.length)}))}createItemComponent(e,t){const i=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return i.addEventListener("columnRemove",this.removeItems.bind(this,[e])),this.createBean(i),this.guiDestroyFunctions.push((()=>this.destroyBean(i))),t||this.childPillComponents.push(i),i}addIconAndTitleToGui(){const{title:e,icon:t}=this.params;if(!e||!t)return;const i=document.createElement("div");if(N(i,!0),this.addElementClasses(i,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),i.appendChild(t),!this.horizontal){const t=document.createElement("span");this.addElementClasses(t,"title"),t.innerHTML=e,i.appendChild(t)}this.appendChild(i)}isExistingItemsEmpty(){return 0===this.getExistingItems().length}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const t=document.createElement("span");t.innerHTML=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){const t=Wr(this.gos.get("enableRtl")?"panelDelimiterRtl":"panelDelimiter",this.beans);this.addElementClasses(t,"cell-separator"),e.appendChild(t)}}},fMe=class extends En{constructor(e,t,i,n,o){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=i,this.template=n,this.agComponents=o,this.eText=Tn,this.eDragHandle=Tn,this.eButton=Tn}postConstruct(){var e;this.setTemplate(null!==(e=this.template)&&void 0!==e?e:'\n            <span role="option">\n              <span data-ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n              <span data-ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n              <span data-ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n            </span>',this.agComponents);const t=this.getGui(),{beans:i,eDragHandle:n,eText:o,eButton:s}=this;this.addElementClasses(t),this.addElementClasses(n,"drag-handle"),this.addElementClasses(o,"text"),this.addElementClasses(s,"button"),n.appendChild(Wr("columnDrag",i)),s.appendChild(Wr("cancel",i)),this.tooltipFeature=this.createOptionalManagedBean(i.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui()})),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),A(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){const i=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(i)}}setupTooltip(){const e=()=>{var e;return null===(e=this.tooltipFeature)||void 0===e?void 0:e.setTooltipAndRefresh(this.getTooltip())};e(),this.addManagedEventListeners({newColumnsLoaded:e})}getDragSourceId(){}getDefaultIconName(){return"notAllowed"}addDragSource(){const{beans:{dragAndDrop:e},eDragHandle:t}=this,i=this.createGetDragItem(),n=this.getDefaultIconName(),o={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>n,getDragItem:i,dragItemName:this.getDisplayName()};null===e||void 0===e||e.addDragSource(o,!0),this.addDestroyFunc((()=>null===e||void 0===e?void 0:e.removeDragSource(o)))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){le(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:"columnRemove"};this.addGuiEventListener("keydown",(e=>this.onKeyDown(e))),this.addManagedElementListeners(this.eButton,{click:t=>{this.dispatchLocalEvent(e),t.stopPropagation()}});const t=new Pa(this.eButton);this.addManagedListeners(t,{tap:()=>this.dispatchLocalEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}onKeyDown(e){e.key===Do.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchLocalEvent({type:"columnRemove"}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const e=Ho(this.getDisplayValue());this.eText.innerHTML=e}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell".concat(t),"ag-column-drop-".concat(i,"-cell").concat(t))}destroy(){super.destroy(),this.dragSourceDropTarget=null}},yMe=class extends fMe{constructor(e,t,i,n,o){super(t,i,o),this.column=e,this.dropZonePurpose=n,this.eSortIndicator=Tn,this.popupShowing=!1}postConstruct(){const{sortSvc:e,colNames:t}=this.beans;this.template='\n            <span role="option">\n                <span data-ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n                <span data-ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n                '.concat(e?'<ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>':"",'\n                <span data-ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n            </span>\n        '),e&&(this.agComponents=[e.getSortIndicatorSelector()]),this.displayName=t.getDisplayNameForColumn(this.column,"columnDrop"),super.postConstruct(),e&&(this.setupSort(),this.addManagedEventListeners({sortChanged:()=>{this.setupAria()}})),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",(()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()}))}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(e,t){const i=this.gos.get("rowGroupPanelSuppressSort"),n=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!n){const i=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");e.push(i)}if(this.isGroupingZone()&&this.column.isSortable()&&!i){const i=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");e.push(i)}super.addAdditionalAriaInstructions(e,t)}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){const e=this.getLocaleTextFunc(),{name:t,aggFuncName:i}=this.getColumnAndAggFuncName(),n=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),o={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},s=this.column.getSort(),r=this.gos.get("rowGroupPanelSuppressSort");return[i&&"".concat(i).concat(n),t,this.isGroupingZone()&&!r&&s&&", ".concat(o[s])].filter((e=>!!e)).join("")}getColumnAndAggFuncName(){const e=this.displayName;let t="";if(this.isAggregationZone()){const e=this.column.getAggFunc(),i="string"===typeof e?e:"agg";t=this.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:t}}setupSort(){if(this.column.isSortable()&&this.isGroupingZone()&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const e=e=>{e.preventDefault(),this.beans.sortSvc.progressSortFromEvent(this.column,e)};this.addGuiEventListener("click",e),this.addGuiEventListener("keydown",(t=>{t.key===Do.ENTER&&this.isGroupingZone()&&e(t)}))}}getDefaultIconName(){return"hide"}createGetDragItem(){const{column:e}=this;return()=>{const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(e){super.onKeyDown(e);e.key===Do.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(e.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){const{name:e,aggFuncName:t}=this.getColumnAndAggFuncName();return this.isAggregationZone()?"".concat(t,"(").concat(e,")"):e}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const{aggFuncSvc:e,popupSvc:t}=this.beans,i=new qwe({cssIdentifier:"select-agg-func"}),n=e.getFuncNames(this.column),o=this.getGui(),s=i.getGui();i.setModel({getRow:function(e){return n[e]},getRowCount:function(){return n.length}}),this.createBean(i);const r=De('<div class="ag-select-agg-func-popup"></div>');r.style.top="0px",r.style.left="0px",r.appendChild(s),r.style.width="".concat(o.clientWidth,"px");const[a]=this.addManagedElementListeners(r,{focusout:e=>{!r.contains(e.relatedTarget)&&d&&d.hideFunc()}}),l=this.getLocaleTextFunc(),d=t.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:e=>{this.destroyBean(i),this.popupShowing=!1,"Escape"===(null===e||void 0===e?void 0:e.key)&&o.focus(),a&&a()},ariaLabel:l("ariaLabelAggregationFunction","Aggregation Function")});d&&i.setComponentCreator(this.createAggSelect.bind(this,d.hideFunc)),i.addGuiEventListener("keydown",(e=>{if(e.key===Do.ENTER||e.key===Do.SPACE){const e=i.getLastFocusedRow();if(null==e)return;const t=i.getComponentAt(e);t&&t.selectItem()}})),t.positionPopupByComponent({type:"aggFuncSelect",eventSource:o,ePopup:r,keepWithinBounds:!0,column:this.column,position:"under"}),i.refresh();let c=n.findIndex((e=>e===this.column.getAggFunc()));-1===c&&(c=0),i.focusRow(c)}createAggSelect(e,t){const i=this.getLocaleTextFunc(),n=t.toString(),o=i(n,n);return new bMe((()=>{var i,n;e(),this.getGui().focus(),null===(i=this.beans.valueColsSvc)||void 0===i||null===(n=i.setColumnAggFunc)||void 0===n||n.call(i,this.column,t,"toolPanelDragAndDrop")}),o)}isGroupingAndLocked(){return this.isGroupingZone()&&nMe(this.column,this.beans)}isAggregationZone(){return"aggregation"===this.dropZonePurpose}isGroupingZone(){return"rowGroup"===this.dropZonePurpose}getDragSourceType(){return is.ToolPanel}destroy(){super.destroy(),this.column=null}},bMe=class extends En{constructor(e,t){super('<div class="ag-select-agg-func-item"/>'),this.selectItem=e,this.getGui().innerText=t,this.addGuiEventListener("click",this.selectItem)}},CMe=class extends vMe{constructor(e,t){super(e),this.dropZonePurpose=t,this.addElementClasses(this.getGui(),this.dropZonePurpose.toLowerCase())}init(e){super.init(e),this.addManagedEventListeners({newColumnsLoaded:this.refreshGui.bind(this)}),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(e){var t;return null!==(t=e.columns)&&void 0!==t?t:[]}isInterestedIn(e){return e===is.HeaderCell||e===is.ToolPanel}minimumAllowedNewInsertIndex(){var e;const{gos:t,rowGroupColsSvc:i}=this.beans,n=t.get("groupLockGroupColumns"),o=null!==(e=null===i||void 0===i?void 0:i.columns.length)&&void 0!==e?e:0;return-1===n?o:Math.min(n,o)}showOrHideColumnOnExit(e){return this.isRowGroupPanel()&&Kt(this.gos,!0)&&!e.fromNudge}handleDragEnterEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem().columns;this.setColumnsVisible(t,!1,"uiColumnDragged")}}handleDragLeaveEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem();this.setColumnsVisible(t.columns,!0,"uiColumnDragged")}}setColumnsVisible(e,t,i){if(e){const n=e.filter((e=>!e.getColDef().lockVisible));this.beans.colModel.setColsVisible(n,t,i)}}isRowGroupPanel(){return"rowGroup"===this.dropZonePurpose}createPillComponent(e,t,i,n){return new yMe(e,t,i,this.dropZonePurpose,n)}},xMe=class extends CMe{constructor(e){super(e,"pivot")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),i=e("pivots","Column Labels");super.init({icon:Wr("pivotPanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({newColumnsLoaded:this.refresh.bind(this),columnPivotChanged:this.refresh.bind(this),columnPivotModeChanged:this.checkVisibility.bind(this)}),this.refresh()}getAriaLabel(){return this.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const e=this.beans.colModel,t=e.isPivotMode();if(this.horizontal)switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":{const i=e.isPivotActive();this.setDisplayed(t&&i);break}default:this.setDisplayed(!1)}else this.setDisplayed(t)}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.pivotColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"pivot":"notAllowed"}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.pivotColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},wMe=class extends CMe{constructor(e){super(e,"rowGroup")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),i=e("groups","Row Groups");super.init({icon:Wr("rowGroupPanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({columnRowGroupChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.rowGroupColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"group":"notAllowed"}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.rowGroupColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},SMe=class extends CMe{constructor(e){super(e,"aggregation")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("valueColumnsEmptyMessage","Drag here to aggregate"),i=e("values","Values");super.init({icon:Wr("valuePanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({columnValueChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getIconName(){return this.isPotentialDndItems()?"aggregate":"notAllowed"}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowValue()&&(!e.isValueActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.valueColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.valueColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},MMe=class extends En{constructor(){super(...arguments),this.cbPivotMode=Tn}createTemplate(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button data-ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'}postConstruct(){this.setTemplate(this.createTemplate(),[na]);const e=this.cbPivotMode,{colModel:t,ctrlsSvc:i,gos:n}=this.beans;e.setValue(t.isPivotMode());const o=this.getLocaleTextFunc();e.setLabel(o("pivotMode","Pivot Mode"));const s=()=>{const i=t.isPivotMode();e.setValue(i)};this.addManagedListeners(e,{fieldValueChanged:()=>{const o=!!e.getValue();o!==t.isPivotMode()&&(n.updateGridOptions({options:{pivotMode:o},source:"toolPanelUi"}),i.getHeaderRowContainerCtrls().forEach((e=>e.refresh())))}}),this.addManagedEventListeners({newColumnsLoaded:s,columnPivotModeChanged:s})}},DMe={moduleName:"ColumnsToolPanel",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="colToolPanelFactory"}setPanelVisible(e,t,i){return e?e.setDisplayed(t):t&&(e=i()),e}createRowGroupPanel(e,t){return this.createPanel(e,t,new wMe(!1))}createValuesPanel(e,t){return this.createPanel(e,t,new SMe(!1))}createPivotPanel(e,t){return this.createPanel(e,t,new xMe(!1))}createPivotModePanel(e,t,i){return this.createPanel(e,t,new MMe,i)}createPanel(e,t,i,n){return i=e.createBean(i),t.push((()=>e.destroyBean(i))),n?e.prependChild(i):e.appendChild(i),i}}],userComponents:{agColumnsToolPanel:class extends En{constructor(){super('<div class="ag-column-panel"></div>'),this.initialised=!1,this.childDestroyFuncs=[],this.registerCSS(".ag-column-panel{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.ag-pivot-mode-panel{display:flex;height:var(--ag-header-height)}.ag-pivot-mode-select{align-items:center;display:flex}:where(.ag-ltr) .ag-pivot-mode-select{margin-left:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-pivot-mode-select{margin-right:var(--ag-widget-container-horizontal-padding)}.ag-column-panel-column-select{border-bottom:var(--ag-tool-panel-separator-border)}.ag-column-panel-column-select:where(:nth-child(n+2 of :not(.ag-hidden))){border-top:var(--ag-tool-panel-separator-border)}:where(.ag-column-panel) .ag-column-drop-vertical{flex:1 1 0px;min-height:50px;&:where(:not(.ag-last-column-drop)){border-bottom:var(--ag-tool-panel-separator-border)}}")}wireBeans(e){this.colToolPanelFactory=e.colToolPanelFactory}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){const t=l(l({},this.gos.addGridCommonParams({suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1})),e);this.params=t;const{childDestroyFuncs:i,colToolPanelFactory:n,gos:o}=this,s=o.isModuleRegistered("SharedPivot"),r=s||o.isModuleRegistered("SharedRowGrouping");!t.suppressPivotMode&&n&&s&&(this.pivotModePanel=n.createPivotModePanel(this,i));const a=this.createBean(new gMe);if(this.primaryColsPanel=a,i.push((()=>this.destroyBean(this.primaryColsPanel))),a.init(!0,t,"toolPanelUi"),a.addCssClass("ag-column-panel-column-select"),this.appendChild(a),n){!t.suppressRowGroups&&r&&(this.rowGroupDropZonePanel=n.createRowGroupPanel(this,i)),!t.suppressValues&&r&&(this.valuesDropZonePanel=n.createValuesPanel(this,i)),!t.suppressPivots&&s&&(this.pivotDropZonePanel=n.createPivotPanel(this,i)),this.setLastVisible();const[e]=this.addManagedEventListeners({columnPivotModeChanged:()=>{this.resetChildrenHeight(),this.setLastVisible()}});i.push((()=>e()))}this.initialised=!0}setPivotModeSectionVisible(e){const t=this.colToolPanelFactory;t&&(this.pivotModePanel=t.setPanelVisible(this.pivotModePanel,e,t.createPivotModePanel.bind(t,this,this.childDestroyFuncs,!0)),this.setLastVisible())}setRowGroupsSectionVisible(e){const t=this.colToolPanelFactory;t&&(this.rowGroupDropZonePanel=t.setPanelVisible(this.rowGroupDropZonePanel,e,t.createRowGroupPanel.bind(t,this,this.childDestroyFuncs)),this.setLastVisible())}setValuesSectionVisible(e){const t=this.colToolPanelFactory;t&&(this.valuesDropZonePanel=t.setPanelVisible(this.valuesDropZonePanel,e,t.createValuesPanel.bind(t,this,this.childDestroyFuncs)),this.setLastVisible())}setPivotSectionVisible(e){var t;const i=this.colToolPanelFactory;i&&(this.pivotDropZonePanel=i.setPanelVisible(this.pivotDropZonePanel,e,i.createPivotPanel.bind(i,this,this.childDestroyFuncs)),null===(t=this.pivotDropZonePanel)||void 0===t||t.setDisplayed(e),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((e=>{if(!e)return;const t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))}))}setLastVisible(){const e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach((e=>e.classList.remove("ag-last-column-drop")));const t=Gi(e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"));t&&t.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){const e=this.getGui().children;for(let t=0;t<e.length;t++){const{style:i}=e[t];i.removeProperty("height"),i.removeProperty("flex")}}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){const e=this.childDestroyFuncs;e.forEach((e=>e())),e.length=0,xe(this.getGui())}refresh(e){return this.destroyChildren(),this.init(e),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}}},icons:{columnsToolPanel:"columns",menuAddRowGroup:"group",menuRemoveRowGroup:"group",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},dependsOn:[Rwe,_Se,bl,al,Lh,HSe]},kMe=class{constructor(e,t,i){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=i}getMenuItem(){var e=this;const t=this.getLocaleTextFunc(),i=function(i,n,o,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,n),action:()=>e.chartSvc.createPivotChart({chartType:o}),_key:s,_enterprise:r}};return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","pivotPie"),i("donut","Donut&lrm;","donut","pivotDonut")]},{_key:"pivotLineChart",name:t("lineChart","Line"),subMenu:[i("lineChart","Line&lrm;","line","pivotLineChart"),i("stackedLine","Stacked&lrm;","stackedLine","pivotStackedLine"),i("normalizedLine","100% Stacked&lrm;","normalizedLine","pivotNormalizedLine")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[i("areaChart","Area&lrm;","area","pivotArea"),i("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","pivotScatter"),i("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:t("statisticalChart","Statistical"),subMenu:[i("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),i("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:Wr("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart",stackedLine:"pivotStackedLine",normalizedLine:"pivotNormalizedLine"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}}},IMe=class{constructor(e,t,i){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=i}getMenuItem(){var e=this;const t=this.getLocaleTextFunc(),i=function(i,n,o,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,n),action:()=>e.chartSvc.createChartFromCurrentRange(o),_key:s,_enterprise:r}};return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","rangePie"),i("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},{name:t("lineChart","Line"),subMenu:[i("lineChart","Line&lrm;","line","rangeLineChart"),i("stackedLine","Stacked&lrm;","stackedLine","rangeStackedLine"),i("normalizedLine","100% Stacked&lrm;","normalizedLine","rangeNormalizedLine")],_key:"rangeLineChart"},{name:t("areaChart","Area"),subMenu:[i("areaChart","Area&lrm;","area","rangeArea"),i("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","rangeScatter"),i("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("polarChart","Polar"),subMenu:[i("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),i("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),i("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),i("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),i("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:t("statisticalChart","Statistical"),subMenu:[i("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),i("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),i("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),i("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemap","Treemap&lrm;","treemap","rangeTreemap"),i("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:t("specializedChart","Specialized"),subMenu:[i("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),i("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:Wr("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart",stackedLine:"rangeStackedLine",normalizedLine:"rangeNormalizedLine"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},AMe="separator";function TMe(e,t){if(e)for(let i=e.length-2;i>=0;i--){const n=e[i]===t,o=e[i+1]===t;n&&o&&e.splice(i+1,1)}}function EMe(e,t,i,n){let o;if(e.isPrimary())o=e;else{const t=e.getColDef().pivotValueColumn;o=ze(t)?t:void 0}const s=[];if(o){const e=o.isValueActive(),r=t.getFuncNames(o);s.push({name:n("noAggregation","None"),action:()=>{i.removeColumns([o],"contextMenu"),i.setColumnAggFunc(o,void 0,"contextMenu")},checked:!e}),r.forEach((r=>{s.push({name:n(r,t.getDefaultFuncLabel(r)),action:()=>{i.setColumnAggFunc(o,r,"contextMenu"),i.addColumns([o],"contextMenu")},checked:e&&o.getAggFunc()===r})}))}return s}var RMe="ag-context-menu-open",LMe=class extends En{constructor(e,t,i,n){super('<div class="'.concat("ag-menu",'" role="presentation"></div>')),this.menuItems=e,this.column=t,this.node=i,this.value=n,this.menuList=null,this.focusedCell=null}postConstruct(){const e=this.createManagedBean(new aMe(0,{column:this.column,node:this.node,value:this.value})),t=this.beans.menuItemMapper.mapWithStockItems(this.menuItems,null,(()=>this.getGui()),"contextMenu");e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",(e=>this.dispatchLocalEvent(e)))}afterGuiAttached(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.beans.focusSvc.getFocusedCell();const t=this.menuList;t&&Po(t.getGui())}restoreFocusedCell(){const{beans:e,focusedCell:t}=this,i=e.focusSvc,n=i.getFocusedCell();if(n&&t&&ss(n,t)){const{rowIndex:n,rowPinned:o,column:s}=t;Ft(e)&&i.setFocusedCell({rowIndex:n,column:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!Eo()})}}destroy(){this.restoreFocusedCell(),super.destroy()}};var PMe=class extends Ra{constructor(e){var t;super((t=e.cssClass,'<div class="ag-tabs '.concat(t,'">\n        <div data-ref="eHeader"></div>\n        <div data-ref="eBody" role="presentation" class="ag-tabs-body ').concat(t?"".concat(t,"-body"):"",'"></div>\n    </div>'))),this.eHeader=Tn,this.eBody=Tn,this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach((e=>this.addItem(e))),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc((()=>{var e,t;return null===(e=this.activeItem)||void 0===e||null===(e=e.tabbedItem)||void 0===e||null===(t=e.afterDetachedCallback)||void 0===t?void 0:t.call(e)}))}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,i=(e,i)=>{e.classList.add("ag-tabs-".concat(i)),t&&e.classList.add("".concat(t,"-").concat(i))};e?(this.setupCloseButton(i),this.eTabHeader=Tt(this.beans).createElement("div"),i(this.eHeader,"header-wrapper"),I(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,I(this.eTabHeader,"tablist"),i(this.eTabHeader,"header")}setupCloseButton(e){const t=Tt(this.beans),i=t.createElement("button");e(i,"close-button");const n=Wr("close",this.beans);A(i,this.params.closeButtonAriaLabel),i.appendChild(n),this.addManagedElementListeners(i,{click:()=>{var e,t;return null===(e=(t=this.params).onCloseClicked)||void 0===e?void 0:e.call(t)}});const o=t.createElement("div");e(o,"close-button-wrapper"),I(o,"presentation"),o.appendChild(i),this.eHeader.appendChild(o),this.eCloseButton=i}handleKeyDown(e){switch(e.key){case Do.RIGHT:case Do.LEFT:{if(!this.eTabHeader.contains(Lt(this.beans)))return;const t=e.key===Do.RIGHT,i=this.gos.get("enableRtl"),n=this.items.indexOf(this.activeItem),o=t!==i?Math.min(n+1,this.items.length-1):Math.max(n-1,0);if(n===o)return;e.preventDefault();const s=this.items[o];this.showItemWrapper(s),s.eHeaderButton.focus();break}case Do.UP:case Do.DOWN:e.stopPropagation()}}onTabKeyDown(e){if(e.defaultPrevented)return;const{beans:t,eHeader:i,eBody:n,activeItem:o,params:s}=this,{suppressTrapFocus:r,enableCloseButton:a}=s,l=Lt(t),d=e.target,c=e.shiftKey;if(i.contains(l)){var h,u;if(e.preventDefault(),!a||!c||null!==(h=this.eCloseButton)&&void 0!==h&&h.contains(l))if(r&&c){var p;null===(p=ISe(Tt(t).body,d))||void 0===p||p.focus()}else this.focusBody(e.shiftKey);else null===(u=this.eCloseButton)||void 0===u||u.focus();return}let g=null;if(ASe(n,d)&&(c&&(g=ISe(n,d)),g||r||(g=o.eHeaderButton)),g||!n.contains(l)||(g=No(t,n,!1,c),g))g&&(e.preventDefault(),g.focus());else if(r&&!c)this.forceFocusOutOfContainer(c);else if(a&&!c){var m;e.preventDefault(),null===(m=this.eCloseButton)||void 0===m||m.focus()}else e.preventDefault(),this.focusHeader()}focusInnerElement(e){e?this.focusBody(!0):this.focusHeader()}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){Po(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");I(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eTabHeader.appendChild(t),A(t,e.titleLabel);const i={tabbedItem:e,eHeaderButton:t};this.items.push(i),t.addEventListener("click",this.showItemWrapper.bind(this,i))}showItem(e){const t=this.items.find((t=>t.tabbedItem===e));t&&this.showItemWrapper(t)}showItemWrapper(e){var t,i;const{tabbedItem:n,eHeaderButton:o}=e;if(null===(t=(i=this.params).onItemClicked)||void 0===t||t.call(i,{item:n}),this.activeItem!==e){var s,r;if(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),xe(this.eBody),n.bodyPromise.then((e=>{this.eBody.appendChild(e);const t=!Eo();if(this.params.suppressFocusBodyOnOpen||Po(this.eBody,!1,t),n.afterAttachedCallback&&n.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const t=n.getScrollableContainer&&n.getScrollableContainer()||e;[this.lastScrollListener]=this.addManagedElementListeners(t,{scroll:()=>{this.tabbedItemScrollMap.set(n.name,t.scrollTop)}});const i=this.tabbedItemScrollMap.get(n.name);void 0!==i&&setTimeout((()=>{t.scrollTop=i}),0)}})),this.activeItem)this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(s=(r=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===s||s.call(r);o.classList.add("ag-tab-selected"),this.activeItem=e}else{var a,l;null===(a=(l=this.params).onActiveItemClicked)||void 0===a||a.call(l)}}},NMe="filterMenuTab",FMe="generalMenuTab",OMe="columnsMenuTab",BMe=[FMe,NMe,OMe],GMe=class extends Si{constructor(e,t,i,n,o){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=i,this.restrictTo=n,this.sourceElement=o,this.tabFactories={},this.includeChecks={};const{tabFactories:s,includeChecks:r}=this;s[FMe]=this.createMainPanel.bind(this),s[NMe]=this.createFilterPanel.bind(this),s[OMe]=this.createColumnsPanel.bind(this),r[FMe]=()=>!0,r[NMe]=()=>{var t;return!!e&&!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))},r[OMe]=()=>!0}postConstruct(){var e;const t=this.getTabsToCreate().map((e=>this.createTab(e))),i=new PMe({items:t,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)});this.tabbedLayout=this.createBean(i),null===(e=this.mainMenuList)||void 0===e||e.setParentComponent(i),this.addDestroyFunc((()=>this.destroyBean(i)))}getTabsToCreate(){var e,t;return this.restrictTo?this.restrictTo:(null!==(e=null===(t=this.column)||void 0===t?void 0:t.getColDef().menuTabs)&&void 0!==e?e:BMe).filter((e=>this.isValidMenuTabItem(e)&&this.isNotSuppressed(e)))}isValidMenuTabItem(e){let t=!0,i=BMe;return null!=this.restrictTo&&(t=this.restrictTo.indexOf(e)>-1,i=this.restrictTo),t=t&&BMe.indexOf(e)>-1,t||pt(175,{menuTabName:e,itemsToConsider:i}),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){const{tabItemColumns:t,tabbedLayout:i,tabItemFilter:n,tabItemGeneral:o}=this;t&&e===OMe?i.showItem(t):n&&e===NMe?i.showItem(n):o&&e===FMe?i.showItem(o):i.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=OMe;break;case this.tabItemFilter:t=NMe;break;case this.tabItemGeneral:t=FMe}t&&this.activateTab(t)}activateTab(e){const t={type:"tabSelected",key:e};this.dispatchLocalEvent(t)}createMainPanel(){const{beans:e,column:t}=this,i=e.colMenuFactory,n=i.createMenu(this,i.getMenuItems(t),this.column,(()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()}));this.mainMenuList=n,n.addEventListener("closeMenu",this.onHidePopup.bind(this));const o={title:Wr("legacyMenu",e,t),titleLabel:FMe.replace("MenuTab",""),bodyPromise:Rn.resolve(n.getGui()),name:FMe};return this.tabItemGeneral=o,o}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.createBean(new bs(this.column,"COLUMN_MENU")):null;this.filterComp=e,null!==e&&void 0!==e&&e.hasFilter()||gt(119);return this.tabItemFilter={title:Wr("filterTab",this.beans,this.column),titleLabel:NMe.replace("MenuTab",""),bodyPromise:Rn.resolve(null===e||void 0===e?void 0:e.getGui()),afterAttachedCallback:t=>null===e||void 0===e?void 0:e.afterGuiAttached(t),afterDetachedCallback:()=>null===e||void 0===e?void 0:e.afterGuiDetached(),name:NMe},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const{beans:t,column:i}=this,n=t.colChooserFactory.createColumnSelectPanel(this,i).getGui();n.classList.add("ag-menu-column-select"),e.appendChild(n);const o={title:Wr("columns",t,i),titleLabel:OMe.replace("MenuTab",""),bodyPromise:Rn.resolve(e),name:OMe};return this.tabItemColumns=o,o}afterGuiAttached(e){const{container:t,hidePopup:i}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:i}),i&&(this.hidePopupFunc=i,this.addDestroyFunc(i))}getGui(){return this.tabbedLayout.getGui()}destroy(){super.destroy(),this.destroyBean(this.filterComp)}},zMe=class extends En{constructor(e,t,i,n){super('\n            <div data-ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>\n        '),this.menuItems=e,this.column=t,this.restoreFocusParams=i,this.sourceElement=n,this.eColumnMenu=Tn}postConstruct(){const e=this.beans.colMenuFactory.createMenu(this,this.menuItems,this.column,(()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()}));this.mainMenuList=e,e.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(e.getGui())}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached(e){let{hidePopup:t}=e;t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),Po(this.mainMenuList.getGui())}};var _Me={moduleName:"MenuCore",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="menuItemMapper"}mapWithStockItems(e,t,i,n){if(!e)return[];const o=[],s=this.getLocaleTextFunc(),{beans:r,gos:a}=this,{validation:d,pinnedCols:c,colAutosize:h,aggFuncSvc:u,rowGroupColsSvc:p,colNames:g,colModel:m,clipboardSvc:v,expansionSvc:f,focusSvc:y,csvCreator:b,excelCreator:C,menuSvc:x,colChooserFactory:w,sortSvc:S,chartMenuItemMapper:M,valueColsSvc:D}=r;return e.forEach((e=>{let k;if(k="string"===typeof e?((e,t,i,n)=>{switch(null===d||void 0===d||d.validateMenuItem(e),e){case"pinSubMenu":return c&&t?{name:s("pinColumn","Pin Column"),icon:Wr("menuPin",r,null),subMenu:["clearPinned","pinLeft","pinRight"]}:null;case"pinLeft":return c&&t?{name:s("pinLeft","Pin Left"),action:()=>c.setColsPinned([t],"left",n),checked:!!t&&t.isPinnedLeft()}:null;case"pinRight":return c&&t?{name:s("pinRight","Pin Right"),action:()=>c.setColsPinned([t],"right",n),checked:!!t&&t.isPinnedRight()}:null;case"clearPinned":return c&&t?{name:s("noPin","No Pin"),action:()=>c.setColsPinned([t],null,n),checked:!!t&&!t.isPinned()}:null;case"valueAggSubMenu":return u&&D&&(null!==t&&void 0!==t&&t.isPrimary()||null!==t&&void 0!==t&&t.getColDef().pivotValueColumn)?{name:s("valueAggregation","Value Aggregation"),icon:Wr("menuValue",r,null),subMenu:EMe(t,u,D,s),disabled:a.get("functionsReadOnly")}:null;case"autoSizeThis":return h?{name:s("autosizeThisColumn","Autosize This Column"),action:()=>h.autoSizeColumn(t,n,a.get("skipHeaderOnAutoSize"))}:null;case"autoSizeAll":return h?{name:s("autosizeAllColumns","Autosize All Columns"),action:()=>h.autoSizeAllColumns(n,a.get("skipHeaderOnAutoSize"))}:null;case"rowGroup":return p?{name:s("groupBy","Group by")+" "+Ho(g.getDisplayNameForColumn(t,"header")),disabled:a.get("functionsReadOnly")||(null===t||void 0===t?void 0:t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup),action:()=>p.addColumns([t],n),icon:Wr("menuAddRowGroup",r,null)}:null;case"rowUnGroup":if(p&&a.isModuleRegistered("SharedRowGrouping")){const e=null===t||void 0===t?void 0:t.getColDef().showRowGroup,i=a.get("groupLockGroupColumns");let l,d,c;var o;if(!0===e)l=s("ungroupAll","Un-Group All"),d=a.get("functionsReadOnly")||-1===i||i>=(null!==(o=p.columns.length)&&void 0!==o?o:0),c=()=>p.setColumns(p.columns.slice(0,i),n);else if("string"===typeof e){const t=m.getColDefCol(e),i=null!=t?Ho(g.getDisplayNameForColumn(t,"header")):e;l=s("ungroupBy","Un-Group by")+" "+i,d=a.get("functionsReadOnly")||nMe(t,r),c=()=>{p.removeColumns([e],n)}}else l=s("ungroupBy","Un-Group by")+" "+Ho(g.getDisplayNameForColumn(t,"header")),d=a.get("functionsReadOnly")||!(null!==t&&void 0!==t&&t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup)||nMe(t,r),c=()=>p.removeColumns([t],n);return{name:l,disabled:d,action:c,icon:Wr("menuRemoveRowGroup",r,null)}}return null;case"resetColumns":return{name:s("resetColumns","Reset Columns"),action:()=>Xi(r,n)};case"expandAll":return f?{name:s("expandAll","Expand All Row Groups"),action:()=>f.expandAll(!0)}:null;case"contractAll":return f?{name:s("collapseAll","Collapse All Row Groups"),action:()=>f.expandAll(!1)}:null;case"copy":return v?{name:s("copy","Copy"),shortcut:s("ctrlC","Ctrl+C"),icon:Wr("clipboardCopy",r,null),action:()=>v.copyToClipboard()}:null;case"copyWithHeaders":return v?{name:s("copyWithHeaders","Copy with Headers"),icon:Wr("clipboardCopy",r,null),action:()=>v.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return v?{name:s("copyWithGroupHeaders","Copy with Group Headers"),icon:Wr("clipboardCopy",r,null),action:()=>v.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(v){const e=y.getFocusedCell(),t=e?ls(r,e):null,i=!!t&&(null===e||void 0===e?void 0:e.column.isCellEditable(t));return{name:s("cut","Cut"),shortcut:s("ctrlX","Ctrl+X"),icon:Wr("clipboardCut",r,null),disabled:!i||a.get("suppressCutToClipboard"),action:()=>v.cutToClipboard(void 0,"contextMenu")}}return null;case"paste":return v?{name:s("paste","Paste"),shortcut:s("ctrlV","Ctrl+V"),disabled:!0,icon:Wr("clipboardPaste",r,null),action:()=>v.pasteFromClipboard()}:null;case"export":{const e=[];return!a.get("suppressCsvExport")&&b&&e.push("csvExport"),!a.get("suppressExcelExport")&&C&&e.push("excelExport"),e.length?{name:s("export","Export"),subMenu:e,icon:Wr("save",r,null)}:null}case"csvExport":return b?{name:s("csvExport","CSV Export"),icon:Wr("csvExport",r,null),action:()=>b.exportDataAsCsv()}:null;case"excelExport":return C?{name:s("excelExport","Excel Export"),icon:Wr("excelExport",r,null),action:()=>C.exportDataAsExcel()}:null;case"separator":return"separator";case"pivotChart":case"chartRange":return M.getChartItems(e);case"columnFilter":return x&&t?{name:s("columnFilter","Column Filter"),icon:Wr("filter",r,null),action:()=>x.showFilterMenu({column:t,buttonElement:i(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":return w?{name:s("columnChooser","Choose Columns"),icon:Wr("columns",r,null),action:()=>w.showColumnChooser({column:t,eventSource:i()})}:null;case"sortAscending":return S?{name:s("sortAscending","Sort Ascending"),icon:Wr("sortAscending",r,null),action:()=>S.setSortForColumn(t,"asc",!1,n)}:null;case"sortDescending":return S?{name:s("sortDescending","Sort Descending"),icon:Wr("sortDescending",r,null),action:()=>S.setSortForColumn(t,"desc",!1,n)}:null;case"sortUnSort":return S?{name:s("sortUnSort","Clear Sort"),icon:Wr("sortUnSort",r,null),action:()=>S.setSortForColumn(t,null,!1,n)}:null;default:return pt(176,{key:e}),null}})(e,t,i,n):l({},e),!k)return;const I=k,{subMenu:A}=I;A&&A instanceof Array&&(I.subMenu=this.mapWithStockItems(A,t,i,n)),null!=k&&o.push(k)})),TMe(o,AMe),o}},class extends Si{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}getChartItems(e){var t;const i=this.beans,n=i.chartSvc,o="pivotChart"===e;if(!n)return null;const s=this.getLocaleTextFunc.bind(this),r=o?new kMe(i,n,s):new IMe(i,n,s),a=n.isEnterprise();let d=r.getMenuItem();if(d&&d.subMenu&&!a){const e=t=>{var i;return l(l({},t),{},{subMenu:null===(i=t.subMenu)||void 0===i?void 0:i.filter((e=>!e._enterprise)).map((t=>e(t)))})};d=e(d)}const c=null===(t=this.gos.get("chartToolPanelsDef"))||void 0===t||null===(t=t.settingsPanel)||void 0===t?void 0:t.chartGroupsDef;return c&&(d=this.filterAndOrderChartMenu(d,c,r.getConfigLookup())),this.cleanInternals(d)}cleanInternals(e){if(!e)return e;const t=e=>{var i;return null===e||void 0===e||delete e._key,null===e||void 0===e||delete e._enterprise,null===e||void 0===e||null===(i=e.subMenu)||void 0===i||i.forEach((e=>t(e))),e};return t(e)}buildLookup(e){const t={},i=e=>{t[e._key]=e,e.subMenu&&e.subMenu.forEach((e=>i(e)))};return i(e),t}filterAndOrderChartMenu(e,t,i){var n;const o=this.buildLookup(e),s=l(l({},e),{},{subMenu:[]});return Object.entries(t).forEach((e=>{let[t,n]=e;const r=i[t];if(null===r)return;if(void 0==r)return void pt(173,{group:t});const a=o[r._key];if(a)if(a.subMenu){const e=n.map((e=>{const i=r[e];if(void 0!=i)return o[i];pt(174,{group:t,chartType:e})})).filter((e=>void 0!==e));var l;if(e.length>0)a.subMenu=e,null===(l=s.subMenu)||void 0===l||l.push(a)}else{var d;null===(d=s.subMenu)||void 0===d||d.push(a)}})),0==(null===(n=s.subMenu)||void 0===n?void 0:n.length)?null:s}},class extends Si{constructor(){super(...arguments),this.beanName="menuUtils"}restoreFocusOnClose(e,t,i,n){const{eventSource:o}=e,s=i instanceof KeyboardEvent;if(!n&&!s||!o)return;const r=Lt(this.beans);(t.contains(r)||Ft(this.beans))&&this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,i){let n;i&&i.keyboardEvent&&(n=i.keyboardEvent),e(n&&{keyboardEvent:n});const o=this.beans,s=o.focusSvc,r=s.getFocusedCell();if(Ft(o))if(r){const{rowIndex:e,rowPinned:t,column:i}=r;s.setFocusedCell({rowIndex:e,column:i,rowPinned:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e,t,i){if(!this.gos.get("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey))return;if(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gos.get("suppressContextMenu"))return;if(i(null!==e&&void 0!==e?e:t.touches[0])){const i=null!==e&&void 0!==e?e:t;i&&i.cancelable&&i.preventDefault()}}async focusHeaderCell(e){const{column:t,columnIndex:i,headerPosition:n,eventSource:o}=e,{visibleCols:s,headerNavigation:r,focusSvc:a}=this.beans,l=await s.allCols.some((e=>e===t));if(!t||t.isAlive())if(l&&o&&Me(o)){const e=Fo(o);e&&(t&&(null===r||void 0===r||r.scrollToColumn(t)),e.focus())}else if(n&&-1!==i){const e=s.allCols,t=e[i]||Gi(e);t&&a.focusHeaderPosition({headerPosition:{headerRowIndex:n.headerRowIndex,column:t}})}}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&2===e.which&&e.preventDefault()}}],icons:{chart:"chart",columns:"columns",loadingMenuItems:"loading",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",save:"save",csvExport:"csv",excelExport:"excel",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"},dependsOn:[Rwe,Lh,Eh,HSe]},VMe={moduleName:"ColumnMenu",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="enterpriseMenuFactory"}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,i,n){const{column:o,columnGroup:s}=this.splitColumnOrGroup(e),r=n?"filterMenuTab":void 0;this.showMenu(o,s,(e=>{const n=e.getGui();var a;(this.beans.popupSvc.positionPopupUnderMouseEvent({type:i,column:o,mouseEvent:t,ePopup:n}),r)&&(null===(a=e.showTab)||void 0===a||a.call(e,r));this.dispatchVisibleChangedEvent(!0,!1,o,s,r)}),i,r,void 0,t.target)}splitColumnOrGroup(e){const t=e&&Ri(e);return{column:t?e:void 0,columnGroup:t?void 0:e}}showMenuAfterButtonClick(e,t,i,n){let o=-1,s="left";this.gos.get("enableRtl")&&(o=1,s="right");const r=n?"filterMenuTab":void 0,a=r?[r]:void 0,l=ci(this.gos),d=(l?9:4)*o,c=l?-23:4,{column:h,columnGroup:u}=this.splitColumnOrGroup(e);this.showMenu(h,u,(e=>{const n=e.getGui();var o;(this.beans.popupSvc.positionPopupByComponent({type:i,column:h,eventSource:t,ePopup:n,alignSide:s,nudgeX:d,nudgeY:c,position:"under",keepWithinBounds:!0}),r)&&(null===(o=e.showTab)||void 0===o||o.call(e,r));this.dispatchVisibleChangedEvent(!0,!1,h,u,r)}),i,r,a,t)}showMenu(e,t,i,n,o,s,r){const a=this.getMenuParams(e,t,s,r);if(!a)return;const{menu:l,eMenuGui:d,anchorToElement:c,restoreFocusParams:h}=a,u=[],{menuUtils:p,popupSvc:g}=this.beans;u.push((t=>{const i=l.getGui();this.destroyBean(l),e&&(_r(e,!1,"contextMenu"),p.restoreFocusOnClose(h,i,t))}));const m=this.getLocaleTextFunc();var v;(g.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:i=>{u.forEach((e=>e(i))),this.dispatchVisibleChangedEvent(!1,!1,e,t,o)},afterGuiAttached:e=>l.afterGuiAttached(Object.assign({},{container:n},e)),positionCallback:o?()=>i(l):void 0,ariaLabel:m("ariaLabelColumnMenu","Column Menu")}),o)||(null===(v=l.showTabBasedOnPreviousSelection)||void 0===v||v.call(l),i(l));if(hi(this.gos)){const t=g.setPopupPositionRelatedToElement(d,c);t&&e&&this.addStopAnchoring(t,e,u)}l.addEventListener("tabSelected",(t=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=t.key,this.dispatchVisibleChangedEvent(!0,!0,e)})),e&&_r(e,!0,"contextMenu"),this.activeMenu=l,l.addEventListener("destroyed",(()=>{this.activeMenu===l&&(this.activeMenu=null)}))}addStopAnchoring(e,t,i){e.then((e=>{t.addEventListener("leftChanged",e),t.addEventListener("visibleChanged",e),i.push((()=>{t.removeEventListener("leftChanged",e),t.removeEventListener("visibleChanged",e)}))}))}getMenuParams(e,t,i,n){const{focusSvc:o,visibleCols:s,ctrlsSvc:r}=this.beans,a={column:e,headerPosition:o.focusedHeader,columnIndex:s.allCols.indexOf(e),eventSource:n},l=this.createMenu(e,t,a,i,n);return l?{menu:l,eMenuGui:l.getGui(),anchorToElement:n||r.getGridBodyCtrl().eGridBody,restoreFocusParams:a}:void 0}createMenu(e,t,i,n,o){if(ci(this.gos))return this.createBean(new GMe(e,i,this.lastSelectedTab,n,o));{const n=this.beans.colMenuFactory.getMenuItems(e,t);return n.length?this.createBean(new zMe(n,e,i,o)):void 0}}dispatchVisibleChangedEvent(e,t,i,n,o){var s,r;this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:t,key:null!==(s=null!==(r=this.lastSelectedTab)&&void 0!==r?r:o)&&void 0!==s?s:ci(this.gos)?FMe:"columnMenu",column:null!==i&&void 0!==i?i:null,columnGroup:null!==n&&void 0!==n?n:null})}isMenuEnabled(e){var t,i;if(!ci(this.gos))return!0;const n=!(null!==(t=this.beans.filterManager)&&void 0!==t&&t.isFilterAllowed(e)),o=null!==(i=e.getColDef().menuTabs)&&void 0!==i?i:BMe;return(n&&o.includes(NMe)?o.length-1:o.length)>0}showMenuAfterContextMenuEvent(e,t,i){this.beans.menuUtils.onContextMenu(t,i,(t=>(this.showMenuAfterMouseEvent(e,t,"columnMenu"),!0)))}},class extends Si{constructor(){super(...arguments),this.beanName="colMenuFactory"}createMenu(e,t,i,n){const o=e.createManagedBean(new aMe(0,{column:null!==i&&void 0!==i?i:null,node:null,value:null})),s=this.beans.menuItemMapper.mapWithStockItems(t,null!==i&&void 0!==i?i:null,n,"columnMenu");return o.addMenuItems(s),o}getMenuItems(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o=this.getDefaultMenuOptions(i);let s;const r=null===(e=null!==(t=null===i||void 0===i?void 0:i.getColDef())&&void 0!==t?t:null===n||void 0===n?void 0:n.getColGroupDef())||void 0===e?void 0:e.mainMenuItems;if(Array.isArray(r))s=r;else if("function"===typeof r)s=r(this.gos.addGridCommonParams({column:i,columnGroup:n,defaultItems:o}));else{const e=this.gos.getCallback("getMainMenuItems");s=e?e({column:i,columnGroup:n,defaultItems:o}):o}return TMe(s,AMe),s}getDefaultMenuOptions(e){var t;const i=[],{beans:n,gos:o}=this,{colChooserFactory:s,rowGroupColsSvc:r,colModel:a,expansionSvc:l,sortSvc:d,menuSvc:c,pinnedCols:h,aggFuncSvc:u,colAutosize:p}=n,g=ci(o),m=()=>{!g&&s&&i.push("columnChooser"),i.push("resetColumns")};if(!e)return m(),i;const{colDef:v}=e,f=h&&!v.lockPinned,y=null!==(t=null===r||void 0===r?void 0:r.columns.length)&&void 0!==t?t:0,b=y>0,C=e.isPrimary(),x=u&&C&&b&&e.isAllowValue()||!C;if(d&&!g&&e.isSortable()){const t=e.getSort();"asc"!==t&&i.push("sortAscending"),"desc"!==t&&i.push("sortDescending"),t&&i.push("sortUnSort"),i.push(AMe)}if(null!==c&&void 0!==c&&c.isFilterMenuItemEnabled(e)&&(i.push("columnFilter"),i.push(AMe)),f&&i.push("pinSubMenu"),x&&i.push("valueAggSubMenu"),(f||x)&&i.push(AMe),p&&(i.push("autoSizeThis"),i.push("autoSizeAll"),i.push(AMe)),r&&o.isModuleRegistered("SharedRowGrouping")){const t=i.length;if(v.showRowGroup)i.push("rowUnGroup");else if(e.isAllowRowGroup()&&C)if(e.isRowGroupActive()){nMe(e,n)||i.push("rowUnGroup")}else i.push("rowGroup");i.length>t&&i.push(AMe)}return m(),l&&bt(o)&&(o.get("treeData")||y>(a.isPivotMode()?1:0))&&(i.push("expandAll"),i.push("contractAll")),i}},class extends Si{constructor(){super(...arguments),this.beanName="colChooserFactory"}createColumnSelectPanel(e,t,i,n){var o;const s=e.createManagedBean(new gMe),r=null!==(o=null!==n&&void 0!==n?n:null===t||void 0===t?void 0:t.getColDef().columnChooserParams)&&void 0!==o?o:{},{contractColumnSelection:a,suppressColumnExpandAll:l,suppressColumnFilter:d,suppressColumnSelectAll:c,suppressSyncLayoutWithGrid:h,columnLayout:u}=r;return s.init(!!i,this.gos.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!a,suppressColumnExpandAll:!!l,suppressColumnFilter:!!d,suppressColumnSelectAll:!!c,suppressSyncLayoutWithGrid:!!u||!!h,onStateUpdated:()=>{}}),"columnMenu"),u&&s.setColumnLayout(u),s}showColumnChooser(e){let{column:t,chooserParams:i,eventSource:n}=e;this.hideActiveColumnChooser();const o=this.createColumnSelectPanel(this,t,!0,i),s=this.getLocaleTextFunc(),r=this.beans,{visibleCols:a,focusSvc:l,menuUtils:d}=r,c=a.allCols.indexOf(t),h=t?l.focusedHeader:null;this.activeColumnChooserDialog=this.createBean(new Xwe({title:s("chooseColumns","Choose Columns"),component:o,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var e;null===(e=No(r,o.getGui()))||void 0===e||e.focus({preventScroll:!0}),this.dispatchVisibleChangedEvent(!0,t)},closedCallback:e=>{const i=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,t),t&&d.restoreFocusOnClose({column:t,headerPosition:h,columnIndex:c,eventSource:n},i,e,!0)},postProcessPopupParams:{type:"columnChooser",column:t,eventSource:n}})),this.activeColumnChooser=o}hideActiveColumnChooser(){this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:"columnChooser",column:null!==t&&void 0!==t?t:null})}}],icons:{legacyMenu:"menu",filterTab:"filter",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},apiFunctions:{showColumnChooser:function(e,t){var i;null===(i=e.colChooserFactory)||void 0===i||i.showColumnChooser({chooserParams:t})},hideColumnChooser:function(e){var t;null===(t=e.colChooserFactory)||void 0===t||t.hideActiveColumnChooser()}},dependsOn:[_Me,al,bl]},HMe={moduleName:"ContextMenu",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="contextMenuSvc",this.destroyLoadingSpinner=null,this.lastPromise=0}hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,t,i,n){const o=[],{clipboardSvc:s,chartSvc:r,csvCreator:a,excelCreator:l,colModel:d,rangeSvc:c,gos:h}=this.beans;if(ze(e)&&s&&t&&(h.get("suppressCutToClipboard")||o.push("cut"),o.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),h.get("enableCharts")&&r&&(d.isPivotMode()&&o.push("pivotChart"),c&&!c.isEmpty()&&o.push("chartRange")),ze(e)){const e=h.get("suppressExcelExport")||!l,t=h.get("suppressCsvExport")||!a;!te()&&(!e||!t)&&o.push("export")}const u=o.length?o:void 0,p=null===t||void 0===t?void 0:t.getColDef().contextMenuItems;if(Array.isArray(p))return p;if("function"===typeof p)return p(h.addGridCommonParams({column:t,node:e,value:i,defaultItems:u,event:n}));const g=h.getCallback("getContextMenuItems");return g?g({column:t,node:e,value:i,defaultItems:u,event:n}):o}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),n=this.getCellGui(i,t);if(!n)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const o=n.getBoundingClientRect();return{x:o.x+o.width/2,y:o.y+o.height/2}}showContextMenu(e){var t,i;const n=e.rowNode,o=e.column;let{anchorToElement:s,value:r}=e;n&&o&&null==r&&(r=this.beans.valueSvc.getValueForDisplay(o,n)),null==s&&(s=this.getContextMenuAnchorElement(n,o)),this.onContextMenu(null!==(t=e.mouseEvent)&&void 0!==t?t:null,null!==(i=e.touchEvent)&&void 0!==i?i:null,null!==n&&void 0!==n?n:null,null!==o&&void 0!==o?o:null,r,s)}handleContextMenuMouseEvent(e,t,i,n){var o,s;const r=null!==(o=null===i||void 0===i?void 0:i.rowNode)&&void 0!==o?o:null,a=null!==(s=null===n||void 0===n?void 0:n.column)&&void 0!==s?s:null,{valueSvc:l,ctrlsSvc:d}=this.beans,c=a?l.getValue(a,r):null,h=d.getGridBodyCtrl(),u=n?n.eGui:h.eGridBody;this.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:r,column:a,value:c,anchorToElement:u})}onContextMenu(e,t,i,n,o,s){this.beans.menuUtils.onContextMenu(e,t,(e=>this.showMenu(i,n,o,e,s)))}showMenu(e,t,i,n,o){const s=this.getMenuItems(e,t,i,n);if("function"===typeof s.then){const r=this.lastPromise+1;return this.lastPromise=r,this.destroyLoadingSpinner||this.createLoadingIcon(n),s.then((s=>{var a;if(this.lastPromise!==r)return;s&&s.length&&Me(n.target)&&!(null!==(a=this.beans.overlays)&&void 0!==a&&a.isExclusive())&&this.createContextMenu({menuItems:s,node:e,column:t,value:i,mouseEvent:n,anchorToElement:o}),this.destroyLoadingSpinner&&this.destroyLoadingSpinner()})),!0}return!(void 0===s||null===s||void 0===s||!s.length)&&(this.createContextMenu({menuItems:s,node:e,column:t,value:i,mouseEvent:n,anchorToElement:o}),!0)}createLoadingIcon(e){var t;const{beans:i}=this,n=this.getLocaleTextFunc(),o=Wr("loadingMenuItems",i),s=document.createElement("div");s.classList.add("ag-context-menu-loading-icon"),s.appendChild(o);const r=Rt(i),a=Pt(i);if(!a)return void pt(54);a.appendChild(s),null===(t=i.ariaAnnounce)||void 0===t||t.announceValue(n("ariaLabelLoadingContextMenu","Loading Context Menu"),"contextmenu"),i.environment.applyThemeClasses(s),Nt(s,e,i);const l=e=>{Nt(s,e,i)};r.addEventListener("mousemove",l),this.destroyLoadingSpinner=()=>{r.removeEventListener("mousemove",l),a.removeChild(s),this.destroyLoadingSpinner=null}}createContextMenu(e){const{menuItems:t,node:i,column:n,value:o,mouseEvent:s,anchorToElement:r}=e,{ctrlsSvc:a,focusSvc:d,popupSvc:c}=this.beans,h=a.getGridBodyCtrl().eGridBody,u=new LMe(t,n,i,o);this.createBean(u);const p=u.getGui();n||d.clearFocusedCell();const g={column:n,rowNode:i,type:"contextMenu",mouseEvent:s,ePopup:p,nudgeY:1},m=this.getLocaleTextFunc(),v=c.addPopup({modal:!0,eChild:p,closeOnEsc:!0,closedCallback:e=>{h.classList.remove(RMe),this.destroyBean(u),this.dispatchVisibleChangedEvent(!1,void 0===e?"api":"ui")},click:s,positionCallback:()=>{const e=this.gos.get("enableRtl");c.positionPopupUnderMouseEvent(l(l({},g),{},{nudgeX:e?-1*(p.offsetWidth+1):1}))},anchorToElement:r,ariaLabel:m("ariaLabelContextMenu","Context Menu")});v&&(h.classList.add(RMe),u.afterGuiAttached({container:"contextMenu",hidePopup:v.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=u,u.addEventListener("destroyed",(()=>{this.activeMenu===u&&(this.activeMenu=null)})),v&&u.addEventListener("closeMenu",(e=>{var t,i;return v.hideFunc({mouseEvent:null!==(t=e.mouseEvent)&&void 0!==t?t:void 0,keyboardEvent:null!==(i=e.keyboardEvent)&&void 0!==i?i:void 0,forceHide:!0})}));const f=s&&s instanceof MouseEvent&&"mousedown"===s.type;this.dispatchVisibleChangedEvent(!0,f?"api":"ui")}dispatchVisibleChangedEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ui";this.eventSvc.dispatchEvent({type:"contextMenuVisibleChanged",visible:e,source:t})}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(null!=t)return this.beans.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(null===i||void 0===i?void 0:i.eGui)||void 0}getContextMenuAnchorElement(e,t){const i=this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,n=this.getRowCtrl(e);if(!n)return i;const o=this.getCellGui(n,t);return o||(n.isFullWidth()?n.getFullWidthElement():i)}destroy(){var e;null===(e=this.destroyLoadingSpinner)||void 0===e||e.call(this),super.destroy()}}],apiFunctions:{showContextMenu:function(e,t){const{contextMenuSvc:i}=e;if(!i)return;const{rowNode:n,column:o,value:s,x:r,y:a}=t||{};let{x:l,y:d}=i.getContextMenuPosition(n,o);null!=r&&(l=r),null!=a&&(d=a),i.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:l,clientY:d}),rowNode:n,column:o,value:s})}},dependsOn:[_Me]},WMe=class extends La{constructor(){super('<div class="ag-cell-edit-wrapper"></div>')}init(e){this.params=e;const{cellStartedEdit:t,values:i}=e;_e(i)&&pt(180);const{params:n,valuesPromise:o}=this.buildRichSelectParams(),s=this.createManagedBean(new hSe(n));this.richSelect=s,s.addCssClass("ag-cell-editor"),this.appendChild(s),o&&o.then((e=>{s.setValueList({valueList:e,refresh:!0});const t=this.getSearchStringCallback(e);t&&s.setSearchStringCreator(t)})),this.addManagedListeners(s,{fieldPickerValueSelected:this.onEditorPickerValueSelected.bind(this)}),this.focusAfterAttached=t}onEditorPickerValueSelected(e){setTimeout((()=>this.params.stopEditing(!e.fromEnterKey)))}buildRichSelectParams(){const e=this.params,{cellRenderer:t,cellHeight:i,value:n,values:o,formatValue:s,searchDebounceDelay:r,valueListGap:a,valueListMaxHeight:l,valueListMaxWidth:d,allowTyping:c,filterList:h,searchType:u,highlightMatch:p,valuePlaceholder:g,eventKey:m,multiSelect:v,suppressDeselectAll:f,suppressMultiSelectPillRenderer:y}=e,b={value:n,cellRenderer:t,cellRowHeight:i,searchDebounceDelay:r,valueFormatter:s,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:a,allowTyping:c,filterList:h,searchType:u,highlightMatch:p,maxPickerHeight:l,maxPickerWidth:d,placeholder:g,initialInputValue:1===(null===m||void 0===m?void 0:m.length)?m:void 0,multiSelect:v,suppressDeselectAll:f,suppressMultiSelectPillRenderer:y};let C,x;return C="function"===typeof o?o(e):null!==o&&void 0!==o?o:[],Array.isArray(C)?(b.valueList=C,b.searchStringCreator=this.getSearchStringCallback(C)):x=C,v&&c&&(e.allowTyping=b.allowTyping=!1,pt(181)),{params:b,valuesPromise:x}}getSearchStringCallback(e){const t=this.params,{colDef:i}=t;if("object"!==typeof e[0]||!i.keyCreator)return;const{column:n,node:o,data:s}=t;return e=>e.map((e=>{const t=this.gos.addGridCommonParams({value:e,colDef:i,column:n,node:o,data:s});return i.keyCreator(t)}))}afterGuiAttached(){const{focusAfterAttached:e,params:t}=this;setTimeout((()=>{if(!this.isAlive())return;const i=this.richSelect;if(e){const e=i.getFocusableElement();e.focus();const{allowTyping:t,eventKey:n}=this.params;!t||n&&1===n.length||e.select()}i.showPicker();const{eventKey:n}=t;n&&1===(null===n||void 0===n?void 0:n.length)&&i.searchTextFromString(n)}))}focusIn(){this.richSelect.getFocusableElement().focus()}getValue(){return this.richSelect.getValue()}isPopup(){return!1}},jMe={moduleName:"RichSelect",version:Ewe,beans:[],userComponents:{agRichSelect:WMe,agRichSelectCellEditor:WMe},icons:{richSelectOpen:"small-down",richSelectRemove:"cancel"},dependsOn:[Rwe,Iu]},UMe="__AG_SELECT_ALL__",KMe="__AG_ADD_SELECTION_TO_FILTER__",YMe={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},ZMe=class extends En{constructor(e){var t;super(e.isGroup?'\n            <div class="ag-set-filter-item" aria-hidden="true">\n                <span class="ag-set-filter-group-icons">\n                    <span class="ag-set-filter-group-closed-icon" data-ref="eGroupClosedIcon"></span>\n                    <span class="ag-set-filter-group-opened-icon" data-ref="eGroupOpenedIcon"></span>\n                    <span class="ag-set-filter-group-indeterminate-icon" data-ref="eGroupIndeterminateIcon"></span>\n                </span>\n                <ag-checkbox data-ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n            </div>':'\n            <div class="ag-set-filter-item">\n                <ag-checkbox data-ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n            </div>',[Zr]),this.eCheckbox=Tn,this.eGroupOpenedIcon=Tn,this.eGroupClosedIcon=Tn,this.eGroupIndeterminateIcon=Tn,this.formattedValue=null,this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=null!==(t=e.depth)&&void 0!==t?t:0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,getLocation:()=>"setFilterValue",shouldDisplayTooltip:()=>{var e,t;return null===(e=null===(t=this.shouldDisplayTooltip)||void 0===t?void 0:t.call(this))||void 0===e||e},getValueFormatted:()=>this.formattedValue,getAdditionalParams:()=>this.isTree?{level:this.depth}:{}})),this.addDestroyFunc((()=>{var e;return null===(e=this.destroyCellRendererComponent)||void 0===e?void 0:e.call(this)})),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&(this.addCssClass("ag-set-filter-indent-"+this.depth),this.getGui().style.setProperty("--ag-indentation-level",String(this.depth))),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),L(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),this.params.readOnly||this.eCheckbox.onValueChange((e=>this.onCheckboxChanged(!!e)))}getFocusableElement(){return this.focusWrapper}setupExpansion(){const{eGroupClosedIcon:e,eGroupOpenedIcon:t,eGroupIndeterminateIcon:i,hasIndeterminateExpandState:n,beans:o}=this;e.appendChild(Hr("setFilterGroupClosed",o,null)),t.appendChild(Hr("setFilterGroupOpen",o,null));const s=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(e,{click:s}),this.addManagedElementListeners(t,{click:s}),n&&(i.appendChild(Hr("setFilterGroupIndeterminate",o,null)),this.addManagedElementListeners(i,{click:s})),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,t){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;const i={type:"expandedChanged",isExpanded:!!e,item:this.item};t||this.dispatchLocalEvent(i),this.setExpandedIcons(),this.refreshAriaExpanded()}}setExpandedIcons(){const{isExpanded:e,hasIndeterminateExpandState:t,eGroupClosedIcon:i,eGroupOpenedIcon:n,eGroupIndeterminateIcon:o}=this;le(i,t?!1===e:!e),le(n,!0===e),t&&le(o,void 0===e)}onCheckboxChanged(e){this.isSelected=e;const t={type:"selectionChanged",isSelected:e,item:this.item};this.dispatchLocalEvent(t),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,t){this.isSelected=e,this.eCheckbox.setValue(e,t),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;const e=this.getLocaleTextFunc(),t=this.eCheckbox.getValue(),i=void 0===t?e("ariaIndeterminate","indeterminate"):t?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");T(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel("".concat(n," (").concat(i,")"))}setupFixedAriaLabels(e){if(!this.isTree)return;const t=this.getLocaleTextFunc()("ariaFilterValue","Filter Value"),i=this.getAriaElement();A(i,"".concat(e," ").concat(t)),E(i,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){Z(this.getAriaElement(),this.eCheckbox.getValue())}refreshAriaExpanded(){O(this.getAriaElement(),!!this.isExpanded)}refresh(e,t,i){this.item=e,t!==this.isSelected&&this.setSelected(t,!0),this.setExpanded(i,!0);const{cellRendererComponent:n,cellRendererParams:o,beans:s,params:r}=this;if(this.valueFunction){const e=this.valueFunction();this.setTooltipAndCellRendererParams(e,e),n||this.renderCellWithoutCellRenderer()}if(n){var a,l;const e=eo(s.userCompFactory,r,o);if(!(null===(a=n.refresh)||void 0===a?void 0:a.call(n,null!==(l=null===e||void 0===e?void 0:e.params)&&void 0!==l?l:o))){const e=n;this.renderCell(),this.destroyBean(e)}}}render(){const{params:{column:e}}=this;let{value:t}=this,i=null;"function"===typeof t?(this.valueFunction=t,i=this.valueFunction(),t=i):i=this.isTree?Ve(t):this.getFormattedValue(e,t),this.formattedValue=i,this.setTooltipAndCellRendererParams(t,i),this.renderCell()}setTooltipAndCellRendererParams(e,t){const i=this.gos;if(this.params.showTooltips&&(!ba(i)||!this.params.cellRenderer)){var n;const o=null!=t?t:Ve(e);this.shouldDisplayTooltip=Ca(i,(()=>this.eCheckbox.getGui().querySelector(".ag-label"))),null===(n=this.tooltipFeature)||void 0===n||n.setTooltipAndRefresh(o)}this.cellRendererParams=i.addGridCommonParams({value:e,valueFormatted:t,colDef:this.params.colDef,column:this.params.column,setTooltip:(e,t)=>{var n;i.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=t,null===(n=this.tooltipFeature)||void 0===n||n.setTooltipAndRefresh(e)}})}getFormattedValue(e,t){return this.beans.valueSvc.formatValue(e,null,t,this.valueFormatter,!1)}renderCell(){const e=eo(this.beans.userCompFactory,this.params,this.cellRendererParams),t=null===e||void 0===e?void 0:e.newAgStackInstance();null!=t?t.then((e=>{e&&(this.cellRendererComponent=e,this.eCheckbox.setLabel(e.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(e))})):this.renderCellWithoutCellRenderer()}renderCellWithoutCellRenderer(){var e;const{valueFormatted:t,value:i}=this.cellRendererParams;let n=null!==(e=null==t?i:t)&&void 0!==e?e:this.translate("blanks");"string"!==typeof n&&(pt(208),n=""),this.eCheckbox.setLabel(n),this.setupFixedAriaLabels(n)}getComponentHolder(){return this.params.column.getColDef()}},XMe=class{getModelAsString(e,t){const{values:i}=e||t.getModel()||{},n=t.getValueModel();if(null==i||null==n)return"";const o=i.filter((e=>n.isKeyAvailable(e))),s=o.length,r=o.slice(0,10).map((e=>t.getFormattedValue(e)));return"(".concat(s,") ").concat(r.join(",")).concat(s>10?",...":"")}};function qMe(e,t,i){let n=e;return n?(n=n.map((e=>Ve(Ge(e)))),!t&&i&&n.some((e=>null==e))?null==Gi(n)?null:n.filter((e=>null!=e)):n):null}var QMe=class{constructor(e,t,i,n,o,s,r,a,l,d){this.rowModel=e,this.filterParams=t,this.createKey=i,this.caseFormat=n,this.valueSvc=o,this.treeDataOrGrouping=s,this.treeData=r,this.groupAllowUnbalanced=a,this.addManagedEventListeners=l,this.rowGroupColsSvc=d}extractUniqueValuesAsync(e,t){return new Rn((i=>{if(this.rowModel.isRowDataLoaded())i(this.extractUniqueValues(e,t));else{const[n]=this.addManagedEventListeners({rowCountReady:()=>{null===n||void 0===n||n(),i(this.extractUniqueValues(e,t))}})}}))}extractUniqueValues(e,t){var i;const n=new Map,o=this.extractExistingFormattedKeys(t),s=new Set,r=this.treeData,a=null===(i=this.rowGroupColsSvc)||void 0===i?void 0:i.columns,l=(e,i)=>{const r=this.caseFormat(e);if(!s.has(r)){s.add(r);let a=e,l=Ge(i);const d=null===o||void 0===o?void 0:o.get(r);null!=d&&(a=d,l=t.get(d)),n.set(a,l)}};return this.rowModel.forEachLeafNode((t=>{if(!t.data||!e(t))return;if(this.treeDataOrGrouping)return void this.addValueForTreeDataOrGrouping(t,r,a,l);const i=this.getValue(t);null!=i&&Array.isArray(i)?(i.forEach((e=>{l(this.createKey(e,t),e)})),0===i.length&&l(null,null)):l(this.createKey(i,t),i)})),n}addValueForTreeDataOrGrouping(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0;if(t){var s,r,a;if(null!==(s=e.childrenAfterGroup)&&void 0!==s&&s.length)return;i=null!==(r=e.getRoute())&&void 0!==r?r:[null!==(a=e.key)&&void 0!==a?a:e.id]}else i=n.map((t=>this.valueSvc.getKeyForNode(t,e))),i.push(this.getValue(e));const l=qMe(i,t,this.groupAllowUnbalanced);o(this.createKey(l),l)}getValue(e){return this.filterParams.getValue(e)}extractExistingFormattedKeys(e){if(!e)return null;const t=new Map;return e.forEach(((e,i)=>{t.set(this.caseFormat(i),i)})),t}},JMe=class{constructor(e){let{caseFormat:t}=e;this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=t}allFilteringKeys(){return this.filteringKeys}allFilteringKeysCaseFormatted(){return this.filteringKeysCaseFormatted}setFilteringKeys(e){this.filteringKeys=new Set(e),this.hasNoAppliedFilteringKeys=!this.filteringKeys||0===this.filteringKeys.size,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach((e=>this.filteringKeysCaseFormatted.add(this.caseFormat(e))))}addFilteringKey(e){null==this.filteringKeys&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(e),this.filteringKeysCaseFormatted.add(this.caseFormat(e)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)}hasCaseFormattedFilteringKey(e){return this.filteringKeysCaseFormatted.has(this.caseFormat(e))}hasFilteringKey(e){return this.filteringKeys.has(e)}reset(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1}},$Me=class{constructor(e,t,i,n){this.valueSvc=e,this.valueFormatter=t,this.formatter=i,this.column=n,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(e,t,i){this.displayedKeys=Array.from(i)}updateDisplayedValuesToMatchMiniFilter(e,t,i,n,o){this.displayedKeys=[];for(const s of i)if(null==s)o&&this.displayedKeys.push(s);else{const t=e(s),i=this.valueSvc.formatValue(this.column,null,t,this.valueFormatter,!1);n(this.formatter(i))&&this.displayedKeys.push(s)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(e){return this.displayedKeys[e]}getSelectAllItem(){return UMe}getAddSelectionToFilterItem(){return KMe}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(e){this.displayedKeys.forEach(e)}someDisplayedKey(e){return this.displayedKeys.some(e)}hasGroups(){return!1}refresh(){}},eDe=e=>e?[String(e.getFullYear()),String(e.getMonth()+1),String(e.getDate())]:null,tDe=class{constructor(e,t,i,n){this.formatter=e,this.treeListPathGetter=t,this.treeListFormatter=i,this.treeDataOrGrouping=n,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:UMe,children:this.allDisplayedItemsTree,expanded:!0,key:UMe,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:KMe,expanded:!0,key:KMe,parentTreeKeys:[]}}updateOnParamsChange(e){this.treeListFormatter=e}updateDisplayedValuesToAllAvailable(e,t,i,n){"reload"===n?this.generateItemTree(e,t,i):"otherFilter"===n?(this.updateAvailable(i),this.updateExpandAll()):"miniFilter"===n&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(e,t,i,n,o,s){"reload"===s?this.generateItemTree(e,t,i):"otherFilter"===s&&this.updateAvailable(i),this.updateFilter(n,o),this.updateExpandAll(),this.flattenItems()}generateItemTree(e,t,i){this.allDisplayedItemsTree=[],this.groupsExist=!1;const n=this.getTreeListPathGetter(e,i);for(const s of t){var o;const t=null!==(o=n(e(s)))&&void 0!==o?o:[null];t.length>1&&(this.groupsExist=!0);const r=i.has(s);let a,l=this.allDisplayedItemsTree,d=[];t.forEach(((e,i)=>{l||(l=[],a.children=l),a=l.find((t=>{var i;return(null===(i=t.treeKey)||void 0===i?void 0:i.toUpperCase())===(null===e||void 0===e?void 0:e.toUpperCase())})),a||(a={treeKey:e,depth:i,filterPasses:!0,expanded:!1,available:r,parentTreeKeys:d},i===t.length-1&&(a.key=s),l.push(a)),l=a.children,d=[...d,e]}))}this.updateAvailable(i),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1}getTreeListPathGetter(e,t){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return e=>e;let i=!1;for(const n of t){const t=e(n);if(t instanceof Date){i=!0;break}if(null!=t)break}return i?eDe:(pt(211),e=>[String(e)])}flattenItems(){this.activeDisplayedItemsFlat=[];const e=t=>{t.forEach((t=>{t.filterPasses&&t.available&&(this.activeDisplayedItemsFlat.push(t),t.children&&t.expanded&&e(t.children))}))};e(this.allDisplayedItemsTree)}resetFilter(){const e=t=>{t.children&&t.children.forEach((t=>{e(t)})),t.filterPasses=!0};this.allDisplayedItemsTree.forEach((t=>e(t)))}updateFilter(e,t){const i=i=>!!i.available&&(null==i.treeKey?t:e(this.formatter(this.treeListFormatter?this.treeListFormatter(i.treeKey,i.depth,i.parentTreeKeys):i.treeKey)));this.allDisplayedItemsTree.forEach((e=>this.recursiveItemCheck(e,!1,i,"filterPasses")))}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(e){return this.activeDisplayedItemsFlat[e]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){const e=[];return this.forEachDisplayedKey((t=>e.push(t))),e}forEachDisplayedKey(e){const t=(i,n)=>{i.children?i.expanded&&n||i.children.forEach((e=>{e.filterPasses&&t(e,!1)})):e(i.key)};this.activeDisplayedItemsFlat.forEach((e=>t(e,!0)))}someDisplayedKey(e){const t=(i,n)=>i.children?(!i.expanded||!n)&&i.children.some((e=>!!e.filterPasses&&t(e,!1))):e(i.key);return this.activeDisplayedItemsFlat.some((e=>t(e,!0)))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){const e=(t,i,n)=>{for(const o of t){if(!o.filterPasses||!o.available||!o.children)continue;if(i=i||!!o.expanded,n=n||!o.expanded,i&&n)return;const t=e(o.children,i,n);if(void 0===t)return;t?i=!0:n=!0}return i&&n?void 0:i},t=this.getSelectAllItem();t.expanded=e(t.children,!1,!1)}recursiveItemCheck(e,t,i,n){let o=!1;e.children&&e.children.forEach((s=>{const r=this.recursiveItemCheck(s,t||i(e),i,n);o=o||r}));const s=t||o||i(e);return e[n]=s,s}updateAvailable(e){const t=t=>e.has(t.key);this.allDisplayedItemsTree.forEach((e=>this.recursiveItemCheck(e,!1,t,"available")))}},iDe=class{constructor(e){this.localEventService=new C,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;const{usingComplexObjects:t,rowGroupColsSvc:i,valueSvc:n,treeDataTreeList:o,groupingTreeList:s,filterParams:r,gos:a,valueFormatter:l,addManagedEventListeners:d}=e,{column:c,colDef:h,textFormatter:u,doesRowPassOtherFilter:p,suppressSorting:g,comparator:m,rowModel:v,values:f,caseSensitive:y,treeList:b,treeListPathGetter:x,treeListFormatter:w}=r;this.filterParams=r,this.gos=a,this.setIsLoading=e.setIsLoading,this.translate=e.translate,this.caseFormat=e.caseFormat,this.createKey=e.createKey,this.usingComplexObjects=!!e.usingComplexObjects,this.formatter=null!==u&&void 0!==u?u:e=>null!==e&&void 0!==e?e:null,this.doesRowPassOtherFilters=p,this.suppressSorting=g||!1,this.filteringKeys=new JMe({caseFormat:this.caseFormat});const S=null!==m&&void 0!==m?m:h.comparator,M=!!o||!!s;this.compareByValue=!!(t&&S||M||b&&!x),this.entryComparator=M&&!S?this.createTreeDataOrGroupingComparator():!b||x||S?(e,t)=>{let[i,n]=e,[o,s]=t;return S(n,s)}:(e,t)=>{let[i,n]=e,[o,s]=t;return We(n,s)},this.keyComparator=null!==S&&void 0!==S?S:We,this.caseSensitive=!!y;const D=a.get("groupAllowUnbalanced");bt(a)&&(this.clientSideValuesExtractor=new QMe(v,this.filterParams,this.createKey,this.caseFormat,n,M,!!o,D,d,i)),null==f?this.valuesType=2:(this.valuesType=Array.isArray(f)?0:1,this.providedValues=f),this.displayValueModel=b?new tDe(this.formatter,x,w,o||s):new $Me(n,l,this.formatter,c),this.updateAllValues().then((e=>this.resetSelectionState(e||[])))}addEventListener(e,t,i){this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService.removeEventListener(e,t,i)}updateOnParamsChange(e){return new Rn((t=>{const{values:i,textFormatter:n,suppressSorting:o,treeListFormatter:s}=e,r=this.providedValues,a=this.suppressSorting;if(this.filterParams=e,this.formatter=null!==n&&void 0!==n?n:e=>null!==e&&void 0!==e?e:null,this.suppressSorting=o||!1,this.providedValues=null!==i&&void 0!==i?i:null,this.displayValueModel instanceof tDe&&this.displayValueModel.updateOnParamsChange(s),this.providedValues!==r||this.suppressSorting!==a){i&&0!==i.length?this.valuesType=Array.isArray(i)?0:1:(this.valuesType=2,this.providedValues=null);const e=this.getModel();this.updateAllValues().then((()=>{this.setModel(e).then((()=>t()))}))}else t()}))}refreshValues(){return new Rn((e=>{this.allValuesPromise.then((()=>{const t=this.getModel();this.updateAllValues(),this.setModel(t).then((()=>e()))}))}))}overrideValues(e){return new Rn((t=>{this.allValuesPromise.then((()=>{this.valuesType=0,this.providedValues=e,this.refreshValues().then((()=>t()))}))}))}refreshAfterAnyFilterChanged(){return this.showAvailableOnly()?this.allValuesPromise.then((e=>(this.updateAvailableKeys(null!==e&&void 0!==e?e:[],"otherFilter"),!0))):Rn.resolve(!1)}isInitialised(){return this.initialised}updateAllValues(){return this.allValuesPromise=new Rn((e=>{switch(this.valuesType){case 2:this.getValuesFromRowsAsync(!1).then((t=>e(this.processAllValues(t))));break;case 0:e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break;case 1:{this.setIsLoading(!0);const t=this.providedValues,{column:i,colDef:n}=this.filterParams,o=this.gos.addGridCommonParams({success:t=>{this.setIsLoading(!1),e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(t))))},colDef:n,column:i});window.setTimeout((()=>t(o)),0);break}}})),this.allValuesPromise.then((e=>this.updateAvailableKeys(e||[],"reload"))).then((()=>this.initialised=!0)),this.allValuesPromise}processAllValues(e){const t=this.sortKeys(e);return this.allValues=null!==e&&void 0!==e?e:new Map,t}validateProvidedValues(e){if(this.usingComplexObjects&&null!==e&&void 0!==e&&e.length){const t=e[0];if(t&&"object"!==typeof t&&"function"!==typeof t){pt(null==this.createKey(t)?209:210)}}return e}setValuesType(e){this.valuesType=e}getValuesType(){return this.valuesType}isKeyAvailable(e){return this.availableKeys.has(e)}showAvailableOnly(){return 2===this.valuesType}updateAvailableKeys(e,t){const i=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(i),this.localEventService.dispatchEvent({type:"availableValuesChanged"}),this.updateDisplayedValues(t,e)}sortKeys(e){const t=null!==e&&void 0!==e?e:new Map;if(this.suppressSorting)return Array.from(t.keys());let i;return i=this.compareByValue?Array.from(t.entries()).sort(this.entryComparator).map((e=>{let[t]=e;return t})):Array.from(t.keys()).sort(this.keyComparator),this.filterParams.excelMode&&t.has(null)&&(i=i.filter((e=>null!=e)),i.push(null)),i}getParamsForValuesFromRows(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.clientSideValuesExtractor)return gt(113),null;return{predicate:t=>!e||this.doesRowPassOtherFilters(t),existingValues:e&&!this.caseSensitive?this.allValues:void 0}}getValuesFromRows(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getParamsForValuesFromRows(e);return t?this.clientSideValuesExtractor.extractUniqueValues(t.predicate,t.existingValues):null}getValuesFromRowsAsync(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getParamsForValuesFromRows(e);return t?this.clientSideValuesExtractor.extractUniqueValuesAsync(t.predicate,t.existingValues):Rn.resolve(null)}setMiniFilter(e){return e=Ge(e),this.miniFilterText!==e&&(null===e&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=e,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}updateDisplayedValues(e,t){if("expansion"===e)return void this.displayValueModel.refresh();if(null==this.miniFilterText)return void this.displayValueModel.updateDisplayedValuesToAllAvailable((e=>this.getValue(e)),t,this.availableKeys,e);const i=this.caseFormat(this.formatter(this.miniFilterText)||""),n=e=>null!=e&&this.caseFormat(e).indexOf(i)>=0,o=!!this.filterParams.excelMode&&n(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter((e=>this.getValue(e)),t,this.availableKeys,n,o,e)}getDisplayedValueCount(){return this.displayValueModel.getDisplayedValueCount()}getDisplayedItem(e){return this.displayValueModel.getDisplayedItem(e)}getSelectAllItem(){return this.displayValueModel.getSelectAllItem()}getAddSelectionToFilterItem(){return this.displayValueModel.getAddSelectionToFilterItem()}hasSelections(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size}getKeys(){return Array.from(this.allValues.keys())}getValues(){return Array.from(this.allValues.values())}getValue(e){return this.allValues.get(e)}setAddCurrentSelectionToFilter(e){this.addCurrentSelectionToFilter=e}isInWindowsExcelMode(){return"windows"===this.filterParams.excelMode}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&ze(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null==this.miniFilterText?this.selectedKeys=new Set(this.allValues.keys()):(e&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey((e=>this.selectedKeys.add(e))))}deselectAllMatchingMiniFilter(){null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey((e=>this.selectedKeys.delete(e)))}selectKey(e){this.selectedKeys.add(e)}deselectKey(e){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(e)}isKeySelected(e){return this.selectedKeys.has(e)}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey((e=>!this.isKeySelected(e)))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey((e=>this.isKeySelected(e)))}getModel(){if(!this.hasSelections())return null;const e=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(e&&e.size>0){if(this.selectedKeys){const t=new Set([...Array.from(e),...Array.from(this.selectedKeys).filter((t=>!e.has(t)))]);return Array.from(t)}return Array.from(e)}return Array.from(this.selectedKeys)}setModel(e){return this.allValuesPromise.then((t=>{if(null==e)this.resetSelectionState(null!==t&&void 0!==t?t:[]);else{this.selectedKeys.clear();const t=new Map;this.allValues.forEach(((e,i)=>{t.set(this.caseFormat(i),i)})),e.forEach((e=>{const i=this.caseFormat(Ge(e)),n=t.get(i);void 0!==n&&this.selectKey(n)}))}}))}uniqueValues(e){const t=new Map,i=new Set;return(null!==e&&void 0!==e?e:[]).forEach((e=>{const n=Ge(e),o=this.createKey(n),s=this.caseFormat(o);i.has(s)||(i.add(s),t.set(o,n))})),t}resetSelectionState(e){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(e)}hasGroups(){return this.displayValueModel.hasGroups()}createTreeDataOrGroupingComparator(){return(e,t)=>{let[i,n]=e,[o,s]=t;if(null==n)return null==s?0:-1;if(null==s)return 1;for(let r=0;r<n.length;r++){if(r>=s.length)return 1;const e=We(n[r],s[r]);if(0!==e)return e}return 0}}setAppliedModelKeys(e){this.filteringKeys.setFilteringKeys(e)}addToAppliedModelKeys(e){this.filteringKeys.addFilteringKey(e)}getAppliedModelKeys(){return this.filteringKeys.allFilteringKeys()}getCaseFormattedAppliedModelKeys(){return this.filteringKeys.allFilteringKeysCaseFormatted()}hasAppliedModelKey(e){return this.filteringKeys.hasCaseFormattedFilteringKey(e)}hasAnyAppliedModelKey(){return!this.filteringKeys.hasNoAppliedFilteringKeys}},nDe=class extends Ts{constructor(){super("setFilter"),this.filterType="set",this.eMiniFilter=Tn,this.eFilterLoading=Tn,this.eSetFilterList=Tn,this.eFilterNoMatches=Tn,this.caseSensitive=!1,this.treeDataTreeList=!1,this.groupingTreeList=!1,this.hardRefreshVirtualList=!1,this.noValueFormatterSupplied=!1,this.filterModelFormatter=new XMe,this.updateSetFilterOnParamsChange=e=>{var t,i;this.setFilterParams=e,this.caseSensitive=!!e.caseSensitive;const n=null!==(t=e.keyCreator)&&void 0!==t?t:e.colDef.keyCreator;this.setValueFormatter(e.valueFormatter,n,!!e.treeList,!!e.colDef.refData);const o=e.column.getId().startsWith(on);this.treeDataTreeList=this.gos.get("treeData")&&!!e.treeList&&o,this.groupingTreeList=!(null===(i=this.rowGroupColsSvc)||void 0===i||!i.columns.length)&&!!e.treeList&&o,this.createKey=this.generateCreateKey(n,this.treeDataTreeList||this.groupingTreeList)}}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){super.postConstruct()}updateUiVisibility(){}createBodyTemplate(){return'\n            <div class="ag-set-filter">\n                <div data-ref="eFilterLoading" class="ag-filter-loading ag-hidden">'.concat(this.translateForSetFilter("loadingOoo"),'</div>\n                <ag-input-text-field class="ag-mini-filter" data-ref="eMiniFilter"></ag-input-text-field>\n                <div data-ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">').concat(this.translateForSetFilter("noMatches"),'</div>\n                <div data-ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>')}getAgComponents(){return[sa]}handleKeyDown(e){if(super.handleKeyDown(e),!e.defaultPrevented)switch(e.key){case Do.SPACE:this.handleKeySpace(e);break;case Do.ENTER:this.handleKeyEnter(e);break;case Do.LEFT:this.handleKeyLeft(e);break;case Do.RIGHT:this.handleKeyRight(e)}}handleKeySpace(e){var t;null===(t=this.getComponentForKeyEvent(e))||void 0===t||t.toggleSelected()}handleKeyEnter(e){const{excelMode:t,readOnly:i}=this.setFilterParams;t&&!i&&(e.preventDefault(),this.onBtApply(!1,!1,e),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}handleKeyLeft(e){var t;null===(t=this.getComponentForKeyEvent(e))||void 0===t||t.setExpanded(!1)}handleKeyRight(e){var t;null===(t=this.getComponentForKeyEvent(e))||void 0===t||t.setExpanded(!0)}getComponentForKeyEvent(e){if(!this.eSetFilterList.contains(Lt(this.beans)))return;const t=this.virtualList.getLastFocusedRow();if(null==t)return;const i=this.virtualList.getComponentAt(t);if(null==i)return;e.preventDefault();const{readOnly:n}=this.setFilterParams;return n?void 0:i}getCssIdentifier(){return"set-filter"}setModel(e){return null==e&&null==this.valueModel.getModel()?(this.setMiniFilter(null),Rn.resolve()):super.setModel(e)}refresh(e){if(this.applyExcelModeOptions(e),!super.refresh(e))return!1;const t=this.setFilterParams;return!["treeList","treeListPathGetter","caseSensitive","comparator","excelMode"].some((i=>e[i]!==(null===t||void 0===t?void 0:t[i])))&&(!this.haveColDefParamsChanged(e)&&(super.updateParams(e),this.updateSetFilterOnParamsChange(e),this.updateMiniFilter(),e.suppressSelectAll!==(null===t||void 0===t?void 0:t.suppressSelectAll)&&this.createVirtualListModel(e),this.valueModel.updateOnParamsChange(e).then((()=>{this.refreshFilterValues()})),!0))}haveColDefParamsChanged(e){const{colDef:t,keyCreator:i}=e,{colDef:n,keyCreator:o}=this.setFilterParams,s=null!==i&&void 0!==i?i:t.keyCreator,r=null!==o&&void 0!==o?o:null===n||void 0===n?void 0:n.keyCreator,a=t.filterValueGetter!==(null===n||void 0===n?void 0:n.filterValueGetter),l=s!==r,d=!!this.dataTypeSvc&&!!s&&this.dataTypeSvc.getFormatValue(t.cellDataType)===s&&t.valueFormatter!==(null===n||void 0===n?void 0:n.valueFormatter);return a||l||d}setModelAndRefresh(e){return this.valueModel.setModel(e).then((()=>{this.isAlive()&&this.checkAndRefreshVirtualList()}))}resetUiToDefaults(){return this.setMiniFilter(null),this.setModelAndRefresh(null)}setModelIntoUi(e){this.setMiniFilter(null);const t=null==e?null:e.values;return this.setModelAndRefresh(t)}getModelFromUi(){const e=this.valueModel.getModel();return e?{values:e,filterType:this.filterType}:null}getValueModel(){return this.valueModel}areModelsEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&zi(e.values,t.values)}setParams(e){var t;this.applyExcelModeOptions(e),super.setParams(e),this.updateSetFilterOnParamsChange(e);const i=null!==(t=e.keyCreator)&&void 0!==t?t:e.colDef.keyCreator;this.valueModel=new iDe({filterParams:e,setIsLoading:e=>this.setIsLoading(e),translate:e=>this.translateForSetFilter(e),caseFormat:e=>this.caseFormat(e),createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!i,gos:this.gos,rowGroupColsSvc:this.rowGroupColsSvc,valueSvc:this.valueSvc,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList,addManagedEventListeners:e=>this.addManagedEventListeners(e)}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()}onAddCurrentSelectionToFilterChange(e){this.valueModel.setAddCurrentSelectionToFilter(e)}setValueFormatter(e,t,i,n){let o=e;if(!o){if(t&&!i)return void gt(249);this.noValueFormatterSupplied=!0,n||(o=e=>Ve(e.value))}this.valueFormatter=o}generateCreateKey(e,t){var i=this;return t&&!e?(gt(250),()=>null):e?function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o=i.getKeyCreatorParams(t,n);return Ge(e(o))}:e=>Ge(Ve(e))}getFormattedValue(e){var t;let i=this.valueModel.getValue(e);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(i)&&(i=Gi(i));const n=this.valueSvc.formatValue(this.setFilterParams.column,null,i,this.valueFormatter,!1);return null!==(t=null==n?Ve(i):n)&&void 0!==t?t:this.translateForSetFilter("blanks")}applyExcelModeOptions(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,pt(207))}addEventListenersForDataChanges(){this.isValuesTakenFromGrid()&&(this.addManagedPropertyListeners(["groupAllowUnbalanced"],(()=>{this.syncAfterDataChange()})),this.addManagedEventListeners({cellValueChanged:e=>{e.column===this.setFilterParams.column&&this.syncAfterDataChange()}}))}syncAfterDataChange(){return this.valueModel.refreshValues().then((()=>{this.checkAndRefreshVirtualList(),this.applyActive&&!this.areModelsEqual(this.getModel(),this.getModelFromUi())||this.onBtApply(!1,!0)}))}setIsLoading(e){le(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter()}initVirtualList(){const e=this.getLocaleTextFunc()("ariaFilterList","Filter List"),t=!!this.setFilterParams.treeList,i=this.virtualList=this.createBean(new qwe({cssIdentifier:"filter",ariaRole:t?"tree":"listbox",listName:e})),n=this.eSetFilterList;t&&n.classList.add("ag-set-filter-tree-list"),n&&n.appendChild(i.getGui());const{cellHeight:o}=this.setFilterParams;null!=o&&i.setRowHeight(o);i.setComponentCreator(((e,i)=>this.createSetListItem(e,t,i)));i.setComponentUpdater(((e,t)=>this.updateSetListItem(e,t))),this.createVirtualListModel(this.setFilterParams)}createVirtualListModel(e){let t;t=e.suppressSelectAll?new oDe(this.valueModel):new sDe(this.valueModel,(()=>this.isSelectAllSelected())),e.treeList&&(t=new rDe(t)),this.virtualList.setModel(t)}getSelectAllLabel(){const e=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(e)}getAddSelectionToFilterLabel(){return this.translateForSetFilter("addCurrentSelectionToFilter")}createSetListItem(e,t,i){const n=this.valueModel.hasGroups(),{isSelected:o,isExpanded:s}=this.isSelectedExpanded(e),{value:r,depth:a,isGroup:l,hasIndeterminateExpandState:d,selectedListener:c,expandedListener:h}=this.newSetListItemAttributes(e),u={focusWrapper:i,value:r,params:this.setFilterParams,translate:e=>this.translateForSetFilter(e),valueFormatter:this.valueFormatter,item:e,isSelected:o,isTree:t,depth:a,groupsExist:n,isGroup:l,isExpanded:s,hasIndeterminateExpandState:d},p=this.createBean(new ZMe(u));return p.addEventListener("selectionChanged",c),h&&p.addEventListener("expandedChanged",h),p}newSetTreeItemAttributes(e){var t,i,n;const o=this.valueModel.hasGroups();return e.key===UMe?{value:()=>this.getSelectAllLabel(),isGroup:o,depth:e.depth,hasIndeterminateExpandState:!0,selectedListener:e=>this.onSelectAll(e.isSelected),expandedListener:e=>this.onExpandAll(e.item,e.isExpanded)}:e.key===KMe?{value:()=>this.getAddSelectionToFilterLabel(),depth:e.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:e=>{this.onAddCurrentSelectionToFilterChange(e.isSelected)}}:e.children?{value:null!==(s=null===(r=(a=this.setFilterParams).treeListFormatter)||void 0===r?void 0:r.call(a,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==s?s:e.treeKey,depth:e.depth,isGroup:!0,selectedListener:e=>this.onGroupItemSelected(e.item,e.isSelected),expandedListener:e=>this.onExpandedChanged(e.item,e.isExpanded)}:{value:null!==(t=null===(i=(n=this.setFilterParams).treeListFormatter)||void 0===i?void 0:i.call(n,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==t?t:e.treeKey,depth:e.depth,selectedListener:e=>this.onItemSelected(e.item.key,e.isSelected)};var s,r,a}newSetListItemAttributes(e){return this.isSetFilterModelTreeItem(e)?this.newSetTreeItemAttributes(e):e===UMe?{value:()=>this.getSelectAllLabel(),selectedListener:e=>this.onSelectAll(e.isSelected)}:e===KMe?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:e=>{this.onAddCurrentSelectionToFilterChange(e.isSelected)}}:{value:this.valueModel.getValue(e),selectedListener:e=>this.onItemSelected(e.item,e.isSelected)}}updateSetListItem(e,t){const{isSelected:i,isExpanded:n}=this.isSelectedExpanded(e);t.refresh(e,i,n)}isSelectedExpanded(e){let t,i;return this.isSetFilterModelTreeItem(e)?(i=e.expanded,t=e.key===UMe?this.isSelectAllSelected():e.key===KMe?this.valueModel.isAddCurrentSelectionToFilterChecked():e.children?this.areAllChildrenSelected(e):this.valueModel.isKeySelected(e.key)):t=e===UMe?this.isSelectAllSelected():e===KMe?this.valueModel.isAddCurrentSelectionToFilterChecked():this.valueModel.isKeySelected(e),{isSelected:t,isExpanded:i}}isSetFilterModelTreeItem(e){return void 0!==(null===e||void 0===e?void 0:e.treeKey)}initMiniFilter(){const{eMiniFilter:e}=this,t=this.getLocaleTextFunc();e.setDisplayed(!this.setFilterParams.suppressMiniFilter),e.setValue(this.valueModel.getMiniFilter()),e.onValueChange((()=>this.onMiniFilterInput())),e.setInputAriaLabel(t("ariaSearchFilterValues","Search filter values")),this.addManagedElementListeners(e.getInputElement(),{keydown:e=>this.onMiniFilterKeyDown(e)})}updateMiniFilter(){const{eMiniFilter:e}=this;e.isDisplayed()!==!this.setFilterParams.suppressMiniFilter&&e.setDisplayed(!this.setFilterParams.suppressMiniFilter);const t=this.valueModel.getMiniFilter();e.getValue()!==t&&e.setValue(t)}afterGuiAttached(e){super.afterGuiAttached(e),this.resetExpansion(),this.refreshVirtualList();const{eMiniFilter:t}=this;t.setInputPlaceholder(this.translateForSetFilter("searchOoo")),e&&e.suppressFocus||(t.isDisplayed()?t.getFocusableElement().focus():this.virtualList.awaitStable((()=>this.virtualList.focusRow(0))))}afterGuiDetached(){super.afterGuiDetached(),this.setFilterParams.excelMode&&this.resetMiniFilter();const e=this.getModel();!this.setFilterParams.excelMode&&this.areModelsEqual(e,this.getModelFromUi())||(this.resetUiToActiveModel(e),this.showOrHideResults())}applyModel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api";this.setFilterParams.excelMode&&"rowDataUpdated"!==e&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();const t=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(t&&!this.getModel())return!1;const i=super.applyModel(e),n=this.getModel();return n?(t||this.valueModel.setAppliedModelKeys(new Set),n.values.forEach((e=>{this.valueModel.addToAppliedModelKeys(e)}))):t||this.valueModel.setAppliedModelKeys(null),i}isModelValid(e){return!this.setFilterParams.excelMode||(null==e||e.values.length>0)}doesFilterPass(e){if(!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;const{node:t}=e;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(t);if(this.groupingTreeList)return this.doesFilterPassForGrouping(t);const i=this.getValueFromNode(t);return null!=i&&Array.isArray(i)?0===i.length?this.valueModel.hasAppliedModelKey(null):i.some((e=>this.isInAppliedModel(this.createKey(e,t)))):this.isInAppliedModel(this.createKey(i,t))}doesFilterPassForTreeData(e){var t,i,n;return(null===(t=e.childrenAfterGroup)||void 0===t||!t.length)&&this.isInAppliedModel(this.createKey(qMe(null!==(i=e.getRoute())&&void 0!==i?i:[null!==(n=e.key)&&void 0!==n?n:e.id],!0,this.gos.get("groupAllowUnbalanced"))))}doesFilterPassForGrouping(e){var t,i;const n=(null!==(t=null===(i=this.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]).map((t=>this.valueSvc.getKeyForNode(t,e)));return n.push(this.getValueFromNode(e)),this.isInAppliedModel(this.createKey(qMe(n,!1,this.gos.get("groupAllowUnbalanced"))))}isInAppliedModel(e){return this.valueModel.hasAppliedModelKey(e)}getValueFromNode(e){return this.setFilterParams.getValue(e)}getKeyCreatorParams(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{colDef:i,column:n,api:o,context:s}=this.setFilterParams;return{value:e,colDef:i,column:n,node:t,data:null===t||void 0===t?void 0:t.data,api:o,context:s}}onNewRowsLoaded(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()}isValuesTakenFromGrid(){return 2===this.valueModel.getValuesType()}setFilterValues(e){this.valueModel.overrideValues(e).then((()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()}))}resetFilterValues(){this.valueModel.setValuesType(2),this.syncAfterDataChange()}refreshFilterValues(){this.valueModel.isInitialised()&&this.valueModel.refreshValues().then((()=>{this.hardRefreshVirtualList=!0,this.checkAndRefreshVirtualList(),this.onUiChanged()}))}onAnyFilterChanged(){setTimeout((()=>{this.isAlive()&&this.valueModel.refreshAfterAnyFilterChanged().then((e=>{e&&(this.checkAndRefreshVirtualList(),this.showOrHideResults())}))}),0)}onMiniFilterInput(){if(!this.valueModel.setMiniFilter(this.eMiniFilter.getValue()))return;const{applyMiniFilterWhileTyping:e,readOnly:t}=this.setFilterParams;!t&&e?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}updateUiAfterMiniFilterChange(){const{excelMode:e,readOnly:t}=this.setFilterParams;null==e||t?this.checkAndRefreshVirtualList():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged()),this.showOrHideResults()}showOrHideResults(){const e=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;le(this.eFilterNoMatches,e),le(this.eSetFilterList,!e)}resetMiniFilter(){this.eMiniFilter.setValue(null,!0),this.valueModel.setMiniFilter(null)}resetUiToActiveModel(e,t){this.setModelAndRefresh(null==e?null:e.values).then((()=>{this.onUiChanged(!1,"prevent"),null===t||void 0===t||t()}))}handleCancelEnd(e){this.setMiniFilter(null),super.handleCancelEnd(e)}onMiniFilterKeyDown(e){const{excelMode:t,readOnly:i}=this.setFilterParams;e.key!==Do.ENTER||t||i||this.filterOnAllVisibleValues()}filterOnAllVisibleValues(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()}focusRowIfAlive(e){null!=e&&window.setTimeout((()=>{this.isAlive()&&this.virtualList.focusRow(e)}),0)}onSelectAll(e){e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(e,t){const i=e=>{e.children?e.children.forEach((e=>i(e))):this.selectItem(e.key,t)};i(e),this.refreshAfterSelection()}onItemSelected(e,t){this.selectItem(e,t),this.refreshAfterSelection()}selectItem(e,t){t?this.valueModel.selectKey(e):this.valueModel.deselectKey(e)}onExpandAll(e,t){const i=e=>{e.filterPasses&&e.available&&e.children&&(e.children.forEach((e=>i(e))),e.expanded=t)};i(e),this.refreshAfterExpansion()}onExpandedChanged(e,t){e.expanded=t,this.refreshAfterExpansion()}refreshAfterExpansion(){const e=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(e)}refreshAfterSelection(){const e=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(e)}setMiniFilter(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()}getMiniFilter(){return this.valueModel.getMiniFilter()}checkAndRefreshVirtualList(){this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return this.valueModel.getKeys()}getFilterValues(){return this.valueModel.getValues()}getValues(){return this.getFilterKeys()}refreshVirtualList(){this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.checkAndRefreshVirtualList()}translateForSetFilter(e){return this.getLocaleTextFunc()(e,YMe[e])}isSelectAllSelected(){if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(e){const t=e=>{if(e.children){let i=!1,n=!1;return e.children.some((e=>{if(!e.filterPasses||!e.available)return!1;const o=t(e);return void 0===o||(o?i=!0:n=!0,i&&n)}))?void 0:i}return this.valueModel.isKeySelected(e.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&t(e):t(e)}destroy(){this.virtualList=this.destroyBean(this.virtualList),super.destroy()}caseFormat(e){return null==e||"string"!==typeof e||this.caseSensitive?e:e.toUpperCase()}resetExpansion(){if(!this.setFilterParams.treeList)return;const e=this.valueModel.getSelectAllItem();if(this.isSetFilterModelTreeItem(e)){const t=e=>{e.children&&(e.children.forEach((e=>t(e))),e.expanded=!1)};t(e),this.valueModel.updateDisplayedValues("expansion")}}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e,this)}getPositionableElement(){return this.eSetFilterList}},oDe=class{constructor(e){this.model=e}getRowCount(){return this.model.getDisplayedValueCount()}getRow(e){return this.model.getDisplayedItem(e)}areRowsEqual(e,t){return e===t}},sDe=class{constructor(e,t){this.model=e,this.isSelectAllSelected=t}getRowCount(){const e=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+e}getRow(e){if(0===e)return this.model.getSelectAllItem();const t=this.model.showAddCurrentSelectionToFilter(),i=t?2:1;return 1===e&&t?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(e-i)}areRowsEqual(e,t){return e===t}},rDe=class{constructor(e){this.model=e}getRowCount(){return this.model.getRowCount()}getRow(e){return this.model.getRow(e)}areRowsEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.treeKey===t.treeKey&&e.depth===t.depth}},aDe={moduleName:"SetFilter",version:Ewe,userComponents:{agSetColumnFilter:nDe,agSetColumnFloatingFilter:class extends En{constructor(){super('\n            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[sa]),this.eFloatingFilterText=Tn,this.availableValuesListenerAdded=!1,this.filterModelFormatter=new XMe}wireBeans(e){this.colNames=e.colNames}init(e){this.params=e,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(()=>this.params.showParentFilter())),this.setParams(e)}setParams(e){const t=this.colNames.getDisplayNameForColumn(e.column,"header",!0),i=this.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel("".concat(t," ").concat(i("ariaFilterInput","Filter Input")))}refresh(e){this.params=e,this.setParams(e)}onParentModelChanged(e){this.updateFloatingFilterText(e)}parentSetFilterInstance(e){this.params.parentFilterInstance((t=>{t instanceof nDe?e(t):gt(248)}))}addAvailableValuesListener(){this.parentSetFilterInstance((e=>{const t=e.getValueModel();t&&this.addManagedListeners(t,{availableValuesChanged:()=>this.updateFloatingFilterText()})})),this.availableValuesListenerAdded=!0}updateFloatingFilterText(e){this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance((t=>{this.eFloatingFilterText.setValue(this.filterModelFormatter.getModelAsString(e,t))}))}}},icons:{setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate"},dependsOn:[Rwe,au]};var lDe={name:"statusPanel",optionalMethods:["refresh"]},dDe={selector:"AG-STATUS-BAR",component:class extends En{constructor(){super('<div class="ag-status-bar">\n            <div data-ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div data-ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div data-ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>'),this.updateQueued=!1,this.panelsPromise=Rn.resolve(),this.eStatusBarLeft=Tn,this.eStatusBarCenter=Tn,this.eStatusBarRight=Tn,this.compDestroyFunctions={},this.registerCSS(".ag-status-bar{border-top:var(--ag-footer-row-border);display:flex;justify-content:space-between;line-height:1.5;overflow:hidden;padding-left:calc(var(--ag-spacing)*4);padding-right:calc(var(--ag-spacing)*4)}.ag-status-panel{display:inline-flex}.ag-status-name-value{font-weight:500;margin-left:var(--ag-spacing);margin-right:var(--ag-spacing);padding-bottom:var(--ag-widget-container-vertical-padding);padding-top:var(--ag-widget-container-vertical-padding);white-space:nowrap}.ag-status-bar-left{display:inline-flex}.ag-status-bar-center{display:inline-flex;text-align:center}.ag-status-bar-right{display:inline-flex}")}wireBeans(e){this.userCompFactory=e.userCompFactory,this.statusBarSvc=e.statusBarSvc}postConstruct(){this.processStatusPanels(new Map),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))}processStatusPanels(e){var t;const i=null===(t=this.gos.get("statusBar"))||void 0===t?void 0:t.statusPanels;if(i){const t=i.filter((e=>"left"===e.align)),n=i.filter((e=>"center"===e.align)),o=i.filter((e=>!e.align||"right"===e.align));this.panelsPromise=Rn.all([this.createAndRenderComponents(t,this.eStatusBarLeft,e),this.createAndRenderComponents(n,this.eStatusBarCenter,e),this.createAndRenderComponents(o,this.eStatusBarRight,e)])}else this.setDisplayed(!1)}handleStatusBarChanged(){this.updateQueued||(this.updateQueued=!0,this.panelsPromise.then((()=>{this.updateStatusBar(),this.updateQueued=!1})))}updateStatusBar(){var e;const t=null===(e=this.gos.get("statusBar"))||void 0===e?void 0:e.statusPanels,i=Array.isArray(t)&&t.length>0;this.setDisplayed(i);const n=new Map;i&&t.forEach((e=>{var t;const i=null!==(t=e.key)&&void 0!==t?t:e.statusPanel,o=this.statusBarSvc.getStatusPanel(i);if(null!==o&&void 0!==o&&o.refresh){var s;const t=this.gos.addGridCommonParams(null!==(s=e.statusPanelParams)&&void 0!==s?s:{});o.refresh(t)&&(n.set(i,o),delete this.compDestroyFunctions[i],we(o.getGui()))}})),this.resetStatusBar(),i&&this.processStatusPanels(n)}resetStatusBar(){this.eStatusBarLeft.innerHTML="",this.eStatusBarCenter.innerHTML="",this.eStatusBarRight.innerHTML="",this.destroyComponents(),this.statusBarSvc.unregisterAllComponents()}destroy(){this.destroyComponents(),super.destroy()}destroyComponents(){Object.values(this.compDestroyFunctions).forEach((e=>e())),this.compDestroyFunctions={}}createAndRenderComponents(e,t,i){const n=[];return e.forEach((e=>{const t=e.key||e.statusPanel,o=i.get(t);let s;if(o)s=Rn.resolve(o);else{const t={},i=function(e,t,i){return e.getCompDetails(t,lDe,void 0,i,!0)}(this.userCompFactory,e,t);if(null==i)return;s=i.newAgStackInstance()}n.push({key:t,promise:s})})),Rn.all(n.map((e=>e.promise))).then((()=>{n.forEach((e=>{e.promise.then((i=>{const n=()=>{this.destroyBean(i)};this.isAlive()?(this.statusBarSvc.registerStatusPanel(e.key,i),t.appendChild(i.getGui()),this.compDestroyFunctions[e.key]=n):n()}))}))}))}}},cDe=class extends En{constructor(){super('<div class="ag-status-name-value">\n            <span data-ref="eLabel"></span>:&nbsp;\n            <span data-ref="eValue" class="ag-status-name-value-value"></span>\n        </div>'),this.eLabel=Tn,this.eValue=Tn}setLabel(e,t){this.setDisplayed(!1);const i=this.getLocaleTextFunc();this.eLabel.innerHTML=i(e,t)}setValue(e){this.eValue.innerHTML=e}},hDe={selector:"AG-NAME-VALUE",component:cDe};var uDe={moduleName:"StatusBar",version:Ewe,beans:[class extends Si{constructor(){super(),this.beanName="statusBarSvc",this.comps=new Map}registerStatusPanel(e,t){this.comps.set(e,t)}unregisterStatusPanel(e){this.comps.delete(e)}unregisterAllComponents(){this.comps.clear()}getStatusPanel(e){return this.comps.get(e)}destroy(){this.unregisterAllComponents(),super.destroy()}}],userComponents:{agAggregationComponent:class extends En{constructor(){super('<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value data-ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="countAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="minAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="sumAggregationComp"></ag-name-value>\n        </div>',[hDe]),this.sumAggregationComp=Tn,this.countAggregationComp=Tn,this.minAggregationComp=Tn,this.maxAggregationComp=Tn,this.avgAggregationComp=Tn}postConstruct(){bt(this.gos)||Ct(this.gos)?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedEventListeners({cellSelectionChanged:this.onCellSelectionChanged.bind(this),modelUpdated:this.onCellSelectionChanged.bind(this)})):pt(221)}init(e){this.refresh(e)}refresh(e){return this.params=e,this.onCellSelectionChanged(),!0}setAggregationComponentValue(e,t,i){const n=this.getAllowedAggregationValueComponent(e);var o;ze(n)&&n?(n.setValue(function(e,t){return"number"!==typeof e?"":$c(Math.round(100*e)/100,t)}(t,this.getLocaleTextFunc.bind(this))),n.setDisplayed(i)):null===(o=this.getAggregationValueComponent(e))||void 0===o||o.setDisplayed(!1)}getAllowedAggregationValueComponent(e){const{aggFuncs:t}=this.params;return!t||t.includes(e)?this.getAggregationValueComponent(e):null}getAggregationValueComponent(e){return this["".concat(e,"AggregationComp")]}onCellSelectionChanged(){const e=this.beans,{rangeSvc:t,valueSvc:i,cellNavigation:n}=e,o=null===t||void 0===t?void 0:t.getCellRanges();let s=0,r=0,a=0,l=null,d=null;const c={};if(null!==o&&void 0!==o&&o.length&&t)for(let p=0;p<o.length;p++){const h=o[p];let u=t.getRangeStartRow(h);const g=t.getRangeEndRow(h);for(;;){if(_e(u)||!u||rs(g,u)||!u||!h.columns)break;h.columns.forEach((t=>{if(null===u)return;const n=os({rowPinned:u.rowPinned,column:t,rowIndex:u.rowIndex});if(c[n])return;c[n]=!0;const o=ls(e,u);if(_e(o))return;let h=i.getValue(t,o);_e(h)||""===h||(r++,"object"===typeof h&&"value"in h&&(h=h.value,""===h)||("string"===typeof h&&(h=Number(h)),"number"!==typeof h||isNaN(h)||(s+=h,(null===d||h>d)&&(d=h),(null===l||h<l)&&(l=h),a++)))})),u=n.getRowBelow(u)}}const h=r>1,u=a>1;this.setAggregationComponentValue("count",r,h),this.setAggregationComponentValue("sum",s,u),this.setAggregationComponentValue("min",l,u),this.setAggregationComponentValue("max",d,u),this.setAggregationComponentValue("avg",s/a,u)}},agTotalRowCountComponent:class extends cDe{postConstruct(){this.setLabel("totalRows","Total Rows"),bt(this.gos)?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)}),this.onDataChanged()):pt(225)}onDataChanged(){this.setValue($c(this.getRowCountValue(),this.getLocaleTextFunc.bind(this)))}getRowCountValue(){let e=0;return this.beans.rowModel.forEachLeafNode((()=>e+=1)),e}init(){}refresh(){return!0}},agFilteredRowCountComponent:class extends cDe{postConstruct(){if(this.setLabel("filteredRows","Filtered"),!bt(this.gos))return void pt(222);this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);const e=this.onDataChanged.bind(this);this.addManagedEventListeners({modelUpdated:e}),e()}onDataChanged(){const e=this.getTotalRowCountValue(),t=this.getFilteredRowCountValue();this.setValue($c(t,this.getLocaleTextFunc.bind(this))),this.setDisplayed(e!==t)}getTotalRowCountValue(){let e=0;return this.beans.rowModel.forEachNode((()=>e+=1)),e}getFilteredRowCountValue(){let e=0;return this.beans.rowModel.forEachNodeAfterFilter((t=>{t.group||(e+=1)})),e}init(){}refresh(){return!0}},agTotalAndFilteredRowCountComponent:class extends cDe{postConstruct(){bt(this.gos)?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)}),this.onDataChanged()):pt(224)}onDataChanged(){const e=this.getLocaleTextFunc.bind(this),t=$c(this.getFilteredRowCountValue(),e),i=$c(this.getTotalRowCount(),e);if(t===i)this.setValue(t);else{const e=this.getLocaleTextFunc();this.setValue("".concat(t," ").concat(e("of","of")," ").concat(i))}}getFilteredRowCountValue(){let e=0;return this.beans.rowModel.forEachNodeAfterFilter((t=>{t.group||e++})),e}getTotalRowCount(){let e=0;return this.beans.rowModel.forEachNode((t=>{t.group||e++})),e}init(){}refresh(){return!0}},agSelectedRowCountComponent:class extends cDe{postConstruct(){const e=this.gos;if(!bt(e)&&!Ct(e))return void pt(223);this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();const t=this.onRowSelectionChanged.bind(this);this.addManagedEventListeners({modelUpdated:t,selectionChanged:t})}onRowSelectionChanged(){var e,t;const i=null!==(e=null===(t=this.beans.selectionSvc)||void 0===t?void 0:t.getSelectionCount())&&void 0!==e?e:0;if(i<0)return this.setValue("?"),void this.setDisplayed(!0);this.setValue($c(i,this.getLocaleTextFunc.bind(this))),this.setDisplayed(i>0)}init(){}refresh(){return!0}}},selectors:[dDe],apiFunctions:{getStatusPanel:function(e,t){var i;return so(null===(i=e.statusBarSvc)||void 0===i?void 0:i.getStatusPanel(t))}},dependsOn:[Rwe,vc]};function pDe(e){var t;return"MULTI_SHEET"!==(null===(t=e.excelCreator)||void 0===t?void 0:t.getFactoryMode())||(pt(161),!1)}var gDe={moduleName:"ExcelExport",version:Ewe,beans:[class extends eh{constructor(){super(...arguments),this.beanName="excelCreator"}getMergedParams(e){const t=this.gos.get("defaultExcelExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void pt(160);const t=this.getMergedParams(e),i={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};this.packageCompressedFile(i).then((e=>{if(e){const{fileName:i}=t,n="function"===typeof i?i(this.gos.getGridCommonParams()):i;ih(this.getFileName(n),e)}}))}exportDataAsExcel(e){this.export(e)}getDataAsExcel(e){const t=this.getMergedParams(e),i={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(i)}setFactoryMode(e){!function(e){owe=e}(e)}getFactoryMode(){return owe}getSheetDataForExcel(e){const t=this.getMergedParams(e);return this.getData(t)}getMultipleSheetsAsExcel(e){return Twe(e)}exportMultipleSheetsAsExcel(e){(e=>{const{fileName:t="export.xlsx"}=e;Awe(e).then((e=>{e&&ih("function"===typeof t?t():t,e)}))})(e)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(e){var t;const{colModel:i,colNames:n,rowGroupColsSvc:o,valueSvc:s,gos:r}=this.beans,a=l(l({},e),{},{colModel:i,colNames:n,rowGroupColsSvc:o,valueSvc:s,gos:r,suppressRowOutline:e.suppressRowOutline||e.skipRowGroups,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:r.get("excelStyles")||[],rightToLeft:null!==(t=e.rightToLeft)&&void 0!==t?t:r.get("enableRtl"),styleLinker:this.styleLinker.bind(this)});return new uwe(a)}styleLinker(e){const{rowType:t,rowIndex:i,value:n,column:o,columnGroup:s,node:r}=e,a="HEADER"===t,l="HEADER_GROUPING"===t,d=a?o:s;let c=[];const{gos:h,cellStyles:u}=this.beans;if(a||l)return c.push("header"),l&&c.push("headerGroup"),d&&(c=c.concat(Co(d.getDefinition(),h,o||null,s||null))),c;const p=h.get("excelStyles"),g=["cell"];if(!p||!p.length)return g;const m=p.map((e=>e.id)),v=o.getDefinition();return null===u||void 0===u||u.processAllCellClasses(v,h.addGridCommonParams({value:n,data:r.data,node:r,colDef:v,column:o,rowIndex:i}),(e=>{m.indexOf(e)>-1&&g.push(e)})),g.sort(((e,t)=>m.indexOf(e)<m.indexOf(t)?-1:1))}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(e){return Awe(e)}packageFile(e){return Twe(e)}}],apiFunctions:{getDataAsExcel:function(e,t){var i;if(pDe(e))return null===(i=e.excelCreator)||void 0===i?void 0:i.getDataAsExcel(t)},exportDataAsExcel:function(e,t){var i;pDe(e)&&(null===(i=e.excelCreator)||void 0===i||i.exportDataAsExcel(t))},getSheetDataForExcel:function(e,t){var i,n;return null===(i=e.excelCreator)||void 0===i||i.setFactoryMode("MULTI_SHEET"),null===(n=e.excelCreator)||void 0===n?void 0:n.getSheetDataForExcel(t)},getMultipleSheetsAsExcel:function(e,t){var i;return null===(i=e.excelCreator)||void 0===i?void 0:i.getMultipleSheetsAsExcel(t)},exportMultipleSheetsAsExcel:function(e,t){var i;null===(i=e.excelCreator)||void 0===i||i.exportMultipleSheetsAsExcel(t)}},dependsOn:[Uu,Rwe]};var mDe=class extends En{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(function(e){const t=e.cssIdentifier||"default",i=e.direction||"vertical";return'\n        <div class="ag-group ag-'.concat(t,'-group" role="presentation">\n            <div data-ref="eToolbar" class="ag-group-toolbar ag-').concat(t,'-group-toolbar">\n                <ag-checkbox data-ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div data-ref="eContainer" class="ag-group-container ag-group-container-').concat(i," ag-").concat(t,'-group-container"></div>\n        </div>\n    ')}(e),[Zr]),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1,this.eToolbar=Tn,this.cbGroupEnabled=Tn,this.eContainer=Tn;const{enabled:t,items:i,suppressEnabledCheckbox:n,expanded:o,suppressToggleExpandOnEnableChange:s,useToggle:r}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=null==t||t,this.items=i||[],this.useToggle=null!==r&&void 0!==r&&r,this.alignItems=e.alignItems||"center",this.expanded=null==o||o,null!=n&&(this.suppressEnabledCheckbox=n),null!=s&&(this.suppressToggleExpandOnEnableChange=s)}postConstruct(){if(this.setupTitleBar(),this.items.length){const e=this.items;this.items=[],this.addItems(e)}const e=this.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:t,onExpandedChange:i,suppressOpenCloseIcons:n}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(null!==n&&void 0!==n&&n),this.refreshChildDisplay(),le(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange((e=>{this.setEnabled(e,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(e)})),null!=t&&this.onEnableChange(t),null!=i&&this.onExpandedChange(i)}refreshChildDisplay(){var e;le(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),null===(e=this.eTitleBar)||void 0===e||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass("ag-group-item-alignment-".concat(this.alignItems)),this.alignItems=e;const t="ag-group-item-alignment-".concat(this.alignItems);return this.addCssClass(t),this}toggleGroupExpand(e,t){var i;if(null!==(i=this.eTitleBar)&&void 0!==i&&i.isSuppressCollapse()&&!this.useToggle)e=!0,t=!0;else if(e=null!=e?e:!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),le(this.eContainer,e),t||this.dispatchLocalEvent({type:e?"expanded":"collapsed"}),this}addItems(e){e.forEach((e=>this.addItem(e)))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,t){const i=this.eContainer,n=e instanceof En?e.getGui():e;n.classList.add("ag-group-item","ag-".concat(this.cssIdentifier,"-group-item")),t?(i.insertAdjacentElement("afterbegin",n),this.items.unshift(n)):(i.appendChild(n),this.items.push(n))}hideItem(e,t){le(this.items[t],!e)}getItemIndex(e){const t=e instanceof En?e.getGui():e;return this.items.indexOf(t)}setTitle(e){var t;return null===(t=this.eTitleBar)||void 0===t||t.setTitle(e),this}addTitleBarWidget(e){var t;return null===(t=this.eTitleBar)||void 0===t||t.addWidget(e),this}addCssClassToTitleBar(e){var t;null===(t=this.eTitleBar)||void 0===t||t.addCssClass(e)}dispatchEnableChangeEvent(e){const t={type:"enableChange",enabled:e};this.dispatchLocalEvent(t)}setEnabled(e,t,i){var n;(this.enabled=e,this.refreshDisabledStyles(),i||this.toggleGroupExpand(e),t)||(this.cbGroupEnabled.setValue(e),null===(n=this.eToggle)||void 0===n||n.setValue(e));return this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListeners(this,{enableChange:t=>e(t.enabled)}),this}onExpandedChange(e){return this.addManagedListeners(this,{expanded:()=>e(!0),collapsed:()=>e(!1)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var t;return null===(t=this.eTitleBar)||void 0===t||t.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;const t=!this.enabled;this.eContainer.classList.toggle("ag-disabled",t),null===(e=this.eTitleBar)||void 0===e||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&t),this.eContainer.classList.toggle("ag-disabled-group-container",t)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new fDe(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListeners(e,{expandedChanged:e=>this.toggleGroupExpand(e.expanded)}),e}createToggleTitleBar(){var e;const t=this.createManagedBean(new ia({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:e=>{this.setEnabled(e,!0),this.dispatchEnableChangeEvent(e)}}));return t.addCssClass("ag-group-title-bar"),t.addCssClass("ag-".concat(null!==(e=this.params.cssIdentifier)&&void 0!==e?e:"default","-group-title-bar ag-unselectable")),this.eToggle=t,this.toggleGroupExpand(this.enabled),t}},vDe="ag-disabled-group-title-bar";var fDe=class extends En{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(function(e){var t;const i=null!==(t=e.cssIdentifier)&&void 0!==t?t:"default",n=e.suppressKeyboardNavigation?"presentation":"role";return'\n        <div class="ag-group-title-bar ag-'.concat(i,'-group-title-bar ag-unselectable" role="').concat(n,'">\n            <span class="ag-group-title-bar-icon ag-').concat(i,'-group-title-bar-icon" data-ref="eGroupOpenedIcon" role="presentation"></span>\n            <span class="ag-group-title-bar-icon ag-').concat(i,'-group-title-bar-icon" data-ref="eGroupClosedIcon" role="presentation"></span>\n            <span data-ref="eTitle" class="ag-group-title ag-').concat(i,'-group-title"></span>\n        </div>\n    ')}(e)),this.suppressOpenCloseIcons=!1,this.suppressKeyboardNavigation=!1,this.eGroupOpenedIcon=Tn,this.eGroupClosedIcon=Tn,this.eTitle=Tn;const{title:t,suppressOpenCloseIcons:i,suppressKeyboardNavigation:n}=e;t&&t.length>0&&(this.title=t),null!=i&&(this.suppressOpenCloseIcons=i),this.suppressKeyboardNavigation=null!==n&&void 0!==n&&n}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Hr("accordionClosed",this.beans,null)),this.eGroupOpenedIcon.appendChild(Hr("accordionOpen",this.beans,null)),this.addManagedElementListeners(this.getGui(),{click:()=>this.dispatchExpandChanged(),keydown:e=>{switch(e.key){case Do.ENTER:case Do.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case Do.RIGHT:case Do.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===Do.RIGHT)}}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||O(this.getGui(),e)}refreshOpenCloseIcons(e){const t=!this.suppressOpenCloseIcons;le(this.eGroupOpenedIcon,t&&e),le(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){const t={type:"expandedChanged",expanded:e};this.dispatchLocalEvent(t)}setTitle(e){var t;const i=this.getGui(),n=!!e&&e.length>0;e=n?e:void 0,this.eTitle.textContent=null!==(t=e)&&void 0!==t?t:"",le(i,n),e!==this.title&&(this.title=e);const o=i.classList.contains(vDe);return this.refreshDisabledStyles(o),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const t=this.getGui();e?(t.classList.add(vDe),t.removeAttribute("tabindex")):(t.classList.remove(vDe),"string"!==typeof this.title||this.suppressKeyboardNavigation?t.removeAttribute("tabindex"):t.setAttribute("tabindex","0"))}},yDe={selector:"AG-GROUP-COMPONENT",component:mDe};function bDe(e){const{filters:t}=e;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}function CDe(e,t){if(null!=e)for(let i=e.length-1;i>=0;i--)t(e[i],i)}var xDe=class extends Ra{constructor(){super('<div class="ag-multi-filter ag-menu-list-compact"></div>'),this.filterType="multi",this.filterDefs=[],this.filters=[],this.guiDestroyFuncs=[],this.filterGuis=[],this.activeFilterIndices=[],this.lastActivatedMenuItem=null,this.afterFiltersReadyFuncs=[]}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}init(e){this.params=e,this.filterDefs=bDe(e);const{column:t,filterChangedCallback:i}=e;this.column=t,this.filterChangedCallback=i;const n=[];return this.filterDefs.forEach(((e,t)=>{const i=this.createFilter(e,t);null!=i&&n.push(i)})),new Rn((e=>{Rn.all(n).then((t=>{this.filters=t,this.refreshGui("columnMenu").then((()=>{e()}))}))})).then((()=>{this.afterFiltersReadyFuncs.forEach((e=>e())),this.afterFiltersReadyFuncs.length=0}))}refreshGui(e){return e===this.lastOpenedInContainer?Rn.resolve():(this.tabGuardFeature.removeAllChildrenExceptTabGuards(),this.destroyChildren(),Rn.all(this.filters.map(((t,i)=>{const n=this.filterDefs[i],o=function(e,t){return null!=t.title?t.title:e instanceof Ts?e.getFilterTitle():"Filter"}(t,n);let s;if("subMenu"===n.display&&"toolPanel"!==e)s=this.insertFilterMenu(t,o).then((e=>e.getGui()));else if("subMenu"===n.display||"accordion"===n.display){const e=this.insertFilterGroup(t,o);s=Rn.resolve(e.getGui())}else s=Rn.resolve(t.getGui());return s}))).then((t=>{t.forEach(((e,t)=>{t>0&&this.appendChild(De('<div class="ag-filter-separator"></div>')),this.appendChild(e)})),this.filterGuis=t,this.lastOpenedInContainer=e})))}destroyChildren(){this.guiDestroyFuncs.forEach((e=>e())),this.guiDestroyFuncs.length=0,this.filterGuis.length=0}insertFilterMenu(e,t){const i=this.createBean(new rMe);return i.init({menuItemDef:{name:t,subMenu:[],cssClasses:["ag-multi-filter-menu-item"],menuItem:VSe,menuItemParams:{cssClassPrefix:"ag-compact-menu-option",isCompact:!0}},level:0,isAnotherSubMenuOpen:()=>!1,childComponent:e,contextParams:{column:null,node:null,value:null}}).then((()=>{i.setParentComponent(this),this.guiDestroyFuncs.push((()=>this.destroyBean(i))),this.addManagedListeners(i,{menuItemActivated:e=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==e.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=e.menuItem}});const e=i.getGui();return i.addManagedElementListeners(e,{keydown:e=>{const{key:t}=e;switch(t){case Do.UP:case Do.RIGHT:case Do.DOWN:case Do.LEFT:e.preventDefault(),t===Do.RIGHT&&i.openSubMenu(!0)}},focusin:()=>i.activate(),focusout:()=>{i.isSubMenuOpen()||i.isSubMenuOpening()||i.deactivate()}}),i}))}insertFilterGroup(e,t){const i=this.createBean(new mDe({title:t,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push((()=>this.destroyBean(i))),i.addItem(e.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached&&i.addManagedListeners(i,{expanded:()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0,hidePopup:this.hidePopup})}),i}isFilterActive(){return this.filters.some((e=>e.isFilterActive()))}getLastActiveFilterIndex(){const e=this.activeFilterIndices;return e.length>0?e[e.length-1]:null}doesFilterPass(e,t){let i=!0;return this.filters.forEach((n=>{i&&n!==t&&n.isFilterActive()&&(i=n.doesFilterPass(e))})),i}getModelFromUi(){return{filterType:this.filterType,filterModels:this.filters.map((e=>{const t=e;return"function"===typeof t.getModelFromUi?t.getModelFromUi():null}))}}getModel(){if(!this.isFilterActive())return null;return{filterType:this.filterType,filterModels:this.filters.map((e=>e.isFilterActive()?e.getModel():null))}}setModel(e){const t=(e,t)=>new Rn((i=>{const n=e.setModel(t);n?n.then((()=>i())):i()}));let i=[];return null==e?i=this.filters.map(((e,i)=>t(e,null).then((()=>{this.updateActiveList(i)})))):this.filters.forEach(((n,o)=>{const s=e.filterModels.length>o?e.filterModels[o]:null,r=t(n,s).then((()=>{this.updateActiveList(o)}));i.push(r)})),Rn.all(i).then((()=>{}))}applyModel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api",t=!1;return this.filters.forEach((i=>{i instanceof Ts&&(t=i.applyModel(e)||t)})),t}getChildFilterInstance(e){return this.filters[e]}afterGuiAttached(e){let t;e?(this.hidePopup=e.hidePopup,t=this.refreshGui(e.container)):(this.hidePopup=void 0,t=Rn.resolve());const i=null===e||void 0===e?void 0:e.suppressFocus;t.then((()=>{const{filterDefs:t,filters:n,filterGuis:o,beans:s}=this;let r=!!i;t&&CDe(t,((t,s)=>{const a=0===s,d=t.display&&"inline"!==t.display,c=i||!a||d,h=l(l({},null!==e&&void 0!==e?e:{}),{},{suppressFocus:c}),u=null===n||void 0===n?void 0:n[s];if(u&&(this.executeFunctionIfExistsOnFilter(u,"afterGuiAttached",h),a&&!c&&(r=!0)),!i&&a&&d){const e=o[s];e&&(Po(e)||e.focus({preventScroll:!0}),r=!0)}}));const a=Lt(s);r||!Ft(s)&&!this.getGui().contains(a)||this.forceFocusOutOfContainer(!0)}))}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged")}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded")}destroy(){this.filters.forEach((e=>this.destroyBean(e))),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,super.destroy()}executeFunctionIfExists(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];CDe(this.filters,(t=>{this.executeFunctionIfExistsOnFilter(t,e,i)}))}executeFunctionIfExistsOnFilter(e,t){const i=e[t];if("function"===typeof i){for(var n=arguments.length,o=new Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];i.apply(e,o)}}createFilter(e,t){const{filterModifiedCallback:i,doesRowPassOtherFilter:n}=this.params,{filterManager:o,userCompFactory:s}=this.beans;let r;const a=no(s,e,l(l({},o.createFilterParams(this.column,this.column.getColDef())),{},{filterModifiedCallback:i,filterChangedCallback:e=>{this.executeWhenAllFiltersReady((()=>this.filterChanged(t,e)))},doesRowPassOtherFilter:e=>n(e)&&this.doesFilterPass({node:e,data:e.data},r)}),"agTextColumnFilter");if(!a)return null;const d=a.newAgStackInstance();return d.then((e=>r=e)),d}executeWhenAllFiltersReady(e){var t,i;(null!==(t=null===(i=this.filters)||void 0===i?void 0:i.length)&&void 0!==t?t:0)>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveList(e){const{filters:t,activeFilterIndices:i}=this,n=t[e];_i(i,e),n.isFilterActive()&&i.push(e)}filterChanged(e,t){this.updateActiveList(e),this.filterChangedCallback(t);const i=this.filters[e];this.filters.forEach((e=>{e!==i&&"function"===typeof e.onAnyFilterChanged&&e.onAnyFilterChanged()}))}onFocusIn(e){const t=this.lastActivatedMenuItem;null==t||t.getGui().contains(e.target)||(t.deactivate(),this.lastActivatedMenuItem=null)}getModelAsString(e){var t,i,n,o;if(!this.filters||null===e||void 0===e||null===(t=e.filterModels)||void 0===t||!t.length)return"";const s=null!==(i=this.getLastActiveFilterIndex())&&void 0!==i?i:0,r=this.filters[s];return null!==(n=null===(o=r.getModelAsString)||void 0===o?void 0:o.call(r,e.filterModels[s]))&&void 0!==n?n:""}},wDe={moduleName:"MultiFilter",version:Ewe,userComponents:{agMultiColumnFilter:xDe,agMultiColumnFloatingFilter:class extends En{constructor(){super('<div class="ag-multi-floating-filter ag-floating-filter-input"></div>'),this.floatingFilters=[],this.compDetailsList=[]}init(e){this.params=e;const{compDetailsList:t}=this.getCompDetailsList(e);return this.setParams(t)}setParams(e){const t=[];return e.forEach((e=>{const i=null===e||void 0===e?void 0:e.newAgStackInstance();null!=i&&(this.compDetailsList.push(e),t.push(i))})),Rn.all(t).then((e=>{e.forEach(((e,t)=>{this.floatingFilters.push(e);const i=e.getGui();this.appendChild(i),t>0&&le(i,!1)}))}))}refresh(e){this.params=e;const{compDetailsList:t,floatingFilterParamsList:i}=this.getCompDetailsList(e);t.length===this.compDetailsList.length&&t.every(((e,t)=>{var i;return!(null!==(i=this.beans.filterManager)&&void 0!==i&&i.areFilterCompsDifferent(this.compDetailsList[t],e))}))?i.forEach(((e,t)=>{var i;const n=this.floatingFilters[t];null===(i=n.refresh)||void 0===i||i.call(n,e)})):(xe(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(t))}getCompDetailsList(e){const t=[],i=[],n=e.filterParams,o=e.currentParentModel;return bDe(n).forEach(((n,s)=>{const r=l(l({},e),{},{parentFilterInstance:e=>{this.parentMultiFilterInstance((t=>{const i=t.getChildFilterInstance(s);null!=i&&e(i)}))},currentParentModel:()=>{var e,t;return null!==(e=null===(t=o())||void 0===t||null===(t=t.filterModels)||void 0===t?void 0:t[s])&&void 0!==e?e:null}});Di(r.filterParams,n.filterParams);const a=this.getCompDetails(n,r);a&&(t.push(a),i.push(r))})),{compDetailsList:t,floatingFilterParamsList:i}}onParentModelChanged(e,t){t&&t.afterFloatingFilter||this.parentMultiFilterInstance((i=>{if(null==e)this.floatingFilters.forEach(((e,i)=>{e.onParentModelChanged(null,t),le(e.getGui(),0===i)}));else{const n=i.getLastActiveFilterIndex();this.floatingFilters.forEach(((i,o)=>{const s=e.filterModels.length>o?e.filterModels[o]:null;i.onParentModelChanged(s,t);const r=null==n?0===o:o===n;le(i.getGui(),r)}))}}))}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}getCompDetails(e,t){var i;const{filterManager:n,frameworkOverrides:o,userCompFactory:s}=this.beans;return oo(s,e,t,null!==(i=Es(o,e,(()=>n.getDefaultFloatingFilter(this.params.column))))&&void 0!==i?i:"agReadOnlyFloatingFilter")}parentMultiFilterInstance(e){this.params.parentFilterInstance((t=>{t instanceof xDe||gt(120),e(t)}))}}},dependsOn:[Rwe,au,HSe]},SDe={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"};function MDe(e){const{values:t}=e;let i=null;for(let n=0;n<t.length;n++){const e=t[n];"number"===typeof e?null===i?i=e:i+="number"===typeof i?e:BigInt(e):"bigint"===typeof e&&(i=null===i?e:("bigint"===typeof i?i:BigInt(i))+e)}return i}function DDe(e){return e.values.length>0?e.values[0]:null}function kDe(e){return e.values.length>0?Gi(e.values):null}function IDe(e){const{values:t}=e;let i=null;for(let n=0;n<t.length;n++){const e=t[n];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i>e)||(i=e)}return i}function ADe(e){const{values:t}=e;let i=null;for(let n=0;n<t.length;n++){const e=t[n];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i<e)||(i=e)}return i}function TDe(e){var t;const{values:i}=e;let n=0;for(let s=0;s<i.length;s++){const e=i[s];n+=null!=e&&"number"===typeof e.value?e.value:1}const o=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[e.column.getColId()];return o&&o.value===n?o:{value:n,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function EDe(e){var t,i;const{values:n}=e;let o=0,s=0;for(let l=0;l<n.length;l++){const e=n[l];let t=null;"number"===typeof e||"bigint"===typeof e?(t=e,s++):null==e||"number"!==typeof e.value&&"bigint"!==typeof e.value||"number"!==typeof e.count||(t=e.value*("number"===typeof e.value?e.count:BigInt(e.count)),s+=e.count),"number"===typeof t?o+="number"===typeof o?t:BigInt(t):"bigint"===typeof t&&(o=("bigint"===typeof o?o:BigInt(o))+t)}let r=null;s>0&&(r=o/("number"===typeof o?s:BigInt(s)));const a=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[null===(i=e.column)||void 0===i?void 0:i.getColId()];return a&&a.count===s&&a.value===r?a:{count:s,value:r,toString:function(){return"number"===typeof this.value||"bigint"===typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var RDe=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced"]);function LDe(e,t){if(e.sibling)return;const i=new fs(t);Object.keys(e).forEach((t=>{RDe.has(t)||(i[t]=e[t])})),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+e.id,i.sibling=e,e.sibling=i}function PDe(e){e.sibling&&(e.sibling.setRowTop(null),e.sibling.setRowIndex(null),e.sibling=void 0)}var NDe=class extends Sn{constructor(){super(...arguments),this.beanName="valueColsSvc",this.eventName="columnValueChanged",this.columnProcessors={set:(e,t,i)=>this.setValueActive(t,e,i),add:(e,t,i)=>this.setValueActive(!0,e,i),remove:(e,t,i)=>this.setValueActive(!1,e,i)},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColValueActive(e,t,i),getIndexFunc:()=>{},getInitialIndexFunc:()=>{},getValueFunc:e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0},getInitialValueFunc:e=>null!=e.initialAggFunc&&""!=e.initialAggFunc},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>_i(this.columns,e)}}extractCols(e,t){return this.columns=super.extractCols(e,t),this.columns.forEach((e=>{const t=e.getColDef();null!=t.aggFunc&&""!=t.aggFunc?this.setColAggFunc(e,t.aggFunc):e.getAggFunc()||this.setColAggFunc(e,t.initialAggFunc)})),this.columns}setColumnAggFunc(e,t,i){if(!e)return;const n=this.colModel.getColDefCol(e);n&&(this.setColAggFunc(n,t),this.dispatchColumnChangedEvent(this.eventSvc,this.eventName,[n],i))}syncColumnWithState(e,t,i){const n=i("aggFunc").value1;void 0!==n&&("string"===typeof n?(this.setColAggFunc(e,n),e.isValueActive()||(this.setColValueActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e))):(ze(n)&&pt(33),e.isValueActive()&&(this.setColValueActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e))))}setValueActive(e,t,i){if(e!==t.isValueActive()&&(this.setColValueActive(t,e,i),e&&!t.getAggFunc()&&this.aggFuncSvc)){const e=this.aggFuncSvc.getDefaultAggFunc(t);this.setColAggFunc(t,e)}}setColAggFunc(e,t){e.aggFunc=t,e.dispatchStateUpdatedEvent("aggFunc")}setColValueActive(e,t,i){e.aggregationActive!==t&&(e.aggregationActive=t,e.dispatchColEvent("columnValueChanged",i))}},FDe={moduleName:"SharedAggregation",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="aggFuncSvc",this.aggFuncsMap={},this.initialised=!1}postConstruct(){this.init()}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){const e=this.aggFuncsMap;e.sum=MDe,e.first=DDe,e.last=kDe,e.min=IDe,e.max=ADe,e.count=TDe,e.avg=EDe,this.initialised=!0}isAggFuncPossible(e,t){const i=this.getFuncNames(e).includes(t),n=ze(this.aggFuncsMap[t]);return i&&n}getDefaultFuncLabel(e){var t;return null!==(t=SDe[e])&&void 0!==t?t:e}getDefaultAggFunc(e){const t=e.getColDef().defaultAggFunc;if(ze(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,"sum"))return"sum";const i=this.getFuncNames(e);return null!==i&&void 0!==i&&i.length?i[0]:null}addAggFuncs(e){this.init(),e&&Object.entries(e).forEach((e=>{let[t,i]=e;this.aggFuncsMap[t]=i}))}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){const t=e.getColDef().allowedAggFuncs;return null==t?Object.keys(this.aggFuncsMap).sort():t}clear(){this.aggFuncsMap={}}},class extends Si{constructor(){super(...arguments),this.beanName="aggColNameSvc"}getHeaderName(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const{valueColsSvc:i,colModel:n,rowGroupColsSvc:o}=this.beans,s=e.getColDef().pivotValueColumn;let r,a=null;if(ze(s)){var l;const n=null!==(l=null===i||void 0===i?void 0:i.columns)&&void 0!==l?l:[],o=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===n.length,d=void 0!==e.getColDef().pivotTotalColumnIds;if(o&&!d)return t;a=s?s.getAggFunc():null,r=!0}else{const t=e.isValueActive(),i=n.isPivotMode()||0!==(null===o||void 0===o?void 0:o.columns.length);t&&i?(a=e.getAggFunc(),r=!0):r=!1}if(r){const e="string"===typeof a?a:"func",i=this.getLocaleTextFunc()(e,e);return"".concat(i,"(").concat(t,")")}return t}},class extends Si{constructor(){super(...arguments),this.beanName="footerSvc"}addNodes(e,t,i,n,o,s){var r;const a=null===(r=t[0])||void 0===r?void 0:r.parent;if(!a)return;let{index:l}=e;const d=n&&_t(this.gos),c=Vt(this.gos),h=n&&c({node:a});a===o?d===s&&(LDe(a,this.beans),i(a.sibling,l++)):h===s&&(LDe(a,this.beans),i(a.sibling,l++))}getTopDisplayIndex(e,t,i,n){let o=t;if(e[0].footer){if(0===t)return 0;o-=1}const s=e[e.length-1],r=o>=i.length;return s.footer&&r?s.rowIndex:n(o)}},NDe],apiFunctions:{addAggFuncs:function(e,t){e.aggFuncSvc&&e.aggFuncSvc.addAggFuncs(t)},clearAggFuncs:function(e){e.aggFuncSvc&&e.aggFuncSvc.clear()},setColumnAggFunc:function(e,t,i){var n,o;null===(n=e.valueColsSvc)||void 0===n||null===(o=n.setColumnAggFunc)||void 0===o||o.call(n,t,i,"api")}},dependsOn:[Rwe]},ODe={moduleName:"Aggregation",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="aggStage",this.refreshProps=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","suppressAggFilteredOnly","grandTotalRow"]),this.step="aggregate"}wireBeans(e){this.colModel=e.colModel,this.aggFuncSvc=e.aggFuncSvc,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotResultCols=e.pivotResultCols,this.valueSvc=e.valueSvc}execute(e){var t,i;const n=!(null!==(t=this.valueColsSvc)&&void 0!==t&&null!==(t=t.columns)&&void 0!==t&&t.length),o=!this.gos.getCallback("getGroupRowAgg");if(n&&o&&null!==(i=e.changedPath)&&void 0!==i&&i.active)return;const s=this.createAggDetails(e);this.recursivelyCreateAggData(s)}createAggDetails(e){var t;const i=this.colModel.isPivotActive(),n=null===(t=this.valueColsSvc)||void 0===t?void 0:t.columns,o=i&&this.pivotColsSvc?this.pivotColsSvc.columns:[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!_t(this.gos),changedPath:e.changedPath,valueColumns:null!==n&&void 0!==n?n:[],pivotColumns:o,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return void 0!==zt(this.gos)||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){e.changedPath.forEachChangedNodeDepthFirst((t=>{if(!t.hasChildren())return void(t.aggData&&this.setAggData(t,null));if(-1===t.level&&!e.groupIncludeTotalFooter){const i=!this.colModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&i)return void this.setAggData(t,null)}this.aggregateRowNode(t,e)}),!0)}aggregateRowNode(e,t){const i=0===t.valueColumns.length,n=0===t.pivotColumns.length;let o;o=t.userAggFunc?t.userAggFunc({nodes:e.childrenAfterFilter}):i?null:n?this.aggregateRowNodeUsingValuesOnly(e,t):this.aggregateRowNodeUsingValuesAndPivot(e),this.setAggData(e,o),e.sibling&&this.setAggData(e.sibling,o)}aggregateRowNodeUsingValuesAndPivot(e){var t,i;const n={},o=null!==(t=null===(i=this.pivotResultCols)||void 0===i||null===(i=i.getPivotResultCols())||void 0===i?void 0:i.list)&&void 0!==t?t:[];let s=!0;for(let a=0;a<o.length;a++){var r;const t=o[a],i=t.getColDef();if(null!=i.pivotTotalColumnIds){s=!1;continue}const l=null!==(r=i.pivotKeys)&&void 0!==r?r:[];let d;d=e.leafGroup?this.getValuesFromMappedSet(e.childrenMapped,l,i.pivotValueColumn):this.getValuesPivotNonLeaf(e,i.colId),n[i.colId]=this.aggregateValues(d,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}if(!s)for(let a=0;a<o.length;a++){const t=o[a],i=t.getColDef();if(null==i.pivotTotalColumnIds||!i.pivotTotalColumnIds.length)continue;const s=i.pivotTotalColumnIds.map((e=>n[e]));n[i.colId]=this.aggregateValues(s,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}return n}aggregateRowNodeUsingValuesOnly(e,t){const i={},{changedPath:n,valueColumns:o,filteredOnly:s}=t,r=n.active?n.getValueColumnsForNode(e,o):o,a=n.active?n.getNotValueColumnsForNode(e,o):null,l=this.getValuesNormal(e,r,s),d=e.aggData;return r.forEach(((t,n)=>{i[t.getId()]=this.aggregateValues(l[n],t.getAggFunc(),t,e)})),a&&d&&a.forEach((e=>{i[e.getId()]=d[e.getId()]})),i}getValuesPivotNonLeaf(e,t){return e.childrenAfterFilter.map((e=>e.aggData[t]))}getValuesFromMappedSet(e,t,i){let n=e;for(let o=0;o<t.length;o++){const e=t[o];n=n?n[e]:null}return n?n.map((e=>this.valueSvc.getValue(i,e))):[]}getValuesNormal(e,t,i){const n=[];t.forEach((()=>n.push([])));const o=t.length,s=i?e.childrenAfterFilter:e.childrenAfterGroup,r=s.length;for(let a=0;a<r;a++){const e=s[a];for(let i=0;i<o;i++){const o=t[i],s=this.valueSvc.getValue(o,e);n[i].push(s)}}return n}aggregateValues(e,t,i,n,o){const s="string"===typeof t?this.aggFuncSvc.getAggFunc(t):t;if("function"!==typeof s)return gt(109,{aggFuncOrString:t}),null;return s(this.gos.addGridCommonParams({values:e,column:i,colDef:i?i.getColDef():void 0,pivotResultColumn:o,rowNode:n,data:n?n.data:void 0}))}setAggData(e,t){const i=e.aggData;if(e.aggData=t,e.__localEventService){const n=t=>{const n=e.aggData?e.aggData[t]:void 0,o=i?i[t]:void 0;if(n===o)return;const s=this.colModel.getCol(t);s&&e.dispatchCellChangedEvent(s,n,o)};if(i)for(const e of Object.keys(i))n(e);if(t)for(const e of Object.keys(t))i&&e in i||n(e)}}},class extends Si{constructor(){super(...arguments),this.beanName="filterAggStage",this.refreshProps=new Set([]),this.step="filter_aggregates"}wireBeans(e){this.filterManager=e.filterManager}execute(e){var t,i,n=this;const o=this.beans.colModel.isPivotMode(),s=(null===(t=this.filterManager)||void 0===t?void 0:t.isAggregateFilterPresent())||(null===(i=this.filterManager)||void 0===i?void 0:i.isAggregateQuickFilterPresent()),r=zt(this.gos)||(o?e=>e.node.leafGroup:e=>!e.node.group),{changedPath:a}=e,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.childrenAfterFilter&&(e.childrenAfterAggFilter=e.childrenAfterFilter,t&&e.childrenAfterAggFilter.forEach((e=>l(e,t))),n.setAllChildrenCount(e)),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)};a.forEachChangedNodeDepthFirst(s?e=>{var t;e.childrenAfterAggFilter=(null===(t=e.childrenAfterFilter)||void 0===t?void 0:t.filter((e=>{var t;if(r({node:e})){if(this.filterManager.doesRowPassAggregateFilters({rowNode:e}))return l(e,!0),!0}return null===(t=e.childrenAfterAggFilter)||void 0===t?void 0:t.length})))||null,this.setAllChildrenCount(e),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)}:l,!0)}setAllChildrenCountTreeData(e){const t=e.childrenAfterAggFilter;let i=0;if(t){const e=t.length;i=e;for(let o=0;o<e;++o){var n;i+=null!==(n=t[o].allChildrenCount)&&void 0!==n?n:0}}e.setAllChildrenCount(0===i&&e.level>=0?null:i)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach((e=>{e.group?t+=e.allChildrenCount:t++})),e.setAllChildrenCount(t)}setAllChildrenCount(e){e.hasChildren()?this.gos.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)}}],rowModels:["clientSide"],dependsOn:[FDe]},BDe=class extends Sn{constructor(){super(...arguments),this.beanName="pivotColsSvc",this.eventName="columnPivotChanged",this.columnProcessors={set:(e,t,i)=>this.setColPivotActive(e,t,i),add:(e,t,i)=>this.setColPivotActive(e,!0,i),remove:(e,t,i)=>this.setColPivotActive(e,!1,i)},this.columnOrdering={enableProp:"pivot",initialEnableProp:"initialPivot",indexProp:"pivotIndex",initialIndexProp:"initialPivotIndex"},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColPivotActive(e,t,i),getIndexFunc:e=>e.pivotIndex,getInitialIndexFunc:e=>e.initialPivotIndex,getValueFunc:e=>e.pivot,getInitialValueFunc:e=>e.initialPivot},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>_i(this.columns,e)}}syncColumnWithState(e,t,i,n){const{value1:o,value2:s}=i("pivot","pivotIndex");void 0===o&&void 0===s||("number"===typeof s||o?(e.isPivotActive()||(this.setColPivotActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),n&&"number"===typeof s&&(n[e.getId()]=s)):e.isPivotActive()&&(this.setColPivotActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setColPivotActive(e,t,i){e.pivotActive!==t&&(e.pivotActive=t,e.dispatchColEvent("columnPivotChanged",i)),e.dispatchStateUpdatedEvent("pivot")}},GDe=class extends Si{addExpandedCss(e,t){t.isExpandable()&&(e.push("ag-row-group"),e.push(t.expanded?"ag-row-group-expanded":"ag-row-group-contracted"))}getRowExpandedListeners(e){const{rowNode:t}=e,i=this.updateExpandedCss.bind(this,e,t);return{expandedChanged:i,hasChildrenChanged:i}}setExpanded(e,t,i,n){if(e.expanded===t)return;e.expanded=t,e.dispatchRowEvent("expandedChanged");const o=l(l({},ys(e,this.gos,"rowGroupOpened")),{},{expanded:t,event:i||null});this.dispatchExpandedEvent(o,n),this.beans.rowRenderer.refreshCells({rowNodes:[e]})}isExpandable(e){return!e.footer&&(this.beans.colModel.isPivotMode()?e.hasChildren()&&!e.leafGroup:e.hasChildren()||e.master)}updateExpandedCss(e,t){const i=t.isExpandable(),n=1==t.expanded;e.forEachGui(void 0,(e=>{const t=e.rowComp;t.addOrRemoveCssClass("ag-row-group",i),t.addOrRemoveCssClass("ag-row-group-expanded",i&&n),t.addOrRemoveCssClass("ag-row-group-contracted",i&&!n),O(e.element,i&&n)}))}},zDe=class extends Si{wireBeans(e){this.expressionSvc=e.expressionSvc,this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.userCompFactory=e.userCompFactory,this.ctrlsSvc=e.ctrlsSvc,this.rowGroupColsSvc=e.rowGroupColsSvc,this.selectionSvc=e.selectionSvc,this.groupHideOpenParentsSvc=e.groupHideOpenParentsSvc}init(e,t,i,n,o,s,r){this.params=r,this.eGui=t,this.eCheckbox=i,this.eExpanded=n,this.eContracted=o,this.comp=e,this.compClass=s;const{node:a,colDef:l}=r,d=this.isTopLevelFooter();if(!d){if(this.isEmbeddedRowMismatch())return;if(a.footer&&this.gos.get("groupHideOpenParents")){var c;if((null===l||void 0===l?void 0:l.showRowGroup)!==(null===(c=a.rowGroupColumn)||void 0===c?void 0:c.getColId()))return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!d){var h,u;const e=this.rowGroupColsSvc&&a.footer&&a.rowGroupIndex===this.rowGroupColsSvc.columns.findIndex((e=>e.getColId()===(null===l||void 0===l?void 0:l.showRowGroup))),t="multipleColumns"!=this.gos.get("groupDisplayType")||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&this.rowGroupColsSvc&&!a.footer&&(!a.group||null!=a.rowGroupIndex&&a.rowGroupIndex>(null===(h=this.rowGroupColsSvc)||void 0===h?void 0:h.columns.findIndex((e=>e.getColId()===(null===l||void 0===l?void 0:l.showRowGroup))))),i=!a.group&&((null===l||void 0===l?void 0:l.field)||(null===l||void 0===l?void 0:l.valueGetter)),n=this.isExpandable(),o=this.colModel.isPivotMode()&&a.leafGroup&&(null===(u=a.rowGroupColumn)||void 0===u?void 0:u.getColId())===(null===l||void 0===l?void 0:l.showRowGroup);if(!this.showingValueForOpenedParent&&!n&&!i&&!t&&!e&&!o)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded(),this.addManagedPropertyListener("rowSelection",(e=>{let{currentValue:t,previousValue:i}=e;const n="object"===typeof t?t:void 0,o="object"===typeof i?i:void 0;(null===n||void 0===n?void 0:n.checkboxLocation)!==(null===o||void 0===o?void 0:o.checkboxLocation)&&this.refreshCheckbox()}))}getCellAriaRole(){var e,t;const i=null===(e=this.params.colDef)||void 0===e?void 0:e.cellAriaRole,n=null===(t=this.params.column)||void 0===t?void 0:t.getColDef().cellAriaRole;return i||n||"gridcell"}destroy(){super.destroy(),this.expandListener=null,this.destroyCheckbox()}refreshAriaExpanded(){const{node:e,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable())return void B(t);const i=()=>{O(t,this.showingValueForOpenedParent||!!e.expanded)};[this.expandListener]=this.addManagedListeners(e,{expandedChanged:i})||null,i()}isTopLevelFooter(){var e;if(!_t(this.gos))return!1;if(null!=this.params.value||-1!=this.params.node.level)return!1;const t=this.params.colDef;if(null==t)return!0;if(!0===t.showRowGroup)return!0;const i=null===(e=this.rowGroupColsSvc)||void 0===e?void 0:e.columns;return!i||0===i.length||i[0].getId()===t.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const e="left"===this.params.pinned,t="right"===this.params.pinned,i=!e&&!t;return this.gos.get("enableRtl")?this.visibleCols.isPinningLeft()?!t:!i:this.visibleCols.isPinningLeft()?!e:!i}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let i=t.parent;for(;null!=i;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}_e(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){var e,t;this.showingValueForOpenedParent=null!==(e=null===(t=this.groupHideOpenParentsSvc)||void 0===t?void 0:t.isShowingValueForOpenedParent(this.params.node,this.params.column))&&void 0!==e&&e}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){const e=this.adjustParamsWithDetailsFromRelatedColumn(),t=this.getInnerCompDetails(e),{valueFormatted:i,value:n}=e;let o=i;if(null==o){var s;const e=this.displayedGroupNode.rowGroupColumn&&(null===(s=this.params.column)||void 0===s?void 0:s.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));if(""===this.displayedGroupNode.key&&this.displayedGroupNode.group&&e){o=this.getLocaleTextFunc()("blanks","(Blanks)")}else o=null!==n&&void 0!==n?n:null}this.comp.setInnerRenderer(t,o)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(null!=t){if(!t.isRowGroupDisplayed(e.getId()))return this.params}const i=this.params,{value:n,node:o}=this.params,s=this.valueSvc.formatValue(e,o,n);return l(l({},i),{},{valueFormatted:s})}addFooterValue(){const e=this.params.totalValueGetter;let t="";if(e){const i=l(l({},this.params),{},{value:this.params.value});"function"===typeof e?t=e(i):"string"===typeof e?t=this.expressionSvc?this.expressionSvc.evaluate(e,i):"":pt(179)}else{t=this.getLocaleTextFunc()("footerTotal","Total")+" "+(null!=this.params.value?this.params.value:"")}const i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,t)}getInnerCompDetails(e){if(e.fullWidth)return $n(this.userCompFactory,this.gos.get("groupRowRendererParams"),e);const t=$n(this.userCompFactory,e,e),i=e=>e&&e.componentClass==this.compClass;if(t&&!i(t))return t;const n=this.displayedGroupNode.rowGroupColumn,o=null===n||void 0===n?void 0:n.getColDef();if(!o)return;const s=eo(this.userCompFactory,o,e);return s&&!i(s)?s:i(s)&&o.cellRendererParams&&o.cellRendererParams.innerRenderer?$n(this.userCompFactory,o.cellRendererParams,e):void 0}addChildCount(){this.params.suppressCount||(this.addManagedListeners(this.displayedGroupNode,{allChildrenCountChanged:this.updateChildCount.bind(this)}),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,t=this.isShowRowGroupForThisRow()&&null!=e&&e>=0?"(".concat(e,")"):"";this.comp.setChildCount(t)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return null==t||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,i=(e,t)=>{const i=Wr(e,this.beans,null);i&&(t.appendChild(i),this.addDestroyFunc((()=>t.removeChild(i))))};i("groupExpanded",this.eExpanded),i("groupContracted",this.eContracted);const n=t.eGridCell;(null===(e=this.params.column)||void 0===e?void 0:e.isCellEditable(t.node))&&this.gos.get("enableGroupEdit")||!this.isExpandable()||t.suppressDoubleClickExpand||this.addManagedListeners(n,{dblclick:this.onCellDblClicked.bind(this)}),this.addManagedListeners(this.eExpanded,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(this.eContracted,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(n,{keydown:this.onKeyDown.bind(this)}),this.addManagedListeners(t.node,{expandedChanged:this.showExpandAndContractIcons.bind(this)}),this.showExpandAndContractIcons();const o=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListeners(this.displayedGroupNode,{allChildrenCountChanged:o,masterChanged:o,groupChanged:o,hasChildrenChanged:o})}onExpandClicked(e){yi(e)||(fi(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,i=!t.expanded;!i&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(i,e)}scrollToStickyNode(e){this.ctrlsSvc.getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.colModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;const i=this.params.column;if(null!=i&&"string"===typeof i.getColDef().showRowGroup){return this.isShowRowGroupForThisRow()}return!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,colModel:i}=this,{node:n}=e,o=this.isExpandable();if(o){const e=!!this.showingValueForOpenedParent||n.expanded;this.comp.setExpandedDisplayed(e),this.comp.setContractedDisplayed(!e)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const s=i.isPivotMode(),r=s&&t.leafGroup,a=o&&!r,l=n.footer&&-1===n.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),s?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",!!r):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListeners(e,{uiLevelChanged:this.setIndent.bind(this)}),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;const e=this.params,t=e.node,i=!!e.colDef,n=this.gos.get("treeData"),o=!i||n||!0===e.colDef.showRowGroup?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+o,this.comp.addOrRemoveCssClass(this.indentClass,!0),this.eGui.style.setProperty("--ag-indentation-level",String(o))}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag||!this.rowDragSvc)return;const e=this.rowDragSvc.createRowDragComp((()=>this.params.value),this.params.node);this.createManagedBean(e),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.gos.get("rowSelection"),i=Xt(t),n="object"===typeof t?"autoGroupColumn"===i&&Yt(t):this.params.checkbox,o=("function"===typeof n||!0===n)&&!e.footer&&!e.rowPinned&&!e.detail&&!!this.selectionSvc&&wt(this.gos);if(o){const e=this.selectionSvc.createCheckboxSelectionComponent();this.cbComp=e,this.createBean(e),e.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:n,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(e.getGui())}this.comp.setCheckboxVisible(o)}destroyCheckbox(){this.cbComp&&this.eCheckbox.removeChild(this.cbComp.getGui()),this.cbComp=this.destroyBean(this.cbComp)}refreshCheckbox(){this.destroyCheckbox(),this.addCheckboxIfNeeded()}onKeyDown(e){if(!(e.key===Do.ENTER)||this.params.suppressEnterExpand)return;this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(yi(e))return;xi(this.eExpanded,e)||xi(this.eContracted,e)||this.onExpandOrContract(e)}},_De=class extends En{constructor(){super('<span class="ag-cell-wrapper">\n        <span class="ag-group-expanded" data-ref="eExpanded"></span>\n        <span class="ag-group-contracted" data-ref="eContracted"></span>\n        <span class="ag-group-checkbox ag-invisible" data-ref="eCheckbox"></span>\n        <span class="ag-group-value" data-ref="eValue"></span>\n        <span class="ag-group-child-count" data-ref="eChildCount"></span>\n    </span>'),this.eExpanded=Tn,this.eContracted=Tn,this.eCheckbox=Tn,this.eValue=Tn,this.eChildCount=Tn}init(e){const t={setInnerRenderer:(e,t)=>this.setRenderDetails(e,t),setChildCount:e=>this.eChildCount.textContent=e,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setContractedDisplayed:e=>le(this.eContracted,e),setExpandedDisplayed:e=>le(this.eExpanded,e),setCheckboxVisible:e=>this.eCheckbox.classList.toggle("ag-invisible",!e)},i=this.createManagedBean(new zDe),n=!e.colDef,o=this.getGui();i.init(t,o,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),n&&I(o,i.getCellAriaRole())}setRenderDetails(e,t){e?e.newAgStackInstance().then((e=>{if(!e)return;const t=()=>this.destroyBean(e);this.isAlive()?(this.eValue.appendChild(e.getGui()),this.addDestroyFunc(t)):t()})):this.eValue.innerText=t}destroy(){this.destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}},VDe=class extends Si{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}postConstruct(){this.isClientSide=bt(this.gos),this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl})),this.resetStickyContainers()}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventSvc.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getLastPixelOfGroup(e){return this.isClientSide?function(e){if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=Gi(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}(e):function(e){if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){var t,i,n,o,s;let a=null===(t=e.childStore)||void 0===t?void 0:t.getStoreBounds();var r;if(e.footer)a=null===(r=e.sibling.childStore)||void 0===r?void 0:r.getStoreBounds();return(null!==(i=null===(n=a)||void 0===n?void 0:n.heightPx)&&void 0!==i?i:0)+(null!==(o=null===(s=a)||void 0===s?void 0:s.topPx)&&void 0!==o?o:0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}updateStickyRows(e){const t="top"===e;let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const{rowModel:n,rowRenderer:o}=this.beans,s=t?o.firstVisibleVPixel-this.extraTopHeight:o.lastVisibleVPixel-this.extraTopHeight,r=new Set,a=e=>{if(r.add(e),t){const t=this.getLastPixelOfGroup(e),n=s+i+e.rowHeight;e.stickyRowTop=t<n?i+(t-n):i}else{const t=this.getFirstPixelOfGroup(e),n=s-(i+e.rowHeight);e.stickyRowTop=t>n?i-(t-n):i}i=0,r.forEach((e=>{const t=e.stickyRowTop+e.rowHeight;i<t&&(i=t)}))},l=this.areFooterRowsStickySuppressed(),d=this.gos.get("suppressGroupRowsSticky"),c=t=>{if(!t.displayed)return!1;if(t.footer){if(!0===l)return!1;if("grand"===l&&-1===t.level)return!1;if("group"===l&&t.level>-1)return!1;const i=!!t.sibling.rowIndex&&t.sibling.rowIndex+1===t.rowIndex;if("bottom"===e&&i)return!1;return!r.has(t)}if(t.isExpandable()){if(!0===d)return!1;if("bottom"===e)return!1;return!r.has(t)&&t.expanded}return!1};for(let h=0;h<100;h++){let e=s+i;t||(e=s-i);const o=n.getRowIndexAtPixel(e),r=n.getRow(o);if(null==r)break;const l=this.getStickyAncestors(r).find((e=>(t?e.rowIndex<o:e.rowIndex>o)&&c(e)));if(l){a(l);continue}if(!(t?r.rowTop<e:r.rowTop+r.rowHeight>e)||!c(r))break;a(r)}return t||r.forEach((e=>{e.stickyRowTop=i-(e.stickyRowTop+e.rowHeight)})),this.refreshNodesAndContainerHeight(e,r,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t="group"===e,i="grand"===e;return!(!t||!i)||(i?"grand":!!t&&"group")}canRowsBeSticky(){const e=Bt(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some((t=>t.rowNode===e))){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const n=this.stickyTopRowCtrls[i].rowNode;n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const n=this.stickyBottomRowCtrls[i].rowNode;n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,i){const n="top"===e,o=n?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},r=[];for(let p=0;p<o.length;p++){const e=o[p].rowNode;!t.has(e)?(s[e.id]=o[p],e.sticky=!1):r.push(o[p])}const a=new Set;for(let p=0;p<r.length;p++)a.add(r[p].rowNode);const l=[];t.forEach((e=>{a.has(e)||(e.sticky=!0,l.push(this.createRowCon(e,!1,!1)))}));let d=!!l.length||r.length!==o.length;n?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),d=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),d=!0),this.destroyRowCtrls(s,!1);const c=[...r,...l];c.sort(((e,t)=>t.rowNode.rowIndex-e.rowNode.rowIndex)),n||c.reverse(),c.forEach((e=>e.setRowTop(e.rowNode.stickyRowTop)));const h=this.beans.pageBounds;let u=0;return n?(t.forEach((e=>{e.rowIndex<h.getFirstRow()&&(u+=e.rowHeight)})),u>this.topContainerHeight&&(u=this.topContainerHeight),this.setOffsetTop(u)):(t.forEach((e=>{e.rowIndex>h.getLastRow()&&(u+=e.rowHeight)})),u>this.bottomContainerHeight&&(u=this.bottomContainerHeight),this.setOffsetBottom(u)),!!d&&(n?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0)}ensureRowHeightsValid(){let e=!1;const t=t=>{const i=t.rowNode;if(i.rowHeightEstimated){const t=Mt(this.beans,i);i.setRowHeight(t.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}};var HDe={moduleName:"GroupCellRenderer",version:Ewe,userComponents:{agGroupRowRenderer:_De,agGroupCellRenderer:_De},dynamicBeans:{groupCellRendererCtrl:zDe},icons:{groupContracted:"tree-closed",groupExpanded:"tree-open"},dependsOn:[Rwe]},WDe={moduleName:"GroupColumn",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="autoColSvc"}postConstruct(){this.addManagedPropertyListener("autoGroupColumnDef",(e=>this.onAutoGroupColumnDefChanged(pn(e.source))))}addAutoCols(e){null!=this.autoCols&&(e.list=this.autoCols.list.concat(e.list),e.tree=this.autoCols.tree.concat(e.tree),un(e))}createAutoCols(e,t){var i,n,o;const s=this.beans,{colModel:r,gos:a,rowGroupColsSvc:l,colGroupSvc:d}=s,c=r.isPivotMode(),h=Wt(a,c),u=c?a.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),p=null===l||void 0===l?void 0:l.columns,g=()=>{this.autoCols&&(an(s,this.autoCols.tree),this.autoCols=null)};if(!(p&&p.length>0||a.get("treeData"))||u||h)return void g();const m=this.generateAutoCols(p),v=hn(m,(null===(i=this.autoCols)||void 0===i?void 0:i.list)||null),f=e.treeDepth,y=this.autoCols?this.autoCols.treeDepth:-1;if(v&&y==f)return;g();const b=null!==(n=null===d||void 0===d?void 0:d.findDepth(e.tree))&&void 0!==n?n:0,C=null!==(o=null===d||void 0===d?void 0:d.balanceTreeForAutoCols(m,b))&&void 0!==o?o:[];this.autoCols={list:m,tree:C,treeDepth:b,map:{}};t((e=>{if(!e)return null;const t=e.filter((e=>!ln(e)));return[...m,...t]}))}getAutoCol(e){var t,i;return null!==(t=null===(i=this.autoCols)||void 0===i?void 0:i.list.find((t=>gn(t,e))))&&void 0!==t?t:null}getAutoCols(){var e,t;return null!==(e=null===(t=this.autoCols)||void 0===t?void 0:t.list)&&void 0!==e?e:null}generateAutoCols(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],i=this.gos.get("treeData");let n=Ht(this.gos);return i&&n&&(pt(182),n=!1),n?e.forEach(((e,i)=>{t.push(this.createOneAutoCol(e,i))})):t.push(this.createOneAutoCol()),t}updateAutoCols(e){var t;null===(t=this.autoCols)||void 0===t||t.list.forEach(((t,i)=>this.updateOneAutoCol(t,i,e)))}isSuppressAutoCol(){const e=this.gos;if("custom"===e.get("groupDisplayType"))return!0;return"custom"===e.get("treeDataDisplayType")}createOneAutoCol(e,t){let i;i=e?"".concat(on,"-").concat(e.getId()):on;const n=this.createAutoColDef(i,e,t);n.colId=i;const o=new Li(n,null,i,!0);return this.createBean(o),o}updateOneAutoCol(e,t,i){const n=e.getColDef(),o="string"==typeof n.showRowGroup?n.showRowGroup:void 0,s=this.beans,r=null!=o?s.colModel.getColDefCol(o):void 0,a=this.createAutoColDef(e.getId(),null!==r&&void 0!==r?r:void 0,t);e.setColDef(a,null,i),Cn(s,e,a,i)}createAutoColDef(e,t,i){let n=this.createBaseColDef(t);if(Di(n,this.gos.get("autoGroupColumnDef")),n=xn(this.beans,n,e,!0),!this.gos.get("treeData")){_e(n.field)&&_e(n.valueGetter)&&_e(n.filterValueGetter)&&"agGroupColumnFilter"!==n.filter&&(n.filter=!1)}i&&i>0&&(n.headerCheckboxSelection=!1);const o=Gt(this.gos),s=n.valueGetter||null!=n.field;return o&&!s&&(n.sortIndex=void 0,n.initialSort=void 0),n}createBaseColDef(e){const t=this.gos.get("autoGroupColumnDef"),i={headerName:this.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(i.cellRenderer="agGroupCellRenderer"),e){const t=e.getColDef();Object.assign(i,{headerName:this.beans.colNames.getDisplayNameForColumn(e,"header"),headerValueGetter:t.headerValueGetter}),t.cellRenderer&&Object.assign(i,{cellRendererParams:{innerRenderer:t.cellRenderer,innerRendererParams:t.cellRendererParams}}),i.showRowGroup=e.getColId()}else i.showRowGroup=!0;return i}onAutoGroupColumnDefChanged(e){this.updateAutoCols(e)}destroy(){var e;an(this.beans,null===(e=this.autoCols)||void 0===e?void 0:e.tree),super.destroy()}},class extends Si{constructor(){super(...arguments),this.beanName="showRowGroupCols"}refresh(){this.showRowGroupCols=[],this.showRowGroupColsMap={};const{colModel:e,rowGroupColsSvc:t}=this.beans;e.getCols().forEach((e=>{const i=e.getColDef().showRowGroup,n="string"===typeof i;(n||!0===i)&&(this.showRowGroupCols.push(e),n?this.showRowGroupColsMap[i]=e:t&&t.columns.forEach((t=>{this.showRowGroupColsMap[t.getId()]=e})))}))}getShowRowGroupCols(){return this.showRowGroupCols}getShowRowGroupCol(e){return this.showRowGroupColsMap[e]}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;const{rowGroupColsSvc:i,colModel:n}=this.beans;if(!0===t&&i)return i.columns.slice(0);const o=n.getColDefCol(t);return o?[o]:null}isRowGroupDisplayed(e,t){const{colDef:i}=e;if(null==(null===i||void 0===i?void 0:i.showRowGroup))return!1;const n=!0===i.showRowGroup,o=i.showRowGroup===t;return n||o}},class extends Sn{constructor(){super(...arguments),this.beanName="rowGroupColsSvc",this.eventName="columnRowGroupChanged",this.columnProcessors={set:(e,t,i)=>this.setActive(t,e,i),add:(e,t,i)=>this.setActive(!0,e,i),remove:(e,t,i)=>this.setActive(!1,e,i)},this.columnOrdering={enableProp:"rowGroup",initialEnableProp:"initialRowGroup",indexProp:"rowGroupIndex",initialIndexProp:"initialRowGroupIndex"},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColRowGroupActive(e,t,i),getIndexFunc:e=>e.rowGroupIndex,getInitialIndexFunc:e=>e.initialRowGroupIndex,getValueFunc:e=>e.rowGroup,getInitialValueFunc:e=>e.initialRowGroup},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>_i(this.columns,e)}}moveColumn(e,t,i){if(0===this.columns.length)return;const n=this.columns[e],o=this.columns.slice(e,t);this.columns.splice(e,1),this.columns.splice(t,0,n),this.eventSvc.dispatchEvent({type:this.eventName,columns:o,column:1===o.length?o[0]:null,source:i})}syncColumnWithState(e,t,i,n){const{value1:o,value2:s}=i("rowGroup","rowGroupIndex");void 0===o&&void 0===s||("number"===typeof s||o?(e.isRowGroupActive()||(this.setColRowGroupActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),n&&"number"===typeof s&&(n[e.getId()]=s)):e.isRowGroupActive()&&(this.setColRowGroupActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setActive(e,t,i){e!==t.isRowGroupActive()&&(this.setColRowGroupActive(t,e,i),Kt(this.gos,e)&&this.colModel.setColsVisible([t],!e,i))}setColRowGroupActive(e,t,i){e.rowGroupActive!==t&&(e.rowGroupActive=t,e.dispatchColEvent("columnRowGroupChanged",i)),e.dispatchStateUpdatedEvent("rowGroup")}},BDe,NDe],dependsOn:[Rwe,HDe]},jDe={moduleName:"ClientSideRowModelHierarchy",version:Ewe,rowModels:["clientSide"],beans:[class extends Si{constructor(){super(...arguments),this.beanName="flattenStage",this.refreshProps=new Set(["groupHideParentOfSingleChild","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupTotalRow","masterDetail"]),this.step="map"}execute(e){const t=e.rowNode,i=[],n=this.beans.colModel.isPivotMode(),o=n&&t.leafGroup,s=o?[t]:t.childrenAfterSort,r=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(r,s,i,n,0);if(!o&&i.length>0&&r.grandTotalRow){LDe(t,this.beans);const e="top"===r.grandTotalRow;this.addRowNodeToRowsToDisplay(r,t.sibling,i,0,e)}return i}getFlattenDetails(){let e=this.gos.get("groupHideParentOfSingleChild");return e||(e=this.gos.get("groupRemoveSingleChildren"),!e&&this.gos.get("groupRemoveLowestSingleChildren")&&(e="leafGroupsOnly")),{groupHideParentOfSingleChild:e,isGroupMultiAutoColumn:Ht(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:_t(this.gos),groupTotalRow:Vt(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,n,o){if(null!==t&&void 0!==t&&t.length)for(let r=0;r<t.length;r++){const a=t[r],l=a.hasChildren(),d=n&&!l,c=!0===e.groupHideParentOfSingleChild&&l&&1===a.childrenAfterGroup.length,h="leafGroupsOnly"===e.groupHideParentOfSingleChild&&l&&a.leafGroup&&1===a.childrenAfterGroup.length,u=n&&a.leafGroup,p=e.hideOpenParents&&a.expanded&&!a.master&&!u;if(!d&&!p&&!c&&!h&&this.addRowNodeToRowsToDisplay(e,a,i,o),!n||!a.leafGroup)if(l){const t=c||h;if(a.expanded||t){const s=e.groupTotalRow({node:a});s||PDe(a);const r=t?o:o+1;"top"===s&&(LDe(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,i,r)),this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,i,n,r),"bottom"===s&&(LDe(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,i,r))}}else{var s;const t=null===(s=this.beans.masterDetailSvc)||void 0===s?void 0:s.getDetail(a);t&&this.addRowNodeToRowsToDisplay(e,t,i,o)}}}addRowNodeToRowsToDisplay(e,t,i,n,o){o?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}},class extends GDe{constructor(){super(...arguments),this.beanName="expansionSvc",this.events=[]}wireBeans(e){this.rowModel=e.rowModel}expandRows(e){const t=new Set(e);this.rowModel.forEachNode((e=>{e.id&&t.has(e.id)&&(e.expanded=!0)})),this.onGroupExpandedOrCollapsed()}expandAll(e){const{gos:t,colModel:i,eventSvc:n}=this.beans,o=this.rowModel,s=t.get("treeData"),r=i.isPivotActive(),a=t=>{t&&t.forEach((t=>{const i=()=>{t.expanded=e,a(t.childrenAfterGroup)};if(s){return void(ze(t.childrenAfterGroup)&&i())}if(r){return void(!t.leafGroup&&i())}t.group&&i()}))},l=o.rootNode;l&&a(l.childrenAfterGroup),o.refreshModel({step:"map"}),n.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}onGroupExpandedOrCollapsed(){this.rowModel.refreshModel({step:"map"})}dispatchExpandedEvent(e,t){this.events.push(e);const i=()=>{this.rowModel.onRowGroupOpened(),this.events.forEach((e=>this.eventSvc.dispatchEvent(e))),this.events=[]};t?i():(null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.debounce(i)),this.dispatchExpandedDebounced())}debounce(e){const t=this.beans.animationFrameSvc;if(!t)return()=>window.setTimeout(e,0);let i=!1;return()=>{t.active?i||(i=!0,t.addDestroyTask((()=>{i=!1,e()}))):window.setTimeout(e,0)}}}],dependsOn:[Rwe]},UDe={moduleName:"StickyRow",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="stickyRowSvc"}createStickyRowFeature(e,t,i){const n=this.gos;if(Bt(n)&&bt(n)||Ct(n))return e.createManagedBean(new VDe(t,i))}}]},KDe={selector:"AG-GRID-HEADER-DROP-ZONES",component:class extends En{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel());const e=this.onRowGroupChanged.bind(this);this.addManagedEventListeners({columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedPropertyListener("rowGroupPanelShow",e),this.addManagedPropertyListener("pivotPanelShow",(()=>this.onPivotPanelShow())),this.onRowGroupChanged()}createNorthPanel(){const e=document.createElement("div");e.classList.add("ag-column-drop-wrapper"),I(e,"presentation");const t=new wMe(!0);this.rowGroupComp=this.createManagedBean(t);const i=new xMe(!0);this.pivotComp=this.createManagedBean(i),e.appendChild(t.getGui()),e.appendChild(i.getGui());const n=this.onDropPanelVisible.bind(this);return this.addManagedListeners(t,{displayChanged:n}),this.addManagedListeners(i,{displayChanged:n}),this.onDropPanelVisible(),e}onDropPanelVisible(){const{rowGroupComp:e,pivotComp:t}=this,i=e.isDisplayed()&&t.isDisplayed(),n="ag-column-drop-horizontal-half-width";e.addOrRemoveCssClass(n,i),t.addOrRemoveCssClass(n,i)}onRowGroupChanged(){const e=this.rowGroupComp;if(!e)return;const t=this.gos.get("rowGroupPanelShow");if("always"===t)e.setDisplayed(!0);else if("onlyWhenGrouping"===t){var i;const t=0!==(null===(i=this.beans.rowGroupColsSvc)||void 0===i||null===(i=i.columns)||void 0===i?void 0:i.length);e.setDisplayed(t)}else e.setDisplayed(!1)}onPivotPanelShow(){const e=this.pivotComp;if(!e)return;const t=this.gos.get("pivotPanelShow");if("always"===t)e.setDisplayed(!0);else if("onlyWhenPivoting"===t){const t=this.beans.colModel.isPivotActive();e.setDisplayed(t)}else e.setDisplayed(!1)}}},YDe=class{constructor(){this.allSets={},this.allParents=[]}removeFromChildrenAfterGroup(e,t){this.getSet(e).removeFromChildrenAfterGroup[t.id]=!0}isRemoveFromAllLeafChildren(e,t){return!!this.getSet(e).removeFromAllLeafChildren[t.id]}preventRemoveFromAllLeafChildren(e,t){delete this.getSet(e).removeFromAllLeafChildren[t.id]}removeFromAllLeafChildren(e,t){this.getSet(e).removeFromAllLeafChildren[t.id]=!0}getSet(e){return this.allSets[e.id]||(this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(e)),this.allSets[e.id]}getAllParents(){return this.allParents}flush(){this.allParents.forEach((e=>{var t,i;const n=this.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter((e=>!n.removeFromChildrenAfterGroup[e.id])),e.allLeafChildren=null!==(t=null===(i=e.allLeafChildren)||void 0===i?void 0:i.filter((e=>!n.removeFromAllLeafChildren[e.id])))&&void 0!==t?t:null,e.updateHasChildren();const o=e.sibling;o&&(o.childrenAfterGroup=e.childrenAfterGroup,o.allLeafChildren=e.allLeafChildren)})),this.allSets={},this.allParents.length=0}};function ZDe(e,t){const i=e.sourceRowIndex,n=t.sourceRowIndex,o=i>=0,s=n>=0;return o&&s?i-n:!o&&!s?e.__objectId-t.__objectId:o?1:-1}var XDe={moduleName:"SharedRowGrouping",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="groupHideOpenParentsSvc"}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents")||this.gos.get("treeData"))return;const t=e=>{this.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach((e=>{e.hasChildren()&&t(e)}))};e&&e.executeFromRootNode((e=>t(e)))}pullDownGroupDataForHideOpenParents(e,t){if(!this.gos.get("groupHideOpenParents")||_e(e))return;const{colModel:i,showRowGroupCols:n}=this.beans;e.forEach((e=>{var o;(null!==(o=null===n||void 0===n?void 0:n.getShowRowGroupCols())&&void 0!==o?o:[]).forEach((n=>{const o=n.getColDef().showRowGroup;if("string"!==typeof o)return void gt(110);const s=o,r=i.getColDefCol(s);if(!(r===e.rowGroupColumn))if(t)tMe(e,i,n.getId(),void 0);else{const t=this.getFirstChildOfFirstChild(e,r);t&&tMe(e,i,n.getId(),t.key)}}))}))}isShowingValueForOpenedParent(e,t){if(!this.gos.get("groupHideOpenParents"))return!1;if(!e.groupData)return!1;if(null!=e.rowGroupColumn){const i=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(i))return!1}return null!=e.groupData[t.getId()]}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const e=i.parent;if(null===e||void 0===e||!e.childrenAfterSort||i!==e.childrenAfterSort[0])return null;if(e.rowGroupColumn===t)return e;i=e}return null}}],apiFunctions:{setRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.setColumns(t,"api")},removeRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.removeColumns(t,"api")},addRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.addColumns(t,"api")},getRowGroupColumns:function(e){var t,i;return null!==(t=null===(i=e.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]},moveRowGroupColumn:function(e,t,i){var n,o;null===(n=e.rowGroupColsSvc)||void 0===n||null===(o=n.moveColumn)||void 0===o||o.call(n,t,i,"api")}},dependsOn:[Rwe,FDe,WDe,UDe]},qDe={moduleName:"RowGrouping",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="groupStage",this.refreshProps=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),this.step="group"}wireBeans(e){this.colModel=e.colModel,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc,this.selectionSvc=e.selectionSvc,this.showRowGroupCols=e.showRowGroupCols}execute(e){var t;const i=this.createGroupingDetails(e);if(i.transactions)this.handleTransaction(i);else{const t=!0===e.afterColumnsChanged;this.shotgunResetEverything(i,t)}const n=e.changedPath;this.positionLeafsAndGroups(n),this.orderGroups(i),null===(t=this.selectionSvc)||void 0===t||t.updateSelectableAfterGrouping(n)}positionLeafsAndGroups(e){e.forEachChangedNodeDepthFirst((e=>{if(e.childrenAfterGroup){const t=[],i=[];let n;e.childrenAfterGroup.forEach((e=>{var o;null!==(o=e.childrenAfterGroup)&&void 0!==o&&o.length?""!==e.key||n?i.push(e):n=e:t.push(e)})),n&&i.push(n),e.childrenAfterGroup=[...t,...i]}}),!1)}createGroupingDetails(e){var t,i,n;const{rowNode:o,changedPath:s,rowNodeTransactions:r,rowNodesOrderChanged:a}=e,l=null===(t=this.rowGroupColsSvc)||void 0===t?void 0:t.columns;return{expandByDefault:this.gos.get("groupDefaultExpanded"),groupedCols:l,rootNode:o,pivotMode:this.colModel.isPivotMode(),groupedColCount:null!==(i=null===l||void 0===l?void 0:l.length)&&void 0!==i?i:0,transactions:r,rowNodesOrderChanged:!!a,changedPath:s,groupAllowUnbalanced:this.gos.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gos.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gos.getCallback("initialGroupOrderComparator"),keyCreators:null!==(n=null===l||void 0===l?void 0:l.map((e=>e.getColDef().keyCreator)))&&void 0!==n?n:[]}}handleTransaction(e){e.transactions.forEach((t=>{var i,n,o;const s=new YDe;null!==(i=t.remove)&&void 0!==i&&i.length&&this.removeNodes(t.remove,e,s),null!==(n=t.update)&&void 0!==n&&n.length&&this.moveNodesInWrongPath(t.update,e,s),null!==(o=t.add)&&void 0!==o&&o.length&&this.insertNodes(t.add,e);const r=s.getAllParents().slice();s.flush(),this.removeEmptyGroups(r,e)})),e.rowNodesOrderChanged&&this.sortChildren(e)}sortChildren(e){e.changedPath.forEachChangedNodeDepthFirst((t=>{(function(e){if(!e)return!1;const t=e.length;if(t<2)return!1;let i=!1;for(let n=1;n<t;n++)if(ZDe(e[n-1],e[n])>0){i=!0;break}return!!i&&(e.sort(ZDe),!0)})(t.childrenAfterGroup)&&e.changedPath.addParentNode(t)}),!1,!0)}orderGroups(e){const t=e.initialGroupOrderComparator;ze(t)&&function e(i){ze(i.childrenAfterGroup)&&!i.leafGroup&&(i.childrenAfterGroup.sort(((e,i)=>t({nodeA:e,nodeB:i}))),i.childrenAfterGroup.forEach((t=>e(t))))}(e.rootNode)}getExistingPathForNode(e,t){const i=[];let n=e.parent;for(;n&&n!==t.rootNode;)i.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field}),n=n.parent;return i.reverse(),i}moveNodesInWrongPath(e,t,i){e.forEach((e=>{t.changedPath.active&&t.changedPath.addParentNode(e.parent);const n=e=>e.key;zi(this.getExistingPathForNode(e,t).map(n),this.getGroupInfo(e,t).map(n))||this.moveNode(e,t,i)}))}moveNode(e,t,i){if(this.removeNodesFromParents([e],t,i),this.insertOneNode(e,t,i),e.setData(e.data),t.changedPath.active){const i=e.parent;t.changedPath.addParentNode(i)}}removeNodes(e,t,i){this.removeNodesFromParents(e,t,i),t.changedPath.active&&e.forEach((e=>t.changedPath.addParentNode(e.parent)))}forEachParentGroup(e,t,i){let n=t;for(;n&&n!==e.rootNode;)i(n),n=n.parent}removeNodesFromParents(e,t,i){const n=null==i,o=i||new YDe;e.forEach((e=>{this.removeFromParent(e,o),this.forEachParentGroup(t,e.parent,(t=>{o.removeFromAllLeafChildren(t,e)}))})),n&&o.flush()}removeEmptyGroups(e,t){let i=!0;const n=e=>{var t,i;const n=this.getChildrenMappedKey(e.key,e.rowGroupColumn),o=e.parent;return!(null===o||void 0===o||!o.childrenMapped||!o.childrenMapped[n])&&(!!e.group&&0===(null!==(t=null===(i=e.childrenAfterGroup)||void 0===i?void 0:i.length)&&void 0!==t?t:0))};for(;i;){i=!1;const o=new YDe;e.forEach((e=>{this.forEachParentGroup(t,e,(e=>{var t;n(e)&&(i=!0,this.removeFromParent(e,o),null===(t=this.selectionSvc)||void 0===t||t.setNodesSelected({nodes:[e],newValue:!1,source:"rowGroupChanged"}))}))})),o.flush()}}removeFromParent(e,t){var i;e.parent&&(t?t.removeFromChildrenAfterGroup(e.parent,e):(_i(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));const n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);null!==(i=e.parent)&&void 0!==i&&i.childrenMapped&&delete e.parent.childrenMapped[n],e.setRowTop(null),e.setRowIndex(null)}addToParent(e,t){const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn);null!==t&&void 0!==t&&t.childrenMapped&&t.childrenMapped[i]!==e&&(t.childrenMapped[i]=e,t.childrenAfterGroup.push(e),iMe(t,this.beans,!0))}areGroupColsEqual(e,t){return null!=e&&null!=t&&e.pivotMode===t.pivotMode&&(zi(e.groupedCols,t.groupedCols)&&zi(e.keyCreators,t.keyCreators))}checkAllGroupDataAfterColsChanged(e){const t=e=>{e&&e.forEach((e=>{var i;if(!e.group)return;const n={field:e.field,key:e.key,rowGroupColumn:e.rowGroupColumn,leafNode:null===(i=e.allLeafChildren)||void 0===i?void 0:i[0]};this.setGroupData(e,n),t(e.childrenAfterGroup)}))};t(e.rootNode.childrenAfterGroup)}shotgunResetEverything(e,t){var i,n;if(this.noChangeInGroupingColumns(e,t))return;null===(i=this.selectionSvc)||void 0===i||null===(n=i.filterFromSelection)||void 0===n||n.call(i,(e=>!e.group));const{groupedCols:o}=e,s=e.rootNode;s.leafGroup=0===o.length,s.childrenAfterGroup=[],s.childrenMapped={},s.updateHasChildren();const r=s.sibling;r&&(r.childrenAfterGroup=s.childrenAfterGroup,r.childrenMapped=s.childrenMapped),this.insertNodes(s.allLeafChildren,e)}noChangeInGroupingColumns(e,t){let i=!1;const n=this.showRowGroupCols.getShowRowGroupCols(),o=n?n.map((e=>e.getId())).join("-"):"";return t&&(i=this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==o&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=o,i}insertNodes(e,t){e.forEach((e=>{this.insertOneNode(e,t),t.changedPath.active&&t.changedPath.addParentNode(e.parent)}))}insertOneNode(e,t,i){const n=this.getGroupInfo(e,t),o=this.findParentForNode(e,n,t,i);o.group||pt(184,{parentGroupData:o.data,childNodeData:e.data}),e.parent=o,e.level=n.length,o.childrenAfterGroup.push(e),o.updateHasChildren()}findParentForNode(e,t,i,n){let o=i.rootNode;return t.forEach(((t,s)=>{o=this.getOrCreateNextNode(o,t,s,i),null!==n&&void 0!==n&&n.isRemoveFromAllLeafChildren(o,e)?null===n||void 0===n||n.preventRemoveFromAllLeafChildren(o,e):o.allLeafChildren.push(e)})),o}getOrCreateNextNode(e,t,i,n){var o;const s=this.getChildrenMappedKey(t.key,t.rowGroupColumn);let r=null===e||void 0===e||null===(o=e.childrenMapped)||void 0===o?void 0:o[s];return r||(r=this.createGroup(t,e,i,n),this.addToParent(r,e)),r}createGroup(e,t,i,n){const o=new fs(this.beans);return o.group=!0,o.field=e.field,o.rowGroupColumn=e.rowGroupColumn,this.setGroupData(o,e),o.key=e.key,o.id=this.createGroupId(o,t,i),o.level=i,o.leafGroup=i===n.groupedColCount-1,o.allLeafChildren=[],o.setAllChildrenCount(0),o.rowGroupIndex=i,o.childrenAfterGroup=[],o.childrenMapped={},o.updateHasChildren(),o.parent=t,this.setExpandedInitialValue(n,o),o}createGroupId(e,t,i){const n=(e,t)=>{if(!e.rowGroupColumn)return null;const i=t?n(t,t.parent,0):null;return"".concat(null==i?"":i+"-").concat(e.rowGroupColumn.getColId(),"-").concat(e.key)};return ms+n(e,t,i)}setGroupData(e,t){e.groupData={};this.showRowGroupCols.getShowRowGroupCols().forEach((i=>{const n=e.rowGroupColumn;null!==n&&i.isRowGroupDisplayed(n.getId())&&(e.groupData[i.getColId()]=this.valueSvc.getValue(n,t.leafNode))}))}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){if(e.pivotMode&&t.leafGroup)return void(t.expanded=!1);const i=e.isGroupOpenByDefault;if(i){const e={rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn};t.expanded=1==i(e)}else-1!==e.expandByDefault?t.expanded=t.level<e.expandByDefault:t.expanded=!0}getGroupInfo(e,t){const i=[];return t.groupedCols.forEach((n=>{let o=this.valueSvc.getKeyForNode(n,e),s=null!==o&&void 0!==o&&""!==o;if((t.pivotMode||!t.groupAllowUnbalanced)&&!s&&(o="",s=!0),s){const t={key:o,field:n.getColDef().field,rowGroupColumn:n,leafNode:e};i.push(t)}})),i}}],rowModels:["clientSide"],dependsOn:[XDe,ODe,jDe]},QDe={moduleName:"RowGroupingPanel",version:Ewe,selectors:[KDe],icons:{pivotPanel:"pivot",rowGroupPanel:"group",panelDelimiter:"small-right",panelDelimiterRtl:"small-left"},dependsOn:[Rwe,Lh]},JDe={moduleName:"GroupFilter",version:Ewe,userComponents:{agGroupColumnFilter:class extends Ra{constructor(){super('\n            <div class="ag-group-filter">\n                <div data-ref="eGroupField"></div>\n                <div data-ref="eUnderlyingFilter"></div>\n            </div>\n        '),this.eGroupField=Tn,this.eUnderlyingFilter=Tn}wireBeans(e){this.filterManager=e.filterManager,this.showRowGroupCols=e.showRowGroupCols}postConstruct(){this.initialiseTabGuard({})}init(e){return this.updateParams(e).then((()=>{this.addManagedEventListeners({columnRowGroupChanged:()=>this.onColumnRowGroupChanged(),filterDestroyed:e=>this.onFilterDestroyed(e)})}))}refresh(e){return this.updateParams(e),!0}updateParams(e){return this.params=e,this.validateParams(),this.updateGroups()}validateParams(){const{colDef:e}=this.params;e.field&&pt(234),e.filterValueGetter&&pt(235),e.filterParams&&pt(236)}updateGroups(){const e=this.updateGroupField();return this.getUnderlyingFilters(e)}getSourceColumns(){var e;if(this.groupColumn=this.params.column,this.gos.get("treeData"))return pt(237),[];const t=null===(e=this.showRowGroupCols)||void 0===e?void 0:e.getSourceColumnsForGroupColumn(this.groupColumn);return t||(pt(183),[])}updateGroupField(){const e=this.eGroupField;xe(e),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);const t=this.getSourceColumns(),i=t.filter((e=>e.isFilterAllowed()));return i.length?(1===t.length?(this.selectedColumn=i[0],le(e,!1)):(this.selectedColumn&&i.some((e=>e.getId()===this.selectedColumn.getId()))||(this.selectedColumn=i[0]),this.createGroupFieldSelectElement(i),e.appendChild(this.eGroupFieldSelect.getGui()),e.appendChild(De('<div class="ag-filter-separator"></div>')),le(e,!0)),i):(this.selectedColumn=void 0,le(e,!1),null)}createGroupFieldSelectElement(e){const t=this.createManagedBean(new Ma);this.eGroupFieldSelect=t;const i=this.getLocaleTextFunc();t.setLabel(i("groupFilterSelect","Select field:")),t.setLabelAlignment("top"),t.addOptions(e.map((e=>{var t;return{value:e.getId(),text:null!==(t=this.beans.colNames.getDisplayNameForColumn(e,"groupFilter",!1))&&void 0!==t?t:void 0}}))),t.setValue(this.selectedColumn.getId()),t.onValueChange((e=>this.updateSelectedColumn(e))),t.addCssClass("ag-group-filter-field-select-wrapper"),1===e.length&&t.setDisabled(!0)}getUnderlyingFilters(e){var t;if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,null===(t=this.beans.colFilter)||void 0===t||t.setColFilterActive(this.groupColumn,!1,"columnRowGroupChanged"),Rn.resolve();const i=[],n=[];return e.forEach((e=>{const t=this.filterManager.getOrCreateFilterWrapper(e);null!==t&&void 0!==t&&t.filterPromise&&i.push(t.filterPromise.then((t=>(t&&n.push({filter:t,column:e}),e.getId()===this.selectedColumn.getId()&&(this.selectedFilter=null!==t&&void 0!==t?t:void 0),t))))})),Rn.all(i).then((()=>{var e;this.filterColumnPairs=n,null===(e=this.beans.colFilter)||void 0===e||e.setColFilterActive(this.groupColumn,this.isFilterActive(),"columnRowGroupChanged")}))}addUnderlyingFilterElement(){var e,t;if(xe(this.eUnderlyingFilter),!this.selectedColumn)return Rn.resolve();const i=this.createManagedBean(new bs(this.selectedColumn,"COLUMN_MENU"));return this.filterWrapperComp=i,i.hasFilter()?(this.eUnderlyingFilter.appendChild(i.getGui()),null!==(e=null===(t=i.getFilter())||void 0===t?void 0:t.then((()=>{var e,t;null===(e=i.afterGuiAttached)||void 0===e||e.call(i,this.afterGuiAttachedParams),null!==(t=this.afterGuiAttachedParams)&&void 0!==t&&t.suppressFocus||!this.eGroupFieldSelect||this.eGroupFieldSelect.isDisabled()||this.eGroupFieldSelect.getFocusableElement().focus()})))&&void 0!==e?e:Rn.resolve()):Rn.resolve()}updateSelectedColumn(e){var t;if(!e)return;null===(t=this.filterWrapperComp)||void 0===t||t.afterGuiDetached(),this.destroyBean(this.filterWrapperComp);const i=this.getFilterColumnPair(e);this.selectedColumn=null===i||void 0===i?void 0:i.column,this.selectedFilter=null===i||void 0===i?void 0:i.filter,this.dispatchLocalEvent({type:"selectedColumnChanged"}),this.addUnderlyingFilterElement()}isFilterActive(){var e;return!(null===(e=this.filterColumnPairs)||void 0===e||!e.some((e=>{let{filter:t}=e;return t.isFilterActive()})))}doesFilterPass(){return!0}getModel(){return null}setModel(){return Rn.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement()}afterGuiDetached(){var e,t;xe(this.eUnderlyingFilter),null===(e=this.selectedFilter)||void 0===e||null===(t=e.afterGuiDetached)||void 0===t||t.call(e)}onColumnRowGroupChanged(){this.updateGroups().then((()=>{this.dispatchLocalEvent({type:"columnRowGroupChanged"})}))}onFilterDestroyed(e){var t;let{column:i,source:n}=e;if("gridDestroyed"===n)return;const o=i.getColId();null!==(t=this.filterColumnPairs)&&void 0!==t&&t.some((e=>{let{column:t}=e;return t.getColId()===o}))&&setTimeout((()=>{this.isAlive()&&this.updateGroups()}))}getFilterColumnPair(e){var t;if(e)return null===(t=this.filterColumnPairs)||void 0===t?void 0:t.find((t=>{let{column:i}=t;return i.getId()===e}))}getSelectedFilter(){return this.selectedFilter}getSelectedColumn(){return this.selectedColumn}isFilterAllowed(){return!!this.selectedColumn}},agGroupColumnFloatingFilter:class extends En{constructor(){super('\n            <div data-ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        '),this.eFloatingFilter=Tn,this.haveAddedColumnListeners=!1}wireBeans(e){this.filterManager=e.filterManager}init(e){this.params=e;const t="multipleColumns"===this.gos.get("groupDisplayType");return new Rn((e=>{this.params.parentFilterInstance((i=>{this.parentFilterInstance=i,t?this.setupUnderlyingFloatingFilterElement().then((()=>e())):(this.setupReadOnlyFloatingFilterElement(),e())}))})).then((()=>{const e=this.onColChange.bind(this);this.addManagedListeners(this.parentFilterInstance,{selectedColumnChanged:e,columnRowGroupChanged:e})}))}refresh(e){this.params=e,this.setParams()}setParams(){var e;const t=this.beans.colNames.getDisplayNameForColumn(this.params.column,"header",!0),i=this.getLocaleTextFunc();null===(e=this.eFloatingFilterText)||void 0===e||e.setInputAriaLabel("".concat(t," ").concat(i("ariaFilterInput","Filter Input")))}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new oa),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(()=>this.params.showParentFilter())),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,xe(this.eFloatingFilter);const e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){const t=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(t)return this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListeners(e,{visibleChanged:this.onColumnVisibleChanged.bind(this),colDefChanged:this.onColDefChanged.bind(this)})),t.newAgStackInstance().then((e=>{var t,i;this.underlyingFloatingFilter=e,null===(t=this.underlyingFloatingFilter)||void 0===t||t.onParentModelChanged(null===(i=this.parentFilterInstance.getSelectedFilter())||void 0===i?void 0:i.getModel()),this.appendChild(e.getGui()),this.showingUnderlyingFloatingFilter=!0}))}return this.setupReadOnlyFloatingFilterElement(),Rn.resolve()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(e){if(!e.column)return;const t=this.filterManager.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);var i,n;t&&(null===(i=this.underlyingFloatingFilter)||void 0===i||null===(n=i.refresh)||void 0===n||n.call(i,t.params))}onParentModelChanged(e,t){var i,n;this.showingUnderlyingFloatingFilter?null===(i=this.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(null===(n=this.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel(),t):this.updateDisplayedValue()}updateDisplayedValue(){const{eFloatingFilterText:e,parentFilterInstance:t}=this;if(!t||!e)return;const i=t.getSelectedFilter();if(!i)return e.setValue(""),void e.setDisplayed(!1);if(e.setDisplayed(!0),i.getModelAsString){const t=i.getModel();e.setValue(null==t?"":i.getModelAsString(t))}else e.setValue("")}onColChange(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}}},dependsOn:[Rwe,au]},$De={moduleName:"ViewportRowModel",version:Ewe,rowModels:["viewport"],beans:[class extends Si{constructor(){super(...arguments),this.beanName="rowModel",this.firstRow=-1,this.lastRow=-1,this.rowCount=-1,this.rowNodesByIndex={}}ensureRowHeightsValid(e,t,i,n){return!1}postConstruct(){const e=this.beans;this.rowHeight=Dt(e),this.addManagedEventListeners({viewportChanged:this.onViewportChanged.bind(this)}),this.addManagedPropertyListener("viewportDatasource",(()=>this.updateDatasource())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=Dt(e),this.updateRowHeights()}))}start(){this.updateDatasource()}isLastRowIndexKnown(){return!0}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){var e;const t=this.datasource;t&&(null===(e=t.destroy)||void 0===e||e.call(t),this.beans.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)}updateDatasource(){const e=this.gos.get("viewportDatasource");e&&this.setViewportDatasource(e)}getPageSize(){return this.gos.get("viewportRowModelPageSize")}getBufferSize(){return this.gos.get("viewportRowModelBufferSize")}calculateFirstRow(e){const t=this.getBufferSize(),i=this.getPageSize(),n=e-t;return n<0?0:Math.floor(n/i)*i}calculateLastRow(e){if(-1===e)return e;const t=this.getBufferSize(),i=this.getPageSize(),n=e+t,o=Math.ceil(n/i)*i,s=this.rowCount-1;return Math.min(o,s)}onViewportChanged(e){const t=this.calculateFirstRow(e.firstRow),i=this.calculateLastRow(e.lastRow);var n;this.firstRow===t&&this.lastRow===i||(this.firstRow=t,this.lastRow=i,this.purgeRowsNotInViewport(),null===(n=this.datasource)||void 0===n||n.setViewportRange(this.firstRow,this.lastRow))}purgeRowsNotInViewport(){const e=this.rowNodesByIndex;Object.keys(e).forEach((t=>{const i=parseInt(t,10);if(i<this.firstRow||i>this.lastRow){if(this.isRowFocused(i))return;delete e[i]}}))}isRowFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;return t.rowIndex===e}setViewportDatasource(e){this.destroyDatasource(),this.datasource=e,this.rowCount=-1,e.init?e.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):pt(226)}getType(){return"viewport"}getRow(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}getRowCount(){return-1===this.rowCount?0:this.rowCount}getRowIndexAtPixel(e){return 0!==this.rowHeight?Math.floor(e/this.rowHeight):0}getRowBounds(e){const t=this.rowHeight;return{rowHeight:t,rowTop:t*e}}updateRowHeights(){const e=this.rowHeight;this.forEachNode((t=>{t.setRowHeight(e),t.setRowTop(e*t.rowIndex)})),this.eventSvc.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1})}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}isEmpty(){return this.rowCount>0}isRowsToRender(){return this.rowCount>0}getNodesInRangeForSelection(e,t){const i=e.rowIndex,n=t.rowIndex,o=i<this.firstRow||i>this.lastRow,s=n<this.firstRow||n>this.lastRow;if(o||s)return[];const r=[],a=i<=n?n:i;for(let l=i<=n?i:n;l<=a;l++)r.push(this.rowNodesByIndex[l]);return r}forEachNode(e){let t=0;Object.keys(this.rowNodesByIndex).forEach((i=>{const n=parseInt(i,10),o=this.rowNodesByIndex[n];e(o,t),t++}))}setRowData(e){const t=this.rowNodesByIndex;for(const[i,n]of Object.entries(e)){const e=parseInt(i,10);if(e>=this.firstRow&&e<=this.lastRow){let i=t[e];_e(i)&&(i=this.createBlankRowNode(e),t[e]=i),i.setDataAndId(n,e.toString())}}}createBlankRowNode(e){const t=new fs(this.beans),i=this.rowHeight;return t.setRowHeight(i),t.setRowTop(i*e),t.setRowIndex(e),t}setRowCount(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e===this.rowCount)return;this.rowCount=e;const i=this.eventSvc;i.dispatchEventOnce({type:"rowCountReady"}),i.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:t,animate:!1})}isRowPresent(e){return!!this.getRowNode(e.id)}}],dependsOn:[Rwe]};var eke="paste",tke="dragCopy",ike="clipboard";var nke={moduleName:"Clipboard",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="clipboardSvc",this.clientSideRowModel=null,this.gridCtrl=null,this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}postConstruct(){const{gos:e,rowModel:t,ctrlsSvc:i}=this.beans;bt(e)&&(this.clientSideRowModel=t),i.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl}))}destroy(){super.destroy(),this.clientSideRowModel=null,this.gridCtrl=null}pasteFromClipboard(){!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((e=>{pt(40,{e:e,method:"readText"}),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let e=!1;const t=t=>{const i=(new Date).getTime();i-this.lastPasteOperationTime<50&&(e=!0,t.preventDefault()),this.lastPasteOperationTime=i};this.executeOnTempElement((e=>{e.addEventListener("paste",t),e.focus({preventScroll:!0})}),(i=>{const n=i.value;e?this.refocusLastFocusedCell():this.processClipboardData(n),i.removeEventListener("paste",t)}))}refocusLastFocusedCell(){const{focusSvc:e}=this.beans,t=e.getFocusedCell();t&&e.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){const e=this.gos.get("clipboardDelimiter");return ze(e)?e:"\t"}processClipboardData(e){if(null==e)return;let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";const i=[],n=e=>"\r"===e||"\n"===e;let o=!1;if(""===e)return[[""]];for(let s=0,r=0,a=0;a<e.length;a++){const l=e[a-1],d=e[a],c=e[a+1],h=()=>{i[s]||(i[s]=[]),i[s][r]||(i[s][r]="")};if(h(),'"'===d&&(o?'"'===c?(i[s][r]+='"',a++):o=!1:(void 0===l||l===t||n(l))&&(o=!0)),!o&&'"'!==d){if(d===t){r++,h();continue}if(n(d)){r=0,s++,h(),"\r"===d&&"\n"===c&&a++;continue}}i[s][r]+=d}return i}(e,this.getClipboardDelimiter());const i=this.gos.getCallback("processDataFromClipboard");if(i&&(t=i({data:t})),null==t)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(t);const{rangeSvc:n}=this.beans;this.doPasteOperation(((e,i,o,s)=>{(null===n||void 0===n?void 0:n.isMoreThanOneCell())&&!this.hasOnlyOneValueToPaste(t)?this.pasteIntoActiveRange(n,t,e,i,s):this.pasteStartingFromFocusedCell(t,e,i,o,s)}))}doPasteOperation(e){const t="clipboard",{eventSvc:i,focusSvc:n,rowRenderer:o,gos:s}=this.beans;i.dispatchEvent({type:"pasteStart",source:t});const{clientSideRowModel:r}=this,a=null===r||void 0===r?void 0:r.rootNode,l=a&&new Lc(s.get("aggregateOnlyChangedColumns"),a),d={},c=[];e(d,c,n.getFocusedCell(),l);const h=[...c];l&&(r.doAggregate(l),l.forEachChangedNodeDepthFirst((e=>{h.push(e)}))),o.refreshCells({rowNodes:h}),this.dispatchFlashCells(d),this.fireRowChanged(c),this.refocusLastFocusedCell(),i.dispatchEvent({type:"pasteEnd",source:t})}pasteIntoActiveRange(e,t,i,n,o){const s=this.getRangeSize(e)%t.length!=0;let r=0,a=0;this.iterateActiveRanges(!1,((e,l,d,c)=>{if(c-r>=t.length){if(s)return;r+=a,a=0}const h=t[c-r];n.push(l);const u=this.gos.getCallback("processCellFromClipboard");d.forEach(((t,n)=>{if(!t.isCellEditable(l)||t.isSuppressPaste(l))return;n>=h.length&&(n%=h.length);const s=this.processCell(l,t,h[n],tke,u,!0);l.setDataValue(t,s,eke),o&&o.addParentNode(l.parent,[t]);const{rowIndex:r,rowPinned:a}=e,d=os({rowIndex:r,column:t,rowPinned:a});i[d]=!0})),a++}))}getDisplayedColumnsStartingAt(e){let t=e;const i=[],n=this.beans.visibleCols;for(;null!=t;)i.push(t),t=n.getColAfter(t);return i}pasteStartingFromFocusedCell(e,t,i,n,o){if(!n)return;const s={rowIndex:n.rowIndex,rowPinned:n.rowPinned},r=this.getDisplayedColumnsStartingAt(n.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,i,t,o):this.pasteMultipleValues(e,s,i,r,t,ike,o)}isPasteSingleValueIntoRange(e){const t=this.beans.rangeSvc;return this.hasOnlyOneValueToPaste(e)&&!!t&&!t.isEmpty()}pasteSingleValueIntoRange(e,t,i,n){const o=e[0][0];this.iterateActiveRanges(!1,((e,s,r)=>{t.push(s),r.forEach((e=>this.updateCellValue(s,e,o,i,ike,n)))}))}hasOnlyOneValueToPaste(e){return 1===e.length&&1===e[0].length}copyRangeDown(){const{rangeSvc:e,gos:t,valueSvc:i}=this.beans;if(!e||e.isEmpty())return;const n=[];this.doPasteOperation(((e,o,s,r)=>{const a=t.getCallback("processCellForClipboard"),l=t.getCallback("processCellFromClipboard");this.iterateActiveRanges(!0,((t,s,d)=>{n.length?(o.push(s),d.forEach(((i,o)=>{if(!i.isCellEditable(s)||i.isSuppressPaste(s))return;const a=this.processCell(s,i,n[o],tke,l,!0);s.setDataValue(i,a,eke),r&&r.addParentNode(s.parent,[i]);const{rowIndex:d,rowPinned:c}=t,h=os({rowIndex:d,column:i,rowPinned:c});e[h]=!0}))):d.forEach((e=>{const t=this.processCell(s,e,i.getValue(e,s),tke,a,!1,!0);n.push(t)}))}))}))}removeLastLineIfBlank(e){const t=Gi(e);if(t&&1===t.length&&""===t[0]){if(1===e.length)return;_i(e,t)}}fireRowChanged(e){"fullRow"===this.gos.get("editType")&&e.forEach((e=>{this.eventSvc.dispatchEvent({type:"rowValueChanged",node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}))}pasteMultipleValues(e,t,i,n,o,s,r){let a=t;const l=this.beans,{gos:d,cellNavigation:c}=l,h=null!=this.clientSideRowModel&&!d.get("enableGroupEdit")&&!d.get("treeData");e.forEach((e=>{const t=(()=>{for(;;){if(!a)return null;const e=ls(l,a);if(a=c.getRowBelow({rowPinned:a.rowPinned,rowIndex:a.rowIndex}),null==e)return null;if(!(e.detail||e.footer||h&&e.group))return e}})();t&&(e.forEach(((e,i)=>this.updateCellValue(t,n[i],e,o,s,r))),i.push(t))}))}updateCellValue(e,t,i,n,o,s){if(!e||!t||!t.isCellEditable(e)||t.isSuppressPaste(e))return;const r=this.processCell(e,t,i,o,this.gos.getCallback("processCellFromClipboard"),!0);e.setDataValue(t,r,eke);const{rowIndex:a,rowPinned:l}=e;n[os({rowIndex:a,column:t,rowPinned:l})]=!0,s&&s.addParentNode(e.parent,[t])}copyToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.copyOrCutToClipboard(e)}cutToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.gos.get("suppressCutToClipboard")||(this.eventSvc.dispatchEvent({type:"cutStart",source:t}),this.copyOrCutToClipboard(e,!0),this.eventSvc.dispatchEvent({type:"cutEnd",source:t}))}copyOrCutToClipboard(e,t){let{includeHeaders:i,includeGroupHeaders:n}=e;const{gos:o,focusSvc:s}=this.beans;null==i&&(i=o.get("copyHeadersToClipboard")),null==n&&(n=o.get("copyGroupHeadersToClipboard"));const r={includeHeaders:i,includeGroupHeaders:n},a=o.get("rowSelection"),l=o.get("cellSelection");let d=null;this.shouldCopyCells(l,a)?(this.copySelectedRangeToClipboard(r),d=0):this.shouldCopyRows(a)?(this.copySelectedRowsToClipboard(r),d=1):s.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(r),d=2),t&&null!==d&&this.clearCellsAfterCopy(d)}shouldCopyCells(e,t){const{rangeSvc:i,selectionSvc:n,gos:o}=this.beans;if(!i||i.isEmpty())return!1;if(e){return!("object"===typeof t&&t.copySelectedRows&&!(null!==n&&void 0!==n&&n.isEmpty()))}{const e=o.get("suppressCopySingleCellRanges");return!(!i.isMoreThanOneCell()&&e)}}shouldCopyRows(e){var t;const{selectionSvc:i,gos:n}=this.beans;return null!==(t=null===i||void 0===i?void 0:i.isEmpty())&&void 0!==t&&!t&&(e&&"string"!==typeof e?null!==(o=e.copySelectedRows)&&void 0!==o&&o:!n.get("suppressCopyRowsToClipboard"));var o}clearCellsAfterCopy(e){const t=this.beans,{rangeSvc:i,focusSvc:n,eventSvc:o}=t;if(o.dispatchEvent({type:"keyShortcutChangedCellStart"}),0===e)i.clearCellRangeCellValues({cellEventSource:"clipboardSvc"});else if(1===e)this.clearSelectedRows();else{const e=n.getFocusedCell();if(null==e)return;const i=ls(t,e);i&&this.clearCellValue(i,e.column)}o.dispatchEvent({type:"keyShortcutChangedCellEnd"})}clearSelectedRows(){var e;const{selectionSvc:t,visibleCols:i}=this.beans,n=null!==(e=null===t||void 0===t?void 0:t.getSelectedNodes())&&void 0!==e?e:[],o=i.allCols;for(const s of n)for(const e of o)this.clearCellValue(s,e)}clearCellValue(e,t){if(!t.isCellEditable(e))return;const i=this.beans.valueSvc.getDeleteValue(t,e);e.setDataValue(t,i,"clipboardSvc")}iterateActiveRanges(e,t,i){const n=this.beans.rangeSvc;if(!n||n.isEmpty())return;const o=n.getCellRanges();e?this.iterateActiveRange(o[0],t,i,!0):o.forEach(((e,n)=>this.iterateActiveRange(e,t,i,n===o.length-1)))}iterateActiveRange(e,t,i,n){const{rangeSvc:o,cellNavigation:s}=this.beans;if(!o)return;let r=o.getRangeStartRow(e);const a=o.getRangeEndRow(e);i&&e.columns&&i(e.columns);let l=0,d=!1;for(;!d&&null!=r;){const i=ls(this.beans,r);d=as(r,a),t(r,i,e.columns,l++,d&&n),r=s.getRowBelow(r)}}copySelectedRangeToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.beans.rangeSvc;if(!t||t.isEmpty())return;const i=t.areAllRangesAbleToMerge(),{data:n,cellsToFlash:o}=i?this.buildDataFromMergedRanges(t,e):this.buildDataFromRanges(t,e);this.copyDataToClipboard(n),this.dispatchFlashCells(o)}buildDataFromMergedRanges(e,t){const i=new Set,n=e.getCellRanges(),o=new Map,s=[],r={};n.forEach((t=>{t.columns.forEach((e=>i.add(e)));const{rowPositions:n,cellsToFlash:a}=this.getRangeRowPositionsAndCellsToFlash(e,t);n.forEach((e=>{const t="".concat(e.rowIndex,"-").concat(e.rowPinned||"null");o.get(t)||(o.set(t,!0),s.push(e))})),Object.assign(r,a)}));const a=this.beans.visibleCols.allCols,l=Array.from(i);l.sort(((e,t)=>a.indexOf(e)-a.indexOf(t)));return{data:this.buildExportParams({columns:l,rowPositions:s,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:r}}buildDataFromRanges(e,t){const i=e.getCellRanges(),n=[],o={};return i.forEach((i=>{const{rowPositions:s,cellsToFlash:r}=this.getRangeRowPositionsAndCellsToFlash(e,i);Object.assign(o,r),n.push(this.buildExportParams({columns:i.columns,rowPositions:s,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))})),{data:n.join("\n"),cellsToFlash:o}}getRangeRowPositionsAndCellsToFlash(e,t){const i=[],n={},o=e.getRangeStartRow(t),s=e.getRangeEndRow(t);let r=o;for(;r&&(i.push(r),t.columns.forEach((e=>{const{rowIndex:t,rowPinned:i}=r,o=os({rowIndex:t,column:e,rowPinned:i});n[o]=!0})),!as(r,s));)r=this.beans.cellNavigation.getRowBelow(r);return{rowPositions:i,cellsToFlash:n}}getCellsToFlashFromRowNodes(e){const t=this.beans.visibleCols.allCols,i={};for(let n=0;n<e.length;n++){const{level:o,rowIndex:s,rowPinned:r,sibling:a}=e[n],l=-1===o?a.rowIndex:s;if(null!=l)for(let e=0;e<t.length;e++){i[os({rowIndex:l,column:t[e],rowPinned:r})]=!0}}return i}copyFocusedCellToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.beans.focusSvc.getFocusedCell();if(null==t)return;const i=os(t),n={rowPinned:t.rowPinned,rowIndex:t.rowIndex},o=t.column,s=this.buildExportParams({columns:[o],rowPositions:[n],includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(s),this.dispatchFlashCells({[i]:!0})}copySelectedRowsToClipboard(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{columnKeys:i,includeHeaders:n,includeGroupHeaders:o}=t,s=this.buildExportParams({columns:i,includeHeaders:n,includeGroupHeaders:o});this.copyDataToClipboard(s);const r=(null===(e=this.beans.selectionSvc)||void 0===e?void 0:e.getSelectedNodes())||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(r))}buildExportParams(e){const{columns:t,rowPositions:i,includeHeaders:n=!1,includeGroupHeaders:o=!1}=e,{gos:s,csvCreator:r}=this.beans,a={columnKeys:t,rowPositions:i,skipColumnHeaders:!n,skipColumnGroupHeaders:!o,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!i,processCellCallback:s.getCallback("processCellForClipboard"),processRowGroupCallback:e=>this.processRowGroupCallback(e),processHeaderCallback:s.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:s.getCallback("processGroupHeaderForClipboard")};return r.getDataAsCsv(a,!0)}processRowGroupCallback(e){let{node:t,column:i}=e;const{gos:n,valueSvc:o,rowGroupColsSvc:s}=this.beans,r=n.get("treeData");let a=(()=>{var e,n;if(r||!i)return t.key;const s=null===(e=t.groupData)||void 0===e?void 0:e[i.getId()];return s&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport&&null!==(n=o.formatValue(t.rowGroupColumn,t,s))&&void 0!==n?n:s})();if(t.footer){let e="";a&&a.length&&(e=" ".concat(a)),a="Total".concat(e)}const l=n.getCallback("processCellForClipboard");if(l){let e=t.rowGroupColumn;return!e&&t.footer&&-1===t.level&&s&&(e=s.columns[0]),l({value:a,node:t,column:e,type:"clipboard",formatValue:i=>{var n;return null!==(n=o.formatValue(e,t,i))&&void 0!==n?n:i},parseValue:i=>o.parseValue(e,t,i,o.getValue(e,t))})}return a}dispatchFlashCells(e){window.setTimeout((()=>{this.eventSvc.dispatchEvent({type:"flashCells",cells:e})}),0)}processCell(e,t,i,n,o,s,r){const a=this.beans.valueSvc;if(o){return o({column:t,node:e,value:i,type:n,formatValue:i=>{var n;return null!==(n=a.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==n?n:i},parseValue:i=>a.parseValue(t,null!==e&&void 0!==e?e:null,i,a.getValue(t,e))})}return s&&!1!==t.getColDef().useValueParserForImport?a.parseValue(t,null!==e&&void 0!==e?e:null,i,a.getValue(t,e)):r&&!1!==t.getColDef().useValueFormatterForExport&&null!==(l=a.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==l?l:i;var l}copyDataToClipboard(e){const t=this.gos.getCallback("sendToClipboard");if(t)return void t({data:e});!this.gos.get("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(e).catch((t=>{pt(40,{e:t,method:"writeText"}),this.copyDataToClipboardLegacy(e)})):this.copyDataToClipboardLegacy(e)}copyDataToClipboardLegacy(e){this.executeOnTempElement((t=>{const i=Tt(this.beans),n=Lt(this.beans);t.value=e||" ",t.select(),t.focus({preventScroll:!0});i.execCommand("copy")||pt(41),null!=n&&null!=n.focus&&n.focus({preventScroll:!0})}))}executeOnTempElement(e,t){if(!this.gridCtrl)return;const i=Tt(this.beans),n=i.createElement("textarea"),o=n.style;o.width="1px",o.height="1px";const s=i.documentElement;o.top=s.scrollTop+"px",o.left=s.scrollLeft+"px",o.position="absolute",o.opacity="0";const r=this.gridCtrl.getGui();r.appendChild(n);try{e(n)}catch(a){pt(42)}t?window.setTimeout((()=>{t(n),r.removeChild(n)}),100):r.removeChild(n)}getRangeSize(e){const t=e.getCellRanges();let i=0,n=0;return t.length>0&&(i=e.getRangeStartRow(t[0]).rowIndex,n=e.getRangeEndRow(t[0]).rowIndex),i-n+1}}],apiFunctions:{copyToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copyToClipboard(t)},cutToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.cutToClipboard(t)},copySelectedRowsToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copySelectedRowsToClipboard(t)},copySelectedRangeToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copySelectedRangeToClipboard(t)},copySelectedRangeDown:function(e){var t;null===(t=e.clipboardSvc)||void 0===t||t.copyRangeDown()},pasteFromClipboard:function(e){var t;null===(t=e.clipboardSvc)||void 0===t||t.pasteFromClipboard()}},dependsOn:[Rwe,Yu,vc,Qu]},oke={selector:"AG-FILTERS-TOOL-PANEL-HEADER",component:class extends En{constructor(){super(...arguments),this.eExpand=Tn,this.eFilterTextField=Tn}postConstruct(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div data-ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field data-ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>',[sa]);const e=this.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(0),this.addManagedElementListeners(this.eExpand,{click:this.onExpandClicked.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)})}init(e){this.params=e,this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){const{eExpand:e,beans:t}=this;e.appendChild(this.eExpandChecked=Wr("accordionOpen",t)),e.appendChild(this.eExpandUnchecked=Wr("accordionClosed",t)),e.appendChild(this.eExpandIndeterminate=Wr("accordionIndeterminate",t))}showOrHideOptions(){const{params:e,eFilterTextField:t}=this,i=!e.suppressFilterSearch,n=!e.suppressExpandAll,o=this.getLocaleTextFunc();t.setInputPlaceholder(o("searchOoo","Search..."));const s=this.beans.colModel.getCols().some((e=>e.getOriginalParent()&&e.isFilterAllowed()));le(t.getGui(),i),le(this.eExpand,n&&s)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=$e(this,(()=>this.dispatchLocalEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()})),300)),this.onSearchTextChangedDebounced()}onExpandClicked(){const e=0===this.currentExpandState?{type:"collapseAll"}:{type:"expandAll"};this.dispatchLocalEvent(e)}setExpandState(e){this.currentExpandState=e,le(this.eExpandChecked,0===e),le(this.eExpandUnchecked,1===e),le(this.eExpandIndeterminate,2===e)}}},ske=class extends En{constructor(e,t){super('\n            <div class="ag-filter-toolpanel-instance">\n                <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" data-ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                    <div data-ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                    <span data-ref="eFilterName" class="ag-header-cell-text"></span>\n                    <span data-ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n                </div>\n                <div class="ag-filter-toolpanel-instance-body ag-filter" data-ref="agFilterToolPanelBody"></div>\n            </div>'),this.hideHeader=e,this.expandedCallback=t,this.eFilterToolPanelHeader=Tn,this.eFilterName=Tn,this.agFilterToolPanelBody=Tn,this.eFilterIcon=Tn,this.eExpand=Tn,this.expanded=!1}postConstruct(){const{beans:e,eExpand:t}=this,i=Wr("accordionOpen",e);this.eExpandChecked=i;const n=Wr("accordionClosed",e);this.eExpandUnchecked=n,t.appendChild(i),t.appendChild(n)}setColumn(e){this.column=e;const{beans:t,eFilterToolPanelHeader:i,eFilterIcon:n,eExpandChecked:o,hideHeader:s}=this;this.eFilterName.innerText=t.colNames.getDisplayNameForColumn(e,"filterToolPanel",!1)||"",this.addManagedListeners(i,{click:this.toggleExpanded.bind(this),keydown:this.onKeyDown.bind(this)}),this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)}),this.addInIcon("filterActive",n,e),le(n,this.isFilterActive(),{skipAriaHidden:!0}),le(o,!1),s?(le(i,!1),i.removeAttribute("tabindex")):i.setAttribute("tabindex","0"),this.addManagedListeners(e,{filterChanged:this.onFilterChanged.bind(this)})}onKeyDown(e){const{key:t}=e,{ENTER:i,SPACE:n,LEFT:o,RIGHT:s}=Do;t!==i&&t!==n&&t!==o&&t!==s||(e.preventDefault(),t===i||t===n?this.toggleExpanded():t===Do.LEFT?this.collapse():this.expand())}getColumn(){return this.column}getColumnFilterName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,t,i){if(null==t)return;const n=Wr(e,this.beans,i);t.appendChild(n)}isFilterActive(){var e;return!(null===(e=this.beans.filterManager)||void 0===e||!e.isFilterActive(this.column))}onFilterChanged(){le(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchLocalEvent({type:"filterChanged"})}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,O(this.eFilterToolPanelHeader,!0),le(this.eExpandChecked,!0),le(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(e){var t;const i=De('<div class="ag-filter-toolpanel-instance-filter"></div>'),n=this.createManagedBean(new bs(this.column,"TOOLBAR"));this.filterWrapperComp=n,n.hasFilter()&&(null===(t=n.getFilter())||void 0===t||t.then((t=>{this.underlyingFilter=t,t&&(i.appendChild(n.getGui()),this.agFilterToolPanelBody.appendChild(i),n.afterGuiAttached({container:"toolPanel",suppressFocus:e}))})))}collapse(){if(!this.expanded)return;this.expanded=!1,O(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),le(this.eExpandChecked,!1),le(this.eExpandUnchecked,!0);const e=this.filterWrapperComp;null===e||void 0===e||e.afterGuiDetached(),this.destroyBean(e),this.expandedCallback()}removeFilterElement(){xe(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}refreshFilter(e){if(!this.expanded)return;const t=this.underlyingFilter;var i;t&&(e?"function"===typeof t.refreshVirtualList&&t.refreshVirtualList():null===(i=t.afterGuiDetached)||void 0===i||i.call(t))}onFilterOpened(e){"COLUMN_MENU"===e.source&&e.column===this.column&&this.expanded&&this.collapse()}},rke=class e extends En{constructor(e,t,i,n,o){super(),this.columnGroup=e,this.childFilterComps=t,this.expandedCallback=i,this.depth=n,this.showingColumn=o,this.filterGroupComp=Tn}postConstruct(){this.setTemplate('<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component data-ref="filterGroupComp"></ag-group-component>\n        </div>',[yDe],{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}}),this.setGroupTitle();const{filterGroupComp:e,depth:t,childFilterComps:i,gos:n}=this;e.setAlignItems("stretch"),e.addCssClass("ag-filter-toolpanel-group-level-".concat(t)),e.getGui().style.setProperty("--ag-indentation-level",String(t)),e.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(t,"-header")),i.forEach((i=>{e.addItem(i),i.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(t+1,"-header")),i.getGui().style.setProperty("--ag-indentation-level",String(t+1))})),this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"filterToolPanelColumnGroup",shouldDisplayTooltip:Ca(n,(()=>e.getGui().querySelector(".ag-group-title")))})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip(),this.addInIcon("filterActive")}setupTooltip(){if(!this.showingColumn)return;const e=()=>{var e;null===(e=this.tooltipFeature)||void 0===e||e.setTooltipAndRefresh(this.columnGroup.getColDef().headerTooltip)};e(),this.addManagedEventListeners({newColumnsLoaded:e})}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}refreshFilters(t){this.childFilterComps.forEach((i=>{i instanceof e?i.refreshFilters(t):i.refreshFilter(t)}))}isColumnGroup(){return Pi(this.columnGroup)}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){var e;return null!==(e=this.filterGroupName)&&void 0!==e?e:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,t){this.filterGroupComp.hideItem(e,t)}hideGroup(e){this.setDisplayed(!e)}addInIcon(e){const t=Wr(e,this.beans);t&&t.classList.add("ag-filter-toolpanel-group-instance-header-icon"),this.filterGroupComp.addTitleBarWidget(t)}forEachToolPanelFilterChild(e){this.childFilterComps.forEach((t=>{t instanceof ske&&e(t)}))}addExpandCollapseListeners(){const e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild((e=>e.expand())),t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild((e=>e.collapse()));this.addManagedListeners(this.filterGroupComp,{expanded:e,collapsed:t})}getColumns(){return Pi(this.columnGroup)?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){this.getColumns().forEach((e=>{this.addManagedListeners(e,{filterChanged:()=>this.refreshFilterClass()})})),Pi(this.columnGroup)||this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)})}refreshFilterClass(){const e=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",e.some((e=>e.isFilterActive())))}onFilterOpened(e){"COLUMN_MENU"===e.source&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){const e=this.columnGroup,t=Pi(e)?this.getColumnGroupName(e):this.getColumnName(e);this.filterGroupName=t,this.filterGroupComp.setTitle(t||"")}getColumnGroupName(e){return this.beans.colNames.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.beans.colNames.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),xe(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}},ake={selector:"AG-FILTERS-TOOL-PANEL-LIST",component:class extends En{constructor(){super('<div class="ag-filter-list-panel"></div>'),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}wireBeans(e){this.colModel=e.colModel}init(e){this.initialised=!0;const t=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});Di(t,e),this.params=t,t.suppressSyncLayoutWithGrid||this.addManagedEventListeners({columnMoved:()=>this.onColumnsChanged()}),this.addManagedEventListeners({newColumnsLoaded:()=>this.onColumnsChanged(),toolPanelVisibleChanged:e=>{"filters"===e.key&&this.refreshFilters(e.visible)},dragStarted:()=>{this.suppressOnColumnsChanged=!0},dragStopped:()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}}),this.colModel.ready&&this.onColumnsChanged()}onColumnsChanged(){if(this.suppressOnColumnsChanged)return void(this.onColumnsChangedPending=!0);const e=this.colModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}syncFilterLayout(){XSe(this.colModel,this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){const e=this.colModel.getColDefColTree();this.recreateFilters(e)}setFiltersLayout(e){const t=ZSe(this.colModel,e);this.recreateFilters(t)}recreateFilters(e){const t=Lt(this.beans);this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const i=this.getExpansionState();this.destroyFilters();const n=this.recursivelyAddComps(e,0,i);this.filterGroupComps=n;const o=n.length;o&&(n.forEach((e=>this.appendChild(e))),this.setFirstAndLastVisible(0,o-1));const s=this.searchFilterText;ze(s)&&this.searchFilters(s),this.fireExpandedEvent(),this.getGui().contains(t)&&t.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(e,t,i){return e.map((e=>{var n,o;if(Pi(e))return null!==(n=null===(o=this.recursivelyAddFilterGroupComps(e,t,i))||void 0===o?void 0:o.flatMap((e=>e)))&&void 0!==n?n:[];const s=e;if(!this.shouldDisplayFilter(s))return[];const r=new ske(0===t,(()=>this.onFilterExpanded()));if(this.createBean(r),r.setColumn(s),i.get(s.getId())&&r.expand(),t>0)return r;const a=this.createBean(new rke(s,[r],this.onGroupExpanded.bind(this),t,!0));return a.addCssClassToTitleBar("ag-filter-toolpanel-header"),i.get(a.getFilterGroupId())||a.collapse(),a})).flatMap((e=>e))}refreshAriaLabel(){const e=this.getLocaleTextFunc(),t=e("ariaFilterPanelList","Filter List"),i=e("filters","Filters"),n=this.getGui().querySelectorAll("".concat(".ag-filter-toolpanel-group-item",":not(").concat(".ag-filter-toolpanel-group-wrapper",", ").concat(".ag-hidden",")")).length;A(this.getAriaElement(),"".concat(t," ").concat(n," ").concat(i))}recursivelyAddFilterGroupComps(e,t,i){if(!this.filtersExistInChildren(e.getChildren()))return;const n=e.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];const o=e.isPadding()?t:t+1,s=this.recursivelyAddComps(e.getChildren(),o,i).flatMap((e=>e));if(e.isPadding())return s;const r=new rke(e,s,this.onGroupExpanded.bind(this),t,!1);this.createBean(r),r.addCssClassToTitleBar("ag-filter-toolpanel-header");const a=i.get(r.getFilterGroupId());return(this.isInitialState&&!a||!1===a)&&r.collapse(),[r]}filtersExistInChildren(e){return e.some((e=>Pi(e)?this.filtersExistInChildren(e.getChildren()):this.shouldDisplayFilter(e)))}shouldDisplayFilter(e){const t=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!t}getExpansionState(){const e=new Map;if(this.isInitialState){const{expandedColIds:t,expandedGroupIds:i}=this.params.initialState;return t.forEach((t=>e.set(t,!0))),i.forEach((t=>e.set(t,!0))),e}const t=i=>{e.set(i.getFilterGroupId(),i.isExpanded()),i.getChildren().forEach((i=>{i instanceof rke?t(i):e.set(i.getColumn().getId(),i.isExpanded())}))};return this.filterGroupComps.forEach(t),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,t){const i=[],n=o=>{const s=o.getFilterGroupId();(!t||t.includes(s))&&(e&&o.isColumnGroup()?o.expand():o.collapse(),i.push(s)),o.getChildren().forEach((e=>{e instanceof rke&&n(e)}))};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),t){const e=t.filter((e=>i.indexOf(e)<0));e.length>0&&pt(166,{unrecognisedGroupIds:e})}}expandFilters(e,t){const i=[],n=o=>{if(o instanceof rke){let t=!1;return o.getChildren().forEach((i=>{n(i)&&(e?(o.expand(),t=!0):o.isColumnGroup()||o.collapse())})),t}const s=o.getColumn().getColId(),r=!t||t.includes(s);return r&&(e?o.expand():o.collapse(),i.push(s)),r};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),t){const e=t.filter((e=>i.indexOf(e)<0));e.length>0&&pt(167,{unrecognisedColIds:e})}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchLocalEvent({type:"filterExpanded"})}fireExpandedEvent(){let e=0,t=0;const i=n=>{n.isColumnGroup()&&(n.isExpanded()?e++:t++,n.getChildren().forEach((e=>{e instanceof rke&&i(e)})))};let n;this.filterGroupComps.forEach(i),n=e>0&&t>0?2:t>0?1:0,this.dispatchLocalEvent({type:"groupExpanded",state:n})}performFilterSearch(e){this.searchFilterText=ze(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){const t=t=>!ze(e)||-1!==t.toLowerCase().indexOf(e),i=(e,n)=>{if(!(e instanceof rke))return t(e.getColumnFilterName()||"");const o=e.getChildren(),s=t(e.getFilterGroupName()),r=n||s;if(r){e.hideGroup(!1);for(let t=0;t<o.length;t++)i(o[t],r),e.hideGroupItem(!1,t);return!0}let a=!1;return o.forEach(((t,o)=>{const s=i(t,n);e.hideGroupItem(!s,o),s&&(a=!0)})),e.hideGroup(!a),a};let n,o;this.filterGroupComps.forEach(((e,t)=>{i(e,!1),void 0===n?e.containsCssClass("ag-hidden")||(n=t,o=t):e.containsCssClass("ag-hidden")||o===t||(o=t)})),this.setFirstAndLastVisible(n,o),this.refreshAriaLabel()}setFirstAndLastVisible(e,t){this.filterGroupComps.forEach(((i,n)=>{i.removeCssClass("ag-first-group-visible"),i.removeCssClass("ag-last-group-visible"),n===e&&i.addCssClass("ag-first-group-visible"),n===t&&i.addCssClass("ag-last-group-visible")}))}refreshFilters(e){this.filterGroupComps.forEach((t=>t.refreshFilters(e)))}getExpandedFiltersAndGroups(){const e=[],t=new Set,i=n=>{if(n instanceof rke){n.getChildren().forEach((e=>i(e)));const o=n.getFilterGroupId();n.isExpanded()&&!t.has(o)&&e.push(o)}else n.isExpanded()&&t.add(n.getColumn().getColId())};return this.filterGroupComps.forEach(i),{expandedGroupIds:e,expandedColIds:Array.from(t)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),xe(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}}},lke={moduleName:"FiltersToolPanel",version:Ewe,userComponents:{agFiltersToolPanel:class extends En{constructor(){super('<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header data-ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list data-ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',[oke,ake]),this.filtersToolPanelHeaderPanel=Tn,this.filtersToolPanelListPanel=Tn,this.initialised=!1,this.listenerDestroyFuncs=[],this.registerCSS(".ag-filter-toolpanel{flex:1 1 0px;min-width:0}.ag-filter-toolpanel-header,.ag-filter-toolpanel-search{align-items:center;color:var(--ag-header-text-color);display:flex;font-weight:500;padding:0 var(--ag-spacing);>*{align-items:center;display:flex}}.ag-filter-toolpanel-header{padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing);position:relative;&:focus-visible{border-radius:var(--ag-border-radius);box-shadow:inset var(--ag-focus-shadow)}}:where(.ag-ltr) .ag-filter-toolpanel-group-instance-header-icon,:where(.ag-ltr) .ag-filter-toolpanel-instance-header-icon{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-group-instance-header-icon,:where(.ag-rtl) .ag-filter-toolpanel-instance-header-icon{margin-right:var(--ag-spacing)}.ag-filter-toolpanel-search{margin-bottom:var(--ag-spacing);margin-top:var(--ag-widget-container-vertical-padding)}:where(.ag-filter-toolpanel-group:not(.ag-has-filter)>.ag-group-title-bar) .ag-filter-toolpanel-group-instance-header-icon{display:none}.ag-filter-toolpanel-search-input{flex-grow:1;height:calc(var(--ag-spacing)*4)}:where(.ag-ltr) .ag-filter-toolpanel-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-group-title-bar-icon{margin-left:var(--ag-spacing)}.ag-filter-toolpanel-expand{cursor:pointer}:where(.ag-ltr) .ag-filter-toolpanel-expand{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-expand{margin-left:var(--ag-spacing)}:where(.ag-ltr) .ag-filter-toolpanel-group-title-bar,:where(.ag-ltr) .ag-filter-toolpanel-instance-header{padding-left:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-filter-toolpanel-group-title-bar,:where(.ag-rtl) .ag-filter-toolpanel-instance-header{padding-right:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}:where(.ag-ltr) .ag-filter-toolpanel-instance-body{margin-left:var(--ag-filter-tool-panel-group-indent)}:where(.ag-rtl) .ag-filter-toolpanel-instance-body{margin-right:var(--ag-filter-tool-panel-group-indent)}.ag-filter-toolpanel-instance-filter{background-color:var(--ag-chrome-background-color)}.ag-filter-toolpanel-group-level-0{border-top:none}")}init(e){this.initialised&&(this.listenerDestroyFuncs.forEach((e=>e())),this.listenerDestroyFuncs=[]),this.initialised=!0;const t=l(l({},this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1})),e);this.params=t;const{filtersToolPanelHeaderPanel:i,filtersToolPanelListPanel:n}=this;i.init(t),n.init(t);const o=t.suppressExpandAll,s=t.suppressFilterSearch;o&&s&&i.setDisplayed(!1),this.listenerDestroyFuncs.push(...this.addManagedListeners(i,{expandAll:()=>n.expandFilterGroups(!0),collapseAll:()=>n.expandFilterGroups(!1),searchChanged:e=>n.performFilterSearch(e.searchText)}),...this.addManagedListeners(n,{filterExpanded:t.onStateUpdated,groupExpanded:e=>{i.setExpandState(e.state),t.onStateUpdated()}}))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(e){return this.init(e),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}}},icons:{filtersToolPanel:"filter"},dependsOn:[_Se,Rwe,au]},dke=class extends Si{constructor(){super(...arguments),this.loadRowDataVersion=0}init(e,t){this.params=t,this.comp=e;null!=t.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.createDetailGrid(),this.loadRowData(),this.addManagedEventListeners({fullWidthRowFocused:this.onFullWidthRowFocused.bind(this)}))}onFullWidthRowFocused(e){const t=this.params;as({rowIndex:t.node.rowIndex,rowPinned:t.node.rowPinned},{rowIndex:e.rowIndex,rowPinned:e.rowPinned})&&Po(this.comp.getGui(),e.fromBelow)}setAutoHeightClasses(){const e=this.gos.get("detailRowAutoHeight"),t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",i=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height",n=this.comp;n.addOrRemoveCssClass(t,!0),n.addOrRemoveDetailGridCssClass(i,!0)}setupRefreshStrategy(){const e=this.params.refreshStrategy;"everything"==e||"nothing"==e||"rows"==e?this.refreshStrategy=e:(null!=e&&pt(170,{providedStrategy:e}),this.refreshStrategy="rows")}createDetailGrid(){const{params:e,gos:t}=this;if(_e(e.detailGridOptions))return void pt(171);const i=l({},e.detailGridOptions);t.get("detailRowAutoHeight")&&(i.domLayout="autoHeight"),i.theme||(i.theme=t.get("theme")),this.comp.setDetailGrid(i)}registerDetailWithMaster(e){const t=this.params,i=t.node.id,n=t.api,o={id:i,api:e},s=t.node;n.isDestroyed()||(n.addDetailGridInfo(i,o),s.detailGridInfo=o,this.addDestroyFunc((()=>{s.detailGridInfo===o&&(n.isDestroyed()||n.removeDetailGridInfo(i),s.detailGridInfo=null)})))}loadRowData(){var e;this.loadRowDataVersion++;const t=this.loadRowDataVersion,i=this.params;if("serverSide"===(null===(e=i.detailGridOptions)||void 0===e?void 0:e.rowModelType)){var n;return void(null===(n=i.node.detailGridInfo)||void 0===n||null===(n=n.api)||void 0===n||n.refreshServerSide({purge:!0}))}const o=i.getDetailRowData;if(!o)return void pt(172);o({node:i.node,data:i.node.data,successCallback:e=>{this.loadRowDataVersion===t&&this.comp.setRowData(e)},context:this.gos.getGridCommonParams().context})}refresh(){const e=!0;switch(this.refreshStrategy){case"nothing":return e;case"everything":return false}return this.loadRowData(),e}},cke=class{constructor(e){this.parentWrapper=e}wrap(e,t,i,n){return this.parentWrapper.wrap(e,t,i,n)}};function hke(e,t){var i;const n=null===(i=e.masterDetailSvc)||void 0===i?void 0:i.store;return n?t(n):void 0}var uke={moduleName:"SharedMasterDetail",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="masterDetailSvc",this.store={}}isEnabled(){const e=this.gos;return e.get("masterDetail")&&!e.get("treeData")}postConstruct(){bt(this.gos)&&(this.enabled=this.isEnabled(),this.addManagedEventListeners({beforeRefreshModel:this.beforeRefreshModel.bind(this)}))}beforeRefreshModel(e){let{params:t}=e;if(t.changedProps){const e=this.isEnabled();if(this.enabled!==e)return void this.setMasters(null)}t.rowDataUpdated&&this.setMasters(t.changedRowNodes)}setMasters(e){const t=this.isEnabled();this.enabled=t;const i=this.gos,n=i.get("isRowMaster"),o=i.get("groupDefaultExpanded"),s=(e,i,s)=>{const r=e.master;let a=t;if(t)if(i||s){if(n){const t=e.data;a=!!t&&!!n(t)}}else a=r;if(a&&i)if(-1===o)e.expanded=!0;else{var l,d;const t=null!==(l=null===(d=this.beans.rowGroupColsSvc)||void 0===d?void 0:d.columns.length)&&void 0!==l?l:0;e.expanded=t<o}else!a&&r&&(e.expanded=!1);a!==r&&(e.master=a,e.dispatchRowEvent("masterChanged"))};if(e){const t=e.updates;for(const e of t.keys()){const i=t.get(e);s(e,i,!i)}}else{var r;const e=null===(r=Wc(this.beans))||void 0===r||null===(r=r.rootNode)||void 0===r?void 0:r.allLeafChildren;if(e)for(let t=0,i=e.length;t<i;++t)s(e[t],!0,!1)}}getDetail(e){if(!e.master||!e.expanded)return null;let t=e.detailNode;return t||(t=new fs(this.beans),t.detail=!0,t.selectable=!1,t.parent=e,ze(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t)}setupDetailRowAutoHeight(e,t){const{gos:i,beans:n}=this;if(!i.get("detailRowAutoHeight"))return;const o=()=>{const n=t.clientHeight;if(null!=n&&n>0){const t=()=>{const{rowModel:t}=this.beans,{rowNode:o}=e;o.setRowHeight(n),(bt(i)||Ct(i))&&t.onRowHeightChanged()};window.setTimeout(t,0)}},s=Be(n,t,o);e.addDestroyFunc(s),o()}destroy(){this.store={},super.destroy()}}],userComponents:{agDetailCellRenderer:class extends En{constructor(){super(...arguments),this.eDetailGrid=Tn}wireBeans(e){this.context=e.context}init(e){this.params=e,this.selectAndSetTemplate();const t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),addOrRemoveDetailGridCssClass:(e,t)=>this.eDetailGrid.classList.toggle(e,t),setDetailGrid:e=>this.setDetailGrid(e),setRowData:e=>this.setRowData(e),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new dke),this.ctrl.init(t,e)}refresh(){return this.ctrl&&this.ctrl.refresh()}selectAndSetTemplate(){const e=this.params;if(e.pinned)return void this.setTemplate('<div class="ag-details-row"></div>');const t=()=>{this.setTemplate('<div class="ag-details-row" role="gridcell">\n                <div data-ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n            </div>')};if(_e(e.template))t();else if("string"===typeof e.template)this.setTemplate(e.template,[]);else if("function"===typeof e.template){const t=(0,e.template)(e);this.setTemplate(t,[])}else pt(168),t();null==this.eDetailGrid&&pt(169)}setDetailGrid(e){var t;if(!this.eDetailGrid)return;const i=this.context.getBean("frameworkCompWrapper"),n=new cke(i),{frameworkOverrides:o}=this.beans,s=function(e,t,i){if(!t)return gt(11),{};let n;if(null===i||void 0===i||!i.setThemeOnGridDiv){const t=document.createElement("div");t.style.height="100%",e.appendChild(t),e=t,n=()=>e.remove()}return(new Hc).create(e,t,(t=>{const i=new Za(e);t.createBean(i)}),void 0,i,n)}(this.eDetailGrid,e,{frameworkOverrides:o,providedBeanInstances:{frameworkCompWrapper:n},modules:vo(this.params.api.getGridId(),null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide")});this.detailApi=s,this.ctrl.registerDetailWithMaster(s),this.addDestroyFunc((()=>{null===s||void 0===s||s.destroy()}))}setRowData(e){var t;null===(t=this.detailApi)||void 0===t||t.setGridOption("rowData",e)}}},dynamicBeans:{detailCellRendererCtrl:dke},apiFunctions:{addDetailGridInfo:function(e,t,i){hke(e,(e=>{e[t]=i}))},removeDetailGridInfo:function(e,t){hke(e,(e=>{delete e[t]}))},getDetailGridInfo:function(e,t){return hke(e,(e=>e[t]))},forEachDetailGridInfo:function(e,t){hke(e,(e=>{let i=0;Object.values(e).forEach((e=>{e&&t(e,i++)}))}))}},dependsOn:[Rwe,HDe,UDe],css:[".ag-details-row{width:100%}.ag-details-row-fixed-height{height:100%}.ag-details-grid{width:100%}.ag-details-grid-fixed-height{height:100%}"]},pke={moduleName:"MasterDetail",version:Ewe,dependsOn:[uke,jDe]},gke=class extends En{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}postConstruct(){const{dragSvc:e,rangeSvc:t}=this.beans;e.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:e=>{this.dragging=!0,t.autoScrollService.check(e),this.changedCalculatedValues&&(this.onDrag(e),this.changedCalculatedValues=!1)},onDragStop:e=>{this.dragging=!1,this.onDragEnd(e),this.clearDragProperties(),this.shouldDestroyOnEndDragging&&this.destroy()},onDragCancel:()=>{this.dragging=!1,this.onDragCancel(),this.clearDragProperties()}}),this.addManagedElementListeners(this.getGui(),{mousedown:this.preventRangeExtension.bind(this)})}getLastCellHovered(){return this.lastCellHovered}preventRangeExtension(e){e.stopPropagation()}onDragStart(e){[this.cellHoverListener]=this.addManagedElementListeners(this.beans.ctrlsSvc.get("gridCtrl").getGui(),{mousemove:this.updateValuesOnMove.bind(this)}),document.body.classList.add(this.getDraggingCssClass())}getDraggingCssClass(){return"ag-dragging-".concat(0===this.type?"fill":"range","-handle")}updateValuesOnMove(e){const t=es(this.gos,e);!t||this.lastCellHovered&&ss(t,this.lastCellHovered)||(this.lastCellHovered=t,this.changedCalculatedValues=!0)}clearDragProperties(){this.clearValues(),this.beans.rangeSvc.autoScrollService.ensureCleared(),document.body.classList.remove(this.getDraggingCssClass())}getType(){return this.type}refresh(e){const t=this.cellCtrl,i=this.getGui(),n=Gi(this.beans.rangeSvc.getCellRanges()),o=n.startRow,s=n.endRow;if(o&&s){rs(s,o)?(this.rangeStartRow=s,this.rangeEndRow=o):(this.rangeStartRow=o,this.rangeEndRow=s)}if(t!==e||!Me(i)){this.cellCtrl=e;const t=e.comp.getParentOfValue();t&&t.appendChild(i)}this.cellRange=n}clearValues(){this.lastCellHovered=void 0,this.removeListeners()}removeListeners(){const e=this.cellHoverListener;e&&(e(),this.cellHoverListener=void 0)}destroy(){var e;if(!this.shouldDestroyOnEndDragging&&this.dragging)return le(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,super.destroy(),this.removeListeners();const t=this.getGui();null===(e=t.parentElement)||void 0===e||e.removeChild(t)}};function mke(e){const t=e.length;let i=0;if(t<=1)return e;for(let h=0;h<e.length;h++){const t=e[h],n=t.toString().split("e-");n.length>1?i=Math.max(i,parseInt(n[1],10)):Math.floor(t)!==t&&(i=Math.max(i,t.toString().split(".")[1].length))}let n=0,o=0,s=0,r=0,a=0;for(let h=0;h<t;h++)a=e[h],n+=h,o+=a,r+=h*h,s+=h*a;const l=(t*s-n*o)/(t*r-n*n),d=o/t-l*n/t,c=[];for(let h=0;h<=t;h++)c.push(parseFloat((h*l+d).toFixed(i)));return c}function vke(e){var t;null===(t=e.rangeSvc)||void 0===t||t.removeAllCellRanges()}var fke="ag-cell-range-selected";function yke(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&"fill"===(null===(t=i.handle)||void 0===t?void 0:t.mode):e.get("enableFillHandle")}var bke=class{constructor(e,t){this.beans=e,this.cellCtrl=t,this.rangeSvc=e.rangeSvc}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){const e=this.cellComp;if(!e)return;const{rangeSvc:t,cellCtrl:i,eGui:n}=this,o=t.getCellRangeCount(i.cellPosition);this.rangeCount=o;const s=this.getHasChartRange();this.hasChartRange=s,e.addOrRemoveCssClass(fke,0!==o),e.addOrRemoveCssClass("".concat(fke,"-1"),1===o),e.addOrRemoveCssClass("".concat(fke,"-2"),2===o),e.addOrRemoveCssClass("".concat(fke,"-3"),3===o),e.addOrRemoveCssClass("".concat(fke,"-4"),o>=4),e.addOrRemoveCssClass("ag-cell-range-chart",s),Y(n,o>0||void 0),e.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle()}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,n=!t&&e.right,o=!t&&e.bottom,s=!t&&e.left,r=this.cellComp;r.addOrRemoveCssClass("ag-cell-range-top",i),r.addOrRemoveCssClass("ag-cell-range-right",n),r.addOrRemoveCssClass("ag-cell-range-bottom",o),r.addOrRemoveCssClass("ag-cell-range-left",s)}isSingleCell(){const{rangeSvc:e}=this;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeSvc:e}=this;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every((e=>[Na.DIMENSION,Na.VALUE].includes(e.type)))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,n=!1,o=!1;const{rangeSvc:s,beans:{visibleCols:r},cellCtrl:{cellPosition:a}}=this,l=a.column;let d,c;e?(d=r.getColAfter(l),c=r.getColBefore(l)):(d=r.getColBefore(l),c=r.getColAfter(l));const h=s.getCellRanges().filter((e=>s.isCellInSpecificRange(a,e)));d||(o=!0),c||(i=!0);for(let u=0;u<h.length&&!(t&&i&&n&&o);u++){const e=h[u],r=s.getRangeStartRow(e),l=s.getRangeEndRow(e);!t&&as(r,a)&&(t=!0),!n&&as(l,a)&&(n=!0),!o&&d&&e.columns.indexOf(d)<0&&(o=!0),!i&&c&&e.columns.indexOf(c)<0&&(i=!0)}return{top:t,right:i,bottom:n,left:o}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeSvc,i=t.getCellRanges(),n=i.length;if(this.rangeCount<1||n<1)return!1;const o=Gi(i),{cellPosition:s}=this.cellCtrl,r=yke(e)&&!this.cellCtrl.column.isSuppressFillHandle(),a=function(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&"range"===(null===(t=i.handle)||void 0===t?void 0:t.mode):e.get("enableRangeHandle")}(e);let l=1===n&&!this.cellCtrl.editing&&(r||a);if(this.hasChartRange){const e=i[0].type===Na.DIMENSION&&t.isCellInSpecificRange(s,i[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",e),l=o.type===Na.VALUE}return l&&null!=o.endRow&&t.isContiguousRange(o)&&t.isBottomRightCell(o,s)}addSelectionHandle(){var e;const{beans:t,rangeSvc:i}=this,n=Gi(i.getCellRanges()).type,o=yke(t.gos)&&_e(n)?0:1;if(this.selectionHandle&&this.selectionHandle.getType()!==o&&(this.selectionHandle=t.context.destroyBean(this.selectionHandle)),!this.selectionHandle){const e=t.registry.createDynamicBean(0===o?"fillHandle":"rangeHandle",!1);e&&(this.selectionHandle=t.context.createBean(e))}null===(e=this.selectionHandle)||void 0===e||e.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Cke=class extends Si{constructor(e){super(),this.eContainer=e}postConstruct(){const{beans:e,gos:t,eContainer:i}=this,n=e.rangeSvc,o={eElement:i,onDragStart:n.onDragStart.bind(n),onDragStop:n.onDragStop.bind(n),onDragging:n.onDragging.bind(n)},s=e.dragSvc,r=s.addDragSource.bind(s,o),a=s.removeDragSource.bind(s,o);this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{$t(t)?r():a()})),this.addDestroyFunc(a),$t(t)&&r()}},xke={moduleName:"CellSelection",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="rangeSvc",this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1}wireBeans(e){this.rowModel=e.rowModel,this.dragSvc=e.dragSvc,this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.cellNavigation=e.cellNavigation,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){const e=this.onColumnsChanged.bind(this),t=()=>this.removeAllCellRanges(),i=this.refreshLastRangeStart.bind(this);this.addManagedEventListeners({newColumnsLoaded:e,columnVisible:e,columnValueChanged:e,columnPivotModeChanged:t,columnRowGroupChanged:t,columnPivotChanged:t,columnGroupOpened:i,columnMoved:i,columnPinned:i}),this.ctrlsSvc.whenReady(this,(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new ns({scrollContainer:t.eBodyViewport,scrollAxis:"xy",getVerticalPosition:()=>t.scrollFeature.getVScrollPosition().top,setVerticalPosition:e=>t.scrollFeature.setVerticalScrollPosition(e),getHorizontalPosition:()=>t.scrollFeature.getHScrollPosition().left,setHorizontalPosition:e=>t.scrollFeature.setHorizontalScrollPosition(e),shouldSkipVerticalScroll:()=>!xt(this.gos,"normal"),shouldSkipHorizontalScroll:()=>!t.scrollFeature.isHorizontalScrollShowing()})}))}onColumnsChanged(){this.refreshLastRangeStart();const e=this.visibleCols.allCols;this.cellRanges.forEach((t=>{const i=t.columns;t.columns=t.columns.filter((t=>t.isVisible()&&-1!==e.indexOf(t)));!zi(i,t.columns)&&this.dispatchChangedEvent(!1,!0,t.id)}));const t=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((e=>e.columns.length>0)),t>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){const e=Gi(this.cellRanges);e&&this.refreshRangeStart(e)}isContiguousRange(e){const t=e.columns;if(!t.length)return!1;const i=this.visibleCols.allCols,n=t.map((e=>i.indexOf(e))).sort(((e,t)=>e-t));return Gi(n)-n[0]+1===t.length}getRangeStartRow(e){var t,i;if(e.startRow&&e.endRow)return rs(e.startRow,e.endRow)?e.startRow:e.endRow;return{rowIndex:0,rowPinned:(null!==(t=null===(i=this.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRowCount())&&void 0!==t?t:0)>0?"top":null}}getRangeEndRow(e){var t,i;if(e.startRow&&e.endRow)return rs(e.startRow,e.endRow)?e.endRow:e.startRow;const n=null!==(t=null===(i=this.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRowCount())&&void 0!==t?t:0;return n>0?{rowIndex:n-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}setRangeToCell(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!$t(this.gos))return;const i=this.calculateColumnsBetween(e.column,e.column);if(!i)return;(Jt(this.gos)||!t||_e(this.cellRanges))&&this.removeAllCellRanges(!0);const n={rowIndex:e.rowIndex,rowPinned:e.rowPinned},o={startRow:n,endRow:n,columns:i,startColumn:e.column};this.cellRanges.push(o),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}extendLatestRangeToCell(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=Gi(this.cellRanges);this.updateRangeEnd(t,e)}updateRangeEnd(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=t.column,o=this.calculateColumnsBetween(e.startColumn,n);o&&!this.isLastCellOfRange(e,t)&&(e.columns=o,e.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},i||this.dispatchChangedEvent(!0,!0,e.id))}refreshRangeStart(e){const{startColumn:t,columns:i}=e,n=(t,i)=>{const n=e.columns.filter((e=>e!==t));t?(e.startColumn=t,e.columns=i?[t,...n]:[...n,t]):e.columns=n},{left:o,right:s}=this.getRangeEdgeColumns(e);if(t===i[0]&&t!==o)return void n(o,!0);t===Gi(i)&&t===s&&n(s,!1)}getRangeEdgeColumns(e){const t=this.visibleCols.allCols,i=e.columns.map((e=>t.indexOf(e))).filter((e=>e>-1)).sort(((e,t)=>e-t));return{left:t[i[0]],right:t[Gi(i)]}}extendLatestRangeInDirection(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=e.key,i=e.ctrlKey||e.metaKey,n=Gi(this.cellRanges),o=this.newestRangeStartCell,s=n.columns[0],r=Gi(n.columns),a=n.endRow.rowIndex,l=n.endRow.rowPinned,d={column:o.column===s?r:s,rowIndex:a,rowPinned:l},c=this.cellNavigation.getNextCellToFocus(t,d,i);return c?(this.setCellRange({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:c.rowIndex,rowEndPinned:c.rowPinned,columnStart:o.column,columnEnd:c.column}),c):void 0}setCellRange(e){$t(this.gos)&&(this.removeAllCellRanges(!0),this.addCellRange(e))}setCellRanges(e){zi(this.cellRanges,e)||this.verifyCellRanges(this.gos)&&(this.removeAllCellRanges(!0),e.forEach((e=>{e.columns&&e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.columns[0]}),this.cellRanges.push(e)})),this.dispatchChangedEvent(!1,!0))}setNewestRangeStartCell(e){this.newestRangeStartCell=e}clearCellRangeCellValues(e){let{cellRanges:t}=e;const{cellEventSource:i="rangeSvc",dispatchWrapperEvents:n,wrapperEventSource:o="deleteKey"}=e;n&&(this.eventSvc.dispatchEvent({type:"cellSelectionDeleteStart",source:o}),this.eventSvc.dispatchEvent({type:"rangeDeleteStart",source:o})),t||(t=this.cellRanges),t.forEach((e=>{this.forEachRowInRange(e,(t=>{const n=ls(this.beans,t);if(n)for(let o=0;o<e.columns.length;o++){const t=this.colModel.getCol(e.columns[o]);if(!t||!t.isCellEditable(n))continue;const s=this.beans.valueSvc.getDeleteValue(t,n);n.setDataValue(t,s,i)}}))})),n&&(this.eventSvc.dispatchEvent({type:"cellSelectionDeleteEnd",source:o}),this.eventSvc.dispatchEvent({type:"rangeDeleteEnd",source:o}))}createCellRangeFromCellRangeParams(e){return this.createPartialCellRangeFromRangeParams(e,!1)}createPartialCellRangeFromRangeParams(e,t){let i,n=!1;if(e.columns)i=e.columns.map((e=>this.colModel.getCol(e))).filter((e=>e));else{const t=this.colModel.getCol(e.columnStart),o=this.colModel.getCol(e.columnEnd);if(!t||!o)return;i=this.calculateColumnsBetween(t,o),i&&i.length&&(n=i[0]!==t)}if(!i||!t&&0===i.length)return;return{startRow:null!=e.rowStartIndex?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,endRow:null!=e.rowEndIndex?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0,columns:i,startColumn:n?Gi(i):i[0]}}verifyCellRanges(e){const t=function(e){return void 0!==e.get("cellSelection")}(e)&&Jt(e)&&this.cellRanges.length>0;return t&&pt(93),!t}addCellRange(e){const t=this.gos;if(!$t(t)||!this.verifyCellRanges(t))return;const i=this.createCellRangeFromCellRangeParams(e);i&&(i.startRow&&this.setNewestRangeStartCell({rowIndex:i.startRow.rowIndex,rowPinned:i.startRow.rowPinned,column:i.startColumn}),this.cellRanges.push(i),this.dispatchChangedEvent(!1,!0,i.id))}getCellRanges(){return this.cellRanges}isEmpty(){return 0===this.cellRanges.length}isMoreThanOneCell(){const e=this.cellRanges.length;if(0===e)return!1;if(e>1)return!0;const t=this.cellRanges[0],i=this.getRangeStartRow(t),n=this.getRangeEndRow(t);return i.rowPinned!==n.rowPinned||i.rowIndex!==n.rowIndex||1!==t.columns.length}areAllRangesAbleToMerge(){const e=new Map;if(this.cellRanges.length<=1)return!0;let t;this.cellRanges.forEach((t=>{this.forEachRowInRange(t,(i=>{const n="".concat(i.rowPinned||"normal","_").concat(i.rowIndex),o=e.get(n),s=t.columns.map((e=>e.getId()));if(o){const e=s.filter((e=>-1===o.indexOf(e)));o.push(...e)}else e.set(n,s)}))}));for(const i of e.values()){const e=i.sort().join();if(void 0!==t){if(t!==e)return!1}else t=e}return!0}forEachRowInRange(e,t){const i=this.getRangeStartRow(e),n=this.getRangeEndRow(e);let o=i;for(;o&&(t(o),!as(o,n));)o=this.cellNavigation.getRowBelow(o)}removeAllCellRanges(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}isCellInAnyRange(e){return this.getCellRangeCount(e)>0}isCellInSpecificRange(e,t){const i=null!==t.columns&&t.columns.includes(e.column),n=this.isRowInRange(e.rowIndex,e.rowPinned,t);return i&&n}isLastCellOfRange(e,t){const{startRow:i,endRow:n}=e,o=rs(i,n)?n:i,s=t.rowIndex===o.rowIndex&&t.rowPinned===o.rowPinned,r=e.columns[0],a=Gi(e.columns),l=e.startColumn===r?a:r;return t.column===l&&s}isBottomRightCell(e,t){const i=this.visibleCols.allCols,n=e.columns.map((e=>i.indexOf(e))).sort(((e,t)=>e-t)),{startRow:o,endRow:s}=e,r=rs(o,s)?s:o,a=i.indexOf(t.column)===Gi(n),l=t.rowIndex===r.rowIndex&&Ge(t.rowPinned)===Ge(r.rowPinned);return a&&l}getCellRangeCount(e){return this.isEmpty()?0:this.cellRanges.filter((t=>this.isCellInSpecificRange(e,t))).length}isRowInRange(e,t,i){const n=this.getRangeStartRow(i),o=this.getRangeEndRow(i),s={rowIndex:e,rowPinned:t||null},r=s.rowIndex===n.rowIndex&&s.rowPinned==n.rowPinned,a=s.rowIndex===o.rowIndex&&s.rowPinned==o.rowPinned;if(r||a)return!0;const l=!rs(s,n),d=rs(s,o);return l&&d}getDraggingRange(){return this.draggingRange}onDragStart(e){var t;if(!$t(this.gos))return;const{ctrlKey:i,metaKey:n,shiftKey:o}=e,s=i||n,r=!!!Jt(this.gos)&&s,a=o&&!(null===(t=this.cellRanges)||void 0===t||!t.length);r||a&&!ze(Gi(this.cellRanges).type)||this.removeAllCellRanges(!0);const l=this.dragSvc.startTarget;if(l&&this.updateValuesOnMove(l),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=r&&this.getCellRangeCount(this.lastCellHovered)>1,a||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=Gi(this.cellRanges);else{const e={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:e,endRow:e,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsSvc.getGridBodyCtrl().eBodyViewport.addEventListener("scroll",this.bodyScrollListener,{passive:!0}),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}intersectLastRange(e){if(e&&this.dragging)return;if(Jt(this.gos))return;if(this.isEmpty())return;const t=Gi(this.cellRanges),i=this.getRangeStartRow(t),n=this.getRangeEndRow(t),o=[];this.cellRanges.slice(0,-1).forEach((e=>{const s=this.getRangeStartRow(e),r=this.getRangeEndRow(e),a=e.columns,d=a.filter((e=>-1===t.columns.indexOf(e)));if(d.length===a.length)return void o.push(e);if(rs(n,s)||rs(r,i))return void o.push(e);const c=o.length;if(rs(s,i)){const e={columns:[...a],startColumn:t.startColumn,startRow:l({},s),endRow:this.cellNavigation.getRowAbove(i)};o.push(e)}if(d.length>0){const e={columns:d,startColumn:d.includes(t.startColumn)?t.startColumn:d[0],startRow:this.rowMax([l({},i),l({},s)]),endRow:this.rowMin([l({},n),l({},r)])};o.push(e)}rs(n,r)&&o.push({columns:[...a],startColumn:t.startColumn,startRow:this.cellNavigation.getRowBelow(n),endRow:l({},r)}),o.length-c===1&&(o[o.length-1].id=e.id)})),this.cellRanges=o,e&&this.dispatchChangedEvent(!1,!0)}rowMax(e){let t;return e.forEach((e=>{(void 0===t||rs(t,e))&&(t=e)})),t}rowMin(e){let t;return e.forEach((e=>{(void 0===t||rs(e,t))&&(t=e)})),t}updateValuesOnMove(e){const t=Yo(this.gos,e),i=null===t||void 0===t?void 0:t.cellPosition;this.cellHasChanged=!1,!i||this.lastCellHovered&&ss(i,this.lastCellHovered)||(null!==t&&void 0!==t&&t.editing?this.dragSvc.cancelDrag(e):(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=i))}onDragging(e){if(!this.dragging||!e)return;this.updateValuesOnMove(e.target),this.lastMouseEvent=e;const t=this.lastCellHovered,i=e=>t&&t.rowPinned===e&&this.newestRangeStartCell.rowPinned===e,n=i("top")||i("bottom");if(this.autoScrollService.check(e,n),!this.cellHasChanged)return;const o=this.calculateColumnsBetween(this.newestRangeStartCell.column,t.column);o&&(this.draggingRange.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},this.draggingRange.columns=o,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}onDragStop(){if(!this.dragging)return;const{id:e}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsSvc.getGridBodyCtrl().eBodyViewport.removeEventListener("scroll",this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}dispatchChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"cellSelectionChanged",started:e,finished:t,id:i}),this.eventSvc.dispatchEvent({type:"rangeSelectionChanged",started:e,finished:t,id:i})}calculateColumnsBetween(e,t){const i=this.visibleCols.allCols,n=e===t,o=i.indexOf(e);if(o<0)return void pt(178,{colId:e.getId()});const s=n?o:i.indexOf(t);if(s<0)return void pt(178,{colId:t.getId()});if(n)return[e];const r=Math.min(o,s),a=r===o?s:o,l=[];for(let d=r;d<=a;d++)l.push(i[d]);return l}createDragListenerFeature(e){return new Cke(e)}createCellRangeFeature(e,t){return new bke(e,t)}}],dynamicBeans:{fillHandle:class extends gke{constructor(){super('<div class="ag-fill-handle"></div>'),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=0}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=ts(this.beans,e));const{x:t,y:i}=this.initialXY,{x:n,y:o}=ts(this.beans,e),s=Math.abs(t-n),r=Math.abs(i-o),a=this.getFillHandleDirection();let l;l="xy"===a?s>r?"x":"y":a,l!==this.dragAxis&&(this.dragAxis=l,this.changedCalculatedValues=!0)}onDrag(e){if(!this.initialPosition){const e=this.cellCtrl;if(!e)return;this.initialPosition=e.cellPosition}const t=this.getLastCellHovered();t&&this.markPathFrom(this.initialPosition,t)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;const t="x"===this.dragAxis,{cellRange:i,rangeStartRow:n,rangeEndRow:o,beans:s}=this,r=i.columns.length;let a;const{rangeSvc:l,eventSvc:d}=s;if(this.isUp||this.isLeft){const e=t?n:this.lastCellMarked;a=l.createCellRangeFromCellRangeParams({rowStartIndex:e.rowIndex,rowStartPinned:e.rowPinned,columnStart:t?this.lastCellMarked.column:i.columns[0],rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnEnd:i.columns[r-1]})}else a=l.createCellRangeFromCellRangeParams({rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,columnStart:i.columns[0],rowEndIndex:t?o.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:t?o.rowPinned:this.lastCellMarked.rowPinned,columnEnd:t?this.lastCellMarked.column:i.columns[r-1]});a&&(d.dispatchEvent({type:"fillStart"}),this.handleValueChanged(i,a,e),l.setCellRanges([a]),d.dispatchEvent({type:"fillEnd",initialRange:i,finalRange:a}))}onDragCancel(){this.initialXY=null,this.markedCells.length&&this.clearMarkedPath()}getFillHandleDirection(){var e;const t=null===(e=ei(this.gos))||void 0===e?void 0:e.direction;return t?"x"!==t&&"y"!==t&&"xy"!==t?(pt(177),"xy"):t:"xy"}handleValueChanged(e,t,i){var n;const{rangeSvc:o,gos:s,cellNavigation:r,valueSvc:a}=this.beans,l=o.getRangeEndRow(e),d=o.getRangeStartRow(e),c=o.getRangeEndRow(t),h=o.getRangeStartRow(t),u="y"===this.dragAxis;if(this.isReduce&&(null===(n=ei(s))||void 0===n||!n.suppressClearOnFillReduction)){const i=u?e.columns:e.columns.filter((e=>t.columns.indexOf(e)<0)),n=u?r.getRowBelow(c):h;return void(n&&this.clearCellsInRange(n,l,i))}const p=[],g=[],m=[],v=[];let f=!0,y=0;const b=()=>{p.length=0,g.length=0,m.length=0,v.length=0,y=0},C=(t,i)=>{let n=this.isUp?l:d,o=!1;for(u&&(f=!0,b());!o&&n;){const s=ls(this.beans,n);if(!s)break;u&&t?x(p,t,s,(()=>!as(n,this.isUp?d:l))):i&&(f=!0,b(),i.forEach((t=>x(p,t,s,(()=>t!==(this.isLeft?e.columns[0]:Gi(e.columns))))))),o=as(n,this.isUp?h:c),n=this.isUp?r.getRowAbove(n):r.getRowBelow(n)}},x=(e,t,n,o)=>{let s,r=!1;if(f)s=a.getValue(t,n),g.push(s),m.push(a.getValue(t,n,!0)),v.push(a.formatValue(t,n,s)),f=o();else{const{value:o,fromUserFunction:l,sourceCol:d,sourceRowNode:c}=this.processValues({event:i,values:e,initialValues:g,initialNonAggregatedValues:m,initialFormattedValues:v,col:t,rowNode:n,idx:y++});if(s=o,t.isCellEditable(n)){const e=a.getValue(t,n);if(!l){if(d){const e=d.getColDef();if(!1!==e.useValueFormatterForExport&&e.valueFormatter){const e=a.formatValue(d,c,s);null!=e&&(s=e)}}!1!==t.getColDef().useValueParserForImport&&(s=a.parseValue(t,n,d?s:Ve(s),e))}l&&e===s?r=!0:n.setDataValue(t,s,"rangeSvc")}}r||e.push({value:s,column:t,rowNode:n})};if(u)e.columns.forEach((e=>{C(e)}));else{const e=this.isLeft?[...t.columns].reverse():t.columns;C(void 0,e)}}clearCellsInRange(e,t,i){const n={startRow:e,endRow:t,columns:i,startColumn:i[0]};this.beans.rangeSvc.clearCellRangeCellValues({cellRanges:[n]})}processValues(e){var t;const{event:i,values:n,initialValues:o,initialNonAggregatedValues:s,initialFormattedValues:r,col:a,rowNode:l,idx:d}=e,c=null===(t=ei(this.gos))||void 0===t?void 0:t.setFillValue;let h;if(h="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",c){const e=c(this.gos.addGridCommonParams({event:i,values:n.map((e=>{let{value:t}=e;return t})),initialValues:o,initialNonAggregatedValues:s,initialFormattedValues:r,currentIndex:d,currentCellValue:this.beans.valueSvc.getValue(a,l),direction:h,column:a,rowNode:l}));if(!1!==e)return{value:e,fromUserFunction:!0}}const u=!n.some((e=>{let{value:t}=e;const i=parseFloat(t);return isNaN(i)||i.toString()!==t.toString()}));if(i.altKey||!u){if(u&&1===o.length){const e=this.isUp||this.isLeft?-1:1;return{value:parseFloat(Gi(n).value)+1*e,fromUserFunction:!1}}const{value:e,column:t,rowNode:i}=n[d%n.length];return{value:e,fromUserFunction:!1,sourceCol:t,sourceRowNode:i}}return{value:Gi(mke(n.map((e=>{let{value:t}=e;return Number(t)})))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){this.markedCells.forEach((e=>{if(!e.isAlive())return;const{comp:t}=e;t.addOrRemoveCssClass("ag-selection-fill-top",!1),t.addOrRemoveCssClass("ag-selection-fill-right",!1),t.addOrRemoveCssClass("ag-selection-fill-bottom",!1),t.addOrRemoveCssClass("ag-selection-fill-left",!1)})),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,t){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(as(t,e))return;const i=rs(t,e),{rangeStartRow:n,rangeEndRow:o}=this;i&&(t.rowPinned==n.rowPinned&&t.rowIndex>=n.rowIndex||n.rowPinned!=o.rowPinned&&t.rowPinned==o.rowPinned&&t.rowIndex<=o.rowIndex)?(this.reduceVertical(e,t),this.isReduce=!0):(this.extendVertical(e,t,i),this.isReduce=!1)}else{const i=e.column,n=t.column;if(i===n)return;const o=this.beans.visibleCols.allCols,s=o.indexOf(i),r=o.indexOf(n);r<=s&&r>=o.indexOf(this.cellRange.columns[0])?(this.reduceHorizontal(e,t),this.isReduce=!0):(this.extendHorizontal(e,t,r<s),this.isReduce=!1)}this.lastCellMarked=t}extendVertical(e,t,i){const n=this.beans,{rangeSvc:o,cellNavigation:s}=n;let r=e;do{const s=this.cellRange,a=s.columns.length;for(let d=0;d<a;d++){const c=s.columns[d],h=l(l({},{rowIndex:r.rowIndex,rowPinned:r.rowPinned}),{},{column:c}),u=o.isCellInSpecificRange(h,s),p=as(r,e);if(i&&(this.isUp=!0),!p){const e=ds(n,h);if(e){this.markedCells.push(e);const n=e.comp;u||(n.addOrRemoveCssClass("ag-selection-fill-left",0===d),n.addOrRemoveCssClass("ag-selection-fill-right",d===a-1)),n.addOrRemoveCssClass(i?"ag-selection-fill-top":"ag-selection-fill-bottom",as(r,t))}}}if(as(r,t))break}while(r=i?s.getRowAbove(r):s.getRowBelow(r))}reduceVertical(e,t){let i=e;const n=this.beans,o=n.cellNavigation;do{const e=this.cellRange,o=e.columns.length,s=as(i,t);for(let r=0;r<o;r++){const o=ds(n,l(l({},{rowIndex:i.rowIndex,rowPinned:i.rowPinned}),{},{column:e.columns[r]}));o&&(this.markedCells.push(o),o.comp.addOrRemoveCssClass("ag-selection-fill-bottom",as(i,t)))}if(s)break}while(i=o.getRowAbove(i))}extendHorizontal(e,t,i){const n=this.beans,{visibleCols:o,cellNavigation:s}=n,r=o.allCols,a=r.indexOf(i?t.column:e.column),l=r.indexOf(i?this.cellRange.columns[0]:t.column),d=i?0:1,c=r.slice(a+d,l+d),{rangeStartRow:h,rangeEndRow:u}=this;c.forEach((e=>{let t=h,o=!1;do{o=as(t,u);const r=ds(n,{rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e});if(r){this.markedCells.push(r);const n=r.comp;n.addOrRemoveCssClass("ag-selection-fill-top",as(t,h)),n.addOrRemoveCssClass("ag-selection-fill-bottom",as(t,u)),i?(this.isLeft=!0,n.addOrRemoveCssClass("ag-selection-fill-left",e===c[0])):n.addOrRemoveCssClass("ag-selection-fill-right",e===Gi(c))}t=s.getRowBelow(t)}while(!o)}))}reduceHorizontal(e,t){const i=this.beans,{visibleCols:n,cellNavigation:o}=i,s=n.allCols,r=s.indexOf(t.column),a=s.indexOf(e.column),l=s.slice(r,a),{rangeStartRow:d,rangeEndRow:c}=this;l.forEach((e=>{let t=d,i=!1;do{i=as(t,c);const n=ds(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e});n&&(this.markedCells.push(n),n.comp.addOrRemoveCssClass("ag-selection-fill-right",e===l[0])),t=o.getRowBelow(t)}while(!i)}))}refresh(e){const t=this.beans.rangeSvc.getCellRanges()[0];t.startRow&&t.endRow?super.refresh(e):this.destroy()}},rangeHandle:class extends gke{constructor(){super('<div class="ag-range-handle"></div>'),this.type=1,this.rangeFixed=!1}onDrag(e){const t=this.getLastCellHovered();if(!t)return;const i=this.beans.rangeSvc,n=i.getCellRanges(),o=Gi(n);if(this.rangeFixed||(this.fixRangeStartEnd(o),this.rangeFixed=!0),this.endPosition={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column},2===n.length&&n[0].type===Na.DIMENSION&&o.type===Na.VALUE){!as(this.endPosition,i.getRangeEndRow(o))&&i.updateRangeEnd(n[0],l(l({},this.endPosition),{},{column:n[0].columns[0]}),!0)}i.extendLatestRangeToCell(this.endPosition)}onDragEnd(e){const t=Gi(this.beans.rangeSvc.getCellRanges());this.fixRangeStartEnd(t),this.rangeFixed=!1}onDragCancel(){this.rangeFixed=!1}fixRangeStartEnd(e){const t=this.beans.rangeSvc,i=t.getRangeStartRow(e),n=t.getRangeEndRow(e),o=e.columns[0];e.startRow=i,e.endRow=n,e.startColumn=o}}},apiFunctions:{getCellRanges:function(e){var t,i;return null!==(t=null===(i=e.rangeSvc)||void 0===i?void 0:i.getCellRanges())&&void 0!==t?t:null},addCellRange:function(e,t){var i;null===(i=e.rangeSvc)||void 0===i||i.addCellRange(t)},clearRangeSelection:vke,clearCellSelection:vke},dependsOn:[Rwe,vc,sl],css:[".ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing),.ag-cell-range-selected.ag-cell-range-chart,.ag-cell-range-selected:not(.ag-cell-focus){background-color:var(--ag-range-selection-background-color);&.ag-cell-range-chart{background-color:var(--ag-range-selection-chart-background-color)!important;&.ag-cell-range-chart-category{background-color:var(--ag-range-selection-chart-category-background-color)!important}}}.ag-cell-range-selected-1.ag-cell-range-chart,.ag-cell-range-selected-1:not(.ag-cell-focus),.ag-root:not(.ag-context-menu-open) .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-1:not(.ag-cell-inline-editing){background-color:var(--ag-range-selection-background-color)}.ag-cell-range-selected-2.ag-cell-range-chart,.ag-cell-range-selected-2:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-3.ag-cell-range-chart,.ag-cell-range-selected-3:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-4.ag-cell-range-chart,.ag-cell-range-selected-4:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell){&.ag-cell-range-top{border-top-color:var(--ag-range-selection-border-color);border-top-style:var(--ag-range-selection-border-style)}&.ag-cell-range-right{border-right-color:var(--ag-range-selection-border-color);border-right-style:var(--ag-range-selection-border-style)}&.ag-cell-range-bottom{border-bottom-color:var(--ag-range-selection-border-color);border-bottom-style:var(--ag-range-selection-border-style)}&.ag-cell-range-left{border-left-color:var(--ag-range-selection-border-color);border-left-style:var(--ag-range-selection-border-style)}}.ag-cell.ag-selection-fill-top,.ag-cell.ag-selection-fill-top.ag-cell-range-selected{border-top:1px dashed;border-top-color:var(--ag-range-selection-border-color)}:where(.ag-ltr) .ag-cell.ag-selection-fill-right,:where(.ag-ltr) .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}:where(.ag-rtl) .ag-cell.ag-selection-fill-right,:where(.ag-rtl) .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}.ag-cell.ag-selection-fill-bottom,.ag-cell.ag-selection-fill-bottom.ag-cell-range-selected{border-bottom:1px dashed;border-bottom-color:var(--ag-range-selection-border-color)}:where(.ag-ltr) .ag-cell.ag-selection-fill-left,:where(.ag-ltr) .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}:where(.ag-rtl) .ag-cell.ag-selection-fill-left,:where(.ag-rtl) .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}.ag-fill-handle,.ag-range-handle{background-color:var(--ag-range-selection-border-color);bottom:-1px;height:6px;position:absolute;width:6px}:where(.ag-ltr) .ag-fill-handle,:where(.ag-ltr) .ag-range-handle{right:-1px}:where(.ag-rtl) .ag-fill-handle,:where(.ag-rtl) .ag-range-handle{left:-1px}.ag-fill-handle{cursor:cell}:where(.ag-ltr) .ag-range-handle{cursor:nwse-resize}:where(.ag-rtl) .ag-range-handle{cursor:nesw-resize}"]},wke={moduleName:"LoadingCellRenderer",version:Ewe,userComponents:{agLoadingCellRenderer:class extends En{constructor(){super('<div class="ag-loading">\n            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" data-ref="eLoadingText"></span>\n        </div>'),this.eLoadingIcon=Tn,this.eLoadingText=Tn}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Wr("groupLoading",this.beans,null);e&&this.eLoadingIcon.appendChild(e);const t=this.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}}},icons:{groupLoading:"loading"},dependsOn:[Rwe]},Ske={moduleName:"SkeletonCellRenderer",version:Ewe,userComponents:{agSkeletonCellRenderer:class extends En{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t="ag-cell-skeleton-renderer-".concat(this.getCompId());this.getGui().setAttribute("id",t),this.addDestroyFunc((()=>T(e.eParentOfValue))),T(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");A(this.getGui(),t)}setupLoading(e){const t=Tt(this.beans).createElement("div");t.classList.add("ag-skeleton-effect");const i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width="".concat(e,"%")}this.getGui().appendChild(t);const n=this.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");A(this.getGui(),n)}refresh(e){return!1}}},dependsOn:[Rwe]};var Mke="PivotRowTotal_",Dke="Exceeded maximum allowed pivot column count.",kke={moduleName:"SharedPivot",version:Ewe,beans:[class extends Si{constructor(){super(...arguments),this.beanName="pivotResultCols"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols}destroy(){var e;an(this.beans,null===(e=this.pivotResultCols)||void 0===e?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return null!=this.pivotResultCols}lookupPivotResultCol(e,t){if(null==this.pivotResultCols)return null;const i=this.colModel.getColDefCol(t);let n=null;return this.pivotResultCols.list.forEach((t=>{const o=t.getColDef().pivotKeys,s=t.getColDef().pivotValueColumn;zi(o,e)&&s===i&&(n=t)})),n}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.colModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.colModel.ready&&(null!=e||null!=this.pivotResultCols)){if(e){var i,n;this.processPivotResultColDef(e);const o=vn(this.beans,e,!1,(null===(i=this.pivotResultCols)||void 0===i?void 0:i.tree)||this.previousPivotResultCols||void 0,t);an(this.beans,null===(n=this.pivotResultCols)||void 0===n?void 0:n.tree,o.columnTree);const s=o.columnTree,r=o.treeDept,a=sn(s),l={};this.pivotResultCols={tree:s,treeDepth:r,list:a,map:l},this.pivotResultCols.list.forEach((e=>this.pivotResultCols.map[e.getId()]=e));const d=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.colModel.refreshCols(!d)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.colModel.refreshCols(!1);this.visibleCols.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const n=e=>{e.forEach((e=>{if(ze(e.children)){const t=e;i&&i(t),n(t.children)}else{t&&t(e)}}))};e&&n(e)}},class extends Si{constructor(){super(...arguments),this.beanName="pivotColDefSvc"}wireBeans(e){this.colModel=e.colModel,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.colNames=e.colNames}postConstruct(){const e=()=>{var e;return null!==(e=this.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==e?e:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",(()=>{this.fieldSeparator=e()}));const t=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=t(),this.addManagedPropertyListener("pivotDefaultExpanded",(()=>{this.pivotDefaultExpanded=t()}))}createPivotColumnDefs(e){const t=this.createPivotColumnsFromUniqueValues(e);const i=function e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((t=>{void 0!==t.children?e(t.children,i):i.push(t)})),i}(t);this.addRowGroupTotals(t,i),this.addExpandablePivotGroups(t,i),this.addPivotTotalsToGroups(t,i);return{pivotColumnGroupDefs:t,pivotColumnDefs:i.map((e=>l({},e)))}}createPivotColumnsFromUniqueValues(e){var t,i;const n=null!==(t=null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[],o=n.length;return this.recursivelyBuildGroup(0,e,[],o,n)}recursivelyBuildGroup(e,t,i,n,o){var s;const r=null===(s=this.valueColsSvc)||void 0===s?void 0:s.columns;if(e>=n)return this.buildMeasureCols(i);const a=o[e].getColDef(),l=this.headerNameComparator.bind(this,a.pivotComparator);if(1===(null===r||void 0===r?void 0:r.length)&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&e===n-1){const e=[];for(const n of Object.keys(t)){const t=[...i,n],o=this.createColDef(r[0],n,t);o.columnGroupShow="open",e.push(o)}return e.sort(l),e}const d=[];for(const[c,h]of Object.entries(t)){const t=-1===this.pivotDefaultExpanded||e<this.pivotDefaultExpanded,s=[...i,c];d.push({children:this.recursivelyBuildGroup(e+1,h,s,n,o),headerName:c,pivotKeys:s,columnGroupShow:"open",openByDefault:t,groupId:this.generateColumnGroupId(s)})}return d.sort(l),d}buildMeasureCols(e){var t,i;const n=null!==(t=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[];return 0===n.length?[this.createColDef(null,"-",e)]:n.map((t=>{const i=this.colNames.getDisplayNameForColumn(t,"header");return l(l({},this.createColDef(t,i,e)),{},{columnGroupShow:"open"})}))}addExpandablePivotGroups(e,t){const i=this.gos.get("suppressExpandablePivotGroups");if(i||this.gos.get("pivotColumnGroupTotals"))return;const n=(e,t,o)=>{if("children"in e){var s;const r=new Map;e.children.forEach((e=>{n(e,t,r)}));const a=!e.children.some((e=>e.children));return null===(s=this.valueColsSvc)||void 0===s||s.columns.forEach((n=>{const o=this.colNames.getDisplayNameForColumn(n,"header"),s=this.createColDef(n,o,e.pivotKeys);if(s.pivotTotalColumnIds=r.get(n.getColId()),s.columnGroupShow=i?"open":"closed",s.aggFunc=n.getAggFunc(),!a){e.children.push(s),t.push(s)}})),void this.merge(o,r)}if(!e.pivotValueColumn)return;const r=e.pivotValueColumn.getColId();if(o.has(r)){o.get(r).push(e.colId)}else o.set(r,[e.colId])};e.forEach((e=>{n(e,t,new Map)}))}addPivotTotalsToGroups(e,t){var i;if(!this.gos.get("pivotColumnGroupTotals"))return;const n="after"===this.gos.get("pivotColumnGroupTotals"),o=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns,s=null===o||void 0===o?void 0:o.map((e=>e.getAggFunc()));if(s&&!(s.length<1)&&this.sameAggFuncs(s)&&o){const i=o[0];e.forEach((e=>{this.recursivelyAddPivotTotal(e,t,i,n)}))}}recursivelyAddPivotTotal(e,t,i,n){const o=e;if(!o.children){const t=e;return t.colId?[t.colId]:null}let s=[];if(o.children.forEach((e=>{const o=this.recursivelyAddPivotTotal(e,t,i,n);o&&(s=s.concat(o))})),o.children.length>1){const o=this.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),r=this.createColDef(i,o,e.pivotKeys,!0);r.pivotTotalColumnIds=s,r.aggFunc=i.getAggFunc(),r.columnGroupShow=this.gos.get("suppressExpandablePivotGroups")?"open":void 0;const a=e.children;n?a.push(r):a.unshift(r),t.push(r)}return s}addRowGroupTotals(e,t){var i,n;if(!this.gos.get("pivotRowTotals"))return;const o="after"===this.gos.get("pivotRowTotals"),s=(null!==(i=null===(n=this.valueColsSvc)||void 0===n?void 0:n.columns)&&void 0!==i?i:[]).slice();o||s.reverse();const r=s.length>1||!this.gos.get("removePivotHeaderRowWhenSingleValueColumn");for(let a=0;a<s.length;a++){const i=s[a],n=this.colNames.getDisplayNameForColumn(i,"header"),l=this.createColDef(i,n,[]),d=[];for(let e=0;e<t.length;e++){const n=t[e];n.pivotValueColumn===i&&d.push(n.colId)}l.pivotTotalColumnIds=d,l.colId=Mke+l.colId;const c=r?{children:[l],pivotKeys:[],groupId:"".concat(Mke,"_pivotGroup_").concat(i.getColId())}:l;t.push(l),o?e.push(c):e.unshift(c)}}createColDef(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={};if(e){const t=e.getColDef();Object.assign(o,t),o.hide=!1}return o.headerName=t,o.colId=this.generateColumnId(i||[],e&&!n?e.getColId():""),o.field=o.colId,o.valueGetter=e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[e.colDef.field]},o.pivotKeys=i,o.pivotValueColumn=e,!0===o.filter&&(o.filter="agNumberColumnFilter"),o}sameAggFuncs(e){if(1==e.length)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}headerNameComparator(e,t,i){return e?e(t.headerName,i.headerName):t.headerName&&!i.headerName?1:!t.headerName&&i.headerName?-1:t.headerName&&i.headerName?t.headerName<i.headerName?-1:t.headerName>i.headerName?1:0:0}merge(e,t){t.forEach(((t,i)=>{const n=[...e.has(i)?e.get(i):[],...t];e.set(i,n)}))}generateColumnGroupId(e){var t,i;const n=(null!==(t=null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]).map((e=>e.getColId()));return"pivotGroup_".concat(n.join("-"),"_").concat(e.join("-"))}generateColumnId(e,t){var i,n;const o=(null!==(i=null===(n=this.pivotColsSvc)||void 0===n?void 0:n.columns)&&void 0!==i?i:[]).map((e=>e.getColId()));return"pivot_".concat(o.join("-"),"_").concat(e.join("-"),"_").concat(t)}createColDefsFromFields(e){const t={};for(let o=0;o<e.length;o++){const i=e[o].split(this.fieldSeparator);let n=t;for(let e=0;e<i.length;e++){const t=i[e];null==n[t]&&(n[t]={}),n=n[t]}}const i=(e,t,n,o)=>{const s=[];for(const a of Object.keys(n)){const t=n[a],r=i("".concat(e).concat(this.fieldSeparator).concat(a),a,t,o+1);s.push(r)}if(0===s.length){const i=this.colModel.getColDefCol(t);if(i){var r;const n=null!==(r=this.colNames.getDisplayNameForColumn(i,"header"))&&void 0!==r?r:t,o=this.createColDef(i,n,void 0,!1);return o.colId=e,o.aggFunc=i.getAggFunc(),o.valueGetter=t=>{var i;return null===(i=t.data)||void 0===i?void 0:i[e]},o}return{colId:e,headerName:t,valueGetter:t=>{var i;return null===(i=t.data)||void 0===i?void 0:i[e]}}}if(this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===s.length&&"colId"in s[0])return s[0].headerName=t,s[0];return{openByDefault:-1===this.pivotDefaultExpanded||o<this.pivotDefaultExpanded,groupId:e,headerName:t,children:s}},n=[];for(const o of Object.keys(t)){const e=i(o,o,t[o],0);n.push(e)}return n}},BDe],apiFunctions:{isPivotMode:function(e){return e.colModel.isPivotMode()},getPivotResultColumn:function(e,t,i){var n,o;return null!==(n=null===(o=e.pivotResultCols)||void 0===o?void 0:o.lookupPivotResultCol(t,i))&&void 0!==n?n:null},setValueColumns:function(e,t){var i;null===(i=e.valueColsSvc)||void 0===i||i.setColumns(t,"api")},getValueColumns:function(e){var t,i;return null!==(t=null===(i=e.valueColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]},removeValueColumns:function(e,t){var i;null===(i=e.valueColsSvc)||void 0===i||i.removeColumns(t,"api")},addValueColumns:function(e,t){var i;null===(i=e.valueColsSvc)||void 0===i||i.addColumns(t,"api")},setPivotColumns:function(e,t){var i;null===(i=e.pivotColsSvc)||void 0===i||i.setColumns(t,"api")},removePivotColumns:function(e,t){var i;null===(i=e.pivotColsSvc)||void 0===i||i.removeColumns(t,"api")},addPivotColumns:function(e,t){var i;null===(i=e.pivotColsSvc)||void 0===i||i.addColumns(t,"api")},getPivotColumns:function(e){var t,i;return null!==(t=null===(i=e.pivotColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]},setPivotResultColumns:function(e,t){var i;null===(i=e.pivotResultCols)||void 0===i||i.setPivotResultCols(t,"api")},getPivotResultColumns:function(e){var t;const i=null===(t=e.pivotResultCols)||void 0===t?void 0:t.getPivotResultCols();return i?i.list:null}},dependsOn:[XDe,Il]},Ike={moduleName:"Pivot",version:Ewe,rowModels:["clientSide"],beans:[class extends Si{constructor(){super(...arguments),this.beanName="pivotStage",this.refreshProps=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),this.step="pivot",this.uniqueValues={},this.lastTimeFailed=!1,this.maxUniqueValues=-1,this.currentUniqueCount=0}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.pivotResultCols=e.pivotResultCols,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.pivotColDefSvc=e.pivotColDefSvc}execute(e){const t=e.changedPath;this.colModel.isPivotActive()?this.executePivotOn(t):this.executePivotOff(t)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.pivotResultCols.isPivotResultColsPresent()&&(this.pivotResultCols.setPivotResultCols(null,"rowModelUpdated"),e&&(e.active=!1))}executePivotOn(e){var t,i,n,o,s,r;const a=null!==(t=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns.length)&&void 0!==t?t:1,l=this.gos.get("pivotMaxGeneratedColumns");let d;this.maxUniqueValues=-1===l?-1:l/a;try{d=this.bucketUpRowNodes(e)}catch(S){if(S.message===Dke)return this.pivotResultCols.setPivotResultCols([],"rowModelUpdated"),this.eventSvc.dispatchEvent({type:"pivotMaxColumnsExceeded",message:S.message}),void(this.lastTimeFailed=!0);throw S}const c=this.setUniqueValues(d),h=null!==(n=null===(o=this.valueColsSvc)||void 0===o?void 0:o.columns)&&void 0!==n?n:[],u=h.map((e=>"".concat(e.getId(),"-").concat(e.getColDef().headerName))).join("#"),p=h.map((e=>e.getAggFunc().toString())).join("#"),g=this.aggregationColumnsHashLastTime!==u,m=this.aggregationFuncsHashLastTime!==p;this.aggregationColumnsHashLastTime=u,this.aggregationFuncsHashLastTime=p;const v=(null!==(s=null===(r=this.rowGroupColsSvc)||void 0===r?void 0:r.columns)&&void 0!==s?s:[]).map((e=>e.getId())).join("#"),f=v!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=v;const y=this.gos.get("pivotRowTotals"),b=this.gos.get("pivotColumnGroupTotals"),C=this.gos.get("suppressExpandablePivotGroups"),x=this.gos.get("removePivotHeaderRowWhenSingleValueColumn"),w=y!==this.pivotRowTotalsLastTime||b!==this.pivotColumnGroupTotalsLastTime||C!==this.suppressExpandablePivotGroupsLastTime||x!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=y,this.pivotColumnGroupTotalsLastTime=b,this.suppressExpandablePivotGroupsLastTime=C,this.removePivotHeaderRowWhenSingleValueColumnLastTime=x,this.lastTimeFailed||c||g||f||m||w){const{pivotColumnGroupDefs:t,pivotColumnDefs:i}=this.pivotColDefSvc.createPivotColumnDefs(this.uniqueValues);this.pivotColumnDefs=i,this.pivotResultCols.setPivotResultCols(t,"rowModelUpdated"),e&&(e.active=!1)}this.lastTimeFailed=!1}setUniqueValues(e){return!!(JSON.stringify(e)!==JSON.stringify(this.uniqueValues))&&(this.uniqueValues=e,!0)}bucketUpRowNodes(e){this.currentUniqueCount=0;const t={};e.forEachChangedNodeDepthFirst((e=>{e.leafGroup&&(e.childrenMapped=null)}));const i=e=>{var n;e.leafGroup?this.bucketRowNode(e,t):null===(n=e.childrenAfterFilter)||void 0===n||n.forEach(i)};return e.executeFromRootNode(i),t}bucketRowNode(e,t){var i;const n=null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns;0===(null===n||void 0===n?void 0:n.length)?e.childrenMapped=null:e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,n,0,t),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const o={},s=t[i];if(e.forEach((e=>{let t=this.valueSvc.getKeyForNode(s,e);if(_e(t)&&(t=""),!n[t]){this.currentUniqueCount+=1,n[t]={};const e=-1!==this.maxUniqueValues,i=this.currentUniqueCount>this.maxUniqueValues;if(e&&i)throw Error(Dke)}o[t]||(o[t]=[]),o[t].push(e)})),i===t.length-1)return o;{const e={};for(const[s,r]of Object.entries(o))e[s]=this.bucketChildren(r,t,i+1,n[s]);return e}}getPivotColumnDefs(){return this.pivotColumnDefs}}],dependsOn:[kke,qDe,jDe]},Ake=(e,t)=>e.treeNode.sourceIdx-t.treeNode.sourceIdx,Tke=Bi.values(),Eke=(e,t)=>{e.parent=null,e.treeNode=null,t?e.childrenAfterGroup=[]:(e.level=0,e.childrenAfterGroup=null,e.allLeafChildren=null)},Rke=class e{constructor(e,t,i){this.parent=e,this.key=t,this.level=i,this.children=null,this.invalidatedHead=null,this.invalidatedNext=void 0,this.row=null,this.oldRow=null,this.duplicateRows=null,this.childrenAfterGroup=Bi,this.allLeafChildren=Bi,this.childrenChanged=!1,this.leafChildrenChanged=!1,this.sourceIdx=-1}get size(){var e,t;return null!==(e=null===(t=this.children)||void 0===t?void 0:t.size)&&void 0!==e?e:0}isEmptyFillerNode(){var e,t;return!(null!==(e=this.row)&&void 0!==e&&e.data)&&!(null!==(t=this.children)&&void 0!==t&&t.size)}enumChildren(){var e,t;return null!==(e=null===(t=this.children)||void 0===t?void 0:t.values())&&void 0!==e?e:Tke}upsertKey(t){var i;"string"!==typeof t&&(t=String(t));let n=null===(i=this.children)||void 0===i?void 0:i.get(t);var o,s;n||(n=new e(this,t,this.level+1),null===(o=null!==(s=this.children)&&void 0!==s?s:this.children=new Map)||void 0===o||o.set(n.key,n));return n}appendKey(t){const i=this.children;"string"!==typeof t&&(t=String(t));let n=null===i||void 0===i?void 0:i.get(t);var o,s;n?(i.delete(t),i.set(t,n)):(n=new e(this,t,this.level+1),null===(o=null!==(s=this.children)&&void 0!==s?s:this.children=new Map)||void 0===o||o.set(n.key,n));return n}destroy(){var e;const{row:t,parent:i}=this;null!==i&&(null===i||void 0===i||null===(e=i.children)||void 0===e||e.delete(this.key),null!==t&&Eke(t,!0),this.parent=null)}setRow(e){const{level:t,row:i,childrenAfterGroup:n}=this;if(t<0)null!==i&&i!==e&&Eke(i,!0);else{if(i===e)return!1;if(null!==i){var o,s;if(null!==e)e.allLeafChildren=null!==(o=null!==(s=i.allLeafChildren)&&void 0!==s?s:this.allLeafChildren)&&void 0!==o?o:Bi;Eke(i,!1)}else if(null!==e){var r;e.allLeafChildren=null!==(r=this.allLeafChildren)&&void 0!==r?r:Bi}}return null!==e&&(e.level=t,e.childrenAfterGroup=n,e.treeNode=this),this.row=e,!0}removeRow(e){const{level:t,row:i,duplicateRows:n,childrenAfterGroup:o}=this;if(i===e){const e=this.popDuplicateRow();var s,r;if(e){if(this.row=e,e.childrenAfterGroup=o,t>=0)e.allLeafChildren=null!==(s=null!==(r=i.allLeafChildren)&&void 0!==r?r:this.allLeafChildren)&&void 0!==s?s:Bi}else this.row=null}else{if(null===n||void 0===n||!n.delete(e))return!1;0===n.size&&(this.duplicateRows=null)}return Eke(e,t<0),!0}addDuplicateRow(e){const{level:t}=this;let i=this.duplicateRows;if(null===i)i=new Set,this.duplicateRows=i;else if(i.has(e))return!1;return i.add(e),e.treeNode=this,e.level=t,t>=0&&(e.allLeafChildren=Bi),e.childrenAfterGroup=Bi,!0}sortFirstDuplicateRow(){const e=this.duplicateRows,t=this.row;if(!t||!e)return t;let i=t;for(const s of e)s.sourceRowIndex<i.sourceRowIndex&&(i=s);var n,o;i!==t&&(i.childrenAfterGroup=this.childrenAfterGroup,i.allLeafChildren=null!==(n=null!==(o=t.allLeafChildren)&&void 0!==o?o:this.allLeafChildren)&&void 0!==n?n:Bi,t.childrenAfterGroup=Bi,t.allLeafChildren=Bi,e.delete(i),e.add(t),this.row=i);return i}popDuplicateRow(){let e=null;const t=this.duplicateRows;return null!==t&&(e=t.values().next().value,null!==e&&t.delete(e)&&0===t.size&&(this.duplicateRows=null)),e}dequeueInvalidated(){const e=this.invalidatedHead;var t;null!==e&&(this.invalidatedHead=null!==(t=e.invalidatedNext)&&void 0!==t?t:null,e.invalidatedNext=void 0);return e}invalidate(){let e=this,t=this.parent;for(;null!==t&&void 0===e.invalidatedNext;)e.invalidatedNext=t.invalidatedHead,t.invalidatedHead=e,e=t,t=e.parent}invalidateOrder(){var e,t,i;const n=this.parent;null===n||n.childrenChanged||!((null!==(e=null===(t=this.children)||void 0===t?void 0:t.size)&&void 0!==e?e:0)>1||null===(i=n.row)||void 0===i)&&i.data||(n.childrenChanged=!0,n.invalidate())}getNewSourceIdx(){var e,t;const i=this.row;return null!==i&&void 0!==i&&i.data?i.sourceRowIndex:null!==(e=null===(t=this.childrenAfterGroup[0])||void 0===t||null===(t=t.treeNode)||void 0===t?void 0:t.sourceIdx)&&void 0!==e?e:this.sourceIdx}updateChildrenAfterGroup(e){var t;this.childrenChanged=!1;const i=e&&(null===(t=this.children)||void 0===t?void 0:t.size)||0;if(0===i)return this.row.childrenAfterGroup=Bi,0!==this.childrenAfterGroup.length&&(this.leafChildrenChanged=!0,this.childrenAfterGroup=Bi,!0);let n=!1,o=this.childrenAfterGroup;o===Bi?(o=new Array(i),this.childrenAfterGroup=o,this.row.childrenAfterGroup=o,n=!0):o.length!==i&&(o.length=i,n=!0);let s=0,r=-1,a=!1;for(const l of this.enumChildren()){const e=l.getNewSourceIdx();e<r&&(a=!0),r=e,l.sourceIdx=e;const t=l.row;o[s]!==t&&(o[s]=t,n=!0),++s}return n&&(this.leafChildrenChanged=!0),a&&this.reorderChildrenList(o),n||a}reorderChildrenList(e){const t=e.length,i=this.children;e.sort(Ake),i.clear();for(let n=0;n<t;++n){const t=e[n].treeNode;i.set(t.key,t)}}updateAllLeafChildren(){var e;const{parent:t,row:i,childrenAfterGroup:n}=this;this.leafChildrenChanged=!1;let o=!1;const s=n.length;var r;if(0===s)o=0!==(null===(r=i.allLeafChildren)||void 0===r?void 0:r.length),i.allLeafChildren=Bi,this.allLeafChildren=Bi;else if(1===s&&null!==(e=n[0].allLeafChildren)&&void 0!==e&&e.length)i.allLeafChildren=n[0].allLeafChildren,this.allLeafChildren=null,o=!0;else{let e=this.allLeafChildren;e!==Bi&&null!==e||(e=[],this.allLeafChildren=e);const t=e.length;let r=0;for(let i=0;i<s;++i){const s=n[i],a=s.allLeafChildren,l=a.length;if(l)for(let i=0;i<l;++i){const n=a[i];(r>=t||e[r]!==n)&&(e[r]=n,o=!0),++r}else(r>=t||e[r]!==s)&&s&&(e[r]=s,o=!0),++r}t!==r&&(e.length=r,o=!0),i.allLeafChildren!==e&&(i.allLeafChildren=e,o=!0)}o&&t&&(t.leafChildrenChanged=!0)}},Lke=e=>0!==(2&e.treeNodeFlags),Pke=e=>0!==(4&e.treeNodeFlags),Nke=e=>0!==(16&e.treeNodeFlags),Fke=(e,t)=>{t?e.treeNodeFlags|=2:e.treeNodeFlags&=-3},Oke=e=>{e.treeNodeFlags|=16},Bke=e=>{const t=e.level<0,i=e.treeNodeFlags,n=0!==(1&i);if(e.treeNodeFlags=1|-29&i,!n||t){const t=e.childrenAfterGroup;e.childrenAfterFilter=t,e.childrenAfterAggFilter=t,e.childrenAfterSort=t}if(t){const t=e.sibling;t&&(t.childrenAfterGroup=e.childrenAfterGroup,t.childrenMapped=e.childrenMapped)}},Gke=e=>{e.treeNodeFlags=0},zke=class extends Xr{constructor(){super(...arguments),this.oldGroupDisplayColIds="",this.rowsPendingDestruction=null,this.treeRoot=null}activate(e){var t;super.activate(e),(null!==(t=this.treeRoot)&&void 0!==t?t:this.treeRoot=new Rke(null,"",-1)).setRow(e)}destroy(){super.destroy(),this.treeRoot=null,this.rowsPendingDestruction=null,this.oldGroupDisplayColIds=""}deactivate(){const e=this.treeRoot;if(e){const t=e.row;null!==t&&(e.removeRow(t),Gke(t)),this.treeDestroy(e)}this.commitDestroyedRows(),super.deactivate(),this.treeRoot=null,this.oldGroupDisplayColIds=""}treeSetRow(e,t,i){var n;const{level:o,row:s}=e;if(o<0)return!1;let r=!1;if(s!==t){const i=t.treeNode;null!==i&&i!==e&&(i.removeRow(t),i.invalidate()),null===s?(e.setRow(t),r=!0):s.data?e.addDuplicateRow(t)&&(r=!0):(e.setRow(t),this.destroyRow(s,!0),r=!0)}return i||Pke(t)||((e=>{const t=e.treeNodeFlags;0!==(1&t)&&(e.treeNodeFlags=4|t)})(t),r=!0),r&&e.invalidate(),null===(n=this.rowsPendingDestruction)||void 0===n||n.delete(t),r}treeRemove(e,t){const{parent:i,level:n}=e;if(n<0)return;let o=!1;e.removeRow(t)&&(o=!0,i&&(i.childrenChanged=!0),this.destroyRow(t,!t.data)),o&&e.invalidate()}treeCommit(e){var t;const{treeRoot:i,rootNode:n}=this;if(!i||!n)return;const o=this.treeData,s={rootNode:n,changedPath:e,treeData:o,expandByDefault:this.gos.get("groupDefaultExpanded"),isGroupOpenByDefault:this.gos.getCallback("isGroupOpenByDefault")};this.treeCommitChildren(s,i,!1);const r=i.row;if(r){var a;if(o&&(r.leafGroup=!1),i.childrenChanged&&i.updateChildrenAfterGroup(o)&&Oke(r),Nke(r))null!==(a=s.changedPath)&&void 0!==a&&a.active&&s.changedPath.addParentNode(r);Bke(r),r.updateHasChildren()}this.commitDestroyedRows(),null===(t=this.beans.selectionSvc)||void 0===t||t.updateSelectableAfterGrouping(e)}treeCommitChildren(e,t,i){for(var n;;){const n=t.dequeueInvalidated();if(null===n)break;var o,s;if(n.parent===t)this.treeCommitChild(e,n,i||!(null===(o=null===(s=t.row)||void 0===s?void 0:s.expanded)||void 0===o||o))}t.childrenChanged||(t.childrenChanged=(e.treeData?t.size:0)!==(null===(n=t.row.childrenAfterGroup)||void 0===n?void 0:n.length))}treeCommitChild(e,t,i){t.isEmptyFillerNode()?this.treeClear(t):(this.treeCommitPreOrder(e,t),this.treeCommitChildren(e,t,i),t.isEmptyFillerNode()?this.treeClear(t):this.treeCommitPostOrder(e,t,i))}treeCommitPreOrder(e,t){let i=t.row;if(null===i?(i=this.createFillerRow(t),t.setRow(i)):(i=t.sortFirstDuplicateRow(),void 0===i.allChildrenCount&&(i.allChildrenCount=null)),e.treeData){if(i.parent=t.parent.row,t.oldRow!==i)for(const n of t.enumChildren()){const e=n.row;null!==e&&(e.parent=i)}const e=t.key;i.key!==e?(i.key=e,(e=>{const t=e.treeNodeFlags;0!==(1&t)&&(e.treeNodeFlags=12|t)})(i),this.setGroupData(i,e)):i.groupData||this.setGroupData(i,e)}else i.key=t.key,i.parent=e.rootNode}treeCommitPostOrder(e,t,i){var n,o;const s=t.parent,r=t.row,a=t.oldRow,l=e.treeData;t.childrenChanged&&t.updateChildrenAfterGroup(l)&&Oke(r),t.leafChildrenChanged&&t.updateAllLeafChildren();const d=!(null===(n=r.childrenAfterGroup)||void 0===n||!n.length),c=d||!r.data,h=r.group;var u;(h!==c?(Oke(r),iMe(r,this.beans,c),c||r.expanded||Fke(r,!1)):r.hasChildren()!==d&&(Oke(r),r.updateHasChildren()),c&&!Lke(r)&&(r.expanded=((e,t,i)=>{if(t!==i&&null!==t&&t.group&&Lke(t)&&!e.isGroupOpenByDefault)return t.expanded;const n=e.isGroupOpenByDefault;return n?1==n({rowNode:i,field:i.field,key:i.key,level:i.level,rowGroupColumn:i.rowGroupColumn}):-1===e.expandByDefault||i.level<e.expandByDefault})(e,a,r),Fke(r,!0)),Pke(r)&&(Oke(s.row),(e=>0!==(8&e.treeNodeFlags))(r)&&r.setData(r.data)),a!==r&&(t.oldRow=r,null===a||!h&&0===t.size||Oke(r),s.childrenChanged=!0,Oke(s.row)),Nke(r))&&(l&&null!==(u=e.changedPath)&&void 0!==u&&u.active?e.changedPath.addParentNode(r):Oke(e.rootNode));Bke(r),null!==(o=t.duplicateRows)&&void 0!==o&&o.size&&!t.duplicateRowsWarned&&(t.duplicateRowsWarned=!0,pt(186,{rowId:r.id,rowData:r.data,duplicateRowsData:Array.from(t.duplicateRows).map((e=>e.data))})),i&&null!==r.rowIndex&&r.clearRowTopAndRowIndex();const p=t.getNewSourceIdx(),g=t.sourceIdx;g!==p&&(t.sourceIdx=p,-1!==g&&(s.childrenChanged=!0))}createFillerRow(e){const t=new fs(this.beans);t.key=e.key,t.group=!0,t.field=null,t.leafGroup=!1,t.rowGroupIndex=null,t.allChildrenCount=null;let i=e.level+"-"+e.key,n=e.parent;for(;null!==n;){const e=n.parent;if(null===e)break;i="".concat(n.level,"-").concat(n.key,"-").concat(i),n=e}return t.id=ms+i,t}setGroupData(e,t){var i;const n={};e.groupData=n;const o=null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.getShowRowGroupCols();if(o)for(const s of o)n[s.getColId()]=t}treeClear(e){const{parent:t,oldRow:i,row:n,level:o}=e;if(null!==t&&null!==i&&(t.childrenChanged=!0,null!==t.row&&Oke(t.row)),null!==n&&o>=0){let t=e.row;for(;null!==t&&e.removeRow(t);)this.destroyRow(t,!t.data),t=e.row}for(const s of e.enumChildren())this.treeClear(s);e.destroy()}treeDestroy(e){const{row:t,level:i,duplicateRows:n}=e;if(t&&(i>=0&&!t.data?this.destroyRow(t,!0):Gke(t)),n)for(const o of n)i>=0&&!o.data?this.destroyRow(o,!0):Gke(o);for(const o of e.enumChildren())this.treeDestroy(o);e.destroy()}destroyRow(e,t){if(e.isSelected())t=!1;else if(!(e=>0!==(1&e.treeNodeFlags))(e))return void Gke(e);var i;t?(Gke(e),e.clearRowTopAndRowIndex(),e.groupData=null):(null!==(i=this.rowsPendingDestruction)&&void 0!==i?i:this.rowsPendingDestruction=new Set).add(e)}commitDestroyedRows(){const{rowsPendingDestruction:e}=this;let t=null;if(null!==e){for(const n of e){var i;if(this.destroyRow(n,!0),n.isSelected())(null!==(i=t)&&void 0!==i?i:t=[]).push(n)}this.rowsPendingDestruction=null}t&&this.deselectNodes(t)}refreshModel(e){if(e.afterColumnsChanged)if(this.treeData){var t,i;const e=null!==(t=null===(i=this.beans.showRowGroupCols)||void 0===i||null===(i=i.getShowRowGroupCols())||void 0===i?void 0:i.map((e=>e.getId())).join("-"))&&void 0!==t?t:"";if(this.oldGroupDisplayColIds!==e){var n;this.oldGroupDisplayColIds=e;const t=null===(n=this.rootNode)||void 0===n?void 0:n.childrenAfterGroup;if(t)for(let e=0,i=null!==(o=t.length)&&void 0!==o?o:0;e<i;++e){var o;const i=t[e],n=i.treeNode;n&&this.setGroupData(i,n.key)}}}else this.oldGroupDisplayColIds=""}},_ke={moduleName:"SharedTreeData",version:Ewe,dependsOn:[Rwe,FDe,WDe,UDe]},Vke={moduleName:"TreeData",version:Ewe,beans:[class extends zke{constructor(){super(...arguments),this.beanName="csrmPathTreeNodeSvc"}loadNewRowData(e){const t=this.rootNode,i=this.treeRoot;this.treeClear(i),i.setRow(t),super.loadNewRowData(e);const n=t.allLeafChildren,o=this.gos.get("getDataPath");for(let s=0,r=n.length;s<r;++s)this.addOrUpdateRow(o,n[s],!0);this.treeCommit()}get treeData(){const e=this.gos;return e.get("treeData")&&!!e.get("getDataPath")}refreshModel(e){const t=e.changedRowNodes;t&&this.executeTransactions(t,e.changedPath,e.rowNodesOrderChanged),super.refreshModel(e)}executeTransactions(e,t,i){var n;const o=this.treeRoot;if(!o)return;o.setRow(this.rootNode);for(const l of e.removals){const e=l.treeNode;e&&this.treeRemove(e,l)}const s=e.updates,r=this.gos.get("getDataPath");for(const l of s.keys())this.addOrUpdateRow(r,l,s.get(l));const a=null===(n=o.row)||void 0===n?void 0:n.allLeafChildren;if(i&&a)for(let l=0,d=a.length;l<d;++l){const e=a[l].treeNode;e&&e.sourceIdx!==l&&e.invalidateOrder()}this.treeCommit(t)}addOrUpdateRow(e,t,i){const n=this.treeRoot;if(!this.treeData)return void this.treeSetRow(n.upsertKey(t.id),t,i);const o=null===e||void 0===e?void 0:e(t.data),s=null===o||void 0===o?void 0:o.length;if(s){let e=0,r=n;do{r=r.upsertKey(o[e++])}while(e<s);this.treeSetRow(r,t,i)}else pt(185,{data:t.data})}},class extends zke{constructor(){super(...arguments),this.beanName="csrmChildrenTreeNodeSvc",this.childrenGetter=null}get treeData(){return this.gos.get("treeData")}extractRowData(){const e=this.treeRoot;return e&&Array.from(e.enumChildren(),(e=>e.row.data))}destroy(){super.destroy(),this.childrenGetter=null}activate(e){const t=this.childrenGetter,i=this.gos.get("treeDataChildrenField");t&&t.path===i||(this.childrenGetter=(e=>{const t=(e=>{if("string"!==typeof e||!e.length)return[];const t=e.split(".");return t.includes("__proto__")?[]:t})(e);let i=null;const n=t.length-1;return i=0===n?t=>null===t||void 0===t?void 0:t[e]:n>0?e=>{let i=e;for(let o=0;o<=n&&null!==i&&void 0!==i;++o)if(i=i[t[o]],o<n&&"object"!==typeof i&&void 0!==i)return null;return i}:()=>{},i.path=e,i})(i)),super.activate(e)}loadNewRowData(e){const t=this.treeRoot,i=this.rootNode,n=this.childrenGetter,o=new Map,s=[];i.allLeafChildren=s,this.treeClear(t),t.setRow(i);const r=(e,t)=>{let i=o.get(t);if(void 0!==i)return void gt(2,{nodeId:i.id});i=this.createRowNode(t,s.length),o.set(t,i),s.push(i),e=e.upsertKey(i.id),this.treeSetRow(e,i,!0);const a=null===n||void 0===n?void 0:n(t);if(a)for(let n=0,o=a.length;n<o;++n)r(e,a[n])};for(let a=0,l=e.length;a<l;++a)r(t,e[a]);this.treeCommit()}setImmutableRowData(e,t){const i=this.gos,n=this.treeRoot,o=this.rootNode,s=this.childrenGetter,r=jt(i),a=!i.get("suppressMaintainUnsortedOrder"),l=new Map,d=new Lc(!1,o);e.changedPath=d;const c=e.changedRowNodes,h=o.allLeafChildren,u=[],p=[];let g=!1,m=!1;const v=a?(e,t)=>{const i=null===t||void 0===t?void 0:t.length;let n=!0,o=-1;for(let s=0;s<i;++s){const i=f(e,t[s]);i>=0&&(i<o&&(n=!1),o=i)}n||(g=!0,e.childrenChanged||(e.childrenChanged=!0,e.invalidate()))}:(e,t)=>{for(let i=0,n=t.length;i<n;++i)f(e,t[i])},f=(e,t)=>{let i=l.get(t);if(void 0!==i)return pt(2,{nodeId:i.id}),-1;const n=r({data:t,level:e.level+1});let o,d,h=!1;i=this.getRowNode(n),i?i.data!==t&&(c.update(i),i.updateData(t),!i.selectable&&i.isSelected()&&p.push(i)):(i=this.createRowNode(t,-1),c.add(i),h=!0),l.set(t,i),a?(d=e.appendKey(i.id),o=i.sourceRowIndex,i.sourceRowIndex=u.push(i)-1):(d=e.upsertKey(i.id),o=-1),this.treeSetRow(d,i,h)&&(m=!0);const g=null===s||void 0===s?void 0:s(t);return g&&v(d,g),o};if(v(n,t),h)for(let b=0,C=h.length;b<C;++b){const e=h[b],t=e.treeNode;if(t){const i=e.data;i&&!l.has(i)&&(c.remove(e),this.treeRemove(t,e))}}if(!a){const e=t=>{for(const i of t.enumChildren()){const t=i.row;t&&(t.sourceRowIndex=u.push(t)-1,e(i))}};e(n)}o.allLeafChildren=u,n.allLeafChildren=u,p.length&&this.deselectNodes(p),this.treeCommit(d);const y=o.sibling;y&&(y.allLeafChildren=u),(m||g)&&(e.step="group",e.rowDataUpdated=!0,e.rowNodesOrderChanged=g)}refreshModel(e){var t;const{rootNode:i,treeRoot:n}=this;if(n){if(null!==(t=e.changedProps)&&void 0!==t&&t.has("treeData")&&!e.newData){n.setRow(i);const e=null===i||void 0===i?void 0:i.allLeafChildren;if(e)for(let t=0,i=e.length;t<i;++t){var o;const i=e[t];i.groupData=null,null===(o=i.treeNode)||void 0===o||o.invalidate()}this.treeCommit()}super.refreshModel(e)}}}],rowModels:["clientSide"],dependsOn:[_ke,ODe,jDe]};var Hke=class extends Si{constructor(){super(...arguments),this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectAllUsed=!1,this.selectedNodes={}}wireBeans(e){this.rowModel=e.rowModel,this.selectionSvc=e.selectionSvc}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(e){if("object"!==typeof e)return void gt(115);if(!("selectAll"in e))return void gt(116);if("boolean"!==typeof e.selectAll)return void gt(117);if(!("toggledNodes"in e)||!Array.isArray(e.toggledNodes))return pt(197);const t={selectAll:e.selectAll,toggledNodes:new Set};e.toggledNodes.forEach((e=>{"string"===typeof e?t.toggledNodes.add(e):pt(196,{key:e})}));const i=t.selectAll||t.toggledNodes.size>1;Qt(this.gos)&&!si(this.gos)&&i?pt(198):this.selectedState=t}deleteSelectionStateFromParent(e,t){if(0===this.selectedState.toggledNodes.size)return!1;let i=!1;return t.forEach((e=>{this.selectedState.toggledNodes.delete(e)&&(i=!0)})),i}setNodesSelected(e){var t=this;const{nodes:i,clearSelection:n,newValue:o}=e;if(0===i.length)return 0;const s=n&&o;if(!si(this.gos)||s){if(i.length>1)return gt(241),0;const e=i[0],t=e.footer?e.sibling:e;return o&&t.selectable?(this.selectedNodes={[t.id]:t},this.selectedState={selectAll:!1,toggledNodes:new Set([t.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),1}return i.forEach((e=>function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;const n=e.footer?e.sibling:e;i&&n.selectable?t.selectedNodes[n.id]=n:delete t.selectedNodes[n.id],i!==t.selectedState.selectAll&&n.selectable?t.selectedState.toggledNodes.add(n.id):t.selectedState.toggledNodes.delete(n.id)}(e))),1}processNewRow(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)}isNodeSelected(e){const t=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!t:t}getSelectedNodes(){return this.selectAllUsed&&pt(199),Object.values(this.selectedNodes)}getSelectedRows(){return this.getSelectedNodes().map((e=>e.data))}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}isEmpty(){var e;return!this.selectedState.selectAll&&!(null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)}selectAllRowNodes(){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0}deselectAllRowNodes(){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}}getSelectAllState(){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null}},Wke=class extends Si{constructor(){super(...arguments),this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}wireBeans(e){this.rowModel=e.rowModel,this.rowGroupColsSvc=e.rowGroupColsSvc,this.filterManager=e.filterManager,this.selectionSvc=e.selectionSvc}postConstruct(){this.addManagedEventListeners({modelUpdated:()=>this.removeRedundantState(),columnRowGroupChanged:()=>this.selectionSvc.reset("rowGroupChanged")})}getSelectedState(){const e=this.gos.get("treeData"),t=(i,n,o)=>{var s;const r={nodeId:o};if((e||this.rowGroupColsSvc&&n<=(null===(s=this.rowGroupColsSvc)||void 0===s?void 0:s.columns.length))&&(r.selectAllChildren=i.selectAllChildren),i.toggledNodes.size){const e=[];i.toggledNodes.forEach(((i,o)=>{const s=t(i,n+1,o);e.push(s)})),r.toggledNodes=e}return r};return t(this.selectedState,0)}setSelectedState(e){if("selectAll"in e)return void gt(111);const t=(e,i)=>{var n,o;if("object"!==typeof e)throw gt(243),new Error;if("selectAllChildren"in e&&"boolean"!==typeof e.selectAllChildren)throw gt(244),new Error;if("toggledNodes"in e){if(!Array.isArray(e.toggledNodes))throw gt(245),new Error;if(!e.toggledNodes.every((e=>"object"===typeof e&&"nodeId"in e&&"string"===typeof e.nodeId)))throw gt(246),new Error}const s=null!==(n=e.selectAllChildren)&&void 0!==n?n:!i,r=null===(o=e.toggledNodes)||void 0===o?void 0:o.map((e=>[e.nodeId,t(e,s)]));if(null===r||void 0===r?void 0:r.some((e=>{let[,t]=e;return s===t.selectAllChildren&&0===t.toggledNodes.size})))throw gt(247),new Error;return{selectAllChildren:s,toggledNodes:new Map(r)}};try{this.selectedState=t(e,!!e.selectAllChildren)}catch(i){}}deleteSelectionStateFromParent(e,t){let i=this.selectedState;const n=[...e];for(;i&&n.length;)i=i.toggledNodes.get(n.pop());if(!i)return!1;let o=!1;return t.forEach((e=>{var t;null!==(t=i)&&void 0!==t&&t.toggledNodes.delete(e)&&(o=!0)})),o&&this.removeRedundantState(),o}setNodesSelected(e){let{nodes:t,newValue:i,clearSelection:n}=e;if(0===t.length)return 0;const o=n&&i;if(!si(this.gos)||o){if(t.length>1)return gt(241),0;this.deselectAllRowNodes()}return t.forEach((e=>{const t=e.footer?e.sibling:e,n=this.getRouteToNode(t);this.recursivelySelectNode(n,this.selectedState,i)})),this.removeRedundantState(),1}isNodeSelected(e){const t=this.getRouteToNode(e);return this.isNodePathSelected(t,this.selectedState)}isNodePathSelected(e,t){let[i,...n]=e;if(0===n.length){const e=t.toggledNodes.has(i.id);if(i.hasChildren()){const e=t.toggledNodes.get(i.id);if(e&&e.toggledNodes.size)return}return t.selectAllChildren?!e:e}if(t.toggledNodes.has(i.id)){const e=t.toggledNodes.get(i.id);if(e)return this.isNodePathSelected(n,e)}return t.selectAllChildren}getRouteToNode(e){const t=[];let i=e;for(;i.parent;)t.push(i),i=i.parent;return t.reverse()}removeRedundantState(){var e,t=this;if(null!==(e=this.filterManager)&&void 0!==e&&e.isAnyFilterPresent())return;const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.selectedState,n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(e.toggledNodes.forEach(((t,n)=>{i(t,n,e)})),n){const i=t.rowModel.getRowNode(n),o=null===i||void 0===i?void 0:i.childStore;if(null===o||void 0===o?void 0:o.isLastRowIndexKnown()){if(e.toggledNodes.size>=o.getRowCount()){for(const i of e.toggledNodes.entries()){const[e,n]=i;if(n.toggledNodes.size>0)return;if(!t.rowModel.getRowNode(e))return}e.selectAllChildren=!e.selectAllChildren,e.toggledNodes.clear()}}}const s=0===e.toggledNodes.size,r=(null===o||void 0===o?void 0:o.selectAllChildren)===e.selectAllChildren;s&&r&&(null===o||void 0===o||o.toggledNodes.delete(n))};i()}recursivelySelectNode(e,t,i){var n;let[o,...s]=e;if(!o)return;if(!s.length){const e=o.selectable;if(t.selectAllChildren===i||!e)return void t.toggledNodes.delete(o.id);const n={selectAllChildren:i,toggledNodes:new Map};return void t.toggledNodes.set(o.id,n)}const r=t.toggledNodes.has(o.id),a=null!==(n=t.toggledNodes.get(o.id))&&void 0!==n?n:{selectAllChildren:t.selectAllChildren,toggledNodes:new Map};r||t.toggledNodes.set(o.id,a),this.recursivelySelectNode(s,a,i),t.selectAllChildren===a.selectAllChildren&&0===a.toggledNodes.size&&t.toggledNodes.delete(o.id)}getSelectedNodes(){pt(202);const e=[];return this.rowModel.forEachNode((t=>{t.isSelected()&&e.push(t)})),e}processNewRow(){}getSelectedRows(){return this.getSelectedNodes().map((e=>e.data))}getSelectionCount(){return-1}isEmpty(){var e;return!this.selectedState.selectAllChildren&&!(null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)}selectAllRowNodes(){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}}deselectAllRowNodes(){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}getSelectAllState(){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null}};function jke(e){let{selectAll:t}=e;"filtered"!==t&&"currentPage"!==t||pt(195,{justCurrentPage:"currentPage"===t})}var Uke=class{constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.indexes=t,this.maps=new Map(this.indexes.map((e=>[e,new Map])))}getSize(){return this.maps.get(this.indexes[0]).size}getBy(e,t){return this.maps.get(e).get(t)}set(e){this.indexes.forEach((t=>{this.maps.get(t).set(e[t],e)}))}delete(e){this.indexes.forEach((t=>{this.maps.get(t).delete(e[t])}))}clear(){this.maps.forEach((e=>e.clear()))}getIterator(e){return this.maps.get(e).values()}forEach(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)e(i.value)}find(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)if(e(i.value))return i.value}filter(e){const t=this.getIterator(this.indexes[0]);let i;const n=[];for(;(i=t.next())&&!i.done;)e(i.value)&&n.push(i.value);return n}},Kke=class extends Si{constructor(e,t,i,n){super(),this.live=!0,this.removedNodeCache=new Map,this.store=e,this.numberOfRows=t,this.isLastRowKnown=i,this.storeParams=n}wireBeans(e){this.rowRenderer=e.rowRenderer,this.blockUtils=e.ssrmBlockUtils,this.focusSvc=e.focusSvc,this.nodeManager=e.ssrmNodeManager,this.serverSideRowModel=e.rowModel,this.rowNodeSorter=e.rowNodeSorter,this.sortSvc=e.sortSvc,this.lazyBlockLoadingSvc=e.lazyBlockLoadingSvc,this.colModel=e.colModel}postConstruct(){this.lazyBlockLoadingSvc.subscribe(this),this.nodeMap=new Uke("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.getRowIdFunc=jt(this.gos),this.isMasterDetail=this.gos.get("masterDetail")}destroy(){this.lazyBlockLoadingSvc.unsubscribe(this),this.numberOfRows=0,this.nodeMap.forEach((e=>this.blockUtils.destroyRowNode(e.node))),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1,super.destroy()}getRowByDisplayIndex(e){var t;if(!this.store.isDisplayIndexInStore(e))return;const i=this.nodeDisplayIndexMap.get(e);if(i)return(i.stub||i.__needsRefreshWhenVisible)&&this.lazyBlockLoadingSvc.queueLoadCheck(),i;if(this.gos.get("groupHideOpenParents")||this.gos.get("groupAllowUnbalanced")){const t=this.nodeMap.find((t=>{var i;return!(null===(i=t.node.childStore)||void 0===i||!i.isDisplayIndexInStore(e))}));var n;if(t)return null===(n=t.node.childStore)||void 0===n?void 0:n.getRowUsingDisplayIndex(e)}if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);const o=this.nodeDisplayIndexMap.get(e-1);if(o){var s,r;if(this.isMasterDetail&&o.master&&o.expanded)return o.detailNode;if(o.expanded&&null!==(s=o.childStore)&&void 0!==s&&s.isDisplayIndexInStore(e))return null===(r=o.childStore)||void 0===r?void 0:r.getRowUsingDisplayIndex(e);const t=this.nodeMap.getBy("node",o);return this.createStubNode(t.index+1,e)}const a=this.getSurroundingNodesByDisplayIndex(e);if(null==a){const t=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(t,e)}const{previousNode:l,nextNode:d}=a;var c;if(l&&l.node.expanded&&null!==(t=l.node.childStore)&&void 0!==t&&t.isDisplayIndexInStore(e))return null===(c=l.node.childStore)||void 0===c?void 0:c.getRowUsingDisplayIndex(e);if(d){const t=d.node.rowIndex-e,i=d.index-t;return this.createStubNode(i,e)}const h=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(h,e)}createStubNode(e,t){const i=this.store.getRowBounds(t),n=this.createRowAtIndex(e,null,(e=>{e.setRowIndex(t),e.setRowTop(i.rowTop),this.nodeDisplayIndexMap.set(t,e)}));if(0===e&&this.gos.get("groupHideOpenParents")){const e=this.store.getParentNode().groupData;if(e)for(const t of Object.keys(e))tMe(n,this.colModel,t,e[t])}return this.lazyBlockLoadingSvc.queueLoadCheck(),n}getRowByStoreIndex(e){var t;return null===(t=this.nodeMap.getBy("index",e))||void 0===t?void 0:t.node}skipDisplayIndexes(e,t,i){if(0===e)return;const n=Dt(this.beans);t.value+=e,i.value+=e*n}setDisplayIndexes(e,t,i){this.nodeDisplayIndexMap.clear();const n={};this.nodeMap.forEach((e=>{n[e.index]=e.node}));let o=-1;for(const r of Object.keys(n)){const s=n[r],a=Number(r),l=a-1-o;this.skipDisplayIndexes(l,e,t);const d=0===a;if(s.setFirstChild(d),d&&this.gos.get("groupHideOpenParents")){const e=this.store.getParentNode().groupData;if(e)for(const t of Object.keys(e))tMe(s,this.colModel,t,d?e[t]:void 0)}this.blockUtils.setDisplayIndex(s,e,t,i),null!=s.rowIndex&&this.nodeDisplayIndexMap.set(s.rowIndex,s),o=a}const s=this.numberOfRows-1-o;this.skipDisplayIndexes(s,e,t),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(e,t){this.numberOfRows=e,null!=t&&(this.isLastRowKnown=t,!1===t&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(e){var t;return null!==(t=this.nodeDisplayIndexMap.get(e))&&void 0!==t?t:null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(e){let t,i;return this.nodeMap.forEach((n=>{e>n.node.rowIndex?(null==i||i.node.rowIndex<n.node.rowIndex)&&(i=n):(null==t||t.node.rowIndex>n.node.rowIndex)&&(t=n)})),i||t?{previousNode:i,nextNode:t}:null}getDisplayIndexFromStoreIndex(e){var t,i;const n=this.nodeMap.getBy("index",e);if(n)return n.node.rowIndex;let o,s;if(this.nodeMap.forEach((t=>{e>t.index?(null==s||s.index<t.index)&&(s=t):(null==o||o.index>t.index)&&(o=t)})),!o)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!s)return this.store.getDisplayIndexStart()+e;const r=e-s.index;return(null!==(t=null===(i=s.node.childStore)||void 0===i?void 0:i.getDisplayIndexEnd())&&void 0!==t?t:s.node.rowIndex)+r}createRowAtIndex(e,t,i){const n=this.nodeMap.getBy("index",e);if(n){const{node:i}=n;if(i.__needsRefreshWhenVisible=!1,this.doesNodeMatch(t,i))return this.blockUtils.updateDataIntoRowNode(i,t),this.nodesToRefresh.delete(i),i;if(null==this.getRowIdFunc&&i.hasChildren()&&i.expanded)return this.nodesToRefresh.delete(i),i;this.destroyRowAtIndex(e)}if(t&&null!=this.getRowIdFunc){var o;const i=this.getRowId(t),n=i&&(null===(o=this.removedNodeCache)||void 0===o?void 0:o.get(i));var s;if(n)return null===(s=this.removedNodeCache)||void 0===s||s.delete(i),this.blockUtils.updateDataIntoRowNode(n,t),this.nodeMap.set({id:n.id,node:n,index:e}),this.nodesToRefresh.delete(n),n.__needsRefreshWhenVisible=!1,n;const r=this.nodeMap.getBy("id",i);if(r){this.nodeMap.delete(r);const{node:i,index:n}=r;return this.blockUtils.updateDataIntoRowNode(i,t),this.nodeMap.set({id:i.id,node:i,index:e}),this.nodesToRefresh.delete(i),i.__needsRefreshWhenVisible=!1,this.getBlockStartIndex(n)===this.getBlockStartIndex(e)?i:(this.markBlockForVerify(n),i)}}const r=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=t){const e=this.getPrefixedId(this.store.getIdSequence().value++);this.blockUtils.setDataIntoRowNode(r,t,e,void 0),this.serverSideRowModel.setPaused(!0),this.blockUtils.checkOpenByDefault(r),this.serverSideRowModel.setPaused(!1),this.nodeManager.addRowNode(r)}return this.nodeMap.set({id:r.id,node:r,index:e}),i&&i(r),r}getBlockStates(){const e={},t={};this.nodeMap.forEach((i=>{let{node:n,index:o}=i;const s=this.getBlockStartIndex(o);var r;n.stub||n.failedLoad||(e[s]=(null!==(r=e[s])&&void 0!==r?r:0)+1);let a="loaded";n.failedLoad?a="failed":this.lazyBlockLoadingSvc.isRowLoading(this,s)?a="loading":(this.nodesToRefresh.has(n)||n.stub)&&(a="needsLoading"),t[s]||(t[s]=new Set),t[s].add(a)}));const i={loading:4,failed:3,needsLoading:2,loaded:1},n=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),o={};return Object.entries(t).forEach((t=>{var s;let[r,a]=t;const l=[...a].sort(((e,t)=>{var n,o;return(null!==(n=i[e])&&void 0!==n?n:0)-(null!==(o=i[t])&&void 0!==o?o:0)}))[0],d=Number(r)/this.getBlockSize(),c=n?"".concat(n,"-").concat(d):String(d);o[c]={blockNumber:d,startRow:Number(r),endRow:Number(r)+this.getBlockSize(),pageStatus:l,loadedRowCount:null!==(s=e[r])&&void 0!==s?s:0}})),o}destroyRowAtIndex(e){const t=this.nodeMap.getBy("index",e);t&&(this.nodeMap.delete(t),this.nodeDisplayIndexMap.delete(t.node.rowIndex),this.nodesToRefresh.size>0?this.removedNodeCache.set(t.node.id,t.node):this.blockUtils.destroyRowNode(t.node),this.nodesToRefresh.delete(t.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()}markBlockForVerify(e){const[t,i]=this.getBlockBounds(e);this.nodeMap.filter((e=>e.index>=t&&e.index<i)).forEach((e=>{let{node:t}=e;t.__needsRefreshWhenVisible=!0}))}doesNodeMatch(e,t){if(t.stub)return!1;const i=this.getRowId(e);return null===i?t.data===e:t.id===i}purgeStubsOutsideOfViewport(){const{firstRenderedRow:e,lastRenderedRow:t}=this.rowRenderer,i=this.getBlockStartIndex(e),[,n]=this.getBlockBounds(t);this.nodeMap.forEach((e=>{this.lazyBlockLoadingSvc.isRowLoading(this,e.index)||e.node.failedLoad||e.node.stub&&(e.index<i||e.index>n)&&this.destroyRowAtIndex(e.index)}))}getBlocksDistanceFromRow(e,t){const i={};return e.forEach((e=>{let{node:n,index:o}=e;const[s,r]=this.getBlockBounds(o);if(s in i)return;const a=Math.abs(n.rowIndex-t);let l;const d=this.nodeMap.getBy("index",[r-1]);d&&(l=Math.abs(d.node.rowIndex-t));const c=null==l||a<l?a:l;i[s]=c})),Object.entries(i)}purgeExcessRows(){var e;if(this.purgeStubsOutsideOfViewport(),null==this.store.getDisplayIndexEnd()||null==this.storeParams.maxBlocksInCache)return;const{firstRenderedRow:t,lastRenderedRow:i}=this.rowRenderer,n=new Set,o=new Set;this.nodeMap.forEach((e=>{let{index:s,node:r}=e;const a=this.getBlockStartIndex(s);n.add(a);r.rowIndex>=t&&r.rowIndex<=i&&o.add(a)}));const s=Math.max(o.size,null!==(e=this.storeParams.maxBlocksInCache)&&void 0!==e?e:0),r=n.size-s;if(r<=0)return;let a=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;o.forEach((e=>{a>e&&(a=e),l<e&&(l=e)}));const d=this.nodeMap.filter((e=>{let{node:t,index:i}=e;const n=this.getBlockStartIndex(i);return!(n>=a&&n<=l)&&!this.isNodeCached(t)}));if(0===d.length)return;const c=t+(i-t)/2,h=this.getBlocksDistanceFromRow(d,c),u=this.getBlockSize();h.sort(((e,t)=>Math.sign(t[1]-e[1])));for(let p=0;p<Math.min(r,h.length);p++){const e=Number(h[p][0]);for(let t=e;t<e+u;t++){const e=this.nodeMap.getBy("index",t);e&&!this.isNodeCached(e.node)&&this.destroyRowAtIndex(t)}}}isNodeFocused(e){const t=this.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;return t.rowIndex===e.rowIndex}isNodeCached(e){const t=this.gos.get("groupAllowUnbalanced")&&""===e.key;return e.isExpandable()&&e.expanded||this.isNodeFocused(e)||t}extractDuplicateIds(e){if(null==this.getRowIdFunc)return[];const t=new Set,i=new Set;return e.forEach((e=>{const n=this.getRowId(e);t.has(n)?i.add(n):t.add(n)})),[...i]}onLoadSuccess(e,t,i){if(!this.live)return;const n=i.groupLevelInfo;if(this.store.setStoreInfo(n),null!=this.getRowIdFunc){const n=this.extractDuplicateIds(i.rowData);if(n.length>0){return pt(205,{duplicateIdText:n.join(", ")}),void this.onLoadFailed(e,t)}}i.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(i.pivotResultFields);const o=this.nodesToRefresh.size>0;if(i.rowData.forEach(((t,i)=>{var n;const o=e+i,s=this.nodeMap.getBy("index",o);if(null===s||void 0===s||null===(n=s.node)||void 0===n||!n.stub)return s&&this.doesNodeMatch(t,s.node)?(this.blockUtils.updateDataIntoRowNode(s.node,t),this.nodesToRefresh.delete(s.node),void(s.node.__needsRefreshWhenVisible=!1)):void this.createRowAtIndex(o,t);this.createRowAtIndex(o,t)})),void 0!=i.rowCount&&-1!==i.rowCount)this.numberOfRows=i.rowCount,this.isLastRowKnown=!0;else if(t>i.rowData.length)this.numberOfRows=e+i.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){const t=e+i.rowData.length+1;t>this.numberOfRows&&(this.numberOfRows=t)}if(this.isLastRowKnown){this.nodeMap.filter((e=>e.index>=this.numberOfRows)).forEach((e=>this.destroyRowAtIndex(e.index)))}this.fireStoreUpdatedEvent();const s=0===this.nodesToRefresh.size;o&&s&&this.fireRefreshFinishedEvent()}fireRefreshFinishedEvent(){0===this.nodesToRefresh.size&&(this.removedNodeCache.forEach((e=>{this.blockUtils.destroyRowNode(e)})),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())}isStoreFullyLoaded(){const e=this.isLastRowKnown,t=this.nodeMap.getSize()===this.numberOfRows;if(!e||!t)return;if(this.nodesToRefresh.size>0)return;let i=-1;return null==this.nodeMap.find((e=>(i+=1,e.index!==i||(!!e.node.__needsRefreshWhenVisible||!!e.node.stub))))}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(e,t){if(!this.live)return;const i=this.nodesToRefresh.size>0;for(let s=e;s<e+t&&s<this.getRowCount();s++){var n;let{node:e}=null!==(n=this.nodeMap.getBy("index",s))&&void 0!==n?n:{};e&&this.nodesToRefresh.delete(e),e&&e.stub||(e&&!e.stub&&this.destroyRowAtIndex(s),e=this.createRowAtIndex(s)),e.__needsRefreshWhenVisible=!1,e.failedLoad=!0}const o=0===this.nodesToRefresh.size;i&&o&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach((e=>{e.node.stub&&!e.node.failedLoad||this.nodesToRefresh.add(e.node)})),this.lazyBlockLoadingSvc.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(e){return!!this.nodeMap.getBy("id",e)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(e){var t;if(null==this.getRowIdFunc)return null;const{level:i}=this.store.getRowDetails(),n=null!==(t=this.store.getParentNode().getRoute())&&void 0!==t?t:[];return this.getRowIdFunc({data:e,parentKeys:n.length>0?n:void 0,level:i})}getOrderedNodeMap(){const e={};return this.nodeMap.forEach((t=>e[t.index]=t)),e}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}clientSideSortRows(){var e,t;const i=null!==(e=null===(t=this.sortSvc)||void 0===t?void 0:t.getSortOptions())&&void 0!==e?e:[];if(!i.some((e=>null!=e.sort))||!this.rowNodeSorter)return;const n=new Array(this.nodeMap.getSize());this.nodeMap.forEach((e=>n[e.index]=e.node)),this.nodeMap.clear();this.rowNodeSorter.doFullSort(n,i).forEach(((e,t)=>{this.nodeMap.set({id:e.id,node:e,index:t})}))}updateRowNodes(e){const t=[];return e.forEach((e=>{const i=this.getRowId(e),n=this.nodeMap.getBy("id",i);n&&(this.blockUtils.updateDataIntoRowNode(n.node,e),t.push(n.node))})),t}insertRowNodes(e,t){const i=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),n=null==t&&this.isLastRowKnown?i:t;if(null==n||i<n)return[];const o={};e.forEach((e=>{const t=this.getRowId(e);t&&this.isNodeInCache(t)||(o[t]=e)}));const s=Object.values(o),r=s.length;if(0===r)return[];const a=this.nodeMap.filter((e=>e.index>=n));return a.forEach((e=>this.nodeMap.delete(e))),a.forEach((e=>{this.nodeMap.set({node:e.node,index:e.index+r,id:e.id})})),this.numberOfRows+=r,s.map(((e,t)=>this.createRowAtIndex(n+t,e)))}removeRowNodes(e){const t=[],i=[];let n=0;const o=[...e],s=this.getOrderedNodeMap();let r=-1;for(const a of Object.keys(s)){r+=1;const e=s[a],l=o.findIndex((t=>t===e.id));if(-1!==l){o.splice(l,1),this.destroyRowAtIndex(Number(a)),t.push(e.node),n+=1;continue}if(0===n)continue;const d=Number(a);r!==d&&i.push(e.node),this.nodeMap.delete(e),this.nodeMap.set({id:e.id,node:e.node,index:d-n})}return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:n,o.length>0&&i.length>0&&(i.forEach((e=>e.__needsRefreshWhenVisible=!0)),this.lazyBlockLoadingSvc.queueLoadCheck()),t}getBlockSize(){return this.storeParams.cacheBlockSize||100}getBlockStartIndex(e){return e-e%this.getBlockSize()}getBlockBounds(e){const t=this.getBlockStartIndex(e);return[t,t+this.getBlockSize()]}},Yke=class extends Si{constructor(e,t,i){super(),this.idSequence={value:0},this.ssrmParams=e,this.parentRowNode=i,this.storeParams=t,this.level=i.level+1,this.group=!!e.rowGroupCols&&this.level<e.rowGroupCols.length,this.leafGroup=!!e.rowGroupCols&&this.level===e.rowGroupCols.length-1,this.info={}}wireBeans(e){this.blockUtils=e.ssrmBlockUtils,this.storeUtils=e.ssrmStoreUtils,this.selectionSvc=e.selectionSvc,this.rowGroupColsSvc=e.rowGroupColsSvc}postConstruct(){let e=1;var t;0===this.level&&(e=null!==(t=this.storeUtils.getServerSideInitialRowCount())&&void 0!==t?t:1,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}));this.cache=this.createManagedBean(new Kke(this,e,!1,this.storeParams));if(!this.gos.get("treeData")&&this.group&&this.rowGroupColsSvc){const e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.rowGroupColsSvc.columns[this.level]}}destroy(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache),super.destroy()}applyRowData(e,t,i){this.cache.onLoadSuccess(t,i,e)}applyTransaction(e){var t,i,n,o,s;const r=jt(this.gos);if(!r)return pt(206),{status:qr.Cancelled};const a=this.gos.getCallback("isApplyServerSideTransaction");if(a){if(!a({transaction:e,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:qr.Cancelled}}const l=this.cache.isStoreFullyLoaded();let d,c,h;if(null!==(t=e.update)&&void 0!==t&&t.length&&(d=this.cache.updateRowNodes(e.update)),null!==(i=e.add)&&void 0!==i&&i.length){let t=e.addIndex;null!=t&&t<0&&(t=void 0),c=this.cache.insertRowNodes(e.add,t)}if(null!==(n=e.remove)&&void 0!==n&&n.length){const t=e.remove.map((e=>{var t;return r({level:this.level,parentKeys:null!==(t=this.parentRowNode.getRoute())&&void 0!==t?t:[],data:e})})),i=[...new Set(t)];h=this.cache.removeRowNodes(i)}const u=this.gos.get("serverSideEnableClientSideSort"),p=(null===(o=d)||void 0===o?void 0:o.length)||(null===(s=c)||void 0===s?void 0:s.length);return l&&u&&p&&this.cache.clientSideSortRows(),this.updateSelectionAfterTransaction(d,h),{status:qr.Applied,update:d,add:c,remove:h}}updateSelectionAfterTransaction(e,t){if(!this.selectionSvc)return;const i=[];null===e||void 0===e||e.forEach((e=>{e.isSelected()&&!e.selectable&&i.push(e)})),null===t||void 0===t||t.forEach((e=>{e.isSelected()&&i.push(e)})),i.length&&this.selectionSvc.setNodesSelected({newValue:!1,clearSelection:!1,nodes:i,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach((e=>this.blockUtils.clearDisplayIndex(e.node))),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(e,t){this.cache.setRowCount(e,t)}isDisplayIndexInStore(e){return 0!==this.cache.getRowCount()&&(this.displayIndexStart<=e&&e<this.getDisplayIndexEnd())}setDisplayIndexes(e,t,i){this.displayIndexStart=e.value,this.topPx=t.value;const n=this.parentRowNode.level>-1&&Vt(this.gos)({node:this.parentRowNode});n||PDe(this.parentRowNode),"top"===n&&(LDe(this.parentRowNode,this.beans),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t,i)),this.cache.setDisplayIndexes(e,t,i),"bottom"===n&&(LDe(this.parentRowNode,this.beans),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t,i)),this.displayIndexEnd=e.value,this.heightPx=t.value-this.topPx}forEachStoreDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:0};e(this,t.value++),this.cache.getNodes().forEach((i=>{const n=i.node.childStore;n&&n.forEachStoreDeep(e,t)}))}forEachNodeDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:0};this.cache.getNodes().forEach((i=>{e(i.node,t.value++);const n=i.node.childStore;n&&n.forEachNodeDeep(e,t)}))}forEachNodeDeepAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:0},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.parentRowNode.level>-1&&Vt(this.gos)({node:this.parentRowNode});"top"===n&&e(this.parentRowNode.sibling,t.value++);const o=this.cache.getOrderedNodeMap();for(const s of Object.values(o)){e(s.node,t.value++);const n=s.node.childStore;n&&n.forEachNodeDeepAfterFilterAndSort(e,t,i)}"bottom"===n&&e(this.parentRowNode.sibling,t.value++)}retryLoads(){this.cache.getNodes().forEach((e=>{let{node:t}=e;t.failedLoad&&(t.failedLoad=!1,t.__needsRefreshWhenVisible=!0,t.stub=!0)})),this.forEachChildStoreShallow((e=>e.retryLoads())),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)}getRowBounds(e){var t;if(!this.isDisplayIndexInStore(e))return null;const i=this.cache.getNodeCachedByDisplayIndex(e);if(i){const t=this.blockUtils.extractRowBounds(i,e);if(t)return t}const{previousNode:n,nextNode:o}=null!==(t=this.cache.getSurroundingNodesByDisplayIndex(e))&&void 0!==t?t:{};if(n){const t=this.blockUtils.extractRowBounds(n.node,e);if(null!=t)return t}const s=Dt(this.beans);if(o){const t=(o.node.rowIndex-e)*s;return{rowTop:o.node.rowTop-t,rowHeight:s}}return{rowTop:this.topPx+this.heightPx-(this.getDisplayIndexEnd()-e)*s,rowHeight:s}}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;if(this.parentRowNode.sibling&&e>this.parentRowNode.sibling.rowTop&&e<this.parentRowNode.sibling.rowTop+this.parentRowNode.sibling.rowHeight)return this.parentRowNode.sibling.rowIndex;let t=Number.MAX_SAFE_INTEGER,i=null,n=Number.MAX_SAFE_INTEGER,o=null;if(this.cache.getNodes().forEach((s=>{let{node:r}=s;const a=Math.abs(e-r.rowTop);r.rowTop<e?a<t&&(t=a,i=r):a<n&&(n=a,o=r)})),i){const t=this.blockUtils.getIndexAtPixel(i,e);if(null!=t)return t}const s=Dt(this.beans);if(o){const t=o.rowTop,i=Math.ceil((t-e)/s);return o.rowIndex-i}const r=this.topPx+this.heightPx,a=Math.floor((r-e)/s);return this.getDisplayIndexEnd()-a}getChildStore(e){return this.storeUtils.getChildStore(e,this,(e=>{const t=this.cache.getNodes().find((t=>t.node.key==e));return t?t.node:null}))}forEachChildStoreShallow(e){this.cache.getNodes().forEach((t=>{let{node:i}=t;i.childStore&&e(i.childStore)}))}refreshAfterSort(e){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){const e=this.cache.isStoreFullyLoaded(),t=this.gos.get("serverSideEnableClientSideSort");if(!(e&&t)){const e=this.cache.getRowCount(),t=this.cache.isLastRowIndexKnown();return this.destroyBean(this.cache),void(this.cache=this.createManagedBean(new Kke(this,e,t,this.storeParams)))}this.cache.clientSideSortRows()}this.forEachChildStoreShallow((t=>t.refreshAfterSort(e)))}refreshAfterFilter(e){!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)?this.refreshStore(!0):this.forEachChildStoreShallow((t=>t.refreshAfterFilter(e)))}refreshStore(e){if(e)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new Kke(this,1,!1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(e){const t=this.cache.getDisplayIndexFromStoreIndex(e);return null!==t&&void 0!==t?t:e}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(e,t){return this.cache.getNodes().filter((i=>{let{node:n}=i;return n.rowIndex>=e.rowIndex&&n.rowIndex<=t.rowIndex})).map((e=>{let{node:t}=e;return t}))}addStoreStates(e){var t;e.push({route:null!==(t=this.parentRowNode.getRoute())&&void 0!==t?t:[],rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow((t=>t.addStoreStates(e)))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(e){e&&Object.assign(this.info,e)}fireStoreUpdatedEvent(){this.eventSvc.dispatchEvent({type:"storeUpdated"})}fireRefreshFinishedEvent(){this.eventSvc.dispatchEvent({type:"storeRefreshed",route:this.parentRowNode.getRoute()})}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}getCache(){return this.cache}},Zke={moduleName:"ServerSideRowModel",version:Ewe,rowModels:["serverSide"],beans:[class extends Si{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=$e(this,this.onRowHeightChanged.bind(this),100),this.pauseStoreUpdateListening=!1,this.started=!1,this.managingPivotResultColumns=!1}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.pivotResultCols=e.pivotResultCols,this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.filterManager=e.filterManager,this.sortSvc=e.sortSvc,this.rowRenderer=e.rowRenderer,this.nodeManager=e.ssrmNodeManager,this.storeFactory=e.ssrmStoreFactory,this.pivotColDefSvc=e.pivotColDefSvc}ensureRowHeightsValid(){return!1}start(){this.started=!0,this.updateDatasource()}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}postConstruct(){const e=this.resetRootStore.bind(this);this.addManagedEventListeners({newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onStoreUpdated.bind(this),columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e,columnPivotModeChanged:e}),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","cacheBlockSize"],e),this.addManagedPropertyListener("groupAllowUnbalanced",(()=>this.onStoreUpdated())),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights())),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",(()=>this.updateDatasource()))}updateDatasource(){const e=this.gos.get("serverSideDatasource");e&&this.setDatasource(e)}verifyProps(){wt(this.gos)&&!this.gos.exists("getRowId")&&pt(188)}setDatasource(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())}applyRowData(e,t,i){const n=this.getRootStore();if(!n)return;const o=n.getChildStore(i);o&&o.applyRowData(e,t,e.rowData.length)}isLastRowIndexKnown(){const e=this.getRootStore();return!!e&&e.isLastRowIndexKnown()}onColumnEverything(){var e,t,i,n,o;if(!this.storeParams)return void this.resetRootStore();const s=this.columnsToValueObjects(null===(e=this.rowGroupColsSvc)||void 0===e?void 0:e.columns),r=this.columnsToValueObjects(null===(t=this.valueColsSvc)||void 0===t?void 0:t.columns),a=this.columnsToValueObjects(null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns),l=e=>{const t={};e.oldCols.forEach((e=>t[e.id]=e));const i=e.newCols.every((e=>{const i=t[e.id];return i&&delete t[e.id],i&&i.field===e.field&&i.aggFunc===e.aggFunc})),n=!e.allowRemovedColumns&&!!Object.values(t).length;return i&&!n},d=!He(this.storeParams.sortModel,null!==(n=null===(o=this.sortSvc)||void 0===o?void 0:o.getSortModel())&&void 0!==n?n:[]),c=!l({oldCols:this.storeParams.rowGroupCols,newCols:s}),h=!l({oldCols:this.storeParams.pivotCols,newCols:a}),u=!(null===s||void 0===s||!s.length)&&!l({oldCols:this.storeParams.valueCols,newCols:r,allowRemovedColumns:!0});if(d||c||h||u)this.resetRootStore();else{const e=this.createStoreParams();this.storeParams.rowGroupCols=e.rowGroupCols,this.storeParams.pivotCols=e.pivotCols,this.storeParams.valueCols=e.valueCols}}destroyRootStore(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(e,t){this.storeParams&&(this.storeParams.sortModel=e);const i=this.getRootStore();i&&(i.refreshAfterSort(t),this.onStoreUpdated())}generateSecondaryColumns(e){var t;if(!this.pivotColDefSvc)return void this.gos.assertModuleRegistered("SharedPivot",2);const i=this.pivotColDefSvc.createColDefsFromFields(e);this.managingPivotResultColumns=!0,null===(t=this.pivotResultCols)||void 0===t||t.setPivotResultCols(i,"rowModelUpdated")}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes(),t=Mt(this.beans,this.rootNode);if(this.rootNode.setRowHeight(t.height,t.estimated),this.rootNode.sibling){const e=Mt(this.beans,this.rootNode.sibling);this.rootNode.sibling.setRowHeight(e.height,e.estimated)}e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{const i=Mt(this.beans,t);t.setRowHeight(i.height,i.estimated);const n=t.detailNode;if(n){const e=Mt(this.beans,n);n.setRowHeight(e.height,e.estimated)}if(t.sibling){const e=Mt(this.beans,t.sibling);n.setRowHeight(e.height,e.estimated)}e=!0})),e}resetRootStore(){var e;(this.destroyRootStore(),this.rootNode=new fs(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns)&&(null===(e=this.pivotResultCols)||void 0===e||e.setPivotResultCols(null,"api"),this.managingPivotResultColumns=!1);this.dispatchModelUpdated(!0)}columnsToValueObjects(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>({id:e.getId(),aggFunc:e.getAggFunc(),displayName:this.colNames.getDisplayNameForColumn(e,"model"),field:e.getColDef().field})))}createStoreParams(){var e,t,i,n,o,s,r,a,l;const d=this.columnsToValueObjects(null===(e=this.rowGroupColsSvc)||void 0===e?void 0:e.columns),c=this.columnsToValueObjects(null===(t=this.valueColsSvc)||void 0===t?void 0:t.columns),h=this.columnsToValueObjects(null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns),u=St(this.gos);return{valueCols:c,rowGroupCols:d,pivotCols:h,pivotMode:this.colModel.isPivotMode(),filterModel:null!==(n=this.filterManager)&&void 0!==n&&n.isAdvFilterEnabled()?null===(o=this.filterManager)||void 0===o?void 0:o.getAdvFilterModel():null!==(s=null===(r=this.filterManager)||void 0===r?void 0:r.getFilterModel())&&void 0!==s?s:{},sortModel:null!==(a=null===(l=this.sortSvc)||void 0===l?void 0:l.getSortModel())&&void 0!==a?a:[],datasource:this.datasource,lastAccessedSequence:{value:0},dynamicRowHeight:u}}getParams(){return this.storeParams}dispatchModelUpdated(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventSvc.dispatchEvent({type:"modelUpdated",animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1})}onStoreUpdated(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){const e=this.getRootStore();e&&e.setDisplayIndexes({value:0},{value:0},0)}retryLoads(){const e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())}getRow(e){const t=this.getRootStore();if(t)return t.getRowUsingDisplayIndex(e)}setPaused(e){this.pauseStoreUpdateListening=e}expandAll(e){this.pauseStoreUpdateListening=!0,this.forEachNode((t=>{t.stub||t.hasChildren()&&t.setExpanded(e)})),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()}refreshAfterFilter(e,t){this.storeParams&&(this.storeParams.filterModel=e);const i=this.getRootStore();i&&(i.refreshAfterFilter(t),this.onStoreUpdated())}getRootStore(){var e;return null===(e=this.rootNode)||void 0===e?void 0:e.childStore}getRowCount(){const e=this.getRootStore();return e?e.getDisplayIndexEnd():0}getTopLevelRowCount(){const e=this.getRootStore();return e?e.getRowCount():1}getTopLevelRowDisplayedIndex(e){const t=this.getRootStore();return t?t.getTopLevelRowDisplayedIndex(e):e}getRowBounds(e){const t=this.getRootStore();if(!t){return{rowTop:0,rowHeight:Dt(this.beans)}}return t.getRowBounds(e)}getBlockStates(){const e=this.getRootStore();if(!e)return;const t={};return e.forEachStoreDeep((e=>{Object.entries(e.getBlockStates()).forEach((e=>{let[i,n]=e;t[i]=n}))})),t}getRowIndexAtPixel(e){const t=this.getRootStore();return e<=0||!t?0:t.getRowIndexAtPixel(e)}isEmpty(){return!1}isRowsToRender(){return null!=this.getRootStore()&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(e){const t=this.getRootStore();t&&t.forEachNodeDeep(e)}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRootStore();i&&i.forEachNodeDeepAfterFilterAndSort(e,void 0,t)}executeOnStore(e,t){if(!this.started)return!1;const i=this.getRootStore();if(!i)return!0;const n=i.getChildStore(e);return n&&t(n),!0}refreshStore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.route?e.route:[];this.executeOnStore(t,(t=>t.refreshStore(1==e.purge)))}getStoreState(){const e=[],t=this.getRootStore();return t&&t.addStoreStates(e),e}getNodesInRangeForSelection(e,t){const i=e.rowIndex,n=t.rowIndex;if(null===i&&null===n)return[];if(null===n)return e?[e]:[];if(null===i)return[t];const o=[],[s,r]=[i,n].sort(((e,t)=>e-t));return this.forEachNode((e=>{const t=e.rowIndex;null==t||e.stub||t>=s&&t<=r&&o.push(e)})),o.length!==r-s+1?null:o}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i),i.detailNode&&i.detailNode.id===e&&(t=i.detailNode)})),t}isRowPresent(e){return!!this.getRowNode(e.id)}setRowCount(e,t){const i=this.getRootStore();i&&i.setRowCount(e,t)}destroy(){this.destroyDatasource(),this.destroyRootStore(),super.destroy()}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmExpandListener"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}postConstruct(){Ct(this.gos)&&this.addManagedEventListeners({rowGroupOpened:this.onRowGroupOpened.bind(this)})}onRowGroupOpened(e){const t=e.node;if(t.expanded){if(t.master)this.createDetailNode(t);else if(_e(t.childStore)){const e=this.serverSideRowModel.getParams();t.childStore=this.createBean(this.storeFactory.createStore(e,t))}}else this.gos.get("purgeClosedRowNodes")&&ze(t.childStore)&&(t.childStore=this.destroyBean(t.childStore));this.eventSvc.dispatchEvent({type:"storeUpdated"})}createDetailNode(e){if(ze(e.detailNode))return e.detailNode;const t=new fs(this.beans);t.detail=!0,t.selectable=!1,t.parent=e,ze(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1;const i=Mt(this.beans,t).height;return t.rowHeight=i||200,e.detailNode=t,t}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmStoreUtils"}wireBeans(e){this.colModel=e.colModel,this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}getChildStore(e,t,i){if(null===e||void 0===e||!e.length)return t;const n=i(e[0]);if(n){if(1===e.length&&!n.childStore){const e=this.serverSideRowModel.getParams();n.childStore=this.createBean(this.storeFactory.createStore(e,n))}const t=e.slice(1,e.length),i=n.childStore;return i?i.getChildStore(t):null}return null}isServerRefreshNeeded(e,t,i){if(i.valueColChanged||i.secondaryColChanged)return!0;const n=e.level+1;if(!(n<t.length))return!0;const o=t[n].id;if(i.changedColumns.indexOf(o)>-1)return!0;return this.colModel.getCols().filter((e=>e.getColDef().showRowGroup&&i.changedColumns.includes(e.getId()))).map((e=>e.getColDef().showRowGroup)).some((e=>!0===e||e===o))}getServerSideInitialRowCount(){return this.gos.get("serverSideInitialRowCount")}isServerSideSortAllLevels(){return this.gos.get("serverSideSortAllLevels")&&Ct(this.gos)}isServerSideOnlyRefreshFilteredGroups(){return this.gos.get("serverSideOnlyRefreshFilteredGroups")&&Ct(this.gos)}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmBlockUtils"}wireBeans(e){this.valueSvc=e.valueSvc,this.showRowGroupCols=e.showRowGroupCols,this.nodeManager=e.ssrmNodeManager,this.expansionSvc=e.expansionSvc,this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}createRowNode(e){const t=new fs(this.beans),i=null!=e.rowHeight?e.rowHeight:Dt(this.beans);return t.setRowHeight(i),t.group=e.group,t.leafGroup=e.leafGroup,t.level=e.level,t.uiLevel=e.level,t.parent=e.parent,t.stub=!0,t.__needsRefreshWhenVisible=!1,t.group&&(t.expanded=!1,t.field=e.field,t.rowGroupColumn=e.rowGroupColumn),t}destroyRowNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.childStore&&!t&&(this.destroyBean(e.childStore),e.childStore=null),e.sibling&&!e.footer&&this.destroyRowNode(e.sibling,!1),e.clearRowTopAndRowIndex(),null!=e.id&&this.nodeManager.removeNode(e)}setTreeGroupInfo(e){e.updateHasChildren();const t=this.gos.get("getServerSideGroupKey"),i=e.hasChildren();i&&null!=t&&(e.key=t(e.data)),i||null==e.childStore||(this.destroyBean(e.childStore),e.childStore=null,e.expanded=!1)}setRowGroupInfo(e){e.key=this.valueSvc.getValue(e.rowGroupColumn,e),null!==e.key&&void 0!==e.key||Ke((()=>{var t;pt(190,{rowGroupId:null===(t=e.rowGroupColumn)||void 0===t?void 0:t.getId(),data:e.data})}),"SSBlock-BadKey");if(this.gos.get("groupAllowUnbalanced")&&""===e.key){const t=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(t,e))}Vt(this.beans.gos)({node:e})&&(LDe(e,this.beans),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))}setMasterDetailInfo(e){const t=this.gos.get("isRowMaster");e.master=null==t||t(e.data)}updateDataIntoRowNode(e,t){if(e.updateData(t),this.gos.get("treeData"))this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e);else if(e.group){if(this.setChildCountIntoRowNode(e),!e.footer){Vt(this.beans.gos)({node:e})?e.sibling?e.sibling.updateData(t):LDe(e,this.beans):e.sibling&&PDe(e)}}else this.gos.get("masterDetail")}setDataIntoRowNode(e,t,i,n){e.stub=!1;const o=this.gos.get("treeData");var s;(e.setDataAndId(t,i),o?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.gos.get("masterDetail")&&this.setMasterDetailInfo(e),(o||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),ze(t))&&(e.setRowHeight(Mt(this.beans,e,!1,n).height),null===(s=e.sibling)||void 0===s||s.setRowHeight(Mt(this.beans,e.sibling,!1,n).height))}setChildCountIntoRowNode(e){const t=this.gos.get("getChildCount");t&&e.setAllChildrenCount(t(e.data))}setGroupDataIntoRowNode(e){var t,i;const n=null!==(t=null===(i=this.showRowGroupCols)||void 0===i?void 0:i.getShowRowGroupCols())&&void 0!==t?t:[],o=this.gos.get("treeData");n.forEach((t=>{if(null==e.groupData&&(e.groupData={}),o)e.groupData[t.getColId()]=e.key;else if(t.isRowGroupDisplayed(e.rowGroupColumn.getId())){const i=this.valueSvc.getValue(e.rowGroupColumn,e);e.groupData[t.getColId()]=i}}))}clearDisplayIndex(e){e.clearRowTopAndRowIndex();var t;e.hasChildren()&&!!e.childStore&&(null===(t=e.childStore)||void 0===t||t.clearDisplayIndexes());e.master&&e.detailNode&&e.detailNode.clearRowTopAndRowIndex()}setDisplayIndex(e,t,i,n){const o=this.gos.get("groupAllowUnbalanced")&&e.group&&""===e.key;if(this.gos.get("groupHideOpenParents")&&e.group&&e.expanded||o?(e.setRowIndex(null),e.setRowTop(null)):(e.setRowIndex(t.value++),e.setRowTop(i.value),i.value+=e.rowHeight),e.setUiLevel(n),e.footer)return;e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(t.value++),e.detailNode.setRowTop(i.value),i.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex());if(e.hasChildren()&&!!e.childStore){const s=e.childStore;e.expanded||o?s.setDisplayIndexes(t,i,o?n:n+1):s.clearDisplayIndexes()}}extractRowBounds(e,t){const i=e=>({rowHeight:e.rowHeight,rowTop:e.rowTop});if(e.rowIndex===t)return i(e);if(e.hasChildren()&&e.expanded&&e.childStore){const i=e.childStore;if(i.isDisplayIndexInStore(t))return i.getRowBounds(t)}else if(e.master&&e.expanded&&e.detailNode&&e.detailNode.rowIndex===t)return i(e.detailNode)}isPixelInNodeRange(e,t){return!(!ze(e.rowTop)||!ze(e.rowHeight))&&(t>=e.rowTop&&t<e.rowTop+e.rowHeight)}getIndexAtPixel(e,t){if(this.isPixelInNodeRange(e,t))return e.rowIndex;const i=e.master&&e.expanded,n=e.detailNode;if(i&&n&&this.isPixelInNodeRange(n,t))return e.detailNode.rowIndex;if(e.hasChildren()&&e.expanded&&e.childStore){const i=e.childStore;if(i.isPixelInRange(t))return i.getRowIndexAtPixel(t)}return null}createNodeIdPrefix(e){const t=[];let i=e;for(;i&&i.level>=0;)""===i.key?t.push("ag-Grid-MissingKey"):t.push(i.key),i=i.parent;if(t.length>0)return t.reverse().join("-")}checkOpenByDefault(e){var t;return null===(t=this.expansionSvc)||void 0===t?void 0:t.checkOpenByDefault(e)}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmNodeManager",this.rowNodes={}}addRowNode(e){const t=e.id;this.rowNodes[t]&&pt(187,{rowId:t,firstData:this.rowNodes[t].data,secondData:e.data}),this.rowNodes[t]=e}removeNode(e){const t=e.id;this.rowNodes[t]&&(this.rowNodes[t]=void 0)}destroy(){this.clear(),super.destroy()}clear(){this.rowNodes={},super.destroy()}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmTxnManager",this.asyncTransactions=[]}wireBeans(e){this.valueCache=e.valueCache,this.serverSideRowModel=e.rowModel,this.selectionSvc=e.selectionSvc}postConstruct(){Ct(this.gos)}applyTransactionAsync(e,t){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:t})}scheduleExecuteAsync(){const e=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimeout=window.setTimeout((()=>{this.executeAsyncTransactions()}),e)}executeAsyncTransactions(){if(!this.asyncTransactions)return;const e=[],t=[],i=[];let n=!1;var o;(this.asyncTransactions.forEach((o=>{let s;this.serverSideRowModel.executeOnStore(o.transaction.route,(e=>{s=e.applyTransaction(o.transaction)}))?void 0==s&&(s={status:qr.StoreNotFound}):s={status:qr.StoreNotStarted},t.push(s);s.status==qr.StoreLoading?i.push(o):(o.callback&&e.push((()=>o.callback(s))),s.status===qr.Applied&&(n=!0))})),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,n)&&(null===(o=this.valueCache)||void 0===o||o.onDataChanged(),this.eventSvc.dispatchEvent({type:"storeUpdated"}));t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t})}flushAsyncTransactions(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(e){let t;if(this.serverSideRowModel.executeOnStore(e.route,(i=>{t=i.applyTransaction(e)}))){if(t){var i;if(null===(i=this.valueCache)||void 0===i||i.onDataChanged(),t.remove&&this.selectionSvc){const i=t.remove.map((e=>e.id));this.selectionSvc.deleteSelectionStateFromParent(e.route||[],i)}return this.eventSvc.dispatchEvent({type:"storeUpdated"}),t}return{status:qr.StoreNotFound}}return{status:qr.StoreNotStarted}}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmFilterListener"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.filterManager=e.filterManager,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){Ct(this.gos)&&this.addManagedEventListeners({advancedFilterEnabledChanged:()=>this.onFilterChanged(!0),filterChanged:()=>this.onFilterChanged()})}onFilterChanged(e){var t;const i=this.serverSideRowModel.getParams();if(!i)return;const n=i.filterModel;let o,s;if(null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterEnabled()){o=this.filterManager.getAdvFilterModel();const t=e?Object.keys(null!==n&&void 0!==n?n:{}):this.getAdvancedFilterColumns(n),i=this.getAdvancedFilterColumns(o);t.forEach((e=>i.add(e))),s=Array.from(i)}else{var r,a;if(o=null!==(r=null===(a=this.filterManager)||void 0===a?void 0:a.getFilterModel())&&void 0!==r?r:{},e){const e=this.getAdvancedFilterColumns(n);Object.keys(o).forEach((t=>e.add(t))),s=Array.from(e)}else s=this.findChangedColumns(n,o)}const l={valueColChanged:this.listenerUtils.isSortingWithValueColumn(s),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(s),changedColumns:s};this.serverSideRowModel.refreshAfterFilter(o,l)}findChangedColumns(e,t){const i={};Object.keys(e).forEach((e=>i[e]=!0)),Object.keys(t).forEach((e=>i[e]=!0));const n=[];return Object.keys(i).forEach((i=>{JSON.stringify(e[i])!=JSON.stringify(t[i])&&n.push(i)})),n}getAdvancedFilterColumns(e){const t=new Set;if(!e)return t;const i=e=>{"join"===e.filterType?e.conditions.forEach((e=>i(e))):t.add(e.colId)};return i(e),t}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmStoreFactory"}wireBeans(e){this.colModel=e.colModel,this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.rowAutoHeight=e.rowAutoHeight}createStore(e,t){const i=this.getStoreParams(e,t);return new Yke(e,i,t)}getStoreParams(e,t){const i=this.getLevelSpecificParams(t);return{cacheBlockSize:this.getBlockSize(i),maxBlocksInCache:this.getMaxBlocksInCache(e,i)}}getMaxBlocksInCache(e,t){var i;const n=t&&null!=t.maxBlocksInCache?t.maxBlocksInCache:this.gos.get("maxBlocksInCache");if(null!=n&&n>=0)if(e.dynamicRowHeight)pt(203);else{if(null===(i=this.rowAutoHeight)||void 0===i||!i.active)return n;pt(204)}}getBlockSize(e){const t=e&&null!=e.cacheBlockSize?e.cacheBlockSize:this.gos.get("cacheBlockSize");return null!=t&&t>0?t:100}getLevelSpecificParams(e){var t,i,n,o;const s=this.gos.getCallback("getServerSideGroupLevelParams");if(!s)return;return s({level:e.level+1,parentRowNode:e.level>=0?e:void 0,rowGroupColumns:null!==(t=null===(i=this.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[],pivotColumns:null!==(n=null===(o=this.pivotColsSvc)||void 0===o?void 0:o.columns)&&void 0!==n?n:[],pivotMode:this.colModel.isPivotMode()})}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmListenerUtils"}wireBeans(e){this.pivotResultCols=e.pivotResultCols,this.valueColsSvc=e.valueColsSvc}isSortingWithValueColumn(e){var t,i;const n=(null!==(t=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]).map((e=>e.getColId()));for(let o=0;o<e.length;o++)if(n.indexOf(e[o])>-1)return!0;return!1}isSortingWithSecondaryColumn(e){var t;const i=null===(t=this.pivotResultCols)||void 0===t?void 0:t.getPivotResultCols();if(!i)return!1;const n=i.list.map((e=>e.getColId()));for(let o=0;o<e.length;o++)if(n.indexOf(e[o])>-1)return!0;return!1}},class extends ea{constructor(){super(...arguments),this.beanName="selectionSvc"}postConstruct(){super.postConstruct(),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],(()=>{const e=li(this.gos),t=e&&this.selectionStrategy instanceof Hke?Wke:!e&&this.selectionStrategy instanceof Wke?Hke:void 0;t&&(this.destroyBean(this.selectionStrategy),this.selectionStrategy=this.createManagedBean(new t),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api"))})),this.addManagedPropertyListeners(["rowSelection"],(()=>{const e=oi(this.gos);e!==this.selectionMode&&(this.selectionMode=e,this.deselectAllRowNodes({source:"api"}))})),this.selectionMode=oi(this.gos);const e=li(this.gos)?Wke:Hke;this.selectionStrategy=this.createManagedBean(new e)}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;let n=0;const o=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);return null==o?0:("select"in o?(o.reset?this.selectionStrategy.deselectAllRowNodes({source:"api"}):this.selectionStrategy.setNodesSelected({nodes:o.deselect,newValue:!1,source:i}),n=this.selectionStrategy.setNodesSelected({nodes:o.select,newValue:!0,source:i})):n=this.selectionStrategy.setNodesSelected({nodes:[o.node],newValue:o.newValue,clearSelection:o.clearSelection,event:e,source:i}),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged(i),n)}getSelectionState(){return this.selectionStrategy.getSelectedState()}setSelectionState(e,t){wt(this.gos)?Array.isArray(e)||(this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged(t)):pt(132)}setNodesSelected(e){if(!wt(this.gos)&&e.newValue)return pt(132),0;const{nodes:t}=e,i=n(e,wbe);if(t.length>1&&"multiRow"!==this.selectionMode)return pt(130),0;const o=l({nodes:t.filter((e=>e.selectable))},i);if(!o.nodes.length)return 0;const s=this.selectionStrategy.setNodesSelected(o);return this.shotgunResetNodeSelectionState(o.source),this.dispatchSelectionChanged(o.source),s}deleteSelectionStateFromParent(e,t){this.selectionStrategy.deleteSelectionStateFromParent(e,t)&&(this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api"))}shotgunResetNodeSelectionState(e){this.beans.rowModel.forEachNode((t=>{if(t.stub)return;const i=this.selectionStrategy.isNodeSelected(t);i!==t.isSelected()&&this.selectRowNode(t,i,void 0,e)}))}getSelectedNodes(){return this.selectionStrategy.getSelectedNodes()}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(e){this.selectionStrategy.processNewRow(e);const t=this.selectionStrategy.isNodeSelected(e);if(0!=t&&!e.selectable)return this.selectionStrategy.setNodesSelected({nodes:[e],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState(),void this.dispatchSelectionChanged("api");e.__selected=t}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"}),this.selectionCtx.reset()}isEmpty(){return this.selectionStrategy.isEmpty()}hasNodesToSelect(){return!0}selectAllRowNodes(e){if(wt(this.gos)){if(jke(e),Qt(this.gos)&&!si(this.gos))return pt(130);this.selectionStrategy.selectAllRowNodes(e),this.selectionCtx.reset(),this.beans.rowModel.forEachNode((t=>{t.stub||this.selectRowNode(t,!0,void 0,e.source)})),this.dispatchSelectionChanged(e.source)}else pt(132)}deselectAllRowNodes(e){jke(e),this.selectionStrategy.deselectAllRowNodes(e),this.selectionCtx.reset(),this.beans.rowModel.forEachNode((t=>{t.stub||this.selectRowNode(t,!1,void 0,e.source)})),this.dispatchSelectionChanged(e.source)}getSelectAllState(e){return this.selectionStrategy.getSelectAllState(e)}getBestCostNodeSelection(){return pt(194,{method:"getBestCostNodeSelection"})}updateSelectable(){if(!wt(this.gos))return;const e=[];this.beans.rowModel.forEachNode((t=>{!this.updateRowSelectable(t,!0)&&t.isSelected()&&e.push(t)})),e.length&&this.setNodesSelected({nodes:e,newValue:!1,source:"selectableChanged"})}updateSelectableAfterGrouping(){return gt(194,{method:"updateSelectableAfterGrouping"})}},class extends Si{constructor(){super(...arguments),this.beanName="lazyBlockLoadingSvc",this.outboundRequests=0,this.cacheLoadingNodesMap=new Map,this.isCheckQueued=!1,this.nextBlockToLoad=void 0}wireBeans(e){this.rowRenderer=e.rowRenderer,this.rowModel=e.rowModel}postConstruct(){this.maxOutboundRequests=Ut(this.gos)}subscribe(e){this.cacheLoadingNodesMap.set(e,new Set)}unsubscribe(e){this.cacheLoadingNodesMap.delete(e)}queueLoadCheck(){this.isCheckQueued||(this.isCheckQueued=!0,window.queueMicrotask((()=>{this.queueLoadAction(),this.isCheckQueued=!1})))}onLoadComplete(){this.outboundRequests-=1,this.queueLoadCheck()}hasAvailableLoadBandwidth(){return void 0===this.maxOutboundRequests||this.outboundRequests<this.maxOutboundRequests}queueLoadAction(){const e=this.getBlockToLoad();if(!e)return;const t=this.nextBlockToLoad&&this.nextBlockToLoad.cache===e.cache&&this.nextBlockToLoad.index===e.index;if(!t&&(!this.nextBlockToLoad||!t)){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);const t=Number(this.nextBlockToLoad.index),i=this.nextBlockToLoad.cache,n=e.index+e.cache.getBlockSize();this.loaderTimeout=window.setTimeout((()=>{i.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(i,t,n),this.nextBlockToLoad=void 0)}),this.gos.get("blockLoadDebounceMillis"))}}attemptLoad(e,t,i){this.hasAvailableLoadBandwidth()&&(this.executeLoad(e,t,i),this.queueLoadCheck())}executeLoad(e,t,i){var n,o;const s=e.getSsrmParams(),r={startRow:t,endRow:i,rowGroupCols:s.rowGroupCols,valueCols:s.valueCols,pivotCols:s.pivotCols,pivotMode:s.pivotMode,groupKeys:null!==(n=e.store.getParentNode().getRoute())&&void 0!==n?n:[],filterModel:s.filterModel,sortModel:s.sortModel},a=this.cacheLoadingNodesMap.get(e),l=()=>{for(let e=0;e<i-t;e++)a.delete(t+e)},d=this.gos.addGridCommonParams({request:r,success:n=>{this.onLoadComplete(),e.onLoadSuccess(t,i-t,n),l()},fail:()=>{this.onLoadComplete(),e.onLoadFailed(t,i-t),l()},parentNode:e.store.getParentNode()});(()=>{for(let e=0;e<i-t;e++)a.add(t+e)})(),this.outboundRequests+=1,null===(o=e.getSsrmParams().datasource)||void 0===o||o.getRows(d)}getBlockToLoad(){var e;const t=this.rowRenderer.firstRenderedRow,i=this.rowRenderer.lastRenderedRow;for(let d=t;d<=i;d++){var n;const e=this.rowModel.getRow(d);if(!e)continue;const t=null===(n=e.parent)||void 0===n?void 0:n.childStore;if(!t)continue;const i=t.getCache(),o=i.getNodes().getBy("node",e);if(!o)continue;const s=this.cacheLoadingNodesMap.get(i);if((null===s||void 0===s||!s.has(o.index))&&(e.__needsRefreshWhenVisible||e.stub&&!e.failedLoad))return{cache:i,index:i.getBlockStartIndex(o.index)}}let o=null,s=null,r=Number.MAX_SAFE_INTEGER;for(const d of this.cacheLoadingNodesMap.keys()){d.getNodesToRefresh().forEach((e=>{if(null==e.rowIndex)return s=e,void(o=d);const n=d.getNodes().getBy("node",e);if(!n)return;const a=this.cacheLoadingNodesMap.get(d);if(null!==a&&void 0!==a&&a.has(n.index))return;const l=Math.abs(t-e.rowIndex),c=Math.abs(e.rowIndex-i);l<r&&(s=e,r=l,o=d),c<r&&(s=e,r=c,o=d)}))}if(!o)return;const a=o,l=null===(e=a.getNodes().getBy("node",s))||void 0===e?void 0:e.index;return null==l?void 0:{cache:a,index:a.getBlockStartIndex(l)}}isRowLoading(e,t){var i,n;return null!==(i=null===(n=this.cacheLoadingNodesMap.get(e))||void 0===n?void 0:n.has(t))&&void 0!==i&&i}},class extends Si{constructor(){super(...arguments),this.beanName="rowChildrenSvc"}getHasChildrenValue(e){const t=this.gos.get("treeData"),i=this.gos.get("isServerSideGroup");return!e.stub&&!e.footer&&(t?!!i&&i(e.data):!!e.group)}},class extends GDe{constructor(){super(...arguments),this.beanName="expansionSvc",this.queuedRowIds=new Set}wireBeans(e){this.serverSideRowModel=e.rowModel}postConstruct(){this.addManagedEventListeners({columnRowGroupChanged:()=>{this.queuedRowIds.clear()}})}checkOpenByDefault(e){if(!e.isExpandable())return;if(this.queuedRowIds.has(e.id))return this.queuedRowIds.delete(e.id),void e.setExpanded(!0);const t=this.gos.getCallback("isServerSideGroupOpenByDefault");if(!t)return;t({data:e.data,rowNode:e})&&e.setExpanded(!0)}expandRows(e){e.forEach((e=>{const t=this.serverSideRowModel.getRowNode(e);t?t.setExpanded(!0):this.queuedRowIds.add(e)}))}expandAll(e){this.serverSideRowModel.expandAll(e)}onGroupExpandedOrCollapsed(){}dispatchExpandedEvent(e){this.eventSvc.dispatchEvent(e)}},class extends Si{constructor(){super(...arguments),this.beanName="ssrmSortSvc"}wireBeans(e){this.sortSvc=e.sortSvc,this.serverSideRowModel=e.rowModel,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){Ct(this.gos)&&this.addManagedEventListeners({sortChanged:this.onSortChanged.bind(this)})}onSortChanged(){const e=this.serverSideRowModel.getParams();if(!e)return;const t=this.sortSvc.getSortModel(),i=e.sortModel,n=this.findChangedColumnsInSort(t,i),o={valueColChanged:this.listenerUtils.isSortingWithValueColumn(n),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(n),changedColumns:n};this.serverSideRowModel.refreshAfterSort(t,o)}findChangedColumnsInSort(e,t){let i=[];[e,t].forEach((e=>{if(e){const t=e.map((e=>e.colId));i=i.concat(t)}}));return i.filter((i=>{const n=t.find((e=>e.colId===i)),o=e.find((e=>e.colId===i));return((e,t)=>(e?e.sort:null)!==(t?t.sort:null))(n,o)||((i,n)=>(i?t.indexOf(i):-1)!==(n?e.indexOf(n):-1))(n,o)}))}}],dependsOn:[Rwe,Rc,Ou,kke,_ke,wke,Ske]},Xke={moduleName:"ServerSideRowModelApi",version:Ewe,rowModels:["serverSide"],apiFunctions:{getServerSideSelectionState:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectionState())&&void 0!==t?t:null},setServerSideSelectionState:function(e,t){var i;null===(i=e.selectionSvc)||void 0===i||i.setSelectionState(t,"api")},applyServerSideTransaction:function(e,t){var i;return null===(i=e.ssrmTxnManager)||void 0===i?void 0:i.applyTransaction(t)},applyServerSideTransactionAsync:function(e,t,i){var n;return null===(n=e.ssrmTxnManager)||void 0===n?void 0:n.applyTransactionAsync(t,i)},applyServerSideRowData:function(e,t){var i,n,o;const s=null!==(i=t.startRow)&&void 0!==i?i:0,r=null!==(n=t.route)&&void 0!==n?n:[];s<0?pt(189,{startRow:s}):null===(o=Uc(e))||void 0===o||o.applyRowData(t.successParams,s,r)},retryServerSideLoads:function(e){var t;null===(t=Uc(e))||void 0===t||t.retryLoads()},flushServerSideAsyncTransactions:function(e){var t;return null===(t=e.ssrmTxnManager)||void 0===t?void 0:t.flushAsyncTransactions()},refreshServerSide:function(e,t){var i;null===(i=Uc(e))||void 0===i||i.refreshStore(t)},getServerSideGroupLevelState:function(e){var t,i;return null!==(t=null===(i=Uc(e))||void 0===i?void 0:i.getStoreState())&&void 0!==t?t:[]}},dependsOn:[Rwe,Gu,zu]},qke=Symbol("WrappedFunctionMarker"),Qke=(e,t)=>{if(e[qke])return e;const i=function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t(e,...n)};return i[qke]=qke,i},Jke=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],$ke=class extends En{constructor(){super('<div class="ag-sparkline-wrapper">\n            <span data-ref="eSparkline"></span>\n        </div>'),this.eSparkline=Tn}postConstruct(){this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],(e=>this.refresh(this.params)))}init(e){this.refresh(e);const t=Be(this.beans,this.getGui(),(()=>this.refresh(e)));this.addDestroyFunc((()=>t()))}getThemeName(){return(this.gos.get("chartThemes")||Jke)[0]}refresh(e){this.params=e;const{clientWidth:t,clientHeight:i}=this.getGui();if(!this.sparklineInstance&&e&&t>0&&i){var n,o,s;this.sparklineOptions=l(l({container:this.eSparkline,width:t,height:i},e.sparklineOptions),{},{data:this.processData(e.value)}),null!==(n=this.sparklineOptions.tooltip)&&void 0!==n&&n.renderer?this.wrapTooltipRenderer():this.sparklineOptions.tooltip=l(l({},this.sparklineOptions.tooltip),{},{renderer:e=>({content:this.createDefaultContent(e)})});const r=null===(o=this.sparklineOptions)||void 0===o?void 0:o.theme;return"bar"===this.sparklineOptions.type&&this.sparklineOptions.itemStyler?this.wrapItemStyler(this.sparklineOptions):null!==r&&void 0!==r&&null!==(s=r.overrides)&&void 0!==s&&null!==(s=s.bar)&&void 0!==s&&null!==(s=s.series)&&void 0!==s&&s.itemStyler&&this.wrapItemStyler(r.overrides.bar.series),this.updateTheme(this.sparklineOptions),this.sparklineInstance=e.createSparkline(this.sparklineOptions),!0}if(this.sparklineInstance){const n=null===e||void 0===e?void 0:e.value;return this.sparklineOptions.width=t,this.sparklineOptions.height=i,this.sparklineOptions.data=this.processData(n),this.updateTheme(this.sparklineOptions),this.sparklineInstance.updateDelta(this.sparklineOptions),!0}return!1}updateTheme(e){const t=this.getThemeName();"string"!==typeof e.theme&&e.theme?e.theme&&(e.theme.baseTheme=t):e.theme=t}processData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length?e:e.filter((e=>null!=e))}createContext(){var e,t;return{data:null===(e=this.params)||void 0===e?void 0:e.data,cellData:null===(t=this.params)||void 0===t?void 0:t.value}}createDefaultContent(e,t){var i;const n=null===t||void 0===t?void 0:t.title,o=this.sparklineOptions.xKey,s=Array.isArray(null===(i=this.sparklineOptions.data)||void 0===i?void 0:i[0]);return"".concat(!n&&(o||s)?"".concat(e.xValue," "):"").concat(e.yValue)}wrapItemStyler(e){e.itemStyler=Qke(e.itemStyler,((e,t)=>e(l(l({},t),{},{context:this.createContext()}))))}wrapTooltipRenderer(){this.sparklineOptions.tooltip=l(l({},this.sparklineOptions.tooltip),{},{renderer:Qke(this.sparklineOptions.tooltip.renderer,((e,t)=>{const i=e(l(l({},t),{},{context:this.createContext()}));return"string"===typeof i?i:l({content:this.createDefaultContent(t,i)},i)}))})}destroy(){var e;super.destroy(),null===(e=this.sparklineInstance)||void 0===e||e.destroy()}},eIe="Sparklines",tIe=e=>(e.setup(),{moduleName:eIe,version:Ewe,dependsOn:[Rwe],css:[".ag-sparkline-wrapper{height:100%;left:0;position:absolute;top:0;width:100%}.ag-sparkline-wrapper :where(canvas){position:absolute}"],userComponents:{agSparklineCellRenderer:{classImp:$ke,params:{createSparkline:e.createSparkline}}},validate:()=>({isValid:!0})}),iIe=class extends Si{constructor(e){super(),this.beanName="agChartsExports",this.isEnterprise=!1,this.create=e.create,this._Theme=e._Theme,this._Scene=e._Scene,this.isEnterprise=e.isEnterprise,this._Util=e._Util}};function nIe(e){return null!=e.chart?e.chart:e}function oIe(e,t,i){if(null==e)return i;const n=t.split(".");let o=e;for(;n.length>1;)if(o=o[n.shift()],null==o)return i;const s=o[n[0]];return null!=s?s:i}var sIe={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",stackedLine:"line",normalizedLine:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},rIe=new Set(["columnLineCombo","areaColumnCombo","customCombo"]),aIe=["grouped","stacked","normalized"],lIe={area:{isCartesian:!0,canInvert:!0},bar:{isCartesian:!0,canInvert:!0},histogram:{isCartesian:!0},line:{isCartesian:!0,canInvert:!0},pie:{isPie:!0},donut:{isPie:!0,canInvert:!0},scatter:{isCartesian:!0},bubble:{isCartesian:!0},"radial-column":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radial-bar":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radar-line":{isPolar:!0,isEnterprise:!0,canInvert:!0},"radar-area":{isPolar:!0,isEnterprise:!0,canInvert:!0},nightingale:{isPolar:!0,isEnterprise:!0,canInvert:!0},"range-bar":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},"range-area":{isCartesian:!0,isEnterprise:!0},"box-plot":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},treemap:{isEnterprise:!0,isHierarchical:!0},sunburst:{isEnterprise:!0,isHierarchical:!0},heatmap:{isCartesian:!0,isEnterprise:!0},waterfall:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0}};function dIe(e){return rIe.has(e)}function cIe(e,t){var i;return!(null===(i=lIe[e])||void 0===i||!i[t])}var hIe=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function uIe(e){return hIe.has(e)}function pIe(e){return cIe(e,"isCartesian")}function gIe(e){return cIe(e,"isPolar")}function mIe(e){return cIe(e,"isHierarchical")}function vIe(e){return"doughnut"===e?"donut":e}function fIe(e){return sIe[e]}function yIe(e){var t;return null!==(t=fIe(e))&&void 0!==t?t:"line"}function bIe(e){return cIe(e,"isPie")}function CIe(e){return mIe(yIe(e))?void 0:1}function xIe(e){return mIe(yIe(e))?2:function(e){return"pie"===e||"waterfall"===e||"histogram"===e}(e)?1:void 0}function wIe(e){return!dIe(e)&&cIe(yIe(e),"canInvert")}function SIe(e){switch(e){case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":case"stackedLine":case"normalizedLine":case"stackedArea":case"normalizedArea":return"".concat(e,"Full");case"doughnut":return"donut";case"areaColumnCombo":return"AreaColumnCombo";default:return e}}var MIe=["number","category","grouped-category","log","time"];function DIe(e,t){return Object.keys(t.themes).includes(e)}var kIe=MIe.reduce(((e,t)=>l(l({},e),{},{[t]:{title:{_enabledFromTheme:!0}}})),{});function IIe(e,t,i){const n=e.getExtraPaddingDirections();return{common:l(l({},t?{animation:{duration:500}}:void 0),{},{axes:kIe,padding:{top:!i&&n.includes("top")?40:20,right:n.includes("right")?30:20,bottom:n.includes("bottom")?40:20,left:n.includes("left")?30:20},suppressFieldDotNotation:!0})}}function AIe(e,t){const{customChartThemes:i}=e,n=i&&i[t];return n||pt(140,{name:t}),n}var TIe=class{constructor(e){this.chartProxyParams=e,this.clearThemeOverrides=!1,this.agChartsExports=e.agChartsExports,this.chart=e.chartInstance,this.chartType=e.chartType,this.crossFiltering=e.crossFiltering,this.crossFilterCallback=e.crossFilterCallback,this.standaloneChartType=yIe(this.chartType),null==this.chart?this.chart=e.agChartsExports.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}crossFilteringReset(){}update(e){this.getChartRef().update(this.getUpdateOptions(e,this.getCommonChartOptions(e.updatedOverrides)))}updateThemeOverrides(e){this.getChartRef().updateDelta({theme:{overrides:e}})}getChart(){return nIe(this.chart)}getChartRef(){return this.chart}downloadChart(e,t,i){const{chart:n}=this,o=nIe(n),s=t||(o.title?o.title.text:"chart"),{width:r,height:a}=e||{};n.download({width:r,height:a,fileName:s,fileFormat:i})}getChartImageDataURL(e){return this.getChart().getCanvasDataURL(e)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var e;return null!==(e=this.getChartOptions().theme.overrides)&&void 0!==e?e:{}}getChartPalette(){return this.agChartsExports._Theme.getChartTheme(this.getChartOptions().theme).palette}setPaired(e){const t=yIe(this.chartProxyParams.chartType);this.chart.updateDelta({theme:{overrides:{[t]:{paired:e}}}})}isPaired(){const e=yIe(this.chartProxyParams.chartType);return oIe(this.getChartThemeOverrides(),"".concat(e,".paired"),!0)}lookupCustomChartTheme(e){return AIe(this.chartProxyParams,e)}getSeriesGroupType(){}transformCategoryData(e,t){return e.map(((e,i)=>{const n=e[t],o=n&&n.toString?n.toString():"",s=l({},e);return s[t]={id:i,value:n,toString:()=>o},s}))}getCommonChartOptions(e){var t,i;const n=this.clearThemeOverrides?{}:null!==(t=null===(i=this.chart)||void 0===i?void 0:i.getOptions())&&void 0!==t?t:{},o=null!=this.chart?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const s=function(e,t,i,n,o){var s;const{chartOptionsToRestore:r,chartPaletteToRestore:a,chartThemeToRestore:d,agChartsExports:c}=e,h=function(e){let t=e.getChartThemeName();const i=e.getChartThemes();return i.includes(t)||(t=i[0]),t}(e),u=DIe(h,c._Theme),p=u?{baseTheme:h}:null!==(s=AIe(e,h))&&void 0!==s?s:{},g=e.getGridOptionsChartThemeOverrides(),m=e.apiChartThemeOverrides,v=yIe(e.chartType),f=e.crossFiltering?function(e,t,i){const n={listeners:{legendItemClick:t=>{const i=e.getChart(),n=[t.seriesId,"".concat(t.seriesId,"-filtered-out")];i.series.filter((e=>n.includes(e.id))).forEach((e=>e.toggleSeriesItem(void 0,"category",t.itemId,void 0)))}}};return{[i]:{tooltip:{delay:500},legend:n,listeners:{click:e=>t.crossFilterCallback(e,!0)}}}}(t,e,v):void 0,y=[u?IIe(e,i,(()=>{const e=e=>!!e&&Object.keys(e).some((t=>oIe(e[t],"title.enabled",!1)));return e(g)||e(m)})()):void 0,{pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}},n,f,g,m,l({},null!==r&&void 0!==r?r:{}),o].filter((e=>!!e)).reduce(((e,t)=>({baseTheme:e,overrides:t})),p);a&&h===d&&(function(e,t){const i=(e,t)=>{var i;return e===t||(null===e||void 0===e?void 0:e.length)===(null===t||void 0===t?void 0:t.length)&&null!==(i=null===e||void 0===e?void 0:e.every(((e,i)=>e===(null===t||void 0===t?void 0:t[i]))))&&void 0!==i&&i};return i(e.fills,t.fills)&&i(e.strokes,t.strokes)}(a,e.agChartsExports._Theme.getChartTheme(p).palette)||(y.palette=a));return y}(this.chartProxyParams,this,this.agChartsExports.isEnterprise,this.getChartThemeDefaults(),null!==e&&void 0!==e?e:o),r=l(l({},n),{},{mode:"integrated"});return r.theme=s,r.container=this.chartProxyParams.parentElement,r}getChartThemeDefaults(){const e=this.getSeriesChartThemeDefaults(),t=e?{[this.standaloneChartType]:e}:{},i={enabled:!0,snap:!0,label:{enabled:!1}},n=this.agChartsExports.isEnterprise?{zoom:{enabled:!0},animation:{enabled:!0,duration:500},axes:{number:{crosshair:i},category:{crosshair:i},log:{crosshair:i},time:{crosshair:i}}}:{};return n.minHeight=0,n.minWidth=0,n.navigator={enabled:!1},l({common:n},t)}getSeriesChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var e,t;if(this.clearThemeOverrides)return{};const i=null===(e=this.chart)||void 0===e?void 0:e.getOptions().theme;return null!==(t=null===i||void 0===i?void 0:i.overrides)&&void 0!==t?t:{}}destroy(){let{keepChartInstance:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},EIe=class extends TIe{constructor(e){super(e),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}getUpdateOptions(e,t){const i=this.getAxes(e,t);return l(l({},t),{},{data:this.getData(e,i),axes:i,series:this.getSeries(e)})}getData(e,t){const i=["area","line"].includes(this.standaloneChartType);return this.crossFiltering&&i?this.getCrossFilterData(e):this.getDataTransformedData(e,t)}getDataTransformedData(e,t){const i=t[0].type,{categories:n,data:o}=e,[s]=n;switch(i){case"category":return this.transformCategoryData(o,s.id);case"time":return this.transformTimeData(o,s.id);default:return o}}getXAxisType(e){return e.grouping?"grouped-category":this.isXAxisOfType(e,"time",(e=>e instanceof Date))?"time":this.isXAxisOfType(e,"number")?"number":"category"}isXAxisOfType(e,t,i){const[n]=e.categories;if(null!==n&&void 0!==n&&n.chartDataType)return n.chartDataType===t;if(!i)return!1;const o=e.data[0];return!!o&&i(o[n.id])}transformTimeData(e,t){var i;return(null===(i=e[0])||void 0===i?void 0:i[t])instanceof Date?e:e.map((e=>{const i=e[t];return"string"===typeof i?l(l({},e),{},{[t]:new Date(i)}):e}))}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(e){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(e)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(e,t){const[i]=t.categories,n=e=>{if("area"===this.standaloneChartType){return t.getCrossFilteringContext().lastSelectedChartId===t.chartId?e+"-total":e}return e+"-total"};return e.map((e=>(e.yKey=n(e.yKey),e.listeners={nodeClick:t=>{const i=t.datum[e.xKey],n=t.event.metaKey||t.event.ctrlKey;this.crossFilteringAddSelectedPoint(n,i),this.crossFilterCallback(t)}},e.marker={itemStyler:e=>{const t=e.datum[i.id];return{fill:e.highlighted?"yellow":e.fill,size:e.highlighted?14:this.crossFilteringPointSelected(t)?8:0}}},"area"===this.standaloneChartType&&(e.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),"line"===this.standaloneChartType&&(e.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),e)))}getCrossFilterData(e){this.crossFilteringAllPoints.clear();const[t]=e.categories,i=e.fields[0].colId,n="".concat(i,"-filtered-out"),o=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map((s=>{const r=s[t.id];this.crossFilteringAllPoints.add(r);const a=this.crossFilteringPointSelected(r);return"area"===this.standaloneChartType&&o===e.chartId&&(s["".concat(i,"-total")]=a?s[i]:s[i]+s[n]),"line"===this.standaloneChartType&&(s["".concat(i,"-total")]=a?s[i]:s[i]+s[n]),s}))}crossFilteringAddSelectedPoint(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]}isHorizontal(e){const t=this.standaloneChartType;if("waterfall"!==t&&"box-plot"!==t&&"range-bar"!==t)return!1;const i=e.theme,n=e=>{var i;const o=null===e||void 0===e||null===(i=e.overrides)||void 0===i||null===(i=i[t])||void 0===i||null===(i=i.series)||void 0===i?void 0:i.direction;return null!=o?"horizontal"===o:"object"===typeof(null===e||void 0===e?void 0:e.baseTheme)&&n(e.baseTheme)};return n(i)}},RIe=class extends EIe{constructor(e){super(e)}getSeries(e){const t=e.fields[0];return[{type:this.standaloneChartType,xKey:t.colId,xName:t.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}},LIe=class extends EIe{constructor(e){super(e)}getAxes(e,t){return[{type:this.getXAxisType(e),position:this.isHorizontal(t)?"left":"bottom"},{type:"number",position:this.isHorizontal(t)?"bottom":"left"}]}getSeries(e){var t;const[i]=e.categories,[n]=e.fields;return[{type:this.standaloneChartType,xKey:i.id,xName:i.name,yKey:n.colId,yName:null!==(t=n.displayName)&&void 0!==t?t:void 0}]}},PIe="AG-GRID-DEFAULT-LABEL-KEY";function NIe(e,t){return FIe(OIe(e,(function(e){return t.length}),(function(e,i){const n=t[i];return o=e[n],null==o?null:String(o);var o})))}function FIe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;const{depth:n,rootValues:o,value:s,children:r}=e;if(o)return o.map((e=>l({[PIe]:t},e)));if(0===n)return[l({[PIe]:t},s)];const a=[];for(const[l,d]of r.entries())a.push(...FIe(d,l,!0));return i?[l({[PIe]:t,children:a},null!==s&&void 0!==s?s:{})]:a}function OIe(e,t,i){const n={depth:0,children:new Map};return e.forEach((e=>{o(e,t(e),i,0,n)})),n;function o(e,t,i,n,s){if(n===t)return 0===n?(s.rootValues||(s.rootValues=[]),s.rootValues.push(e)):s.value=e,s;{const r=i(e,n),a=o(e,t,i,n+1,s.children.get(r)||{depth:0,children:new Map});return s.children.set(r,a),s.depth=Math.max(1+a.depth,s.depth),s}}}var BIe=class extends TIe{constructor(e){super(e)}getUpdateOptions(e,t){const{fields:i}=e,[n,o]=i;return l(l({},t),{},{series:this.getSeries(n,o),data:this.getData(e,n,o)})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}}}}getSeries(e,t){var i,n;return[{type:this.standaloneChartType,labelKey:PIe,sizeKey:null===e||void 0===e?void 0:e.colId,sizeName:null!==(i=null===e||void 0===e?void 0:e.displayName)&&void 0!==i?i:void 0,colorKey:null===t||void 0===t?void 0:t.colId,colorName:null!==(n=null===t||void 0===t?void 0:t.displayName)&&void 0!==n?n:void 0}]}getData(e,t,i){const{categories:n,data:o,groupData:s,grouping:r}=e;if(r){var a;return function(e,t){return FIe(OIe(e,(function(e){var i,n;return null!==(i=null===(n=t(e))||void 0===n?void 0:n.length)&&void 0!==i?i:0}),(function(e,i){const n=t(e);if(!n)return null;return n[n.length-1-i]})))}(i?o.concat(null!==(a=null===s||void 0===s?void 0:s.map((e=>{const i=l({},e);return delete i[t.colId],i})))&&void 0!==a?a:[]):o,(e=>{var t,i;return null!==(t=null===(i=e[on])||void 0===i?void 0:i.labels)&&void 0!==t?t:null}))}return NIe(o,n.map((e=>{let{id:t}=e;return t})))}},GIe=class extends TIe{constructor(e){super(e)}getAxes(e){const t="radial-bar"===this.standaloneChartType;return[{type:t?"angle-number":"angle-category"},{type:t?"radius-category":"radius-number"}]}getSeries(e){const{fields:t,categories:i,seriesGroupType:n}=e,[o]=i,s="radial-bar"===this.standaloneChartType,r=this.getSeriesGroupTypeOptions(n);return t.map((e=>{var t,i;return l({type:this.standaloneChartType,angleKey:s?e.colId:o.id,angleName:s?null!==(t=e.displayName)&&void 0!==t?t:void 0:o.name,radiusKey:s?o.id:e.colId,radiusName:s?o.name:null!==(i=e.displayName)&&void 0!==i?i:void 0},r)}))}getSeriesGroupType(){var e;const t=this.standaloneChartType;if(!["nightingale","radial-bar","radial-column"].includes(t))return;const i=null===(e=this.getChart().series)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.properties.toJson(),n=()=>i.normalizedTo?"normalized":"stacked";return"nightingale"===t?i.grouped?"grouped":n():i.stacked?n():"grouped"}getUpdateOptions(e,t){const i=this.getAxes(e);return l(l({},t),{},{data:this.getData(e,i),axes:i,series:this.getSeries(e)})}getData(e,t){if(t.some((e=>"angle-category"===e.type||"radius-category"===e.type))){const[t]=e.categories;return this.transformCategoryData(e.data,t.id)}return e.data}getSeriesGroupTypeOptions(e){return e?{grouped:"grouped"===e||void 0,stacked:"grouped"!==e||void 0,normalizedTo:"normalized"===e?100:void 0}:{}}};var zIe=class extends TIe{constructor(e){super(e)}getUpdateOptions(e,t){const i="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",n="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",o="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY";return l(l({},t),{},{series:this.getSeries(e,i,n,o),data:this.getData(e,i,n,o)})}getSeries(e,t,i,n){const[o]=e.categories;return[{type:this.standaloneChartType,yKey:n,xKey:t,colorKey:i,yName:o.name,xName:void 0,colorName:void 0}]}getData(e,t,i,n){const[o]=e.categories;return s=e.data,r=(s,r)=>{const a=s[o.id],d=null==a?"":String(a),c={id:r,value:a,toString:()=>d};return e.fields.map((e=>{let{colId:o,displayName:r}=e;return l(l({},s),{},{[t]:r,[i]:s[o],[n]:c})}))},s.reduce(((e,t,i,n)=>e.concat(r(t,i,n))),new Array);var s,r}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:_Ie}}}}};function _Ie(e){const{xKey:t,yKey:i,colorKey:n,yName:o,datum:s}=e;return{title:"",data:[{label:o,value:s[i]},{label:s[t],value:n&&s[n]}].map((e=>{let{label:t,value:i}=e;return{label:String(t),value:String(i)}}))}}var VIe=class extends Si{wireBeans(e){this.sortSvc=e.sortSvc,this.gridRowModel=e.rowModel,this.colModel=e.colModel,this.valueSvc=e.valueSvc,this.pivotResultCols=e.pivotResultCols,this.rowNodeSorter=e.rowNodeSorter,this.aggStage=e.aggStage}getData(e){if(e.crossFiltering){if(e.grouping)return pt(141),{chartData:[],colNames:{}};if(!bt(this.gos))return pt(142),{chartData:[],colNames:{}}}Ct(this.gos)&&e.pivoting&&this.updatePivotKeysForSSRM();const t=this.extractRowsFromGridRowModel(e);return t.chartData=this.aggregateRowsByDimension(e,t.chartData),t}extractRowsFromGridRowModel(e){const{crossFiltering:t,startRow:i,endRow:n,valueCols:o,dimensionCols:s,grouping:r}=e;let a=[];const l={},d={},c={};let h,u={},p=[];if(t)u=this.getFilteredRowNodes(),p=this.getAllRowNodes(),h=p.length;else{const e=this.gridRowModel.getRowCount()-1;if(i===n&&0===i&&0===s.length&&0===o.length)h=0;else{h=(n>=0?Math.min(n,e):e)-i+1}}h>0&&o.forEach((e=>{let t=[];const i=e.getColDef().pivotKeys;i&&(t=i.slice());const n=e.getColDef().headerName;n&&t.push(n),t.length>0&&(l[e.getId()]=t)}));let g,m=0;for(let v=0;v<h;v++){const n=t?p[v]:this.gridRowModel.getRow(v+i);if(n.footer||n.detail){m++;continue}const l={};s.forEach((e=>{const t=e.colId,i=this.colModel.getCol(t);if(i){const e=this.valueSvc.getValue(i,n);if(r){const i=null!==e&&void 0!==e&&e.toString?String(e.toString()):"",o=this.getGroupLabels(n,i);l[t]=o.slice().reverse(),n.group&&(d[o.toString()]=v-m);const s=o.slice(1,o.length).toString();s&&(c[s]=d[s])}else l[t]=e}else l[UIe]=v+1})),o.forEach((i=>{const o=i.getColId();if(t){const t=o+"-filtered-out",s=this.valueSvc.getValue(i,n),r=null!=s&&"function"===typeof s.toNumber?s.toNumber():s;u[n.id]?(l[o]=r,l[t]=e.aggFunc||e.isScatter?void 0:0):(l[o]=e.aggFunc||e.isScatter?void 0:0,l[t]=r)}else{let e=this.valueSvc.getValue(i,n);e&&Object.prototype.hasOwnProperty.call(e,"toString")&&(e=parseFloat(e.toString())),l[o]=null!=e&&"function"===typeof e.toNumber?e.toNumber():e}})),a.push(l)}if(r){const e=Object.values(c),t=a;a=[],g=[];for(let i=0;i<t.length;i++)(e.includes(i)?g:a).push(t[i])}return{chartData:a,colNames:l,groupChartData:g}}aggregateRowsByDimension(e,t){const i=e.dimensionCols;if(!e.aggFunc||0===i.length)return t;const n=Gi(i),o=n&&n.colId,s={},r=[];if(t.forEach((e=>{let t=s;i.forEach((n=>{const s=n.colId,a=e[s];if(s===o){let n=t[a];n||(n={__children:[]},i.forEach((t=>{const i=t.colId;n[i]=e[i]})),t[a]=n,r.push(n)),n.__children.push(e)}else t[a]||(t[a]={}),t=t[a]}))})),this.gos.assertModuleRegistered("SharedRowGrouping",1)){const t=this.aggStage;r.forEach((i=>e.valueCols.forEach((n=>{if(e.crossFiltering)e.valueCols.forEach((n=>{const o=n.getColId(),s=i.__children.filter((e=>"undefined"!==typeof e[o])).map((e=>e[o])),r=t.aggregateValues(s,e.aggFunc);i[n.getId()]=r&&"undefined"!==typeof r.value?r.value:r;const a="".concat(o,"-filtered-out"),l=i.__children.filter((e=>"undefined"!==typeof e[a])).map((e=>e[a])),d=t.aggregateValues(l,e.aggFunc);i[a]=d&&"undefined"!==typeof d.value?d.value:d}));else{const o=i.__children.map((e=>e[n.getId()])),s=t.aggregateValues(o,e.aggFunc);i[n.getId()]=s&&"undefined"!==typeof s.value?s.value:s}}))))}return r}updatePivotKeysForSSRM(){var e;const t=null===(e=this.pivotResultCols)||void 0===e||null===(e=e.getPivotResultCols())||void 0===e?void 0:e.list;if(!t)return;const i=this.extractPivotKeySeparator(t);t.forEach((e=>{if(""===i)e.getColDef().pivotKeys=[];else{const t=e.getColId().split(i);e.getColDef().pivotKeys=t.slice(0,t.length-1)}}))}extractPivotKeySeparator(e){if(0===e.length)return"";const t=(e,i)=>{const n=e.getGroupId();return e.getParent()?t(e.getParent(),n):i.split(n)[1][0]},i=e[0];return null==i.getParent()?"":t(i.getParent(),i.getColId())}getGroupLabels(e,t){const i=[t];for(;e&&0!==e.level;)(e=e.parent)&&i.push(e.key);return i}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort((t=>{e[t.id]=t})),e}getAllRowNodes(){const e=[];return this.gridRowModel.forEachNode((t=>{e.push(t)})),this.sortRowNodes(e)}sortRowNodes(e){var t;const i=null===(t=this.sortSvc)||void 0===t?void 0:t.getSortOptions();return i&&0!=i.length&&this.rowNodeSorter?this.rowNodeSorter.doFullSort(e,i):e}},HIe=class extends Si{constructor(){super(...arguments),this.beanName="chartColSvc",this.valueColsWithoutSeriesType=new Set}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.valueSvc=e.valueSvc}postConstruct(){const e=()=>this.valueColsWithoutSeriesType.clear();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e})}getColumn(e){return this.colModel.getColDefCol(e)}getAllDisplayedColumns(){return this.beans.visibleCols.allCols}getColDisplayName(e,t){const i="chart",n=this.colNames.getDisplayNameForColumn(e,i);if(t){const t=[n],o=e=>{if(!e)return;const n=this.colNames.getDisplayNameForColumnGroup(e,i);null!==n&&void 0!==n&&n.length&&(t.unshift(n),o(e.getParent()))};return o(e.getParent()),t.join(" - ")}return n}getRowGroupColumns(){var e,t;return null!==(e=null===(t=this.beans.rowGroupColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}getGroupDisplayColumns(){var e,t;return null!==(e=null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.getShowRowGroupCols())&&void 0!==e?e:[]}isPivotMode(){return this.colModel.isPivotMode()}isPivotActive(){return this.colModel.isPivotActive()}getChartColumns(){const e=this.colModel.getCols(),t=new Set,i=new Set;return e.forEach((e=>{const n=e.getColDef(),o=n.chartDataType;if(o)switch(o){case"category":case"time":return void t.add(e);case"series":return void i.add(e);case"excluded":return;default:pt(153,{chartDataType:o})}"ag-Grid-AutoColumn"!==n.colId?e.isPrimary()?(this.isInferredValueCol(e)?i:t).add(e):i.add(e):t.add(e)})),{dimensionCols:t,valueCols:i}}isInferredValueCol(e){const t=e.getColId();if("ag-Grid-AutoColumn"===t)return!1;const i=ls(this.beans,{rowIndex:0,rowPinned:null});if(!i)return this.valueColsWithoutSeriesType.has(t);let n=this.valueSvc.getValue(e,i);null==n&&(n=this.extractLeafData(i,e)),null!=n&&"function"===typeof n.toNumber&&(n=n.toNumber());const o="number"===typeof n;return o&&this.valueColsWithoutSeriesType.add(t),o}extractLeafData(e,t){if(!e.allLeafChildren)return null;for(let i=0;i<e.allLeafChildren.length;i++){const n=e.allLeafChildren[i],o=this.valueSvc.getValue(t,n);if(null!=o)return o}return null}destroy(){this.valueColsWithoutSeriesType.clear(),super.destroy()}},WIe=new Set(["line","groupedColumn","stackedColumn","area","stackedArea"]),jIe=class extends Si{constructor(e){var t;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=null!==(t=e.params.seriesChartTypes)&&void 0!==t?t:[]}postConstruct(){this.initComboCharts()}update(e){this.seriesChartTypes=null!==e&&void 0!==e?e:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const e=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===this.chartDataModel.chartType||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map((e=>{const t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=!t&&e.secondaryAxis,e})),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())}updateSeriesChartTypesForCustomCombo(){this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||pt(150),this.seriesChartTypes=this.seriesChartTypes.map((e=>(WIe.has(e.chartType)||(pt(151,{chartType:e.chartType}),e.chartType="line"),e)));const e=this.chartDataModel.valueColState.map((e=>{this.savedCustomSeriesChartTypes&&0!==this.savedCustomSeriesChartTypes.length||(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const t=this.savedCustomSeriesChartTypes.find((t=>t.colId===e.colId));return t||(e.selected&&!this.suppressComboChartWarnings&&pt(152,{colId:e.colId}),{colId:e.colId,chartType:"line",secondaryAxis:!1})}));this.seriesChartTypes=e,this.savedCustomSeriesChartTypes=e,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:t}=this.chartDataModel,i="columnLineCombo"===e?"groupedColumn":"stackedArea",n="columnLineCombo"===e?"line":"groupedColumn",o=t.filter((e=>e.selected)),s=Math.ceil(o.length/2);this.seriesChartTypes=o.map(((e,t)=>{const o=t>=s?n:i;return{colId:e.colId,chartType:o,secondaryAxis:!1}}))}},UIe="AG-GRID-DEFAULT-CATEGORY",KIe=class extends Si{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.colNames={},this.crossFiltering=!1,this.grouping=!1,this.params=e,this.chartId=e.chartId,this.setParams(e)}wireBeans(e){this.rangeSvc=e.rangeSvc,this.chartTranslation=e.chartTranslation}setParams(e){const{chartType:t,pivotChart:i,chartThemeName:n,switchCategorySeries:o,aggFunc:s,cellRange:r,suppressChartRanges:a,unlinkChart:l,crossFiltering:d,seriesGroupType:c}=e;this.chartType=t,this.pivotChart=null!==i&&void 0!==i&&i,this.chartThemeName=n,this.switchCategorySeries=!!o,this.aggFunc=s,this.referenceCellRange=r,this.suppliedCellRange=r,this.suppressChartRanges=null!==a&&void 0!==a&&a,this.unlinked=!!l,this.crossFiltering=!!d,this.seriesGroupType=c}postConstruct(){this.datasource=this.createManagedBean(new VIe),this.chartColSvc=this.createManagedBean(new HIe),this.comboChartModel=this.createManagedBean(new jIe(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(e){const{cellRange:t,seriesChartTypes:i}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.setParams(e),this.updateSelectedDimensions(null===t||void 0===t?void 0:t.columns),this.updateCellRanges({setColsFromRange:!0});(this.isComboChart()||i)&&this.comboChartModel.update(i),this.unlinked||this.updateData()}updateCellRanges(e){const{updatedColState:t,resetOrder:i,maintainColState:n,setColsFromRange:o}=null!==e&&void 0!==e?e:{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:s,valueCols:r}=this.chartColSvc.getChartColumns(),a=this.getAllColumnsFromRanges();t&&this.updateColumnState(t,i),this.setDimensionCellRange(s,a,t),this.setValueCellRange(r,a,o),t||n||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const i={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:["scatter","bubble"].includes(this.chartType)},{chartData:n,colNames:o,groupChartData:s}=this.datasource.getData(i);this.chartData=n,this.groupChartData=s,this.colNames=o,this.categoryAxisType=void 0}isGrouping(){const e=this.gos.get("treeData"),t=e?null:this.chartColSvc.getRowGroupColumns(),i=e||t&&t.length>0,n=this.getSelectedDimensions().map((e=>{let{colId:t}=e;return t})),o=this.chartColSvc.getGroupDisplayColumns().map((e=>e.getColId())).some((e=>n.includes(e)));return!!i&&o}getSelectedValueCols(){return this.valueColState.filter((e=>e.selected)).map((e=>e.column))}getSelectedDimensions(){return this.dimensionColState.filter((e=>e.selected))}getColDisplayName(e,t){return this.chartColSvc.getColDisplayName(e,t)}isPivotMode(){return this.chartColSvc.isPivotMode()}getChartDataType(e){const t=this.chartColSvc.getColumn(e);return t?t.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColSvc.isPivotActive()}createCellRange(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:i,startColumn:e===Na.DIMENSION||null==this.referenceCellRange.startColumn?i[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return new Set(this.chartColSvc.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),new Set(e)}getRowIndexes(){let e=0,t=0;const{rangeSvc:i,valueCellRange:n,dimensionCellRange:o}=this,s=n||o;if(i&&s){e=i.getRangeStartRow(s).rowIndex;const n=i.getRangeEndRow(s);t="bottom"===n.rowPinned?-1:n.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){const{dimensionCols:e,valueCols:t}=this.chartColSvc.getChartColumns(),i=this.getAllColumnsFromRanges(),n=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];const o=mIe(yIe(this.chartType));let s=!1,r=1;const a=this.suppliedCellRange.columns[0];e.forEach((e=>{const t="ag-Grid-AutoColumn"===e.getColId();let n=!1;this.crossFiltering&&this.aggFunc?a.getColId()===e.getColId()&&(n=!0):n=!!t||(!s||o)&&i.has(e),this.dimensionColState.push({column:e,colId:e.getColId(),displayName:this.getColDisplayName(e),selected:n,order:r++}),n&&(s=!0)}));const l={colId:UIe,displayName:this.chartTranslation.translate("defaultCategory"),selected:!s,order:0};this.dimensionColState.unshift(l);const d=this.referenceCellRange.columns.filter((e=>t.has(e)));t.forEach((e=>{n&&this.referenceCellRange.columns.includes(e)&&(e=d.shift()),this.valueColState.push({column:e,colId:e.getColId(),displayName:this.getColDisplayName(e),selected:i.has(e),order:r++})}))}updateColumnState(e,t){const i=t=>t.colId===e.colId,{dimensionColState:n,valueColState:o}=this,s=n.find(i),r=o.find(i);if(s){if(mIe(yIe(this.chartType)))s.selected=e.selected;else{const t=e.selected?s:n.filter((e=>e!==s)).find((e=>{let{selected:t}=e;return t}));n.forEach((e=>e.selected=e===t))}}else r&&(r.selected=e.selected);const a=[...n,...o],l=[];t||(a.forEach(((t,i)=>{i===e.order&&l.push(e.colId),t.colId!==e.colId&&l.push(t.colId)})),a.forEach((e=>{const t=l.indexOf(e.colId);e.order=t>=0?l.indexOf(e.colId):a.length-1}))),this.reorderColState()}reorderColState(){const e=(e,t)=>e.order-t.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,i){this.dimensionCellRange=void 0;const n=mIe(yIe(this.chartType));if(!i&&!this.dimensionColState.length){const i=new Array;return e.forEach((e=>{i.length>0&&!n||!t.has(e)||i.push(e)})),void(i.length>0&&(this.dimensionCellRange=this.createCellRange(Na.DIMENSION,...i)))}let o=i?[i]:[];if(this.crossFiltering&&this.aggFunc){const e=this.suppliedCellRange.columns[0];o=this.dimensionColState.filter((t=>t.colId===e.getColId()))}else(n||0===o.length||o.some((t=>{let{column:i}=t;return!i||!e.has(i)})))&&(o=this.dimensionColState.filter((e=>e.selected)));const s=1===o.length&&o[0].colId===UIe,r=o.map((e=>{let{column:t}=e;return t})).filter((e=>null!=e));r.length>0&&!s&&(this.dimensionCellRange=this.createCellRange(Na.DIMENSION,...r))}setValueCellRange(e,t,i){this.valueCellRange=void 0;const n=[],o=xIe(this.chartType);let s=0;if(e.forEach((e=>{i?(null==o||s<o)&&t.has(e)&&(n.push(e),s++):this.valueColState.some((t=>t.selected&&t.colId===e.getColId()))&&n.push(e)})),n.length>0){let e=[];this.valueColState.length>0?e=this.valueColState.map((e=>e.colId)):t.forEach((t=>e.push(t.getColId()))),n.sort(((t,i)=>e.indexOf(t.getColId())-e.indexOf(i.getColId()))),this.valueCellRange=this.createCellRange(Na.VALUE,...n)}}resetCellRanges(e,t){if(!e&&!t)return;const{dimensionCols:i,valueCols:n}=this.chartColSvc.getChartColumns(),o=this.getAllColumnsFromRanges();e&&this.setDimensionCellRange(i,o),t&&this.setValueCellRange(n,o)}updateSelectedDimensions(e){const t=new Set(e.map((e=>e.getColId())));if(mIe(yIe(this.chartType))){const e=this.dimensionColState.filter((e=>t.has(e.colId))),i=new Set(e.map((e=>e.colId)));this.dimensionColState=this.dimensionColState.map((e=>l(l({},e),{},{selected:i.has(e.colId)})))}else{const e=(this.dimensionColState.find((e=>t.has(e.colId)))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map((t=>l(l({},t),{},{selected:t.colId===e})))}}syncDimensionCellRange(){const e=this.getSelectedDimensions();if(0===e.length)return;const t=e.map((e=>{let{column:t}=e;return t})).filter((e=>null!=e));t.length>0&&(this.dimensionCellRange=this.createCellRange(Na.DIMENSION,...t))}isComboChart(e){return dIe(null!==e&&void 0!==e?e:this.chartType)}},YIe=class extends EIe{constructor(e){super(e)}getAxes(e,t){return[{type:this.getXAxisType(e),position:this.isHorizontal(t)?"left":"bottom"},{type:"number",position:this.isHorizontal(t)?"bottom":"left"}]}computeSeriesStatistics(e,t){const{data:i,fields:n}=e,[o]=e.categories,s=o.id||UIe,r=this.groupDataByCategory(s,i);return Array.from(r).map((e=>{let[i,s]=e;const r={[o.id]:i};return n.forEach(((e,i)=>{const n=s.map((t=>t[e.colId])).filter((e=>"number"===typeof e&&!isNaN(e)));Object.entries(t(n)).forEach((e=>{let[t,o]=e;const s="".concat(t,":").concat(i);r[s]=n.length>0?o:null}))})),r}))}groupDataByCategory(e,t){return t.reduce(((t,i)=>{const n=(t=>{if(e===UIe)return 1;const i=t[e];return null===i||void 0===i?"":i instanceof Date?i.getTime():i})(i),o=t.get(n);return o?o.push(i):t.set(n,[i]),t}),new Map)}},ZIe=class extends YIe{constructor(e){super(e)}getSeries(e){const[t]=e.categories;return e.fields.map(((e,i)=>{var n;return{type:this.standaloneChartType,xKey:t.id,xName:t.name,yName:null!==(n=e.displayName)&&void 0!==n?n:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:"min:".concat(i),q1Key:"q1:".concat(i),medianKey:"median:".concat(i),q3Key:"q3:".concat(i),maxKey:"max:".concat(i)}}))}getData(e){return this.computeSeriesStatistics(e,(e=>{const t=e.sort(((e,t)=>e-t));return{min:t[0],q1:this.quantile(t,.25),median:this.quantile(t,.5),q3:this.quantile(t,.75),max:t[t.length-1]}}))}quantile(e,t){const i=(e.length-1)*t,n=Math.floor(i),o=i-n;return void 0!==e[n+1]?e[n]+o*(e[n+1]-e[n]):e[n]}},XIe=class extends YIe{constructor(e){super(e)}getSeries(e){const[t]=e.categories;return e.fields.map(((e,i)=>{var n;return{type:this.standaloneChartType,xKey:t.id,xName:t.name,yName:null!==(n=e.displayName)&&void 0!==n?n:void 0,yLowName:"Min",yHighName:"Max",yLowKey:"min:".concat(i),yHighKey:"max:".concat(i)}}))}getData(e){return this.computeSeriesStatistics(e,(e=>({min:Math.min(...e),max:Math.max(...e)})))}},qIe=class extends Si{constructor(){super(...arguments),this.beanName="enterpriseChartProxyFactory"}createChartProxy(e){switch(e.chartType){case"histogram":return new RIe(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new GIe(e);case"rangeBar":case"rangeArea":return new XIe(e);case"boxPlot":return new ZIe(e);case"treemap":case"sunburst":return new BIe(e);case"heatmap":return new zIe(e);case"waterfall":return new LIe(e)}}},QIe=class extends Si{constructor(e,t,i,n){super(),this.chartController=e,this.eGui=t,this.cssClass=i,this.createPanels=n,this.panels=[]}postConstruct(){this.addManagedListeners(this.chartController,{chartUpdated:()=>this.refreshPanels(!0),chartApiUpdate:()=>this.refreshPanels(!1)})}addComponent(e){this.createBean(e),this.panels.push(e),e.addCssClass(this.cssClass),this.eGui.appendChild(e.getGui())}refreshPanels(e){const t=this.chartController.getChartType(),i=this.chartController.isGrouping(),n=yIe(t);e&&t===this.chartType&&i===this.isGrouping||(this.destroyPanels(),this.createPanels(t,n),this.chartType=t,this.isGrouping=i)}destroyPanels(){this.panels.forEach((e=>{we(e.getGui()),this.destroyBean(e)})),this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}},JIe=class extends En{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate('<div>\n            <ag-group-component data-ref="animationGroup">\n                <ag-input-number-field data-ref="animationHeightInput"></ag-input>\n            </ag-group-component>\n        </div>',[yDe,la],{animationGroup:e,animationHeightInput:t})}},$Ie={selector:"AG-COLOR-INPUT",component:class extends oa{constructor(){super({template:'\n            <div role="presentation" class="ag-color-input">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <input data-ref="eInput" class="ag-input-field-input">\n                    <div data-ref="eColor" class="ag-color-input-color"></div>\n                </div>\n            </div>'}),this.eColor=Tn}wireBeans(e){this.chartTranslation=e.chartTranslation,this.color=e.agChartsExports._Util.Color}setColor(e){const t=e.toRgbaString();this.setValue(this.color.fromString(t).toHexString().toUpperCase(),!0),this.eColor.style.backgroundColor=t}setValue(e,t){const i=this.color.validColorString(null!==e&&void 0!==e?e:"");return this.eInput.setCustomValidity(i?"":this.chartTranslation.translate("invalidColor")),super.setValue(e,t),i&&!t&&this.dispatchLocalEvent({type:"colorChanged"}),this}onColorChanged(e){this.addManagedListeners(this,{colorChanged:()=>e(this.color.fromString(this.value))})}}},eAe=[],tAe=class extends En{constructor(e){super('<div class="ag-color-panel" tabindex="-1">\n            <div data-ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div data-ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div data-ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div data-ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div data-ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div data-ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div data-ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <ag-color-input data-ref="colorInput"></ag-color-input>\n                <div data-ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',[$Ie]),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.spectrumColor=Tn,this.spectrumVal=Tn,this.spectrumDragger=Tn,this.spectrumHue=Tn,this.spectrumHueSlider=Tn,this.spectrumAlpha=Tn,this.spectrumAlphaSlider=Tn,this.colorInput=Tn,this.recentColors=Tn,this.picker=e.picker}wireBeans(e){this._Color=e.agChartsExports._Util.Color}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",(()=>this.spectrumColor.focus())),this.addGuiEventListener("keydown",(e=>{e.key!==Do.ENTER||e.defaultPrevented||this.destroy()})),this.addManagedListeners(this.spectrumColor,{keydown:e=>this.moveDragger(e)}),this.addManagedListeners(this.spectrumAlphaSlider,{keydown:e=>this.moveAlphaSlider(e)}),this.addManagedListeners(this.spectrumHueSlider,{keydown:e=>this.moveHueSlider(e)}),this.addManagedListeners(this.spectrumVal,{mousedown:this.onSpectrumDraggerDown.bind(this)}),this.addManagedListeners(this.spectrumHue,{mousedown:this.onSpectrumHueDown.bind(this)}),this.addManagedListeners(this.spectrumAlpha,{mousedown:this.onSpectrumAlphaDown.bind(this)}),this.addGuiEventListener("mousemove",(e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)})),this.addManagedListeners(document,{mouseup:this.onMouseUp.bind(this)}),this.colorInput.onColorChanged(this.setColor.bind(this)),this.addManagedListeners(this.recentColors,{click:this.onRecentColorClick.bind(this),keydown:e=>{e.key!==Do.ENTER&&e.key!==Do.SPACE||(e.preventDefault(),this.onRecentColorClick(e))}})}initTabIndex(){const e=this.tabIndex=this.gos.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){e.preventDefault(),this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const t=this.spectrumValRect;if(!t)return;let i,n;if(e instanceof MouseEvent)i=e.clientX-t.left,n=e.clientY-t.top;else{const t=e.key===Do.LEFT,o=e.key===Do.RIGHT,s=e.key===Do.UP,r=e.key===Do.DOWN,a=s||r,l=t||o;if(!a&&!l)return;e.preventDefault();const{x:d,y:c}=this.getSpectrumValue();i=d+(l?t?-5:5:0),n=c+(a?s?-5:5:0)}i=Math.max(i,0),i=Math.min(i,t.width),n=Math.max(n,0),n=Math.min(n,t.height),this.setSpectrumValue(i/t.width,1-n/t.height)}moveHueSlider(e){const t=this.spectrumHueRect;if(!t)return;const i=this.moveSlider(this.spectrumHueSlider,e);null!=i&&(this.H=1-i/t.width,this.update())}moveAlphaSlider(e){const t=this.spectrumAlphaRect;if(!t)return;const i=this.moveSlider(this.spectrumAlphaSlider,e);null!=i&&(this.A=i/t.width,this.update())}moveSlider(e,t){var i;const n=e.getBoundingClientRect(),o=null===(i=e.parentElement)||void 0===i?void 0:i.getBoundingClientRect();if(!e||!o)return null;const s=n.width/2;let r;if(t instanceof MouseEvent)r=Math.floor(t.clientX-o.left);else{const i=t.key===Do.LEFT,n=t.key===Do.RIGHT;if(!i&&!n)return null;t.preventDefault();const o=i?-5:5;r=parseFloat(e.style.left)+s+o}return r=Math.max(r,0),r=Math.min(r,o.width),e.style.left=r-s+"px",r}update(e){const{A:t,S:i,B:n,H:o,_Color:s}=this,r=360*o,a=s.fromHSB(r,i,n,t),l=a.toRgbaString(),d=s.fromHSB(r,i,n).toRgbaString(),c=s.fromHSB(r,1,1).toRgbaString(),h=this.picker;s.fromString(h.getValue()).toRgbaString()!==l&&(this.colorChanged=!0),h.setValue(l),this.spectrumColor.style.backgroundColor=c,this.spectrumDragger.style.backgroundColor=d,this.spectrumHueSlider.style.backgroundColor=c,this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color-from",s.fromHSB(r,i,n,0).toRgbaString()),this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color-to",d),this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color",l),e||this.colorInput.setColor(a)}setSpectrumValue(e,t,i){const n=this.spectrumValRect||this.refreshSpectrumRect();if(null==n)return;const o=this.spectrumDragger,s=o.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,o.style.left=e*n.width-s.width/2+"px",o.style.top=(1-t)*n.height-s.height/2+"px",this.update(i)}getSpectrumValue(){const e=this.spectrumDragger,t=e.getBoundingClientRect();return{x:parseFloat(e.style.left)+t.width/2,y:parseFloat(e.style.top)+t.height/2}}initRecentColors(){const e=eAe,t=e.map(((e,t)=>'<div class="ag-recent-color" id='.concat(t,' style="background-color: ').concat(e,'; width: 15px; height: 15px;" recent-color="').concat(e,'" tabIndex="').concat(this.tabIndex,'"></div>')));this.recentColors.innerHTML=t.join(""),le(this.recentColors,!!e.length)}setValue(e){const t=this._Color.fromString(e);this.setColor(t,!0)}setColor(e,t){const[i,n,o]=e.toHSB();this.H=(isNaN(i)?0:i)/360,this.A=e.a;const s=this.spectrumHueRect||this.refreshHueRect(),r=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left="".concat((this.H-1)*-s.width-this.spectrumHueSlider.getBoundingClientRect().width/2,"px"),this.spectrumAlphaSlider.style.left="".concat(this.A*r.width-this.spectrumAlphaSlider.getBoundingClientRect().width/2,"px"),this.setSpectrumValue(n,o,!t)}onRecentColorClick(e){const t=e.target;if(!ze(t.id))return;const i=parseInt(t.id,10);this.setValue(eAe[i]),this.destroy()}addRecentColor(){const e=this._Color.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString();let t=eAe;this.colorChanged&&t[0]!==e&&(t=t.filter((t=>t!=e)),t=[e].concat(t),t.length>8&&(t=t.slice(0,8)),eAe=t)}destroy(){this.addRecentColor(),super.destroy()}},iAe=class extends Sa{constructor(e){super(l({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"chartsColorPicker"},e))}postConstruct(){const e=Tt(this.beans);this.eDisplayFieldColor=e.createElement("span"),this.eDisplayFieldColor.classList.add("ag-color-picker-color"),this.eDisplayFieldText=e.createElement("span"),this.eDisplayFieldText.classList.add("ag-color-picker-value"),this.eDisplayField.appendChild(this.eDisplayFieldColor),this.eDisplayField.appendChild(this.eDisplayFieldText),super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){var e;const t=this.eWrapper.getBoundingClientRect(),i=this.beans.popupSvc.getParentRect();return this.createBean(new Xwe({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:t.right-i.left-190,y:t.top-i.top-250-(null!==(e=this.config.pickerGap)&&void 0!==e?e:0),postProcessPopupParams:{type:"colorPicker",eventSource:this.eWrapper}}))}renderAndPositionPicker(){const e=this.pickerComponent,t=this.createBean(new tAe({picker:this}));return e.addCssClass("ag-color-dialog"),t.addDestroyFunc((()=>{e.isAlive()&&this.destroyBean(e)})),e.setParentComponent(this),e.setBodyComponent(t),t.setValue(this.getValue()),t.getGui().focus(),e.addDestroyFunc((()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,t.isAlive()&&this.destroyBean(t),this.isAlive()&&this.getFocusableElement().focus())})),()=>{var e;return null===(e=this.pickerComponent)||void 0===e?void 0:e.close()}}setValue(e){return this.value===e?this:(this.eDisplayFieldColor.style.backgroundColor=e,this.eDisplayFieldText.textContent=this.beans.agChartsExports._Util.Color.fromString(e).toHexString().toUpperCase(),super.setValue(e))}getValue(){return this.value}},nAe={selector:"AG-COLOR-PICKER",component:iAe},oAe=class extends En{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),i=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),n=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate('<div>\n            <ag-group-component data-ref="crosshairGroup">\n                <ag-checkbox data-ref="crosshairLabelCheckbox"></ag-checkbox>\n                <ag-checkbox data-ref="crosshairSnapCheckbox"></ag-checkbox>\n                <ag-color-picker data-ref="crosshairStrokeColorPicker"></ag-color-picker>\n            </ag-group-component>\n        </div>',[yDe,Zr,nAe],{crosshairGroup:e,crosshairLabelCheckbox:t,crosshairSnapCheckbox:i,crosshairStrokeColorPicker:n})}},sAe={selector:"AG-INPUT-RANGE",component:class extends Kr{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:t,step:i}=this.config;null!=e&&this.setMinValue(e),null!=t&&this.setMaxValue(t),this.setStep(i||1)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>{const t=e.target.value;this.setValue(t)}})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());const i=super.setValue(e,t);return this.eInput.value=e,i}}},rAe=class extends jr{constructor(e){super(e,'<div class="ag-slider">\n            <label data-ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range data-ref="eSlider"></ag-input-range>\n                <ag-input-number-field data-ref="eText"></ag-input-number-field>\n            </div>\n        </div>',[sAe,la]),this.eLabel=Tn,this.eSlider=Tn,this.eText=Tn,this.labelAlignment="top"}postConstruct(){super.postConstruct(),this.eSlider.addCssClass("ag-slider-field");const{minValue:e,maxValue:t,textFieldWidth:i,step:n,value:o,onValueChange:s}=this.config;null!=e&&this.setMinValue(e),null!=t&&this.setMaxValue(t),null!=i&&this.setTextFieldWidth(i),null!=n&&this.setStep(n),null!=o&&this.setValue(o),null!=s&&this.onValueChange(s)}onValueChange(e){return this.addManagedListeners(this.eText,{fieldValueChanged:()=>{const t=parseFloat(this.eText.getValue());this.eSlider.setValue(t.toString(),!0),e(t||0)}}),this.addManagedListeners(this.eSlider,{fieldValueChanged:()=>{const t=this.eSlider.getValue();this.eText.setValue(t,!0),e(parseFloat(t))}}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,t){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}},aAe={selector:"AG-SLIDER",component:rAe},lAe=class extends En{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);t.minValue=10;const i=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate('<div>\n            <ag-group-component data-ref="navigatorGroup">\n                <ag-slider data-ref="navigatorHeightSlider"></ag-slider>\n                <ag-checkbox data-ref="navigatorMiniChartCheckbox"></ag-checkbox>\n            </ag-group-component>\n        </div>',[yDe,aAe,Zr],{navigatorGroup:e,navigatorHeightSlider:t,navigatorMiniChartCheckbox:i})}},dAe=class extends En{constructor(e){super(),this.chartMenuParamsFactory=e,this.zoomScrollingStepInput=Tn}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),i=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);i.step=.01,i.minValue=i.step;const n=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");t.onValueChange=(e=>t=>{e&&(e(t),this.zoomScrollingStepInput.setDisabled(!t))})(t.onValueChange),this.setTemplate('<div>\n            <ag-group-component data-ref="zoomGroup">\n                <ag-checkbox data-ref="zoomSelectingCheckbox"></ag-checkbox>\n                <ag-checkbox data-ref="zoomScrollingCheckbox"></ag-checkbox>\n                <ag-slider data-ref="zoomScrollingStepInput"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,Zr,aAe],{zoomGroup:e,zoomScrollingCheckbox:t,zoomScrollingStepInput:i,zoomSelectingCheckbox:n}),this.zoomScrollingStepInput.setDisabled(!t.value)}},cAe=["navigator","zoom","animation","crosshair"],hAe=class extends En{constructor(e){super('<div class="ag-chart-advanced-settings-wrapper"></div>'),this.chartMenuContext=e}postConstruct(){this.chartPanelFeature=this.createManagedBean(new QIe(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",((e,t)=>this.createPanels(e,t)))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){cAe.forEach((e=>{if(!this.isGroupPanelShownForSeries(e,t))return;const i=this.createPanel(e);this.chartPanelFeature.addComponent(i)}))}isGroupPanelShownForSeries(e,t){return"animation"===e||pIe(t)}createPanel(e){const{chartMenuParamsFactory:t,chartAxisMenuParamsFactory:i}=this.chartMenuContext;switch(e){case"navigator":return new lAe(t);case"zoom":return new dAe(t);case"animation":return new JIe(t);case"crosshair":return new oAe(i)}}},uAe=class extends Si{constructor(){super(...arguments),this.beanName="advSettingsMenuFactory"}showMenu(e,t){this.hideMenu();const i=this.createBean(new pAe(e));this.activeDialog=this.createBean(new Xwe({title:this.beans.chartTranslation.translate("advancedSettings"),component:i,width:300,height:400,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var e;null===(e=Lo(i.getGui())[0])||void 0===e||e.focus()},closedCallback:()=>{this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=void 0,null===t||void 0===t||t.focus({preventScroll:!0})}})),this.activeMenu=i}hideMenu(){this.activeDialog&&this.destroyBean(this.activeDialog)}destroy(){this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=this.destroyBean(this.activeDialog),super.destroy()}},pAe=class extends Ra{constructor(e){super('<div class="ag-chart-advanced-settings"></div>'),this.chartMenuContext=e}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new hAe(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(e){if(e.defaultPrevented)return;e.preventDefault();const t=e.shiftKey,i=this.advancedSettingsPanel.getGui(),n=No(this.beans,i,!1,t);if(n)n.focus();else{const e=Lo(i);e.length&&e[t?e.length-1:0].focus()}}},gAe=class extends Si{constructor(){super(...arguments),this.beanName="chartMenuListFactory"}wireBeans(e){this.popupSvc=e.popupSvc,this.chartMenuSvc=e.chartMenuSvc,this.chartTranslation=e.chartTranslation}showMenuList(e){const{eventSource:t,showMenu:i,chartMenuContext:n}=e,o=this.chartMenuSvc.doChartToolPanelsExist(n.chartController),s=this.mapWithStockItems(this.getMenuItems(n.chartController,o),n,i,t,o);if(!s.length)return;const r=this.createBean(new mAe(s));this.activeChartMenuList=r;let a=-1,l="left";this.gos.get("enableRtl")&&(a=1,l="right");const d=r.getGui();this.popupSvc.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(r),this.activeChartMenuList=void 0,Ft(this.beans)&&t.focus({preventScroll:!0})},afterGuiAttached:e=>r.afterGuiAttached(e),positionCallback:()=>{this.popupSvc.positionPopupByComponent({type:"chartMenu",eventSource:t,ePopup:d,alignSide:l,nudgeX:4*a,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(e,t){const i=[...t?["chartEdit"]:[],...e.isEnterprise()?["chartAdvancedSettings"]:[],e.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],n=this.gos.get("chartMenuItems");return n?Array.isArray(n)?n:n(this.gos.addGridCommonParams({defaultItems:i})):i}mapWithStockItems(e,t,i,n,o){if(!e)return[];const s=[];return e.forEach((e=>{let r;if(r="string"===typeof e?this.getStockMenuItem(e,t,i,n,o):l({},e),!r)return;const{subMenu:a}=r;Array.isArray(a)&&(r.subMenu=this.mapWithStockItems(a,t,i,n,o)),s.push(r)})),s}getStockMenuItem(e,t,i,n,o){switch(e){case"chartEdit":return o?this.createMenuItem(this.chartTranslation.translate("chartEdit"),"chartsMenuEdit",i):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslation.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",(()=>this.chartMenuSvc.openAdvancedSettings(t,n)));case"chartUnlink":return t.chartController.isChartLinked()?this.createMenuItem(this.chartTranslation.translate("chartUnlink"),"unlinked",(()=>this.chartMenuSvc.toggleLinked(t))):null;case"chartLink":return t.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslation.translate("chartLink"),"linked",(()=>this.chartMenuSvc.toggleLinked(t)));case"chartDownload":return this.createMenuItem(this.chartTranslation.translate("chartDownload"),"chartsDownload",(()=>this.chartMenuSvc.downloadChart(t)))}return null}createMenuItem(e,t,i){return{name:e,icon:Wr(t,this.beans,null),action:i}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}},mAe=class extends En{constructor(e){super('\n            <div data-ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>\n        '),this.menuItems=e,this.eChartsMenu=Tn}postConstruct(){this.mainMenuList=this.createManagedBean(new aMe(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var e;null===(e=this.hidePopupFunc)||void 0===e||e.call(this)}afterGuiAttached(e){let{hidePopup:t}=e;t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),Po(this.mainMenuList.getGui())}},vAe=class extends Si{constructor(){super(...arguments),this.beanName="chartCrossFilterSvc"}wireBeans(e){this.colModel=e.colModel,this.valueSvc=e.valueSvc,this.filterManager=e.filterManager,bt(this.gos,e.rowModel)&&(this.clientSideRowModel=e.rowModel)}filter(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=null!==(t=null===(i=this.filterManager)||void 0===i?void 0:i.getFilterModel())&&void 0!==t?t:{};if(n)return void this.resetFilters(o);const s=this.extractFilterColId(e);this.isValidColumnFilter(s)?this.updateFilters(o,e,s):pt(154,{colId:s})}resetFilters(e){var t,i;Object.keys(e).length>0&&(null===(t=this.filterManager)||void 0===t||t.setFilterModel(null),null===(i=this.filterManager)||void 0===i||i.onFilterChanged({source:"api"}))}updateFilters(e,t,i){var n;const o=this.extractFilterColId(t),s=t.datum[o];if(void 0===s)return;const r=s.toString();if(t.event.metaKey||t.event.ctrlKey){const t=this.getCurrentGridValuesForCategory(i);let n;t.includes(r)?n=t.filter((e=>e!==r)):(n=t,n.push(r)),e[i]=this.getUpdatedFilterModel(i,n)}else{const t=[r];e={[i]:this.getUpdatedFilterModel(i,t)}}null===(n=this.filterManager)||void 0===n||n.setFilterModel(e)}getUpdatedFilterModel(e,t){return"agMultiColumnFilter"===this.getColumnFilterType(e)?{filterType:"multi",filterModels:[null,{filterType:"set",values:t}]}:{filterType:"set",values:t}}getCurrentGridValuesForCategory(e){var t;const i=[],n=this.getColumnById(e);return null===(t=this.clientSideRowModel)||void 0===t||t.forEachNodeAfterFilter((e=>{if(n&&!e.group){const t=this.valueSvc.getValue(n,e)+"";i.includes(t)||i.push(t)}})),i}extractFilterColId(e){return e.xKey||e.calloutLabelKey}isValidColumnFilter(e){e.indexOf("-filtered-out")&&(e=e.replace("-filtered-out",""));const t=this.getColumnFilterType(e);return"boolean"===typeof t?t:["agSetColumnFilter","agMultiColumnFilter"].includes(t)}getColumnFilterType(e){const t=this.getColumnById(e);if(t){return t.getColDef().filter}}getColumnById(e){return this.colModel.getCol(e)}},fAe=["chartUnlink","chartLink","chartDownload","chartMenu"],yAe={settings:"chartSettings",data:"chartData",format:"chartFormat"},bAe=class extends Si{constructor(){super(...arguments),this.beanName="chartMenuSvc"}wireBeans(e){this.advSettingsMenuFactory=e.advSettingsMenuFactory}downloadChart(e,t,i,n){e.chartController.getChartProxy().downloadChart(t,i,n)}toggleLinked(e){e.chartController.detachChartRange()}openAdvancedSettings(e,t){var i;null===(i=this.advSettingsMenuFactory)||void 0===i||i.showMenu(e,t)}hideAdvancedSettings(){var e;null===(e=this.advSettingsMenuFactory)||void 0===e||e.hideMenu()}getChartToolbarOptions(){const e=["chartMenu"],t=this.gos.getCallback("getChartToolbarItems");return t?t({defaultItems:e}).filter((e=>!!fAe.includes(e)||(pt(155,{option:e}),!1))):e}getChartToolPanels(e){var t;const i=this.gos.get("chartToolPanelsDef"),n=null===i||void 0===i||null===(t=i.panels)||void 0===t?void 0:t.map((e=>{const t=yAe[e];return t||pt(156,{panel:e}),t})).filter((e=>Boolean(e)));let o=null!==n&&void 0!==n?n:Object.values(yAe);e.isPivotChart()&&(o=o.filter((e=>"chartData"!==e)));const s=null===i||void 0===i?void 0:i.defaultToolPanel;return{panels:o,defaultPanel:s&&yAe[s]||o[0]}}doesChartToolbarExist(){return this.getChartToolbarOptions().length>0}doChartToolPanelsExist(e){const{panels:t}=this.getChartToolPanels(e);return t.length>0}},CAe={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Set Up",format:"Customize",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",polygon:"Polygon",square:"Square",cross:"Cross",diamond:"Diamond",plus:"Plus",triangle:"Triangle",heart:"Heart",orientation:"Orientation",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chartStyle:"Chart Style",title:"Title",chartTitles:"Titles",chartTitle:"Chart Title",chartSubtitle:"Subtitle",horizontalAxisTitle:"Horizontal Axis Title",verticalAxisTitle:"Vertical Axis Title",polarAxisTitle:"Polar Axis Title",titlePlaceholder:"Chart Title",background:"Background",font:"Font",weight:"Weight",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",stackedLineTooltip:"Stacked",normalizedLineTooltip:"100% Stacked",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",waterfallTooltip:"Waterfall",heatmapTooltip:"Heatmap",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",bar:"Bar",column:"Column",histogram:"Histogram",advancedSettings:"Advanced Settings",direction:"Direction",horizontal:"Horizontal",vertical:"Vertical",seriesGroupType:"Group Type",groupedSeriesGroupType:"Grouped",stackedSeriesGroupType:"Stacked",normalizedSeriesGroupType:"100% Stacked",legendEnabled:"Enabled",invalidColor:"Color value is invalid",groupedColumnFull:"Grouped Column",stackedColumnFull:"Stacked Column",normalizedColumnFull:"100% Stacked Column",groupedBarFull:"Grouped Bar",stackedBarFull:"Stacked Bar",normalizedBarFull:"100% Stacked Bar",stackedAreaFull:"Stacked Area",normalizedAreaFull:"100% Stacked Area",stackedLineFull:"Stacked Line",normalizedLineFull:"100% Stacked Line",customCombo:"Custom Combination",groupedColumn:"Grouped",stackedColumn:"Stacked",pie:"Pie",donut:"Donut",line:"Line",scatter:"Scatter",bubble:"Bubble",area:"Area",stackedArea:"Stacked",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",radialColumn:"Radial Column",radialBar:"Radial Bar",boxPlot:"Box Plot",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",heatmap:"Heatmap",columnLineCombo:"Column & Line",AreaColumnCombo:"Area & Column",ariaChartMenuClose:"Close Chart Edit Menu",ariaChartSelected:"Selected",group:"Group",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},xAe=class extends Si{constructor(){super(...arguments),this.beanName="chartTranslation"}translate(e){return this.getLocaleTextFunc()(e,CAe[e])}},wAe=e=>t=>void 0==t||e(t),SAe=e=>"string"===typeof e,MAe=e=>"boolean"===typeof e,DAe=e=>"object"===typeof e,kAe=(e,t)=>i=>"AG Grid - unable to update chart as invalid params supplied:  `".concat(e,": ").concat(i,"`, expected ").concat(t,"."),IAe=e=>"".concat(e," is not supported in AG Charts Community ('ag-charts-enterprise' hasn't been loaded). See ").concat("https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"," for more details."),AAe=["doughnut"],TAe=["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"];var EAe=wAe((e=>{if(fIe(t=e)||dIe(t))return!0;var t;if(function(e){return AAe.includes(e)}(e)){const t=vIe(e);return Ze("The chart type '".concat(e,"' has been deprecated. Please use '").concat(t,"' instead.")),t}return!1})),RAe=wAe((e=>"object"===typeof e)),LAe=wAe((e=>"object"===typeof e)),PAe=wAe((e=>"string"===typeof e||"function"===typeof e)),NAe=e=>({property:"chartType",validationFn:wAe((t=>e||!t||!function(e){return cIe(yIe(e),"isEnterprise")}(t))),warnMessage:e=>IAe("The '".concat(e,"' chart type"))}),FAe=e=>({property:"switchCategorySeries",validationFn:wAe((t=>{if(!t||e)return!0})),warnMessage:()=>IAe("'switchCategorySeries' has been ignored as it"),warnIfFixed:!0}),OAe=()=>[{property:"chartId",validationFn:SAe,warnMessage:kAe("chartId","string")},{property:"chartType",validationFn:EAe,warnMessage:kAe("chartType","ChartType")},{property:"chartThemeName",validationFn:SAe,warnMessage:kAe("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:RAe,warnMessage:kAe("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:MAe,warnMessage:kAe("unlinkChart","boolean")}],BAe=e=>[{property:"cellRange",validationFn:LAe,warnMessage:kAe("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:MAe,warnMessage:kAe("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:PAe,warnMessage:kAe("aggFunc","string or IAggFunc")},FAe(e)];function GAe(e,t){switch(e.type){case"rangeChartUpdate":return function(e,t){const i=[...OAe(),NAe(t),...BAe(t),{property:"seriesChartTypes",validationFn:e=>void 0===e||Array.isArray(e)&&e.every(DAe),warnMessage:kAe("seriesChartTypes","Array of SeriesChartType")}];return zAe(e,i,[...TAe,"cellRange","suppressChartRanges","switchCategorySeries","aggFunc","seriesChartTypes","seriesGroupType"],"UpdateRangeChartParams")}(e,t);case"pivotChartUpdate":return function(e){const t=[...OAe()];return zAe(e,t,[...TAe],"UpdatePivotChartParams")}(e);case"crossFilterChartUpdate":return function(e,t){const i=[...OAe(),...BAe(t)];return zAe(e,i,[...TAe,"cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}(e,t);default:return Ze("Invalid value supplied for 'type': ".concat(e.type,". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.")),!1}}function zAe(e,t,i,n){let o;for(const s of t){const{property:t,validationFn:i,warnMessage:n,warnIfFixed:r}=s;if(t in e){const s=e[t],a=i(s);if(!0===a)continue;if(!1===a)return Ze(n(s)),!1;o=o||l({},e),o[t]=a,r&&Ze(n(s))}}if(i)for(const s of Object.keys(e))if(!i.includes(s))return Ze("Unexpected property supplied. ".concat(n," does not contain: `").concat(s,"`.")),!1;return o||!0}var _Ae=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],VAe=class extends Si{constructor(e){super(),this.model=e,this.isEnterprise=()=>this.agChartsExports.isEnterprise}wireBeans(e){this.rangeSvc=e.rangeSvc,this.agChartsExports=e.agChartsExports}postConstruct(){this.setChartRange(),this.model.unlinked&&this.rangeSvc&&this.rangeSvc.setCellRanges([]);const e=this.updateForGridChange.bind(this,{});this.addManagedEventListeners({cellSelectionChanged:e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()},columnMoved:e,columnPinned:e,columnVisible:e,columnRowGroupChanged:e,modelUpdated:e,cellValueChanged:this.updateForDataChange.bind(this)})}update(e){if(!this.validUpdateType(e))return!1;const t=GAe(e,this.agChartsExports.isEnterprise);if(!t)return!1;const i=!0===t?e:t;return this.applyValidatedChartParams(i),!0}applyValidatedChartParams(e){var t,i,n,o,s,r,a,d,c;const{chartId:h,chartType:u,chartThemeName:p,unlinkChart:g}=e,m=l({},{chartId:h,pivotChart:this.model.pivotChart,chartType:null!==u&&void 0!==u?u:this.model.chartType,chartThemeName:null!==p&&void 0!==p?p:this.model.chartThemeName,unlinkChart:null!==g&&void 0!==g?g:this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1});switch(e.type){case"rangeChartUpdate":m.cellRange=null!==(t=this.createCellRange(e))&&void 0!==t?t:this.model.suppliedCellRange,m.switchCategorySeries=null!==(i=e.switchCategorySeries)&&void 0!==i?i:this.model.switchCategorySeries,m.aggFunc=null!==(n=e.aggFunc)&&void 0!==n?n:this.model.aggFunc,m.seriesChartTypes=e.seriesChartTypes,m.suppressChartRanges=null!==(o=e.suppressChartRanges)&&void 0!==o?o:this.model.suppressChartRanges,m.seriesGroupType=null!==(s=e.seriesGroupType)&&void 0!==s?s:this.model.seriesGroupType;break;case"crossFilterChartUpdate":m.cellRange=null!==(r=this.createCellRange(e))&&void 0!==r?r:this.model.suppliedCellRange,m.switchCategorySeries=!1,m.aggFunc=null!==(a=e.aggFunc)&&void 0!==a?a:this.model.aggFunc,m.crossFiltering=!0,m.suppressChartRanges=null!==(d=e.suppressChartRanges)&&void 0!==d?d:this.model.suppressChartRanges;break;case"pivotChartUpdate":m.switchCategorySeries=!1}this.model.updateModel(m);m.unlinkChart||m.suppressChartRanges?null===(c=this.rangeSvc)||void 0===c||c.setCellRanges([]):this.setChartRange()}updateForGridChange(e){if(this.model.unlinked)return;const{maintainColState:t,setColsFromRange:i}=null!==e&&void 0!==e?e:{};this.model.updateCellRanges({maintainColState:t,setColsFromRange:i}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e){this.model.updateCellRanges(e),this.model.updateData(),e.skipAnimation&&this.getChartProxy().getChartRef().skipAnimations(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(e){this.chartProxy.updateThemeOverrides(e)}getChartUpdateParams(e){const t=this.getSelectedValueColState().map((e=>({colId:e.colId,displayName:e.displayName}))),i=this.getChartData(),n=this.getSelectedDimensions(),o={data:i,groupData:this.model.groupChartData,grouping:this.isGrouping(),categories:n.map((e=>{var t;return{id:e.colId,name:e.displayName,chartDataType:null!==(t=this.model.categoryAxisType)&&void 0!==t?t:this.model.getChartDataType(e.colId)}})),fields:t,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e,seriesGroupType:this.model.seriesGroupType};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(o):o}invertCategorySeriesParams(e){const[t]=e.categories,i=[{id:UIe,name:""}],n=e.data.map(((e,i)=>{const n="".concat(t.id,":").concat(i),o=e[t.id];return{colId:n,displayName:null==o?"":String(o)}})),o=e.fields.map((i=>{const n={[UIe]:i.displayName};for(const[o,s]of e.data.entries()){const e="".concat(t.id,":").concat(o),r=s[i.colId];n[e]=r}return n}));return l(l({},e),{},{categories:i,fields:n,data:o})}getChartModel(){const e=this.model.pivotChart?"pivot":"range",t=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t,seriesGroupType:this.model.seriesGroupType}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.updateMultiSeriesAndCategory(this.model.chartType,e),this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.model.categoryAxisType=void 0,this.model.seriesGroupType=void 0,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries&&!this.model.isGrouping()}switchCategorySeries(e){wIe(this.getChartType())&&(this.model.switchCategorySeries=e,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(e,t){this.model.aggFunc!==e&&(this.model.aggFunc=e,t||(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(e,t){var i,n;const o=(e,t)=>{let i=0;for(const n of e)n.selected&&(i>=t?n.selected=!1:i++);0===i&&(e[0].selected=!0)},s=CIe(t),r=xIe(t),a=null!=s&&(null!==(i=CIe(e))&&void 0!==i?i:100)>(null!==s&&void 0!==s?s:100),l=null!=r&&(null!==(n=xIe(e))&&void 0!==n?n:100)>(null!==r&&void 0!==r?r:100);a&&o(this.model.dimensionColState,s),l&&o(this.model.valueColState,r),(a||l)&&(this.model.resetCellRanges(a,l),this.setChartRange(!0))}setChartThemeName(e,t){this.model.chartThemeName=e,t||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gos.get("chartThemes")||_Ae}getThemes(){return this.getThemeNames().map((e=>{const t=DIe(e,this.agChartsExports._Theme)?e:this.chartProxy.lookupCustomChartTheme(e);return this.agChartsExports._Theme.getChartTheme(t)}))}getPalettes(){return this.getThemes().map((e=>e.palette))}getThemeTemplateParameters(){return this.getThemes().map((e=>e.getTemplateParameters()))}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter((e=>e.selected))}getSelectedDimensions(){return this.model.getSelectedDimensions()}displayNameMapper(e){const{column:t}=e;if(t)e.displayName=this.model.getColDisplayName(t,this.model.isPivotMode());else{const i=this.model.colNames[e.colId];e.displayName=i?i.join(" - "):this.model.getColDisplayName(t)}return e}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.rangeSvc||this.model.suppressChartRanges||this.model.unlinked||this.rangeSvc.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeSvc&&this.rangeSvc.setCellRanges([]):this.updateForGridChange(),this.dispatchLocalEvent({type:"chartLinkedChanged"})}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return["scatter","bubble"].includes(this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(e){return this.model.isComboChart(e)}updateSeriesChartType(e,t,i){const n=this.model.comboChartModel.seriesChartTypes.find((t=>t.colId===e));if(n){const e="customCombo"!==this.model.chartType;e&&(this.model.chartType="customCombo");const o=n.chartType;null!=t&&(n.chartType=t),null!=i&&(n.secondaryAxis=i),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),e&&this.dispatchLocalEvent({type:"chartTypeChanged"}),o!==t&&this.dispatchLocalEvent({type:"chartSeriesChartTypeChanged"}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map((e=>e.colId));return this.getSeriesChartTypes().filter((t=>e.includes(t.colId)))}getChartSeriesTypes(e){const t=null!==e&&void 0!==e?e:this.getChartType();return this.isComboChart(t)?["line","bar","area"]:[yIe(t)]}getChartSeriesType(){const e=this.getSeriesChartTypes();if(0===e.length)return"bar";const t=e[0].chartType;return"columnLineCombo"===t?"bar":"areaColumnCombo"===t?"area":yIe(t)}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((e=>e))}createCellRange(e){var t;return e.cellRange&&(null===(t=this.rangeSvc)||void 0===t?void 0:t.createPartialCellRangeFromRangeParams(e.cellRange,!0))}validUpdateType(e){var t;if(!e.type)return pt(136),!1;const i={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},n=null!==(t=Object.keys(i).find((e=>i[e]())))&&void 0!==t?t:"Range Chart",o=e.type==="".concat(n[0].toLowerCase()).concat(n.slice(1).replace(/ /g,""),"Update");return o||pt(137,{currentChartType:n,type:e.type}),o}getCellRangeParams(){const e=this.getCellRanges(),t=e[0],i=t&&t.startRow||null,n=t&&t.endRow||null;return{rowStartIndex:i&&i.rowIndex,rowStartPinned:i&&i.rowPinned,rowEndIndex:n&&n.rowIndex,rowEndPinned:n&&n.rowPinned,columns:e.reduce(((e,t)=>e.concat(t.columns.map((e=>e.getId())))),[])}}setCategoryAxisType(e){this.model.categoryAxisType=e,this.raiseChartModelUpdateEvent()}getSeriesGroupType(){var e;return null!==(e=this.model.seriesGroupType)&&void 0!==e?e:this.chartProxy.getSeriesGroupType()}setSeriesGroupType(e){this.model.seriesGroupType=e,this.raiseChartModelUpdateEvent()}raiseChartModelUpdateEvent(){this.dispatchLocalEvent({type:"chartModelUpdate"})}raiseChartUpdatedEvent(){this.dispatchLocalEvent({type:"chartUpdated"})}raiseChartApiUpdateEvent(){this.dispatchLocalEvent({type:"chartApiUpdate"})}raiseChartOptionsChangedEvent(){const{chartId:e,chartType:t}=this.getChartModel();this.eventSvc.dispatchEvent({type:"chartOptionsChanged",chartId:e,chartType:t,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()})}raiseChartRangeSelectionChangedEvent(){this.eventSvc.dispatchEvent({type:"chartRangeSelectionChanged",id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()})}destroy(){super.destroy(),this.rangeSvc&&this.rangeSvc.setCellRanges([])}},HAe=class extends EIe{constructor(e){super(e)}getAxes(e){const t=[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const e=t[1];e.label=l(l({},e.label),{},{formatter:e=>Math.round(e.value)+"%"})}return t}getSeries(e){const[t]=e.categories,i=e.fields.map((e=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:e.colId,yName:e.displayName,normalizedTo:"normalizedArea"===this.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)})));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,e):i}isNormalised(){return!this.crossFiltering&&"normalizedArea"===this.chartType}};function WAe(e,t){const i=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return t?"rgba(".concat(i,", ").concat(n,", ").concat(o,", ").concat(t,")"):"rgba(".concat(i,", ").concat(n,", ").concat(o,")")}var jAe=new Set(["bar","groupedBar","stackedBar","normalizedBar"]),UAe=class extends EIe{constructor(e){super(e)}getAxes(e){const t=[{type:this.getXAxisType(e),position:this.isHorizontal()?"left":"bottom"},{type:"number",position:this.isHorizontal()?"bottom":"left"}];if(this.isNormalised()){const e=t[1];e.label=l(l({},e.label),{},{formatter:e=>Math.round(e.value)+"%"})}return t}getSeries(e){const[t]=e.categories,i=e.fields.map((e=>({type:this.standaloneChartType,direction:this.isHorizontal()?"horizontal":"vertical",stacked:this.crossFiltering||uIe(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:t.id,xName:t.name,yKey:e.colId,yName:e.displayName})));return this.crossFiltering?this.extractCrossFilterSeries(i):i}extractCrossFilterSeries(e){const t=this.getChartPalette(),i=(e,i)=>{var n,o;return l(l({},e),{},{highlightStyle:{item:{fill:void 0}},fill:null===t||void 0===t||null===(n=t.fills)||void 0===n?void 0:n[i],stroke:null===t||void 0===t||null===(o=t.strokes)||void 0===o?void 0:o[i],listeners:{nodeClick:this.crossFilterCallback}})},n=e=>{const t=e.yKey+"-filtered-out";return l(l({},e),{},{yKey:t,fill:WAe(e.fill,"0.3"),stroke:WAe(e.stroke,"0.3"),showInLegend:!1})},o=[];for(let s=0;s<e.length;s++){const t=e[s];o.push(i(t,s)),o.push(n(i(t,s)))}return o}isNormalised(){return!this.crossFiltering&&["normalizedColumn","normalizedBar"].includes(this.chartType)}isHorizontal(){return jAe.has(this.chartType)}},KAe=class extends EIe{constructor(e){super(e)}getAxes(e){const t=[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const e=t[1];e.label=l(l({},e.label),{},{formatter:e=>Math.round(e.value)+"%"})}return t}getSeries(e){const[t]=e.categories,i=["normalizedLine","stackedLine"].includes(this.chartType),n=e.fields.map((e=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:e.colId,yName:e.displayName,normalizedTo:i&&this.isNormalised()?100:void 0,stacked:i})));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n}isNormalised(){return!this.crossFiltering&&["normalizedLine"].includes(this.chartType)}},YAe=class extends EIe{constructor(e){super(e)}getAxes(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(e){const[t]=e.categories,i=this.isPaired(),n=this.getSeriesDefinitions(e.fields,i),o=t.id===UIe?void 0:t,s=n.map((e=>{var t,i;if(null!==e&&void 0!==e&&e.sizeField){var n,s,r;return{type:"bubble",xKey:e.xField.colId,xName:null!==(n=e.xField.displayName)&&void 0!==n?n:void 0,yKey:e.yField.colId,yName:null!==(s=e.yField.displayName)&&void 0!==s?s:void 0,title:"".concat(e.yField.displayName," vs ").concat(e.xField.displayName),sizeKey:e.sizeField.colId,sizeName:null!==(r=e.sizeField.displayName)&&void 0!==r?r:"",labelKey:o?o.id:e.yField.colId,labelName:o?o.name:void 0}}return{type:"scatter",xKey:e.xField.colId,xName:null!==(t=e.xField.displayName)&&void 0!==t?t:void 0,yKey:e.yField.colId,yName:null!==(i=e.yField.displayName)&&void 0!==i?i:void 0,title:"".concat(e.yField.displayName," vs ").concat(e.xField.displayName),labelKey:o?o.id:e.yField.colId,labelName:o?o.name:void 0}}));return this.crossFiltering?this.extractCrossFilterSeries(s,e):s}extractCrossFilterSeries(e,t){const{data:i}=t,n=this.getChartPalette(),o=e=>"".concat(e,"-filtered-out"),s=e.map(((e,t)=>{var s,r;const a=null===n||void 0===n||null===(s=n.fills)||void 0===s?void 0:s[t],d=null===n||void 0===n||null===(r=n.strokes)||void 0===r?void 0:r[t];let c;if("bubble"===e.type){const{sizeKey:t}=e;c=((e,t)=>{const i=[1/0,-1/0];if(null!=t)for(const s of e){var n;const e=null!==(n=s[t])&&void 0!==n?n:s[o(t)];e<i[0]&&(i[0]=e),e>i[1]&&(i[1]=e)}if(i[0]<=i[1])return i})(i,t)}return l(l({},e),{},{fill:a,stroke:d,domain:c,highlightStyle:{item:{fill:"yellow"}},listeners:l(l({},e.listeners),{},{nodeClick:this.crossFilterCallback})})}));return[...s,...s.map((e=>{const{yKey:t,xKey:i}=e;let n={};return"bubble"===e.type&&(n={sizeKey:o(e.sizeKey)}),l(l(l({},e),n),{},{yKey:o(t),xKey:o(i),fillOpacity:.3,strokeOpacity:.3,showInLegend:!1,listeners:l(l({},e.listeners),{},{nodeClick:e=>{const t=e.datum[o(i)],n=l(l({},e),{},{xKey:i,datum:l(l({},e.datum),{},{[i]:t})});this.crossFilterCallback(n)}})})}))]}getSeriesDefinitions(e,t){if(e.length<2)return[];const i="bubble"===this.chartType;if(t)return i?e.map(((t,i)=>i%3===0?{xField:t,yField:e[i+1],sizeField:e[i+2]}:null)).filter((e=>e&&e.yField&&e.sizeField)):e.map(((t,i)=>i%2===0?{xField:t,yField:e[i+1]}:null)).filter((e=>e&&e.yField));const n=e[0];return i?e.map(((t,i)=>i%2===1?{xField:n,yField:t,sizeField:e[i+1]}:null)).filter((e=>e&&e.sizeField)):e.filter(((e,t)=>t>0)).map((e=>({xField:n,yField:e})))}},ZAe=class extends EIe{constructor(e){super(e)}getAxes(e){const t=e?e.fields:[],i=new Map(t.map((e=>[e.colId,e]))),{primaryYKeys:n,secondaryYKeys:o}=this.getYKeys(t,e.seriesChartTypes),s=[{type:this.getXAxisType(e),position:"bottom"}];return n.length>0&&s.push({type:"number",keys:n,position:"left"}),o.length>0&&o.forEach((e=>{const t=i.get(e);if(!(t&&t.colId===e))return;const n={type:"number",keys:[e],position:"right"};s.push(n)})),s}getSeries(e){const{fields:t,seriesChartTypes:i}=e,[n]=e.categories;return t.map((e=>{const t=i.find((t=>t.colId===e.colId));if(t){const i=t.chartType,o=["groupedColumn","groupedBar"].includes(i)?{grouped:!0}:{};return l({type:yIe(i),xKey:n.id,yKey:e.colId,yName:e.displayName,stacked:["stackedArea","stackedColumn"].includes(i)},o)}}))}getYKeys(e,t){const i=[],n=[];return e.forEach((e=>{const o=e.colId,s=t.find((e=>e.colId===o));s&&(s.secondaryAxis?n.push(o):i.push(o))})),{primaryYKeys:i,secondaryYKeys:n}}};var XAe=class extends TIe{constructor(e){super(e)}getUpdateOptions(e,t){return l(l({},t),{},{data:this.crossFiltering?this.getCrossFilterData(e):e.data,series:this.getSeries(e)})}getSeries(e){const[t]=e.categories,i=e.fields.length,n={currentOffset:0,offsetAmount:i>1?20:40},o=this.getFields(e).map((e=>{const o={type:this.standaloneChartType,angleKey:e.colId,angleName:e.displayName,sectorLabelKey:e.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if("donut"===this.chartType||"doughnut"===this.chartType){var s;const{outerRadiusOffset:t,innerRadiusOffset:r}=function(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const i=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:i}}(n),a=e.displayName?{title:{text:e.displayName,showInLegend:i>1}}:void 0;return l(l(l({},o),{},{type:"donut",outerRadiusOffset:t,innerRadiusOffset:r},a),{},{calloutLine:{colors:null===(s=this.getChartPalette())||void 0===s?void 0:s.strokes}})}return o}));return this.crossFiltering?this.extractCrossFilterSeries(o):o}getCrossFilterData(e){const t=e.fields[0].colId,i="".concat(t,"-filtered-out");return e.data.map((e=>{const n=e[t]+e[i];return e["".concat(t,"-total")]=n,e[i]=1,e[t]=e[t]/n,e}))}extractCrossFilterSeries(e){const t=this.getChartPalette(),i=e=>l(l({},e),{},{legendItemKey:e.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:e.angleKey,angleKey:e.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),n=e[0],o=n.angleKey,s=i(n);return[((e,i)=>{var n,o,r,a;return l(l({},s),{},{radiusKey:i+"-filtered-out",fills:this.changeOpacity(null!==(n=null!==(o=e.fills)&&void 0!==o?o:null===t||void 0===t?void 0:t.fills)&&void 0!==n?n:[],.3),strokes:this.changeOpacity(null!==(r=null!==(a=e.strokes)&&void 0!==a?a:null===t||void 0===t?void 0:t.strokes)&&void 0!==r?r:[],.3),showInLegend:!1})})(i(n),o),s]}getFields(e){return"pie"===this.chartType?e.fields.slice(0,1):e.fields}changeOpacity(e,t){const i=this.agChartsExports._Util.Color;return e.map((e=>{const n=i.fromString(e);return new i(n.r,n.g,n.b,t).toHexString()}))}},qAe=class extends En{constructor(){super('<div class="ag-chart-menu" data-ref="eMenu"></div>'),this.eMenu=Tn,this.buttonListenersDestroyFuncs=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}updateParams(e){const{buttons:t}=e;this.createButtons(t)}createButtons(e){this.buttonListenersDestroyFuncs.forEach((e=>null===e||void 0===e?void 0:e())),this.buttonListenersDestroyFuncs=[];const t=this.eMenu;xe(t),e.forEach((e=>{const{buttonName:i,iconName:n,callback:o}=e,s=this.createButton(n),r=this.chartTranslation.translate(i+"ToolbarTooltip");r&&s instanceof HTMLElement&&(s.title=r),this.buttonListenersDestroyFuncs.push(...this.addManagedElementListeners(s,{click:e=>o(e.currentTarget)})),t.appendChild(s)}))}createButton(e){const t=Wr(e,this.beans);t.classList.add("ag-chart-menu-icon");const i=Tt(this.beans).createElement("button");return i.appendChild(t),i.classList.add("ag-chart-menu-toolbar-button"),i}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}},QAe=class extends En{constructor(e){super('<div class="ag-pill-select" role="presentation"></div>'),this.config=null!==e&&void 0!==e?e:{};const{selectedValueList:t,valueFormatter:i,valueList:n}=this.config;this.selectedValues=null!==t&&void 0!==t?t:[],this.valueList=null!==n&&void 0!==n?n:[],this.valueFormatter=null!==i&&void 0!==i?i:e=>Ho(e),this.registerCSS(".ag-pill-select{display:flex;flex-direction:column}:where(.ag-pill-select){.ag-column-drop-list{padding:0}.ag-select{padding-top:var(--ag-spacing)}.ag-picker-field-wrapper{background-color:transparent;border:0}.ag-picker-field-display{cursor:pointer;font-weight:500}.ag-picker-field-display,.ag-picker-field-icon{color:var(--ag-chart-menu-label-color)}}")}postConstruct(){const{ariaLabel:e,onValuesChange:t,dragSourceId:i}=this.config;this.dropZonePanel=this.createManagedBean(new $Ae({getValues:()=>this.selectedValues,setValues:e=>this.updateValues(e),isDraggable:()=>this.selectedValues.length>1},(e=>this.valueFormatter(e)),e,i));this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),null!=t&&(this.onValuesChange=t)}setValues(e,t){const{added:i,removed:n,updated:o}=this.getChanges(this.valueList,e);let s=!1;return(i.length||n.length||o.length)&&(s=!0),this.valueList=e,this.updateValues(t,s,!0),this}setValueFormatter(e){return this.valueFormatter=e,this}initSelect(){const e=this.createSelectOptions();if(!e.length)return!1;const{selectPlaceholder:t}=this.config;return this.eSelect=this.createBean(new Ma({options:e,placeholder:t,onValueChange:e=>this.addValue(e),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){const e=[],{maxSelection:t}=this.config;return t&&this.selectedValues.length>=t||this.valueList.forEach((t=>{this.selectedValues.includes(t)||e.push({value:t,text:this.valueFormatter(t)})})),e}addValue(e){this.dropZonePanel.addItem(e)}updateValues(e,t,i){var n,o;const s=this.selectedValues;this.selectedValues=e;const r=this.getChanges(s,e),a=t||r.added.length||r.removed.length,l=Lt(this.beans),d=null===(n=this.eSelect)||void 0===n?void 0:n.getGui().contains(l),c=null===(o=this.dropZonePanel)||void 0===o?void 0:o.getGui().contains(l);var h;i||(null===(h=this.onValuesChange)||void 0===h||h.call(this,r));const u=!!a&&!this.refreshSelect();var p,g;(this.dropZonePanel.refreshGui(),a&&d)&&(u?this.dropZonePanel.focusList(!0):null===(p=this.eSelect)||void 0===p||p.getFocusableElement().focus());c&&!e.length&&(null===(g=this.eSelect)||void 0===g||g.getFocusableElement().focus())}getChanges(e,t){return{added:t.filter((t=>!e.includes(t))),removed:e.filter((e=>!t.includes(e))),updated:t.filter(((t,i)=>e[i]!==t)),selected:t}}refreshSelect(){if(!this.eSelect)return this.initSelect();const e=this.createSelectOptions();return e.length?(this.eSelect.clearOptions().addOptions(e).setValue(void 0,!0),!0):(we(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}},JAe=class extends fMe{constructor(e,t,i,n,o,s){super(t,i,!1),this.value=e,this.valueFormatter=n,this.draggable=o,this.sourceId=s}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return is.ChartPanel}getDragSourceId(){return this.sourceId}isDraggable(){return this.draggable}},$Ae=class extends vMe{constructor(e,t,i,n){super(!1),this.model=e,this.valueFormatter=t,this.ariaLabel=i,this.sourceId=n}postConstruct(){super.init()}isItemDroppable(e,t){return this.isSourceEventFromTarget(t)||null!=this.sourceId&&this.sourceId===t.dragSource.sourceId}updateItems(e){this.model.setValues(e)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?"move":"notAllowed"}getAriaLabel(){return this.ariaLabel}createPillComponent(e,t,i){return new JAe(e,t,i,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(e){return[e.value]}isInterestedIn(e){return e===is.ChartPanel}},eTe=class extends En{constructor(e,t,i,n){super(n),this.chartController=e,this.allowMultipleSelection=t,this.maxSelection=i}wireBeans(e){this.chartTranslation=e.chartTranslation}addItem(e){this.groupComp.addItem(e)}createGroup(e,t,i,n,o){if(this.allowMultipleSelection){const o=e.filter((e=>e.selected));this.valuePillSelect=this.groupComp.createManagedBean(new QAe({valueList:e,selectedValueList:o,valueFormatter:t,selectPlaceholder:this.chartTranslation.translate(i),dragSourceId:n,onValuesChange:e=>this.onValueChange(e),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{const t=this.createValueSelectParams(e);t.onValueChange=t=>{e.forEach((e=>{e.selected=!1})),t.selected=!0,t.colId===UIe&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange({updatedColState:t,skipAnimation:null===o||void 0===o?void 0:o()})},this.valueSelect=this.groupComp.createManagedBean(new Ma(t)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(e){if(!this.valueSelect)return;const{options:t,value:i}=this.createValueSelectParams(e);this.valueSelect.clearOptions().addOptions(t).setValue(i,!0)}createValueSelectParams(e){let t;return{options:e.map((e=>{var i;const n=null!==(i=e.displayName)&&void 0!==i?i:"";return e.selected&&(t=e),{value:e,text:n}})),value:t}}onValueChange(e){let t,i,{added:n,updated:o,removed:s,selected:r}=e;const a=()=>{r.forEach(((e,t)=>{e.order=t})),i=!0};n.length?(t=n[0],t.selected=!0,a()):s.length?(t=s[0],t.selected=!1):o.length&&(a(),t=o[0]),t&&this.chartController.updateForPanelChange({updatedColState:t,resetOrder:i})}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}},tTe=class extends eTe{constructor(e,t,i,n,o){super(e,i,void 0,'<div id="categoriesGroup"></div>'),this.title=t,this.dimensionCols=n,this.isOpen=o}postConstruct(){this.groupComp=this.createBean(new mDe({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.createGroup(this.dimensionCols,(e=>{var t;return null!==(t=e.displayName)&&void 0!==t?t:""}),"categoryAdd","categorySelect",(()=>!this.chartController.getAggFunc())),this.createAggFuncControls(this.dimensionCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t;null===(t=this.valuePillSelect)||void 0===t||t.setValues(e,e.filter((e=>e.selected))),this.refreshValueSelect(e),this.refreshAggFuncControls(e,this.chartController.getAggFunc())}createAggFuncControls(e){const t=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new ia({label:this.chartTranslation.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:void 0!=t,onValueChange:e=>{var t,i;const n=e?"sum":void 0;this.chartController.setAggFunc(n),null===(t=this.aggFuncSelect)||void 0===t||t.setValue(n,!0),null===(i=this.aggFuncSelect)||void 0===i||i.setDisplayed(void 0!=n)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new Ma({options:[{value:"sum",text:this.chartTranslation.translate("sum")},{value:"first",text:this.chartTranslation.translate("first")},{value:"last",text:this.chartTranslation.translate("last")},{value:"min",text:this.chartTranslation.translate("min")},{value:"max",text:this.chartTranslation.translate("max")},{value:"count",text:this.chartTranslation.translate("count")},{value:"avg",text:this.chartTranslation.translate("avg")}],value:"string"===typeof t?t:void 0,onValueChange:e=>{this.chartController.setAggFunc(e)}}))),this.refreshAggFuncControls(e,t)}refreshAggFuncControls(e,t){var i,n,o,s;const r=e.filter((e=>e.selected)).some((e=>e.colId!==UIe));null===(i=this.aggFuncToggle)||void 0===i||i.setValue(void 0!=t),null===(n=this.aggFuncSelect)||void 0===n||n.setValue("string"===typeof t?t:void 0,!0),null===(o=this.aggFuncToggle)||void 0===o||o.setDisplayed(r),null===(s=this.aggFuncSelect)||void 0===s||s.setDisplayed(r&&void 0!=t)}clearAggFuncControls(){this.aggFuncToggle=this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}},iTe=class extends Si{constructor(e){super(),this.chartOptionsProxy=e}wireBeans(e){this.chartTranslation=e.chartTranslation}getDefaultColorPickerParams(e,t,i){return this.addValueParams(e,{label:this.chartTranslation.translate(null!==t&&void 0!==t?t:"color"),labelWidth:"flex",inputWidth:"flex",labelAlignment:"top",pickerGap:6},i)}getDefaultNumberInputParams(e,t,i){return this.addValueParams(e,{label:this.chartTranslation.translate(t),labelAlignment:"top",labelWidth:"flex",inputWidth:"flex",precision:null===i||void 0===i?void 0:i.precision,step:null===i||void 0===i?void 0:i.step,min:null===i||void 0===i?void 0:i.min,max:null===i||void 0===i?void 0:i.max},{parseInputValue:e=>{const t=Number(e);return isNaN(t)?void 0:t},formatInputValue:e=>null==e?"":"".concat(e)})}getDefaultSliderParams(e,t,i,n){var o;let s=null!==(o=this.chartOptionsProxy.getValue(e))&&void 0!==o?o:0;n&&Array.isArray(s)&&(s=s[0]);const r=this.getDefaultSliderParamsWithoutValueParams(s,t,i);return r.onValueChange=t=>this.chartOptionsProxy.setValue(e,n?[t]:t),r}getDefaultSliderParamsWithoutValueParams(e,t,i){return{label:this.chartTranslation.translate(t),minValue:0,maxValue:Math.max(e,i),textFieldWidth:45,value:"".concat(e)}}getDefaultCheckboxParams(e,t,i){const n=this.chartOptionsProxy.getValue(e),o={label:this.chartTranslation.translate(t),value:n,readOnly:null===i||void 0===i?void 0:i.readOnly,passive:null===i||void 0===i?void 0:i.passive};return o.onValueChange=t=>{this.chartOptionsProxy.setValue(e,"boolean"===typeof t?t:void 0)},o}getDefaultSelectParams(e,t,i){return this.getDefaultSelectParamsWithoutValueParams(t,i,this.chartOptionsProxy.getValue(e),(t=>{this.chartOptionsProxy.setValue(e,t)}))}getDefaultSelectParamsWithoutValueParams(e,t,i,n){return{label:this.chartTranslation.translate(e),labelAlignment:"top",options:t,pickerGap:6,value:i,onValueChange:n}}getDefaultFontPanelParams(e,t){const i=t=>"".concat(e,".").concat(t);return this.addEnableParams(i("enabled"),{name:this.chartTranslation.translate(t),suppressEnabledCheckbox:!1,chartMenuParamsFactory:this,keyMapper:i})}addValueParams(e,t,i){const n=this.chartOptionsProxy.getValue(e);return t.value=null!==i&&void 0!==i&&i.formatInputValue?i.formatInputValue(n):n,t.onValueChange=t=>{const n=null!==i&&void 0!==i&&i.parseInputValue?i.parseInputValue(t):t;this.chartOptionsProxy.setValue(e,n)},t}addEnableParams(e,t){var i;return t.enabled=null!==(i=this.chartOptionsProxy.getValue(e))&&void 0!==i&&i,t.onEnableChange=t=>this.chartOptionsProxy.setValue(e,t),t}getChartOptions(){return this.chartOptionsProxy}},nTe=class extends En{constructor(e,t){super(),this.chartMenuContext=e,this.isOpen=t,this.chartSpecificGroup=Tn,this.hasContent=!1}wireBeans(e){this.chartTranslation=e.chartTranslation,this.chartSvc=e.chartSvc}postConstruct(){const e={title:this.getTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen,items:[...this.createDirectionSelect(),this.createGroupTypeSelect()]};this.setTemplate('\n            <div id="chartSpecificGroup">\n                <ag-group-component data-ref="chartSpecificGroup"></ag-group-component>\n            </div>',[yDe],{chartSpecificGroup:e}),this.setDisplayed(this.hasContent)}refresh(){this.hasContent=!1,this.chartSpecificGroup.setTitle(this.getTitle()),this.updateDirectionSelect(),this.updateGroupTypeSelect(),this.setDisplayed(this.hasContent)}getTitle(){const e=this.chartMenuContext.chartController.getChartType();return this.chartTranslation.translate(SIe(e))}createDirectionSelect(){if(!this.chartSvc.isEnterprise())return[];const{chartOptionsService:e,chartController:t}=this.chartMenuContext,i=e.getSeriesOptionsProxy((()=>yIe(t.getChartType()))),n=this.createManagedBean(new iTe(i)),o=["horizontal","vertical"].map((e=>({value:e,text:this.chartTranslation.translate(e)}))),s=n.getDefaultSelectParams("direction","direction",o),r=s.onValueChange;return s.onValueChange=e=>{r(e),t.raiseChartModelUpdateEvent()},this.directionSelect=this.createManagedBean(new Ma(s)),this.updateDirectionSelect(),[this.directionSelect]}updateDirectionSelect(){const e=function(e){return cIe(yIe(e),"canSwitchDirection")}(this.chartMenuContext.chartController.getChartType());this.updateDisplayed(this.directionSelect,e)}createGroupTypeSelect(){const{chartController:e,chartMenuParamsFactory:t}=this.chartMenuContext;return this.groupTypeSelect=this.createManagedBean(new Ma(t.getDefaultSelectParamsWithoutValueParams("seriesGroupType",aIe.map((e=>({value:e,text:this.chartTranslation.translate("".concat(e,"SeriesGroupType"))}))),e.getSeriesGroupType(),(t=>e.setSeriesGroupType(t))))),this.updateGroupTypeSelect(),this.groupTypeSelect}updateGroupTypeSelect(){const e=["radialColumn","radialBar","nightingale"].includes(this.chartMenuContext.chartController.getChartType());this.updateDisplayed(this.groupTypeSelect,e)}updateDisplayed(e,t){null===e||void 0===e||e.setDisplayed(t),e&&(this.hasContent=this.hasContent||t)}},oTe=class extends En{constructor(e,t,i){super('<div id="seriesChartTypeGroup"></div>'),this.chartController=e,this.columns=t,this.isOpen=i,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.createSeriesChartTypeGroup(this.columns)}refresh(e){zi(this.getValidColIds(e),this.selectedColIds)?this.refreshComps():this.recreate(e)}recreate(e){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),xe(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=e,this.selectedColIds=[],this.clearComps(),this.postConstruct()}getValidColIds(e){const t=this.chartController.getSeriesChartTypes();return e.filter((e=>e.selected&&!!t.filter((t=>t.colId===e.colId))[0])).map((e=>{let{colId:t}=e;return t}))}createSeriesChartTypeGroup(e){this.seriesChartTypeGroupComp=this.createBean(new mDe({title:this.chartTranslation.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));const t=this.chartController.getSeriesChartTypes();e.forEach((e=>{if(!e.selected)return;const i=t.filter((t=>t.colId===e.colId))[0];if(!i)return;this.selectedColIds.push(e.colId);const n=this.seriesChartTypeGroupComp.createManagedBean(new mDe({title:e.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),o=this.seriesChartTypeGroupComp.createManagedBean(new Yr({label:this.chartTranslation.translate("secondaryAxis"),labelWidth:"flex",disabled:(e=>["groupedColumn","stackedColumn","stackedArea"].includes(e))(i.chartType),value:!!i.secondaryAxis,onValueChange:t=>this.chartController.updateSeriesChartType(e.colId,void 0,t)}));n.addItem(o);const s=["line","area","stackedArea","groupedColumn","stackedColumn"].map((e=>({value:e,text:this.chartTranslation.translate(SIe(e))}))),r=n.createManagedBean(new Ma({options:s,value:i.chartType,onValueChange:t=>this.chartController.updateSeriesChartType(e.colId,t)}));n.addItem(r),this.seriesChartTypeGroupComp.addItem(n),this.chartTypeComps.set(e.colId,r),this.secondaryAxisComps.set(e.colId,o)})),this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){const e=this.chartController.getSeriesChartTypes();this.selectedColIds.forEach((t=>{const i=e.find((e=>e.colId===t));if(!i)return;const n=this.chartTypeComps.get(t),o=this.secondaryAxisComps.get(t);null===n||void 0===n||n.setValue(i.chartType),null===o||void 0===o||o.setValue(!!i.secondaryAxis),null===o||void 0===o||o.setDisabled(this.isSecondaryAxisDisabled(i.chartType))}))}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(e){return["groupedColumn","stackedColumn","stackedArea"].includes(e)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}},sTe=class extends eTe{constructor(e,t,i,n,o,s,r){super(e,n,o,'<div id="seriesGroup"></div>'),this.chartOptionsService=t,this.title=i,this.valueCols=s,this.isOpen=r}postConstruct(){if(this.groupComp=this.createBean(new mDe({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){const e=this.groupComp.createManagedBean(new ia({label:this.chartTranslation.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:e=>{this.chartOptionsService.setPairedMode(!!e),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(e)}this.createGroup(this.valueCols,this.generateGetSeriesLabel(this.valueCols),"seriesAdd","seriesSelect"),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t,i;null===(t=this.valuePillSelect)||void 0===t||t.setValueFormatter(this.generateGetSeriesLabel(e)),null===(i=this.valuePillSelect)||void 0===i||i.setValues(e,e.filter((e=>e.selected))),this.refreshValueSelect(e)}generateGetSeriesLabel(e){if(!this.chartController.isActiveXYChart())return e=>{var t;return null!==(t=e.displayName)&&void 0!==t?t:""};const t=e.filter((e=>e.selected)),i="bubble"===this.chartController.getChartType(),n=this.chartOptionsService.getPairedMode(),o=new Map;return o.set(0,"X"),o.set(1,"Y"),o.set(2,"size"),e=>{var s;const r=null!==(s=e.displayName)&&void 0!==s?s:"";if(!e.selected)return r;const a=t.indexOf(e);if(-1===a)return r;let l;return l=n?o.get(a%(i?3:2)):0===a?"X":i&&a%2===0?"size":"Y","".concat(r," (").concat(l,")")}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}},rTe={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0},{type:"chartSpecific",isOpen:!0}]},aTe=class extends En{constructor(e){super('<div class="ag-chart-data-wrapper ag-scrollable-container"></div>'),this.chartMenuContext=e,this.isSwitchCategorySeriesToggled=!1,this.restoreSwitchCategorySeriesToggleFocus=!1,this.panels=[],this.chartController=e.chartController}wireBeans(e){this.chartTranslation=e.chartTranslation,this.chartSvc=e.chartSvc}postConstruct(){this.createSwitchCategorySeriesToggle(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.updatePanels();const e=this.updatePanels.bind(this);this.addManagedListeners(this.chartController,{chartModelUpdate:e,chartApiUpdate:e})}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){const e=this.chartType,t=this.isSwitchCategorySeriesToggled,{dimensionCols:i,valueCols:n}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();const o=this.isSwitchCategorySeriesToggled!==t;var s,r,a,l;this.canRefresh(e,this.chartType)&&!o?(null===(s=this.categoriesDataPanel)||void 0===s||s.refresh(i),null===(r=this.seriesDataPanel)||void 0===r||r.refresh(n),null===(a=this.seriesChartTypePanel)||void 0===a||a.refresh(n),null===(l=this.chartSpecificPanel)||void 0===l||l.refresh()):this.recreatePanels(i,n);const d=wIe(this.chartType)&&this.chartSvc.isEnterprise()&&!this.chartController.isGrouping();var c;(le(this.switchCategorySeriesToggle.getGui(),d),o)&&(null===(c=this.switchCategorySeriesToggle)||void 0===c||c.setValue(this.chartController.isCategorySeriesSwitched()));this.restoreSwitchCategorySeriesToggleFocus&&(this.restoreSwitchCategorySeriesToggleFocus=!1,d&&this.switchCategorySeriesToggle.getFocusableElement().focus())}canRefresh(e,t){if(void 0===e)return!1;if(e===t)return!0;const i=e=>["columnLineCombo","areaColumnCombo","customCombo"].includes(e);return!(!i(e)||!i(t))}recreatePanels(e,t){var i,n;this.clearPanelComponents();const{chartType:o}=this;if(!o)return;const s=this.chartController.isCategorySeriesSwitched();null===(i=this.getDataPanelDef().groups)||void 0===i||i.forEach((i=>{let{type:n,isOpen:r}=i;n===(s?"series":"categories")?(this.categoriesDataPanel=this.createBean(new tTe(this.chartController,this.getCategoryGroupTitle(s),this.getCategoryGroupMultipleSelect(o,s),e,r)),this.panels.push(this.categoriesDataPanel)):n===(s?"categories":"series")?(this.seriesDataPanel=this.createBean(new sTe(this.chartController,this.chartMenuContext.chartOptionsService,this.getSeriesGroupTitle(s),this.getSeriesGroupMultipleSelect(o,s),this.getSeriesGroupMaxSelection(o,s),t,r)),this.panels.push(this.seriesDataPanel)):"seriesChartType"===n?this.chartController.isComboChart()&&(this.seriesChartTypePanel=this.createBean(new oTe(this.chartController,t,r)),this.panels.push(this.seriesChartTypePanel)):"chartSpecific"===n?(this.chartSpecificPanel=this.createBean(new nTe(this.chartMenuContext,r)),this.panels.push(this.chartSpecificPanel)):pt(144,{type:n})})),null===(n=s?this.categoriesDataPanel:this.seriesDataPanel)||void 0===n||n.addItem(this.switchCategorySeriesToggle.getGui()),this.addPanelComponents()}addPanelComponents(){if(!this.panels.length)return;const e=Tt(this.beans).createDocumentFragment();for(const t of this.panels)t.addCssClass("ag-chart-data-section"),e.appendChild(t.getGui());this.getGui().appendChild(e)}clearPanelComponents(){const e=this.getGui();this.panels.forEach((t=>{e.removeChild(t.getGui()),this.destroyBean(t)})),this.panels=[]}getDataPanelDef(){var e,t;return null!==(e=null===(t=this.gos.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel)&&void 0!==e?e:rTe}getCategoryGroupTitle(e){return e?this.chartTranslation.translate("seriesLabels"):this.chartTranslation.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(e,t){return!t&&1!==CIe(e)}getSeriesGroupTitle(e){return e?this.chartTranslation.translate("categoryValues"):this.chartTranslation.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(e,t){return 1!==this.getSeriesGroupMaxSelection(e,t)}getSeriesGroupMaxSelection(e,t){if(!t)return xIe(e)}createSwitchCategorySeriesToggle(){this.switchCategorySeriesToggle=this.createManagedBean(new ia({label:this.chartTranslation.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartController.isCategorySeriesSwitched(),onValueChange:e=>{this.restoreSwitchCategorySeriesToggleFocus=!0,this.chartController.switchCategorySeries(e)}}))}},lTe=class extends jr{constructor(e){super(e,'<div class="ag-angle-select">\n            <div data-ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div class="ag-angle-select-field">\n                    <div data-ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div data-ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field data-ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',[la]),this.eLabel=Tn,this.eParentCircle=Tn,this.eChildCircle=Tn,this.eAngleValue=Tn,this.radius=0,this.offsetX=0,this.offsetY=0}wireBeans(e){this.dragSvc=e.dragSvc}postConstruct(){var e;super.postConstruct();const{value:t,onValueChange:i}=this.config;null!=t&&this.setValue(t,void 0,!0),null!=i&&this.onValueChange(i),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:()=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:e=>this.calculateAngleDrag(e),onDragStop:()=>{}},null===(e=this.dragSvc)||void 0===e||e.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue("".concat(this.degrees)).onValueChange((e=>{null!=e&&""!==e||(e="0"),e=this.eAngleValue.normalizeValue(e);let t=parseFloat(e);t>180&&(t-=360),this.setValue(t)})),this.updateNumberInput(),ze(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListeners(this,{fieldValueChanged:()=>{this.eAngleValue.getInputElement().contains(Lt(this.beans))||this.updateNumberInput()}})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const t=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,n=t.width/2,o=t.height/2;i.style.left="".concat(n+8*Math.cos(e),"px"),i.style.top="".concat(o+8*Math.sin(e),"px")}calculatePolar(){const e=this.offsetX,t=this.offsetY,i=Math.atan2(t,e);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(i)}calculateCartesian(){const e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const t=this.parentCircleRect,i=t.width/2,n=t.height/2,o=e.clientX-t.left-i,s=e.clientY-t.top-n,r=Math.atan2(s,o);this.setValue(r,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e}getRadius(){return this.radius}setRadius(e){return this.radius===e||(this.radius=e,this.calculateCartesian()),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>{e(this.degrees)}}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t,i){let n;return n=t?e:this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(n),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(n),i||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}setWidth(e){return Ee(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){var e;null===(e=this.dragSvc)||void 0===e||e.removeDragSource(this.dragListener),super.destroy()}};var dTe=class extends En{constructor(e){super(),this.params=e,this.fontGroup=Tn,this.activeComps=[],this.chartOptions=e.chartMenuParamsFactory.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{cssIdentifier:e="charts-format-sub-level",name:t,enabled:i,onEnableChange:n,suppressEnabledCheckbox:o,chartMenuParamsFactory:s,keyMapper:r}=this.params,a={cssIdentifier:e,direction:"vertical",suppressOpenCloseIcons:!0,title:t,enabled:i,suppressEnabledCheckbox:!0,onEnableChange:e=>{n&&n(e)},useToggle:!o};this.setTemplate('<div class="ag-font-panel">\n        <ag-group-component data-ref="fontGroup">\n            <ag-select data-ref="familySelect"></ag-select>\n            <ag-select data-ref="weightStyleSelect"></ag-select>\n            <div class="ag-charts-font-size-color">\n                <ag-select data-ref="sizeSelect"></ag-select>\n                <ag-color-picker data-ref="colorPicker"></ag-color-picker>\n            </div>\n        </ag-group-component>\n    </div>',[yDe,Da,nAe],{fontGroup:a,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:s.getDefaultColorPickerParams(r("color"))}),this.addOrRemoveCssClass("ag-font-panel-no-header",!t)}addItem(e,t){t?this.fontGroup.prependItem(e):this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}getFamilySelectParams(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],t=this.getInitialFontValue("fontFamily");let i=e[0];if(t){const o=e.map((e=>e.toLowerCase())).indexOf(t.toLowerCase());if(o>=0)i=e[o];else{const o=(n=t)[0].toUpperCase()+n.substring(1).toLowerCase();e.push(o),i=o}}var n;const o=e.sort().map((e=>({value:e,text:e})));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("font",o,"".concat(i),(e=>this.setFont({fontFamily:e})))}getSizeSelectParams(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],t=this.getInitialFontValue("fontSize");e.includes(t)||e.push(t);const i=e.sort(((e,t)=>e-t)).map((e=>({value:"".concat(e),text:"".concat(e)})));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("size",i,"".concat(t),(e=>this.setFont({fontSize:parseInt(e,10)})))}getWeightStyleSelectParams(){var e,t;const i=null!==(e=this.getInitialFontValue("fontWeight"))&&void 0!==e?e:"normal",n=null!==(t=this.getInitialFontValue("fontStyle"))&&void 0!==t?t:"normal",o=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let s=o.find((e=>e.weight===i&&e.style===n));s||(s={name:"predefined",weight:i,style:n},o.unshift(s));const r=o.map((e=>({value:e.name,text:this.chartTranslation.translate(e.name)})));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("weight",r,s.name,(e=>{const t=o.find((t=>t.name===e));this.setFont({fontWeight:t.weight,fontStyle:t.style})}))}destroyActiveComps(){this.activeComps.forEach((e=>{we(e.getGui()),this.destroyBean(e)}))}destroy(){this.destroyActiveComps(),super.destroy()}setFont(e){const{keyMapper:t}=this.params;Object.entries(e).forEach((e=>{let[i,n]=e;n&&this.chartOptions.setValue(t(i),n)}))}getInitialFontValue(e){const{keyMapper:t}=this.params;return this.chartOptions.getValue(t(e))}},cTe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartMenuUtils:e}=this,t=e.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("ticks"),suppressEnabledCheckbox:!0,useToggle:!0}),i=e.getDefaultColorPickerParams("tick.stroke"),n=e.getDefaultSliderParams("tick.width","width",10),o=e.getDefaultSliderParams("tick.size","length",30);this.setTemplate('<div>\n            <ag-group-component data-ref="axisTicksGroup">\n                <ag-color-picker data-ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider data-ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider data-ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,nAe,aAe],{axisTicksGroup:t,axisTicksColorPicker:i,axisTicksWidthSlider:n,axisTicksSizeSlider:o})}},hTe=class extends En{constructor(e){super(),this.chartMenuUtils=e,this.chartOptions=e.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("gridLines"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.getGridLineColorPickerParams("color"),i=this.getGridLineWidthSliderParams("thickness"),n=this.getGridLineDashSliderParams("lineDash");this.setTemplate('<div>\n            <ag-group-component data-ref="gridLineGroup">\n                <ag-color-picker data-ref="gridLineColorPicker"></ag-color-picker>\n                <ag-slider data-ref="gridLineWidthSlider"></ag-slider>\n                <ag-slider data-ref="gridLineLineDashSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,nAe,aAe],{gridLineGroup:e,gridLineColorPicker:t,gridLineWidthSlider:i,gridLineLineDashSlider:n})}getGridLineColorPickerParams(e){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",e,{formatInputValue:e=>{var t;return null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.stroke},parseInputValue:e=>{var t;const i=null!==(t=this.chartOptions.getValue("gridLine.style"))&&void 0!==t?t:[];return 0===i.length?[{stroke:e,lineDash:[]}]:[l(l({},i[0]),{},{stroke:e})]}})}getGridLineWidthSliderParams(e){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",e,10)}getGridLineDashSliderParams(e){var t;const i=this.chartOptions.getValue("gridLine.style"),n=null===i||void 0===i||null===(t=i[0])||void 0===t||null===(t=t.lineDash)||void 0===t?void 0:t[0],o=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(null!==n&&void 0!==n?n:0,e,30);return o.onValueChange=e=>{const t=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[e],stroke:t}])},o}},uTe=class extends En{constructor(e,t){super(),this.axisType=e,this.options=t,this.axisGroup=Tn,this.axisTypeSelect=Tn,this.axisPositionSelect=Tn,this.axisTimeFormatSelect=Tn,this.activePanels=[],this.axisLabelUpdateFuncs=[];const{chartOptionsService:i,seriesType:n}=t;this.chartOptionsSeriesProxy=i.getSeriesOptionsProxy((()=>n))}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){var e;const{isExpandedOnInit:t,chartOptionsService:i,chartController:n,registerGroupComponent:o}=this.options,s=this.axisType,r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(s),expanded:t,suppressEnabledCheckbox:!0},a=i.getCartesianAxisOptionsProxy(this.axisType),l=this.createManagedBean(new iTe(a)),d=this.createManagedBean(new iTe(i.getCartesianAxisThemeOverridesProxy(this.axisType))),c=this.getAxisTypeSelectParams(l,i.getCartesianAxisAppliedThemeOverridesProxy(this.axisType)),h=this.getAxisPositionSelectParams(l),u=this.getAxisTimeFormatSelectParams(l),p=this.getAxisColorInputParams(d),g=this.getAxisLineWidthSliderParams(d);this.setTemplate('<div>\n            <ag-group-component data-ref="axisGroup">\n                <ag-select data-ref="axisTypeSelect"></ag-select>\n                <ag-select data-ref="axisTimeFormatSelect"></ag-select>\n                <ag-select data-ref="axisPositionSelect"></ag-select>\n                <ag-color-picker data-ref="axisColorInput"></ag-color-picker>\n                <ag-slider data-ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,Da,nAe,aAe],{axisGroup:r,axisTypeSelect:null!==c&&void 0!==c?c:void 0,axisPositionSelect:null!==h&&void 0!==h?h:void 0,axisTimeFormatSelect:null!==u&&void 0!==u?u:void 0,axisColorInput:p,axisLineWidthSlider:g}),o(this.axisGroup),this.axisTypeSelect.setDisplayed(!(null===(e=c.options)||void 0===e||!e.length)),h||this.removeTemplateComponent(this.axisPositionSelect);const m=()=>{const e="time"===a.getValue("type");le(this.axisTimeFormatSelect.getGui(),e)};u?(m(),this.addManagedEventListeners({chartOptionsChanged:()=>{m()}})):this.removeTemplateComponent(this.axisTimeFormatSelect),this.initGridLines(d),this.initAxisTicks(d),this.initAxisLabels(d);this.addManagedListeners(n,{chartUpdated:()=>this.axisLabelUpdateFuncs.forEach((e=>e())),chartModelUpdate:()=>setTimeout((()=>{this.isAlive()&&(this.refreshAxisTypeSelect(l),m())}))})}getAxisTypeSelectParams(e,t){const i=e.getChartOptions(),n=this.getAxisTypeSelectOptions(),o=e.getDefaultSelectParams("type","axisType",n);return o.onValueChange=e=>{const n=i.getValue("type");if(e===n)return;const o=t.getValue("*"),s="time"===e,r="time"===n!==s?s?"%d %B %Y":void 0:null;if(this.options.chartOptionsService.setCartesianCategoryAxisType(this.axisType,e),null!==r){var a;const e=null!==(a=i.getValue("label"))&&void 0!==a?a:{};i.setValue("label",l(l({},e),{},{format:r}))}t.setValue("*",o)},o}refreshAxisTypeSelect(e){const t=this.getAxisTypeSelectOptions(),i=!!t.length;this.axisTypeSelect.setDisplayed(i),i&&this.axisTypeSelect.clearOptions().addOptions(t).setValue(e.getChartOptions().getValue("type"))}getAxisTypeSelectOptions(){const{chartController:e}=this.options,t=e.getChartType();return["heatmap","histogram","boxPlot","rangeBar","scatter","bubble"].includes(t)||e.isGrouping()||!this.isCategoryAxis()||e.isCategorySeriesSwitched()||!(()=>{const t=e.getChartData()[0];return!!t&&e.getSelectedDimensions().every((e=>!isNaN(parseFloat(t[e.colId]))))})()?[]:["category","number","time"].map((e=>({value:e,text:this.translate(e)})))}isCategoryAxis(){const e="horizontal"===this.chartOptionsSeriesProxy.getValue("direction");return e&&"yAxis"===this.axisType||!e&&"xAxis"===this.axisType}getAxisPositionSelectParams(e){const t=((e,t)=>{if("heatmap"===e)return null;switch(t){case"xAxis":return[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}];case"yAxis":return[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]}})(this.options.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("position","position",t):null}getAxisTimeFormatSelectParams(e){if(!this.isCategoryAxis())return null;const t=[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];return e.getDefaultSelectParams("label.format","timeFormat",t)}getAxisColorInputParams(e){return e.getDefaultColorPickerParams("line.stroke")}getAxisLineWidthSliderParams(e){var t;const i=e.getChartOptions(),n=e.getDefaultSliderParamsWithoutValueParams(null!==(t=i.getValue("line.enabled")?i.getValue("line.width"):null)&&void 0!==t?t:0,"thickness",10);return n.onValueChange=e=>{var t;t=0===e?null:e,i.setValues([{expression:"line.enabled",value:null!=t},{expression:"line.width",value:null!==t&&void 0!==t?t:0}])},n}initGridLines(e){if("heatmap"===this.options.chartController.getChartType())return;const t=this.createBean(new hTe(e));this.axisGroup.addItem(t),this.activePanels.push(t)}initAxisTicks(e){if(!this.hasConfigurableAxisTicks())return;const t=this.createBean(new cTe(e));this.axisGroup.addItem(t),this.activePanels.push(t)}hasConfigurableAxisTicks(){switch(this.options.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(e){const t={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:e,keyMapper:e=>"label.".concat(e)},i=this.createBean(new dTe(t));this.axisGroup.addItem(i),this.activePanels.push(i),this.addAdditionalLabelComps(i,e)}addAdditionalLabelComps(e,t){this.addLabelPadding(e,t);const i=this.createRotationWidget("labelRotation",t),n=this.initLabelRotation(i,t);e.addItem(n),e.addItem(i)}initLabelRotation(e,t){const i=t.getChartOptions(),n=()=>i.getValue("label.rotation"),o="number"!==typeof n()&&i.getValue("label.autoRotate"),s=this.createBean(new Yr({label:this.translate("autoRotate"),value:o,onValueChange:t=>{t&&(this.prevRotation=n()),i.setValues([{expression:"label.autoRotate",value:t},{expression:"label.rotation",value:t?void 0:this.prevRotation}]),e.setDisplayed(!t)}}));return e.setDisplayed(!o),s}createRotationWidget(e,t){var i;const n=t.getChartOptions(),o=()=>n.getValue("label.rotation"),s=String.fromCharCode(176),r="".concat(this.chartTranslation.translate(e)," ").concat(s),a=new lTe({label:r,labelWidth:"flex",value:null!==(i=o())&&void 0!==i?i:0,onValueChange:e=>n.setValue("label.rotation",e)});return this.axisLabelUpdateFuncs.push((()=>{var e;a.setValue(null!==(e=o())&&void 0!==e?e:0)})),this.createBean(a)}addLabelPadding(e,t){const i=this.createBean(new rAe(t.getDefaultSliderParams("label.spacing","padding",30)));e.addItem(i)}translate(e){return this.chartTranslation.translate(e)}removeTemplateComponent(e){we(e.getGui()),this.destroyBean(e)}destroyActivePanels(){this.activePanels.forEach((e=>{we(e.getGui()),this.destroyBean(e)}))}destroy(){this.destroyActivePanels(),super.destroy()}},pTe=class extends En{constructor(e){super(),this.options=e,this.axisGroup=Tn}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{isExpandedOnInit:e,chartAxisMenuParamsFactory:t,registerGroupComponent:i}=this.options,n={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:e,suppressEnabledCheckbox:!0},o=t.getDefaultColorPickerParams("line.stroke"),s=t.getDefaultSliderParams("line.width","thickness",10);this.setTemplate('<div>\n            <ag-group-component data-ref="axisGroup">\n                <ag-color-picker data-ref="axisColorInput"></ag-color-picker>\n                <ag-slider data-ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,nAe,aAe],{axisGroup:n,axisColorInput:o,axisLineWidthSlider:s}),i(this.axisGroup),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){const e=this.options.chartController.getChartType();if(["radarLine","radarArea"].includes(e)){const e=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:e,property:"shape"}))}"pie"!==e&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){const e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:this.options.chartAxisMenuParamsFactory,keyMapper:e=>"label.".concat(e)},t=this.createManagedBean(new dTe(e)),i=this.createOrientationWidget();t.addItem(i),this.axisGroup.addItem(t)}createOrientationWidget(){const e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:e,property:"label.orientation"})}initRadiusAxis(){const e=yIe(this.options.chartController.getChartType());if(!cIe(e,"isRadial"))return;const t=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],i=this.createManagedBean(new mDe({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:t})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(i)}createSlider(e){const{labelKey:t,defaultMaxValue:i,step:n=.05,property:o}=e,s=this.options.chartAxisMenuParamsFactory.getDefaultSliderParams(o,t,i);return s.step=n,this.createManagedBean(new rAe(s))}createSelect(e){const{labelKey:t,options:i,property:n}=e;return this.createManagedBean(new Ma(this.options.chartAxisMenuParamsFactory.getDefaultSelectParams(n,t,i)))}translate(e){return this.chartTranslation.translate(e)}},gTe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("background"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate('<div>\n            <ag-group-component data-ref="chartBackgroundGroup">\n                <ag-color-picker data-ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',[yDe,nAe],{chartBackgroundGroup:e,colorPicker:t})}},mTe=class extends En{constructor(e,t){super(),this.chartMenuUtils=e,this.chartController=t,this.paddingTopSlider=Tn}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("padding"),suppressEnabledCheckbox:!0},t=e=>this.chartMenuUtils.getDefaultSliderParams("padding."+e,e,200);this.setTemplate('<div>\n            <ag-group-component data-ref="chartPaddingGroup">\n                <ag-slider data-ref="paddingTopSlider"></ag-slider>\n                <ag-slider data-ref="paddingRightSlider"></ag-slider>\n                <ag-slider data-ref="paddingBottomSlider"></ag-slider>\n                <ag-slider data-ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',[yDe,aAe],{chartPaddingGroup:e,paddingTopSlider:t("top"),paddingRightSlider:t("right"),paddingBottomSlider:t("bottom"),paddingLeftSlider:t("left")}),this.addManagedEventListeners({chartOptionsChanged:e=>{this.updateTopPadding(e.chartOptions)}})}updateTopPadding(e){const t=[...this.chartController.getChartSeriesTypes(),"common"].map((t=>{var i;return null===(i=e[t])||void 0===i||null===(i=i.padding)||void 0===i?void 0:i.top})).find((e=>null!=e));null!=t&&this.paddingTopSlider.setValue("".concat(t))}},vTe=class extends En{constructor(e){super(),this.options=e,this.chartGroup=Tn}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartController:e,chartMenuParamsFactory:t,isExpandedOnInit:i,registerGroupComponent:n}=this.options,o={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("chartStyle"),expanded:i,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new mTe(t,e)),this.createManagedBean(new gTe(t))]};this.setTemplate('<div>\n            <ag-group-component data-ref="chartGroup"></ag-group-component>\n        </div>',[yDe],{chartGroup:o}),n(this.chartGroup)}},fTe=class extends Si{constructor(e){super(),this.groupContainer=e,this.id=0,this.groupComponents=new Map}addGroupComponent(e){const t=this.id++;this.groupComponents.set(t,e),e.isExpanded()&&(this.expandedGroupComponent=t),e.onExpandedChange((i=>{if(i){const i=this.expandedGroupComponent;if(this.expandedGroupComponent=t,null!=i){var n;const t=e.getGui(),o=t.offsetTop-this.groupContainer.parentElement.scrollTop;null===(n=this.groupComponents.get(i))||void 0===n||n.toggleGroupExpand(!1,!0);let s=t.offsetTop-o;s<0&&(s=0),s!==this.groupContainer.parentElement.scrollTop&&(this.groupContainer.parentElement.scrollTop=s)}}else this.expandedGroupComponent=void 0}))}destroy(){this.groupComponents.clear(),super.destroy()}},yTe=class extends En{constructor(e){super(),this.options=e,this.legendGroup=Tn,this.isGradient=["treemap","sunburst","heatmap"].includes(e.seriesType),this.key=this.isGradient?"gradientLegend":"legend"}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartMenuParamsFactory:e,isExpandedOnInit:t,registerGroupComponent:i}=this.options,n=this.createManagedBean(new Ma(e.getDefaultSelectParams("".concat(this.key,".position"),"position",["top","right","bottom","left"].map((e=>({value:e,text:this.chartTranslation.translate(e)})))))),o=this.createManagedBean(new mDe(e.addEnableParams("".concat(this.key,".enabled"),{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("legendEnabled"),suppressEnabledCheckbox:!0,useToggle:!0,items:[this.createLabelPanel(e),n,...this.getItems(e)]}))),s={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("legend"),suppressEnabledCheckbox:!0,expanded:t,items:[o]};this.setTemplate('<div>\n            <ag-group-component data-ref="legendGroup">\n            </ag-group-component>\n        </div>',[yDe],{legendGroup:s}),i(this.legendGroup)}getItems(e){const t=(t,i,n)=>this.createManagedBean(new rAe(e.getDefaultSliderParams("".concat(this.key,".").concat(t),i,n)));return this.isGradient?[this.createManagedBean(new Yr(e.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslation.translate("reverseDirection"),labelWidth:"flex"}))),t("gradient.thickness","thickness",40),t("gradient.preferredLength","preferredLength",300),t("spacing","spacing",200)]:[t("spacing","spacing",200),t("item.marker.size","markerSize",40),t("item.marker.strokeWidth","markerStroke",10),t("item.marker.padding","itemSpacing",20),t("item.paddingX","layoutHorizontalSpacing",50),t("item.paddingY","layoutVerticalSpacing",50)]}createLabelPanel(e){const t=this.isGradient?"gradientLegend.scale.label":"legend.item.label",i={enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:e,keyMapper:e=>"".concat(t,".").concat(e),cssIdentifier:"charts-format-sub-level-no-header"};return this.createManagedBean(new dTe(i))}},bTe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="calloutGroup">\n                <ag-slider data-ref="calloutLengthSlider"></ag-slider>\n                <ag-slider data-ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider data-ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,aAe],{calloutGroup:e,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}},CTe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);t.step=.05,this.setTemplate('<div>\n            <ag-group-component data-ref="capsGroup">\n                <ag-slider data-ref="capLengthRatioSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,aAe],{capsGroup:e,capLengthRatioSlider:t})}},xTe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="lineGroup">\n                <ag-color-picker data-ref="lineColorPicker"></ag-color-picker>\n                <ag-slider data-ref="lineStrokeWidthSlider"></ag-slider>\n                <ag-slider data-ref="lineOpacitySlider"></ag-slider>\n                <ag-slider data-ref="lineDashSlider"></ag-slider>                \n            </ag-group-component>\n        </div>',[yDe,nAe,aAe],{lineGroup:e,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=this.chartMenuUtils.getDefaultSliderParams(i,e,t,o);return s.step=n,s}};function wTe(e){return["square","circle","cross","diamond","plus","triangle","heart"].map((t=>({value:t,text:e.translate(t)})))}var STe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("markers"),suppressEnabledCheckbox:!0,useToggle:!0,suppressOpenCloseIcons:!0});this.setTemplate('<div>\n            <ag-group-component data-ref="seriesMarkersGroup">\n                <ag-select data-ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider data-ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider data-ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,Da,aAe],{seriesMarkersGroup:e,seriesMarkerShapeSelect:this.chartMenuUtils.getDefaultSelectParams("marker.shape","shape",wTe(this.chartTranslation)),seriesMarkerSizeSlider:this.chartMenuUtils.getDefaultSliderParams("marker.size","size",60),seriesMarkerStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("marker.strokeWidth","strokeWidth",10)})}},MTe=class extends En{constructor(e){super(),this.chartMenuUtils=e,this.seriesItemsGroup=Tn,this.activePanels=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="seriesItemsGroup">\n                <ag-select data-ref="seriesItemSelect"></ag-select>\n            </ag-group-component>\n        </div>',[yDe,Da],{seriesItemsGroup:e,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){const e=[{value:"positive",text:this.chartTranslation.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslation.translate("seriesItemNegative")}];return this.chartMenuUtils.getDefaultSelectParamsWithoutValueParams("seriesItemType",e,"positive",(e=>{this.destroyActivePanels(),this.initSeriesControls(e)}))}initSeriesControls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"positive";this.initSlider("strokeWidth",10,"item.".concat(e,".strokeWidth")),this.initSlider("lineDash",30,"item.".concat(e,".lineDash"),1,!0),this.initSlider("strokeOpacity",1,"item.".concat(e,".strokeOpacity"),.05,!1),this.initSlider("fillOpacity",1,"item.".concat(e,".fillOpacity"),.05,!1),this.initItemLabels(e)}initSlider(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=this.chartMenuUtils.getDefaultSliderParams(i,e,t,o);s.step=n;const r=this.seriesItemsGroup.createManagedBean(new rAe(s));this.seriesItemsGroup.addItem(r),this.activePanels.push(r)}initItemLabels(e){const t=this.chartMenuUtils.getDefaultFontPanelParams("item.".concat(e,".label"),"seriesItemLabels"),i=this.createBean(new dTe(t));this.seriesItemsGroup.addItem(i),this.activePanels.push(i)}destroyActivePanels(){this.activePanels.forEach((e=>{we(e.getGui()),this.destroyBean(e)}))}destroy(){this.destroyActivePanels(),super.destroy()}},DTe=class extends En{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shadow";super(),this.chartMenuUtils=e,this.propertyKey=t}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.propertyKey,t=this.chartMenuUtils.addEnableParams("".concat(e,".enabled"),{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("shadow"),suppressEnabledCheckbox:!0,useToggle:!0}),i=this.chartMenuUtils.getDefaultColorPickerParams("".concat(e,".color"));this.setTemplate('<div>\n            <ag-group-component data-ref="shadowGroup">\n                <ag-color-picker data-ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider data-ref="shadowBlurSlider"></ag-slider>\n                <ag-slider data-ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider data-ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,nAe,aAe],{shadowGroup:t,shadowColorPicker:i,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(e,t,i){const n="".concat(this.propertyKey,".").concat(e),o=this.chartMenuUtils.getDefaultSliderParams(n,e,i);return o.minValue=t,o}},kTe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="groupSpacing">\n                <ag-slider data-ref="groupPaddingSlider"></ag-slider>\n                <ag-slider data-ref="groupSpacingSlider"></ag-slider>\n            </ag-group-component>\n            <ag-group-component data-ref="tileSpacing">\n                <ag-slider data-ref="tilePaddingSlider"></ag-slider>\n                <ag-slider data-ref="tileSpacingSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,aAe],{groupSpacing:l(l({},e),{},{title:this.chartTranslation.translate("group")}),tileSpacing:l(l({},e),{},{title:this.chartTranslation.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(e,t){return this.chartMenuUtils.getDefaultSliderParams(t,e,10)}},ITe=class extends En{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="whiskersGroup">\n                <ag-color-picker data-ref="whiskerColorPicker"></ag-color-picker>\n                <ag-slider data-ref="whiskerThicknessSlider"></ag-slider>\n                <ag-slider data-ref="whiskerOpacitySlider"></ag-slider>\n                <ag-slider data-ref="whiskerLineDashSlider"></ag-slider>\n                <ag-slider data-ref="whiskerLineDashOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[yDe,nAe,aAe],{whiskersGroup:e,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}},ATe="tooltips",TTe="strokeWidth",ETe="lineDash",RTe="lineOpacity",LTe="fillOpacity",PTe="labels",NTe="shadow",FTe=class extends En{constructor(e){super(),this.options=e,this.seriesGroup=Tn,this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth("lineWidth"),[TTe]:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),[ETe]:()=>this.initLineDash(),[RTe]:()=>this.initOpacity("strokeOpacity"),[LTe]:()=>this.initOpacity("fillOpacity"),markers:()=>new STe(this.chartMenuUtils),[PTe]:()=>this.initLabels(),sectorLabels:()=>this.initSectorLabels(),[NTe]:()=>new DTe(this.chartMenuUtils),[ATe]:()=>this.initTooltips(),bins:()=>this.initBins(),whiskers:()=>new ITe(this.chartMenuUtils),caps:()=>new CTe(this.chartMenuUtils),connectorLine:()=>new xTe(this.chartMenuUtils),seriesItems:()=>new MTe(this.chartMenuUtils),tileSpacing:()=>new kTe(this.chartMenuUtils),shape:()=>this.initShape(),size:()=>this.initSize("size","size"),minSize:()=>this.initSize("size","minSize"),maxSize:()=>this.initSize("maxSize","maxSize")},this.seriesWidgetMappings={bar:[ATe,TTe,ETe,RTe,LTe,PTe,NTe],pie:[ATe,TTe,RTe,LTe,PTe,"sectorLabels",NTe],donut:[ATe,TTe,RTe,LTe,PTe,"sectorLabels",NTe],line:[ATe,"lineWidth",ETe,RTe,"markers",PTe],scatter:[ATe,"shape","size",TTe,PTe],bubble:[ATe,"shape","minSize","maxSize",TTe,PTe],area:[ATe,"lineWidth",ETe,RTe,LTe,"markers",PTe,NTe],histogram:[ATe,"bins",TTe,ETe,RTe,LTe,PTe,NTe],"radial-column":[ATe,TTe,ETe,RTe,LTe,PTe],"radial-bar":[ATe,TTe,ETe,RTe,LTe,PTe],"radar-line":[ATe,TTe,ETe,RTe,"markers",PTe],"radar-area":[ATe,TTe,ETe,RTe,LTe,"markers",PTe],nightingale:[ATe,TTe,ETe,RTe,LTe,PTe],"box-plot":[ATe,TTe,ETe,RTe,LTe,"whiskers","caps"],"range-bar":[ATe,TTe,ETe,RTe,LTe,PTe],"range-area":[ATe,"lineWidth",ETe,RTe,LTe,"markers",PTe,NTe],treemap:[ATe,"tileSpacing"],sunburst:[ATe],heatmap:[ATe,PTe,"lineColor","lineWidth",RTe],waterfall:[ATe,"connectorLine","seriesItems"]},this.seriesType=e.seriesType}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{isExpandedOnInit:e,chartOptionsService:t,chartController:i,registerGroupComponent:n}=this.options,o={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:e,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="seriesGroup">\n            </ag-group-component>\n        </div>',[yDe],{seriesGroup:o}),n(this.seriesGroup),this.chartMenuUtils=this.createManagedBean(new iTe(t.getSeriesOptionsProxy((()=>this.seriesType)))),this.addManagedListeners(i,{chartSeriesChartTypeChanged:this.refreshWidgets.bind(this)}),this.refreshWidgets()}refreshWidgets(){const{chartController:e}=this.options;this.destroyActivePanels();e.getChartProxy().getChart().waitForUpdate().then((()=>{var t;!this.isAlive()||(e.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),(null!==(t=this.seriesWidgetMappings[this.seriesType])&&void 0!==t?t:[]).forEach((e=>{const t=this.widgetFuncs[e]();let i;if(Array.isArray(t)){const e=this.createBean(t[0]);i=e,t[1](e)}else i=this.createBean(t);this.seriesGroup.addItem(i),this.activePanels.push(i)})))})).catch((e=>gt(105,{e:e})))}initSeriesSelect(){const e=this.createBean(new Ma(this.chartMenuUtils.getDefaultSelectParamsWithoutValueParams("seriesType",this.getSeriesSelectOptions(),"".concat(this.seriesType),(e=>{this.seriesType=e,this.refreshWidgets()}))));this.seriesGroup.addItem(e),this.activePanels.push(e)}initTooltips(){return new ia(this.chartMenuUtils.addValueParams("tooltip.enabled",{label:this.translate("tooltips"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex"}))}initLineColor(){return new iAe(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor"))}initStrokeWidth(e){return new rAe(this.chartMenuUtils.getDefaultSliderParams("strokeWidth",e,10))}initLineDash(){return new rAe(this.chartMenuUtils.getDefaultSliderParams("lineDash","lineDash",30,!0))}initOpacity(e){const t=this.chartMenuUtils.getDefaultSliderParams(e,e,1);return t.step=.05,new rAe(t)}initLabels(){const e=bIe(this.seriesType),t=e?"calloutLabel":"label",i=e?"calloutLabels":"labels",n=this.chartMenuUtils.getDefaultFontPanelParams(t,i);return[new dTe(n),t=>{if(e){const e=t.createManagedBean(new bTe(this.chartMenuUtils));t.addItem(e),this.activePanels.push(e)}if("range-bar"===this.seriesType){const e=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],i=t.createManagedBean(new Ma(this.chartMenuUtils.getDefaultSelectParams("label.placement","labelPlacement",e)));t.addItem(i),this.activePanels.push(i);const n=t.createManagedBean(new rAe(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));t.addItem(n),this.activePanels.push(n)}}]}initSectorLabels(){const e=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels");return[new dTe(e),e=>{const t=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);t.step=.05;const i=e.createManagedBean(new rAe(t));e.addItem(i)}]}initBins(){var e;const t=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),i=this.chartMenuUtils.getChartOptions(),n=(null!==(e=i.getValue("bins"))&&void 0!==e?e:i.getValue("calculatedBins",!0)).length;return t.value="".concat(n),t.maxValue=Math.max(n,20),new rAe(t)}initShape(){return new Ma(this.chartMenuUtils.getDefaultSelectParams("shape","shape",wTe(this.chartTranslation)))}initSize(e,t){return new rAe(this.chartMenuUtils.getDefaultSliderParams(e,t,60))}getSeriesSelectOptions(){const e=this.getActiveSeriesTypes();return["area","bar","line"].filter((t=>e.includes(t))).map((e=>({value:e,text:this.translate(e)})))}updateSeriesType(){const e=this.getActiveSeriesTypes();!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}getActiveSeriesTypes(){return this.options.chartController.getActiveSeriesChartTypes().map((e=>yIe(e.chartType)))}translate(e){return this.chartTranslation.translate(e)}destroyActivePanels(){this.activePanels.forEach((e=>{we(e.getGui()),this.destroyBean(e)}))}destroy(){this.destroyActivePanels(),super.destroy()}},OTe=class extends En{constructor(e,t,i){super("<div></div>"),this.chartMenuUtils=e,this.name=t,this.key=i,this.chartOptions=e.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.initFontPanel()}hasTitle(){const e=this.chartOptions.getValue(this.key);return e&&e.enabled&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),t={name:this.chartTranslation.translate(this.name),enabled:e,suppressEnabledCheckbox:!1,chartMenuParamsFactory:this.chartMenuUtils,keyMapper:e=>"".concat(this.key,".").concat(e),onEnableChange:e=>this.onEnableChange(e)};this.fontPanel=this.createManagedBean(new dTe(t)),this.fontPanel.addItem(this.createBean(new oa(this.getTextInputParams())),!0),this.fontPanel.addItem(this.createBean(new rAe(this.getSpacingSliderParams()))),this.getGui().appendChild(this.fontPanel.getGui())}getTextInputParams(){return this.chartMenuUtils.addValueParams("".concat(this.key,".text"),{label:this.chartTranslation.translate("title"),labelAlignment:"top"})}getSpacingSliderParams(){return this.chartMenuUtils.getDefaultSliderParams("".concat(this.key,".spacing"),"spacing",100)}onEnableChange(e){this.chartOptions.setValue("".concat(this.key,".enabled"),e)}},BTe=class extends OTe{wireBeans(e){super.wireBeans(e),this.chartMenuSvc=e.chartMenuSvc}postConstruct(){this.titlePlaceholder=this.chartTranslation.translate("titlePlaceholder"),super.postConstruct(),this.addManagedEventListeners({chartTitleEdit:()=>{this.fontPanel.setEnabled(this.hasTitle())}})}getTextInputParams(){const e=super.getTextInputParams();return this.shouldOverrideTextWithPlaceholder(e.value)&&(e.value=this.titlePlaceholder),e}getSpacingSliderParams(){const e=super.getSpacingSliderParams();return e.value="10",e}onEnableChange(e){if(this.chartMenuSvc.doesChartToolbarExist()){const t=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",e?t-20:t+20)}this.chartOptions.setValue("".concat(this.key,".enabled"),e);const t=this.chartOptions.getValue("".concat(this.key,".text"));e&&this.shouldOverrideTextWithPlaceholder(t)&&this.chartOptions.setValue("".concat(this.key,".text"),this.titlePlaceholder)}shouldOverrideTextWithPlaceholder(e){return"Title"===e||0===(null===e||void 0===e?void 0:e.trim().length)}},GTe=class extends En{constructor(e){super(),this.options=e,this.titleGroup=Tn}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t,chartOptionsService:i,seriesType:n,isExpandedOnInit:o=!1,registerGroupComponent:s}=this.options,r=[];if(pIe(n)){const e=e=>this.createManagedBean(new iTe(i.getCartesianAxisThemeOverridesProxy(e)));r.push(this.createManagedBean(new OTe(e("xAxis"),"horizontalAxisTitle","title"))),r.push(this.createManagedBean(new OTe(e("yAxis"),"verticalAxisTitle","title")))}else gIe(n)&&r.push(this.createManagedBean(new OTe(t,"polarAxisTitle","title")));const a={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("chartTitles"),expanded:o,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new BTe(e,"chartTitle","title")),this.createManagedBean(new OTe(e,"chartSubtitle","subtitle")),...r]};this.setTemplate('<div>\n            <ag-group-component data-ref="titleGroup"></ag-group-component>\n        </div>',[yDe],{titleGroup:a}),s(this.titleGroup)}},zTe={groups:[{type:"chart"},{type:"titles"},{type:"legend"},{type:"series"},{type:"axis"}]},_Te=class extends En{constructor(e){super('<div class="ag-chart-format-wrapper"></div>'),this.chartMenuContext=e}postConstruct(){this.groupExpansionFeature=this.createManagedBean(new fTe(this.getGui())),this.chartPanelFeature=this.createManagedBean(new QIe(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",((e,t)=>this.createPanels(t)))),this.chartPanelFeature.refreshPanels()}createPanels(e){var t;let i=!1;null===(t=this.getFormatPanelDef().groups)||void 0===t||t.forEach((t=>{let{type:n,isOpen:o=!1}=t;if(!this.isGroupPanelShownInSeries(n,e))return;o&&(i&&pt(145,{group:n}),i=!0);const s=l(l({},this.chartMenuContext),{},{isExpandedOnInit:o,seriesType:e,registerGroupComponent:e=>this.groupExpansionFeature.addGroupComponent(e)});switch(n){case"chart":this.chartPanelFeature.addComponent(new vTe(s));break;case"titles":this.chartPanelFeature.addComponent(new GTe(s));break;case"legend":this.chartPanelFeature.addComponent(new yTe(s));break;case"axis":gIe(e)?this.chartPanelFeature.addComponent(new pTe(s)):pIe(e)&&(this.chartPanelFeature.addComponent(new uTe("xAxis",s)),this.chartPanelFeature.addComponent(new uTe("yAxis",s)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new uTe("xAxis",s));break;case"verticalAxis":this.chartPanelFeature.addComponent(new uTe("yAxis",s));break;case"series":this.chartPanelFeature.addComponent(new FTe(s));break;default:pt(147,{group:n})}}))}getFormatPanelDef(){var e;const t=null===(e=this.gos.get("chartToolPanelsDef"))||void 0===e?void 0:e.formatPanel;return t||zTe}isGroupPanelShownInSeries(e,t){return["chart","titles","legend","series"].includes(e)||pIe(t)&&["axis","horizontalAxis","verticalAxis"].includes(e)||gIe(t)&&"axis"===e}};function VTe(e){const{stacked:t,size:i,padding:n,xScalePadding:o,xScaleDomain:s,yScaleDomain:r,agChartsExports:{_Scene:a}}=e,l=new a.BandScale;l.domain=s,l.range=[n,i-n],l.paddingInner=o,l.paddingOuter=o;const d=new a.LinearScale;d.domain=r,d.range=[i-n,n];const c=(e,t,i)=>e.map(((e,n)=>{const o=i.convert(e),s=new a.Rect;return s.x=t.convert(n),s.y=o,s.width=t.bandwidth,s.height=i.convert(0)-o,s.strokeWidth=0,s.crisp=!0,s}));return t?e.data.map((e=>c(e,l,d))):c(e.data,l,d)}function HTe(e,t,i,n){const o=[0,t[0].length-1],s=t.reduce(((e,t)=>(t.forEach((t=>{t<e[0]&&(e[0]=t),t>e[1]&&(e[1]=t)})),e)),[1/0,-1/0]);s[0]--,s[s.length-1]++;const r=new e.LinearScale;r.domain=o,r.range=[n,i-n];const a=new e.LinearScale;return a.domain=s,a.range=[i-n,n],{xScale:r,yScale:a}}function WTe(e,t,i){return e.map((e=>e.map(((e,n)=>[n>0?"lineTo":"moveTo",t.convert(n),i.convert(e)]))))}function jTe(e,t){const i=new e.Path;return t.forEach((e=>{let[t,n,o]=e;return i.path[t](n,o)})),i}function UTe(e,t,i){return e.map(((e,n,o)=>{const s=i?function(e,t,i){if(0===t)return KTe(e[t],i);return[...e[t-1]]}(o,n,t):KTe(e,t),r=[...s].reverse().map((e=>{let[t,i,n]=e;return["lineTo",i,n]})),a=e[0],l=Gi(r);return a[1]===l[1]&&a[2]===l[2]||r.push(["lineTo",a[1],a[2]]),[...e,...r]}))}function KTe(e,t){return e.map((e=>{let[i,n]=e;return[i,n,t.convert(0)]}))}function YTe(e,t,i,n,o){let{_Scene:s}=e;const{xScale:r,yScale:a}=HTe(s,i,n,o),l=WTe(i,r,a).map((e=>{const t=jTe(s,e);return t.strokeWidth=3,t.lineCap="round",t.fill=void 0,t})),d=new s.Group;return d.setClipRect(new s.BBox(o,o,n-2*o,n-2*o)),d.append(l),t.append(d),l}function ZTe(e){return e.map(((e,t,i)=>e.map(((e,n)=>i.slice(0,t+1).reduce(((e,t)=>e+t[n]),0)))))}function XTe(e){const t=e.map(((t,i)=>e.reduce(((e,t)=>Math.max(e,t[i])),0)));return e.map((e=>e.map(((e,i)=>e/t[i]*19))))}function qTe(e,t,i,n,o,s){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const{_Scene:a}=e,l=new a.LinearScale;l.domain=[0,7],l.range=[-Math.PI,Math.PI].map((e=>e+Math.PI/2));const d=new a.LinearScale;d.domain=[0,10],d.range=[o,s];const c=[],h=n/2,u=i.map((e=>{const t=new a.Path;return t.strokeWidth=1,t.strokeOpacity=.5,t.lineCap="round",t.fill=void 0,t.fillOpacity=.8,e.forEach(((e,i)=>{const n=l.convert(i),u=o+s-d.convert(e),p=u*Math.cos(n)+h,g=u*Math.sin(n)+h;if(t.path[i>0?"lineTo":"moveTo"](p,g),r>0){const e=new a.Circle;e.x=p,e.y=g,e.size=r,c.push(e)}})),t.path.closePath(),t})),p=new a.Group;return p.append([...u,...c]),t.append(p),{paths:u,markers:c}}function QTe(e){let[t,i]=[1/0,-1/0];return{processedData:e.reduce(((e,n,o)=>{var s;const r=o>0?e[o-1]:void 0;null!==(s=e[o])&&void 0!==s||(e[o]=[]);const a=e[o];return n.forEach(((e,n)=>{r&&(e+=r[n]),a[n]=e,a[n]<t&&(t=a[n]),a[n]>i&&(i=a[n])})),e}),[]),min:t,max:i}}var JTe=class extends En{constructor(e,t,i){super(),this.agChartsExports=t,this.tooltipName=i,this.size=58,this.padding=5;const{_Scene:n}=t;this.root=new n.Group;const o=new n.Scene({width:this.size,height:this.size});o.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),o.setRoot(this.root),o.setContainer(e),this.scene=o}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.scene.canvas.element.title=this.chartTranslation.translate(this.tooltipName);try{this.scene.render()}catch(e){gt(108,{e:e})}}},$Te=class extends JTe{constructor(e,t,i){super(e,t,i),this.stroke="gray",this.axisOvershoot=3}postConstruct(){const{_Scene:e}=this.agChartsExports,t=this.size,i=this.padding,n=new e.Line;n.x1=i,n.y1=i,n.x2=i,n.y2=t-i+this.axisOvershoot,n.stroke=this.stroke;const o=new e.Line;o.x1=i-this.axisOvershoot+1,o.y1=t-i,o.x2=t-i+1,o.y2=t-i,o.stroke=this.stroke;const s=this.root;s.append(n),s.append(o),super.postConstruct()}},eEe=class extends $Te{constructor(e,t,i,n){super(e,t,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:o,columnData:s,size:r,padding:a}=this;this.columns=VTe({stacked:!1,root:o,data:s,size:r,padding:a,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3,agChartsExports:t}),o.append(this.columns),this.updateColors(i,n)}updateColors(e,t){this.columns.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]}))}};eEe.chartType="groupedColumn";var tEe=class e extends $Te{constructor(t,i,n,o,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,16];super(t,i,arguments.length>8&&void 0!==arguments[8]?arguments[8]:"stackedColumnTooltip");const{root:d,size:c,padding:h}=this;this.stackedColumns=VTe({stacked:!0,root:d,data:a,size:c,padding:h,xScaleDomain:[0,1,2],yScaleDomain:l,xScalePadding:.3,agChartsExports:i}),d.append([].concat.apply([],this.stackedColumns)),this.updateColors(n,o)}updateColors(e,t){this.stackedColumns.forEach(((i,n)=>i.forEach((i=>{i.fill=e[n],i.stroke=t[n]}))))}};tEe.chartType="stackedColumn",tEe.data=[[8,12,16],[6,9,12],[2,3,4]];var iEe=tEe,nEe=class e extends iEe{constructor(t,i,n,o,s,r){super(t,i,n,o,s,r,e.data,[0,10],"normalizedColumnTooltip")}};nEe.chartType="normalizedColumn",nEe.data=[[10,10,10],[6,7,8],[2,4,6]];var oEe=nEe,sEe=class extends $Te{constructor(e,t,i,n){super(e,t,"groupedBarTooltip");const{_Scene:o}=t,s=this.padding,r=this.size,a=new o.BandScale;a.domain=[0,1,2],a.range=[s,r-s],a.paddingInner=.3,a.paddingOuter=.3;const l=new o.LinearScale;l.domain=[0,4],l.range=[r-s,s];const d=l.convert(0),c=a.bandwidth;this.bars=[2,3,4].map(((e,t)=>{const i=new o.Rect;return i.x=s,i.y=a.convert(t),i.width=d-l.convert(e),i.height=c,i.strokeWidth=0,i.crisp=!0,i})),this.updateColors(i,n),this.root.append(this.bars)}updateColors(e,t){this.bars.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]}))}};sEe.chartType="groupedBar";var rEe=class e extends $Te{constructor(t,i,n,o,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,16];super(t,i,arguments.length>8&&void 0!==arguments[8]?arguments[8]:"stackedBarTooltip");const{_Scene:d}=i,c=this.size,h=this.padding,u=new d.BandScale;u.domain=[0,1,2],u.range=[h,c-h],u.paddingInner=.3,u.paddingOuter=.3;const p=new d.LinearScale;p.domain=l,p.range=[c-h,h];const g=p.convert(0),m=u.bandwidth;this.bars=a.map((e=>e.map(((e,t)=>{const i=new d.Rect;return i.x=h,i.y=u.convert(t),i.width=g-p.convert(e),i.height=m,i.strokeWidth=0,i.crisp=!0,i})))),this.updateColors(n,o),this.root.append([].concat.apply([],this.bars))}updateColors(e,t){this.bars.forEach(((i,n)=>i.forEach((i=>{i.fill=e[n],i.stroke=t[n]}))))}};rEe.chartType="stackedBar",rEe.data=[[8,12,16],[6,9,12],[2,3,4]];var aEe=rEe,lEe=class e extends aEe{constructor(t,i,n,o,s,r){super(t,i,n,o,s,r,e.data,[0,10],"normalizedBarTooltip")}};lEe.chartType="normalizedBar",lEe.data=[[10,10,10],[6,7,8],[2,4,6]];var dEe=lEe,cEe=class extends JTe{constructor(e,t,i,n,o,s){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.6;super(e,t,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"donutTooltip");const{size:a,padding:l,agChartsExports:{_Scene:d}}=this,c=(a-2*l)/2,h=c+l,u=d.toRadians,p=[[u(-90),u(30)],[u(30),u(120)],[u(120),u(180)],[u(180),u(210)],[u(210),u(240)],[u(240),u(270)]];this.sectors=p.map((e=>{let[t,i]=e;const n=new d.Sector;return n.centerX=h,n.centerY=h,n.innerRadius=c*r,n.outerRadius=c,n.startAngle=t,n.endAngle=i,n.stroke=void 0,n.strokeWidth=0,n.inset=.75,n})),this.updateColors(i,n),this.root.append(this.sectors)}updateColors(e,t){this.sectors.forEach(((i,n)=>{i.fill=e[n%e.length],i.stroke=t[n%t.length]}))}};cEe.chartType="donut";var hEe=class extends cEe{constructor(e,t,i,n,o,s){super(e,t,i,n,o,s,0,"pieTooltip")}};hEe.chartType="pie";var uEe=class e extends $Te{constructor(t,i,n,o,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data;super(t,i,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"lineTooltip");const{size:l,padding:d,root:c}=this;this.lines=YTe(i,c,a,l,d),this.updateColors(n,o)}updateColors(e,t){this.lines.forEach(((t,i)=>{t.stroke=e[i]}))}};uEe.chartType="line",uEe.data=[[1,3,5],[2,6,4],[5,3,1]];var pEe=uEe,gEe=class e extends pEe{constructor(t,i,n,o,s,r){super(t,i,n,o,s,r,arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"stackedLineTooltip")}};gEe.chartType="stackedLine",gEe.data=ZTe(pEe.data);var mEe=gEe,vEe=class e extends pEe{constructor(t,i,n,o,s,r){super(t,i,n,o,s,r,arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"normalizedLineTooltip")}};vEe.chartType="normalizedLine",vEe.data=XTe(mEe.data);var fEe=vEe,yEe=class extends $Te{constructor(e,t,i,n){super(e,t,"scatterTooltip");const{size:o,padding:s,agChartsExports:{_Scene:r}}=this,a=new r.LinearScale;a.domain=[-.5,4],a.range=[2*s,o-s];const l=new r.LinearScale;l.domain=[-.5,3.5],l.range=[o-s,s];const d=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach((e=>{e.forEach((e=>{let[t,i]=e;const n=new r.Arc;n.strokeWidth=0,n.centerX=a.convert(t),n.centerY=l.convert(i),n.radius=2.5,d.push(n)}))})),this.points=d,this.updateColors(i,n);const c=new r.Group;c.setClipRect(new r.BBox(s,s,o-2*s,o-2*s)),c.append(this.points),this.root.append(c)}updateColors(e,t){this.points.forEach(((i,n)=>{i.stroke=t[n%t.length],i.fill=e[n%e.length]}))}};yEe.chartType="scatter";var bEe=class extends $Te{constructor(e,t,i,n){super(e,t,"bubbleTooltip");const{size:o,padding:s,agChartsExports:{_Scene:r}}=this,a=new r.LinearScale;a.domain=[0,1],a.range=[2*s,o-s];const l=new r.LinearScale;l.domain=[0,1],l.range=[o-s,s];const d=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach((e=>{e.forEach((e=>{let[t,i,n]=e;const o=new r.Arc;o.strokeWidth=0,o.centerX=a.convert(t),o.centerY=l.convert(i),o.radius=n,o.fillOpacity=.7,d.push(o)}))})),this.points=d,this.updateColors(i,n);const c=new r.Group;c.setClipRect(new r.BBox(s,s,o-2*s,o-2*s)),c.append(this.points),this.root.append(c)}updateColors(e,t){this.points.forEach(((i,n)=>{i.stroke=t[n%t.length],i.fill=e[n%e.length]}))}};bEe.chartType="bubble";var CEe=class e extends $Te{constructor(t,i,n,o,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];super(t,i,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"groupedAreaTooltip"),this.areas=function(e,t,i,n,o){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{xScale:r,yScale:a}=HTe(e,i,n,o),l=UTe(WTe(i,r,a),a,s),d=new e.Group;d.setClipRect(new e.BBox(o,o,n-2*o,n-2*o));const c=l.map((t=>jTe(e,t)));return d.append(c),t.append(d),c}(i._Scene,this.root,a,this.size,this.padding,l),this.updateColors(n,o)}updateColors(e,t){this.areas.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n],i.strokeWidth=1,i.strokeOpacity=.75,i.fillOpacity=.7}))}};CEe.chartType="area",CEe.data=pEe.data;var xEe=CEe,wEe=class e extends xEe{constructor(t,i,n,o,s,r){super(t,i,n,o,s,r,arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"stackedAreaTooltip",!0)}updateColors(e,t){this.areas.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]}))}};wEe.chartType="stackedArea",wEe.data=ZTe(xEe.data);var SEe=wEe,MEe=class e extends SEe{constructor(t,i,n,o,s,r){super(t,i,n,o,s,r,arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.data,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"normalizedAreaTooltip")}};MEe.chartType="normalizedArea",MEe.data=XTe(SEe.data);var DEe=MEe,kEe=class extends $Te{constructor(e,t,i,n){super(e,t,"histogramTooltip");const{padding:o,size:s,agChartsExports:{_Scene:r}}=this,a=[2,5,11,13,10,6,1],l=new r.LinearScale;l.domain=[0,a.length],l.range=[o,s-o];const d=new r.LinearScale;d.domain=[0,a.reduce(((e,t)=>Math.max(e,t)),0)],d.range=[s-o,o];const c=d.convert(0);this.bars=a.map(((e,t)=>{const i=d.convert(e),n=l.convert(t),o=l.convert(t+1),s=new r.Rect;return s.x=n,s.y=i,s.width=o-n,s.height=c-i,s.strokeWidth=1,s.strokeOpacity=.75,s.crisp=!0,s})),this.updateColors(i,n),this.root.append(this.bars)}updateColors(e,t){let[i]=e,[n]=t;this.bars.forEach((e=>{e.fill=i,e.stroke=n}))}};kEe.chartType="histogram";var IEe=class extends JTe{constructor(e,t,i){super(e,t,i),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}postConstruct(){const{_Scene:e}=this.agChartsExports,t=this.size,i=this.padding,n=(t-2*i)/2,o=this.showAngleAxisLines?[n,.8*n,.6*n,.4*n]:[],s=new e.Line;s.x1=t/2,s.y1=i,s.x2=t/2,s.y2=t-i-n-o[o.length-1],s.stroke=this.stroke,s.strokeOpacity=.5,s.fill=void 0,s.visible=this.showRadiusAxisLine;const r=i+n;this.gridLines=o.map(((t,i)=>{const n=new e.Path;return n.path.arc(r,r,t,0,2*Math.PI),n.strokeWidth=1,n.stroke=this.stroke,n.strokeOpacity=0===i?.5:.2,n.fill=void 0,n}));const a=this.root;a.append(s),this.gridLines.length>0&&a.append(this.gridLines),super.postConstruct()}},AEe=class extends IEe{constructor(e,t,i,n){super(e,t,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;const{padding:o,size:s,data:r,agChartsExports:{_Scene:a}}=this,l=(s-2*o)/2,d=.4*l,c=new a.BandScale;c.domain=r[0].map(((e,t)=>t)),c.range=[0,2*Math.PI],c.paddingInner=0,c.paddingOuter=0;const h=.7*c.bandwidth,{processedData:u,max:p}=QTe(r),g=new a.LinearScale;g.domain=[0,p],g.range=[d,l];const m=this.size/2;this.series=u.map(((e,t)=>{const i=0===t?void 0:u[t-1],n=new a.TranslatableGroup({zIndex:1e6}),o=e.map(((e,t)=>{const n=null===i||void 0===i?void 0:i[t],o=g.convert(e),s=g.convert(null!==n&&void 0!==n?n:0),r=c.convert(t),u=r+h,p=a.getRadialColumnWidth(r,u,l,.5,.5),m=new a.RadialColumnShape;return m.columnWidth=p,m.innerRadius=s,m.outerRadius=o,m.startAngle=r,m.endAngle=u,m.isBeveled=!0,m.axisInnerRadius=d,m.axisOuterRadius=l,m.stroke=void 0,m.strokeWidth=0,m}));return n.append(o),n.translationX=m,n.translationY=m,n})),this.root.append(this.series),this.updateColors(i,n)}updateColors(e,t){this.series.forEach(((i,n)=>{for(const o of i.children())o.fill=e[n%e.length],o.stroke=t[n%t.length]}))}};AEe.chartType="radialColumn";var TEe=class extends IEe{constructor(e,t,i,n){super(e,t,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;const{size:o,padding:s,data:r,agChartsExports:{_Scene:a}}=this,l=(o-s)/2,d=.4*l,c=new a.BandScale;c.domain=r[0].map(((e,t)=>t)),c.range=[d,l],c.paddingInner=.5,c.paddingOuter=0;const h=c.bandwidth,{processedData:u,max:p}=QTe(r),g=new a.LinearScale;g.domain=[0,Math.ceil(1.5*p)];const m=1.5*Math.PI,v=m+2*Math.PI;g.range=[m,v];const f=o/2;this.series=u.map(((e,t)=>{const i=t<0?void 0:u[t-1],n=new a.Group({zIndex:1e6}),o=e.map(((e,t)=>{var n;const o=null!==(n=null===i||void 0===i?void 0:i[t])&&void 0!==n?n:0,s=c.convert(t),r=s-h,l=g.convert(o),d=g.convert(e),u=new a.Sector;return u.centerX=f,u.centerY=f,u.innerRadius=r,u.outerRadius=s,u.startAngle=l,u.endAngle=d,u.stroke=void 0,u.strokeWidth=0,u}));return n.append(o),n})),this.root.append(this.series),this.updateColors(i,n)}updateColors(e,t){this.series.forEach(((i,n)=>{for(const o of i.children())o.fill=e[n%e.length],o.stroke=t[n%t.length]}))}};TEe.chartType="radialBar";var EEe=class extends IEe{constructor(e,t,i,n){super(e,t,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;const{size:o,padding:s,root:r,data:a}=this,l=(o-2*s)/2,{paths:d,markers:c}=qTe(t,r,a,o,l,0,this.markerSize);this.lines=d,this.markers=c,this.updateColors(i,n)}updateColors(e,t){this.lines.forEach(((i,n)=>{const o=this.data[n].length;i.stroke=e[n];const s=n*o,r=s+o;this.markers.slice(s,r).forEach((i=>{i.stroke=t[n],i.fill=e[n]}))}))}};EEe.chartType="radarLine";var REe=class extends IEe{constructor(e,t,i,n){super(e,t,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]];const{size:o,padding:s,root:r,data:a}=this;this.showRadiusAxisLine=!1;const l=(o-2*s)/2,d=l-.3*o;this.areas=qTe(t,r,a,o,l,d).paths,this.updateColors(i,n)}updateColors(e,t){this.areas.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]}))}};REe.chartType="radarArea";var LEe=class extends IEe{constructor(e,t,i,n){super(e,t,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;const{size:o,padding:s,data:r,agChartsExports:{_Scene:a}}=this,l=(o-2*s)/2,d=new a.BandScale;d.domain=r[0].map(((e,t)=>t)),d.range=[-Math.PI,Math.PI],d.paddingInner=0,d.paddingOuter=0;const c=.7*d.bandwidth,{processedData:h,max:u}=QTe(r),p=new a.LinearScale;p.domain=[0,u],p.range=[0,l];const g=o/2;this.series=h.map(((e,t)=>{const i=t<0?void 0:h[t-1],n=new a.Group({zIndex:1e6}),o=e.map(((e,t)=>{const n=null===i||void 0===i?void 0:i[t],o=p.convert(e),s=p.convert(null!==n&&void 0!==n?n:0),r=d.convert(t),l=r+c,h=new a.Sector;return h.centerX=g,h.centerY=g,h.innerRadius=s,h.outerRadius=o,h.startAngle=r,h.endAngle=l,h.stroke=void 0,h.strokeWidth=0,h}));return n.append(o),n})),this.root.append(this.series),this.updateColors(i,n)}updateColors(e,t){this.series.forEach(((i,n)=>{for(const o of i.children())o.fill=e[n%e.length],o.stroke=t[n%t.length]}))}};LEe.chartType="nightingale";var PEe=class extends $Te{constructor(e,t,i,n){super(e,t,"rangeBarTooltip");this.bars=this.createRangeBar(this.root,[3,3.5,3],this.size,this.padding,"vertical"),this.updateColors(i,n)}updateColors(e,t){this.bars.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]}))}createRangeBar(e,t,i,n,o){const s="horizontal"===o,r=2*n,{_Scene:a}=this.agChartsExports,l=new a.BandScale;l.domain=t.map(((e,t)=>t)),l.range=[n,i-n],l.paddingInner=.3,l.paddingOuter=.3;const d=new a.LinearScale;d.domain=[.7*t.reduce(((e,t)=>Math.min(e,t)),1/0),1.3*t.reduce(((e,t)=>Math.max(e,t)),0)],d.range=[r,i-r];const c=l.bandwidth,h=t.map(((e,t)=>{const[i,n]=[.7*e,1.3*e],o=l.convert(t),r=d.convert(i),h=d.convert(n)-r,u=new a.Rect;return u.x=s?r:o,u.y=s?o:r,u.width=s?h:c,u.height=s?c:h,u.strokeWidth=0,u.crisp=!0,u}));return e.append(h),h}};PEe.chartType="rangeBar";var NEe=class extends $Te{constructor(e,t,i,n){super(e,t,"rangeAreaTooltip");const o=[FEe({offset:1.5,length:4,pattern:{low:3,high:5,period:4}}),FEe({offset:1.5,length:4,pattern:{low:2.25,high:4.25,period:4}}),FEe({offset:3,length:4,pattern:{low:2.5,high:4.5,period:4}})],s=o.map((e=>e.map((e=>{let[t,i]=e;return{x:t,low:i-.875,high:i+.875}})))),{lines:r,areas:a}=this.createRangeArea(this.root,s,this.size,this.padding);this.lines=r,this.areas=a,this.updateColors(i,n)}updateColors(e,t){e=BEe(e,1,2),t=BEe(t,1,2),this.lines.forEach(((e,i)=>{let[n,o]=e;n.fill=void 0,n.stroke=t[i],o.fill=void 0,o.stroke=t[i]})),this.areas.forEach(((t,i)=>{t.fill=e[i]}))}createRangeArea(e,t,i,n){const o=t.reduce(((e,t)=>t.reduce(((e,t)=>{let{x:i}=t;return Math.min(e,i)}),e)),1/0),s=t.reduce(((e,t)=>t.reduce(((e,t)=>{let{x:i}=t;return Math.max(e,i)}),e)),-1/0),r=t.reduce(((e,t)=>t.reduce(((e,t)=>{let{low:i}=t;return Math.min(e,i)}),e)),1/0),a=t.reduce(((e,t)=>t.reduce(((e,t)=>{let{high:i}=t;return Math.max(e,i)}),e)),-1/0),{_Scene:l}=this.agChartsExports,d=new l.LinearScale;d.domain=[o,s],d.range=[n,i-n];const c=2*n,h=new l.LinearScale;h.domain=[r,a],h.range=[i-c,c];const u=[],p=[];return t.map((e=>{const t=new l.Path,i=new l.Path,n=new l.Path;return u.push([t,i]),p.push(n),t.strokeWidth=0,i.strokeWidth=0,n.strokeWidth=0,n.fillOpacity=.8,t.path.clear(),i.path.clear(),n.path.clear(),e.map(((e,o)=>{const{x:s,low:r,high:a}=e,l=d.convert(s),c=h.convert(r),u=h.convert(a),p=o>0?"lineTo":"moveTo";return t.path[p](l,u),i.path[p](l,c),n.path[p](l,u),[l,c]}))})).forEach(((e,t)=>{const i=e.length-1,n=p[t];for(let o=i;o>=0;o--){const[t,i]=e[o];n.path.lineTo(t,i)}})),e.append(p.concat(...u)),{lines:u,areas:p}}};function FEe(e){const{offset:t,length:i,pattern:n}=e,o=function(e,t,i){const{period:n}=i,o=e/n,s=[0,.5].map((e=>e-o)).map(OEe).sort(((e,t)=>e-t));return Array.from({length:Math.floor(s.length*(n/t))},((e,t)=>s[t%s.length]+Math.floor(t/s.length))).map((e=>e*n)).map((t=>r(t,e,i)))}(t,i,n),s=i;return 0!==o.length&&0===o[0][0]||o.unshift(r(0,t,n)),o[o.length-1][0]!==s&&o.push(r(s,t,n)),o;function r(e,t,i){return[e,a(t+e,i)]}function a(e,t){const{low:i,high:n,period:o}=t,s=OEe(e/o);return i+(n-i)*(s>.5?1-2*(s-.5):2*s)}}function OEe(e){const t=e%1;return t<0?t+1:t}function BEe(e,t,i){const n=[...e],o=n[t];return n[t]=n[i],n[i]=o,n}NEe.chartType="rangeArea";var GEe=class extends $Te{constructor(e,t,i,n,o,s){super(e,t,"boxPlotTooltip");const{size:r,padding:a,agChartsExports:{_Scene:l}}=this,d=[11,11.5,10.5],c=new l.LinearScale;c.domain=[.8*d.reduce(((e,t)=>Math.min(e,t)),1/0),1.2*d.reduce(((e,t)=>Math.max(e,t)),0)],c.range=[r-1.5*a,a];const h=new l.BandScale;h.domain=d.map(((e,t)=>t)),h.range=[a,r-a],h.paddingInner=.4,h.paddingOuter=.2;const u=Math.round(h.bandwidth),p=Math.round(h.bandwidth/2);this.boxPlotGroups=d.map(((e,t)=>{const[i,n,o,s]=[.8*e,.9*e,1.1*e,1.2*e],r=Math.round(c.convert(o)),a=Math.round(h.convert(t)),d=Math.round(a+u),g=Math.round(c.convert(n)),m=Math.round(c.convert(i)),v=Math.round(c.convert(e)),f=Math.round(c.convert(s)),y=a+p,b=new l.Group,C=new l.Rect,x=new l.Line,w=new l.Line,S=new l.Line,M=new l.Line,D=new l.Line;return C.x=a,C.y=r,C.width=u,C.height=g-r,C.strokeWidth=1,C.strokeOpacity=.75,C.crisp=!0,this.setLineProperties(x,a,d,v,v),this.setLineProperties(w,y,y,f,r),this.setLineProperties(S,y,y,m,g),this.setLineProperties(M,a,d,f,f),this.setLineProperties(D,a,d,m,m),b.append([C,x,w,S,M,D]),b})),this.updateColors(i,n,o,s),this.root.append(this.boxPlotGroups)}updateColors(e,t,i,n){var o;const{agChartsExports:{_Util:s,_Theme:r}}=this,a=null===i||void 0===i?void 0:i.get(r.themeSymbols.DEFAULT_BACKGROUND_COLOUR),l=null!==(o=Array.isArray(a)?a[0]:a)&&void 0!==o?o:"white";this.boxPlotGroups.forEach(((i,o)=>{for(const r of i.children()){const i=e[o%e.length];r.fill=n?i:s.interpolateColor(i,l)(.7),r.stroke=t[o%t.length]}}))}setLineProperties(e,t,i,n,o){e.x1=t,e.x2=i,e.y1=n,e.y2=o,e.strokeOpacity=.75}};GEe.chartType="boxPlot";var zEe=class extends JTe{constructor(e,t,i,n,o,s){super(e,t,"treemapTooltip");const{size:r,padding:a,agChartsExports:{_Scene:l}}=this,d=[[1,1],[3,2,1]],c=d.length%2===0?.3:.2,h=[a,r-a],u=d.length,p=u*(u+1)/2,g=c/(u-1),m=h[1]-h[0],v=m-c;let f=h[0];this.rects=d.reduce(((e,t,i)=>{var n;null!==(n=e)&&void 0!==n||(e=[]);const o=v*((u-i)/p),s=t.length,r=t.reduce(((e,t)=>e+t),0),a=c/(s-1||1),d=s>1?m-c:m;let y=h[0];const b=t.map((e=>{const t=new l.Rect,i=d*e/r;return t.x=f,t.y=y,t.width=o,t.height=i,t.strokeWidth=.75,t.crisp=!0,y+=i+a,t}));return f+=o+g,e.push(...b),e}),[]),this.updateColors(i,n,o,s);const y=new l.Group;y.setClipRect(new l.BBox(a,a,r-a,r-a)),y.append(this.rects),this.root.append(y)}updateColors(e,t,i,n){var o;const s=null===i||void 0===i?void 0:i.get(this.agChartsExports._Theme.themeSymbols.DEFAULT_BACKGROUND_COLOUR),r=null!==(o=Array.isArray(s)?s[0]:s)&&void 0!==o?o:"white";this.rects.forEach(((i,o)=>{i.fill=e[o%t.length],i.stroke=n?t[o%t.length]:r}))}};zEe.chartType="treemap";var _Ee=class extends IEe{constructor(e,t,i,n){super(e,t,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;const{data:o,size:s,padding:r,angleOffset:a,innerRadiusRatio:l,agChartsExports:{_Scene:d}}=this,c=(s-2*r)/2,h=[a+0,a+2*Math.PI],u=Math.abs(h[1]-h[0]),p=[c*l,c],g=Math.abs(p[1]-p[0]);let m=0;const v=(e,t)=>{e.forEach((e=>{const i=t+1;m=Math.max(m,i),v(e,i)}))};v(o,0);const f=g/m,y=this.size/2,b=h[0];this.series=[];const C=(e,t,i,n,o)=>{if(!Array.isArray(e))return;const s=t+1;let r=i;e.forEach(((e,i,a)=>{let l=o;l||(l=new d.Group,this.series.push(l));const c=p[0]+t*f,h=p[0]+s*f,u=1/a.length,g=r,m=g+n*u,v=new d.Sector;v.centerX=y,v.centerY=y,v.innerRadius=c,v.outerRadius=h,v.startAngle=g,v.endAngle=m,v.stroke=void 0,v.strokeWidth=0,v.inset=.75,r=m,l.append(v),C(e,s,g,Math.abs(m-g),l)}))};C(o,0,b,u),this.root.append(this.series),this.updateColors(i,n)}updateColors(e,t){this.series.forEach(((i,n)=>{for(const o of i.children())o.fill=e[n%e.length],o.stroke=t[n%t.length]}))}};_Ee.chartType="sunburst";var VEe=class extends JTe{constructor(e,t,i,n,o,s){var r,a;super(e,t,"heatmapTooltip");const{size:l,padding:d,agChartsExports:{_Scene:c}}=this,h=Array.from({length:3},((e,t)=>Array.from({length:3},((e,t)=>t)))),u=h.map(((e,t)=>t)),p=new c.BandScale;p.domain=u,p.range=[d,l-d],p.paddingInner=.01,p.paddingOuter=.1;const g=new c.BandScale;g.domain=u,g.range=[d,l-d],g.paddingInner=.01,g.paddingOuter=.1;const m=null!==(r=p.bandwidth)&&void 0!==r?r:0,v=null!==(a=g.bandwidth)&&void 0!==a?a:0;this.rects=h.reduce(((e,t,i)=>{var n;null!==(n=e)&&void 0!==n||(e=[]);const o=t.map(((e,t)=>{const n=new c.Rect;return n.x=p.convert(i),n.y=g.convert(t),n.width=m,n.height=v,n.strokeWidth=0,n.crisp=!0,n}));return e.push(...o),e}),[]),this.updateColors(i,n,o,s);const f=new c.Group;f.setClipRect(new c.BBox(d,d,l-d,l-d)),f.append(this.rects),this.root.append(f)}updateColors(e,t,i,n){var o;const{_Theme:s,_Util:r}=this.agChartsExports,a=null===i||void 0===i?void 0:i.get(s.themeSymbols.DEFAULT_DIVERGING_SERIES_COLOR_RANGE),l=null===i||void 0===i?void 0:i.get(s.themeSymbols.DEFAULT_BACKGROUND_COLOUR),d=null!==(o=Array.isArray(l)?l[0]:l)&&void 0!==o?o:"white",c=n?[e[0],e[1]]:a,h=n?t[0]:d,u=r.interpolateColor(c[0],c[1]);this.rects.forEach(((e,t)=>{e.fill=u(.2*t),e.stroke=h}))}};VEe.chartType="heatmap";var HEe=class extends $Te{constructor(e,t,i,n,o,s){super(e,t,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(i,n,o,s)}updateColors(e,t,i,n){const{data:o,agChartsExports:{_Theme:{themeSymbols:s}}}=this,r={fill:n?e[0]:null===i||void 0===i?void 0:i.get(s.PALETTE_ALT_UP_FILL),stroke:n?t[0]:null===i||void 0===i?void 0:i.get(s.PALETTE_ALT_UP_STROKE)},a={fill:n?e[1]:null===i||void 0===i?void 0:i.get(s.PALETTE_ALT_DOWN_FILL),stroke:n?t[1]:null===i||void 0===i?void 0:i.get(s.PALETTE_ALT_DOWN_STROKE)};this.bars.forEach(((e,t)=>{const i=o[t]>=0;e.fill=i?r.fill:a.fill,e.stroke=i?r.stroke:a.stroke}))}createWaterfall(e,t,i,n,o){const s=2*n,{processedData:r,min:a,max:l}=QTe(t.map((e=>[e]))),d=r.reduce(((e,t)=>e.concat(t)),[]),{_Scene:c}=this.agChartsExports,h=new c.LinearScale;h.domain=[Math.min(a,0),l],h.range=[i-s,s];const u=new c.BandScale;u.domain=t.map(((e,t)=>t)),u.range=[n,i-n],u.paddingInner=.2,u.paddingOuter=.3;const p=u.bandwidth,g=new c.Path;g.stroke="#575757",g.strokeWidth=0;const m=Math.floor(g.strokeWidth)%2/2,v=g.path;v.clear();const f="horizontal"===o,y=d.map(((e,i)=>{const n=i>0?d[i-1]:0,o=t[i]>0,s=Math.round(h.convert(e)),r=Math.round(h.convert(n)),a=(o?s:r)-m,l=(o?r:s)+m,g=Math.abs(l-a),y=u.convert(i),b=new c.Rect;b.x=f?a:y,b.y=f?y:a,b.width=f?g:p,b.height=f?p:g,b.strokeWidth=0,b.crisp=!0;const C=s+m,x=r+m;if(i>0){const e=f?x:b.x,t=f?b.y:x;v.lineTo(e,t)}const w=f?C:b.x,S=f?b.y:C;return v.moveTo(w,S),b}));return e.append([g,...y]),{bars:y}}};HEe.chartType="waterfall";var WEe=class extends $Te{constructor(e,t,i,n){super(e,t,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:o,columnData:s,lineData:r,size:a,padding:l}=this;this.columns=VTe({stacked:!1,root:o,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5,agChartsExports:t}),o.append(this.columns),this.lines=YTe(t,o,r,a,l),this.updateColors(i,n)}updateColors(e,t){this.columns.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]})),this.lines.forEach(((t,i)=>{t.stroke=e[i+2]}))}};WEe.chartType="columnLineCombo";var jEe=class extends $Te{constructor(e,t,i,n){super(e,t,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:o,columnData:s,areaData:r,size:a,padding:l,agChartsExports:{_Scene:d}}=this;this.columns=VTe({stacked:!1,root:o,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5,agChartsExports:t});const c=new d.BandScale;c.range=[l,a-l],c.domain=[0,1,2,3,4],c.paddingInner=1,c.paddingOuter=0;const h=new d.LinearScale;h.range=[a-l,l],h.domain=[0,6];const u=[],p=h.convert(0),g=c.convert(0);r.forEach(((e,t)=>{const i=u[t]||(u[t]=[]);e.forEach(((e,t)=>{const n=e,o=t,s=c.convert(o),r=h.convert(n);i[t]={x:s,y:r}}));const n=c.convert(e.length-1);u[t].push({x:n,y:p},{x:g,y:p})})),this.areas=u.map((e=>{const t=new d.Path;t.strokeWidth=0,t.fillOpacity=.8;const i=t.path;return e.forEach(((e,t)=>i[t>0?"lineTo":"moveTo"](e.x,e.y))),t}));const m=new d.Group;m.setClipRect(new d.BBox(l,l,a-2*l,a-2*l));const v=new d.Group;v.setClipRect(new d.BBox(l,l,a-2*l,a-2*l)),m.append(this.areas),v.append(this.columns),o.append(m),o.append(v),this.updateColors(i,n)}updateColors(e,t){this.areas.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]})),this.columns.forEach(((i,n)=>{i.fill=e[n+1],i.stroke=t[n+1]}))}};jEe.chartType="areaColumnCombo";var UEe=class extends JTe{constructor(e,t,i,n){super(e,t,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:o,columnData:s,lineData:r,size:a,padding:l,agChartsExports:{_Scene:d}}=this;this.columns=VTe({stacked:!1,root:o,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5,agChartsExports:t}),o.append(this.columns),this.lines=YTe(this.agChartsExports,o,r,a,l);const c="grey",h=new d.Line;h.x1=l,h.y1=l,h.x2=l,h.y2=a-l+3,h.stroke=c;const u=new d.Line;u.x1=l-3+1,u.y1=a-l,u.x2=a-l+1,u.y2=a-l,u.stroke=c;const p=new d.Path;this.buildPenIconPath(p),p.fill="whitesmoke",p.stroke="darkslategrey",p.strokeWidth=1,o.append([u,h,p]),this.updateColors(i,n)}updateColors(e,t){this.columns.forEach(((i,n)=>{i.fill=e[n],i.stroke=t[n]})),this.lines.forEach(((t,i)=>{t.stroke=e[i+2]}))}buildPenIconPath(e){const{path:t}=e;t.moveTo(25.76,43.46),t.lineTo(31.27,48.53),t.moveTo(49.86,22),t.lineTo(49.86,22),t.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),t.lineTo(46.86,21.41),t.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),t.lineTo(25.51,43.8),t.lineTo(25.43,43.89),t.lineTo(23.01,51.89),t.lineTo(22.83,52.46),t.lineTo(31.02,48.86),t.lineTo(49.02,28.52),t.lineTo(49.02,28.52),t.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),t.lineTo(50.75,24.93),t.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),t.closePath(),t.moveTo(41.76,25.5),t.lineTo(47.34,30.5),t.moveTo(40.74,26.65),t.lineTo(46.25,31.71)}};UEe.chartType="customCombo";var KEe={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:eEe},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:iEe},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:oEe}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:sEe},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:aEe},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:dEe}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:hEe},donut:{range:!0,pivot:!0,enterprise:!1,icon:cEe},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:cEe}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:pEe},stackedLine:{range:!0,pivot:!0,enterprise:!1,icon:mEe},normalizedLine:{range:!0,pivot:!0,enterprise:!1,icon:fEe}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:yEe},bubble:{range:!0,pivot:!0,enterprise:!1,icon:bEe}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:xEe},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:SEe},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:DEe}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:EEe},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:REe},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:LEe},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:AEe},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:TEe}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:GEe},histogram:{range:!0,pivot:!1,enterprise:!1,icon:kEe},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:PEe},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:NEe}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:zEe},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:_Ee}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:VEe},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:HEe}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:WEe},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:jEe},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:UEe}}},YEe={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line","stackedLine","normalizedLine"],areaGroup:["area","stackedArea","normalizedArea"],scatterGroup:["scatter","bubble"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},ZEe=class extends En{constructor(e,t,i,n,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:YEe;super('<div class="ag-chart-settings-mini-wrapper"></div>'),this.wrappers=new Map,this.chartController=e,this.fills=t,this.strokes=i,this.themeTemplateParameters=n,this.isCustomTheme=o,this.chartGroups=l({},s)}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((e=>"customCombo"!==e)));const e=this.getGui(),t=this.chartController.isEnterprise(),i=this.chartController.isPivotChart(),n=!i,o=Object.keys(this.chartGroups).map((e=>{var o;const s=e in KEe?KEe[e]:void 0;if(!s)return pt(148,{group:e}),null;const r=(null!==(o=this.chartGroups[e])&&void 0!==o?o:[]).map((o=>{const r=o in s?s[o]:void 0;return r?!t&&r.enterprise?null:n&&r.range||i&&r.pivot?r:null:(pt(149,{group:e,chartType:o}),null)})).filter((e=>null!=e));return 0===r.length?null:{label:this.chartTranslation.translate(e),items:r}})).filter((e=>null!=e));for(const{label:s,items:r}of o){const t=this.createBean(new mDe({title:s,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal",suppressKeyboardNavigation:!0}));for(const e of r){const i=e.icon,n=document.createElement("div");n.classList.add("ag-chart-mini-thumbnail"),n.setAttribute("tabindex","0"),n.setAttribute("role","button");const o=i.chartType,s=()=>{this.chartController.setChartType(o),this.updateSelectedMiniChart()};this.addManagedListeners(n,{click:s,keydown:e=>{e.key!=Do.ENTER&&e.key!==Do.SPACE||(e.preventDefault(),s())}}),this.wrappers.set(o,n),this.createBean(new i(n,this.beans.agChartsExports,this.fills,this.strokes,this.themeTemplateParameters,this.isCustomTheme)),t.addItem(n)}e.appendChild(t.getGui())}this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();this.wrappers.forEach(((t,i)=>{const n=i===e;t.classList.toggle("ag-selected",n);const o=this.chartTranslation.translate(SIe(i));A(t,n?"".concat(o,". ").concat(this.chartTranslation.translate("ariaChartSelected")):o)}))}destroy(){this.wrappers.clear(),super.destroy()}},XEe=class extends En{constructor(e){super('<div class="ag-chart-settings-wrapper">\n            <div data-ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div data-ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div data-ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div data-ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div data-ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>'),this.chartController=e,this.eMiniChartsContainer=Tn,this.eNavBar=Tn,this.eCardSelector=Tn,this.ePrevBtn=Tn,this.eNextBtn=Tn,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",Wr("chartsThemePrevious",this.beans)),this.eNextBtn.insertAdjacentElement("afterbegin",Wr("chartsThemeNext",this.beans)),this.addManagedElementListeners(this.ePrevBtn,{click:()=>this.setActivePalette(this.getPrev(),"left")}),this.addManagedElementListeners(this.eNextBtn,{click:()=>this.setActivePalette(this.getNext(),"right")});const e=()=>this.resetPalettes(!0);this.addManagedListeners(this.chartController,{chartTypeChanged:e,chartApiUpdate:e}),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout((()=>{const e=this.miniChartsContainers.find((e=>!e.getGui().classList.contains("ag-hidden"))).getGui().querySelector(".ag-selected");if(e){const t=e.offsetParent;t&&this.eMiniChartsContainer.scrollTo(0,t.offsetTop)}}),250)}resetPalettes(e){var t;const i=this.chartController.getPalettes(),n=this.chartController.getThemeTemplateParameters(),o=null===(t=this.gos.get("chartToolPanelsDef"))||void 0===t||null===(t=t.settingsPanel)||void 0===t?void 0:t.chartGroupsDef;if(zi(i,this.palettes)&&!e||this.isAnimating)return;this.palettes=i,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex((e=>e===this.chartController.getChartThemeName())),this.cardItems=[],xe(this.eCardSelector),this.destroyMiniCharts();const{themes:s}=this;this.palettes.forEach(((e,t)=>{const i=this.activePaletteIndex===t,{fills:r=[],strokes:a=[]}=e,l=!DIe(s[t],this.beans.agChartsExports._Theme),d=this.createBean(new ZEe(this.chartController,r,a,n[t],l,o));this.miniChartsContainers.push(d),this.eMiniChartsContainer.appendChild(d.getGui()),this.addCardLink(t),i?d.updateSelectedMiniChart():d.setDisplayed(!1)})),le(this.eNavBar,this.palettes.length>1),se(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){const t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedElementListeners(t,{click:()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;se(this.cardItems[e],"ag-selected","ag-not-selected");const i=this.miniChartsContainers[this.activePaletteIndex],n=i.getGui(),o=this.miniChartsContainers[e],s=o.getGui();i.updateSelectedMiniChart(),o.updateSelectedMiniChart();const r="left"===t?-1:1,a=s.style.left="".concat(ve(this.getGui())*r,"px");this.activePaletteIndex=e,this.isAnimating=!0;const l="ag-animating";o.setDisplayed(!0),i.addCssClass(l),o.addCssClass(l),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout((()=>{n.style.left="".concat(-parseFloat(a),"px"),s.style.left="0px"}),0),window.setTimeout((()=>{this.isAnimating=!1,i.removeCssClass(l),o.removeCssClass(l),i.setDisplayed(!1)}),300)}destroyMiniCharts(){xe(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}},qEe=class extends En{constructor(e,t){super(),this.panels=e,this.chartMenuContext=t,this.tabs=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.panels.forEach((e=>{const t=e.replace("chart","").toLowerCase(),i=this.createPanel(t),n=this.createTab(e,t,i);this.tabs.push(n),this.addDestroyFunc((()=>this.destroyBean(i)))})),this.tabbedLayout=new PMe({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!0,closeButtonAriaLabel:this.chartTranslation.translate("ariaChartMenuClose"),onCloseClicked:()=>{var e;null===(e=this.eventSource)||void 0===e||e.focus({preventScroll:!0}),this.dispatchLocalEvent({type:"closed"})}}),this.createBean(this.tabbedLayout)}createTab(e,t,i){const n=document.createElement("div");n.classList.add("ag-chart-tab","ag-chart-".concat(t)),this.createBean(i),n.appendChild(i.getGui());const o=document.createElement("div"),s=this.chartTranslation.translate(t);return o.innerText=s,{title:o,titleLabel:s,bodyPromise:Rn.resolve(n),getScrollableContainer:()=>n.querySelector(".ag-scrollable-container")||n,name:e}}showTab(e){const t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}showMenu(e,t){var i;(this.eventSource=e,t)||(null===(i=this.tabbedLayout)||void 0===i||i.focusHeader(!0))}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){switch(e){case"data":return new aTe(this.chartMenuContext);case"format":return new _Te(this.chartMenuContext);default:return new XEe(this.chartMenuContext.chartController)}}},QEe=class extends En{constructor(e,t,i){super('<div class="ag-chart-menu-wrapper"></div>'),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartMenuContext=i,this.buttons={chartLink:{iconName:"linked",callback:()=>this.chartMenuSvc.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuSvc.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"chartsDownload",callback:()=>this.chartMenuSvc.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"chartsMenu",callback:e=>this.showMenuList(e)}},this.panels=[],this.menuVisible=!1,this.chartController=i.chartController}wireBeans(e){this.chartMenuSvc=e.chartMenuSvc,this.chartMenuListFactory=e.chartMenuListFactory,this.environment=e.environment}postConstruct(){this.chartToolbar=this.createManagedBean(new qAe),this.getGui().appendChild(this.chartToolbar.getGui()),this.refreshToolbarAndPanels(),this.addManagedEventListeners({chartCreated:e=>{if(e.chartId===this.chartController.getChartId()){var t;Boolean(null===(t=this.gos.get("chartToolPanelsDef"))||void 0===t?void 0:t.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,suppressFocus:!0})}}}),this.addManagedListeners(this.chartController,{chartLinkedChanged:this.refreshToolbarAndPanels.bind(this)}),this.refreshMenuClasses(),this.addManagedListeners(this.chartController,{chartApiUpdate:this.refreshToolbarAndPanels.bind(this)})}isVisible(){return this.menuVisible}getExtraPaddingDirections(){return["chartMenu","chartLink","chartUnlink","chartDownload"].some((e=>this.chartToolbarOptions.includes(e)))?["top"]:[]}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){const{panels:e,defaultPanel:t}=this.chartMenuSvc.getChartToolPanels(this.chartController);this.panels=e,this.defaultPanel=t,this.chartToolbarOptions=this.chartMenuSvc.getChartToolbarOptions()}updateToolbar(){const e=this.chartToolbarOptions.map((e=>{const{iconName:t,callback:i}=this.buttons[e];return{buttonName:e,iconName:t,callback:i}}));this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){const t=this.menuPanel=this.createBean(new Zwe({height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return t.setParentComponent(this),this.eMenuPanelContainer.appendChild(t.getGui()),this.tabbedMenu=this.createBean(new qEe(this.panels,this.chartMenuContext)),this.addManagedListeners(this.tabbedMenu,{closed:()=>{this.hideMenu()}}),this.addManagedListeners(t,{destroyed:()=>this.destroyBean(this.tabbedMenu)}),new Rn((i=>{window.setTimeout((()=>{t.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),i(t)}),100)}))}showContainer(e,t){this.menuPanel&&(this.menuVisible=!0,this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,t))}showMenu(e){const{panel:t,eventSource:i,suppressFocus:n}=null!==e&&void 0!==e?e:{};if(this.menuPanel&&!t)this.showContainer(i,n);else{const e=t||this.defaultPanel;let o=this.panels.indexOf(e);o<0&&(pt(143,{panel:t}),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer(i,n)):this.createMenuPanel(o).then((()=>this.showContainer(i,n)))}}hideMenu(){this.menuVisible=!1,this.refreshMenuClasses()}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible)}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}},JEe=["number","category","time","grouped-category"],$Ee=[...JEe,"angle-category","angle-number","radius-category","radius-number"],eRe=class extends Si{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,i)=>this.setCartesianAxisOptions(e,[{expression:t,value:i}]),setValues:t=>this.setCartesianAxisOptions(e,t)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,i)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:i}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,"*"===t?null:t),setValue:(t,i)=>this.setCartesianAxisThemeOverrides(e,[{expression:"*"===t?null:t,value:i}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,i)=>this.getSeriesOption(e(),t,i),setValue:(t,i)=>this.setSeriesOptions(e(),[{expression:t,value:i}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,i,n){const o=this.getRetainedChartThemeOverrideKeys(i,n),s=this.getRetainedChartAxisThemeOverrideKeys(null,i,n),r=this.createChartOptions();for(const a of o){const t=this.retrieveChartOptionsThemeOverride(e,i,a);void 0!==t&&this.assignChartOptionsThemeOverride(r,n,a,t)}return t&&this.assignPersistedAxisOverrides({existingAxes:t,retainedChartAxisThemeOverrideKeys:s,existingChartOptions:e,targetChartOptions:r,existingChartType:i,targetChartType:n}),r.theme.overrides}assignPersistedAxisOverrides(e){const{existingAxes:t,retainedChartAxisThemeOverrideKeys:i,existingChartOptions:n,targetChartOptions:o,existingChartType:s,targetChartType:r}=e;for(const{expression:a,targetAxisTypes:l}of i)for(const e of t.map((e=>e.type))){const t=this.retrieveChartOptionsThemeOverride(n,s,["axes",e,a].join("."));if(void 0!==t)for(const e of l)this.assignChartOptionsThemeOverride(o,r,["axes",e,a].join("."),t)}}getRetainedChartThemeOverrideKeys(e,t){const i=["zoom","navigator"];return["animation",...((e,t)=>{const n=new Array;return pIe(yIe(e))&&pIe(yIe(t))&&n.push(...i),n})(e,t)]}getRetainedChartAxisThemeOverrideKeys(e,t,i){if(pIe(yIe(t))&&pIe(yIe(i))){return this.getRetainedCartesianAxisThemeOverrideKeys(e).map((e=>({expression:e,targetAxisTypes:JEe})))}return[]}getRetainedCartesianAxisThemeOverrideKeys(e){const t="xAxis"===e?["",".top",".bottom"]:"yAxis"===e?["",".left",".right"]:["",".left",".right",".top",".bottom"],i=["crosshair"],n=new Array;for(const o of i)for(const e of t)n.push("".concat(o).concat(e));return n}getChartOption(e){return oIe(this.getChart(),e,void 0)}setChartThemeOverrides(e){const t=this.getChartType(),i=this.createChartOptions();for(const{expression:n,value:o}of e)this.assignChartOptionsThemeOverride(i,t,n,o);this.applyChartOptions(i)}applyChartOptions(e,t){if(0===Object.keys(e).length)return;this.updateChart(e);!(null!==t&&void 0!==t&&t.silent)&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then((()=>e())).catch((e=>gt(108,{e:e})))}getAxisProperty(e){var t;return oIe(null===(t=this.getChart().axes)||void 0===t?void 0:t[0],e,void 0)}setAxisThemeOverrides(e){const t=this.getChart(),i=this.getChartType(),n=this.createChartOptions();for(const{expression:s,value:r}of e){var o;const e=null===(o=t.axes)||void 0===o?void 0:o.filter((e=>{const t=s.split(".");let i=e;for(const n of t){if(!(n in i))return!1;i=i[n]}return!0}));if(e)for(const t of e)this.isValidAxisType(t)&&this.assignChartAxisThemeOverride(n,i,t.type,null,s,r)}this.applyChartOptions(n)}getCartesianAxisProperty(e,t){const i=this.getChartAxes();return oIe(this.getCartesianAxis(i,e),t,void 0)}getCartesianAxisThemeOverride(e,t){const i=this.getChartAxes(),n=this.getCartesianAxis(i,e);if(!n||!this.isValidAxisType(n))return;const o=this.getChartType(),s=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(s,o,n.type,"yAxis"===e?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){const i=this.getChartAxes(),n=this.getCartesianAxis(i,e);if(!n||!this.isValidAxisType(n))return;const o=this.getChartType(),s=this.createChartOptions();for(const{expression:r,value:a}of t)this.assignChartAxisThemeOverride(s,o,n.type,"yAxis"===e?["left","right"]:["bottom","top"],r,a);this.applyChartOptions(s)}setCartesianAxisOptions(e,t){this.updateCartesianAxisOptions(e,((e,i,n)=>{const o=i.indexOf(n);for(const{expression:s,value:r}of t)this.assignChartOption(e,"axes.".concat(o,".").concat(s),r)}))}updateCartesianAxisOptions(e,t){const i=this.getChart().getOptions(),n="axes"in i?i.axes:void 0;if(!i||!n)return;const o=this.getChartAxes(),s=this.getCartesianAxis(o,e);if(!s)return;const r=this.createChartOptions();r.axes=n,t(r,o,s,i),this.applyChartOptions(r)}setCartesianCategoryAxisType(e,t){this.updateCartesianAxisOptions(e,((i,n,o,s)=>{const r=this.getChartType();this.assignPersistedAxisOverrides({existingAxes:[o],retainedChartAxisThemeOverrideKeys:this.getRetainedChartAxisThemeOverrideKeys(e,r,r),existingChartOptions:s,targetChartOptions:i,existingChartType:r,targetChartType:r}),this.assignChartOption(i,"axes.0.type",t),this.chartController.setCategoryAxisType(t)}))}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return"x"===e[0].direction?e[0]:e[1];case"yAxis":return"y"===e[1].direction?e[1]:e[0]}}getSeriesOption(e,t,i){const n=this.getChart().series.find((t=>function(e,t){return function(e){return!!lIe[e]}(e)&&t.type===e}(e,t)));return oIe(i?n:null===n||void 0===n?void 0:n.properties.toJson(),t,void 0)}setSeriesOptions(e,t){const i=this.createChartOptions();for(const{expression:n,value:o}of t)this.assignChartOptionsSeriesThemeOverride(i,e,"series.".concat(n),o);this.applyChartOptions(i)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;return null!==(e=this.getChart().axes)&&void 0!==e?e:[]}retrieveChartAxisThemeOverride(e,t,i,n,o){if(!n)return this.retrieveChartOptionsThemeOverride(e,t,["axes",i,...o?[o]:[]].join("."));for(const s of n){const n=this.retrieveChartOptionsThemeOverride(e,t,["axes",i,s,...o?[o]:[]].join("."));if(void 0!==n)return n}}assignChartAxisThemeOverride(e,t,i,n,o,s){if(n)for(const r of n)this.assignChartOptionsThemeOverride(e,t,["axes",i,r,...o?[o]:[]].join("."),s);else this.assignChartOptionsThemeOverride(e,t,["axes",i,...o?[o]:[]].join("."),s)}isValidAxisType(e){return $Ee.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),t.updateDelta(e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,i){const n=this.getChartThemeOverridesSeriesTypeKeys(t);for(const o of n){const t=this.retrieveChartOptionsSeriesThemeOverride(e,o,i);if(void 0!==t)return t}}assignChartOptionsThemeOverride(e,t,i,n){const o=this.getChartThemeOverridesSeriesTypeKeys(t);for(const s of o)this.assignChartOptionsSeriesThemeOverride(e,s,i,n)}retrieveChartOptionsSeriesThemeOverride(e,t,i){return this.retrieveChartOption(e,["theme","overrides",t,...i?[i]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,i,n){this.assignChartOption(e,["theme","overrides",t,...i?[i]:[]].join("."),n)}getChartThemeOverridesSeriesTypeKeys(e){const t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return oIe(e,t,void 0)}assignChartOption(e,t,i){!function(e,t,i){if(null==e)return;const n=t.split(".");let o=e;n.forEach(((e,t)=>{o[e]||(o[e]={}),t<n.length-1&&(o=o[e])})),o[n[n.length-1]]=i}(e,t,i)}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel();this.eventSvc.dispatchEvent({type:"chartOptionsChanged",chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions})}destroy(){super.destroy()}};var tRe=class extends En{constructor(e){super('\n            <div style="height: 100%; width: 100%;">\n                <div class="ag-chart" data-ref="eWrapper">\n                    <div data-ref="eChartContainer" class="ag-chart-components-wrapper ag-chart-menu-hidden">\n                        <div data-ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                        <div data-ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n                    </div>\n                    <div data-ref="eMenuContainer" class="ag-chart-docked-container"></div>\n                </div>\n            </div>\n            '),this.eChart=Tn,this.eWrapper=Tn,this.eChartContainer=Tn,this.eMenuContainer=Tn,this.eEmpty=Tn,this.params=e}wireBeans(e){this.crossFilterService=e.chartCrossFilterSvc,this.chartTranslation=e.chartTranslation,this.chartMenuSvc=e.chartMenuSvc,this.focusSvc=e.focusSvc,this.popupSvc=e.popupSvc,this.enterpriseChartProxyFactory=e.enterpriseChartProxyFactory,this.environment=e.environment}postConstruct(){const e=l(l({},this.params),{},{chartType:vIe(this.params.chartType),chartThemeName:this.getThemeName()}),t=this.gos.get("enableRtl");this.eWrapper.classList.add(t?"ag-rtl":"ag-ltr");const i=this.createBean(new KIe(e));this.chartController=this.createManagedBean(new VAe(i)),this.chartOptionsService=this.createManagedBean(new eRe(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog?this.addDialog():(this.addManagedEventListeners({gridStylesChanged:this.updateTheme.bind(this)}),this.updateTheme()),this.addMenu(),this.addManagedElementListeners(this.getGui(),{focusin:this.setActiveChartCellRange.bind(this)}),this.addManagedListeners(this.chartController,{chartModelUpdate:this.update.bind(this)}),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}updateTheme(){this.environment.applyThemeClasses(this.getGui())}createChart(){var e;let t;this.chartProxy&&(t=this.chartProxy.destroy({keepChartInstance:!0}));const i=this.chartController.getChartType(),n={agChartsExports:this.beans.agChartsExports,chartType:i,chartInstance:t,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gos.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var e,t;return null!==(e=null===(t=this.chartMenu)||void 0===t?void 0:t.getExtraPaddingDirections())&&void 0!==e?e:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:null!==(e=this.params.crossFiltering)&&void 0!==e&&e,crossFilterCallback:(e,t)=>{this.params.crossFilteringContext.lastSelectedChartId=t?"":this.chartController.getChartId(),t&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(e,t)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:e=>this.chartTranslation.translate(e)};this.params.chartOptionsToRestore=void 0,this.chartType=i,this.chartProxy=this.createChartProxy(n),this.chartProxy?(this.chartController.setChartProxy(this.chartProxy),this.createMenuContext()):pt(138,{chartType:n.chartType})}createMenuContext(){if(this.chartMenuContext)return;const e=this.createManagedBean(new iTe(this.chartOptionsService.getChartThemeOverridesProxy())),t=this.createManagedBean(new iTe(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gos.get("chartThemeOverrides")}createChartProxy(e){var t;const{chartType:i}=e;switch(i){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new UAe(e);case"pie":case"donut":case"doughnut":return new XAe(e);case"area":case"stackedArea":case"normalizedArea":return new HAe(e);case"line":case"stackedLine":case"normalizedLine":return new KAe(e);case"scatter":case"bubble":return new YAe(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new ZAe(e)}const n=null===(t=this.enterpriseChartProxyFactory)||void 0===t?void 0:t.createChartProxy(e);if(!n)throw ft(251,{chartType:i});return n}addDialog(){const e=this.chartTranslation.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:i}=this.getBestDialogSize(),n=this.params.focusDialogOnOpen?()=>setTimeout((()=>Po(this.getGui()))):void 0;this.chartDialog=new Xwe({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:i,component:this,centered:!0,closable:!0,afterGuiAttached:n,postProcessPopupParams:{type:"chart"}}),this.createBean(this.chartDialog),this.chartDialog.addEventListener("destroyed",(()=>{this.destroy(),this.chartMenuSvc.hideAdvancedSettings();const e=this.focusSvc.getFocusedCell();setTimeout((()=>{this.focusSvc.isAlive()&&(e?this.focusSvc.setFocusedCell(l(l({},e),{},{forceBrowserFocus:!0})):Oo(this.beans))}))}))}getBestDialogSize(){const e=this.popupSvc.getPopupParent(),t=.75*ve(e),i=.75*me(e),n=this.chartProxy.getChart();let o=this.params.insideDialog?850:n.width,s=this.params.insideDialog?470:n.height;return(o>t||s>i)&&(o=Math.min(o,t),s=Math.round(.553*o),s>i&&(s=i,o=Math.min(o,Math.round(s/.553)))),{width:o,height:s}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new QEe(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}update(e){if(null!==e&&void 0!==e&&e.chartId){if(!this.chartController.update(e))return}const t=this.chartTypeChanged(e),i=t||this.chartEmpty?(e=>{const t=this.chartType,i=e,n=this.chartProxy.getChart(),o=null===n||void 0===n?void 0:n.getOptions(),s=null===n||void 0===n?void 0:n.axes;return this.chartOptionsService.getPersistedChartThemeOverrides(o,s,t,null!==i&&void 0!==i?i:t)})(t):void 0;t&&this.createChart(),i&&null!==e&&void 0!==e&&e.chartThemeOverrides&&Di(i,e.chartThemeOverrides);const n=null!==i&&void 0!==i?i:null===e||void 0===e?void 0:e.chartThemeOverrides;this.updateChart(n),null!==e&&void 0!==e&&e.chartId&&this.chartProxy.getChart().waitForUpdate().then((()=>{this.chartController.raiseChartApiUpdateEvent()}))}updateChart(e){const{chartProxy:t}=this,i=this.chartController.getSelectedValueColState(),n=this.chartController.getChartData(),o=this.handleEmptyChart(n,i.length);if(this.chartEmpty=o,o)return void(e&&this.chartController.updateThemeOverrides(e));const s=this.chartController.getChartUpdateParams(e);t.update(s),this.chartProxy.getChart().waitForUpdate().then((()=>{this.chartController.raiseChartUpdatedEvent()}))}chartTypeChanged(e){const[t,i]=[this.chartController.getChartType(),null===e||void 0===e?void 0:e.chartType],n=i?vIe(i):void 0;return this.chartType!==t?null!==n&&void 0!==n?n:t:n&&t!==n?n:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const i=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),n=this.chartController.getChartType();let o=1;this.chartController.isActiveXYChart()?o="bubble"===n?3:2:mIe(yIe(n))&&(o=0);const s=t<o||0===e.length;if(this.eChart){const e=i||s;le(this.eChart,!e),le(this.eEmpty,e)}return i?(this.eEmpty.innerText=this.chartTranslation.translate("pivotChartRequiresPivotMode"),!0):!!s&&(this.eEmpty.innerText=this.chartTranslation.translate("noDataToChart"),!0)}downloadChart(e,t,i){this.chartProxy.downloadChart(e,t,i)}openChartToolPanel(e){const t=e?yAe[e]:e;this.chartMenu.showMenu({panel:t})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||this.chartController.setChartRange(!0)}getThemeName(){const e=this.gos.get("chartThemes")||_Ae;if(0===e.length)throw new Error(ft(254));const{chartThemeName:t}=this.params;return e.includes(t)?t:e[0]}getAllKeysInObjects(e){const t={};return e.filter((e=>null!=e)).forEach((e=>{Object.keys(e).forEach((e=>t[e]=null))})),Object.keys(t)}validateCustomThemes(){const e=this.getChartThemes(),t=this.gos.get("customChartThemes");t&&this.getAllKeysInObjects([t]).forEach((t=>{e.includes(t)||pt(139,{customThemeName:t})}))}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,i=this.gos.get("chartThemeOverrides")||{};this.update({type:"".concat(t,"ChartUpdate"),chartId:e,chartThemeOverrides:i})}raiseChartCreatedEvent(){this.chartProxy.getChart().waitForUpdate().then((()=>{this.eventSvc.dispatchEvent({type:"chartCreated",chartId:this.chartController.getChartId()})}))}raiseChartDestroyedEvent(){this.eventSvc.dispatchEvent({type:"chartDestroyed",chartId:this.chartController.getChartId()})}destroy(){var e;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),null===(e=this.onDestroyColorSchemeChangeListener)||void 0===e||e.call(this);const t=this.getGui();xe(t),we(t),this.raiseChartDestroyedEvent()}},iRe=!1;function nRe(e){e.version;return null==e.version&&(e.version=function(e){var t;const i=e;if(null!=e.version)return e.version;const n=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Object.keys(e||{}).some((e=>i.includes(e)))},o=i.chartOptions,s=n(o,"seriesDefaults")?null===o||void 0===o?void 0:o.seriesDefaults:null===o||void 0===o?void 0:o[Object.keys(o)[0]],r={"27.0.0":n(i,"seriesChartTypes"),"26.2.0":!n(o,"seriesDefaults"),"26.1.0":n(null===s||void 0===s?void 0:s.highlightStyle,"item"),"26.0.0":n(null===s||void 0===s?void 0:s.highlightStyle,"series"),"25.1.0":n(null===s||void 0===s?void 0:s.label,"minAngle"),"25.0.0":n(i,"modelType","aggFunc","unlinkChart","suppressChartRanges")||n(s,"lineDash","lineDashOffset"),"24.0.0":n(i,"chartThemeName","chart")||n(o,"series"),"23.2.0":n(o,"navigator"),"23.0.0":n(null===o||void 0===o||null===(t=o.legend)||void 0===t||null===(t=t.item)||void 0===t?void 0:t.marker,"shape"),"22.1.0":n(i,"chartPalette","chartType")},a="27.1.0",l=Object.entries(r).filter((e=>{let[t,i]=e;return i}));iRe;const[d=a]=l[0];iRe;return d}(e)),e=bRe("23.0.0",e,oRe),e=bRe("24.0.0",e,sRe),e=bRe("25.1.0",e,rRe),e=bRe("26.0.0",e,aRe),e=bRe("26.1.0",e,lRe),e=bRe("26.2.0",e,dRe),e=bRe("28.0.0",e,cRe),e=bRe("28.2.0",e,hRe),e=bRe("29.0.0",e,uRe),e=bRe("29.1.0",e,pRe),e=bRe("29.2.0",e,gRe),e=bRe("30.0.0",e,mRe),e=bRe("31.0.0",e,vRe),e=bRe("32.0.0",e,fRe),e=function(e){return e=IRe("chartOptions.*.width",e),e=IRe("chartOptions.*.height",e),e=wRe("chartOptions.*.axes.category.label.autoRotate",!0,e),e}(e=bRe("33.0.0",e,yRe)),e=bRe(Ewe,e,(e=>e))}function oRe(e){return e=kRe("chartOptions.legend.item.marker.type","shape",e),e=kRe("chartOptions.seriesDefaults.marker.type","shape",e),e=kRe("chartOptions.legend.padding","spacing",e)}function sRe(e){var t;e=IRe("chartOptions.seriesDefaults.marker.minSize",e);const{chartType:i,chartPalette:o,chartOptions:{xAxis:s,yAxis:r}}=e,a=n(e.chartOptions,Sbe),d=n(e,Mbe),c=function(e){switch(e){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"stackedLine":case"normalizedLine":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}(i),h=null===c||void 0===c?void 0:c.map(((e,t)=>l({type:e},0===t?s:r)));return l({chartType:i,chartThemeName:null!==(t={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[o])&&void 0!==t?t:"ag-default",chartOptions:l(l({},a),{},{axes:h,xAxis:s,yAxis:r})},d)}function rRe(e){return e=kRe("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",e)}function aRe(e){return e=IRe("chart",e=TRe("chartOptions.seriesDefaults.highlightStyle",e,(e=>{let{dimOpacity:t}=e;return l(l({},n(e,Dbe)),null!=t?{series:{dimOpacity:t}}:{})}))),e=IRe("chartOptions.seriesDefaults.tooltipClass",e),e=xRe("chartOptions.axes[].label.rotation",0,e=IRe("chartOptions.seriesDefaults.tooltipTracking",e)),e=xRe("chartOptions.axes[].label.rotation",335,e)}function lRe(e){const t=e=>{let{item:t,series:i}=e;return l({item:l(l({},n(e,kbe)),t)},i?{series:i}:{})};return e=TRe("chartOptions.seriesDefaults.highlightStyle",e,t),e=TRe("chartOptions.series[].highlightStyle",e,t)}function dRe(e){e=MRe("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",e),e=MRe("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",e),e=IRe("chartOptions.seriesDefaults.fill",e=MRe("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",e)),e=IRe("chartOptions.seriesDefaults.stroke",e),e=IRe("chartOptions.seriesDefaults.callout.colors",e),e=IRe("chartOptions.xAxis",e),e=IRe("chartOptions.yAxis",e);const{chartType:t,chartOptions:{axes:i,series:o,seriesDefaults:s}}=e,r=n(e.chartOptions,Ibe),a=n(e,Abe),d=vIe(t),c=yIe(d),h=[c],u={};if(!bIe(c)){const e={top:{},bottom:{},left:{},right:{}},t=i.map((t=>{let{type:i}=t,o=n(t,Tbe);return{[i]:l(l({},e),o)}})).reduce(RRe,{});MIe.filter((e=>null==t[e])).forEach((i=>{t[i]=l({},e)})),u.axes=t}const p=h.map((e=>({[e]:l(l({},u),{},{series:s},r)}))).reduce(RRe,{});return e=l(l({},a),{},{chartType:d,chartOptions:p})}function cRe(e){return e=IRe("chartOptions.*.title.padding",e),e=IRe("chartOptions.*.subtitle.padding",e),e=wRe("chartOptions.*.axes.*.title.enabled",!1,e=IRe("chartOptions.*.axes.*.title.padding",e))}function hRe(e){return e=kRe("chartOptions.pie.series.callout","calloutLine",e),e=kRe("chartOptions.pie.series.label","calloutLabel",e),e=kRe("chartOptions.pie.series.labelKey","sectorLabelKey",e),e=kRe("chartOptions.pie.series.labelName","sectorLabelName",e),e=kRe("chartOptions.donut.series.callout","calloutLine",e),e=kRe("chartOptions.donut.series.label","calloutLabel",e),e=kRe("chartOptions.donut.series.labelKey","sectorLabelKey",e),e=kRe("chartOptions.donut.series.labelName","sectorLabelName",e)}function uRe(e){return e=DRe("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",e),e=DRe("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",e),e=DRe("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",e),e=DRe("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",e),e=MRe("chartOptions.scatter.series.paired","chartOptions.scatter.paired",e=DRe("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",e))}function pRe(e){return e=IRe("chartOptions.axes[].tick.count",e)}function gRe(e){return e=TRe("chartOptions.*.tooltip",e,(e=>{let{tracking:t}=e;const i=l({},n(e,Ebe));var o,s;if(!1===t)null!==(o=i.position)&&void 0!==o||(i.position={type:"pointer"}),null!==(s=i.range)&&void 0!==s||(i.range="nearest");else if(!0===t){var r,a;null!==(r=i.position)&&void 0!==r||(i.position={type:"node"}),null!==(a=i.range)&&void 0!==a||(i.range="nearest")}return i}))}function mRe(e){return e=kRe("chartOptions.pie.series.labelKey","sectorLabelKey",e),e=wRe("chartOptions.common.legend.position","right",e=SRe("chartOptions.common.legend.enabled",!0,e=IRe("chartOptions.*.series.flipXY",e=gRe(e=pRe(e=kRe("chartOptions.pie.series.labelName","sectorLabelName",e))))))}function vRe(e){const t=kRe("chartOptions.column","bar",e),i={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"}[t.chartThemeName]||t.chartThemeName;return l(l({},t),{},{chartThemeName:i})}function fRe(e){return e=ARe("chartOptions.*.autoSize",!0,e,((e,t)=>{!0===e[t]||!1===e[t]&&(e.minHeight=600,e.minWidth=300),delete e[t]}))}function yRe(e){return e=IRe("chartOptions.*.axes.category.label.format",e),e=IRe("chartOptions.*.axes.category.crosshair.label.format",e),e=IRe("chartOptions.*.axes.angle-category.label.format",e),e=kRe("chartOptions.*.axes.*.label.padding","spacing",e=IRe("chartOptions.*.axes.radius-category.label.format",e)),e=IRe("chartOptions.*.axes.*.crossLines.label.className",e=kRe("chartOptions.*.navigator.miniChart.label.padding","spacing",e)),e=ERe("chartOptions.bar.series.label.placement",e=IRe("chartOptions.bullet",e=ARe("chartOptions.*.axes.*.crossLines.label.position",!0,e,((e,t)=>{"string"===typeof e[t]&&(e[t]=e[t].replace(/([A-Z])/,"-$1").toLowerCase())}))),{inside:"inside-center",outside:"inside-end"}),e=IRe("chartOptions.*.navigator.min",e=ERe("chartOptions.waterfall.series.item.*.label.placement",e,{inside:"inside-center",start:"outside-start",end:"outside-end"})),e=IRe("chartOptions.*.navigator.max",e),e=IRe("chartOptions.*.zoom.ratioX",e),e=IRe("chartOptions.*.zoom.ratioY",e),e=IRe("chartOptions.*.zoom.rangeX",e),e=IRe("chartOptions.*.zoom.rangeY",e)}function bRe(e,t,i){if(CRe(e)>CRe(t.version)){iRe;const n=i(t);return n.version=e,n}return t}function CRe(e){const{major:t,minor:i,patch:n}=function(e){const t=e.includes("-beta")?e.replace(/-beta.*/,""):e,i="string"===typeof t?t.split(".").map((e=>Number(e))):[];if(3!==i.length||i.some((e=>isNaN(e))))throw new Error(ft(253,{version:t}));return{major:i[0],minor:i[1],patch:i[2]}}(e);return 1e4*t+100*i+n}function xRe(e,t,i){return ARe(e,!0,i,((e,i)=>{e[i]===t&&delete e[i]}))}function wRe(e,t,i){return ARe(e,!1,i,((e,i)=>{null==e[i]&&(e[i]=t)}))}function SRe(e,t,i){"string"===typeof e&&(e=e.split("."));const n=e[0];var o;e.length>1&&(i[n]=SRe(e.slice(1),t,null!==(o=i[n])&&void 0!==o?o:{}));return Object.keys(i).includes(n)||(i[n]=t),i}function MRe(e,t,i){let n,o=!1;return i=ARe(e,!0,i,((e,t)=>{o=!0,n=e[t],delete e[t]})),o?ARe(t,!1,i,((e,t)=>{e[t]=n})):i}function DRe(e,t,i){let n,o=!1;return i=ARe(e,!0,i,((e,t)=>{o=!0,n=e[t],delete e[t]})),o?ARe(t,!1,i,((e,t)=>{void 0===e[t]&&(e[t]=n)})):i}function kRe(e,t,i){return ARe(e,!0,i,((e,i)=>{e[t]=e[i],delete e[i]}))}function IRe(e,t){return ARe(e,!0,t,((e,t)=>delete e[t]))}function ARe(e,t,i,n){const o=e instanceof Array?e:e.split("."),s=o.slice(0,o.length-1),r=o[o.length-1];return TRe(s,i,(e=>{const i=Object.keys(e).includes(r);if(t&&!i)return e;const o=l({},e);return n(o,r),o}))}function TRe(e,t,i){const n=e instanceof Array?e:e.split(".");if(t=l({},t),0===n.length)return i(t);if(n[0].startsWith("{")){const e=n[0].substring(1,n[0].lastIndexOf("}")).split(",");for(const o of e)null!=t[o]&&(t[o]=TRe(n.slice(1),t[o],i))}else if(n[0].endsWith("[]")){const o=n[0].substring(0,e[0].indexOf("["));t[o]instanceof Array&&(t[o]=t[o].map((e=>TRe(n.slice(1),e,i))))}else if("*"===n[0])for(const o of Object.keys(t))t[o]=TRe(n.slice(1),t[o],i);else null!=t[n[0]]&&(t[n[0]]=TRe(n.slice(1),t[n[0]],i));return t}function ERe(e,t,i){return ARe(e,!0,t,((e,t)=>{var n;"string"===typeof e[t]&&(e[t]=null!==(n=i[t])&&void 0!==n?n:t)}))}var RRe=(e,t)=>l(l({},e),t),LRe=class extends Si{constructor(){super(...arguments),this.beanName="chartSvc",this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>this.agChartsExports.isEnterprise}wireBeans(e){this.visibleCols=e.visibleCols,this.rangeSvc=e.rangeSvc,this.agChartsExports=e.agChartsExports}updateChart(e){if(0===this.activeChartComps.size)return void pt(124);const t=[...this.activeChartComps].find((t=>t.getChartId()===e.chartId));t?t.update(e):pt(125,{chartId:e.chartId})}getChartModels(){const e=[];return this.activeChartComps.forEach((t=>e.push((e=>l(l({},e),{},{version:Ewe}))(t.getChartModel())))),e}getChartRef(e){let t;return this.activeCharts.forEach((i=>{i.chartId===e&&(t=i)})),t}getChartComp(e){let t;return this.activeChartComps.forEach((i=>{i.getChartId()===e&&(t=i)})),t}getChartImageDataURL(e){let t;return this.activeChartComps.forEach((i=>{i.getChartId()===e.chartId&&(t=i.getChartImageDataURL(e.fileFormat))})),t}downloadChart(e){const t=Array.from(this.activeChartComps).find((t=>t.getChartId()===e.chartId));null===t||void 0===t||t.downloadChart(e.dimensions,e.fileName,e.fileFormat)}openChartToolPanel(e){const t=Array.from(this.activeChartComps).find((t=>t.getChartId()===e.chartId));null===t||void 0===t||t.openChartToolPanel(e.panel)}closeChartToolPanel(e){const t=Array.from(this.activeChartComps).find((t=>t.getChartId()===e));null===t||void 0===t||t.closeChartToolPanel()}createChartFromCurrentRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"groupedColumn",t=arguments.length>1?arguments[1]:void 0;const i=this.getSelectedRange();return this.createChart({cellRange:i,chartType:e,focusDialogOnOpen:!t})}restoreChart(e,t){if(!e)return void pt(126);let i,n,o,s;return e.version!==Ewe&&(e=nRe(e)),"pivot"===e.modelType?(this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"}),i=this.createCellRange(void 0,!0),n=!0,o=!0):(i=this.createCellRange(e.cellRange),s=e.chartPalette,o=e.suppressChartRanges),i?this.createChart(l(l({},e),{},{cellRange:i,pivotChart:n,suppressChartRanges:o,chartContainer:t,chartOptionsToRestore:e.chartOptions,chartPaletteToRestore:s})):void 0}createRangeChart(e,t){const i=this.createCellRange(e.cellRange);if(i)return this.createChart(l(l({},e),{},{cellRange:i,focusDialogOnOpen:!t}))}createPivotChart(e,t){this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const i=this.createCellRange(void 0,!0);if(i)return this.createChart(l(l({},e),{},{cellRange:i,pivotChart:!0,suppressChartRanges:!0,focusDialogOnOpen:!t}))}createCrossFilterChart(e,t){const i=this.createCellRange(e.cellRange);if(!i)return;const n=!("undefined"!==typeof e.suppressChartRanges&&null!==e.suppressChartRanges)||e.suppressChartRanges;return this.createChart(l(l({},e),{},{cellRange:i,suppressChartRanges:n,crossFiltering:!0,focusDialogOnOpen:!t}))}createChart(e){const t=function(e,t){return zAe(e,[NAe(t),FAe(t)])}(e,this.agChartsExports.isEnterprise);if(!t)return;e=!0===t?e:t;const{chartType:i,chartContainer:n}=e,o=this.gos.getCallback("createChartContainer"),s=l(l({},e),{},{chartId:this.generateId(),chartType:vIe(i),insideDialog:!(n||o),crossFilteringContext:this.crossFilteringContext,crossFilteringResetCallback:()=>this.activeChartComps.forEach((e=>e.crossFilteringReset()))}),r=new tRe(s);this.createBean(r);const a=this.createChartRef(r);return n?n.appendChild(a.chartElement):o?o(a):r.addEventListener("destroyed",(()=>{this.activeChartComps.delete(r),this.activeCharts.delete(a)})),a}createChartRef(e){const t={destroyChart:()=>{this.activeCharts.has(t)&&(this.destroyBean(e),this.activeChartComps.delete(e),this.activeCharts.delete(t))},focusChart:()=>{Po(e.getGui())},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(t),this.activeChartComps.add(e),t}getSelectedRange(){var e,t;const i=null!==(e=null===(t=this.rangeSvc)||void 0===t?void 0:t.getCellRanges())&&void 0!==e?e:[];return i.length>0?i[0]:{columns:[]}}generateId(){return"id-".concat(Math.random().toString(36).substring(2,18))}createCellRange(e,t){var i;const n=t?{rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.visibleCols.allCols.map((e=>e.getColId()))}:e,o=n&&(null===(i=this.rangeSvc)||void 0===i?void 0:i.createPartialCellRangeFromRangeParams(n,!0));return o||pt(127,{allRange:t}),o}destroy(){this.activeCharts.forEach((e=>e.destroyChart())),super.destroy()}};function PRe(e){return e&&e.match(/\d+\.\d+\.\d+/)}function NRe(e){let{type:t,gridVersion:i,chartsVersion:n}=e;const o="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!i)return o;const s=function(e){if(!e||!PRe(e))return;const[t,i]=e.split(".")||[],n="".concat(t,".").concat(i,".x"),o=parseInt(t,10)-28+6;if(o<0)return;const s=i;return{gridMajorMinor:n,chartsMajorMinor:"".concat(o,".").concat(s,".x")}}(i);if(!s)return o;const{gridMajorMinor:r,chartsMajorMinor:a}=s;return"incompatible"===t?"AG Grid version ".concat(i," and AG Charts version ").concat(n," is not supported. AG Grid version ").concat(r," should be used with AG Chart ").concat(a,". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."):"invalidCharts"===t?"AG Grid version ".concat(r," should be used with AG Chart ").concat(a," not ").concat(n,". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."):o}function FRe(e){let{gridVersion:t,chartsVersion:i}=e;if(!PRe(i))return{isValid:!1,message:NRe({type:"invalidCharts",gridVersion:t,chartsVersion:i})};if(!PRe(t))return{isValid:!1,message:NRe({type:"invalidGrid",gridVersion:t,chartsVersion:i})};const[n,o]=t.split(".")||[],[s,r,a]=i.split(".")||[],l=function(e){let{gridMajorVersion:t,chartsMajorVersion:i}=e;const n=parseInt(t,10)-28;return n===parseInt(i,10)-6&&n>=0}({gridMajorVersion:n,chartsMajorVersion:s});return l&&o===r||a.includes("beta")?{isValid:!0}:l&&o===r?{isValid:!1,message:NRe({type:"invalid",gridVersion:t,chartsVersion:i})}:{isValid:!1,message:NRe({type:"incompatible",gridVersion:t,chartsVersion:i})}}var ORe={linked:"linked",unlinked:"unlinked",chartsMenu:"menu-alt",chartsDownload:"save",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",chartsColorPicker:"small-down",chartsThemePrevious:"previous",chartsThemeNext:"next"},BRe={getChartModels:function(e){return e.frameworkOverrides.wrapIncoming((()=>{var t;return null===(t=e.chartSvc)||void 0===t?void 0:t.getChartModels()}))},getChartRef:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.getChartRef(t)}))},getChartImageDataURL:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.getChartImageDataURL(t)}))},downloadChart:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.downloadChart(t)}))},openChartToolPanel:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.openChartToolPanel(t)}))},closeChartToolPanel:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.closeChartToolPanel(t.chartId)}))},createRangeChart:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.createRangeChart(t,!0)}))},createPivotChart:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.createPivotChart(t,!0)}))},createCrossFilterChart:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.createCrossFilterChart(t,!0)}))},updateChart:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.chartSvc)||void 0===i?void 0:i.updateChart(t)}))},restoreChart:function(e,t,i){return e.frameworkOverrides.wrapIncoming((()=>{var n;return null===(n=e.chartSvc)||void 0===n?void 0:n.restoreChart(t,i)}))}},GRe=[xke,Rwe,al,Lh,HSe],zRe="IntegratedCharts",_Re=e=>{var t;if(e.setup(),null===(t=e.setGridContext)||void 0===t||t.call(e,!0),e.isEnterprise&&e.setLicenseKey){const t={setLicenseKey:e.setLicenseKey};Fbe.setChartsLicenseManager(t)}return{moduleName:zRe,version:Ewe,icons:ORe,apiFunctions:BRe,dependsOn:GRe,css:['.ag-chart{display:flex;height:100%;position:relative;width:100%}.ag-chart-components-wrapper{display:flex}.ag-chart-canvas-wrapper,.ag-chart-components-wrapper{flex:1 1 auto;position:relative}.ag-chart-menu{background:var(--ag-background-color);background-color:color-mix(in srgb,transparent,var(--ag-background-color) 30%);border-radius:var(--ag-border-radius);display:flex;flex-direction:row;gap:20px;padding:4px 2px;position:absolute;top:8px;width:auto;--ag-icon-size:20px}:where(.ag-ltr) .ag-chart-menu{justify-content:right;right:calc(var(--ag-cell-horizontal-padding) + var(--ag-spacing) - 4px)}:where(.ag-rtl) .ag-chart-menu{justify-content:left;left:calc(var(--ag-cell-horizontal-padding) + var(--ag-spacing) - 4px)}:where(.ag-chart) .ag-chart-menu{display:none}:where(.ag-chart-menu-hidden:hover) .ag-chart-menu{display:block}.ag-chart-docked-container{min-width:var(--ag-chart-menu-panel-width);position:relative}:where(.ag-chart-menu-hidden)~.ag-chart-docked-container{display:none}.ag-chart-tabbed-menu{display:flex;flex-direction:column;height:100%;overflow:hidden;width:100%}.ag-chart-tabbed-menu-header{cursor:default;flex:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-chart-tabbed-menu-body{align-items:stretch;display:flex;flex:1 1 auto;overflow:hidden;position:relative;&:after{background:linear-gradient(var(--ag-background-color),transparent);content:"";display:block;height:16px;left:0;position:absolute;right:0;top:0}}.ag-chart-tab{overflow:hidden;overflow-y:auto;width:100%}.ag-chart-settings{overflow-x:hidden}.ag-chart-settings-wrapper{display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;width:100%}.ag-chart-settings-nav-bar{align-items:center;border-top:1px solid var(--ag-border-color);display:flex;height:30px;padding:0 10px;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ag-chart-settings-card-selector{align-items:center;display:flex;flex:1 1 auto;height:100%;justify-content:space-around;padding:0 10px}.ag-chart-settings-card-item{background-color:var(--ag-foreground-color);border-radius:4px;cursor:pointer;height:8px;position:relative;width:8px;&.ag-not-selected{opacity:.2}&:before{background-color:transparent;content:" ";display:block;height:20px;left:50%;margin-left:-10px;margin-top:-10px;position:absolute;top:50%;width:20px}&.ag-selected{background-color:var(--ag-accent-color)}}.ag-chart-settings-next,.ag-chart-settings-prev{flex:none;position:relative;&:focus-within{border-radius:1px;box-shadow:var(--ag-focus-shadow)}}.ag-chart-settings-next-button,.ag-chart-settings-prev-button{cursor:pointer;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}.ag-chart-settings-mini-charts-container{flex:1 1 auto;overflow:hidden auto;position:relative}.ag-chart-settings-mini-wrapper{display:flex;flex-direction:column;left:0;min-height:100%;overflow:hidden;padding-bottom:var(--ag-widget-container-vertical-padding);position:absolute;top:0;width:100%;&.ag-animating{transition:left .3s;transition-timing-function:ease-in-out}}.ag-chart-mini-thumbnail{border:1px solid var(--ag-border-color);border-radius:5px;cursor:pointer;&.ag-selected{border-color:var(--ag-accent-color);border-width:2px}&:focus-visible{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}}.ag-chart-mini-thumbnail-canvas{display:block}.ag-chart-advanced-settings-wrapper,.ag-chart-data-wrapper,.ag-chart-format-wrapper{display:flex;flex-direction:column;padding-bottom:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-chart-advanced-settings-wrapper,.ag-chart-data-wrapper{height:100%;overflow-y:auto}.ag-chart-advanced-settings{background-color:var(--ag-chrome-background-color)}.ag-chart-advanced-settings,.ag-chart-advanced-settings-wrapper{width:100%}.ag-chart-advanced-settings-wrapper{padding-bottom:0}.ag-chart-advanced-settings-section{border-bottom:1px solid var(--ag-border-color);display:flex;margin:0;padding-bottom:var(--ag-widget-container-vertical-padding);padding-top:var(--ag-widget-container-vertical-padding)}.ag-chart-empty-text{align-items:center;background-color:var(--ag-background-color);display:flex;height:100%;justify-content:center;top:0;width:100%}.ag-charts-font-size-color{align-self:stretch;display:flex;justify-content:space-between}.ag-charts-data-group-item{padding-bottom:var(--ag-widget-container-vertical-padding);position:relative}.ag-charts-data-group-item:where(:not(:last-child)){margin-bottom:var(--ag-spacing)}.ag-chart-menu-icon{border-radius:var(--ag-border-radius);cursor:pointer;margin:2px 0;opacity:.8;&:hover{opacity:1}}.ag-chart-menu-toolbar-button{background-color:unset;border:0;border-radius:1px;padding:0 2px}.ag-chart-data-column-drag-handle{margin-left:var(--ag-spacing)}.ag-charts-advanced-settings-top-level-group-title-bar{background-color:unset;position:relative}.ag-charts-data-group-container{padding:calc(var(--ag-widget-container-vertical-padding)*.5) var(--ag-widget-container-horizontal-padding)}.ag-charts-data-group-item:where(:not(.ag-charts-format-sub-level-group,.ag-pill-select,.ag-select)){height:var(--ag-list-item-height)}.ag-charts-data-group-item:where(.ag-picker-field){margin-top:var(--ag-spacing)}.ag-charts-advanced-settings-top-level-group-container,.ag-charts-format-top-level-group-container{margin-left:calc(var(--ag-spacing)*2);padding:var(--ag-spacing)}.ag-charts-advanced-settings-top-level-group-item,.ag-charts-format-top-level-group-item{margin:var(--ag-spacing) 0}.ag-charts-format-sub-level-group-container{display:flex;flex-direction:column;padding:var(--ag-widget-vertical-spacing) 0}.ag-charts-settings-group-container{display:grid;grid-template-columns:60px 1fr 60px 1fr 60px;padding:var(--ag-spacing);row-gap:8px;:where(.ag-chart-mini-thumbnail:nth-child(3n+1)){grid-column:1}:where(.ag-chart-mini-thumbnail:nth-child(3n+2)){grid-column:3}:where(.ag-chart-mini-thumbnail:nth-child(3n+3)){grid-column:5}}.ag-chart-data-section,.ag-chart-format-section{display:flex;margin:0;:where(.ag-label:not(.ag-group-title-bar)){color:var(--ag-chart-menu-label-color)}:where(.ag-label-align-top .ag-label){margin-bottom:var(--ag-widget-vertical-spacing);margin-top:calc(var(--ag-widget-vertical-spacing)*.5)}:where(.ag-slider.ag-label-align-top .ag-label){margin-bottom:0}:where(label){display:inline-block}}.ag-chart-menu-panel{--ag-panel-background-color:var(--ag-chrome-background-color)}:where(.ag-ltr) .ag-chart-menu-panel{border-left:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-chart-menu-panel{border-right:1px solid var(--ag-border-color)}.ag-charts-data-group-title-bar,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-container,.ag-charts-settings-group-title-bar{border-top:none;font-weight:500;padding:0 calc(var(--ag-spacing)*1.5)}.ag-charts-format-sub-level-group-title-bar{background:none;font-weight:500;padding:var(--ag-widget-vertical-spacing) 0}.ag-chart-data-wrapper,.ag-chart-format-wrapper,.ag-charts-data-group-container,.ag-charts-data-group-title-bar,.ag-charts-format-sub-level-group,.ag-charts-format-sub-level-group-container>*,.ag-charts-format-sub-level-group-item:last-child,.ag-charts-format-top-level-group,.ag-charts-format-top-level-group-item,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-container,.ag-charts-settings-group-title-bar,:where(.ag-charts-format-top-level-group) .ag-charts-format-top-level-group-container{margin:0;padding:0}.ag-charts-data-group-title-bar,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-title-bar{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:relative}.ag-charts-data-group,.ag-charts-format-top-level-group{border-top:1px solid var(--ag-border-color)}:where(.ag-charts-data-group) .ag-charts-data-group-container,:where(.ag-charts-format-top-level-group) .ag-charts-format-top-level-group-container,:where(.ag-charts-settings-group) .ag-charts-settings-group-container{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-charts-format-sub-level-group-container>*,.ag-charts-format-sub-level-no-header-group-container>*,.ag-charts-format-top-level-group-container>*{margin-bottom:var(--ag-widget-vertical-spacing)}.ag-charts-advanced-settings-top-level-group-container{margin:0}:where(.ag-charts-advanced-settings-top-level-group){.ag-charts-advanced-settings-top-level-group-container,.ag-charts-advanced-settings-top-level-group-title-bar{padding:0 var(--ag-widget-container-horizontal-padding)}}.ag-charts-advanced-settings-top-level-group-item{margin-bottom:0;margin-top:calc(var(--ag-widget-vertical-spacing)*2)}.ag-chart-settings-card-item.ag-not-selected:hover{opacity:.35}.ag-angle-select{align-items:center;display:flex}.ag-angle-select-wrapper{display:flex}.ag-angle-select-parent-circle{background-color:var(--ag-background-color);border:1px solid;border-color:var(--ag-border-color);border-radius:12px;display:block;height:24px;position:relative;width:24px}.ag-angle-select-child-circle{background-color:var(--ag-foreground-color);border-radius:3px;height:6px;left:12px;margin-left:-3px;margin-top:-4px;position:absolute;top:4px;width:6px}.ag-slider-wrapper{display:flex;:where(.ag-input-field){flex:1 1 auto}}.ag-color-panel{display:flex;flex-direction:column;padding:var(--ag-spacing);text-align:center;width:100%}.ag-spectrum-color{cursor:default;flex:1 1 auto;overflow:visible;position:relative}.ag-spectrum-fill{inset:0;position:absolute}.ag-spectrum-val{background-image:linear-gradient(0deg,#000,hsla(20,42%,65%,0));cursor:pointer}.ag-spectrum-dragger{background:#000;border:3px solid #fff;border-radius:18px;box-shadow:0 0 2px 0 rgba(0,0,0,.24);cursor:pointer;height:18px;pointer-events:none;position:absolute;width:18px}.ag-spectrum-alpha,.ag-spectrum-hue{cursor:default}.ag-spectrum-hue-background{background:linear-gradient(270deg,red 3%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red);height:100%;width:100%}.ag-spectrum-alpha-background{background:linear-gradient(to right,var(--ag-internal-spectrum-alpha-color-from),var(--ag-internal-spectrum-alpha-color-to)),url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>\') 0 0 /4px 4px;height:100%;width:100%}.ag-spectrum-tool{border-radius:2px;cursor:pointer;height:11px;margin-bottom:10px;position:relative}.ag-spectrum-slider{border:2px solid #fff;border-radius:13px;box-shadow:0 1px 4px 0 rgba(0,0,0,.37);height:13px;margin-top:-12px;pointer-events:none;position:absolute;width:13px}:where(.ag-spectrum-alpha) .ag-spectrum-slider{background:linear-gradient(to bottom,var(--ag-internal-spectrum-alpha-color),var(--ag-internal-spectrum-alpha-color)) var(--ag-background-color)}.ag-recent-colors{display:flex;gap:6px;margin-bottom:2px;margin-left:var(--ag-spacing);margin-right:var(--ag-spacing)}.ag-recent-color{border:1px solid var(--ag-border-color);cursor:pointer}.ag-angle-select[disabled]{opacity:.5;pointer-events:none}:where(.ag-ltr) .ag-angle-select-field,:where(.ag-ltr) .ag-slider-field{margin-right:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-angle-select-field,:where(.ag-rtl) .ag-slider-field{margin-left:calc(var(--ag-spacing)*2)}.ag-color-dialog{border-radius:5px}:where(.ag-color-picker){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:var(--ag-spacing)}.ag-picker-field-display{align-items:center;display:flex;flex-direction:row;min-height:var(--ag-list-item-height)}}:where(.ag-ltr) .ag-color-picker-color,:where(.ag-ltr) .ag-color-picker-value{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-color-picker-color,:where(.ag-rtl) .ag-color-picker-value{margin-left:var(--ag-spacing)}.ag-spectrum-tools{padding-bottom:0;padding-left:0;padding-right:0}.ag-spectrum-alpha-background,.ag-spectrum-hue-background{border-radius:2px}.ag-color-input-color,.ag-color-picker-color,.ag-recent-color{border-radius:4px}.ag-spectrum-sat{background-image:linear-gradient(90deg,#fff,hsla(20,42%,65%,0))}.ag-recent-color,.ag-spectrum-color,.ag-spectrum-slider{&:where(:not(:disabled,[readonly])):focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-color-input-color,.ag-color-picker-color{border:1px solid var(--ag-border-color);border-radius:2px;height:var(--ag-icon-size);width:var(--ag-icon-size)}:where(.ag-color-input){.ag-color-input-color{position:absolute}}:where(.ag-ltr) :where(.ag-color-input){.ag-input-field-input{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing)*2)}.ag-color-input-color{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-color-input){.ag-input-field-input{padding-right:calc(var(--ag-icon-size) + var(--ag-spacing)*2)}.ag-color-input-color{margin-right:var(--ag-spacing)}}.ag-range-field{align-items:center;display:flex;:where(.ag-input-wrapper){height:100%}}.ag-range-field-input{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;height:100%;overflow:visible;padding:0;width:100%;&:disabled{opacity:.5}}.ag-range-field-input{&::-webkit-slider-runnable-track{background-color:var(--ag-border-color);border-radius:1.5px;height:3px;margin:0;padding:0;width:100%}&::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background-color:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:100%;height:var(--ag-icon-size);margin:0;padding:0;transform:translateY(calc(var(--ag-icon-size)*-.5 + 1.5px));width:var(--ag-icon-size)}&:focus::-webkit-slider-thumb{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}&:active::-webkit-slider-runnable-track{background-color:var(--ag-accent-color)}}.ag-range-field-input{&::-moz-range-track{background-color:var(--ag-border-color);border-radius:1.5px;height:3px;margin:0;padding:0;width:100%}&::-moz-ag-range-thumb{-moz-appearance:none;appearance:none;background-color:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:100%;height:var(--ag-icon-size);margin:0;padding:0;transform:translateY(calc(var(--ag-icon-size)*-.5 + 1.5px));width:var(--ag-icon-size)}&:focus::-moz-ag-range-thumb{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}&:active::-moz-ag-range-track{background-color:var(--ag-accent-color)}}'],validate:()=>FRe({gridVersion:Ewe,chartsVersion:e.VERSION}),beans:[iIe.bind(null,e),LRe,xAe,vAe,gAe,bAe,qIe,uAe]}},VRe=[Sp,nke,DMe,gDe,lke,pke,VMe,HMe,xke,jMe,qDe,QDe,JDe,Zke,Xke,aDe,wDe,kSe,_Se,uDe,$De,Ike,Vke],HRe="AllEnterprise",WRe={with:e=>({moduleName:HRe,version:Ewe,dependsOn:[...VRe,_Re(e),tIe(e)]}),moduleName:HRe,version:Ewe,dependsOn:VRe},jRe=i(747),URe=i.n(jRe);Math.pow(10,8);const KRe=6048e5,YRe=6e4,ZRe=36e5,XRe=Symbol.for("constructDateFrom");function qRe(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&XRe in e?e[XRe](t):e instanceof Date?new e.constructor(t):new Date(t)}function QRe(e,t){return qRe(t||e,e)}function JRe(e,t){var i;const n=()=>qRe(null===t||void 0===t?void 0:t.in,NaN),o=null!==(i=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==i?i:2,s=function(e){const t={},i=e.split($Re.dateTimeDelimiter);let n;if(i.length>2)return t;/:/.test(i[0])?n=i[0]:(t.date=i[0],n=i[1],$Re.timeZoneDelimiter.test(t.date)&&(t.date=e.split($Re.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length)));if(n){const e=$Re.timezone.exec(n);e?(t.time=n.replace(e[1],""),t.timezone=e[1]):t.time=n}return t}(e);let r;if(s.date){const e=function(e,t){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(i);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:null===s?o:100*s,restDateString:e.slice((n[1]||n[2]).length)}}(s.date,o);r=function(e,t){if(null===t)return new Date(NaN);const i=e.match(eLe);if(!i)return new Date(NaN);const n=!!i[4],o=nLe(i[1]),s=nLe(i[2])-1,r=nLe(i[3]),a=nLe(i[4]),l=nLe(i[5])-1;if(n)return function(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}(0,a,l)?function(e,t,i){const n=new Date(0);n.setUTCFullYear(e,0,4);const o=n.getUTCDay()||7,s=7*(t-1)+i+1-o;return n.setUTCDate(n.getUTCDate()+s),n}(t,a,l):new Date(NaN);{const e=new Date(0);return function(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(sLe[t]||(rLe(e)?29:28))}(t,s,r)&&function(e,t){return t>=1&&t<=(rLe(e)?366:365)}(t,o)?(e.setUTCFullYear(t,s,Math.max(o,r)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(+r))return n();const a=+r;let l,d=0;if(s.time&&(d=function(e){const t=e.match(tLe);if(!t)return NaN;const i=oLe(t[1]),n=oLe(t[2]),o=oLe(t[3]);if(!function(e,t,i){if(24===e)return 0===t&&0===i;return i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}(i,n,o))return NaN;return i*ZRe+n*YRe+1e3*o}(s.time),isNaN(d)))return n();if(!s.timezone){const e=new Date(a+d),i=QRe(0,null===t||void 0===t?void 0:t.in);return i.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),i.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),i}return l=function(e){if("Z"===e)return 0;const t=e.match(iLe);if(!t)return 0;const i="+"===t[1]?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,o))return NaN;return i*(n*ZRe+o*YRe)}(s.timezone),isNaN(l)?n():QRe(a+d+l,null===t||void 0===t?void 0:t.in)}const $Re={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},eLe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,tLe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,iLe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nLe(e){return e?parseInt(e):1}function oLe(e){return e&&parseFloat(e.replace(",","."))||0}const sLe=[31,null,31,30,31,30,31,31,30,31,30,31];function rLe(e){return e%400===0||e%4===0&&e%100!==0}const aLe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function lLe(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const dLe={date:lLe({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:lLe({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:lLe({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},cLe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function hLe(e){return(t,i)=>{let n;if("formatting"===(null!==i&&void 0!==i&&i.context?String(i.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,o=null!==i&&void 0!==i&&i.width?String(i.width):t;n=e.formattingValues[o]||e.formattingValues[t]}else{const t=e.defaultWidth,o=null!==i&&void 0!==i&&i.width?String(i.width):e.defaultWidth;n=e.values[o]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const uLe={ordinalNumber:(e,t)=>{const i=Number(e),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:hLe({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:hLe({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:hLe({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:hLe({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:hLe({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function pLe(e){return function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=i.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;const r=s[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i;return}(a,(e=>e.test(r))):function(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i;return}(a,(e=>e.test(r)));let d;d=e.valueCallback?e.valueCallback(l):l,d=i.valueCallback?i.valueCallback(d):d;return{value:d,rest:t.slice(r.length)}}}const gLe={ordinalNumber:(mLe={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.match(mLe.matchPattern);if(!i)return null;const n=i[0],o=e.match(mLe.parsePattern);if(!o)return null;let s=mLe.valueCallback?mLe.valueCallback(o[0]):o[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(n.length)}}),era:pLe({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:pLe({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:pLe({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:pLe({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:pLe({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var mLe;const vLe={code:"en-US",formatDistance:(e,t,i)=>{let n;const o=aLe[e];return n="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==i&&void 0!==i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n},formatLong:dLe,formatRelative:(e,t,i,n)=>cLe[e],localize:uLe,match:gLe,options:{weekStartsOn:0,firstWeekContainsDate:1}};let fLe={};function yLe(){return fLe}function bLe(e){const t=QRe(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function CLe(e,t){const i=QRe(e,null===t||void 0===t?void 0:t.in);return i.setHours(0,0,0,0),i}function xLe(e,t,i){const[n,o]=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const o=qRe.bind(null,e||i.find((e=>"object"===typeof e)));return i.map(o)}(null===i||void 0===i?void 0:i.in,e,t),s=CLe(n),r=CLe(o),a=+s-bLe(s),l=+r-bLe(r);return Math.round((a-l)/864e5)}function wLe(e,t){const i=QRe(e,null===t||void 0===t?void 0:t.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}function SLe(e,t){const i=QRe(e,null===t||void 0===t?void 0:t.in);return xLe(i,wLe(i))+1}function MLe(e,t){var i,n,o,s,r,a;const l=yLe(),d=null!==(i=null!==(n=null!==(o=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(r=t.locale)||void 0===r||null===(r=r.options)||void 0===r?void 0:r.weekStartsOn)&&void 0!==o?o:l.weekStartsOn)&&void 0!==n?n:null===(a=l.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:0,c=QRe(e,null===t||void 0===t?void 0:t.in),h=c.getDay(),u=(h<d?7:0)+h-d;return c.setDate(c.getDate()-u),c.setHours(0,0,0,0),c}function DLe(e,t){return MLe(e,l(l({},t),{},{weekStartsOn:1}))}function kLe(e,t){const i=QRe(e,null===t||void 0===t?void 0:t.in),n=i.getFullYear(),o=qRe(i,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const s=DLe(o),r=qRe(i,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const a=DLe(r);return i.getTime()>=s.getTime()?n+1:i.getTime()>=a.getTime()?n:n-1}function ILe(e,t){const i=kLe(e,t),n=qRe((null===t||void 0===t?void 0:t.in)||e,0);return n.setFullYear(i,0,4),n.setHours(0,0,0,0),DLe(n)}function ALe(e,t){const i=QRe(e,null===t||void 0===t?void 0:t.in),n=+DLe(i)-+ILe(i);return Math.round(n/KRe)+1}function TLe(e,t){var i,n,o,s,r,a;const l=QRe(e,null===t||void 0===t?void 0:t.in),d=l.getFullYear(),c=yLe(),h=null!==(i=null!==(n=null!==(o=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(r=t.locale)||void 0===r||null===(r=r.options)||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==o?o:c.firstWeekContainsDate)&&void 0!==n?n:null===(a=c.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:1,u=qRe((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d+1,0,h),u.setHours(0,0,0,0);const p=MLe(u,t),g=qRe((null===t||void 0===t?void 0:t.in)||e,0);g.setFullYear(d,0,h),g.setHours(0,0,0,0);const m=MLe(g,t);return+l>=+p?d+1:+l>=+m?d:d-1}function ELe(e,t){var i,n,o,s,r,a;const l=yLe(),d=null!==(i=null!==(n=null!==(o=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(r=t.locale)||void 0===r||null===(r=r.options)||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==o?o:l.firstWeekContainsDate)&&void 0!==n?n:null===(a=l.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:1,c=TLe(e,t),h=qRe((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c,0,d),h.setHours(0,0,0,0);return MLe(h,t)}function RLe(e,t){const i=QRe(e,null===t||void 0===t?void 0:t.in),n=+MLe(i,t)-+ELe(i,t);return Math.round(n/KRe)+1}function LLe(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const PLe={y(e,t){const i=e.getFullYear(),n=i>0?i:1-i;return LLe("yy"===t?n%100:n,t.length)},M(e,t){const i=e.getMonth();return"M"===t?String(i+1):LLe(i+1,2)},d:(e,t)=>LLe(e.getDate(),t.length),a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:(e,t)=>LLe(e.getHours()%12||12,t.length),H:(e,t)=>LLe(e.getHours(),t.length),m:(e,t)=>LLe(e.getMinutes(),t.length),s:(e,t)=>LLe(e.getSeconds(),t.length),S(e,t){const i=t.length,n=e.getMilliseconds();return LLe(Math.trunc(n*Math.pow(10,i-3)),t.length)}},NLe="midnight",FLe="noon",OLe="morning",BLe="afternoon",GLe="evening",zLe="night",_Le={G:function(e,t,i){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return i.ordinalNumber(n,{unit:"year"})}return PLe.y(e,t)},Y:function(e,t,i,n){const o=TLe(e,n),s=o>0?o:1-o;if("YY"===t){return LLe(s%100,2)}return"Yo"===t?i.ordinalNumber(s,{unit:"year"}):LLe(s,t.length)},R:function(e,t){return LLe(kLe(e),t.length)},u:function(e,t){return LLe(e.getFullYear(),t.length)},Q:function(e,t,i){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return LLe(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return LLe(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){const n=e.getMonth();switch(t){case"M":case"MM":return PLe.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return LLe(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){const o=RLe(e,n);return"wo"===t?i.ordinalNumber(o,{unit:"week"}):LLe(o,t.length)},I:function(e,t,i){const n=ALe(e);return"Io"===t?i.ordinalNumber(n,{unit:"week"}):LLe(n,t.length)},d:function(e,t,i){return"do"===t?i.ordinalNumber(e.getDate(),{unit:"date"}):PLe.d(e,t)},D:function(e,t,i){const n=SLe(e);return"Do"===t?i.ordinalNumber(n,{unit:"dayOfYear"}):LLe(n,t.length)},E:function(e,t,i){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){const o=e.getDay(),s=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return LLe(s,2);case"eo":return i.ordinalNumber(s,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){const o=e.getDay(),s=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return LLe(s,t.length);case"co":return i.ordinalNumber(s,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,i){const n=e.getDay(),o=0===n?7:n;switch(t){case"i":return String(o);case"ii":return LLe(o,t.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,i){const n=e.getHours();let o;switch(o=12===n?FLe:0===n?NLe:n/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,i){const n=e.getHours();let o;switch(o=n>=17?GLe:n>=12?BLe:n>=4?OLe:zLe,t){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,i){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),i.ordinalNumber(t,{unit:"hour"})}return PLe.h(e,t)},H:function(e,t,i){return"Ho"===t?i.ordinalNumber(e.getHours(),{unit:"hour"}):PLe.H(e,t)},K:function(e,t,i){const n=e.getHours()%12;return"Ko"===t?i.ordinalNumber(n,{unit:"hour"}):LLe(n,t.length)},k:function(e,t,i){let n=e.getHours();return 0===n&&(n=24),"ko"===t?i.ordinalNumber(n,{unit:"hour"}):LLe(n,t.length)},m:function(e,t,i){return"mo"===t?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):PLe.m(e,t)},s:function(e,t,i){return"so"===t?i.ordinalNumber(e.getSeconds(),{unit:"second"}):PLe.s(e,t)},S:function(e,t){return PLe.S(e,t)},X:function(e,t,i){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return HLe(n);case"XXXX":case"XX":return WLe(n);default:return WLe(n,":")}},x:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"x":return HLe(n);case"xxxx":case"xx":return WLe(n);default:return WLe(n,":")}},O:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+VLe(n,":");default:return"GMT"+WLe(n,":")}},z:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+VLe(n,":");default:return"GMT"+WLe(n,":")}},t:function(e,t,i){return LLe(Math.trunc(+e/1e3),t.length)},T:function(e,t,i){return LLe(+e,t.length)}};function VLe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),s=n%60;return 0===s?i+String(o):i+String(o)+t+LLe(s,2)}function HLe(e,t){if(e%60===0){return(e>0?"-":"+")+LLe(Math.abs(e)/60,2)}return WLe(e,t)}function WLe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=e>0?"-":"+",n=Math.abs(e);return i+LLe(Math.trunc(n/60),2)+t+LLe(n%60,2)}const jLe=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ULe=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},KLe={p:ULe,P:(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],n=i[1],o=i[2];if(!o)return jLe(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",jLe(n,t)).replace("{{time}}",ULe(o,t))}},YLe=/^D+$/,ZLe=/^Y+$/,XLe=["D","DD","YY","YYYY"];function qLe(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function QLe(e){return!(!qLe(e)&&"number"!==typeof e||isNaN(+QRe(e)))}const JLe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$Le=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ePe=/^'([^]*?)'?$/,tPe=/''/g,iPe=/[a-zA-Z]/;function nPe(e,t,i){var n,o,s,r,a,l,d,c,h,u,p,g,m,v;const f=yLe(),y=null!==(n=null!==(o=null===i||void 0===i?void 0:i.locale)&&void 0!==o?o:f.locale)&&void 0!==n?n:vLe,b=null!==(s=null!==(r=null!==(a=null!==(l=null===i||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==l?l:null===i||void 0===i||null===(d=i.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==a?a:f.firstWeekContainsDate)&&void 0!==r?r:null===(c=f.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:1,C=null!==(h=null!==(u=null!==(p=null!==(g=null===i||void 0===i?void 0:i.weekStartsOn)&&void 0!==g?g:null===i||void 0===i||null===(m=i.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==p?p:f.weekStartsOn)&&void 0!==u?u:null===(v=f.locale)||void 0===v||null===(v=v.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==h?h:0,x=QRe(e,null===i||void 0===i?void 0:i.in);if(!QLe(x))throw new RangeError("Invalid time value");let w=t.match($Le).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,KLe[t])(e,y.formatLong)}return e})).join("").match(JLe).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:oPe(e)};if(_Le[t])return{isToken:!0,value:e};if(t.match(iPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(w=y.localize.preprocessor(x,w));const S={firstWeekContainsDate:b,weekStartsOn:C,locale:y};return w.map((n=>{if(!n.isToken)return n.value;const o=n.value;(null!==i&&void 0!==i&&i.useAdditionalWeekYearTokens||!function(e){return ZLe.test(e)}(o))&&(null!==i&&void 0!==i&&i.useAdditionalDayOfYearTokens||!function(e){return YLe.test(e)}(o))||function(e,t,i){const n=function(e,t,i){const n="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(n," to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,i);if(console.warn(n),XLe.includes(e))throw new RangeError(n)}(o,t,String(e));return(0,_Le[o[0]])(x,o,y.localize,S)})).join("")}function oPe(e){const t=e.match(ePe);return t?t[1].replace(tPe,"'"):e}function sPe(e,t){const i=+QRe(e)-+QRe(t);return i<0?-1:i>0?1:i}var rPe=i(521);function aPe(e,t){try{return nPe(JRe(e),t)}catch(i){return e}}const lPe={dateColumnFilter:{filter:"agDateColumnFilter",filterParams:{comparator:(e,t)=>sPe(JRe(t),e)}},numberColumnFilter:{filter:"agNumberColumnFilter"},shortDateTimeFormat:{valueFormatter:e=>aPe(e.value,"dd/MM/yyyy HH:mm")},customDateTimeFormat:{valueFormatter:e=>aPe(e.value,e.column.colDef.custom_format_string)},customNumericFormat:{valueFormatter:e=>{var t;return function(e,t){let i=Number.parseFloat(e);return Number.isNaN(i)?e:i.toFixed(t)}(e.value,null!==(t=e.column.colDef.precision)&&void 0!==t?t:2)}},customCurrencyFormat:{valueFormatter:e=>function(e,t){let i=Number.parseFloat(e);return Number.isNaN(i)?e:t+i.toFixed(2)}(e.value,e.column.colDef.custom_currency_symbol)},timedeltaFormat:{valueFormatter:e=>(0,rPe.duration)(e.value).humanize(!0)}};function dPe(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=e=>null!==e&&"object"===typeof e?dPe(e,t):t(e);return Array.isArray(e)?e.map(n):"object"===typeof e?function(e,t,i){return Object.keys(e).reduce(((n,o)=>i.includes(o)?(n[o]=e[o],n):(n[o]=t(e[o]),n)),{})}(e,n,i):e}class cPe{constructor(){this.baseMapper={quartz:qd,alpine:Qd,balham:Jd},this.partsMapper={colorSchemeLight:Sd,colorSchemeLightWarm:Md,colorSchemeLightCold:Dd,colorSchemeDark:Id,colorSchemeDarkWarm:Ad,colorSchemeDarkBlue:Ed,iconSetQuartz:Gd(void 0),iconSetQuartzLight:zd,iconSetQuartzBold:Vd,iconSetAlpine:Pd,iconSetMaterial:Nd,iconSetQuartzRegular:_d}}streamlitRecipe(e){var t,i;let n=this.baseMapper.balham;const o=(null===e||void 0===e||null===(t=e.font)||void 0===t||null===(i=t.split(",").at(1))||void 0===i?void 0:i.trim())||"Source Sans Pro",s=[o,{googleFont:o}];return n=n.withParams({accentColor:null===e||void 0===e?void 0:e.primaryColor,fontFamily:s,foregroundColor:e.textColor,backgroundColor:e.backgroundColor}).withPart(zd).withPart(this.partsMapper.iconSetQuartzRegular),"dark"===(null===e||void 0===e?void 0:e.base)&&(n=n.withPart(Id)),n}alpineRecipe(){return Qd}balhamRecipe(){return this.baseMapper.themeBalham}materialRecipe(){return Qd.withPart(Nd)}customRecipe(e,t){const{base:i,params:n,parts:o}=e;let s=this.baseMapper[i];return URe().isEmpty(n)||(s=s.withParams(n)),URe().isEmpty(o)||(s=o.reduce(((e,t)=>{const i=this.partsMapper[t];return e.withPart(i)}),s)),s}parse(e,t){const{themeName:i}=e;return({streamlit:()=>this.streamlitRecipe(t),alpine:()=>this.alpineRecipe(),balham:()=>this.balhamRecipe(),material:()=>this.materialRecipe(),custom:()=>this.customRecipe(e,t)}[i]||(()=>Jd))()}}const hPe=["afterDataChange","afterFloatingFilter","afterScroll","animate","cells","chartId","chartThemeName","clientHeight","clientWidth","colDef.cellDataType","colDef.field","colDef.headerName","colDef.type","columns","columns.actualWidth","columns.aggregationActive","columns.autoHeaderHeight","columns.colId","columns.fieldContainsDots","columns.filterActive","columns.firstRightPinned","columns.lastLeftPinned","columns.left","columns.menuVisible","columns.moving","columns.pinned","columns.pivotActive","columns.primary","columns.rowGroupActive","columns.sortIndex","columns.tooltipEnabled","columns.tooltipFieldContainsDots","columns.visible","data","enabled","ended","expanded","finalRange","finished","firstRow","firstRowData","floating","forceBrowserFocus","fromBelow","fromEnterKey","id","initialRange","isFullWidthCell","keepRenderedRows","keepUndoRedoStack","key","lastRow","left","message","name","newData","newPage","newPageSize","newValue","oldValue","operationPerformed","overIndex","pinned","preventScrollOnBrowserFocus","previousValue","route","rowIndex","rowPinned","selected","source","source","sources","started","switchingTab","switchingToolPanel","toIndex","top","type","value","valueChanged","vDirection","visible","width","y"];async function uPe(e,t,i,n,o,s){function r(e){var t;return null==e?null:{id:e.id,data:e.data,rowIndex:e.rowIndex,rowTop:e.rowTop,displayed:e.displayed,isHovered:e.isHovered(),isFullWidthCell:e.isFullWidthCell(),expanded:e.expanded,isExpandable:e.expanded,group:e.group,groupData:e.groupData,aggData:e.aggData,key:e.key,field:e.field,rowGroupColumn:null===(t=e.rowGroupColumn)||void 0===t?void 0:t.getColId(),rowGroupIndex:e.rowIndex,footer:e.footer,parent:r(e.parent),firstChild:e.firstChild,lastChild:e.lastChild,childIndex:e.childIndex,level:e.level,uiLevel:e.uiLevel,allChildrenCount:e.allChildrenCount,leafGroup:e.leafGroup,sibling:r(e.sibling),rowHeight:e.rowHeight,master:e.master,detail:e.detail,rowPinned:e.rowPinned,isRowPinned:e.isRowPinned(),selectable:e.selectable,isSelected:e.isSelected()}}let a=[];null===e||void 0===e||e.forEachNode((e=>{a.push(r(e))}));let l=[];null===e||void 0===e||e.forEachNodeAfterFilter((e=>{e.group||l.push(e.id)}));let d=[];null===e||void 0===e||e.forEachNodeAfterFilterAndSort((e=>{e.group||d.push(e.id)}));let c=[];t?null===e||void 0===e||e.forEachDetailGridInfo((e=>{var t;null===(t=e.api)||void 0===t||t.forEachNode((e=>{e.isSelected()&&c.push(e.id)}))})):null===e||void 0===e||e.forEachNode((e=>{e.isSelected()&&c.push(e.id)}));let h=function e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Array.isArray(t)?t.forEach((t=>e(t,i,n+1))):"object"===typeof t&&Object.keys(t).forEach((function(o){if(n>3)return;if("data"===o)return;let s=[i,o].filter((e=>""!==e)).join(".");hPe.includes(s)?"object"===typeof t[o]&&null!==t[o]&&e(t[o],s,n+1):delete t[o]})),t}(URe().cloneDeep(o));return h.streamlitRerunEventTriggerName=s,{originalDtypes:n.args.frame_dtypes,nodes:a,selectedItems:null===e||void 0===e?void 0:e.getSelectedRows(),gridState:null===e||void 0===e?void 0:e.getState(),columnsState:null===e||void 0===e?void 0:e.getColumnState(),gridOptions:JSON.stringify(i),rowIdsAfterFilter:l,rowIdsAfterSortAndFilter:d,eventData:h}}var pPe=i(812);const gPe=t=>{let{enabled:i,onQuickSearchChange:n,onDownloadClick:o,onManualUpdateClick:s,showFullscreenButton:r=!0,showDownloadButton:a=!0,showSearch:l=!0,showManualUpdateButton:d=!1}=t;const[c,h]=(0,e.useState)(""),[u,p]=(0,e.useState)({x:10,y:10}),[g,m]=(0,e.useState)(!1);return i?(0,pPe.jsxs)("div",{className:"grid-toolbar ".concat(g?"collapsed":""),style:{top:u.y,right:g?0:u.x,left:"auto"},children:[(0,pPe.jsx)("button",{className:"toolbar-button toggle-button",onClick:()=>{m(!g)},title:g?"Expand Toolbar":"Collapse Toolbar",children:g?(0,pPe.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:[(0,pPe.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),(0,pPe.jsx)("path",{d:"M20.41 16.59L15.83 12l4.58-4.59L19 6l-6 6 6 6z"})]}):(0,pPe.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:[(0,pPe.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"}),(0,pPe.jsx)("path",{d:"M3.59 16.59L8.17 12 3.59 7.41 5 6l6 6-6 6z"})]})}),!g&&(0,pPe.jsx)("div",{className:"drag-handle",title:"Drag Toolbar",onMouseDown:e=>{const t=e.currentTarget.parentElement,i=e.clientX-t.getBoundingClientRect().left,n=e.clientY-t.getBoundingClientRect().top,o=e=>{p({x:window.innerWidth-e.clientX-(t.offsetWidth-i),y:e.clientY-n})},s=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)},children:(0,pPe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"16",height:"16",fill:"#D3D3D3",children:(0,pPe.jsx)("path",{d:"M7 2a2 2 0 10.001 4.001A2 2 0 007 2zm0 6a2 2 0 10.001 4.001A2 2 0 007 8zm0 6a2 2 0 10.001 4.001A2 2 0 007 14zm6-8a2 2 0 10-.001-4.001A2 2 0 0013 6zm0 2a2 2 0 10.001 4.001A2 2 0 0013 8zm0 6a2 2 0 10.001 4.001A2 2 0 0013 14z"})})}),d&&!g&&(0,pPe.jsx)("button",{className:"toolbar-button update-button",onClick:s,title:"Manual Update",children:(0,pPe.jsxs)("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,pPe.jsx)("path",{d:"M12.9998 8L6 14L12.9998 21",stroke:"#000000","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),(0,pPe.jsx)("path",{d:"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984",stroke:"#000000","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]})}),r&&!g&&(0,pPe.jsx)("button",{className:"toolbar-button fullscreen-button",onClick:()=>{const e=document.getElementById("gridContainer");document.fullscreenElement?document.exitFullscreen():null===e||void 0===e||e.requestFullscreen()},title:"Toggle Fullscreen View",children:(0,pPe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:(0,pPe.jsx)("path",{d:"M3 3h6v2H5v4H3V3zm12 0h6v6h-2V5h-4V3zm6 12v6h-6v-2h4v-4h2zm-12 6H3v-6h2v4h4v2z"})})}),a&&!g&&(0,pPe.jsx)("button",{className:"toolbar-button download-button",onClick:o,title:"Download as CSV",children:(0,pPe.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,pPe.jsx)("path",{d:"M6 21H18M12 3V17M12 17L17 12M12 17L7 12",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})}),l&&!g&&(0,pPe.jsx)("div",{className:"toolbar-search",children:(0,pPe.jsxs)("div",{className:"toolbar-input",children:[(0,pPe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:(0,pPe.jsx)("path",{d:"M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"})}),(0,pPe.jsx)("input",{type:"text",value:c,onChange:e=>{const t=e.target.value;h(t),null===n||void 0===n||n(t)},placeholder:"Search...",title:"Quick Search"})]})})]}):null};function mPe(e){const t="::JSCODE::";let i=new RegExp("".concat(t,"(.*?)").concat(t),"s").exec(e);if(i){const e=i[1];return new Function("return "+e)()}return e}class vPe extends e.Component{constructor(t){var i,n;super(t),this.state=void 0,this.gridContainerRef=void 0,this.isGridAutoHeightOn=void 0,this.renderedGridHeightPrevious=0,this.themeParser=void 0,this.render=()=>{var e,t,i;let n=!0===this.props.args.manual_update;return(0,pPe.jsxs)("div",{id:"gridContainer",ref:this.gridContainerRef,style:this.defineContainerHeight(),children:[(0,pPe.jsx)(gPe,{showManualUpdateButton:n,enabled:null===(e=this.props.args.show_toolbar)||void 0===e||e,showSearch:null===(t=this.props.args.show_search)||void 0===t||t,showDownloadButton:null===(i=this.props.args.show_download_button)||void 0===i||i,onQuickSearchChange:e=>{var t,i;null===(t=this.state.api)||void 0===t||t.setGridOption("quickFilterText",e),null===(i=this.state.api)||void 0===i||i.hideOverlay()},onDownloadClick:()=>{var e;null===(e=this.state.api)||void 0===e||e.exportDataAsCsv()},onManualUpdateClick:()=>{console.log("Manual update triggered")}}),(0,pPe.jsx)(Rg,{onGridReady:e=>this.onGridReady(e),gridOptions:this.state.gridOptions})]})},this.gridContainerRef=e.createRef(),t.args.custom_css&&function(e){var t=function(e){var t=[];for(let i in e){let n=i+" {";for(let t in e[i])n+=t+": "+e[i][t]+";";n+="}",t.push(n)}return t.join("\n")}(e),i=document.createElement("style");i.type="text/css",i.innerText=t,document.head.appendChild(i)}(t.args.custom_css),t.args.pro_assets&&Array.isArray(t.args.pro_assets)&&t.args.pro_assets.forEach((e=>{!function(e,t){if(e){const t=document.createElement("script");t.textContent=e,document.body.appendChild(t)}if(t){const e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}}(null===e||void 0===e?void 0:e.js,null===e||void 0===e?void 0:e.css)}));const o=t.args.enable_enterprise_modules;!0===o||"enterprise+AgCharts"===o?(fo.registerModules([WRe.with(xbe)]),"license_key"in t.args&&Bbe.setLicenseKey(t.args.license_key)):"enterpriseOnly"===o?(fo.registerModules([WRe]),"license_key"in t.args&&Bbe.setLicenseKey(t.args.license_key)):fo.registerModules([Sp]),this.isGridAutoHeightOn="autoHeight"===(null===(i=this.props.args.gridOptions)||void 0===i?void 0:i.domLayout);var s=this.parseGridoptions();const r=null===(n=window)||void 0===n?void 0:n.StreamlitAgGridPro;r&&(r.returnGridValue=this.returnGridValue.bind(this),r.extenders&&Array.isArray(r.extenders)&&r.extenders.forEach((e=>{"function"===typeof e&&e(s)}))),this.state={gridHeight:this.props.args.height,gridOptions:s,isRowDataEdited:!1,api:void 0,enterprise_features_enabled:t.args.enable_enterprise_modules,debug:!0},this.state.debug&&(console.log("***Received Props",t),console.log("*** Processed State",this.state))}parseGridoptions(){let e=URe().cloneDeep(this.props.args.gridOptions);this.props.args.allow_unsafe_jscode&&(console.warn("flag allow_unsafe_jscode is on."),e=dPe(e,mPe,["rowData"])),URe().every(e.rowData,(e=>"__pandas_index"in e))&&("getRowId"in e||(e.getRowId=e=>e.data.__pandas_index)),"getRowId"in e||console.warn("getRowId was not set. Grid may behave bad when updating."),e.columnTypes=Object.assign(e.columnTypes||{},lPe),this.themeParser=new cPe;let t=this.props.theme,i=this.props.args.theme;return e.theme=this.themeParser.parse(i,t),e}attachStreamlitRerunToEvents(e){this.props.args.update_on.forEach((t=>{Array.isArray(t)?e.addEventListener(t[0],(0,jRe.debounce)((e=>this.returnGridValue(e,t[0])),t[1])):e.addEventListener(t,(e=>this.returnGridValue(e,t))),console.log("Attached grid return event %s",t)}))}loadColumnsState(){const e=this.props.args.columns_state;var t;null!=e&&(null===(t=this.state.api)||void 0===t||t.applyColumnState({state:e,applyOrder:!0}))}resizeGridContainer(){var e;const t=null===(e=this.gridContainerRef.current)||void 0===e?void 0:e.clientHeight;t&&t>0&&t!==this.renderedGridHeightPrevious&&(this.renderedGridHeightPrevious=t,Px.setFrameHeight(t))}async getGridReturnValue(e,t){return uPe(this.state.api,this.state.enterprise_features_enabled,this.state.gridOptions,this.props,e,t)}returnGridValue(e,t){this.state.debug&&console.log("refreshing grid from ".concat(t)),this.getGridReturnValue(e,t).then((e=>Px.setComponentValue(e)))}defineContainerHeight(){return this.isGridAutoHeightOn?{width:this.props.width}:{width:this.props.width,height:this.props.args.height}}componentDidUpdate(e,t,i){const n=e.args.gridOptions,o=this.props.args.gridOptions;if(!URe().isEqual(e.theme,this.props.theme)||!URe().isEqual(this.props.args.theme,e.args.theme)){var s,r;let e=this.props.theme,t=this.props.args.theme;null===(s=this.state.api)||void 0===s||s.updateGridOptions({theme:null===(r=this.themeParser)||void 0===r?void 0:r.parse(t,e)})}if(!URe().isEqual(n,o)){var a;let e=this.parseGridoptions(),t=e.rowData;var l;if(!this.state.isRowDataEdited)null===(l=this.state.api)||void 0===l||l.updateGridOptions({rowData:t});delete e.rowData,null===(a=this.state.api)||void 0===a||a.updateGridOptions(e)}URe().isEqual(e.args.columns_state,this.props.args.columns_state)||this.loadColumnsState()}onGridReady(e){var t,i,n;(this.setState({api:e.api}),this.state.api=e.api,null===(t=this.state.api)||void 0===t||t.addEventListener("rowGroupOpened",(e=>this.resizeGridContainer())),null===(i=this.state.api)||void 0===i||i.addEventListener("firstDataRendered",(e=>{this.resizeGridContainer()})),this.state.api.addEventListener("gridSizeChanged",(e=>this.onGridSizeChanged(e))),this.state.api.addEventListener("cellValueChanged",(e=>this.cellValueChanged(e))),this.attachStreamlitRerunToEvents(this.state.api),this.state.enterprise_features_enabled)&&(null===(n=this.state.api)||void 0===n||n.forEachDetailGridInfo((e=>{void 0!==e.api&&this.attachStreamlitRerunToEvents(e.api)})));let{onGridReady:o}=this.state.gridOptions;o&&o(e)}onGridSizeChanged(e){this.resizeGridContainer()}cellValueChanged(e){console.log("Data edited on Grid. Ignoring further changes from data paramener (AgGrid(data=dataframe))"),this.setState({isRowDataEdited:!0})}processPreselection(){if(this.props.args.gridOptions.preSelectAllRows||!1){var e;null===(e=this.state.api)||void 0===e||e.selectAll()}else{var t=this.props.args.gridOptions.preSelectedRows;if(t||(null===t||void 0===t?void 0:t.length())>0)for(var i in t){var n,o;null===(n=this.state.api)||void 0===n||null===(o=n.getRowNode(t[i]))||void 0===o||o.setSelected(!0,!1)}}}}const fPe=function(e){var t=function(t){function i(e){var i=t.call(this,e)||this;return i.componentDidMount=function(){Px.events.addEventListener(Px.RENDER_EVENT,i.onRenderEvent),Px.setComponentReady()},i.componentDidUpdate=function(){null!=i.state.componentError&&Px.setFrameHeight()},i.componentWillUnmount=function(){Px.events.removeEventListener(Px.RENDER_EVENT,i.onRenderEvent)},i.onRenderEvent=function(e){i.setState({renderData:e.detail})},i.state={renderData:void 0,componentError:void 0},i}return Fx(i,t),i.prototype.render=function(){return null!=this.state.componentError?Wg.createElement("div",null,Wg.createElement("h1",null,"Component Error"),Wg.createElement("span",null,this.state.componentError.message)):null==this.state.renderData?null:Wg.createElement(e,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},i.getDerivedStateFromError=function(e){return{componentError:e}},i}(Wg.PureComponent);return Hg()(t,e)}(vPe),yPe=document.getElementById("root");if(yPe){(0,t.H)(yPe).render((0,pPe.jsx)(fPe,{}))}})()})();
//# sourceMappingURL=main.c743871e.js.map